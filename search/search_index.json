{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to MkDocs For full documentation visit mkdocs.org . Commands mkdocs new [dir-name] - Create a new project. mkdocs serve - Start the live-reloading docs server. mkdocs build - Build the documentation site. mkdocs -h - Print help message and exit. Project layout mkdocs.yml # The configuration file. docs/ index.md # The documentation homepage. ... # Other markdown pages, images and other files.","title":"\u4e3b\u9875"},{"location":"#welcome-to-mkdocs","text":"For full documentation visit mkdocs.org .","title":"Welcome to MkDocs"},{"location":"#commands","text":"mkdocs new [dir-name] - Create a new project. mkdocs serve - Start the live-reloading docs server. mkdocs build - Build the documentation site. mkdocs -h - Print help message and exit.","title":"Commands"},{"location":"#project-layout","text":"mkdocs.yml # The configuration file. docs/ index.md # The documentation homepage. ... # Other markdown pages, images and other files.","title":"Project layout"},{"location":"JDBC/","text":"\u6587\u6863\u5bc6\u7ea7\uff1a\u3010 - \u3011 \u8bf4\u660e\uff1a\u516c\u5f00 \u6587\u6863\u4fee\u8ba2\u5386\u53f2 \u5e8f\u53f7 \u6587\u6863\u7248\u672c \u7a0b\u5e8f\u7248\u672c \u7f16\u64b0\u4eba A-\u589e\u52a0 M-\u66f4\u65b0 D-\u5220\u51cf \u53d8\u66f4\u8bf4\u660e \u5b8c\u6210\u65e5\u671f \u8bc4\u5ba1\u4eba \u8bc4\u5ba1\u65e5\u671f \u8bc4\u5ba1\u7ed3\u679c [\u901a\u8fc7/\u62d2\u7edd] 1 1.0 11.0 \u5468\u5f66\u5f64 A \u6574\u7248\u7f16\u5199 2021-7-12 \u5434\u751f\u52c7 2021-7-12 \u901a\u8fc7 2 2.0 12.0 \u66f9\u831c M \u4fee\u6539\u7b2c\u4e8c\u7ae0\u7c7b\u6269\u5c55\u30014.3\u8fde\u63a5\u53c2\u6570 2022-5-14 \u5468\u5f66\u5f64 2022-5-14 \u901a\u8fc7 3 2.1 12.0 \u66f9\u831c M \u4fee\u6539\u7b2c3.1\u57fa\u672c\u6570\u636e\u7c7b\u578b 2022-6-20 \u5468\u5f66\u5f64 2022-6-20 \u901a\u8fc7 \u4e00. \u865a\u8c37\u6570\u636e\u5e93\u7684JDBC\u9a71\u52a8\u7a0b\u5e8f\u6982\u8ff0 Java \u6570\u636e\u5e93\u8fde\u63a5\uff08Java Database Connectivity\uff0c\u7b80\u79f0 JDBC\uff09\u662f Java \u8bed\u8a00\u4e2d\u7528\u6765\u89c4\u8303\u5ba2\u6237\u7aef\u7a0b\u5e8f\u5982\u4f55\u8bbf\u95ee\u6570\u636e\u5e93\u7684\u5e94\u7528\u7a0b\u5e8f\u63a5\u53e3\uff0c\u63d0\u4f9b\u4e86\u8bf8\u5982\u67e5\u8be2\u548c\u66f4\u65b0\u6570\u636e\u5e93\u4e2d\u6570\u636e\u7684\u65b9\u6cd5\uff0c\u53ef\u4ee5\u4e3a\u591a\u79cd\u5173\u7cfb\u6570\u636e\u5e93\u63d0\u4f9b\u7edf\u4e00\u8bbf\u95ee\u3002JDBC \u63d0\u4f9b\u4e86\u4e00\u79cd\u57fa\u51c6\uff0c\u901a\u8fc7\u6b64\u57fa\u51c6\u6570\u636e\u5e93\u5f00\u53d1\u4eba\u5458\u53ef\u6784\u5efa\u66f4\u9ad8\u7ea7\u7684\u5de5\u5177\u548c\u63a5\u53e3\uff0c\u4e5f\u53ef\u901a\u8fc7\u6b64\u57fa\u51c6\u7f16\u5199\u6570\u636e\u5e93\u5e94\u7528\u7a0b\u5e8f\u3002 \u865a\u8c37\u6570\u636e\u5e93\u7684 JDBC \u9a71\u52a8\u7a0b\u5e8f\uff08\u4ee5\u4e0b\u7b80\u79f0\uff1a\u865a\u8c37 JDBC\uff09\u5b9e\u73b0\u4e86 Java \u7a0b\u5e8f\u548c\u865a\u8c37\u6570\u636e\u5e93\u901a\u4fe1\uff0c\u652f\u6301 SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u7684\u8bbf\u95ee\uff0c\u540c\u65f6\u4e5f\u662f\u6784\u9020\u9ad8\u7ea7 API \u548c\u6570\u636e\u5e93\u5f00\u53d1\u5de5\u5177\u7684\u57fa\u7840\u3002 \u7528\u6237\u60f3\u8981\u5b9e\u73b0\u5bf9\u6570\u636e\u5e93\u7684\u8bbf\u95ee\uff0c\u4e00\u822c\u8981\u7ecf\u8fc7\u5982\u4e0b\u7684\u6b65\u9aa4\uff1a 1. \u901a\u8fc7\u9a71\u52a8\u5668\u7ba1\u7406\u5668\u83b7\u53d6\u8fde\u63a5\u63a5\u53e3\uff1b 2. \u83b7\u5f97 Statement \u6216 Statement \u5b50\u7c7b\uff1b 3. \u901a\u8fc7 Statement \u6267\u884c SQL \u547d\u4ee4\uff1b 4. \u5904\u7406\u6267\u884c\u7ed3\u679c\uff1b 5. \u5173\u95ed Statement\uff1b 6. \u5173\u95ed\u8fde\u63a5\u3002 JDBC \u7ed3\u6784\u56fe, \u5982\u56fe1.1\u6240\u793a\u3002 \u56fe1.1 JDBC\u7ed3\u6784\u56fe \u4f7f\u7528\u865a\u8c37 JDBC \u5b9e\u73b0\u5e94\u7528\u7a0b\u5e8f\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u4e4b\u95f4\u7684\u8fde\u63a5\u670d\u52a1\uff0c\u5e94\u7528\u7a0b\u5e8f\u6240\u5728\u8ba1\u7b97\u673a\u9700\u5df2\u5b89\u88c5 Java \u8fd0\u884c\u73af\u5883\uff08Java Runtime Environment, \u7b80\u79f0 JRE\uff09\u3002\u865a\u8c37 JDBC \u53c2\u7167 JDBC API \u5b9e\u73b0\uff0c\u652f\u6301 JDBC 3.0 \u529f\u80fd\uff0cJava \u5e94\u7528\u7a0b\u5e8f\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u4e4b\u95f4\u7684\u6240\u6709\u64cd\u4f5c\u5747\u9700\u901a\u8fc7\u865a\u8c37 JDBC \u6765\u5b8c\u6210\u3002 \u4f7f\u7528\u865a\u8c37 JDBC \u9700\u8981 JRE 1.6 \u7248\u6216\u66f4\u9ad8\u7248\u672c\u7684 Java \u8fd0\u884c\u65f6\u73af\u5883 (JRE)\u3002 {.is-info} \u4e8c. \u865a\u8c37\u6570\u636e\u5e93\u7684JDBC\u63a5\u53e3\u548c\u5bf9\u8c61\u7c7b JDBC 3.0 \u89c4\u8303\u7531 JDBC 1.0\u3001JDBC 2.0 \u884d\u751f\u800c\u6765\uff0c\u4e3b\u8981\u5305\u542b java.sql \u5305\u4ee5\u53ca javax.sql \u5305\uff0c\u6570\u636e\u5e93 JDBC \u9a71\u52a8\u5b9e\u73b0 JDBC 3.0 \u89c4\u8303\u6240\u5b9a\u4e49\u7684\u7279\u6027\u63a5\u53e3\uff0c\u5373\u53ef\u8fbe\u5230\u5bf9\u6807\u51c6 JDBC 3.0 \u89c4\u8303\u7684\u652f\u6301\u3002 \u865a\u8c37 JDBC \u57fa\u4e8e JDBC 3.0 \u89c4\u8303\u5b9e\u73b0\uff0c\u5b9e\u73b0\u63a5\u53e3\u7c7b\u6620\u5c04\uff0c\u5982\u88682.1\u6240\u793a\u3002 \u88682.1 \u865a\u8c37JDBC\u5b9e\u73b0\u63a5\u53e3\u7c7b | \u63a5\u53e3 | \u865a\u8c37JDBC\u5b9e\u73b0\u7c7b | | ---------------------------------- | ---------------------------------------- | | java.sql.Driver | com.xugu.cloudjdbc.Driver | | java.sql.Connection | com.xugu.cloudjdbc.Connection | | java.sql.Statement | com.xugu.cloudjdbc.Statement | | java.sql.PreparedStatement | com.xugu.cloudjdbc.PreparedStatement | | java.sql.CallableStatement | com.xugu.cloudjdbc.CallableStatement | | java.sql.ResultSet | com.xugu.cloudjdbc.ResultSet | | java.sql.ResultSetMetaData | com.xugu.cloudjdbc.ResultSetMetaData | | java.sql.DatabaseMetaData | com.xugu.cloudjdbc.DatabaseMetaData | | java.sql.PrameterMetaData | com.xugu.cloudjdbc.PrameterMetaData | | java.sql.Types | com.xugu.cloudjdbc.Types | | java.sql.Blob | com.xugu.cloudjdbc.Blob | | java.sql.Clob | com.xugu.cloudjdbc.Clob | | java.sql.Savepoint | com.xugu.cloudjdbc.Savepoint | | javax.sql.DataSource | com.xugu.pool.XgDataSource | | javax.sql.ConnectionPoolDataSource | com.xugu.pool.XgConnectionPoolDataSource | | javx.sql.PooledConnection | com.xugu.pool.XgPooledConnection | \u9664\u4e86\u4ee5\u4e0a\u6807\u51c6\u7c7b\u63a5\u53e3\u5916\uff0c\u865a\u8c37 JDBC \u8fd8\u6269\u5c55\u5b9e\u73b0\u4e86\u4ee5\u4e0b\u7c7b\uff1a - com.xugu.cloudjdbc.ClientInfo - com.xugu.cloudjdbc.OutParameter - com.xugu.cloudjdbc.Rowid - com.xugu.cloudjdbc.SQLXml - com.xugu.cloudjdbc.SSL - com.xugu.pool.StatementWrapper - com.xugu.pool.PreparedStatementWrapper \u4e09. \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b 3.1 \u57fa\u672c\u6570\u636e\u7c7b\u578b \u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b\u3001\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u3001Java \u6570\u636e\u7c7b\u578b\u4e09\u8005\u6620\u5c04\u5173\u7cfb\uff0c\u5982\u88683.1\u6240\u793a\u3002 \u88683.1 \u6570\u636e\u7c7b\u578b\u6620\u5c04\u5173\u7cfb \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b \u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b Java \u6570\u636e\u7c7b\u578b BOOLEAN BOOLEAN boolean SMALLINT SMALLINT short TINYINT TINYINT byte INTEGER INTEGER int BIGINT BIGINT long FLOAT FLOAT float DOUBLE DOUBLE double NUMERIC NUMERIC BigDecimal DECIMAL BigDecimal CHAR CHAR String NCHAR NCHAR String VARCHAR VARCHAR String VARCHAR2 VARCHAR String NVARCHAR2 VARCHAR String BLOB BLOB Blob CLOB CLOB Clob NCLOB BINARY BINARY byte[] VARBINARY LONG VARBINARY DATE DATE Date TIME TIME Time TIMESTAMP TIMESTAMP Timestamp 3.2 \u6269\u5c55\u6570\u636e\u7c7b\u578b \u865a\u8c37 JDBC \u9664\u4e86\u5b9e\u73b0\u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b\uff0c\u8fd8\u6839\u636e\u865a\u8c37\u6570\u636e\u5e93\u81ea\u6709\u7c7b\u578b\u6269\u5c55\u4e86\u90e8\u5206\u6570\u636e\u7c7b\u578b\uff08\u88683.2\u6240\u793a\uff09\uff0c\u5305\u62ec\u4ee5\u4e0b\u6570\u636e\u7c7b\u578b\u3002 1. \u65f6\u95f4\u6570\u636e\u7c7b\u578b DATETIME\u2014\u2014\u2014 \u65e5\u671f\u65f6\u95f4\u7c7b\u578b DATETIME WITH TIME ZONE \u2014\u2014\u2014 \u5e26\u65f6\u533a\u7684\u65e5\u671f\u65f6\u95f4\u7c7b\u578b TIME WITH TIME ZONE \u2014\u2014\u2014 \u5e26\u65f6\u533a\u7684\u65f6\u95f4\u7c7b\u578b INTERVAL YEAR \u2014\u2014\u2014 \u5e74\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL MONTH \u2014\u2014\u2014 \u6708\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY\u2014\u2014\u2014 \u65e5\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL HOUR \u2014\u2014\u2014 \u5c0f\u65f6\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL MINUTE \u2014\u2014\u2014 \u5206\u949f\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL SECOND \u2014\u2014\u2014 \u79d2\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL YEAR TO MONTH \u2014\u2014\u2014 \u5e74\u5230\u6708\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY TO HOUR \u2014\u2014\u2014 \u65e5\u5230\u5c0f\u65f6\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY TO MINUTE \u2014\u2014\u2014 \u65e5\u5230\u5206\u949f\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY TO SECOND \u2014\u2014\u2014 \u65e5\u5230\u79d2\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL HOUR TO MINUTE \u2014\u2014\u2014 \u5c0f\u65f6\u5230\u5206\u949f\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL HOUR TO SECOND \u2014\u2014\u2014 \u5c0f\u65f6\u5230\u79d2\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL MINUTE TO SECOND \u2014\u2014\u2014 \u5206\u949f\u5230\u79d2\u7684\u65f6\u95f4\u95f4\u9694 2. \u6e38\u6807\u6570\u636e\u7c7b\u578b\uff08\u53ea\u5728\u5b58\u50a8\u8fc7\u7a0b\u3001\u51fd\u6570\u3001\u5305\u4e2d\u4f7f\u7528\uff09 CURSOR \u2014\u2014\u2014 \u6e38\u6807\u6570\u636e\u7c7b\u578b SYS_REFCURSOR \u2014\u2014\u2014 \u8fd4\u56de\u6e38\u6807\u6570\u636e\u7c7b\u578b 3. \u5176\u4ed6\u6570\u636e\u7c7b\u578b GUID \u2014\u2014\u2014 \u5168\u5c40\u552f\u4e00\u6807\u8bc6\u7b26 \u88683.2 \u6269\u5c55\u6570\u636e\u7c7b\u578b\u5bf9\u5e94\u8868 \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b \u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b Java \u6570\u636e\u7c7b\u578b DATETIME DATETIME Timestamp DATETIME WITH TIME ZONE DATETIME_TZ String TIME WITH TIME ZONE TIME_TZ String INTERVAL YEAR INTERVAL_Y String INTERVAL MONTH INTERVAL_M INTERVAL DAY INTERVAL_D INTERVAL HOUR INTERVAL_H INTERVAL MINUTE INTERVAL_MI INTERVAL SECOND INTERVAL_S String INTERVAL YEAR TO MONTH INTERVAL_Y2M INTERVAL DAY TO HOUR INTERVAL_D2H INTERVAL DAY TO MINUTE INTERVAL_D2M INTERVAL DAY TO SECOND INTERVAL_D2S INTERVAL HOUR TO MINUTE INTERVAL_H2M INTERVAL HOUR TO SECOND INTERVAL_H2S INTERVAL MINUTE TO SECOND INTERVAL_M2S CURSOR CURSOR \u65e0\u5bf9\u5e94\u7c7b\u578b SYS_REFCURSOR REFCUR GUID GUID String \u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528 ResultSet \u5bf9\u8c61\u6765\u5bf9\u5e94\u83b7\u53d6\u6e38\u6807\u6240\u8fd4\u56de\u6570\u636e\u3002 {.is-info} 3.3 \u6570\u636e\u7c7b\u578b\u8f6c\u6362 \u5728\u8c03\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u4e2d\u7684\u67d0\u4e9b\u65b9\u6cd5\u65f6\uff0c\u9700\u8fdb\u884c Java \u6570\u636e\u7c7b\u578b\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u7684\u8f6c\u6362\uff0c\u8fd9\u4e9b\u65b9\u6cd5\u5305\u62ec\uff1a - ResultSet \u7c7b get\\<Type> \u65b9\u6cd5\uff1b - ResultSet \u7c7b update\\<Type> \u65b9\u6cd5\uff1b - CallableStatement \u7c7b get\\<Type> \u65b9\u6cd5\uff1b - PreparedStatement \u7c7b set\\<Type> \u65b9\u6cd5\u3002 \u6570\u636e\u7c7b\u578b\u4e4b\u95f4\u7684\u8f6c\u6362\uff0c\u9700\u9075\u4ece Java \u6570\u636e\u7c7b\u578b\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u6620\u5c04\u5173\u7cfb\u89c4\u5219\uff0c\u5426\u5219\u53ef\u80fd\u8f6c\u6362\u5931\u8d25\u3002 1. com.xugu.cloudjdbc.ResultSet \u7c7b\u4e2d get\\<Type> \u65b9\u6cd5\u7684\u7c7b\u578b\u8f6c\u6362\uff0c\u5982\u88683.3\u6240\u793a\u3002 2. com.xugu.cloudjdbc.PreparedStatement \u7c7b\u4e2d set\\<Type> \u65b9\u6cd5\u7684\u7c7b\u578b\u8f6c\u6362\uff0c\u5982\u88683.4\u6240\u793a\u3002 X\uff08\u65e0\u4e22\u5931\u8f6c\u6362\uff09\uff1a\u6307\u4ee5\u957f\u7cbe\u5ea6\u7c7b\u578b\u7684 get\\<Type> \u65b9\u6cd5\u83b7\u53d6\u77ed\u7cbe\u5ea6\u6570\u636e\u7c7b\u578b\u5217\u503c\u65e0\u4e22\u5931\u3002 \u5982\uff1a\u4f7f\u7528 getInt() \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u4e3a smallint \u7684\u5217\u6570\u636e\uff0c\u83b7\u53d6\u6570\u636e\u5b8c\u6574\u3002 Z\uff08\u4f9d\u8d56\u8f6c\u6362\uff09\uff1a\u6307 get\\<Type> \u65b9\u6cd5\u4e2d\u7684 Type \u7c7b\u578b\u4e0e\u83b7\u53d6\u6570\u636e\u5e93\u4e2d\u5217\u7684\u6570\u636e\u7c7b\u578b\u4e0d\u4e00\u81f4\uff0c\u6b64\u65f6\u9700\u8981\u901a\u8fc7\u5176\u4ed6\u6570\u636e\u7c7b\u578b\u8f6c\u6362\u4e3a Type \u6570\u636e\u7c7b\u578b\uff0c\u6b64\u8f6c\u6362\u8fc7\u7a0b\u503c\u53ef\u80fd\u4e22\u5931\u90e8\u5206\u6570\u636e\u3002 \u5982\uff1a\u4f7f\u7528 getInt() \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u4e3a float \u7684\u5217\u6570\u636e\uff0c\u53ef\u83b7\u53d6 float \u5217\u6570\u636e\u7684\u6574\u6570\u503c\uff0c\u800c\u5c0f\u6570\u7cbe\u5ea6\u503c\u5c06\u4e22\u5931\u3002 Y\uff08\u76f4\u63a5\u8f6c\u6362\uff09\uff1a\u6307 get\\<Type> \u65b9\u6cd5\u4e2d\u7684 Type \u7c7b\u578b\u4e0e\u83b7\u53d6\u6570\u636e\u5e93\u4e2d\u5217\u7684\u6570\u636e\u7c7b\u578b\u4e00\u81f4\u3002 \u5982\uff1a\u4f7f\u7528 getInt() \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u4e3a integer \u7684\u5217\u6570\u636e\uff0c\u76f4\u63a5\u83b7\u53d6\u5b8c\u6574\u6570\u636e\u3002 {.is-info} P\uff08\u5141\u8bb8\u63d2\u5165\uff09\uff1a\u6307 set\\<Type> \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u5e93\u4e2d\u5217\u6570\u636e\u65f6\uff0c\u6570\u636e\u65e0\u635f\u5931\u5b58\u5165\u6570\u636e\u5e93\u4e2d\u3002 \u5982\uff1a\u4f7f\u7528 setInt() \u65b9\u6cd5\u8bbe\u7f6e\u5217\u6570\u636e\u7c7b\u578b\u4e3a bigint \u7684\u6570\u636e\u65f6\uff0c\u6570\u636e\u53ef\u6b63\u786e\u5b58\u5165\u3002 Z\uff08\u90e8\u5206\u63d2\u5165\uff09\uff1a\u6307 set\\<Type> \u65b9\u6cd5\u4e2d\u7684 Type \u7c7b\u578b\u548c\u6570\u636e\u5e93\u4e2d\u5217\u6570\u636e\u7c7b\u578b\u4e0d\u4e00\u81f4\uff0c\u6570\u636e\u4ec5\u80fd\u90e8\u5206\u6b63\u786e\u5b58\u5165\u3002 \u5982\uff1a\u4f7f\u7528 setInt() \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u5e93\u5217\u7c7b\u578b\u4e3a tinyint \u7684\u6570\u636e\uff0c\u56e0 tinyint \u8868\u793a\u8303\u56f4\u4e3a-128\uff5e127 \u7684\u6574\u6570\u503c\uff0c\u6545\u800c tinyint\u8868\u793a\u8303\u56f4\u5185\u6570\u636e\u53ef\u6b63\u786e\u5b58\u5165\uff0c\u8303\u56f4\u5916\u6570\u636e\u5c06\u63d2\u5165\u5931\u8d25\u3002 {.is-info} \u56db. \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5 4.1 \u90e8\u7f72JDBC\u9a71\u52a8\u7a0b\u5e8f \u901a\u8fc7\u865a\u8c37 JDBC \u9a71\u52a8\u8bbf\u95ee\u865a\u8c37\u6570\u636e\u5e93\uff0c\u9996\u5148\u5e94\u4fdd\u8bc1\u5e94\u7528\u7a0b\u5e8f\u6b63\u786e\u5f15\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u5305 (cloudjdbc-*.*.*.jar)\uff0c\u5373\u5c06\u9a71\u52a8\u5305\u62f7\u8d1d\u81f3\u5e94\u7528\u7a0b\u5e8f\u5e76\u6dfb\u52a0\u5f15\u7528\u3002 4.2 \u52a0\u8f7dJDBC\u9a71\u52a8\u7a0b\u5e8f \u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u8fdb\u884c\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u8c03\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u7a0b\u5e8f\uff0c\u9996\u5148\u8981\u5c06\u865a\u8c37 JDBC \u9a71\u52a8\u52a0\u8f7d\u5230\u7cfb\u7edf\u5185\u5b58\u4e2d\uff0c\u7136\u540e\u4f9b\u7cfb\u7edf\u4f7f\u7528\u3002\u865a\u8c37 JDBC \u7684\u9a71\u52a8\u5b9e\u73b0\u7c7b\u4e3acom.xugu.cloudjdbc.Driver\uff0c\u4ee5\u4e0b\u662f\u5c06\u865a\u8c37 JDBC \u9a71\u52a8\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\u7684\u4ee3\u7801\uff1a //\u663e\u793a\u6ce8\u518c DriverManager.registerDriver(new com.xugu.cloudjdbc.Driver())\u037e //\u9690\u5f0f\u6ce8\u518c Class.forName(\u201ccom.xugu.cloudjdbc.Driver\u201d)\u037e \u9690\u5f0f\u6ce8\u518c\u5373\u901a\u8fc7 Class.forName() \u5c06\u5bf9\u5e94\u7684\u9a71\u52a8\u7c7b\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\uff0c\u5c06\u6267\u884c\u5185\u5b58\u4e2d\u7684 static \u9759\u6001\u4ee3\u7801\u6bb5\uff0c\u6b64\u4ee3\u7801\u6bb5\u4f1a\u521b\u5efa\u4e00\u4e2a\u865a\u8c37 JDBC \u9a71\u52a8\u7684\u5b9e\u4f8b\uff0c\u5e76\u653e\u5165 DriverManager \u4e2d\uff0c\u4f9b DriverManager \u4f7f\u7528\u3002 {.is-info} 4.3 \u8fde\u63a5\u5b57\u4e32\u53ca\u53c2\u6570\u8bbe\u7f6e \u865a\u8c37 JDBC \u9a71\u52a8\u8fde\u63a5 URL \u4e32\u683c\u5f0f\uff1a jdbc:xugu://serverIP:portNumber/databaseName[?property=value[&property=value]] \u865a\u8c37 JDBC \u9a71\u52a8\u8fde\u63a5 URL \u4e32\u683c\u5f0f\uff1a 1). jdbc:xugu:// \uff1a\uff08\u5fc5\u9700\uff09\u865a\u8c37\u6570\u636e\u5e93\u7279\u5b9a\u534f\u8bae\u3002 2). serverIP \uff1a\uff08\u5fc5\u9700\uff09\u865a\u8c37\u6570\u636e\u5e93\u6240\u5728\u670d\u52a1\u5668\u7684 IP \u5730\u5740\u3002 3). portNumber\uff1a\uff08\u5fc5\u9700\uff09\u662f\u865a\u8c37\u6570\u636e\u5e93\u670d\u52a1 TCP \u8bbf\u95ee\u7aef\u53e3\uff0c\u9ed8\u8ba4 5138\u3002 4). databaseName\uff1a\uff08\u5fc5\u9700\uff09\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u5e93\u540d\u79f0\u3002 5). property\uff1a\uff08\u53ef\u9009\uff09\u865a\u8c37\u6570\u636e\u5e93\u7684 URL \u8fde\u63a5\u5c5e\u6027\u3002\u591a\u4e2a\u8fde\u63a5\u5c5e\u6027\u4e4b\u95f4\u4f7f\u7528\u201c&\u201d\u5206\u9694\uff0c\u4e0d\u53ef\u91cd\u590d\u3002 \u865a\u8c37 JDBC \u9a71\u52a8 URL \u4e32\u793a\u4f8b\u5982\u4e0b\uff1a String url = jdbc:xugu://localhost:5138/System?user=GUEST&password=GUEST\u037e property \u8bbe\u7f6e\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u6027\uff0c\u5e38\u7528\u8fde\u63a5\u5c5e\u6027\u89c1\u88684.1\u3002 \u88684.1 \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u6027 table th:first-of-type { width: 20%; } table th:nth-of-type(2) { width: 10%; } table th:nth-of-type(3) { width: 10%; } table th:nth-of-type(4) { width: 50%; } \u5c5e\u6027\u540d\u79f0 \u5fc5\u9009\u9879 \u53d6\u503c \u8bf4\u660e database \u221a \u5b57\u7b26\u4e32 \u6570\u636e\u5e93\u540d\u79f0 user \u221a \u5b57\u7b26\u4e32 \u7528\u6237\u540d\u79f0 password \u221a \u5b57\u7b26\u4e32 \u7528\u6237\u5bc6\u7801 encryptor \u00d7 \u5b57\u7b26\u4e32 \u7528\u4e8e\u542f\u52a8\u52a0\u5bc6\u6570\u636e\u5e93\uff0c\u82e5\u5e93\u672a\u52a0\u5bc6\uff0c\u5219\u53ef\u4e0d\u8981\uff0c\u4f46\u5e26\u4e0a\u6b64\u53c2\u6570\u4e0d\u4f1a\u5f71\u54cd\u8fde\u63a5 char_set \u00d7 \u5b57\u7b26\u4e32 \u8fde\u63a5\u5b57\u7b26\u96c6\u3002'GB2312'\u3001'GBK'\u3001'UTF8' \u7b49\uff0c\u9ed8\u8ba4\uff1aGBK time_zone \u00d7 \u5b57\u7b26\u4e32 \u5ba2\u6237\u7aef\u65f6\u533a\u3002\u9ed8\u8ba4\uff1a\u865a\u8c37\u6570\u636e\u5e93\u914d\u7f6e\u53c2\u6570 def_timezone \u6240\u8bbe\u7f6e\u65f6\u533a\uff08\u53ea\u5bf9\u7cfb\u7edf\u65f6\u95f4\u51fd\u6570\u751f\u6548\uff09 iso_level \u00d7 \u5b57\u7b26\u4e32 'READ COMMITED'\uff1a\u8bfb\u5df2\u63d0\u4ea4\uff1b 'REPEATIABLE READ'\uff1a\u53ef\u91cd\u590d\u8bfb\uff1b'SERIALIZABLE'\uff1a\u5e8f\u5217\u5316 lock_time \u00d7 \u6570\u503c \u5355\u4f4d\uff1a\u6beb\u79d2\uff0c\u9ed8\u8ba4\u503c\uff1a0\uff0c\u8868\u793a\u8fde\u63a5\u4e2d\u7684\u4e8b\u52a1\u9501\u5f81\u7528\u65f6\uff0c\u6700\u5927\u7b49\u5019\u65f6\u95f4\uff0c\u82e5\u5728\u8bbe\u7f6e\u65f6\u95f4\u5185\u52a0\u9501\u5931\u8d25\uff0c\u56de\u6eda\u4e8b\u52a1\u5e76\u62a5\u9519 lob_ret \u00d7 \u5b57\u7b26\u4e32 \u5927\u5bf9\u8c61\uff08Blob\u3001Clob\uff09\u6570\u636e\u8fd4\u56de\u65b9\u5f0f\u3002\u5c5e\u6027\u4e3a descriptor \u65f6\uff0c\u4ee5\u63cf\u8ff0\u7b26\u65b9\u5f0f\u8fd4\u56de\uff1b\u5176\u4ed6\u4ee5\u6570\u636e\u6d41\u65b9\u5f0f\u8fd4\u56de\u3002\u9ed8\u8ba4\uff1a\u4ee5\u6570\u636e\u6d41\u65b9\u5f0f\u8fd4\u56de return_rowid \u00d7 \u5e03\u5c14\u503c \u662f\u5426\u8fd4\u56de\u8bb0\u5f55 rowid \u503c\u3002\u5c5e\u6027\u4e3a TRUE \u65f6\uff0c\u8fd4\u56de rowid\uff1b\u5176\u4ed6\u8fd4\u56de FALSE\u3002\u9ed8\u8ba4\uff1aFALSE auto_commit \u00d7 on/off \u4e8b\u52a1\u662f\u5426\u81ea\u52a8\u63d0\u4ea4\u3002\u5c5e\u6027\u4e3a ON \u65f6\uff0c\u8fde\u63a5\u81ea\u52a8\u63d0\u4ea4\uff1b\u5c5e\u6027\u4e3a OFF\u65f6\uff0c\u8fde\u63a5\u975e\u81ea\u52a8\u63d0\u4ea4\u3002\u9ed8\u8ba4\uff1aON conn_type \u00d7 \u6570\u503c \u8d1f\u8f7d\u5747\u8861\u5206\u914d\u65b9\u5f0f\u3002\u5c5e\u6027\u4e3a 1 \u65f6\uff0c\u968f\u673a\u5206\u914d\uff1b\u5c5e\u6027\u4e3a 2 \u65f6\uff0c\u987a\u5e8f\u5206\u914d\u3002\u9ed8\u8ba4\uff1a2 ips \u00d7 \u5b57\u7b26\u4e32 \u8d1f\u8f7d\u5747\u8861\u8fde\u63a5 IP \u5730\u5740\uff0c\u591a\u4e2a IP \u5730\u5740\u4ee5\u9017\u53f7\u5206\u9694\uff08\u8be6\u7ec6\u89c1\u8d1f\u8f7d\u5747\u8861\uff09 CompatibleOracle \u00d7 \u5e03\u5c14\u503c \u517c\u5bb9 Oracle \u9009\u9879\u3002\u5c5e\u6027\u4e3a true\uff0c\u517c\u5bb9 Oracle\u037e \u5c5e\u6027\u4e3a FALSE\uff0c\u865a\u8c37 JDBC \u81ea\u6709\u5b9e\u73b0 recv_mode \u00d7 \u6570\u503c \u63a5\u6536\u6a21\u5f0f\u9009\u9879\u3002\u5c5e\u6027\u503c\u4e3a 0 \u65f6\uff0c\u672c\u5730\u5168\u63a5\u6536\u6a21\u5f0f\uff1b\u5c5e\u6027\u503c\u4e3a 1 \u65f6\uff0c\u7f51\u7edc\u63a5\u6536\u6a21\u5f0f\uff1b\u5c5e\u6027\u503c\u4e3a 2 \u65f6\uff0c\u670d\u52a1\u5668\u7aef\u6e38\u6807\u63a5\u6536\u6a21\u5f0f\u3002\u9ed8\u8ba4\uff1a0 emptyStringAsNull \u00d7 \u5e03\u5c14\u503c \u7a7a\u5b57\u4e32\u5904\u7406\u3002\u5c5e\u6027\u4e3a FALSE \u65f6\uff0c\u7a7a\u5b57\u7b26\u4e32\u8ba4\u5b9a\u4e3a NULL\uff1b\u5c5e\u6027\u4e3a TRUE \u65f6\uff0c\u7a7a\u5b57\u7b26\u4e32\u4fdd\u7559\u3002\u9ed8\u8ba4\uff1a\u7a7a\u5b57\u4e32\u4fdd\u7559 xgversion \u00d7 201/301 \u5ba2\u6237\u7aef\u534f\u8bae\u7248\u672c\uff0c\u865a\u8c37\u6570\u636e\u5e93V12\u7248\u672c\u5347\u7ea7\u652f\u6301301\u534f\u8bae\uff0c\u540c\u65f6\u517c\u5bb9201\u534f\u8bae SSL \u00d7 SSL \u8fde\u63a5\u52a0\u5bc6\u53c2\u6570\u3002\u5c5e\u6027\u503c\u3010SSL\uff1a\u542f\u7528SSL\u52a0\u5bc6\u4f20\u8f93\uff1bNSSL\uff1a\u7981\u7528SSL\u52a0\u5bc6\u4f20\u8f93\u3011 slowsqltime \u00d7 \u6570\u503c \u8bbe\u7f6e\u6162SQL\u6267\u884c\u65f6\u95f4\u3002SQL\u8bed\u53e5\u6267\u884c\u65f6\u95f4\u8d85\u8fc7\u8be5\u6570\u503c\uff0c\u65e5\u5fd7\u5219\u4f1a\u8f93\u51fa\u6267\u884cSQL batch_mode \u00d7 \u5e03\u5c14\u503c PreparedStatement\u662f\u5426\u4f7f\u7528\u6279\u91cf\u5904\u7406\u3002\u5c5e\u6027\u4e3a TRUE \u65f6\uff0cexecuteBatch\u91c7\u7528\u6279\u91cf\u6a21\u578b\uff1bFALSE\u5219\u91c7\u7528\u5355\u6761\u5904\u7406\u6a21\u578b\u3002\u9ed8\u8ba4\uff1aFALSE \u8fde\u63a5\u53c2\u6570\u4f7f\u7528SSL\u5c5e\u6027\u65f6\uff0c\u4f9d\u8d56\u7a0b\u5e8f\u5305\u4e2d\u63d0\u4f9b\u7684\u52a8\u6001\u94fe\u63a5\u5e93\uff0c\u4f7f\u7528\u524d\u9700\u5c06\u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u5230\u64cd\u4f5c\u7cfb\u7edf\u6307\u5b9a\u4f4d\u7f6e\u65b9\u53ef\u6b63\u5e38\u4f7f\u7528SSL\u52a0\u5bc6\u529f\u80fd\u3002 Windows 32\u4f4d\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u7528SSL\u5c5e\u6027\u524d\uff0c\u9700\u5c06\u7a0b\u5e8f\u5305 ssl/win32 \u4e0b xgssl.dll \u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u62f7\u8d1d\u5230\u7cfb\u7edf\u76ee\u5f55 C:/windows/system32 \u76ee\u5f55\u4f4d\u7f6e\u3002 Windows 64\u4f4d\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u7528SSL\u5c5e\u6027\u524d\uff0c\u9700\u5c06\u7a0b\u5e8f\u5305 ssl/win64 \u4e0b xgssl.dll \u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u62f7\u8d1d\u5230\u7cfb\u7edf\u76ee\u5f55 C:/windows/system32 \u76ee\u5f55\u4e0b\u3002 Linux X64\u4f4d\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u7528SSL\u5c5e\u6027\u524d\uff0c\u9700\u5c06\u7a0b\u5e8f\u5305 ssl/linux64 \u4e0b libxgssl.so \u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u62f7\u8d1d\u5230\u7cfb\u7edf\u76ee\u5f55 /usr/lib\u6216\u8005/usr/lib4 \u76ee\u5f55\u4e0b\u3002 \u865a\u8c37 JDBC \u8bbe\u7f6e\u8fde\u63a5\u5c5e\u6027\u793a\u4f8b\u5982\u4e0b (\u7248\u672c\u53f7\u3001\u5927\u5bf9\u8c61\u63cf\u8ff0\u7b26\u3001\u65f6\u533a\u3001\u5173\u95ed\u8fde\u63a5\u81ea\u52a8\u63d0\u4ea4)\uff1a String url=jdbc:xugu://localhost:5138/System?user=GUEST&password=GUEST&version=110&auto_commit=false&lob_ret=descriptor&time_zone=GMT-8:00\u037e 4.4 \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5 \u5728\u5e94\u7528\u7a0b\u5e8f\u5c06\u865a\u8c37 JDBC \u9a71\u52a8\u52a0\u8f7d\u5230\u7cfb\u7edf\u5185\u5b58\u4e2d\u540e\uff0c\u53ef\u901a\u8fc7 DriverManager \u7c7b\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u65b9\u6cd5\u5982\u4e0b\uff1a DriverManager.getConnection(String url)\u037e DriverManager.getConnection(String url,Properties)\u037e DriverManager.getConnection(String url,String user,String password)\u037e \u4e94. \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u6e90\u548c\u8fde\u63a5\u6c60 \u901a\u8fc7 DriverManager \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u4ee5\u5916\uff0c\u8fd8\u53ef\u4ee5\u4f7f\u7528\u6570\u636e\u6e90\u6216\u8fde\u63a5\u6c60\u65b9\u5f0f\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u3002\u901a\u8fc7\u6570\u636e\u6e90\u65b9\u5f0f\u6216\u8fde\u63a5\u6c60\u65b9\u5f0f\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u6709\u4ee5\u4e0b\u4f18\u70b9\uff1a - \u8d44\u6e90\u91cd\u7528 \u7531\u4e8e\u6570\u636e\u5e93\u8fde\u63a5\u5f97\u5230\u91cd\u7528\uff0c\u907f\u514d\u4e86\u9891\u7e41\u521b\u5efa\u3001\u91ca\u653e\u8fde\u63a5\u5f15\u8d77\u7684\u5927\u91cf\u6027\u80fd\u5f00\u9500\u3002\u5728\u51cf\u5c11\u7cfb\u7edf\u6d88\u8017\u7684\u57fa\u7840\u4e0a\uff0c\u53e6\u4e00\u65b9\u9762\u4e5f\u589e\u8fdb\u4e86\u7cfb\u7edf\u8fd0\u884c\u73af\u5883\u7684\u5e73\u7a33\u6027\uff08\u51cf\u5c11\u5185\u5b58\u788e\u7247\u4ee5\u53ca\u6570\u636e\u5e93\u4e34\u65f6\u8fdb\u7a0b/\u7ebf\u7a0b\u7684\u6570\u91cf\uff09\u3002 - \u66f4\u5feb\u7684\u7cfb\u7edf\u54cd\u5e94 \u6570\u636e\u5e93\u8fde\u63a5\u6c60\u5728\u521d\u59cb\u5316\u8fc7\u7a0b\u4e2d\uff0c\u5f80\u5f80\u5df2\u7ecf\u521b\u5efa\u4e86\u82e5\u5e72\u6570\u636e\u5e93\u8fde\u63a5\u7f6e\u4e8e\u6c60\u4e2d\u5907\u7528\u3002\u6b64\u65f6\u8fde\u63a5\u7684\u521d\u59cb\u5316\u5de5\u4f5c\u5747\u5df2\u5b8c\u6210\u3002\u5bf9\u4e8e\u4e1a\u52a1\u8bf7\u6c42\u5904\u7406\u800c\u8a00\uff0c\u76f4\u63a5\u5229\u7528\u73b0\u6709\u53ef\u7528\u8fde\u63a5\uff0c\u907f\u514d\u4e86\u6570\u636e\u5e93\u8fde\u63a5\u521d\u59cb\u5316\u548c\u91ca\u653e\u8fc7\u7a0b\u7684\u65f6\u95f4\u5f00\u9500\uff0c\u4ece\u800c\u7f29\u51cf\u4e86\u7cfb\u7edf\u6574\u4f53\u54cd\u5e94\u65f6\u95f4\u3002 - \u65b0\u7684\u8d44\u6e90\u5206\u914d\u624b\u6bb5 \u5bf9\u4e8e\u591a\u5e94\u7528\u5171\u4eab\u540c\u4e00\u6570\u636e\u5e93\u7684\u7cfb\u7edf\u800c\u8a00\uff0c\u53ef\u5728\u5e94\u7528\u5c42\u901a\u8fc7\u6570\u636e\u5e93\u8fde\u63a5\u7684\u914d\u7f6e\uff0c\u9650\u5236\u5355\u4e00\u5e94\u7528\u7533\u8bf7\u6570\u636e\u5e93\u8fde\u63a5\u6570\uff0c\u4ece\u800c\u907f\u514d\u5355\u4e00\u5e94\u7528\u72ec\u5360\u6240\u6709\u6570\u636e\u5e93\u8d44\u6e90\u3002 \u865a\u8c37 JDBC \u4e2d\u6570\u636e\u6e90\u5b9e\u73b0\u7c7b\u4e3a com.xugu.pool.XgDataSource\uff0c\u8fde\u63a5\u6c60\u5b9e\u73b0\u7c7b\u4e3acom.xugu.pool \u5305\u4e2d\u7684 XgDataSource\u3001XgPooledConnection\u3001XgConnectionPoolDataSource\u3001XgConnectionEventListener\u3001XgConnectionEvent\u3002 5.1 \u4f7f\u7528\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u6e90\u521b\u5efa\u8fde\u63a5 XgDataSource \u63d0\u4f9b set \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u6e90\u8fde\u63a5\u5c5e\u6027\uff1a \u793a\u4f8b\uff1a\u901a\u8fc7 XgDataSource \u4e0e\u865a\u8c37\u6570\u636e\u5e93\u5efa\u7acb\u8fde\u63a5 com.xugu.pool.XgDataSource ds = new com.xugu.pool.XgDataSource()\u037e ds.setUrl(\"jdbc:xugu://127.0.0.1:5138/db\")\u037e ds.setUser(\"SYSDBA\")\u037e ds.setPassword(\"SYSDBA\")\u037e Properties pro = new Properties()\u037e pro.setProperty(\"return_rowid\", \"true\")\u037e pro.setProperty(\"auto_commit\", \"off\")\u037e ds.setPro(pro)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u767b\u5f55\u4e32\u3002url\u4e3a\u6570\u636e\u5e93\u767b\u5f55\u4e32 setUrl(String url)\uff1b //\u6307\u5b9a\u6570\u636e\u5e93\u670d\u52a1\u5668\u3002host\u4e3a\u670d\u52a1\u5668\u5730\u5740 setHostName(String host)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u540d\u3002dbName\u4e3a\u6570\u636e\u5e93\u540d setDatabaseName(String dbName)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u7aef\u53e3\u53f7\u3002port\u4e3a\u6570\u636e\u5e93\u7aef\u53e3\u53f7 setPort(int port)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u7528\u6237\u3002userName\u4e3a\u6570\u636e\u5e93\u767b\u5f55\u7528\u6237\u540d setUser(String userName)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u767b\u5f55\u5bc6\u7801\u3002passWord\u4e3a\u6570\u636e\u5e93\u767b\u5f55\u5bc6\u7801 setPassword(Stirng passWord)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u767b\u5f55\u53c2\u6570\u3002ds_pro\u4e3a\u6570\u636e\u5e93\u8fde\u63a5\u53c2\u6570 setPro(Properties ds_pro)\uff1b // \u901a\u8fc7\u6570\u636e\u6e90\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5 Connection conn = ds.getConnection()\u037e \u5728 com.xugu.pool.XgDataSource \u7c7b\u4e2d\u901a\u8fc7 setXX() \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u6e90\u7684\u8fde\u63a5\u5c5e\u6027\uff0c\u82e5\u672a\u6307\u5b9a\u5219\u4f7f\u7528\u9ed8\u8ba4\u5c5e\u6027\u503c\uff1a\u6570\u636e\u5e93\u670d\u52a1\u5668\u5730\u5740\u9ed8\u8ba4\u4e3a\u201clocalhost\u201d \uff0c\u8fde\u63a5\u6570\u636e\u5e93\u9ed8\u8ba4\u4e3a\u201cSYSTEM\u201d \uff0c\u8bbf\u95ee\u7aef\u53e3\u53f7\u9ed8\u8ba4\u4e3a\u201c5138\u201d \uff0c\u8bbf\u95ee\u7528\u6237\u540d\u9ed8\u8ba4\u4e3a\u201cGUEST\u201d \uff0c\u7528\u6237\u5bc6\u7801\u9ed8\u8ba4\u4e3a\u201cGUEST\u201d \u3002URL \u9ed8\u8ba4\u8fde\u63a5\u4e32\u4e3a\u201cjdbc:xugu://127.0.0.1:5138/SYSTEM?user=GUEST&password=GUEST&version=110\u201d\u3002\u6570\u636e\u6e90\u5efa\u7acb\u540e\uff0c\u53ef\u901a\u8fc7\u8c03\u7528 XgDataSource \u7c7b\u4e2d\u7684 getConnection() \u548c getConnection(String username,String password) \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u3002 5.2 \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u6c60 \u8fde\u63a5\u6c60\u6280\u672f\u7684\u6838\u5fc3\u601d\u60f3\u662f\uff1a\u8fde\u63a5\u590d\u7528\uff0c\u901a\u8fc7\u5efa\u7acb\u4e00\u4e2a\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u4ee5\u53ca\u4e00\u5957\u8fde\u63a5\u4f7f\u7528\u3001\u5206\u914d\u3001\u7ba1\u7406\u7b56\u7565\uff0c\u8be5\u8fde\u63a5\u6c60\u4e2d\u7684\u8fde\u63a5\u53ef\u4ee5\u5f97\u5230\u9ad8\u6548\u3001\u5b89\u5168\u7684\u590d\u7528\uff0c\u907f\u514d\u4e86\u6570\u636e\u5e93\u8fde\u63a5\u9891\u7e41\u5efa\u7acb\u3001\u5173\u95ed\u7684\u5f00\u9500\u3002 \u865a\u8c37 JDBC \u8fde\u63a5\u6c60\u5b9e\u73b0\u7c7b\u5bf9\u865a\u8c37\u6570\u636e\u5e93\u539f\u59cb\u8fde\u63a5\u8fdb\u884c\u4e86\u5c01\u88c5\uff0c\u4ece\u800c\u65b9\u4fbf\u4e86\u6570\u636e\u5e93\u5e94\u7528\u5bf9\u4e8e\u8fde\u63a5\u7684\u4f7f\u7528\uff08\u7279\u522b\u662f\u5bf9\u4e8e\u4e8b\u52a1\u5904\u7406\uff09\uff0c\u63d0\u9ad8\u4e86\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u6548\u7387\uff0c\u4e5f\u6b63\u662f\u56e0\u4e3a\u8fd9\u4e2a\u5c01\u88c5\u5c42\u7684\u5b58\u5728\uff0c\u9694\u79bb\u4e86\u5e94\u7528\u7684\u672c\u8eab\u7684\u5904\u7406\u903b\u8f91\u548c\u5177\u4f53\u6570\u636e\u5e93\u8bbf\u95ee\u903b\u8f91\uff0c\u4f7f\u5e94\u7528\u672c\u8eab\u7684\u590d\u7528\u6210\u4e3a\u53ef\u80fd\u3002\u8fde\u63a5\u6c60\u4e3b\u8981\u7531\u4e09\u90e8\u5206\u7ec4\u6210\uff1a\u8fde\u63a5\u6c60\u7684\u5efa\u7acb\u3001\u8fde\u63a5\u6c60\u4e2d\u8fde\u63a5\u7684\u4f7f\u7528\u7ba1\u7406\u3001\u8fde\u63a5\u6c60\u7684\u5173\u95ed\u3002 \u865a\u8c37 JDBC \u8fde\u63a5\u6c60\u7684\u57fa\u672c\u601d\u60f3\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u5efa\u7acb\u4e00\u4e2a\u201c\u7f13\u51b2\u6c60\u201d\u3002\u9884\u5148\u5728\u201c\u7f13\u51b2\u6c60\u201d\u4e2d\u653e\u5165\u4e00\u5b9a\u6570\u91cf\u7684\u8fde\u63a5\uff0c\u5f53\u9700\u8981\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65f6\uff0c\u53ea\u9700\u4ece\u201c\u7f13\u51b2\u6c60\u201d\u4e2d\u53d6\u51fa\u4e00\u4e2a\uff0c\u4f7f\u7528\u5b8c\u6bd5\u4e4b\u540e\u518d\u653e\u56de\u53bb\u3002\u901a\u8fc7\u8bbe\u5b9a\u8fde\u63a5\u6c60\u6700\u5927\u8fde\u63a5\u6570\u6765\u9632\u6b62\u7cfb\u7edf\u65e0\u5c3d\u7684\u4e0e\u6570\u636e\u5e93\u8fde\u63a5\u3002\u4ea6\u53ef\u901a\u8fc7\u8fde\u63a5\u6c60\u7684\u7ba1\u7406\u673a\u5236\u76d1\u89c6\u6570\u636e\u5e93\u7684\u8fde\u63a5\u6570\u91cf\u3001\u4f7f\u7528\u60c5\u51b5\uff0c\u4e3a\u7cfb\u7edf\u5f00\u53d1\u3001\u6d4b\u8bd5\u53ca\u6027\u80fd\u8c03\u6574\u63d0\u4f9b\u4f9d\u636e\u3002 \u5f53\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u5b8c\u6570\u636e\u5e93\u8fde\u63a5\u8c03\u7528\u8fde\u63a5\u5173\u95ed\u65b9\u6cd5\u65f6\uff0c\u8be5\u8fde\u63a5\u5e76\u672a\u9500\u6bc1\uff0c\u800c\u662f\u88ab\u5f52\u8fd8\u7ed9\u8fde\u63a5\u6c60\u7b49\u5f85\u4e0b\u6b21\u7ee7\u7eed\u8c03\u7528\u3002 {.is-info} \u865a\u8c37 JDBC \u5b9e\u73b0\u8fde\u63a5\u6c60\u670d\u52a1\u6240\u63d0\u4f9b\u7684\u63a5\u53e3\u7c7b\u5982\u4e0b\uff1a - XgDataSource \u5b9e\u73b0 javax.sql.DataSource \u63a5\u53e3\uff1b - XgPooledConnection \u5b9e\u73b0 javax.sql.PooledConnection \u63a5\u53e3\uff1b - XgConnectionPoolDataSource \u5b9e\u73b0 javax.sql.ConnectionPoolDataSource \u63a5\u53e3\uff1b - XgConnectionEventListener \u5b9e\u73b0 javax.sql.ConnectionEventListener \u63a5\u53e3\uff1b - XgConnectionEvent \u7ee7\u627f\u81ea javax.sql.ConnectionEvent \u7c7b\u3002 \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u4e2d\u7684\u8fde\u63a5\u5747\u662f\u901a\u8fc7\u6570\u636e\u6e90\u5efa\u7acb\u7684\uff0c\u6545\u800c XgConnectionPoolDataSource \u7ee7\u627f\u4e86 com.xugu.pool.XgDataSource \u7c7b\u3002\u7528\u6237\u4ea6\u53ef\u901a\u8fc7 XgConnectionPoolDataSource \u5bf9\u8c61\u8bbe\u7f6e\u6570\u636e\u6e90\u5c5e\u6027\u548c\u8fde\u63a5\u6c60\u5c5e\u6027\uff1a //\u6700\u5c0f\u8fde\u63a5\u6570 setMinIdle(int min) //\u6700\u5927\u8fde\u63a5\u6570 setMaxActive(int max) //\u767b\u5f55\u7a7a\u95f2\u65f6\u95f4 setLoginTimeout(int time) //\u6700\u5927\u7b49\u5f85\u8fde\u63a5\u8d85\u65f6 setMaxWaitTime(long waitTime) \u5176\u4e2d\uff1asetLoginTimeout() \u548c setMaxWaitTime() \u65b9\u6cd5\u4e2d\u53c2\u6570\u5355\u4f4d\u4e3a\u6beb\u79d2\uff0c\u5176\u4ed6\u65b9\u6cd5\u4e2d\u53c2\u6570\u5355\u4f4d\u4e3a\u79d2\u3002 \u793a\u4f8b\uff1a\u521b\u5efa\u4e00\u4e2a\u865a\u8c37 JDBC \u8fde\u63a5\u6c60\uff0c\u5e76\u901a\u8fc7\u8fde\u63a5\u6c60\u83b7\u53d6\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u3002 XgConnectionPoolDataSource CPDSource = new XgConnectionPoolDataSource()\u037e CPDSource.setHostName(\u201clocalhost\u201d)\u037e CPDSource.setPort(5138)\u037e CPDSource.setDatabaseName(\u201cxuguNew\u201d)\u037e CPDSource.setUser(\u201cSYSDBA\u201d)\u037e CPDSource.setPassword(\u201cSYSDBA\u201d)\u037e CPDSource.setUrl(\"jdbc:xugu://localhost:5138/xuguNew)\u037e CPDSource.setMaxActive(50)\u037e CPDSource.setMinIdle(5)\u037e CPDSource.setLoginTimeout(3000)\u037e CPDSource.setMaxWaitTime(3000)\u037e XgPooledConnection Pconn = (XgPooledConnection)CPDSource.getPooledConnection()\u037e Connection conn = Pconn.getConnection()\u037e \u516d. \u865a\u8c37\u6570\u636e\u5e93\u7684JDBC\u4ea4\u4e92\u6d41\u7a0b \u4f7f\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u5b9e\u73b0\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u4ea4\u4e92\u7684\u4e00\u822c\u4f7f\u7528\u6b65\u9aa4\uff1a\u5bfc\u5165\u865a\u8c37 JDBC \u9a71\u52a8\u5305 \u2192 \u52a0\u8f7d\u865a\u8c37 JDBC \u9a71\u52a8\u7a0b\u5e8f \u2192 \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5 Connection \u2192 \u521b\u5efa\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61 Statement \u2192 \u6267\u884c SQL \u8bed\u53e5 \u2192 \u5904\u7406\u6267\u884c\u7ed3\u679c ResultSet \u2192 \u91ca\u653e\u8d44\u6e90\u3002 - \u7b2c 1 \u6b65\uff1a\u5bfc\u5165\u865a\u8c37 JDBC \u9a71\u52a8\u5305 - \u7b2c 2 \u6b65\uff1a\u6ce8\u518a\u9a71\u52a8 (\u4ec5\u505a\u4e00\u6b21) - \u7b2c 3 \u6b65\uff1a\u5efa\u7acb\u8fde\u63a5 (Connection) - \u7b2c 4 \u6b65\uff1a\u521b\u5efa\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61 (Statement) - \u7b2c 5 \u6b65\uff1a\u6267\u884c SQL \u8bed\u53e5 - \u7b2c 6 \u6b65\uff1a\u5904\u7406\u6267\u884c\u7ed3\u679c (ResultSet) - \u7b2c 7 \u6b65\uff1a\u91ca\u653e\u8d44\u6e90 6.1 \u5bfc\u5165\u865a\u8c37JDBC\u9a71\u52a8\u5305 \u4e0b\u8f7d\u865a\u8c37\u6570\u636e\u5e93\u4e13\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u5305 (cloudjdbc-*.*.*.jar)\uff0c\u5e76\u5bfc\u5165\u5230\u5e94\u7528\u7a0b\u5e8f\u4e2d\u3002 6.2 \u52a0\u8f7d\u865a\u8c37JDBC\u9a71\u52a8 \u865a\u8c37 JDBC \u9a71\u52a8\u7a0b\u5e8f\u4e2d Driver \u63a5\u53e3\u5b9e\u73b0\u7c7b\u4e3a com.xugu.cloudjdbc.Driver\u3002\u52a0\u8f7d\u9a71\u52a8\u65b9\u5f0f\u4e3a DriverManager.registerDriver(new com.xugu.cloudjdbc.Driver()) \u6216Class.forName(\u201ccom.xugu.cloudjdbc.Driver\u201d)\u3002 6.3 \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5 \u5efa\u7acb\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u7684\u65b9\u5f0f\u6709\u591a\u79cd\uff0c\u53ef\u6839\u636e\u5e94\u7528\u7a0b\u5e8f\u5b9e\u9645\u4f7f\u7528\u573a\u666f\u9009\u62e9\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65b9\u5f0f\u3002\u5e38\u89c1\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65b9\u5f0f\u5982\u4e0b\uff1a - \u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u4f7f\u7528 DriverManager \u83b7\u5f97\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\uff1b - \u4f7f\u7528\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u6e90/\u8fde\u63a5\u6c60\u7684\u65b9\u5f0f\u83b7\u53d6\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\uff1b - \u4f7f\u7528\u7b2c\u4e09\u65b9\u901a\u7528\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u65b9\u5f0f\u83b7\u53d6\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u3002 \u5982\uff1adruid\u3001c3p0\u3001dbcp\u3001JNDI \u7b49\u3002 6.3.1 \u6253\u5f00\u6570\u636e\u5e93\u8fde\u63a5 \u6253\u5f00\u6570\u636e\u5e93\u8fde\u63a5\u5373\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u5bf9\u8c61 Connection \u7c7b\u3002 \u5982\uff1aDriverManager \u901a\u8fc7 getConnection() \u65b9\u6cd5\u83b7\u53d6 Connection \u7c7b\u5bf9\u8c61\u3002DriverManager \u7684 getConnection() \u65b9\u6cd5\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\u7684\u65b9\u5f0f\u4ea6\u6709\u591a\u79cd\u3002\u4ee5\u4e0b\u4e3a\u5e38\u89c1\u65b9\u5f0f\uff1a - getConnection(String url) \u53c2\u6570\u8bf4\u660e\uff1a - url\uff1a\u8bbf\u95ee\u6570\u636e\u5e93\u7684 URL \u8def\u5f84\u3002 \u793a\u4f8b\uff1a \u4e0b\u9762\u7684\u4ee3\u7801\u5229\u7528 getConnection \u65b9\u6cd5\u521b\u5efa\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u3002 ``` public Connection getConnection(){ Connection con=null\u037e try{ //\u6ce8\u518c\u6570\u636e\u5e93\u9a71\u52a8 Class.forName(\"com.xugu.cloudjdbc.Driver\")\u037e //\u5b9a\u4e49\u8fde\u63a5\u6570\u636e\u5e93\u7684url String url = \"jdbc:xugu://localhost:5138/db?user=user1\uff06password=pwd\"\u037e //\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5 con = DriverManager.getConnection(url)\u037e System.out.println(\"\u6570\u636e\u5e93\u8fde\u63a5\u6210\u529f\uff01\")\u037e }catch(Exception e){ e.printStackTrace()\u037e } //\u8fd4\u56de\u4e00\u4e2a\u8fde\u63a5 return con\u037e } ``` getConnection(String url,String user,String password) \u53c2\u6570\u8bf4\u660e\uff1a url\uff1a\u8bbf\u95ee\u6570\u636e\u5e93\u7684 URL \u8def\u5f84\u3002 user\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u7528\u6237\u540d\u3002 password\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u7528\u6237\u5bc6\u7801\u3002 \u793a\u4f8b\uff1a \u4e0b\u9762\u7684\u4ee3\u7801\u5229\u7528 getConnection \u65b9\u6cd5\u521b\u5efa\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u3002 private Connection con; private String user = \"user1\"; //\u5b9a\u4e49\u8fde\u63a5\u6570\u636e\u5e93\u7684\u7528\u6237\u540d private String password = \"pwd\"; //\u5b9a\u4e49\u8fde\u63a5\u6570\u636e\u5e93\u7684\u5bc6\u7801 private String className = \"com.xugu.cloudjdbc.Driver\";//\u5b9a\u4e49\u865a\u8c37JDBC\u9a71\u52a8 private String url = \"jdbc:xugu://localhost:5138/db\"; /\\*\\*\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\\*/ public Connection getConnection(){ try{ Class.forName(className);//\u52a0\u8f7d\u6570\u636e\u5e93\u9a71\u52a8 System.out.println(\"\u6570\u636e\u5e93\u9a71\u52a8\u52a0\u8f7d\u6210\u529f\uff01\"); con = DriverManager.getConnection(url,user,password); //\u8fde\u63a5\u6570\u636e\u5e93 System.out.println(\"\u6210\u529f\u5730\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\uff01\"); }catch(Exception e){ System.out.println(\"\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\u5931\u8d25\uff01\"); con = null; e.printStackTrace(); } finally { If(conn != null){ //\u91ca\u653e\u8fde\u63a5\u8d44\u6e90 conn.close(); } } return con; } getConnection(String url,Properties info) \u53c2\u6570\u8bf4\u660e\uff1a url\uff1a\u8bbf\u95ee\u6570\u636e\u5e93\u7684 URL \u8def\u5f84\u3002 info\uff1a\u4e00\u4e2a\u6301\u4e45\u7684\u5c5e\u6027\u96c6\u5bf9\u8c61\uff0c\u5305\u62ec user \u548c password \u7b49\u5c5e\u6027\u3002 \u793a\u4f8b\uff1a \u4e0b\u9762\u7684\u4ee3\u7801\u5229\u7528 getConnection \u65b9\u6cd5\u521b\u5efa\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u3002 public Connection getConnection(){ Connection con = null; //\u5b9a\u4e49\u6570\u636e\u5e93\u8fde\u63a5\u5bf9\u8c61 Properties info = new Properties(); //\u5b9a\u4e49Properties\u5bf9\u8c61 info.setProperty(\"user\",\"user1\"); //\u8bbe\u7f6eProperties\u5bf9\u8c61\u5c5e\u6027 info.setProperty(\"password\",\"pwd\"); try{ //\u6ce8\u518c\u6570\u636e\u5e93\u9a71\u52a8 Class.forName(\"com.xugu.cloudjdbc.Driver\"); //test\u4e3a\u6570\u636e\u5e93\u540d\u79f0 String url = \"jdbc:xugu://localhost:5138/db\"; //\u83b7\u53d6\u8fde\u63a5\u6570\u636e\u5e93\u7684Connection\u5bf9\u8c61 con = DriverManager.getConnection(url,info); System.out.println(\"\u6570\u636e\u5e93\u8fde\u63a5\u6210\u529f\uff01\"); }catch(Exception e){ e.printStackTrace(); } //\u8fd4\u56de\u4e00\u4e2a\u8fde\u63a5 return con; } 6.3.2 \u8fde\u63a5\u4e8b\u52a1\u7ba1\u7406 \u6570\u636e\u5e93\u4e8b\u52a1 (transaction) \u662f\u8bbf\u95ee\u5e76\u53ef\u80fd\u64cd\u4f5c\u5404\u79cd\u6570\u636e\u9879\u7684\u4e00\u4e2a\u6570\u636e\u5e93\u64cd\u4f5c\u5e8f\u5217\uff0c\u8fd9\u4e9b\u64cd\u4f5c\u8981\u4e48\u5168\u90e8\u6267\u884c, \u8981\u4e48\u5168\u90e8\u4e0d\u6267\u884c\uff0c\u662f\u4e00\u4e2a\u4e0d\u53ef\u5206\u5272\u7684\u5de5\u4f5c\u5355\u4f4d\u3002\u4e8b\u52a1\u7531\u4e8b\u52a1\u5f00\u59cb\u5230\u4e8b\u52a1\u7ed3\u675f\u4e4b\u95f4\u6267\u884c\u7684\u5168\u90e8\u6570\u636e\u5e93\u64cd\u4f5c\u7ec4\u6210\u3002 \u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\uff0c\u5373\u5f53\u4e00\u6761 SQL \u8bed\u53e5\u6267\u884c\u5b8c\u6210\u540e\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u5c06\u81ea\u52a8\u63d0\u4ea4\u8be5\u8bed\u53e5\u6240\u5728\u4e8b\u52a1\u3002\u5728\u865a\u8c37 JDBC \u9a71\u52a8\u4e2d\u63a7\u5236\u4e8b\u52a1\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a - \u901a\u8fc7\u6570\u636e\u5e93\u8fde\u63a5 URL \u4e32\u7684 auto_commit \u5c5e\u6027\uff0c\u63a7\u5236\u4e8b\u52a1\u7684\u5f00\u542f\u4e0e\u5173\u95ed\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b auto_commit \u5c5e\u6027\u4e3a on\uff0c\u5373\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u3002 - \u901a\u8fc7 Connection \u7c7b\u7684 setAutoCommit(boolean commit) \u65b9\u6cd5\u63a7\u5236\u4e8b\u52a1\u7684\u5f00\u542f\u4e0e\u5173\u95ed\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b commit \u5c5e\u6027\u4e3a TRUE\uff0c\u5373\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u3002 \u5728\u7981\u7528\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u4e0b\uff0c\u4f7f\u7528 Connection \u7c7b\u7684 commit() \u65b9\u6cd5\u63d0\u4ea4 SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u505a\u7684\u66f4\u6539\uff0c\u800c Connection \u7c7b\u7684 rollback() \u65b9\u6cd5\u5c06\u56de\u6eda SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u7684\u66f4\u6539\uff0c\u4e0a\u8ff0\u4e24\u79cd\u65b9\u6cd5\u6267\u884c\u5b8c\u6210\u540e\u5747\u5c06\u91ca\u653e\u4e8b\u52a1\u6301\u6709\u7684\u5168\u90e8\u9501\u8d44\u6e90\u3002 \u4e8b\u52a1\u4ec5\u5bf9\u6570\u636e\u5e93 DML \u64cd\u4f5c\u6709\u6548\u3002 {.is-info} \u4ee5\u4e0b\u4e3a\u4f7f\u7528 setAutoCommit() \u65b9\u6cd5\u63a7\u5236\u4e8b\u52a1\u63d0\u4ea4\u7684\u793a\u4f8b\u4ee3\u7801\uff1a //\u8bbe\u7f6e\u4e8b\u52a1\u4e3a\u975e\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f conn.setAutoCommit(false)\u037e //\u521b\u5efa\u6570\u636e\u5e93Statement\u5bf9\u8c61 Statement stm = conn.createStatement()\u037e //\u6570\u636e\u5e93\u4e8b\u52a1\u6267\u884cSQL\u8bed\u53e5 String sql = \"insert into test (comp_id,comp_name) values(1,'comp')\"\u037e //\u6267\u884c\u9759\u6001SQL\u8bed\u53e5 stm.execute(sql)\u037e //\u6570\u636e\u5e93\u9884\u5904\u7406SQL\u8bed\u53e5 PreparedStatement pstm = conn. prepareStatement(\u201cupdate test set id=? where comp_name=?\u201d) //\u9884\u5904\u7406SQL\u8bed\u53e5\u7b2c\u4e00\u4e2a\u53c2\u6570\u8d4b\u503c pstm.setInt(1,15)\u037e //\u9884\u5904\u7406SQL\u8bed\u53e5\u7b2c\u4e8c\u4e2a\u53c2\u6570\u8d4b\u503c pstm.setString(2,'DBMS')\u037e //\u6267\u884c\u9884\u5904\u7406SQL\u8bed\u53e5 pstm.execute()\u037e //\u63d0\u4ea4\u4e8b\u52a1 conn.commit()\u037e //\u5220\u9664\u8868\u4e2d\u6307\u5b9a\u884c\u6570\u636e stm.execute(\u201cdelete from test where id=15\u201d)\u037e //\u4e8b\u52a1\u56de\u6eda\u65b9\u6cd5 conn.rollback()\u037e \u4e0a\u9762\u4ee3\u7801\u4e2d\u6267\u884c\u63d0\u4ea4\u4e8b\u52a1\u64cd\u4f5c\uff0c\u6267\u884c\u9759\u6001 SQL \u8bed\u53e5\u4e0e\u6267\u884c\u9884\u5904\u7406 SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u7684\u66f4\u6539\u5c06\u6c38\u4e45\u751f\u6548\uff1b\u800c\u540e\u6267\u884c\u7684\u5220\u9664\u8868\u4e2d\u6307\u5b9a\u884c\u6570\u636e\u64cd\u4f5c\uff0c\u56e0\u5176\u540e\u8c03\u7528\u7684 rollback() \u65b9\u6cd5\uff0cdelete \u547d\u4ee4\u5bf9\u6570\u636e\u5e93\u7684\u6570\u636e\u66f4\u6539\u5c06\u88ab\u56de\u6eda\u6389\uff0c\u6545\u800c\u5bf9\u6570\u636e\u5e93\u7684\u5220\u9664\u64cd\u4f5c\u4e0d\u4f1a\u751f\u6548\u3002 6.3.3 \u8fde\u63a5\u4e8b\u52a1\u63a7\u5236\uff0cSavepoint\u63a5\u53e3 JDBC \u89c4\u8303 3.0 \u4e2d\u4e3a\u4e86\u589e\u52a0\u5bf9\u4e8b\u52a1\u7684\u63a7\u5236\uff0c\u65b0\u589e Savepoint \u63a5\u53e3\uff0c\u5176\u4ee3\u8868\u4e8b\u52a1\u4e2d\u7684\u4e00\u4e2a\u903b\u8f91\u4e8b\u52a1\u70b9\u3002\u5728\u975e\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u4e0b\uff0c\u4e00\u4e2a\u4e8b\u52a1\u4e2d\u53ef\u4ee5\u8bbe\u7f6e\u591a\u4e2a Savepoint\uff0c\u5728\u4ee3\u7801\u4e2d\u8fdb\u884c\u4e8b\u52a1\u56de\u6eda\u64cd\u4f5c\u65f6\uff0c\u53ef\u4ee5\u6307\u5b9a\u4e8b\u52a1\u56de\u6eda\u5230\u6307\u5b9a Savepoint \u4f4d\u7f6e\uff0c\u6307\u5b9a\u56de\u6eda\u4f4d\u7f6e\u524d\u7684\u4e8b\u52a1\u64cd\u4f5c\u4ecd\u7136\u4fdd\u7559\u3002\u6b64\u63a5\u53e3\u5927\u5927\u63d0\u9ad8\u4e86\u4e8b\u52a1\u5904\u7406\u7684\u7c92\u5ea6\uff0c\u65b9\u4fbf\u5e94\u7528\u7a0b\u5e8f\u63a7\u5236\u4e8b\u52a1\u5904\u7406\u903b\u8f91\u3002 \u793a\u4f8b\uff1a\u8fde\u63a5\u4e8b\u52a1\u63a7\u5236\u63a5\u53e3 Savepoint \u4f7f\u7528 //\u8bbe\u7f6e\u975e\u81ea\u52a8\u63d0\u4ea4 conn.setAutoCommit(false); //\u521b\u5efaStatement\u5bf9\u8c61 Statement stm = conn.createStatement(); //\u6267\u884cSQL\u547d\u4ee4 stm.execute(sql1); stm.execute(sql2); //\u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\u70b9save1 java.sql.Savepoint save1 =conn.setSavepoint(\"save_1\"); stm.execute(sql3); //\u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\u70b9save2 java.sql.Savepoint save2 =conn.setSavepoint(\"save_2\"); stm.execute(sql4); //\u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\u70b9save3 java.sql.Savepoint save3 =conn.setSavepoint(\"save_3\"); stm.execute(sql5); //\u56de\u6eda\u4e8b\u52a1\u5230\u56de\u6eda\u70b9save3 conn.rollback(save3); conn.commit(); \u4ee5\u4e0a\u4ee3\u7801\u6bb5\u4e2d\uff0c\u4e8b\u52a1\u6267\u884c\u8bed\u53e5 sql5 \u5c06\u88ab\u56de\u6eda\u6389\u3002 6.4 \u521b\u5efa\u6267\u884cSQL\u8bed\u53e5\u5bf9\u8c61 \u5728\u6570\u636e\u5e93\u6807\u51c6\u4e2d\uff0c\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61\u5206\u4e3a\u4e09\u7c7b\uff1a\u6267\u884c\u9759\u6001 SQL \u8bed\u53e5\u7684 Statement \u5bf9\u8c61\u3001\u6267\u884c\u9884\u7f16\u8bd1 SQL \u8bed\u53e5\u7684 PreparedStatement \u5bf9\u8c61\u4ee5\u53ca\u6267\u884c\u6570\u636e\u5e93\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\u7684 CallableStatement \u5bf9\u8c61\u3002 6.4.1 \u6267\u884cSQL\u5bf9\u8c61Statement Statement \u5bf9\u8c61\u7528\u4e8e\u6267\u884c\u9759\u6001 SQL \u8bed\u53e5\u548c\u83b7\u5f97 SQL \u4ea7\u751f\u7684\u7ed3\u679c\u3002\u5728\u865a\u8c37 JDBC \u9a71\u52a8\u4e2d\uff0c\u865a\u8c37\u6570\u636e\u5e93 DDL \u64cd\u4f5c\u5747\u901a\u8fc7 Statement \u5bf9\u8c61\u6765\u6267\u884c\u3002 Statement \u5bf9\u8c61\u901a\u8fc7 Connection \u7c7b\u7684 createStatement() \u65b9\u6cd5\u521b\u5efa\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a //\u521b\u5efa\u6267\u884cSQL\u8bed\u53e5\u5bf9\u8c61Statement Statement stm = conn.createStatement()\u037e 6.4.2 \u6267\u884cSQL\u5bf9\u8c61PreparedStatement PreparedStatement \u5bf9\u8c61\u4f7f\u7528\u65f6\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u5bf9\u6267\u884c SQL \u8bed\u53e5\u8fdb\u884c\u9884\u7f16\u8bd1\u5904\u7406\uff0c\u9884\u7f16\u8bd1 SQL \u8bed\u53e5\u5c06\u5728\u672a\u6765\u7684\u4f7f\u7528\u4e2d\u88ab\u91cd\u7528\u3002\u4e0e Statement \u5bf9\u8c61\u76f8\u6bd4\uff0cPreparedStatement \u5bf9\u8c61\u64cd\u4f5c\u591a\u6761 SQL \u8bed\u53e5\u7684\u6548\u7387\u66f4\u9ad8\u3002 \u7ecf\u8fc7\u9884\u7f16\u8bd1\u5e76\u5b58\u50a8\u5728 PreparedStatement \u5bf9\u8c61\u4e2d\u7684 SQL \u8bed\u53e5\uff0c\u901a\u8fc7 Connection \u7c7b\u7684 prepareStatement() \u65b9\u6cd5\u521b\u5efa\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a //\u521b\u5efa\u6267\u884c\u9884\u7f16\u8bd1SQL\u8bed\u53e5\u5bf9\u8c61PreparedStatement PreparedStatement preStatement = conn.prepareStatement(\u201c\u9884\u7f16\u8bd1SQL\u8bed\u53e5\u201d); \u9884\u5904\u7406 PreparedStatement \u5bf9\u8c61\u76f8\u5bf9\u4e8e\u9759\u6001 Statement \u5bf9\u8c61\u7684\u4f18\u52bf\uff1a - PreparedStatement \u53ef\u4ee5\u52a8\u6001\u4f20\u5165\u53c2\u6570\u503c\uff1b - PreparedStatement \u6bd4 Statement \u66f4\u5feb\uff1b PreparedStatement \u4f1a\u5c06 SQL \u8bed\u53e5\u9884\u7f16\u8bd1\u5728\u6570\u636e\u5e93\u7cfb\u7edf\u4e2d\uff0c\u6267\u884c\u8ba1\u5212\u540c\u6837\u4f1a\u88ab\u7f13\u5b58\u8d77\u6765\uff0c\u5b83\u5141\u8bb8\u6570\u636e\u5e93\u505a\u53c2\u6570\u5316\u67e5\u8be2\u3002\u4f7f\u7528\u9884\u5904\u7406\u8bed\u53e5\u6bd4\u666e\u901a\u7684 Statement \u67e5\u8be2\u66f4\u5feb\uff0c\u56e0\u505a\u7684\u5de5\u4f5c\u66f4\u5c11 (\u6570\u636e\u5e93\u5bf9 SQL \u8bed\u53e5\u7684\u5206\u6790\u3001\u7f16\u8bd1\u3001\u4f18\u5316\u5df2\u7ecf\u5728\u7b2c\u4e00\u6b21\u67e5\u8be2\u524d\u5b8c\u6210\u4e86)\u037e - PreparedStatement \u53ef\u4ee5\u9632\u6b62 SQL \u6ce8\u5165\u5f0f\u653b\u51fb\u3002 PreparedStatement \u5728\u4f7f\u7528\u53c2\u6570\u5316\u67e5\u8be2\u7684\u60c5\u51b5\u4e0b\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u4e0d\u4f1a\u5c06\u53c2\u6570\u7684\u5185\u5bb9\u89c6\u4e3a SQL \u6307\u4ee4\u7684\u4e00\u90e8\u5206\u6765\u5904\u7406\uff0c\u800c\u662f\u5728\u6570\u636e\u5e93\u5b8c\u6210 SQL \u6307\u4ee4\u7684\u7f16\u8bd1\u540e\uff0c\u624d\u5957\u7528\u53c2\u6570\u8fd0\u884c\uff0c\u56e0\u6b64\u5c31\u7b97\u53c2\u6570\u4e2d\u542b\u6709\u7834\u574f\u6027\u7684\u6307\u4ee4\uff0c\u4e5f\u4e0d\u4f1a\u88ab\u6570\u636e\u5e93\u6240\u8fd0\u884c\u3002 6.4.3 \u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u5bf9\u8c61CallableStatement CallableStatement \u5bf9\u8c61\u5b9e\u73b0\u4e86\u4ece Java \u5e94\u7528\u7a0b\u5e8f\u4e2d\u8c03\u7528\u6570\u636e\u5e93\u5b58\u50a8\u8fc7\u7a0b\u3002\u4f46\u6b64\u8c03\u7528\u8fc7\u7a0b\u5e76\u4e0d\u5305\u542b\u5b58\u50a8\u8fc7\u7a0b\u672c\u8eab\uff0c\u56e0\u5b58\u50a8\u8fc7\u7a0b\u5b58\u50a8\u5728\u6570\u636e\u5e93\u4e2d\u3002 CallableStatement \u5bf9\u8c61\u4e3a\u6240\u6709\u7684\u6570\u636e\u5e93\u63d0\u4f9b\u4e86\u4e00\u79cd\u4ee5\u6807\u51c6\u5f62\u5f0f\u8c03\u7528\u5b58\u50a8\u8fc7\u7a0b\u7684\u65b9\u6cd5\uff0c\u901a\u8fc7 Connection \u7c7b\u7684 prepareCall() \u65b9\u6cd5\u521b\u5efa\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a //\u521b\u5efa\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u5bf9\u8c61CallableStatement CallableStatement cstmt= conn.prepareCall(\u201c{call \u5b58\u50a8\u8fc7\u7a0b\u540d(\u53c2\u6570\u8868\u5217)}\u201d); 6.4.4 \u6267\u884cSQL\u8bed\u53e5\u5bf9\u8c61\u5c5e\u6027\u6269\u5145 \u5728\u521b\u5efa\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61\u65f6\uff0c\u53ef\u901a\u8fc7\u6784\u9020\u65b9\u6cd5\u7684\u4e0d\u540c\u53c2\u6570\u8bbe\u7f6e ResultSet \u5bf9\u8c61\u5c5e\u6027\uff0c\u5c5e\u6027\u5305\u62ec\u7ed3\u679c\u7c7b\u578b ResultSetType\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b ResultSetConcurrency\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b ResultSetHoldability\u3002 ResultSetType \u9ed8\u8ba4\u4e3a ResultSet.TYPE_SCROLL_INSENSITIVE\uff1a\u652f\u6301\u7ed3\u679c\u96c6 backforward\u3001last\u3001first \u7b49\u64cd\u4f5c\uff0c\u5bf9\u6570\u636e\u5e93\u4e2d\u5176\u5b83 session \u8fdb\u884c\u7684\u6570\u636e\u66f4\u6539\u4e0d\u654f\u611f\uff1b ResultSetConcurrency \u9ed8\u8ba4\u4e3a ResultSet.CONCUR_READ_ONLY: \u4e0d\u53ef\u66f4\u65b0\u7ed3\u679c\u96c6\uff1b\u8be5\u5c5e\u6027\u4ea6\u53ef\u66f4\u6539\u4e3a ResultSet.CONCUR_UPDATABLE\uff0c\u652f\u6301\u5728 ResultSet \u4e2d\u5bf9\u8bb0\u5f55\u8fdb\u884c\u4fee\u6539\uff0c\u4fee\u6539\u540e\u8bb0\u5f55\u66f4\u65b0\u5230\u6570\u636e\u5e93\uff0c\u4fee\u6539\u64cd\u4f5c\u53ef\u5305\u542b\u63d2\u5165\u3001\u5220\u9664\u6216\u66f4\u65b0\uff1b ResultSetHoldability \u9ed8\u8ba4\u4e3a ResultSet.HOLD_CURSORS_OVER_COMMIT: \u5728\u4e8b\u52a1 commit \u6216 rollback \u540e\uff0cResultSet \u4ecd\u7136\u53ef\u7528\u3002 Connection \u7c7b\u521b\u5efa Statement \u5bf9\u8c61\u6784\u9020\u65b9\u6cd5\uff1a //Statement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 createStatement(int resultSetType,int resultSetConcurrency)\uff1b //Statement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 createStatement(int resultSetType,int resultSetConcurrency, int resultSetHoldability)\uff1b Connection \u7c7b\u521b\u5efa PreparedStatement \u5bf9\u8c61\u6784\u9020\u65b9\u6cd5\uff1a //PreparedStatement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareStatement(String sql, int resultSetType,int resultSetConcurrency) //PrepareStatment\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareStatement(String sql, int resultSetType,int resultSetConcurrency, int resultSetHoldability) Connection \u7c7b\u521b\u5efa CallableStatement \u5bf9\u8c61\u6784\u9020\u65b9\u6cd5\uff1a //CallableStatement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareCall(String sql, int resultSetType,int resultSetConcurrency) //CallableStatement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareCall(String sql, int resultSetType,int resultSetConcurrency, int resultSetHoldability) 6.5 \u6267\u884cSQL\u8bed\u53e5 Statement \u5bf9\u8c61\u5b9a\u4e49\u4e86\u591a\u79cd\u6267\u884c SQL \u8bed\u53e5\u7684\u65b9\u6cd5\uff0c\u7528\u6765\u5904\u7406\u8fd4\u56de\u4e0d\u540c\u7ed3\u679c\u7684 SQL \u547d\u4ee4\uff1a - execute(String sql)\uff1a\u6267\u884c\u53ef\u4ee5\u8fd4\u56de\u591a\u4e2a\u7ed3\u679c\u96c6\u7684 SQL \u8bed\u53e5\u8fd4\u56de\u7c7b\u578b\u4e3a boolean\uff0c\u5982\u679c\u8fd4\u56de\u7684\u662f\u66f4\u65b0\u7684\u6570\u76ee\uff0c\u5219\u8fd4\u56de false\uff1b\u5982\u679c\u8fd4\u56de\u7684\u662f ResultSet \u5bf9\u8c61\uff0c\u5219\u8fd4\u56detrue\u3002 - executeQuery(String sql)\uff1a\u6267\u884c\u8fd4\u56de\u5355\u4e2a ResultSet \u7684 SQL \u8bed\u53e5\u8fd4\u56de\u7c7b\u578b\u4e3a ResultSet \u5bf9\u8c61\u3002 - executeUpdate()\uff1a\u6267\u884c SQL INSERT\u3001UPDATE \u6216 DELETE \u8bed\u53e5\u8fd4\u56de\u503c\u4e3a int \u578b\uff0c\u6570\u636e\u5e93\u53d7\u5f71\u54cd\u7684\u884c\u8ba1\u6570\u3002 - \u6279\u5904\u7406\u65b9\u6cd5\uff1a\u6279\u91cf\u6267\u884c SQL \u8bed\u53e5 clearBatch()\uff1a\u6e05\u7a7a\u5386\u53f2 batch \u547d\u4ee4\uff1b addBatch(String sql)\uff1a\u6dfb\u52a0\u8981\u6267\u884c\u7684 sql\uff1b executeBatch()\uff1a\u6279\u91cf\u6267\u884c sql\u3002 PreparedStatement \u7ee7\u627f\u81ea Statement\uff0c\u5b9a\u4e49\u4e86\u5927\u91cf\u7684 setter \u65b9\u6cd5\u7528\u4e8e\u8bbe\u7f6e\u52a8\u6001 sql\u7684\u53c2\u6570\uff0c\u56e0\u6b64 PreparedStatement \u652f\u6301\u52a8\u6001\u4f20\u53c2\uff1b\u53e6\u5916 PreparedStatement \u5185\u90e8\u5b58\u50a8\u4e86\u89e3\u6790\u7684 sql\uff0c\u53ef\u4ee5\u591a\u6b21\u6267\u884c\u800c\u65e0\u9700\u91cd\u590d\u89e3\u6790\u3002PreparedStatement \u7ee7\u627f\u81ea Statement\uff0cCallableStatement \u7ee7\u627f\u81ea PreparedStatement\uff0c\u6545\u800c\u4e09\u8005\u6267\u884c SQL \u8bed\u53e5\u7684\u65b9\u5f0f\u53ef\u901a\u7528\u3002 6.5.1 \u901a\u8fc7Statement\u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c \u901a\u8fc7 Statement \u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c\u9700\u8981\u6ce8\u610f\u7684\u4e8b\u9879\uff1a - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u524d\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u8bbe\u7f6e\u4e3a FALSE\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\uff0c\u5e76\u8fdb\u884c\u624b\u52a8\u63d0\u4ea4\uff08commit\uff09\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u540e\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u6062\u590d\u4e3a TRUE\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u5f02\u5e38\u53d1\u751f\u65f6\uff0c\u8fdb\u884c rollback(\u56de\u6eda)\u3002 \u793a\u4f8b\uff1a\u901a\u8fc7 Statement \u6279\u91cf\u64cd\u4f5c\u6570\u636e try { //\u521b\u5efaStatement\u5bf9\u8c61 stm = con.createStatement(); //\u8bbe\u7f6e\u4e8b\u52a1\u975e\u81ea\u52a8\u63d0\u4ea4 con.setAutoCommit(false); // \u6dfb\u52a0\u591a\u6761SQL\u8bed\u53e5\u5230\u6279\u5904\u7406\u4e2d stm.addBatch(\"insert into student values(23,'tangbao','\u9ad8\u6570',100)\"); stm.addBatch(\"insert into student values(24,'\u738b\u5b9a','c#',98)\"); stm.addBatch(\"insert into student values(25,'\u738b\u56fd\u4e91','java',90)\"); //\u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c stm.executeBatch(); System.out.println(\"\u63d2\u5165\u6210\u529f!\"); //\u6267\u884c\u6210\u529f\u540e\u8fdb\u884c\u6570\u636e\u63d0\u4ea4 con.commit(); System.out.println(\"\u63d0\u4ea4\u6210\u529f!\"); //\u5173\u95ed\u975e\u81ea\u52a8\u63d0\u4ea4 con.setAutoCommit(true); } catch (SQLException e) { if (!con.isClosed()) { con.rollback(); //\u51fa\u73b0\u5f02\u5e38\uff0c\u56de\u6eda\u4e8b\u52a1 System.out.println(\"\u63d0\u4ea4\u5931\u8d25\uff0c\u56de\u6eda\uff01\"); con.setAutoCommit(true); //\u5173\u95ed\u975e\u81ea\u52a8\u63d0\u4ea4 } } finally { if (stmt != null) { //\u5173\u95ed\u64cd\u4f5c\u5bf9\u8c61 stmt.close(); } } 6.5.2 \u901a\u8fc7PreparedStatement\u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c \u901a\u8fc7 PreparedStatement \u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c\u9700\u8981\u6ce8\u610f\u7684\u4e8b\u9879\uff1a - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u524d\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u8bbe\u7f6e\u4e3a FALSE\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\uff0c\u5e76\u8fdb\u884c\u624b\u52a8\u63d0\u4ea4\uff08commit\uff09\uff0c\u6570\u636e\u91cf\u5927\u65f6\uff0c\u8bbe\u7f6e\u624b\u52a8\u63d0\u4ea4\u95f4\u9694\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u540e\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u6062\u590d\u4e3a TRUE\uff1b \u2022 \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u5f02\u5e38\u53d1\u751f\u65f6\uff0c\u8fdb\u884c rollback(\u56de\u6eda)\uff1b - PreparedStatement \u6267\u884c\u8bed\u53e5\u4e0d\u80fd\u4e3a DDL \u8bed\u53e5\u3002 \u793a\u4f8b\uff1a\u5c06 10000 \u6761\u8bb0\u5f55\u63d2\u5165\u6570\u636e\u5e93\u4e2d\uff0c\u6bcf 100 \u6761\u6267\u884c\u4e00\u6b21\u63d0\u4ea4\u64cd\u4f5c try{ conn.setAutoCommit(false); //\u8bbe\u7f6e\u975e\u81ea\u52a8\u63d0\u4ea4 //\u521b\u5efaPreparedStatement\u5bf9\u8c61 ps = conn.prepareStatement(\"insert into testtab values (?, ?, ?)\"); //\u5faa\u73af\u6dfb\u52a0\u6279\u5904\u7406\u6570\u636e for(int i = 0;i<list.size();i++){ HashMap map = list.get(i);//list\u4e3a\u6570\u636e\u5c01\u88c5\uff0c\u6b64\u5904\u7565 ps.setString(1, map.get(\"id\").toString()); ps.setString(2, map.get(\"name\").toString()); ps.setString(3, map.get(\"age\").toString()); ps.addBatch(); if(mod(i,100)==0){//\u6bcf100\u6761\u6267\u884c\u4e00\u6b21\u6267\u884c\u64cd\u4f5c ps.executeBatch();//\u6267\u884c\u6279\u91cf\u63d2\u5165 conn.commit();//\u6267\u884c\u4e8b\u52a1\u63d0\u4ea4 } } ps.executeBatch();//\u6267\u884c\u6279\u91cf\u63d2\u5165 conn.commit(); //\u63d0\u4ea4\u4e8b\u52a1 }catch(Exception e){ if (!conn.isClosed()) { conn.rollback(); //\u51fa\u73b0\u5f02\u5e38\uff0c\u56de\u6eda\u4e8b\u52a1 System.out.println(\"\u63d0\u4ea4\u5931\u8d25\uff0c\u56de\u6eda\uff01\"); conn.setAutoCommit(true); //\u5173\u95ed\u975e\u81ea\u52a8\u63d0\u4ea4 } } finally { if (ps!= null) { ps.close();//\u5173\u95ed\u64cd\u4f5c\u5bf9\u8c61 } } 6.5.3 CallableStatement\u7ed1\u5b9a\u53c2\u6570 CallableStatement \u5b58\u5728\u4e09\u79cd\u7c7b\u578b\u7684\u53c2\u6570 IN\u3001OUT \u548c INOUT\u3002 - IN\uff1a\u521b\u5efa SQL \u8bed\u53e5\u65f6\u5176\u53c2\u6570\u503c\u672a\u77e5\u3002\u4f7f\u7528 setXXX() \u65b9\u6cd5\u5c06\u503c\u7ed1\u5b9a\u5230 IN \u53c2\u6570\u3002 - OUT\uff1a\u7531 SQL \u8bed\u53e5\u8fd4\u56de\u7684\u53c2\u6570\u503c\u3002\u53ef\u4ee5\u4f7f\u7528 getXXX() \u65b9\u6cd5\u4ece OUT \u53c2\u6570\u4e2d\u68c0\u7d22\u503c\u3002 - INOUT\uff1a\u63d0\u4f9b\u8f93\u5165\u548c\u8f93\u51fa\u503c\u7684\u53c2\u6570\u3002\u4f7f\u7528 setXXX() \u65b9\u6cd5\u7ed1\u5b9a\u53d8\u91cf\u5e76\u4f7f\u7528getXXX() \u65b9\u6cd5\u68c0\u7d22\u503c\u3002 \u793a\u4f8b 1\uff1a\u901a\u8fc7\u53c2\u6570\u4e0b\u6807\u7ed1\u5b9a\u53c2\u6570 //\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\u8bed\u53e5 String sql =\"{call pro_2(?,?,?)}\"; //\u521b\u5efaCallableStatement\u5bf9\u8c61 CallableStatement cstm = conn.prepareCall(sql); //\u901a\u8fc7\u53c2\u6570\u4e0b\u6807\u8bbe\u7f6e\u53c2\u6570(IN\u53c2\u6570) cstm.setInt(1, 20490); //\u6ce8\u518cOUT\u53c2\u6570\u6570\u636e\u7c7b\u578b cstm.registerOutParameter(2, com.xugu.cloudjdbc.Types.VARCHAR); cstm.registerOutParameter(3, com.xugu.cloudjdbc.Types.VARCHAR); //\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528 cstm.execute(); //\u83b7\u53d6\u5b58\u50a8\u8fc7\u7a0b\u8f93\u51fa\u53c2\u6570 String name = (String)cstm.getObject(2); String address = (String)cstm.getObject(3); \u793a\u4f8b 2\uff1a\u901a\u8fc7\u53c2\u6570\u540d\u7ed1\u5b9a\u53c2\u6570 //\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\u8bed\u53e5 CallableStatement pstm = conn.prepareCall(\"insert into tt1 values(:id,:name)\"); //\u901a\u8fc7\u53c2\u6570\u540d\u8bbe\u7f6e\u53c2\u6570(IN\u53c2\u6570) pstm.setInt(\"id\", 1); pstm.setString(\"name\", \"cloud\"); //\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528 pstm.execute(); 6.6 \u5904\u7406\u6267\u884c\u7ed3\u679c ResultSet \u7c7b\u662f\u901a\u8fc7 Statement \u53ca\u5176\u5b50\u7c7b\u6267\u884c SQL \u67e5\u8be2\u8bed\u53e5\u5f97\u5230\u7684\u7ed3\u679c\u96c6\u3002ResultSet \u7c7b\u5305\u542b\u4e09\u4e2a\u91cd\u8981\u5c5e\u6027\uff1aResultSet \u5bf9\u8c61\u5e76\u53d1\u6a21\u5f0f\u3001ResultSet \u5bf9\u8c61\u5149\u6807\u5904\u7406\u65b9\u5411\u3001ResultSet \u5bf9\u8c61\u5149\u6807\u7c7b\u578b\u3002ResultSet \u7c7b\u5177\u6709\u6307\u5411\u5f53\u524d\u7ed3\u679c\u96c6\u6570\u636e\u884c\u4f4d\u7f6e\u5149\u6807\uff0c\u5149\u6807\u4f4d\u7f6e\u521d\u59cb\u88ab\u7f6e\u4e8e\u7b2c\u4e00\u884c\u4e4b\u524d\uff0c\u901a\u8fc7 ResultSet \u7c7b\u5c01\u88c5\u7684\u5149\u6807\u79fb\u52a8\u65b9\u6cd5\u5b9e\u73b0\u5bf9\u5149\u6807\u4f4d\u7f6e\u7684\u63a7\u5236\uff0c\u5f53 ResultSet \u5bf9\u8c61\u7684\u5149\u6807\u79fb\u81f3\u6570\u636e\u7ed3\u679c\u96c6\u672b\u5c3e\u65f6 (\u4e0b\u4e00\u884c\u65e0\u6570\u636e)\uff0c\u8fd4\u56de FALSE\u3002 \u5728\u865a\u8c37 JDBC \u4e2d\uff0cResultSet \u7c7b\u5206\u4e3a\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u548c\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\uff08\u901a\u8fc7 URL \u8fde\u63a5\u4e32\u53c2\u6570 recv_mode \u914d\u7f6e\uff09\u3002\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u9ed8\u8ba4\u5c5e\u6027\u4e3a\u4e0d\u53ef\u66f4\u65b0\u3001\u5411\u524d\u79fb\u52a8\u3001\u53ef\u4ee5\u6eda\u52a8\uff1b\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u9ed8\u8ba4\u5c5e\u6027\u4e3a\u4e0d\u53ef\u66f4\u65b0\u3001\u53ea\u5411\u524d\u79fb\u52a8\u3001\u4e0d\u53ef\u6eda\u52a8\u3002 Statement \u5bf9\u8c61\u6267\u884c SQL \u8bed\u53e5\u8fd4\u56de\u7ed3\u679c\u96c6\u4ec5\u80fd\u662f\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\uff0c\u800c PreparedStatement \u5bf9\u8c61\u6267\u884c SQL \u8bed\u53e5\u8fd4\u56de\u7ed3\u679c\u96c6\u53ef\u4e3a\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u6216\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u3002 \u5f53\u6267\u884c SQL \u8fd4\u56de\u6570\u636e\u7ed3\u679c\u96c6\u8f83\u5927\u65f6\uff0c\u5efa\u8bae\u4f7f\u7528\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\uff0c\u907f\u514d JVM \u7684\u6ea2\u51fa\u3002 {.is-info} 6.6.1 \u66f4\u65b0ResultSet\u7ed3\u679c\u96c6 \u521b\u5efa Statement \u5bf9\u8c61\u65f6\uff0c\u8bbe\u7f6e Statement \u5c5e\u6027 RresultSetConcurrency \u4e3a ResultSet.CONCUR_UPDATABLE\uff0c\u5e76\u4e14\u6570\u636e\u5e93 URL \u8fde\u63a5\u4e32\u5c5e\u6027 return_rowid \u8bbe\u7f6e\u4e3a TRUE\u65f6\uff0cStatement \u5bf9\u8c61\u6267\u884c SQL \u8bed\u53e5\u8fd4\u56de\u7684 ResultSet \u7ed3\u679c\u96c6\u624d\u80fd\u88ab\u66f4\u65b0\u3002\u5f53 ResultSet \u5bf9\u8c61\u4e3a\u53ef\u66f4\u65b0\u7ed3\u679c\u96c6\u65f6\uff0c\u5c06\u5149\u6807\u79fb\u81f3\u63d2\u5165\u4f4d\u7f6e\uff0c\u53ef\u8c03\u7528 ResultSet \u7c7b\u5bf9\u5e94\u7684 update \u65b9\u6cd5\u4fee\u6539\u7ed3\u679c\u96c6\u4e2d\u884c\u6570\u636e\uff0c\u5e76\u901a\u8fc7 updateRow \u65b9\u6cd5\u5c06\u66f4\u6539\u6570\u636e\u66f4\u65b0\u5230\u6570\u636e\u5e93\u4e2d\u3002 \u793a\u4f8b\uff1a\u901a\u8fc7\u4fee\u6539\u7ed3\u679c\u96c6\u4e2d\u6570\u636e\u503c\u66f4\u6539\u6570\u636e\u5e93\u4e2d\u5bf9\u5e94\u8bb0\u5f55 //\u521b\u5efaStatement\u5bf9\u8c61\u5e76\u8bbe\u7f6e\u7ed3\u679c\u96c6\u5c5e\u6027\u4e3a\u53ef\u66f4\u65b0 Statement stm = conn.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_UPDATABLE); //\u6267\u884cSQL\u8bed\u53e5 ResultSet rs = stm.executeQuery(sql); //\u7ed3\u679c\u96c6\u904d\u5386 while(rs.next()) { //\u66f4\u65b0\u7ed3\u679c\u96c6\u4e2d\u6307\u5b9a\u5217\u6570\u636e rs.updateLong(1, 5); //\u66f4\u65b0\u7ed3\u679c\u96c6\u4e2d\u6307\u5b9a\u5217\u6570\u636e rs.updateFloat(3, 12.3f); //\u7ed3\u679c\u96c6\u53d8\u66f4\u56de\u5199\u5165\u6570\u636e\u5e93 rs.updateRow(); } \u901a\u8fc7\u8c03\u7528 ResultSet \u7c7b\u7684 next()\u3001previous()\u3001absolute(int) \u65b9\u6cd5\u79fb\u52a8\u5149\u6807\u4f4d\u7f6e\uff0c\u5c06\u5149\u6807\u4f4d\u7f6e\u79fb\u52a8\u5230\u6307\u5b9a\u6570\u636e\u884c\uff0c\u901a\u8fc7 ResultSet \u7c7b\u5bf9\u5e94\u7684 get \u65b9\u6cd5\u83b7\u53d6\u884c\u6570\u636e\u3002 \u5982\u4f7f\u7528\u7ed3\u679c\u96c6\u66f4\u65b0\u6570\u636e\u5e93\u6570\u636e\uff0c\u9700\u5728\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65f6\uff0c\u8bbe\u7f6e\u8fde\u63a5\u5c5e\u6027 return_rowid \u4e3aTRUE\uff0c\u4e14\u5728\u751f\u6210\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61\u65f6\uff0c\u5e76\u53d1\u5c5e\u6027\u6307\u5b9a\u4e3a ResultSet.CONCUR_UPDATABLE\u3002 {.is-info} 6.6.2 \u901a\u8fc7\u79fb\u52a8\u5149\u6807\u83b7\u53d6\u7ed3\u679c\u96c6\u6761\u6570 \u793a\u4f8b 1\uff1a \u7edf\u8ba1\u7ed3\u679c\u96c6\u603b\u6761\u6570 //\u521b\u5efaStatement\u5bf9\u8c61 Statement stm= conn.createStatement(); stm.execute(\"create table test(id int identity(1,1));insert into test values(default)\"); //\u6267\u884c\u7ed3\u679c\u96c6\u67e5\u8be2 ResultSet rs = stm.executeQuery(\"select * from test\") //\u79fb\u52a8\u5149\u6807\u81f3\u7ed3\u679c\u96c6\u672b\u5c3e rs.last(); //\u83b7\u53d6\u7ed3\u679c\u96c6\u884c\u6570 int rsCounts = rs.getRow(); 6.6.3 \u591a\u7ed3\u679c\u96c6\u5904\u7406 \u865a\u8c37 JDBC \u652f\u6301\u591a\u7ed3\u679c\u96c6\u5904\u7406\uff0c\u5141\u8bb8 Statement \u63a5\u53e3\u652f\u6301\u591a\u91cd\u6253\u5f00\u7684 ResultSet \u5bf9\u8c61\u3002\u6267\u884c\u8bed\u53e5\u53ef\u4ee5\u662f\u591a\u6761 SQL \u8bed\u53e5\u7684\u96c6\u5408\uff0c\u5373\u4e00\u6b21\u6027\u5411\u865a\u8c37\u670d\u52a1\u5668\u53d1\u9001\u591a\u6761 SQL \u8bed\u53e5\uff0c\u865a\u8c37\u670d\u52a1\u5668\u6267\u884c\u5b8c SQL \u8bed\u53e5\u540e\u8fd4\u56de\u591a\u4e2a\u6267\u884c\u7ed3\u679c\uff1b\u4ea6\u6216\u5b58\u50a8\u8fc7\u7a0b\u5b9a\u4e49\u6709\u591a\u4e2a\u8fd4\u56de\u7ed3\u679c\u96c6\u3002\u865a\u8c37 JDBC \u7684 Statement \u91cd\u8f7d\u4e86 Statement \u63a5\u53e3\u4e2d\u7684 getMoreResults() \u65b9\u6cd5\u3002 \u793a\u4f8b\uff1a\u591a\u7ed3\u679c\u96c6\u5904\u7406 //SQL\u8bed\u53e5\u5305\u542b\u591a\u6761\u67e5\u8be2\u547d\u4ee4 String sql=\" SELECT * FROM A1 WHERE D2=(SELECT AVG(D2) FROM A1 GROUP BY D1);SELECT * FROM A1 WHERE D2>(SELECT MIN(D2) FROM A1 GROUP BY D1)\"; //\u521b\u5efaStatement\u5bf9\u8c61 Statement stm = conn.createStatement(); //\u6267\u884cSQL\u8bed\u53e5 boolean f = stm.execute(sql); //\u5224\u65ad\u662f\u5426\u6709ResultSet\u5bf9\u8c61\u4ea7\u751f if(f == true){ //\u83b7\u53d6\u7ed3\u679c\u96c6\u5bf9\u8c61 ResultSet rs1 = stm.getResultSet(); ... ... ... ... } while(true) { //\u5224\u65adStatement\u662f\u5426\u8fd4\u56de\u4e86\u591a\u4e2aResultSet\u5bf9\u8c61 if(!stm.getMoreResults(Statement.CLOSE_CURRENT_RESULT)){ break; } else if((rs2 = cstm.getResultSet())!=null) { ... ... ... ...//\u6570\u636e\u5904\u7406\u90e8\u5206\u7701\u7565 } } 6.6.4 \u670d\u52a1\u5668\u7aef\u6e38\u6807\u4f7f\u7528 \u865a\u8c37JDBC\u4e2d\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u751f\u6210\u9700\u6ee1\u8db3\u4e24\u4e2a\u6761\u4ef6\uff1aURL\u8fde\u63a5\u4e32\u5c5e\u6027recv_mode\u503c\u4e3a2\uff0cStatement\u5bf9\u8c61\u6267\u884cSQL\u8bed\u53e5\u4e3a\u5355\u6761SELECT\u8bed\u53e5\u3002 \u5e94\u7528\u7a0b\u5e8f\u7aef\u901a\u8fc7Statement\u7c7b\u7684setFetchSize(int)\u65b9\u6cd5\u6216ResultSet\u7c7b\u7684setFetchSize(int)\u65b9\u6cd5\u8bbe\u7f6e\u6bcf\u6b21\u4ece\u670d\u52a1\u5668\u7aef\u83b7\u53d6\u591a\u5c11\u6761\u6570\u636e\u3002 \u4f7f\u7528\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7684 ResultSet \u5bf9\u8c61\uff0c\u5149\u6807\u53ea\u80fd\u5355\u5411\u5411\u524d\u6b63\u5411\u79fb\u52a8\uff0c\u4e0d\u80fd\u5411\u540e\u79fb\u52a8\u6216\u6765\u56de\u6eda\u52a8\u3002 {.is-info} \u793a\u4f8b\uff1a\u865a\u8c37\u6570\u636e\u5e93\u670d\u52a1\u5668\u7aef\u6e38\u6807\u4f7f\u7528 //\u521b\u5efa\u865a\u8c37JDBC\u7279\u6709Statement\u5bf9\u8c61 Statement stm = (com.xugu.cloudjdbc.Statement)conn.createStatement(); //\u5f00\u542f\u670d\u52a1\u5668\u7aef\u6e38\u6807 stm.setServerCursor(true); //\u8bbe\u7f6e\u670d\u52a1\u5668\u7aef\u6e38\u6807\u5355\u6b21\u8fd4\u56de\u6570\u636e\u6761\u6570 stm.setFetchSize(1000); //\u6267\u884cSQL\u8bed\u53e5 ResultSet rs = stm.executeQuery(\"select * from t1\"); //\u904d\u5386\u6570\u636e while\uff08rs.next()\uff09 { ... ... ... ... } //\u5173\u95ed\u670d\u52a1\u5668\u7aef\u6e38\u6807 stm.setServerCursor(false); 6.6.5 \u68c0\u7d22\u81ea\u52a8\u4ea7\u751f\u7684\u5173\u952e\u5b57GeneratedKeys JDBC 3.0 \u89c4\u8303\u4e2d\u5bf9\u4e8e\u81ea\u52a8\u4ea7\u751f\u7684\u5173\u952e\u5b57\u6570\u503c\uff0c\u5b9a\u4e49\u4e86\u63a5\u53e3\u89c4\u8303\uff0c\u5373\uff1agetGeneratedKeys() \u65b9\u6cd5\u3002 \u4e3a\u4e86\u89e3\u51b3\u5bf9\u83b7\u53d6\u81ea\u52a8\u4ea7\u751f\u7684\u6216\u81ea\u52a8\u589e\u52a0\u7684\u5173\u952e\u5b57\u7684\u503c\u7684\u9700\u6c42\uff0c\u865a\u8c37 JDBC \u6839\u636e JDBC3.0 \u89c4\u8303\u63d0\u4f9b\u4e86\u83b7\u5f97\u5173\u952e\u5b57\u503c\u7684\u65b9\u6cd5\u3002\u83b7\u53d6\u5173\u952e\u5b57\u7684\u503c\uff0c\u9700\u8981\u5728\u6267\u884c\u65b9\u6cd5\u4e2d\u6307\u5b9a\u81ea\u589e\u5173\u952e\u5b57\u6807\u8bb0\u3002SQL \u8bed\u53e5\u6267\u884c\u5b8c\u540e\uff0c\u8c03\u7528 Statement \u5bf9\u8c61\u7684 getGeneratedKeys() \u65b9\u6cd5\uff0c\u83b7\u5f97\u5305\u542b\u81ea\u589e\u957f\u503c\u7684 ResultSet \u5bf9\u8c61\u3002 \u793a\u4f8b\uff1a\u83b7\u53d6\u6570\u636e\u5e93\u81ea\u589e\u957f\u5173\u952e\u5b57\u7684\u503c //\u521b\u5efaStatement\u5bf9\u8c61 Statement stmt = conn.createStatement(); //\u6307\u5b9a\u81ea\u589e\u957f\u5173\u952e\u5b57\u7684\u6807\u8bc6 String[] colN = {\"id\"}; //\u5728\u6267\u884c\u65b9\u6cd5\u4e2d\u5f15\u5165\u81ea\u589e\u957f\u5173\u952e\u5b57\u6807\u8bc6 stmt.executeUpdate(\"INSERT INTO authors(first_name, last_name) VALUES (\u2018Ghq\u2019, \u2018Wxl\u2019)\",colN); //\u83b7\u53d6\u7ed3\u679c\u96c6 ResultSet rs = stmt.getGeneratedKeys(); if ( rs.next() ) { //\u83b7\u53d6\u7ed3\u679c\u96c6\u4e2d\u7684\u81ea\u589e\u957f\u503c \u3000\u3000 int key = rs.getInt(); } 6.7 \u91ca\u653e\u8d44\u6e90 \u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u56e0\u5904\u7406\u9700\u8981\u6240\u5efa\u7acb\u7684 ResultSet\u3001Statement\u3001PreparedStatement \u7b49\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61\uff0c\u5728\u4f7f\u7528\u5b8c\u540e\u5fc5\u987b\u5173\u95ed\u3002\u5173\u95ed\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61\uff0c\u76f4\u63a5\u8c03\u7528\u5bf9\u5e94\u7684\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61 close() \u65b9\u6cd5\u5373\u53ef\u3002 \u5f53\u4e0d\u518d\u9700\u8981\u548c\u865a\u8c37\u6570\u636e\u5e93\u8fdb\u884c\u4ea4\u4e92\u65f6\uff0c\u9700\u65ad\u5f00\u6570\u636e\u5e93\u8fde\u63a5\u3002\u8c03\u7528 Connection \u7c7b\u7684 close() \u65b9\u6cd5\u5373\u4f1a\u5173\u95ed\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u540c\u65f6\u91ca\u653e\u8fde\u63a5\u4e0a\u6240\u6301\u6709\u7684\u6240\u6709\u6570\u636e\u5e93\u8d44\u6e90\u3002 \u6570\u636e\u5e93\u8fde\u63a5\u4e3a\u975e\u81ea\u52a8\u63d0\u4ea4\u65f6\uff0c\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61\u5728\u4f7f\u7528\u5b8c\u540e\uff0c\u82e5\u672a\u53ca\u65f6\u5173\u95ed\uff0c\u6b64\u65f6\u8fdb\u884c DDL \u64cd\u4f5c\u5c06\u4f1a\u5bfc\u81f4\u865a\u8c37\u6570\u636e\u5e93\u52a0\u9501\u8d85\u65f6\u6216\u5931\u8d25\u3002 {.is-info} \u4e03. \u5927\u5bf9\u8c61\u7c7b\u578b\u5904\u7406 JDBC 3.0 \u89c4\u8303\u5b9a\u4e49\u6709 java.sql.Blob \u4e0e java.sql.Clob \u63a5\u53e3\uff0c\u6b64\u4e24\u7c7b\u63a5\u53e3\u4e3a\u6570\u636e\u5e93\u5927\u5bf9\u8c61\u6570\u636e\u5904\u7406\u63a5\u53e3\u3002\u865a\u8c37\u6570\u636e\u5e93\u5927\u5bf9\u8c61\u5b57\u6bb5\u7c7b\u578b\u5305\u542b\uff1ablob\u3001clob\u3001binary\u3002 \u5728\u865a\u8c37 JDBC \u4e2d\uff0c\u83b7\u53d6\u5927\u5bf9\u8c61\u6570\u636e\u6709\u4e24\u79cd\u8fd4\u56de\u65b9\u5f0f\uff1a\u4e00\u79cd\u662f\u6570\u636e\u76f4\u63a5\u8fd4\u56de\uff1b\u53e6\u4e00\u79cd\u662f\u8fd4\u56de\u63cf\u8ff0\u7b26\u65b9\u5f0f\u3002\u5f53\u8fd4\u56de\u6570\u636e\u4e2d\u5927\u5bf9\u8c61\u6570\u636e\u8f83\u591a\u65f6\uff0c\u5efa\u8bae\u4f7f\u7528\u8fd4\u56de\u63cf\u8ff0\u7b26\u65b9\u5f0f\uff0c\u4ece\u800c\u907f\u514d\u56e0\u6570\u636e\u8fc7\u591a\u8fc7\u5927\u9020\u6210\u7684 JVM \u5185\u5b58\u6ea2\u51fa\u3002\u865a\u8c37 JDBC \u9a71\u52a8\u542f\u7528\u5927\u5bf9\u8c61\u8fd4\u56de\u63cf\u8ff0\u7b26\u65b9\u5f0f\uff0c\u9700\u5728\u8fde\u63a5 URL \u4e32\u4e0a\u914d\u7f6e\u5c5e\u6027 lob_ret \u4e3a descriptor \u3002 7.1 \u5411\u8868\u4e2d\u63d2\u5165\u5927\u5bf9\u8c61 LOB \u5bf9\u8c61\u7684\u63d2\u5165\u5fc5\u987b\u901a\u8fc7 PreparedStatement\u3001CallableStatement \u7c7b\u7684 setXXX() \u65b9\u6cd5\u65b9\u5f0f\u5b9e\u73b0\u3002\u865a\u8c37 JDBC \u4e2d PreparedStatement \u63d0\u4f9b\u591a\u79cd\u65b9\u6cd5\u8bbe\u7f6e\u5927\u5bf9\u8c61\u53c2\u6570\u503c\uff0c\u5982\u4e0b\u5217\u65b9\u6cd5\uff1a setBinaryStream(int parameterIndex,InputStream x) setBlob(int parameterIndex, Blob x) setBlob(int parameterIndex, InputStream x) setBytes(int parameterIndex,byte[] x) setCharacterStream(int parameterIndex, Reader reader) setClob(int parameterIndex, Clob x) setClob(int parameterIndex, Reader reader) setString(int parameterIndex, String x) \u793a\u4f8b\uff1a\u5e94\u7528\u7a0b\u5e8f\u63d2\u5165\u5927\u5bf9\u8c61\u6570\u636e\uff0c\u5176\u4e2d\u8868 b1 \u5b57\u6bb5 photo \u4e3a blob \u7c7b\u578b\uff0c\u5b57\u6bb5 text \u4e3a clob \u7c7b\u578b PreparedStatement ps = conn.prepareStatement(\"INSERT INTO b1 VALUES (?, ?)\")\u037e // blobBytes is a byte[] type ps.setBlob(1, new com.xugu.cloudjdbc.Blob(blobBytes))\u037e // clobString is a String type ps.setClob(2, new com.xugu.cloudjdbc.Clob(clobString))\u037e ps.execute()\uff1b 7.2 \u67e5\u8be2\u5927\u5bf9\u8c61\u6570\u636e \u901a\u8fc7\u865a\u8c37 JDBC \u83b7\u53d6\u5927\u5bf9\u8c61\u503c\uff0c\u6570\u636e\u5e93 CLOB \u5bf9\u8c61\u53ef\u901a\u8fc7\u5b57\u7b26\u4e32\u5f62\u5f0f\u6216\u6d41\u5f0f\u6570\u636e\u5f62\u5f0f\u83b7\u53d6\uff0c\u6570\u636e\u5e93 BLOB \u5bf9\u8c61\u53ea\u901a\u8fc7\u6d41\u5f0f\u6570\u636e\u5f62\u5f0f\u83b7\u53d6\u3002 \u793a\u4f8b 1\uff1a\u6d41\u5f0f\u83b7\u53d6 CLOB \u5bf9\u8c61 Statement stm = xgConn.createStatement(); String sql=\u201dselect remark from t_clob where id=101\u201d; ResultSet rs = stm.executeQuery(sql); while(rs.next) { Clob data = rs.getClob(\"remark \"); //\u4ee5\u5b57\u7b26\u6d41\u65b9\u5f0f\u83b7\u53d6\u6570\u636e Reader rd = data.getCharacterStream(); char[] sc = new char[1000]; StringBuffer sb = new StringBuffer(); int len = 0; while((len=rd.read(sc)) !=-1) { sb.append(new String(sc,0,len)); } System.out.println(sb.toString()); } \u793a\u4f8b 2\uff1a\u865a\u8c37 JDBC \u5141\u8bb8\u4ee5\u5b57\u7b26\u4e32\u7684\u5f62\u5f0f\u8bfb\u53d6 CLOB \u5bf9\u8c61 String sql=\"select text from t_clob\"\u037e Statement stm=conn.createStatement()\u037e ResultSet rs=stm.executeQuery(sql)\u037e while(rs.next()) { String clobStr =rs.getString(\"text\")\u037e } \u516b. \u865a\u8c37\u6570\u636e\u5e93\u8d1f\u8f7d\u5747\u8861 \u865a\u8c37\u6570\u636e\u5e93\u662f\u4e00\u6b3e\u5177\u5907\u9ad8\u5b89\u5168\u3001\u9ad8\u6027\u80fd\u3001\u9ad8\u6269\u5c55\u7b49\u7279\u6027\u7684\u3001\u57fa\u4e8e\u5206\u5e03\u5f0f\u67b6\u6784\u7684\u5206\u5e03\u5f0f\u4e8b\u52a1\u578b\u6570\u636e\u5e93\u3002\u90e8\u7f72\u6570\u636e\u5e93\u96c6\u7fa4\u65f6\uff0c\u591a\u53f0\u670d\u52a1\u5668\u4f5c\u4e3a\u4e00\u4e2a\u6574\u4f53\u5bf9\u5916\u63d0\u4f9b\u6570\u636e\u670d\u52a1\u3002\u5728\u591a\u673a\u73af\u5883\u4e0b\uff0c\u4e3a\u4f7f\u6570\u636e\u5e93\u8fde\u63a5\u5747\u5300\u5206\u5e03\u4e8e\u5404\u53f0\u670d\u52a1\uff0c\u865a\u8c37 JDBC \u5728\u63a5\u53e3\u5c42\u5b9e\u73b0\u4e86\u57fa\u4e8e\u8f6f\u8d1f\u8f7d\u5747\u8861\u6280\u672f\u7684\u6570\u636e\u5e93\u8fde\u63a5\u5efa\u7acb\u65b9\u5f0f\u3002 \u865a\u8c37\u6570\u636e\u5e93\u8d1f\u8f7d\u5747\u8861\u5206\u914d\u6570\u636e\u5e93\u8fde\u63a5\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a\u987a\u5e8f\u5206\u914d\u3001\u968f\u673a\u5206\u914d\u3002\u901a\u8fc7\u5728\u6570\u636e\u5e93 URL \u8fde\u63a5\u4e32\u4e0a\u8bbe\u7f6e\u53c2\u6570 conn_type(conn_type:1, \u968f\u673a\u5206\u914d\uff1b2, \u987a\u5e8f\u5206\u914d) \u7c7b\u578b\uff0c\u5b9e\u73b0\u6570\u636e\u5e93\u8fde\u63a5\u5728\u591a\u96c6\u7fa4\u73af\u5883\u4e0b\u7684\u8d1f\u8f7d\u5747\u8861\u3002\u9ed8\u8ba4\u8d1f\u8f7d\u5747\u8861\u5206\u914d\u65b9\u5f0f\uff1a\u987a\u5e8f\u5206\u914d\u3002 \u865a\u8c37 JDBC \u63d0\u4f9b\u4e09\u79cd\u914d\u7f6e\u8d1f\u8f7d\u5747\u8861\u7684\u65b9\u5f0f\uff1a\u6570\u636e\u5e93 URL \u8fde\u63a5\u4e32\u914d\u7f6e\u3001\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u6027\u6587\u4ef6 Properties \u914d\u7f6e\u3001\u6570\u636e\u5e93\u8fde\u63a5 XML \u6587\u4ef6\u914d\u7f6e\u3002 1. URL \u8fde\u63a5\u4e32\u914d\u7f6e Class.forName(\"com.xugu.cloudjdbc.Driver\"); //URL\u8fde\u63a5\u4e32\u4e2d\u4f7f\u7528ips\u5c5e\u6027\u914d\u7f6e\u591aIP\u8d1f\u8f7d\u5747\u8861 Connection conn = DriverManager.getConnection(\"jdbc:xugu://192.168.0.201:5138/SYSTEM?user=SYSDBA&password=SYSDBA&conn_type=1&ips=192.168.0.205,192.168.0.204,192.168.1.206\") \u8fde\u63a5\u5c5e\u6027\u6587\u4ef6 Properties \u914d\u7f6e (Vector \u6216\u5b57\u7b26\u4e32\u6570\u7ec4) Properties info=new Properties(); Class.forName(\"com.xugu.cloudjdbc.Driver\"); //Vector\u7ed3\u6784\u5b58\u653e\u8d1f\u8f7d\u5747\u8861\u591aIP\u5730\u5740\u65b9\u5f0f Vector<String> ipsVector=new Vector<String>(); ipsVector.add(\"192.168.1.201\"); ipsVector.add(\"192.168.1.204\"); ipsVector.add(\"192.168.1.205\"); ipsVector.add(\"192.168.1.206\"); info.put(\"ips\", ipsVector); //\u6570\u7ec4\u5b58\u653e\u8d1f\u8f7d\u5747\u8861\u591aIP\u5730\u5740\u65b9\u5f0f String[] ips={\"192.168.1.205\",\"192.168.1.204\",\"192.168.1.206\"}; info.put(\"ips\", ips); Connection conn = DriverManager.getConnection(\"jdbc:xugu://192.168.1.201:5138/SYSTEM?user=SYSDBA&password=SYSDBA&conn_type=2\",info); \u8fde\u63a5\u5c5e\u6027 XML \u6587\u4ef6\u914d\u7f6e <?xml version=\"1.0\" encoding=\"utf-8\"?> <listeners> <listener> <ip>192.168.1.206</ip> </listener> <listener> <ip>192.168.1.204</ip> </listener> <listener> <ip>192.168.1.205</ip> </listener> </listeners> Class.forName(\"com.xugu.cloudjdbc.Driver\"); Connection conn = DriverManager.getConnection(\"jdbc:xugu:file://xuguClouldListener.xml:5138/SYSTEM?user=SYSDBA&password=SYSDBA&conn_type=1\");","title":"JDBC\u540c\u6b65\u6d4b\u8bd5"},{"location":"JDBC/#jdbc","text":"Java \u6570\u636e\u5e93\u8fde\u63a5\uff08Java Database Connectivity\uff0c\u7b80\u79f0 JDBC\uff09\u662f Java \u8bed\u8a00\u4e2d\u7528\u6765\u89c4\u8303\u5ba2\u6237\u7aef\u7a0b\u5e8f\u5982\u4f55\u8bbf\u95ee\u6570\u636e\u5e93\u7684\u5e94\u7528\u7a0b\u5e8f\u63a5\u53e3\uff0c\u63d0\u4f9b\u4e86\u8bf8\u5982\u67e5\u8be2\u548c\u66f4\u65b0\u6570\u636e\u5e93\u4e2d\u6570\u636e\u7684\u65b9\u6cd5\uff0c\u53ef\u4ee5\u4e3a\u591a\u79cd\u5173\u7cfb\u6570\u636e\u5e93\u63d0\u4f9b\u7edf\u4e00\u8bbf\u95ee\u3002JDBC \u63d0\u4f9b\u4e86\u4e00\u79cd\u57fa\u51c6\uff0c\u901a\u8fc7\u6b64\u57fa\u51c6\u6570\u636e\u5e93\u5f00\u53d1\u4eba\u5458\u53ef\u6784\u5efa\u66f4\u9ad8\u7ea7\u7684\u5de5\u5177\u548c\u63a5\u53e3\uff0c\u4e5f\u53ef\u901a\u8fc7\u6b64\u57fa\u51c6\u7f16\u5199\u6570\u636e\u5e93\u5e94\u7528\u7a0b\u5e8f\u3002 \u865a\u8c37\u6570\u636e\u5e93\u7684 JDBC \u9a71\u52a8\u7a0b\u5e8f\uff08\u4ee5\u4e0b\u7b80\u79f0\uff1a\u865a\u8c37 JDBC\uff09\u5b9e\u73b0\u4e86 Java \u7a0b\u5e8f\u548c\u865a\u8c37\u6570\u636e\u5e93\u901a\u4fe1\uff0c\u652f\u6301 SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u7684\u8bbf\u95ee\uff0c\u540c\u65f6\u4e5f\u662f\u6784\u9020\u9ad8\u7ea7 API \u548c\u6570\u636e\u5e93\u5f00\u53d1\u5de5\u5177\u7684\u57fa\u7840\u3002 \u7528\u6237\u60f3\u8981\u5b9e\u73b0\u5bf9\u6570\u636e\u5e93\u7684\u8bbf\u95ee\uff0c\u4e00\u822c\u8981\u7ecf\u8fc7\u5982\u4e0b\u7684\u6b65\u9aa4\uff1a 1. \u901a\u8fc7\u9a71\u52a8\u5668\u7ba1\u7406\u5668\u83b7\u53d6\u8fde\u63a5\u63a5\u53e3\uff1b 2. \u83b7\u5f97 Statement \u6216 Statement \u5b50\u7c7b\uff1b 3. \u901a\u8fc7 Statement \u6267\u884c SQL \u547d\u4ee4\uff1b 4. \u5904\u7406\u6267\u884c\u7ed3\u679c\uff1b 5. \u5173\u95ed Statement\uff1b 6. \u5173\u95ed\u8fde\u63a5\u3002 JDBC \u7ed3\u6784\u56fe, \u5982\u56fe1.1\u6240\u793a\u3002 \u56fe1.1 JDBC\u7ed3\u6784\u56fe \u4f7f\u7528\u865a\u8c37 JDBC \u5b9e\u73b0\u5e94\u7528\u7a0b\u5e8f\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u4e4b\u95f4\u7684\u8fde\u63a5\u670d\u52a1\uff0c\u5e94\u7528\u7a0b\u5e8f\u6240\u5728\u8ba1\u7b97\u673a\u9700\u5df2\u5b89\u88c5 Java \u8fd0\u884c\u73af\u5883\uff08Java Runtime Environment, \u7b80\u79f0 JRE\uff09\u3002\u865a\u8c37 JDBC \u53c2\u7167 JDBC API \u5b9e\u73b0\uff0c\u652f\u6301 JDBC 3.0 \u529f\u80fd\uff0cJava \u5e94\u7528\u7a0b\u5e8f\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u4e4b\u95f4\u7684\u6240\u6709\u64cd\u4f5c\u5747\u9700\u901a\u8fc7\u865a\u8c37 JDBC \u6765\u5b8c\u6210\u3002 \u4f7f\u7528\u865a\u8c37 JDBC \u9700\u8981 JRE 1.6 \u7248\u6216\u66f4\u9ad8\u7248\u672c\u7684 Java \u8fd0\u884c\u65f6\u73af\u5883 (JRE)\u3002 {.is-info}","title":"\u4e00. \u865a\u8c37\u6570\u636e\u5e93\u7684JDBC\u9a71\u52a8\u7a0b\u5e8f\u6982\u8ff0"},{"location":"JDBC/#jdbc_1","text":"JDBC 3.0 \u89c4\u8303\u7531 JDBC 1.0\u3001JDBC 2.0 \u884d\u751f\u800c\u6765\uff0c\u4e3b\u8981\u5305\u542b java.sql \u5305\u4ee5\u53ca javax.sql \u5305\uff0c\u6570\u636e\u5e93 JDBC \u9a71\u52a8\u5b9e\u73b0 JDBC 3.0 \u89c4\u8303\u6240\u5b9a\u4e49\u7684\u7279\u6027\u63a5\u53e3\uff0c\u5373\u53ef\u8fbe\u5230\u5bf9\u6807\u51c6 JDBC 3.0 \u89c4\u8303\u7684\u652f\u6301\u3002 \u865a\u8c37 JDBC \u57fa\u4e8e JDBC 3.0 \u89c4\u8303\u5b9e\u73b0\uff0c\u5b9e\u73b0\u63a5\u53e3\u7c7b\u6620\u5c04\uff0c\u5982\u88682.1\u6240\u793a\u3002 \u88682.1 \u865a\u8c37JDBC\u5b9e\u73b0\u63a5\u53e3\u7c7b | \u63a5\u53e3 | \u865a\u8c37JDBC\u5b9e\u73b0\u7c7b | | ---------------------------------- | ---------------------------------------- | | java.sql.Driver | com.xugu.cloudjdbc.Driver | | java.sql.Connection | com.xugu.cloudjdbc.Connection | | java.sql.Statement | com.xugu.cloudjdbc.Statement | | java.sql.PreparedStatement | com.xugu.cloudjdbc.PreparedStatement | | java.sql.CallableStatement | com.xugu.cloudjdbc.CallableStatement | | java.sql.ResultSet | com.xugu.cloudjdbc.ResultSet | | java.sql.ResultSetMetaData | com.xugu.cloudjdbc.ResultSetMetaData | | java.sql.DatabaseMetaData | com.xugu.cloudjdbc.DatabaseMetaData | | java.sql.PrameterMetaData | com.xugu.cloudjdbc.PrameterMetaData | | java.sql.Types | com.xugu.cloudjdbc.Types | | java.sql.Blob | com.xugu.cloudjdbc.Blob | | java.sql.Clob | com.xugu.cloudjdbc.Clob | | java.sql.Savepoint | com.xugu.cloudjdbc.Savepoint | | javax.sql.DataSource | com.xugu.pool.XgDataSource | | javax.sql.ConnectionPoolDataSource | com.xugu.pool.XgConnectionPoolDataSource | | javx.sql.PooledConnection | com.xugu.pool.XgPooledConnection | \u9664\u4e86\u4ee5\u4e0a\u6807\u51c6\u7c7b\u63a5\u53e3\u5916\uff0c\u865a\u8c37 JDBC \u8fd8\u6269\u5c55\u5b9e\u73b0\u4e86\u4ee5\u4e0b\u7c7b\uff1a - com.xugu.cloudjdbc.ClientInfo - com.xugu.cloudjdbc.OutParameter - com.xugu.cloudjdbc.Rowid - com.xugu.cloudjdbc.SQLXml - com.xugu.cloudjdbc.SSL - com.xugu.pool.StatementWrapper - com.xugu.pool.PreparedStatementWrapper","title":"\u4e8c. \u865a\u8c37\u6570\u636e\u5e93\u7684JDBC\u63a5\u53e3\u548c\u5bf9\u8c61\u7c7b"},{"location":"JDBC/#_1","text":"","title":"\u4e09. \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b"},{"location":"JDBC/#31","text":"\u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b\u3001\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u3001Java \u6570\u636e\u7c7b\u578b\u4e09\u8005\u6620\u5c04\u5173\u7cfb\uff0c\u5982\u88683.1\u6240\u793a\u3002 \u88683.1 \u6570\u636e\u7c7b\u578b\u6620\u5c04\u5173\u7cfb \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b \u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b Java \u6570\u636e\u7c7b\u578b BOOLEAN BOOLEAN boolean SMALLINT SMALLINT short TINYINT TINYINT byte INTEGER INTEGER int BIGINT BIGINT long FLOAT FLOAT float DOUBLE DOUBLE double NUMERIC NUMERIC BigDecimal DECIMAL BigDecimal CHAR CHAR String NCHAR NCHAR String VARCHAR VARCHAR String VARCHAR2 VARCHAR String NVARCHAR2 VARCHAR String BLOB BLOB Blob CLOB CLOB Clob NCLOB BINARY BINARY byte[] VARBINARY LONG VARBINARY DATE DATE Date TIME TIME Time TIMESTAMP TIMESTAMP Timestamp","title":"3.1 \u57fa\u672c\u6570\u636e\u7c7b\u578b"},{"location":"JDBC/#32","text":"\u865a\u8c37 JDBC \u9664\u4e86\u5b9e\u73b0\u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b\uff0c\u8fd8\u6839\u636e\u865a\u8c37\u6570\u636e\u5e93\u81ea\u6709\u7c7b\u578b\u6269\u5c55\u4e86\u90e8\u5206\u6570\u636e\u7c7b\u578b\uff08\u88683.2\u6240\u793a\uff09\uff0c\u5305\u62ec\u4ee5\u4e0b\u6570\u636e\u7c7b\u578b\u3002 1. \u65f6\u95f4\u6570\u636e\u7c7b\u578b DATETIME\u2014\u2014\u2014 \u65e5\u671f\u65f6\u95f4\u7c7b\u578b DATETIME WITH TIME ZONE \u2014\u2014\u2014 \u5e26\u65f6\u533a\u7684\u65e5\u671f\u65f6\u95f4\u7c7b\u578b TIME WITH TIME ZONE \u2014\u2014\u2014 \u5e26\u65f6\u533a\u7684\u65f6\u95f4\u7c7b\u578b INTERVAL YEAR \u2014\u2014\u2014 \u5e74\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL MONTH \u2014\u2014\u2014 \u6708\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY\u2014\u2014\u2014 \u65e5\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL HOUR \u2014\u2014\u2014 \u5c0f\u65f6\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL MINUTE \u2014\u2014\u2014 \u5206\u949f\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL SECOND \u2014\u2014\u2014 \u79d2\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL YEAR TO MONTH \u2014\u2014\u2014 \u5e74\u5230\u6708\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY TO HOUR \u2014\u2014\u2014 \u65e5\u5230\u5c0f\u65f6\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY TO MINUTE \u2014\u2014\u2014 \u65e5\u5230\u5206\u949f\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY TO SECOND \u2014\u2014\u2014 \u65e5\u5230\u79d2\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL HOUR TO MINUTE \u2014\u2014\u2014 \u5c0f\u65f6\u5230\u5206\u949f\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL HOUR TO SECOND \u2014\u2014\u2014 \u5c0f\u65f6\u5230\u79d2\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL MINUTE TO SECOND \u2014\u2014\u2014 \u5206\u949f\u5230\u79d2\u7684\u65f6\u95f4\u95f4\u9694 2. \u6e38\u6807\u6570\u636e\u7c7b\u578b\uff08\u53ea\u5728\u5b58\u50a8\u8fc7\u7a0b\u3001\u51fd\u6570\u3001\u5305\u4e2d\u4f7f\u7528\uff09 CURSOR \u2014\u2014\u2014 \u6e38\u6807\u6570\u636e\u7c7b\u578b SYS_REFCURSOR \u2014\u2014\u2014 \u8fd4\u56de\u6e38\u6807\u6570\u636e\u7c7b\u578b 3. \u5176\u4ed6\u6570\u636e\u7c7b\u578b GUID \u2014\u2014\u2014 \u5168\u5c40\u552f\u4e00\u6807\u8bc6\u7b26 \u88683.2 \u6269\u5c55\u6570\u636e\u7c7b\u578b\u5bf9\u5e94\u8868 \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b \u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b Java \u6570\u636e\u7c7b\u578b DATETIME DATETIME Timestamp DATETIME WITH TIME ZONE DATETIME_TZ String TIME WITH TIME ZONE TIME_TZ String INTERVAL YEAR INTERVAL_Y String INTERVAL MONTH INTERVAL_M INTERVAL DAY INTERVAL_D INTERVAL HOUR INTERVAL_H INTERVAL MINUTE INTERVAL_MI INTERVAL SECOND INTERVAL_S String INTERVAL YEAR TO MONTH INTERVAL_Y2M INTERVAL DAY TO HOUR INTERVAL_D2H INTERVAL DAY TO MINUTE INTERVAL_D2M INTERVAL DAY TO SECOND INTERVAL_D2S INTERVAL HOUR TO MINUTE INTERVAL_H2M INTERVAL HOUR TO SECOND INTERVAL_H2S INTERVAL MINUTE TO SECOND INTERVAL_M2S CURSOR CURSOR \u65e0\u5bf9\u5e94\u7c7b\u578b SYS_REFCURSOR REFCUR GUID GUID String \u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528 ResultSet \u5bf9\u8c61\u6765\u5bf9\u5e94\u83b7\u53d6\u6e38\u6807\u6240\u8fd4\u56de\u6570\u636e\u3002 {.is-info}","title":"3.2 \u6269\u5c55\u6570\u636e\u7c7b\u578b"},{"location":"JDBC/#33","text":"\u5728\u8c03\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u4e2d\u7684\u67d0\u4e9b\u65b9\u6cd5\u65f6\uff0c\u9700\u8fdb\u884c Java \u6570\u636e\u7c7b\u578b\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u7684\u8f6c\u6362\uff0c\u8fd9\u4e9b\u65b9\u6cd5\u5305\u62ec\uff1a - ResultSet \u7c7b get\\<Type> \u65b9\u6cd5\uff1b - ResultSet \u7c7b update\\<Type> \u65b9\u6cd5\uff1b - CallableStatement \u7c7b get\\<Type> \u65b9\u6cd5\uff1b - PreparedStatement \u7c7b set\\<Type> \u65b9\u6cd5\u3002 \u6570\u636e\u7c7b\u578b\u4e4b\u95f4\u7684\u8f6c\u6362\uff0c\u9700\u9075\u4ece Java \u6570\u636e\u7c7b\u578b\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u6620\u5c04\u5173\u7cfb\u89c4\u5219\uff0c\u5426\u5219\u53ef\u80fd\u8f6c\u6362\u5931\u8d25\u3002 1. com.xugu.cloudjdbc.ResultSet \u7c7b\u4e2d get\\<Type> \u65b9\u6cd5\u7684\u7c7b\u578b\u8f6c\u6362\uff0c\u5982\u88683.3\u6240\u793a\u3002 2. com.xugu.cloudjdbc.PreparedStatement \u7c7b\u4e2d set\\<Type> \u65b9\u6cd5\u7684\u7c7b\u578b\u8f6c\u6362\uff0c\u5982\u88683.4\u6240\u793a\u3002 X\uff08\u65e0\u4e22\u5931\u8f6c\u6362\uff09\uff1a\u6307\u4ee5\u957f\u7cbe\u5ea6\u7c7b\u578b\u7684 get\\<Type> \u65b9\u6cd5\u83b7\u53d6\u77ed\u7cbe\u5ea6\u6570\u636e\u7c7b\u578b\u5217\u503c\u65e0\u4e22\u5931\u3002 \u5982\uff1a\u4f7f\u7528 getInt() \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u4e3a smallint \u7684\u5217\u6570\u636e\uff0c\u83b7\u53d6\u6570\u636e\u5b8c\u6574\u3002 Z\uff08\u4f9d\u8d56\u8f6c\u6362\uff09\uff1a\u6307 get\\<Type> \u65b9\u6cd5\u4e2d\u7684 Type \u7c7b\u578b\u4e0e\u83b7\u53d6\u6570\u636e\u5e93\u4e2d\u5217\u7684\u6570\u636e\u7c7b\u578b\u4e0d\u4e00\u81f4\uff0c\u6b64\u65f6\u9700\u8981\u901a\u8fc7\u5176\u4ed6\u6570\u636e\u7c7b\u578b\u8f6c\u6362\u4e3a Type \u6570\u636e\u7c7b\u578b\uff0c\u6b64\u8f6c\u6362\u8fc7\u7a0b\u503c\u53ef\u80fd\u4e22\u5931\u90e8\u5206\u6570\u636e\u3002 \u5982\uff1a\u4f7f\u7528 getInt() \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u4e3a float \u7684\u5217\u6570\u636e\uff0c\u53ef\u83b7\u53d6 float \u5217\u6570\u636e\u7684\u6574\u6570\u503c\uff0c\u800c\u5c0f\u6570\u7cbe\u5ea6\u503c\u5c06\u4e22\u5931\u3002 Y\uff08\u76f4\u63a5\u8f6c\u6362\uff09\uff1a\u6307 get\\<Type> \u65b9\u6cd5\u4e2d\u7684 Type \u7c7b\u578b\u4e0e\u83b7\u53d6\u6570\u636e\u5e93\u4e2d\u5217\u7684\u6570\u636e\u7c7b\u578b\u4e00\u81f4\u3002 \u5982\uff1a\u4f7f\u7528 getInt() \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u4e3a integer \u7684\u5217\u6570\u636e\uff0c\u76f4\u63a5\u83b7\u53d6\u5b8c\u6574\u6570\u636e\u3002 {.is-info} P\uff08\u5141\u8bb8\u63d2\u5165\uff09\uff1a\u6307 set\\<Type> \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u5e93\u4e2d\u5217\u6570\u636e\u65f6\uff0c\u6570\u636e\u65e0\u635f\u5931\u5b58\u5165\u6570\u636e\u5e93\u4e2d\u3002 \u5982\uff1a\u4f7f\u7528 setInt() \u65b9\u6cd5\u8bbe\u7f6e\u5217\u6570\u636e\u7c7b\u578b\u4e3a bigint \u7684\u6570\u636e\u65f6\uff0c\u6570\u636e\u53ef\u6b63\u786e\u5b58\u5165\u3002 Z\uff08\u90e8\u5206\u63d2\u5165\uff09\uff1a\u6307 set\\<Type> \u65b9\u6cd5\u4e2d\u7684 Type \u7c7b\u578b\u548c\u6570\u636e\u5e93\u4e2d\u5217\u6570\u636e\u7c7b\u578b\u4e0d\u4e00\u81f4\uff0c\u6570\u636e\u4ec5\u80fd\u90e8\u5206\u6b63\u786e\u5b58\u5165\u3002 \u5982\uff1a\u4f7f\u7528 setInt() \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u5e93\u5217\u7c7b\u578b\u4e3a tinyint \u7684\u6570\u636e\uff0c\u56e0 tinyint \u8868\u793a\u8303\u56f4\u4e3a-128\uff5e127 \u7684\u6574\u6570\u503c\uff0c\u6545\u800c tinyint\u8868\u793a\u8303\u56f4\u5185\u6570\u636e\u53ef\u6b63\u786e\u5b58\u5165\uff0c\u8303\u56f4\u5916\u6570\u636e\u5c06\u63d2\u5165\u5931\u8d25\u3002 {.is-info}","title":"3.3 \u6570\u636e\u7c7b\u578b\u8f6c\u6362"},{"location":"JDBC/#_2","text":"","title":"\u56db. \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5"},{"location":"JDBC/#41-jdbc","text":"\u901a\u8fc7\u865a\u8c37 JDBC \u9a71\u52a8\u8bbf\u95ee\u865a\u8c37\u6570\u636e\u5e93\uff0c\u9996\u5148\u5e94\u4fdd\u8bc1\u5e94\u7528\u7a0b\u5e8f\u6b63\u786e\u5f15\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u5305 (cloudjdbc-*.*.*.jar)\uff0c\u5373\u5c06\u9a71\u52a8\u5305\u62f7\u8d1d\u81f3\u5e94\u7528\u7a0b\u5e8f\u5e76\u6dfb\u52a0\u5f15\u7528\u3002","title":"4.1 \u90e8\u7f72JDBC\u9a71\u52a8\u7a0b\u5e8f"},{"location":"JDBC/#42-jdbc","text":"\u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u8fdb\u884c\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u8c03\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u7a0b\u5e8f\uff0c\u9996\u5148\u8981\u5c06\u865a\u8c37 JDBC \u9a71\u52a8\u52a0\u8f7d\u5230\u7cfb\u7edf\u5185\u5b58\u4e2d\uff0c\u7136\u540e\u4f9b\u7cfb\u7edf\u4f7f\u7528\u3002\u865a\u8c37 JDBC \u7684\u9a71\u52a8\u5b9e\u73b0\u7c7b\u4e3acom.xugu.cloudjdbc.Driver\uff0c\u4ee5\u4e0b\u662f\u5c06\u865a\u8c37 JDBC \u9a71\u52a8\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\u7684\u4ee3\u7801\uff1a //\u663e\u793a\u6ce8\u518c DriverManager.registerDriver(new com.xugu.cloudjdbc.Driver())\u037e //\u9690\u5f0f\u6ce8\u518c Class.forName(\u201ccom.xugu.cloudjdbc.Driver\u201d)\u037e \u9690\u5f0f\u6ce8\u518c\u5373\u901a\u8fc7 Class.forName() \u5c06\u5bf9\u5e94\u7684\u9a71\u52a8\u7c7b\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\uff0c\u5c06\u6267\u884c\u5185\u5b58\u4e2d\u7684 static \u9759\u6001\u4ee3\u7801\u6bb5\uff0c\u6b64\u4ee3\u7801\u6bb5\u4f1a\u521b\u5efa\u4e00\u4e2a\u865a\u8c37 JDBC \u9a71\u52a8\u7684\u5b9e\u4f8b\uff0c\u5e76\u653e\u5165 DriverManager \u4e2d\uff0c\u4f9b DriverManager \u4f7f\u7528\u3002 {.is-info}","title":"4.2 \u52a0\u8f7dJDBC\u9a71\u52a8\u7a0b\u5e8f"},{"location":"JDBC/#43","text":"\u865a\u8c37 JDBC \u9a71\u52a8\u8fde\u63a5 URL \u4e32\u683c\u5f0f\uff1a jdbc:xugu://serverIP:portNumber/databaseName[?property=value[&property=value]] \u865a\u8c37 JDBC \u9a71\u52a8\u8fde\u63a5 URL \u4e32\u683c\u5f0f\uff1a 1). jdbc:xugu:// \uff1a\uff08\u5fc5\u9700\uff09\u865a\u8c37\u6570\u636e\u5e93\u7279\u5b9a\u534f\u8bae\u3002 2). serverIP \uff1a\uff08\u5fc5\u9700\uff09\u865a\u8c37\u6570\u636e\u5e93\u6240\u5728\u670d\u52a1\u5668\u7684 IP \u5730\u5740\u3002 3). portNumber\uff1a\uff08\u5fc5\u9700\uff09\u662f\u865a\u8c37\u6570\u636e\u5e93\u670d\u52a1 TCP \u8bbf\u95ee\u7aef\u53e3\uff0c\u9ed8\u8ba4 5138\u3002 4). databaseName\uff1a\uff08\u5fc5\u9700\uff09\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u5e93\u540d\u79f0\u3002 5). property\uff1a\uff08\u53ef\u9009\uff09\u865a\u8c37\u6570\u636e\u5e93\u7684 URL \u8fde\u63a5\u5c5e\u6027\u3002\u591a\u4e2a\u8fde\u63a5\u5c5e\u6027\u4e4b\u95f4\u4f7f\u7528\u201c&\u201d\u5206\u9694\uff0c\u4e0d\u53ef\u91cd\u590d\u3002 \u865a\u8c37 JDBC \u9a71\u52a8 URL \u4e32\u793a\u4f8b\u5982\u4e0b\uff1a String url = jdbc:xugu://localhost:5138/System?user=GUEST&password=GUEST\u037e property \u8bbe\u7f6e\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u6027\uff0c\u5e38\u7528\u8fde\u63a5\u5c5e\u6027\u89c1\u88684.1\u3002 \u88684.1 \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u6027 table th:first-of-type { width: 20%; } table th:nth-of-type(2) { width: 10%; } table th:nth-of-type(3) { width: 10%; } table th:nth-of-type(4) { width: 50%; } \u5c5e\u6027\u540d\u79f0 \u5fc5\u9009\u9879 \u53d6\u503c \u8bf4\u660e database \u221a \u5b57\u7b26\u4e32 \u6570\u636e\u5e93\u540d\u79f0 user \u221a \u5b57\u7b26\u4e32 \u7528\u6237\u540d\u79f0 password \u221a \u5b57\u7b26\u4e32 \u7528\u6237\u5bc6\u7801 encryptor \u00d7 \u5b57\u7b26\u4e32 \u7528\u4e8e\u542f\u52a8\u52a0\u5bc6\u6570\u636e\u5e93\uff0c\u82e5\u5e93\u672a\u52a0\u5bc6\uff0c\u5219\u53ef\u4e0d\u8981\uff0c\u4f46\u5e26\u4e0a\u6b64\u53c2\u6570\u4e0d\u4f1a\u5f71\u54cd\u8fde\u63a5 char_set \u00d7 \u5b57\u7b26\u4e32 \u8fde\u63a5\u5b57\u7b26\u96c6\u3002'GB2312'\u3001'GBK'\u3001'UTF8' \u7b49\uff0c\u9ed8\u8ba4\uff1aGBK time_zone \u00d7 \u5b57\u7b26\u4e32 \u5ba2\u6237\u7aef\u65f6\u533a\u3002\u9ed8\u8ba4\uff1a\u865a\u8c37\u6570\u636e\u5e93\u914d\u7f6e\u53c2\u6570 def_timezone \u6240\u8bbe\u7f6e\u65f6\u533a\uff08\u53ea\u5bf9\u7cfb\u7edf\u65f6\u95f4\u51fd\u6570\u751f\u6548\uff09 iso_level \u00d7 \u5b57\u7b26\u4e32 'READ COMMITED'\uff1a\u8bfb\u5df2\u63d0\u4ea4\uff1b 'REPEATIABLE READ'\uff1a\u53ef\u91cd\u590d\u8bfb\uff1b'SERIALIZABLE'\uff1a\u5e8f\u5217\u5316 lock_time \u00d7 \u6570\u503c \u5355\u4f4d\uff1a\u6beb\u79d2\uff0c\u9ed8\u8ba4\u503c\uff1a0\uff0c\u8868\u793a\u8fde\u63a5\u4e2d\u7684\u4e8b\u52a1\u9501\u5f81\u7528\u65f6\uff0c\u6700\u5927\u7b49\u5019\u65f6\u95f4\uff0c\u82e5\u5728\u8bbe\u7f6e\u65f6\u95f4\u5185\u52a0\u9501\u5931\u8d25\uff0c\u56de\u6eda\u4e8b\u52a1\u5e76\u62a5\u9519 lob_ret \u00d7 \u5b57\u7b26\u4e32 \u5927\u5bf9\u8c61\uff08Blob\u3001Clob\uff09\u6570\u636e\u8fd4\u56de\u65b9\u5f0f\u3002\u5c5e\u6027\u4e3a descriptor \u65f6\uff0c\u4ee5\u63cf\u8ff0\u7b26\u65b9\u5f0f\u8fd4\u56de\uff1b\u5176\u4ed6\u4ee5\u6570\u636e\u6d41\u65b9\u5f0f\u8fd4\u56de\u3002\u9ed8\u8ba4\uff1a\u4ee5\u6570\u636e\u6d41\u65b9\u5f0f\u8fd4\u56de return_rowid \u00d7 \u5e03\u5c14\u503c \u662f\u5426\u8fd4\u56de\u8bb0\u5f55 rowid \u503c\u3002\u5c5e\u6027\u4e3a TRUE \u65f6\uff0c\u8fd4\u56de rowid\uff1b\u5176\u4ed6\u8fd4\u56de FALSE\u3002\u9ed8\u8ba4\uff1aFALSE auto_commit \u00d7 on/off \u4e8b\u52a1\u662f\u5426\u81ea\u52a8\u63d0\u4ea4\u3002\u5c5e\u6027\u4e3a ON \u65f6\uff0c\u8fde\u63a5\u81ea\u52a8\u63d0\u4ea4\uff1b\u5c5e\u6027\u4e3a OFF\u65f6\uff0c\u8fde\u63a5\u975e\u81ea\u52a8\u63d0\u4ea4\u3002\u9ed8\u8ba4\uff1aON conn_type \u00d7 \u6570\u503c \u8d1f\u8f7d\u5747\u8861\u5206\u914d\u65b9\u5f0f\u3002\u5c5e\u6027\u4e3a 1 \u65f6\uff0c\u968f\u673a\u5206\u914d\uff1b\u5c5e\u6027\u4e3a 2 \u65f6\uff0c\u987a\u5e8f\u5206\u914d\u3002\u9ed8\u8ba4\uff1a2 ips \u00d7 \u5b57\u7b26\u4e32 \u8d1f\u8f7d\u5747\u8861\u8fde\u63a5 IP \u5730\u5740\uff0c\u591a\u4e2a IP \u5730\u5740\u4ee5\u9017\u53f7\u5206\u9694\uff08\u8be6\u7ec6\u89c1\u8d1f\u8f7d\u5747\u8861\uff09 CompatibleOracle \u00d7 \u5e03\u5c14\u503c \u517c\u5bb9 Oracle \u9009\u9879\u3002\u5c5e\u6027\u4e3a true\uff0c\u517c\u5bb9 Oracle\u037e \u5c5e\u6027\u4e3a FALSE\uff0c\u865a\u8c37 JDBC \u81ea\u6709\u5b9e\u73b0 recv_mode \u00d7 \u6570\u503c \u63a5\u6536\u6a21\u5f0f\u9009\u9879\u3002\u5c5e\u6027\u503c\u4e3a 0 \u65f6\uff0c\u672c\u5730\u5168\u63a5\u6536\u6a21\u5f0f\uff1b\u5c5e\u6027\u503c\u4e3a 1 \u65f6\uff0c\u7f51\u7edc\u63a5\u6536\u6a21\u5f0f\uff1b\u5c5e\u6027\u503c\u4e3a 2 \u65f6\uff0c\u670d\u52a1\u5668\u7aef\u6e38\u6807\u63a5\u6536\u6a21\u5f0f\u3002\u9ed8\u8ba4\uff1a0 emptyStringAsNull \u00d7 \u5e03\u5c14\u503c \u7a7a\u5b57\u4e32\u5904\u7406\u3002\u5c5e\u6027\u4e3a FALSE \u65f6\uff0c\u7a7a\u5b57\u7b26\u4e32\u8ba4\u5b9a\u4e3a NULL\uff1b\u5c5e\u6027\u4e3a TRUE \u65f6\uff0c\u7a7a\u5b57\u7b26\u4e32\u4fdd\u7559\u3002\u9ed8\u8ba4\uff1a\u7a7a\u5b57\u4e32\u4fdd\u7559 xgversion \u00d7 201/301 \u5ba2\u6237\u7aef\u534f\u8bae\u7248\u672c\uff0c\u865a\u8c37\u6570\u636e\u5e93V12\u7248\u672c\u5347\u7ea7\u652f\u6301301\u534f\u8bae\uff0c\u540c\u65f6\u517c\u5bb9201\u534f\u8bae SSL \u00d7 SSL \u8fde\u63a5\u52a0\u5bc6\u53c2\u6570\u3002\u5c5e\u6027\u503c\u3010SSL\uff1a\u542f\u7528SSL\u52a0\u5bc6\u4f20\u8f93\uff1bNSSL\uff1a\u7981\u7528SSL\u52a0\u5bc6\u4f20\u8f93\u3011 slowsqltime \u00d7 \u6570\u503c \u8bbe\u7f6e\u6162SQL\u6267\u884c\u65f6\u95f4\u3002SQL\u8bed\u53e5\u6267\u884c\u65f6\u95f4\u8d85\u8fc7\u8be5\u6570\u503c\uff0c\u65e5\u5fd7\u5219\u4f1a\u8f93\u51fa\u6267\u884cSQL batch_mode \u00d7 \u5e03\u5c14\u503c PreparedStatement\u662f\u5426\u4f7f\u7528\u6279\u91cf\u5904\u7406\u3002\u5c5e\u6027\u4e3a TRUE \u65f6\uff0cexecuteBatch\u91c7\u7528\u6279\u91cf\u6a21\u578b\uff1bFALSE\u5219\u91c7\u7528\u5355\u6761\u5904\u7406\u6a21\u578b\u3002\u9ed8\u8ba4\uff1aFALSE \u8fde\u63a5\u53c2\u6570\u4f7f\u7528SSL\u5c5e\u6027\u65f6\uff0c\u4f9d\u8d56\u7a0b\u5e8f\u5305\u4e2d\u63d0\u4f9b\u7684\u52a8\u6001\u94fe\u63a5\u5e93\uff0c\u4f7f\u7528\u524d\u9700\u5c06\u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u5230\u64cd\u4f5c\u7cfb\u7edf\u6307\u5b9a\u4f4d\u7f6e\u65b9\u53ef\u6b63\u5e38\u4f7f\u7528SSL\u52a0\u5bc6\u529f\u80fd\u3002 Windows 32\u4f4d\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u7528SSL\u5c5e\u6027\u524d\uff0c\u9700\u5c06\u7a0b\u5e8f\u5305 ssl/win32 \u4e0b xgssl.dll \u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u62f7\u8d1d\u5230\u7cfb\u7edf\u76ee\u5f55 C:/windows/system32 \u76ee\u5f55\u4f4d\u7f6e\u3002 Windows 64\u4f4d\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u7528SSL\u5c5e\u6027\u524d\uff0c\u9700\u5c06\u7a0b\u5e8f\u5305 ssl/win64 \u4e0b xgssl.dll \u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u62f7\u8d1d\u5230\u7cfb\u7edf\u76ee\u5f55 C:/windows/system32 \u76ee\u5f55\u4e0b\u3002 Linux X64\u4f4d\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u7528SSL\u5c5e\u6027\u524d\uff0c\u9700\u5c06\u7a0b\u5e8f\u5305 ssl/linux64 \u4e0b libxgssl.so \u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u62f7\u8d1d\u5230\u7cfb\u7edf\u76ee\u5f55 /usr/lib\u6216\u8005/usr/lib4 \u76ee\u5f55\u4e0b\u3002 \u865a\u8c37 JDBC \u8bbe\u7f6e\u8fde\u63a5\u5c5e\u6027\u793a\u4f8b\u5982\u4e0b (\u7248\u672c\u53f7\u3001\u5927\u5bf9\u8c61\u63cf\u8ff0\u7b26\u3001\u65f6\u533a\u3001\u5173\u95ed\u8fde\u63a5\u81ea\u52a8\u63d0\u4ea4)\uff1a String url=jdbc:xugu://localhost:5138/System?user=GUEST&password=GUEST&version=110&auto_commit=false&lob_ret=descriptor&time_zone=GMT-8:00\u037e","title":"4.3 \u8fde\u63a5\u5b57\u4e32\u53ca\u53c2\u6570\u8bbe\u7f6e"},{"location":"JDBC/#44","text":"\u5728\u5e94\u7528\u7a0b\u5e8f\u5c06\u865a\u8c37 JDBC \u9a71\u52a8\u52a0\u8f7d\u5230\u7cfb\u7edf\u5185\u5b58\u4e2d\u540e\uff0c\u53ef\u901a\u8fc7 DriverManager \u7c7b\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u65b9\u6cd5\u5982\u4e0b\uff1a DriverManager.getConnection(String url)\u037e DriverManager.getConnection(String url,Properties)\u037e DriverManager.getConnection(String url,String user,String password)\u037e","title":"4.4 \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5"},{"location":"JDBC/#_3","text":"\u901a\u8fc7 DriverManager \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u4ee5\u5916\uff0c\u8fd8\u53ef\u4ee5\u4f7f\u7528\u6570\u636e\u6e90\u6216\u8fde\u63a5\u6c60\u65b9\u5f0f\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u3002\u901a\u8fc7\u6570\u636e\u6e90\u65b9\u5f0f\u6216\u8fde\u63a5\u6c60\u65b9\u5f0f\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u6709\u4ee5\u4e0b\u4f18\u70b9\uff1a - \u8d44\u6e90\u91cd\u7528 \u7531\u4e8e\u6570\u636e\u5e93\u8fde\u63a5\u5f97\u5230\u91cd\u7528\uff0c\u907f\u514d\u4e86\u9891\u7e41\u521b\u5efa\u3001\u91ca\u653e\u8fde\u63a5\u5f15\u8d77\u7684\u5927\u91cf\u6027\u80fd\u5f00\u9500\u3002\u5728\u51cf\u5c11\u7cfb\u7edf\u6d88\u8017\u7684\u57fa\u7840\u4e0a\uff0c\u53e6\u4e00\u65b9\u9762\u4e5f\u589e\u8fdb\u4e86\u7cfb\u7edf\u8fd0\u884c\u73af\u5883\u7684\u5e73\u7a33\u6027\uff08\u51cf\u5c11\u5185\u5b58\u788e\u7247\u4ee5\u53ca\u6570\u636e\u5e93\u4e34\u65f6\u8fdb\u7a0b/\u7ebf\u7a0b\u7684\u6570\u91cf\uff09\u3002 - \u66f4\u5feb\u7684\u7cfb\u7edf\u54cd\u5e94 \u6570\u636e\u5e93\u8fde\u63a5\u6c60\u5728\u521d\u59cb\u5316\u8fc7\u7a0b\u4e2d\uff0c\u5f80\u5f80\u5df2\u7ecf\u521b\u5efa\u4e86\u82e5\u5e72\u6570\u636e\u5e93\u8fde\u63a5\u7f6e\u4e8e\u6c60\u4e2d\u5907\u7528\u3002\u6b64\u65f6\u8fde\u63a5\u7684\u521d\u59cb\u5316\u5de5\u4f5c\u5747\u5df2\u5b8c\u6210\u3002\u5bf9\u4e8e\u4e1a\u52a1\u8bf7\u6c42\u5904\u7406\u800c\u8a00\uff0c\u76f4\u63a5\u5229\u7528\u73b0\u6709\u53ef\u7528\u8fde\u63a5\uff0c\u907f\u514d\u4e86\u6570\u636e\u5e93\u8fde\u63a5\u521d\u59cb\u5316\u548c\u91ca\u653e\u8fc7\u7a0b\u7684\u65f6\u95f4\u5f00\u9500\uff0c\u4ece\u800c\u7f29\u51cf\u4e86\u7cfb\u7edf\u6574\u4f53\u54cd\u5e94\u65f6\u95f4\u3002 - \u65b0\u7684\u8d44\u6e90\u5206\u914d\u624b\u6bb5 \u5bf9\u4e8e\u591a\u5e94\u7528\u5171\u4eab\u540c\u4e00\u6570\u636e\u5e93\u7684\u7cfb\u7edf\u800c\u8a00\uff0c\u53ef\u5728\u5e94\u7528\u5c42\u901a\u8fc7\u6570\u636e\u5e93\u8fde\u63a5\u7684\u914d\u7f6e\uff0c\u9650\u5236\u5355\u4e00\u5e94\u7528\u7533\u8bf7\u6570\u636e\u5e93\u8fde\u63a5\u6570\uff0c\u4ece\u800c\u907f\u514d\u5355\u4e00\u5e94\u7528\u72ec\u5360\u6240\u6709\u6570\u636e\u5e93\u8d44\u6e90\u3002 \u865a\u8c37 JDBC \u4e2d\u6570\u636e\u6e90\u5b9e\u73b0\u7c7b\u4e3a com.xugu.pool.XgDataSource\uff0c\u8fde\u63a5\u6c60\u5b9e\u73b0\u7c7b\u4e3acom.xugu.pool \u5305\u4e2d\u7684 XgDataSource\u3001XgPooledConnection\u3001XgConnectionPoolDataSource\u3001XgConnectionEventListener\u3001XgConnectionEvent\u3002","title":"\u4e94. \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u6e90\u548c\u8fde\u63a5\u6c60"},{"location":"JDBC/#51","text":"XgDataSource \u63d0\u4f9b set \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u6e90\u8fde\u63a5\u5c5e\u6027\uff1a \u793a\u4f8b\uff1a\u901a\u8fc7 XgDataSource \u4e0e\u865a\u8c37\u6570\u636e\u5e93\u5efa\u7acb\u8fde\u63a5 com.xugu.pool.XgDataSource ds = new com.xugu.pool.XgDataSource()\u037e ds.setUrl(\"jdbc:xugu://127.0.0.1:5138/db\")\u037e ds.setUser(\"SYSDBA\")\u037e ds.setPassword(\"SYSDBA\")\u037e Properties pro = new Properties()\u037e pro.setProperty(\"return_rowid\", \"true\")\u037e pro.setProperty(\"auto_commit\", \"off\")\u037e ds.setPro(pro)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u767b\u5f55\u4e32\u3002url\u4e3a\u6570\u636e\u5e93\u767b\u5f55\u4e32 setUrl(String url)\uff1b //\u6307\u5b9a\u6570\u636e\u5e93\u670d\u52a1\u5668\u3002host\u4e3a\u670d\u52a1\u5668\u5730\u5740 setHostName(String host)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u540d\u3002dbName\u4e3a\u6570\u636e\u5e93\u540d setDatabaseName(String dbName)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u7aef\u53e3\u53f7\u3002port\u4e3a\u6570\u636e\u5e93\u7aef\u53e3\u53f7 setPort(int port)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u7528\u6237\u3002userName\u4e3a\u6570\u636e\u5e93\u767b\u5f55\u7528\u6237\u540d setUser(String userName)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u767b\u5f55\u5bc6\u7801\u3002passWord\u4e3a\u6570\u636e\u5e93\u767b\u5f55\u5bc6\u7801 setPassword(Stirng passWord)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u767b\u5f55\u53c2\u6570\u3002ds_pro\u4e3a\u6570\u636e\u5e93\u8fde\u63a5\u53c2\u6570 setPro(Properties ds_pro)\uff1b // \u901a\u8fc7\u6570\u636e\u6e90\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5 Connection conn = ds.getConnection()\u037e \u5728 com.xugu.pool.XgDataSource \u7c7b\u4e2d\u901a\u8fc7 setXX() \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u6e90\u7684\u8fde\u63a5\u5c5e\u6027\uff0c\u82e5\u672a\u6307\u5b9a\u5219\u4f7f\u7528\u9ed8\u8ba4\u5c5e\u6027\u503c\uff1a\u6570\u636e\u5e93\u670d\u52a1\u5668\u5730\u5740\u9ed8\u8ba4\u4e3a\u201clocalhost\u201d \uff0c\u8fde\u63a5\u6570\u636e\u5e93\u9ed8\u8ba4\u4e3a\u201cSYSTEM\u201d \uff0c\u8bbf\u95ee\u7aef\u53e3\u53f7\u9ed8\u8ba4\u4e3a\u201c5138\u201d \uff0c\u8bbf\u95ee\u7528\u6237\u540d\u9ed8\u8ba4\u4e3a\u201cGUEST\u201d \uff0c\u7528\u6237\u5bc6\u7801\u9ed8\u8ba4\u4e3a\u201cGUEST\u201d \u3002URL \u9ed8\u8ba4\u8fde\u63a5\u4e32\u4e3a\u201cjdbc:xugu://127.0.0.1:5138/SYSTEM?user=GUEST&password=GUEST&version=110\u201d\u3002\u6570\u636e\u6e90\u5efa\u7acb\u540e\uff0c\u53ef\u901a\u8fc7\u8c03\u7528 XgDataSource \u7c7b\u4e2d\u7684 getConnection() \u548c getConnection(String username,String password) \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u3002","title":"5.1 \u4f7f\u7528\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u6e90\u521b\u5efa\u8fde\u63a5"},{"location":"JDBC/#52","text":"\u8fde\u63a5\u6c60\u6280\u672f\u7684\u6838\u5fc3\u601d\u60f3\u662f\uff1a\u8fde\u63a5\u590d\u7528\uff0c\u901a\u8fc7\u5efa\u7acb\u4e00\u4e2a\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u4ee5\u53ca\u4e00\u5957\u8fde\u63a5\u4f7f\u7528\u3001\u5206\u914d\u3001\u7ba1\u7406\u7b56\u7565\uff0c\u8be5\u8fde\u63a5\u6c60\u4e2d\u7684\u8fde\u63a5\u53ef\u4ee5\u5f97\u5230\u9ad8\u6548\u3001\u5b89\u5168\u7684\u590d\u7528\uff0c\u907f\u514d\u4e86\u6570\u636e\u5e93\u8fde\u63a5\u9891\u7e41\u5efa\u7acb\u3001\u5173\u95ed\u7684\u5f00\u9500\u3002 \u865a\u8c37 JDBC \u8fde\u63a5\u6c60\u5b9e\u73b0\u7c7b\u5bf9\u865a\u8c37\u6570\u636e\u5e93\u539f\u59cb\u8fde\u63a5\u8fdb\u884c\u4e86\u5c01\u88c5\uff0c\u4ece\u800c\u65b9\u4fbf\u4e86\u6570\u636e\u5e93\u5e94\u7528\u5bf9\u4e8e\u8fde\u63a5\u7684\u4f7f\u7528\uff08\u7279\u522b\u662f\u5bf9\u4e8e\u4e8b\u52a1\u5904\u7406\uff09\uff0c\u63d0\u9ad8\u4e86\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u6548\u7387\uff0c\u4e5f\u6b63\u662f\u56e0\u4e3a\u8fd9\u4e2a\u5c01\u88c5\u5c42\u7684\u5b58\u5728\uff0c\u9694\u79bb\u4e86\u5e94\u7528\u7684\u672c\u8eab\u7684\u5904\u7406\u903b\u8f91\u548c\u5177\u4f53\u6570\u636e\u5e93\u8bbf\u95ee\u903b\u8f91\uff0c\u4f7f\u5e94\u7528\u672c\u8eab\u7684\u590d\u7528\u6210\u4e3a\u53ef\u80fd\u3002\u8fde\u63a5\u6c60\u4e3b\u8981\u7531\u4e09\u90e8\u5206\u7ec4\u6210\uff1a\u8fde\u63a5\u6c60\u7684\u5efa\u7acb\u3001\u8fde\u63a5\u6c60\u4e2d\u8fde\u63a5\u7684\u4f7f\u7528\u7ba1\u7406\u3001\u8fde\u63a5\u6c60\u7684\u5173\u95ed\u3002 \u865a\u8c37 JDBC \u8fde\u63a5\u6c60\u7684\u57fa\u672c\u601d\u60f3\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u5efa\u7acb\u4e00\u4e2a\u201c\u7f13\u51b2\u6c60\u201d\u3002\u9884\u5148\u5728\u201c\u7f13\u51b2\u6c60\u201d\u4e2d\u653e\u5165\u4e00\u5b9a\u6570\u91cf\u7684\u8fde\u63a5\uff0c\u5f53\u9700\u8981\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65f6\uff0c\u53ea\u9700\u4ece\u201c\u7f13\u51b2\u6c60\u201d\u4e2d\u53d6\u51fa\u4e00\u4e2a\uff0c\u4f7f\u7528\u5b8c\u6bd5\u4e4b\u540e\u518d\u653e\u56de\u53bb\u3002\u901a\u8fc7\u8bbe\u5b9a\u8fde\u63a5\u6c60\u6700\u5927\u8fde\u63a5\u6570\u6765\u9632\u6b62\u7cfb\u7edf\u65e0\u5c3d\u7684\u4e0e\u6570\u636e\u5e93\u8fde\u63a5\u3002\u4ea6\u53ef\u901a\u8fc7\u8fde\u63a5\u6c60\u7684\u7ba1\u7406\u673a\u5236\u76d1\u89c6\u6570\u636e\u5e93\u7684\u8fde\u63a5\u6570\u91cf\u3001\u4f7f\u7528\u60c5\u51b5\uff0c\u4e3a\u7cfb\u7edf\u5f00\u53d1\u3001\u6d4b\u8bd5\u53ca\u6027\u80fd\u8c03\u6574\u63d0\u4f9b\u4f9d\u636e\u3002 \u5f53\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u5b8c\u6570\u636e\u5e93\u8fde\u63a5\u8c03\u7528\u8fde\u63a5\u5173\u95ed\u65b9\u6cd5\u65f6\uff0c\u8be5\u8fde\u63a5\u5e76\u672a\u9500\u6bc1\uff0c\u800c\u662f\u88ab\u5f52\u8fd8\u7ed9\u8fde\u63a5\u6c60\u7b49\u5f85\u4e0b\u6b21\u7ee7\u7eed\u8c03\u7528\u3002 {.is-info} \u865a\u8c37 JDBC \u5b9e\u73b0\u8fde\u63a5\u6c60\u670d\u52a1\u6240\u63d0\u4f9b\u7684\u63a5\u53e3\u7c7b\u5982\u4e0b\uff1a - XgDataSource \u5b9e\u73b0 javax.sql.DataSource \u63a5\u53e3\uff1b - XgPooledConnection \u5b9e\u73b0 javax.sql.PooledConnection \u63a5\u53e3\uff1b - XgConnectionPoolDataSource \u5b9e\u73b0 javax.sql.ConnectionPoolDataSource \u63a5\u53e3\uff1b - XgConnectionEventListener \u5b9e\u73b0 javax.sql.ConnectionEventListener \u63a5\u53e3\uff1b - XgConnectionEvent \u7ee7\u627f\u81ea javax.sql.ConnectionEvent \u7c7b\u3002 \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u4e2d\u7684\u8fde\u63a5\u5747\u662f\u901a\u8fc7\u6570\u636e\u6e90\u5efa\u7acb\u7684\uff0c\u6545\u800c XgConnectionPoolDataSource \u7ee7\u627f\u4e86 com.xugu.pool.XgDataSource \u7c7b\u3002\u7528\u6237\u4ea6\u53ef\u901a\u8fc7 XgConnectionPoolDataSource \u5bf9\u8c61\u8bbe\u7f6e\u6570\u636e\u6e90\u5c5e\u6027\u548c\u8fde\u63a5\u6c60\u5c5e\u6027\uff1a //\u6700\u5c0f\u8fde\u63a5\u6570 setMinIdle(int min) //\u6700\u5927\u8fde\u63a5\u6570 setMaxActive(int max) //\u767b\u5f55\u7a7a\u95f2\u65f6\u95f4 setLoginTimeout(int time) //\u6700\u5927\u7b49\u5f85\u8fde\u63a5\u8d85\u65f6 setMaxWaitTime(long waitTime) \u5176\u4e2d\uff1asetLoginTimeout() \u548c setMaxWaitTime() \u65b9\u6cd5\u4e2d\u53c2\u6570\u5355\u4f4d\u4e3a\u6beb\u79d2\uff0c\u5176\u4ed6\u65b9\u6cd5\u4e2d\u53c2\u6570\u5355\u4f4d\u4e3a\u79d2\u3002 \u793a\u4f8b\uff1a\u521b\u5efa\u4e00\u4e2a\u865a\u8c37 JDBC \u8fde\u63a5\u6c60\uff0c\u5e76\u901a\u8fc7\u8fde\u63a5\u6c60\u83b7\u53d6\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u3002 XgConnectionPoolDataSource CPDSource = new XgConnectionPoolDataSource()\u037e CPDSource.setHostName(\u201clocalhost\u201d)\u037e CPDSource.setPort(5138)\u037e CPDSource.setDatabaseName(\u201cxuguNew\u201d)\u037e CPDSource.setUser(\u201cSYSDBA\u201d)\u037e CPDSource.setPassword(\u201cSYSDBA\u201d)\u037e CPDSource.setUrl(\"jdbc:xugu://localhost:5138/xuguNew)\u037e CPDSource.setMaxActive(50)\u037e CPDSource.setMinIdle(5)\u037e CPDSource.setLoginTimeout(3000)\u037e CPDSource.setMaxWaitTime(3000)\u037e XgPooledConnection Pconn = (XgPooledConnection)CPDSource.getPooledConnection()\u037e Connection conn = Pconn.getConnection()\u037e","title":"5.2 \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u6c60"},{"location":"JDBC/#jdbc_2","text":"\u4f7f\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u5b9e\u73b0\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u4ea4\u4e92\u7684\u4e00\u822c\u4f7f\u7528\u6b65\u9aa4\uff1a\u5bfc\u5165\u865a\u8c37 JDBC \u9a71\u52a8\u5305 \u2192 \u52a0\u8f7d\u865a\u8c37 JDBC \u9a71\u52a8\u7a0b\u5e8f \u2192 \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5 Connection \u2192 \u521b\u5efa\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61 Statement \u2192 \u6267\u884c SQL \u8bed\u53e5 \u2192 \u5904\u7406\u6267\u884c\u7ed3\u679c ResultSet \u2192 \u91ca\u653e\u8d44\u6e90\u3002 - \u7b2c 1 \u6b65\uff1a\u5bfc\u5165\u865a\u8c37 JDBC \u9a71\u52a8\u5305 - \u7b2c 2 \u6b65\uff1a\u6ce8\u518a\u9a71\u52a8 (\u4ec5\u505a\u4e00\u6b21) - \u7b2c 3 \u6b65\uff1a\u5efa\u7acb\u8fde\u63a5 (Connection) - \u7b2c 4 \u6b65\uff1a\u521b\u5efa\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61 (Statement) - \u7b2c 5 \u6b65\uff1a\u6267\u884c SQL \u8bed\u53e5 - \u7b2c 6 \u6b65\uff1a\u5904\u7406\u6267\u884c\u7ed3\u679c (ResultSet) - \u7b2c 7 \u6b65\uff1a\u91ca\u653e\u8d44\u6e90","title":"\u516d. \u865a\u8c37\u6570\u636e\u5e93\u7684JDBC\u4ea4\u4e92\u6d41\u7a0b"},{"location":"JDBC/#61-jdbc","text":"\u4e0b\u8f7d\u865a\u8c37\u6570\u636e\u5e93\u4e13\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u5305 (cloudjdbc-*.*.*.jar)\uff0c\u5e76\u5bfc\u5165\u5230\u5e94\u7528\u7a0b\u5e8f\u4e2d\u3002","title":"6.1 \u5bfc\u5165\u865a\u8c37JDBC\u9a71\u52a8\u5305"},{"location":"JDBC/#62-jdbc","text":"\u865a\u8c37 JDBC \u9a71\u52a8\u7a0b\u5e8f\u4e2d Driver \u63a5\u53e3\u5b9e\u73b0\u7c7b\u4e3a com.xugu.cloudjdbc.Driver\u3002\u52a0\u8f7d\u9a71\u52a8\u65b9\u5f0f\u4e3a DriverManager.registerDriver(new com.xugu.cloudjdbc.Driver()) \u6216Class.forName(\u201ccom.xugu.cloudjdbc.Driver\u201d)\u3002","title":"6.2 \u52a0\u8f7d\u865a\u8c37JDBC\u9a71\u52a8"},{"location":"JDBC/#63","text":"\u5efa\u7acb\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u7684\u65b9\u5f0f\u6709\u591a\u79cd\uff0c\u53ef\u6839\u636e\u5e94\u7528\u7a0b\u5e8f\u5b9e\u9645\u4f7f\u7528\u573a\u666f\u9009\u62e9\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65b9\u5f0f\u3002\u5e38\u89c1\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65b9\u5f0f\u5982\u4e0b\uff1a - \u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u4f7f\u7528 DriverManager \u83b7\u5f97\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\uff1b - \u4f7f\u7528\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u6e90/\u8fde\u63a5\u6c60\u7684\u65b9\u5f0f\u83b7\u53d6\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\uff1b - \u4f7f\u7528\u7b2c\u4e09\u65b9\u901a\u7528\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u65b9\u5f0f\u83b7\u53d6\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u3002 \u5982\uff1adruid\u3001c3p0\u3001dbcp\u3001JNDI \u7b49\u3002","title":"6.3 \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5"},{"location":"JDBC/#631","text":"\u6253\u5f00\u6570\u636e\u5e93\u8fde\u63a5\u5373\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u5bf9\u8c61 Connection \u7c7b\u3002 \u5982\uff1aDriverManager \u901a\u8fc7 getConnection() \u65b9\u6cd5\u83b7\u53d6 Connection \u7c7b\u5bf9\u8c61\u3002DriverManager \u7684 getConnection() \u65b9\u6cd5\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\u7684\u65b9\u5f0f\u4ea6\u6709\u591a\u79cd\u3002\u4ee5\u4e0b\u4e3a\u5e38\u89c1\u65b9\u5f0f\uff1a - getConnection(String url) \u53c2\u6570\u8bf4\u660e\uff1a - url\uff1a\u8bbf\u95ee\u6570\u636e\u5e93\u7684 URL \u8def\u5f84\u3002 \u793a\u4f8b\uff1a \u4e0b\u9762\u7684\u4ee3\u7801\u5229\u7528 getConnection \u65b9\u6cd5\u521b\u5efa\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u3002 ``` public Connection getConnection(){ Connection con=null\u037e try{ //\u6ce8\u518c\u6570\u636e\u5e93\u9a71\u52a8 Class.forName(\"com.xugu.cloudjdbc.Driver\")\u037e //\u5b9a\u4e49\u8fde\u63a5\u6570\u636e\u5e93\u7684url String url = \"jdbc:xugu://localhost:5138/db?user=user1\uff06password=pwd\"\u037e //\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5 con = DriverManager.getConnection(url)\u037e System.out.println(\"\u6570\u636e\u5e93\u8fde\u63a5\u6210\u529f\uff01\")\u037e }catch(Exception e){ e.printStackTrace()\u037e } //\u8fd4\u56de\u4e00\u4e2a\u8fde\u63a5 return con\u037e } ``` getConnection(String url,String user,String password) \u53c2\u6570\u8bf4\u660e\uff1a url\uff1a\u8bbf\u95ee\u6570\u636e\u5e93\u7684 URL \u8def\u5f84\u3002 user\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u7528\u6237\u540d\u3002 password\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u7528\u6237\u5bc6\u7801\u3002 \u793a\u4f8b\uff1a \u4e0b\u9762\u7684\u4ee3\u7801\u5229\u7528 getConnection \u65b9\u6cd5\u521b\u5efa\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u3002 private Connection con; private String user = \"user1\"; //\u5b9a\u4e49\u8fde\u63a5\u6570\u636e\u5e93\u7684\u7528\u6237\u540d private String password = \"pwd\"; //\u5b9a\u4e49\u8fde\u63a5\u6570\u636e\u5e93\u7684\u5bc6\u7801 private String className = \"com.xugu.cloudjdbc.Driver\";//\u5b9a\u4e49\u865a\u8c37JDBC\u9a71\u52a8 private String url = \"jdbc:xugu://localhost:5138/db\"; /\\*\\*\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\\*/ public Connection getConnection(){ try{ Class.forName(className);//\u52a0\u8f7d\u6570\u636e\u5e93\u9a71\u52a8 System.out.println(\"\u6570\u636e\u5e93\u9a71\u52a8\u52a0\u8f7d\u6210\u529f\uff01\"); con = DriverManager.getConnection(url,user,password); //\u8fde\u63a5\u6570\u636e\u5e93 System.out.println(\"\u6210\u529f\u5730\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\uff01\"); }catch(Exception e){ System.out.println(\"\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\u5931\u8d25\uff01\"); con = null; e.printStackTrace(); } finally { If(conn != null){ //\u91ca\u653e\u8fde\u63a5\u8d44\u6e90 conn.close(); } } return con; } getConnection(String url,Properties info) \u53c2\u6570\u8bf4\u660e\uff1a url\uff1a\u8bbf\u95ee\u6570\u636e\u5e93\u7684 URL \u8def\u5f84\u3002 info\uff1a\u4e00\u4e2a\u6301\u4e45\u7684\u5c5e\u6027\u96c6\u5bf9\u8c61\uff0c\u5305\u62ec user \u548c password \u7b49\u5c5e\u6027\u3002 \u793a\u4f8b\uff1a \u4e0b\u9762\u7684\u4ee3\u7801\u5229\u7528 getConnection \u65b9\u6cd5\u521b\u5efa\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u3002 public Connection getConnection(){ Connection con = null; //\u5b9a\u4e49\u6570\u636e\u5e93\u8fde\u63a5\u5bf9\u8c61 Properties info = new Properties(); //\u5b9a\u4e49Properties\u5bf9\u8c61 info.setProperty(\"user\",\"user1\"); //\u8bbe\u7f6eProperties\u5bf9\u8c61\u5c5e\u6027 info.setProperty(\"password\",\"pwd\"); try{ //\u6ce8\u518c\u6570\u636e\u5e93\u9a71\u52a8 Class.forName(\"com.xugu.cloudjdbc.Driver\"); //test\u4e3a\u6570\u636e\u5e93\u540d\u79f0 String url = \"jdbc:xugu://localhost:5138/db\"; //\u83b7\u53d6\u8fde\u63a5\u6570\u636e\u5e93\u7684Connection\u5bf9\u8c61 con = DriverManager.getConnection(url,info); System.out.println(\"\u6570\u636e\u5e93\u8fde\u63a5\u6210\u529f\uff01\"); }catch(Exception e){ e.printStackTrace(); } //\u8fd4\u56de\u4e00\u4e2a\u8fde\u63a5 return con; }","title":"6.3.1 \u6253\u5f00\u6570\u636e\u5e93\u8fde\u63a5"},{"location":"JDBC/#632","text":"\u6570\u636e\u5e93\u4e8b\u52a1 (transaction) \u662f\u8bbf\u95ee\u5e76\u53ef\u80fd\u64cd\u4f5c\u5404\u79cd\u6570\u636e\u9879\u7684\u4e00\u4e2a\u6570\u636e\u5e93\u64cd\u4f5c\u5e8f\u5217\uff0c\u8fd9\u4e9b\u64cd\u4f5c\u8981\u4e48\u5168\u90e8\u6267\u884c, \u8981\u4e48\u5168\u90e8\u4e0d\u6267\u884c\uff0c\u662f\u4e00\u4e2a\u4e0d\u53ef\u5206\u5272\u7684\u5de5\u4f5c\u5355\u4f4d\u3002\u4e8b\u52a1\u7531\u4e8b\u52a1\u5f00\u59cb\u5230\u4e8b\u52a1\u7ed3\u675f\u4e4b\u95f4\u6267\u884c\u7684\u5168\u90e8\u6570\u636e\u5e93\u64cd\u4f5c\u7ec4\u6210\u3002 \u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\uff0c\u5373\u5f53\u4e00\u6761 SQL \u8bed\u53e5\u6267\u884c\u5b8c\u6210\u540e\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u5c06\u81ea\u52a8\u63d0\u4ea4\u8be5\u8bed\u53e5\u6240\u5728\u4e8b\u52a1\u3002\u5728\u865a\u8c37 JDBC \u9a71\u52a8\u4e2d\u63a7\u5236\u4e8b\u52a1\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a - \u901a\u8fc7\u6570\u636e\u5e93\u8fde\u63a5 URL \u4e32\u7684 auto_commit \u5c5e\u6027\uff0c\u63a7\u5236\u4e8b\u52a1\u7684\u5f00\u542f\u4e0e\u5173\u95ed\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b auto_commit \u5c5e\u6027\u4e3a on\uff0c\u5373\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u3002 - \u901a\u8fc7 Connection \u7c7b\u7684 setAutoCommit(boolean commit) \u65b9\u6cd5\u63a7\u5236\u4e8b\u52a1\u7684\u5f00\u542f\u4e0e\u5173\u95ed\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b commit \u5c5e\u6027\u4e3a TRUE\uff0c\u5373\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u3002 \u5728\u7981\u7528\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u4e0b\uff0c\u4f7f\u7528 Connection \u7c7b\u7684 commit() \u65b9\u6cd5\u63d0\u4ea4 SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u505a\u7684\u66f4\u6539\uff0c\u800c Connection \u7c7b\u7684 rollback() \u65b9\u6cd5\u5c06\u56de\u6eda SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u7684\u66f4\u6539\uff0c\u4e0a\u8ff0\u4e24\u79cd\u65b9\u6cd5\u6267\u884c\u5b8c\u6210\u540e\u5747\u5c06\u91ca\u653e\u4e8b\u52a1\u6301\u6709\u7684\u5168\u90e8\u9501\u8d44\u6e90\u3002 \u4e8b\u52a1\u4ec5\u5bf9\u6570\u636e\u5e93 DML \u64cd\u4f5c\u6709\u6548\u3002 {.is-info} \u4ee5\u4e0b\u4e3a\u4f7f\u7528 setAutoCommit() \u65b9\u6cd5\u63a7\u5236\u4e8b\u52a1\u63d0\u4ea4\u7684\u793a\u4f8b\u4ee3\u7801\uff1a //\u8bbe\u7f6e\u4e8b\u52a1\u4e3a\u975e\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f conn.setAutoCommit(false)\u037e //\u521b\u5efa\u6570\u636e\u5e93Statement\u5bf9\u8c61 Statement stm = conn.createStatement()\u037e //\u6570\u636e\u5e93\u4e8b\u52a1\u6267\u884cSQL\u8bed\u53e5 String sql = \"insert into test (comp_id,comp_name) values(1,'comp')\"\u037e //\u6267\u884c\u9759\u6001SQL\u8bed\u53e5 stm.execute(sql)\u037e //\u6570\u636e\u5e93\u9884\u5904\u7406SQL\u8bed\u53e5 PreparedStatement pstm = conn. prepareStatement(\u201cupdate test set id=? where comp_name=?\u201d) //\u9884\u5904\u7406SQL\u8bed\u53e5\u7b2c\u4e00\u4e2a\u53c2\u6570\u8d4b\u503c pstm.setInt(1,15)\u037e //\u9884\u5904\u7406SQL\u8bed\u53e5\u7b2c\u4e8c\u4e2a\u53c2\u6570\u8d4b\u503c pstm.setString(2,'DBMS')\u037e //\u6267\u884c\u9884\u5904\u7406SQL\u8bed\u53e5 pstm.execute()\u037e //\u63d0\u4ea4\u4e8b\u52a1 conn.commit()\u037e //\u5220\u9664\u8868\u4e2d\u6307\u5b9a\u884c\u6570\u636e stm.execute(\u201cdelete from test where id=15\u201d)\u037e //\u4e8b\u52a1\u56de\u6eda\u65b9\u6cd5 conn.rollback()\u037e \u4e0a\u9762\u4ee3\u7801\u4e2d\u6267\u884c\u63d0\u4ea4\u4e8b\u52a1\u64cd\u4f5c\uff0c\u6267\u884c\u9759\u6001 SQL \u8bed\u53e5\u4e0e\u6267\u884c\u9884\u5904\u7406 SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u7684\u66f4\u6539\u5c06\u6c38\u4e45\u751f\u6548\uff1b\u800c\u540e\u6267\u884c\u7684\u5220\u9664\u8868\u4e2d\u6307\u5b9a\u884c\u6570\u636e\u64cd\u4f5c\uff0c\u56e0\u5176\u540e\u8c03\u7528\u7684 rollback() \u65b9\u6cd5\uff0cdelete \u547d\u4ee4\u5bf9\u6570\u636e\u5e93\u7684\u6570\u636e\u66f4\u6539\u5c06\u88ab\u56de\u6eda\u6389\uff0c\u6545\u800c\u5bf9\u6570\u636e\u5e93\u7684\u5220\u9664\u64cd\u4f5c\u4e0d\u4f1a\u751f\u6548\u3002","title":"6.3.2 \u8fde\u63a5\u4e8b\u52a1\u7ba1\u7406"},{"location":"JDBC/#633-savepoint","text":"JDBC \u89c4\u8303 3.0 \u4e2d\u4e3a\u4e86\u589e\u52a0\u5bf9\u4e8b\u52a1\u7684\u63a7\u5236\uff0c\u65b0\u589e Savepoint \u63a5\u53e3\uff0c\u5176\u4ee3\u8868\u4e8b\u52a1\u4e2d\u7684\u4e00\u4e2a\u903b\u8f91\u4e8b\u52a1\u70b9\u3002\u5728\u975e\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u4e0b\uff0c\u4e00\u4e2a\u4e8b\u52a1\u4e2d\u53ef\u4ee5\u8bbe\u7f6e\u591a\u4e2a Savepoint\uff0c\u5728\u4ee3\u7801\u4e2d\u8fdb\u884c\u4e8b\u52a1\u56de\u6eda\u64cd\u4f5c\u65f6\uff0c\u53ef\u4ee5\u6307\u5b9a\u4e8b\u52a1\u56de\u6eda\u5230\u6307\u5b9a Savepoint \u4f4d\u7f6e\uff0c\u6307\u5b9a\u56de\u6eda\u4f4d\u7f6e\u524d\u7684\u4e8b\u52a1\u64cd\u4f5c\u4ecd\u7136\u4fdd\u7559\u3002\u6b64\u63a5\u53e3\u5927\u5927\u63d0\u9ad8\u4e86\u4e8b\u52a1\u5904\u7406\u7684\u7c92\u5ea6\uff0c\u65b9\u4fbf\u5e94\u7528\u7a0b\u5e8f\u63a7\u5236\u4e8b\u52a1\u5904\u7406\u903b\u8f91\u3002 \u793a\u4f8b\uff1a\u8fde\u63a5\u4e8b\u52a1\u63a7\u5236\u63a5\u53e3 Savepoint \u4f7f\u7528 //\u8bbe\u7f6e\u975e\u81ea\u52a8\u63d0\u4ea4 conn.setAutoCommit(false); //\u521b\u5efaStatement\u5bf9\u8c61 Statement stm = conn.createStatement(); //\u6267\u884cSQL\u547d\u4ee4 stm.execute(sql1); stm.execute(sql2); //\u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\u70b9save1 java.sql.Savepoint save1 =conn.setSavepoint(\"save_1\"); stm.execute(sql3); //\u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\u70b9save2 java.sql.Savepoint save2 =conn.setSavepoint(\"save_2\"); stm.execute(sql4); //\u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\u70b9save3 java.sql.Savepoint save3 =conn.setSavepoint(\"save_3\"); stm.execute(sql5); //\u56de\u6eda\u4e8b\u52a1\u5230\u56de\u6eda\u70b9save3 conn.rollback(save3); conn.commit(); \u4ee5\u4e0a\u4ee3\u7801\u6bb5\u4e2d\uff0c\u4e8b\u52a1\u6267\u884c\u8bed\u53e5 sql5 \u5c06\u88ab\u56de\u6eda\u6389\u3002","title":"6.3.3 \u8fde\u63a5\u4e8b\u52a1\u63a7\u5236\uff0cSavepoint\u63a5\u53e3"},{"location":"JDBC/#64-sql","text":"\u5728\u6570\u636e\u5e93\u6807\u51c6\u4e2d\uff0c\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61\u5206\u4e3a\u4e09\u7c7b\uff1a\u6267\u884c\u9759\u6001 SQL \u8bed\u53e5\u7684 Statement \u5bf9\u8c61\u3001\u6267\u884c\u9884\u7f16\u8bd1 SQL \u8bed\u53e5\u7684 PreparedStatement \u5bf9\u8c61\u4ee5\u53ca\u6267\u884c\u6570\u636e\u5e93\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\u7684 CallableStatement \u5bf9\u8c61\u3002","title":"6.4 \u521b\u5efa\u6267\u884cSQL\u8bed\u53e5\u5bf9\u8c61"},{"location":"JDBC/#641-sqlstatement","text":"Statement \u5bf9\u8c61\u7528\u4e8e\u6267\u884c\u9759\u6001 SQL \u8bed\u53e5\u548c\u83b7\u5f97 SQL \u4ea7\u751f\u7684\u7ed3\u679c\u3002\u5728\u865a\u8c37 JDBC \u9a71\u52a8\u4e2d\uff0c\u865a\u8c37\u6570\u636e\u5e93 DDL \u64cd\u4f5c\u5747\u901a\u8fc7 Statement \u5bf9\u8c61\u6765\u6267\u884c\u3002 Statement \u5bf9\u8c61\u901a\u8fc7 Connection \u7c7b\u7684 createStatement() \u65b9\u6cd5\u521b\u5efa\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a //\u521b\u5efa\u6267\u884cSQL\u8bed\u53e5\u5bf9\u8c61Statement Statement stm = conn.createStatement()\u037e","title":"6.4.1 \u6267\u884cSQL\u5bf9\u8c61Statement"},{"location":"JDBC/#642-sqlpreparedstatement","text":"PreparedStatement \u5bf9\u8c61\u4f7f\u7528\u65f6\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u5bf9\u6267\u884c SQL \u8bed\u53e5\u8fdb\u884c\u9884\u7f16\u8bd1\u5904\u7406\uff0c\u9884\u7f16\u8bd1 SQL \u8bed\u53e5\u5c06\u5728\u672a\u6765\u7684\u4f7f\u7528\u4e2d\u88ab\u91cd\u7528\u3002\u4e0e Statement \u5bf9\u8c61\u76f8\u6bd4\uff0cPreparedStatement \u5bf9\u8c61\u64cd\u4f5c\u591a\u6761 SQL \u8bed\u53e5\u7684\u6548\u7387\u66f4\u9ad8\u3002 \u7ecf\u8fc7\u9884\u7f16\u8bd1\u5e76\u5b58\u50a8\u5728 PreparedStatement \u5bf9\u8c61\u4e2d\u7684 SQL \u8bed\u53e5\uff0c\u901a\u8fc7 Connection \u7c7b\u7684 prepareStatement() \u65b9\u6cd5\u521b\u5efa\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a //\u521b\u5efa\u6267\u884c\u9884\u7f16\u8bd1SQL\u8bed\u53e5\u5bf9\u8c61PreparedStatement PreparedStatement preStatement = conn.prepareStatement(\u201c\u9884\u7f16\u8bd1SQL\u8bed\u53e5\u201d); \u9884\u5904\u7406 PreparedStatement \u5bf9\u8c61\u76f8\u5bf9\u4e8e\u9759\u6001 Statement \u5bf9\u8c61\u7684\u4f18\u52bf\uff1a - PreparedStatement \u53ef\u4ee5\u52a8\u6001\u4f20\u5165\u53c2\u6570\u503c\uff1b - PreparedStatement \u6bd4 Statement \u66f4\u5feb\uff1b PreparedStatement \u4f1a\u5c06 SQL \u8bed\u53e5\u9884\u7f16\u8bd1\u5728\u6570\u636e\u5e93\u7cfb\u7edf\u4e2d\uff0c\u6267\u884c\u8ba1\u5212\u540c\u6837\u4f1a\u88ab\u7f13\u5b58\u8d77\u6765\uff0c\u5b83\u5141\u8bb8\u6570\u636e\u5e93\u505a\u53c2\u6570\u5316\u67e5\u8be2\u3002\u4f7f\u7528\u9884\u5904\u7406\u8bed\u53e5\u6bd4\u666e\u901a\u7684 Statement \u67e5\u8be2\u66f4\u5feb\uff0c\u56e0\u505a\u7684\u5de5\u4f5c\u66f4\u5c11 (\u6570\u636e\u5e93\u5bf9 SQL \u8bed\u53e5\u7684\u5206\u6790\u3001\u7f16\u8bd1\u3001\u4f18\u5316\u5df2\u7ecf\u5728\u7b2c\u4e00\u6b21\u67e5\u8be2\u524d\u5b8c\u6210\u4e86)\u037e - PreparedStatement \u53ef\u4ee5\u9632\u6b62 SQL \u6ce8\u5165\u5f0f\u653b\u51fb\u3002 PreparedStatement \u5728\u4f7f\u7528\u53c2\u6570\u5316\u67e5\u8be2\u7684\u60c5\u51b5\u4e0b\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u4e0d\u4f1a\u5c06\u53c2\u6570\u7684\u5185\u5bb9\u89c6\u4e3a SQL \u6307\u4ee4\u7684\u4e00\u90e8\u5206\u6765\u5904\u7406\uff0c\u800c\u662f\u5728\u6570\u636e\u5e93\u5b8c\u6210 SQL \u6307\u4ee4\u7684\u7f16\u8bd1\u540e\uff0c\u624d\u5957\u7528\u53c2\u6570\u8fd0\u884c\uff0c\u56e0\u6b64\u5c31\u7b97\u53c2\u6570\u4e2d\u542b\u6709\u7834\u574f\u6027\u7684\u6307\u4ee4\uff0c\u4e5f\u4e0d\u4f1a\u88ab\u6570\u636e\u5e93\u6240\u8fd0\u884c\u3002","title":"6.4.2 \u6267\u884cSQL\u5bf9\u8c61PreparedStatement"},{"location":"JDBC/#643-callablestatement","text":"CallableStatement \u5bf9\u8c61\u5b9e\u73b0\u4e86\u4ece Java \u5e94\u7528\u7a0b\u5e8f\u4e2d\u8c03\u7528\u6570\u636e\u5e93\u5b58\u50a8\u8fc7\u7a0b\u3002\u4f46\u6b64\u8c03\u7528\u8fc7\u7a0b\u5e76\u4e0d\u5305\u542b\u5b58\u50a8\u8fc7\u7a0b\u672c\u8eab\uff0c\u56e0\u5b58\u50a8\u8fc7\u7a0b\u5b58\u50a8\u5728\u6570\u636e\u5e93\u4e2d\u3002 CallableStatement \u5bf9\u8c61\u4e3a\u6240\u6709\u7684\u6570\u636e\u5e93\u63d0\u4f9b\u4e86\u4e00\u79cd\u4ee5\u6807\u51c6\u5f62\u5f0f\u8c03\u7528\u5b58\u50a8\u8fc7\u7a0b\u7684\u65b9\u6cd5\uff0c\u901a\u8fc7 Connection \u7c7b\u7684 prepareCall() \u65b9\u6cd5\u521b\u5efa\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a //\u521b\u5efa\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u5bf9\u8c61CallableStatement CallableStatement cstmt= conn.prepareCall(\u201c{call \u5b58\u50a8\u8fc7\u7a0b\u540d(\u53c2\u6570\u8868\u5217)}\u201d);","title":"6.4.3 \u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u5bf9\u8c61CallableStatement"},{"location":"JDBC/#644-sql","text":"\u5728\u521b\u5efa\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61\u65f6\uff0c\u53ef\u901a\u8fc7\u6784\u9020\u65b9\u6cd5\u7684\u4e0d\u540c\u53c2\u6570\u8bbe\u7f6e ResultSet \u5bf9\u8c61\u5c5e\u6027\uff0c\u5c5e\u6027\u5305\u62ec\u7ed3\u679c\u7c7b\u578b ResultSetType\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b ResultSetConcurrency\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b ResultSetHoldability\u3002 ResultSetType \u9ed8\u8ba4\u4e3a ResultSet.TYPE_SCROLL_INSENSITIVE\uff1a\u652f\u6301\u7ed3\u679c\u96c6 backforward\u3001last\u3001first \u7b49\u64cd\u4f5c\uff0c\u5bf9\u6570\u636e\u5e93\u4e2d\u5176\u5b83 session \u8fdb\u884c\u7684\u6570\u636e\u66f4\u6539\u4e0d\u654f\u611f\uff1b ResultSetConcurrency \u9ed8\u8ba4\u4e3a ResultSet.CONCUR_READ_ONLY: \u4e0d\u53ef\u66f4\u65b0\u7ed3\u679c\u96c6\uff1b\u8be5\u5c5e\u6027\u4ea6\u53ef\u66f4\u6539\u4e3a ResultSet.CONCUR_UPDATABLE\uff0c\u652f\u6301\u5728 ResultSet \u4e2d\u5bf9\u8bb0\u5f55\u8fdb\u884c\u4fee\u6539\uff0c\u4fee\u6539\u540e\u8bb0\u5f55\u66f4\u65b0\u5230\u6570\u636e\u5e93\uff0c\u4fee\u6539\u64cd\u4f5c\u53ef\u5305\u542b\u63d2\u5165\u3001\u5220\u9664\u6216\u66f4\u65b0\uff1b ResultSetHoldability \u9ed8\u8ba4\u4e3a ResultSet.HOLD_CURSORS_OVER_COMMIT: \u5728\u4e8b\u52a1 commit \u6216 rollback \u540e\uff0cResultSet \u4ecd\u7136\u53ef\u7528\u3002 Connection \u7c7b\u521b\u5efa Statement \u5bf9\u8c61\u6784\u9020\u65b9\u6cd5\uff1a //Statement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 createStatement(int resultSetType,int resultSetConcurrency)\uff1b //Statement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 createStatement(int resultSetType,int resultSetConcurrency, int resultSetHoldability)\uff1b Connection \u7c7b\u521b\u5efa PreparedStatement \u5bf9\u8c61\u6784\u9020\u65b9\u6cd5\uff1a //PreparedStatement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareStatement(String sql, int resultSetType,int resultSetConcurrency) //PrepareStatment\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareStatement(String sql, int resultSetType,int resultSetConcurrency, int resultSetHoldability) Connection \u7c7b\u521b\u5efa CallableStatement \u5bf9\u8c61\u6784\u9020\u65b9\u6cd5\uff1a //CallableStatement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareCall(String sql, int resultSetType,int resultSetConcurrency) //CallableStatement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareCall(String sql, int resultSetType,int resultSetConcurrency, int resultSetHoldability)","title":"6.4.4 \u6267\u884cSQL\u8bed\u53e5\u5bf9\u8c61\u5c5e\u6027\u6269\u5145"},{"location":"JDBC/#65-sql","text":"Statement \u5bf9\u8c61\u5b9a\u4e49\u4e86\u591a\u79cd\u6267\u884c SQL \u8bed\u53e5\u7684\u65b9\u6cd5\uff0c\u7528\u6765\u5904\u7406\u8fd4\u56de\u4e0d\u540c\u7ed3\u679c\u7684 SQL \u547d\u4ee4\uff1a - execute(String sql)\uff1a\u6267\u884c\u53ef\u4ee5\u8fd4\u56de\u591a\u4e2a\u7ed3\u679c\u96c6\u7684 SQL \u8bed\u53e5\u8fd4\u56de\u7c7b\u578b\u4e3a boolean\uff0c\u5982\u679c\u8fd4\u56de\u7684\u662f\u66f4\u65b0\u7684\u6570\u76ee\uff0c\u5219\u8fd4\u56de false\uff1b\u5982\u679c\u8fd4\u56de\u7684\u662f ResultSet \u5bf9\u8c61\uff0c\u5219\u8fd4\u56detrue\u3002 - executeQuery(String sql)\uff1a\u6267\u884c\u8fd4\u56de\u5355\u4e2a ResultSet \u7684 SQL \u8bed\u53e5\u8fd4\u56de\u7c7b\u578b\u4e3a ResultSet \u5bf9\u8c61\u3002 - executeUpdate()\uff1a\u6267\u884c SQL INSERT\u3001UPDATE \u6216 DELETE \u8bed\u53e5\u8fd4\u56de\u503c\u4e3a int \u578b\uff0c\u6570\u636e\u5e93\u53d7\u5f71\u54cd\u7684\u884c\u8ba1\u6570\u3002 - \u6279\u5904\u7406\u65b9\u6cd5\uff1a\u6279\u91cf\u6267\u884c SQL \u8bed\u53e5 clearBatch()\uff1a\u6e05\u7a7a\u5386\u53f2 batch \u547d\u4ee4\uff1b addBatch(String sql)\uff1a\u6dfb\u52a0\u8981\u6267\u884c\u7684 sql\uff1b executeBatch()\uff1a\u6279\u91cf\u6267\u884c sql\u3002 PreparedStatement \u7ee7\u627f\u81ea Statement\uff0c\u5b9a\u4e49\u4e86\u5927\u91cf\u7684 setter \u65b9\u6cd5\u7528\u4e8e\u8bbe\u7f6e\u52a8\u6001 sql\u7684\u53c2\u6570\uff0c\u56e0\u6b64 PreparedStatement \u652f\u6301\u52a8\u6001\u4f20\u53c2\uff1b\u53e6\u5916 PreparedStatement \u5185\u90e8\u5b58\u50a8\u4e86\u89e3\u6790\u7684 sql\uff0c\u53ef\u4ee5\u591a\u6b21\u6267\u884c\u800c\u65e0\u9700\u91cd\u590d\u89e3\u6790\u3002PreparedStatement \u7ee7\u627f\u81ea Statement\uff0cCallableStatement \u7ee7\u627f\u81ea PreparedStatement\uff0c\u6545\u800c\u4e09\u8005\u6267\u884c SQL \u8bed\u53e5\u7684\u65b9\u5f0f\u53ef\u901a\u7528\u3002","title":"6.5 \u6267\u884cSQL\u8bed\u53e5"},{"location":"JDBC/#651-statement","text":"\u901a\u8fc7 Statement \u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c\u9700\u8981\u6ce8\u610f\u7684\u4e8b\u9879\uff1a - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u524d\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u8bbe\u7f6e\u4e3a FALSE\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\uff0c\u5e76\u8fdb\u884c\u624b\u52a8\u63d0\u4ea4\uff08commit\uff09\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u540e\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u6062\u590d\u4e3a TRUE\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u5f02\u5e38\u53d1\u751f\u65f6\uff0c\u8fdb\u884c rollback(\u56de\u6eda)\u3002 \u793a\u4f8b\uff1a\u901a\u8fc7 Statement \u6279\u91cf\u64cd\u4f5c\u6570\u636e try { //\u521b\u5efaStatement\u5bf9\u8c61 stm = con.createStatement(); //\u8bbe\u7f6e\u4e8b\u52a1\u975e\u81ea\u52a8\u63d0\u4ea4 con.setAutoCommit(false); // \u6dfb\u52a0\u591a\u6761SQL\u8bed\u53e5\u5230\u6279\u5904\u7406\u4e2d stm.addBatch(\"insert into student values(23,'tangbao','\u9ad8\u6570',100)\"); stm.addBatch(\"insert into student values(24,'\u738b\u5b9a','c#',98)\"); stm.addBatch(\"insert into student values(25,'\u738b\u56fd\u4e91','java',90)\"); //\u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c stm.executeBatch(); System.out.println(\"\u63d2\u5165\u6210\u529f!\"); //\u6267\u884c\u6210\u529f\u540e\u8fdb\u884c\u6570\u636e\u63d0\u4ea4 con.commit(); System.out.println(\"\u63d0\u4ea4\u6210\u529f!\"); //\u5173\u95ed\u975e\u81ea\u52a8\u63d0\u4ea4 con.setAutoCommit(true); } catch (SQLException e) { if (!con.isClosed()) { con.rollback(); //\u51fa\u73b0\u5f02\u5e38\uff0c\u56de\u6eda\u4e8b\u52a1 System.out.println(\"\u63d0\u4ea4\u5931\u8d25\uff0c\u56de\u6eda\uff01\"); con.setAutoCommit(true); //\u5173\u95ed\u975e\u81ea\u52a8\u63d0\u4ea4 } } finally { if (stmt != null) { //\u5173\u95ed\u64cd\u4f5c\u5bf9\u8c61 stmt.close(); } }","title":"6.5.1 \u901a\u8fc7Statement\u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c"},{"location":"JDBC/#652-preparedstatement","text":"\u901a\u8fc7 PreparedStatement \u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c\u9700\u8981\u6ce8\u610f\u7684\u4e8b\u9879\uff1a - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u524d\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u8bbe\u7f6e\u4e3a FALSE\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\uff0c\u5e76\u8fdb\u884c\u624b\u52a8\u63d0\u4ea4\uff08commit\uff09\uff0c\u6570\u636e\u91cf\u5927\u65f6\uff0c\u8bbe\u7f6e\u624b\u52a8\u63d0\u4ea4\u95f4\u9694\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u540e\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u6062\u590d\u4e3a TRUE\uff1b \u2022 \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u5f02\u5e38\u53d1\u751f\u65f6\uff0c\u8fdb\u884c rollback(\u56de\u6eda)\uff1b - PreparedStatement \u6267\u884c\u8bed\u53e5\u4e0d\u80fd\u4e3a DDL \u8bed\u53e5\u3002 \u793a\u4f8b\uff1a\u5c06 10000 \u6761\u8bb0\u5f55\u63d2\u5165\u6570\u636e\u5e93\u4e2d\uff0c\u6bcf 100 \u6761\u6267\u884c\u4e00\u6b21\u63d0\u4ea4\u64cd\u4f5c try{ conn.setAutoCommit(false); //\u8bbe\u7f6e\u975e\u81ea\u52a8\u63d0\u4ea4 //\u521b\u5efaPreparedStatement\u5bf9\u8c61 ps = conn.prepareStatement(\"insert into testtab values (?, ?, ?)\"); //\u5faa\u73af\u6dfb\u52a0\u6279\u5904\u7406\u6570\u636e for(int i = 0;i<list.size();i++){ HashMap map = list.get(i);//list\u4e3a\u6570\u636e\u5c01\u88c5\uff0c\u6b64\u5904\u7565 ps.setString(1, map.get(\"id\").toString()); ps.setString(2, map.get(\"name\").toString()); ps.setString(3, map.get(\"age\").toString()); ps.addBatch(); if(mod(i,100)==0){//\u6bcf100\u6761\u6267\u884c\u4e00\u6b21\u6267\u884c\u64cd\u4f5c ps.executeBatch();//\u6267\u884c\u6279\u91cf\u63d2\u5165 conn.commit();//\u6267\u884c\u4e8b\u52a1\u63d0\u4ea4 } } ps.executeBatch();//\u6267\u884c\u6279\u91cf\u63d2\u5165 conn.commit(); //\u63d0\u4ea4\u4e8b\u52a1 }catch(Exception e){ if (!conn.isClosed()) { conn.rollback(); //\u51fa\u73b0\u5f02\u5e38\uff0c\u56de\u6eda\u4e8b\u52a1 System.out.println(\"\u63d0\u4ea4\u5931\u8d25\uff0c\u56de\u6eda\uff01\"); conn.setAutoCommit(true); //\u5173\u95ed\u975e\u81ea\u52a8\u63d0\u4ea4 } } finally { if (ps!= null) { ps.close();//\u5173\u95ed\u64cd\u4f5c\u5bf9\u8c61 } }","title":"6.5.2 \u901a\u8fc7PreparedStatement\u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c"},{"location":"JDBC/#653-callablestatement","text":"CallableStatement \u5b58\u5728\u4e09\u79cd\u7c7b\u578b\u7684\u53c2\u6570 IN\u3001OUT \u548c INOUT\u3002 - IN\uff1a\u521b\u5efa SQL \u8bed\u53e5\u65f6\u5176\u53c2\u6570\u503c\u672a\u77e5\u3002\u4f7f\u7528 setXXX() \u65b9\u6cd5\u5c06\u503c\u7ed1\u5b9a\u5230 IN \u53c2\u6570\u3002 - OUT\uff1a\u7531 SQL \u8bed\u53e5\u8fd4\u56de\u7684\u53c2\u6570\u503c\u3002\u53ef\u4ee5\u4f7f\u7528 getXXX() \u65b9\u6cd5\u4ece OUT \u53c2\u6570\u4e2d\u68c0\u7d22\u503c\u3002 - INOUT\uff1a\u63d0\u4f9b\u8f93\u5165\u548c\u8f93\u51fa\u503c\u7684\u53c2\u6570\u3002\u4f7f\u7528 setXXX() \u65b9\u6cd5\u7ed1\u5b9a\u53d8\u91cf\u5e76\u4f7f\u7528getXXX() \u65b9\u6cd5\u68c0\u7d22\u503c\u3002 \u793a\u4f8b 1\uff1a\u901a\u8fc7\u53c2\u6570\u4e0b\u6807\u7ed1\u5b9a\u53c2\u6570 //\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\u8bed\u53e5 String sql =\"{call pro_2(?,?,?)}\"; //\u521b\u5efaCallableStatement\u5bf9\u8c61 CallableStatement cstm = conn.prepareCall(sql); //\u901a\u8fc7\u53c2\u6570\u4e0b\u6807\u8bbe\u7f6e\u53c2\u6570(IN\u53c2\u6570) cstm.setInt(1, 20490); //\u6ce8\u518cOUT\u53c2\u6570\u6570\u636e\u7c7b\u578b cstm.registerOutParameter(2, com.xugu.cloudjdbc.Types.VARCHAR); cstm.registerOutParameter(3, com.xugu.cloudjdbc.Types.VARCHAR); //\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528 cstm.execute(); //\u83b7\u53d6\u5b58\u50a8\u8fc7\u7a0b\u8f93\u51fa\u53c2\u6570 String name = (String)cstm.getObject(2); String address = (String)cstm.getObject(3); \u793a\u4f8b 2\uff1a\u901a\u8fc7\u53c2\u6570\u540d\u7ed1\u5b9a\u53c2\u6570 //\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\u8bed\u53e5 CallableStatement pstm = conn.prepareCall(\"insert into tt1 values(:id,:name)\"); //\u901a\u8fc7\u53c2\u6570\u540d\u8bbe\u7f6e\u53c2\u6570(IN\u53c2\u6570) pstm.setInt(\"id\", 1); pstm.setString(\"name\", \"cloud\"); //\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528 pstm.execute();","title":"6.5.3 CallableStatement\u7ed1\u5b9a\u53c2\u6570"},{"location":"JDBC/#66","text":"ResultSet \u7c7b\u662f\u901a\u8fc7 Statement \u53ca\u5176\u5b50\u7c7b\u6267\u884c SQL \u67e5\u8be2\u8bed\u53e5\u5f97\u5230\u7684\u7ed3\u679c\u96c6\u3002ResultSet \u7c7b\u5305\u542b\u4e09\u4e2a\u91cd\u8981\u5c5e\u6027\uff1aResultSet \u5bf9\u8c61\u5e76\u53d1\u6a21\u5f0f\u3001ResultSet \u5bf9\u8c61\u5149\u6807\u5904\u7406\u65b9\u5411\u3001ResultSet \u5bf9\u8c61\u5149\u6807\u7c7b\u578b\u3002ResultSet \u7c7b\u5177\u6709\u6307\u5411\u5f53\u524d\u7ed3\u679c\u96c6\u6570\u636e\u884c\u4f4d\u7f6e\u5149\u6807\uff0c\u5149\u6807\u4f4d\u7f6e\u521d\u59cb\u88ab\u7f6e\u4e8e\u7b2c\u4e00\u884c\u4e4b\u524d\uff0c\u901a\u8fc7 ResultSet \u7c7b\u5c01\u88c5\u7684\u5149\u6807\u79fb\u52a8\u65b9\u6cd5\u5b9e\u73b0\u5bf9\u5149\u6807\u4f4d\u7f6e\u7684\u63a7\u5236\uff0c\u5f53 ResultSet \u5bf9\u8c61\u7684\u5149\u6807\u79fb\u81f3\u6570\u636e\u7ed3\u679c\u96c6\u672b\u5c3e\u65f6 (\u4e0b\u4e00\u884c\u65e0\u6570\u636e)\uff0c\u8fd4\u56de FALSE\u3002 \u5728\u865a\u8c37 JDBC \u4e2d\uff0cResultSet \u7c7b\u5206\u4e3a\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u548c\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\uff08\u901a\u8fc7 URL \u8fde\u63a5\u4e32\u53c2\u6570 recv_mode \u914d\u7f6e\uff09\u3002\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u9ed8\u8ba4\u5c5e\u6027\u4e3a\u4e0d\u53ef\u66f4\u65b0\u3001\u5411\u524d\u79fb\u52a8\u3001\u53ef\u4ee5\u6eda\u52a8\uff1b\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u9ed8\u8ba4\u5c5e\u6027\u4e3a\u4e0d\u53ef\u66f4\u65b0\u3001\u53ea\u5411\u524d\u79fb\u52a8\u3001\u4e0d\u53ef\u6eda\u52a8\u3002 Statement \u5bf9\u8c61\u6267\u884c SQL \u8bed\u53e5\u8fd4\u56de\u7ed3\u679c\u96c6\u4ec5\u80fd\u662f\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\uff0c\u800c PreparedStatement \u5bf9\u8c61\u6267\u884c SQL \u8bed\u53e5\u8fd4\u56de\u7ed3\u679c\u96c6\u53ef\u4e3a\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u6216\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u3002 \u5f53\u6267\u884c SQL \u8fd4\u56de\u6570\u636e\u7ed3\u679c\u96c6\u8f83\u5927\u65f6\uff0c\u5efa\u8bae\u4f7f\u7528\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\uff0c\u907f\u514d JVM \u7684\u6ea2\u51fa\u3002 {.is-info}","title":"6.6 \u5904\u7406\u6267\u884c\u7ed3\u679c"},{"location":"JDBC/#661-resultset","text":"\u521b\u5efa Statement \u5bf9\u8c61\u65f6\uff0c\u8bbe\u7f6e Statement \u5c5e\u6027 RresultSetConcurrency \u4e3a ResultSet.CONCUR_UPDATABLE\uff0c\u5e76\u4e14\u6570\u636e\u5e93 URL \u8fde\u63a5\u4e32\u5c5e\u6027 return_rowid \u8bbe\u7f6e\u4e3a TRUE\u65f6\uff0cStatement \u5bf9\u8c61\u6267\u884c SQL \u8bed\u53e5\u8fd4\u56de\u7684 ResultSet \u7ed3\u679c\u96c6\u624d\u80fd\u88ab\u66f4\u65b0\u3002\u5f53 ResultSet \u5bf9\u8c61\u4e3a\u53ef\u66f4\u65b0\u7ed3\u679c\u96c6\u65f6\uff0c\u5c06\u5149\u6807\u79fb\u81f3\u63d2\u5165\u4f4d\u7f6e\uff0c\u53ef\u8c03\u7528 ResultSet \u7c7b\u5bf9\u5e94\u7684 update \u65b9\u6cd5\u4fee\u6539\u7ed3\u679c\u96c6\u4e2d\u884c\u6570\u636e\uff0c\u5e76\u901a\u8fc7 updateRow \u65b9\u6cd5\u5c06\u66f4\u6539\u6570\u636e\u66f4\u65b0\u5230\u6570\u636e\u5e93\u4e2d\u3002 \u793a\u4f8b\uff1a\u901a\u8fc7\u4fee\u6539\u7ed3\u679c\u96c6\u4e2d\u6570\u636e\u503c\u66f4\u6539\u6570\u636e\u5e93\u4e2d\u5bf9\u5e94\u8bb0\u5f55 //\u521b\u5efaStatement\u5bf9\u8c61\u5e76\u8bbe\u7f6e\u7ed3\u679c\u96c6\u5c5e\u6027\u4e3a\u53ef\u66f4\u65b0 Statement stm = conn.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_UPDATABLE); //\u6267\u884cSQL\u8bed\u53e5 ResultSet rs = stm.executeQuery(sql); //\u7ed3\u679c\u96c6\u904d\u5386 while(rs.next()) { //\u66f4\u65b0\u7ed3\u679c\u96c6\u4e2d\u6307\u5b9a\u5217\u6570\u636e rs.updateLong(1, 5); //\u66f4\u65b0\u7ed3\u679c\u96c6\u4e2d\u6307\u5b9a\u5217\u6570\u636e rs.updateFloat(3, 12.3f); //\u7ed3\u679c\u96c6\u53d8\u66f4\u56de\u5199\u5165\u6570\u636e\u5e93 rs.updateRow(); } \u901a\u8fc7\u8c03\u7528 ResultSet \u7c7b\u7684 next()\u3001previous()\u3001absolute(int) \u65b9\u6cd5\u79fb\u52a8\u5149\u6807\u4f4d\u7f6e\uff0c\u5c06\u5149\u6807\u4f4d\u7f6e\u79fb\u52a8\u5230\u6307\u5b9a\u6570\u636e\u884c\uff0c\u901a\u8fc7 ResultSet \u7c7b\u5bf9\u5e94\u7684 get \u65b9\u6cd5\u83b7\u53d6\u884c\u6570\u636e\u3002 \u5982\u4f7f\u7528\u7ed3\u679c\u96c6\u66f4\u65b0\u6570\u636e\u5e93\u6570\u636e\uff0c\u9700\u5728\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65f6\uff0c\u8bbe\u7f6e\u8fde\u63a5\u5c5e\u6027 return_rowid \u4e3aTRUE\uff0c\u4e14\u5728\u751f\u6210\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61\u65f6\uff0c\u5e76\u53d1\u5c5e\u6027\u6307\u5b9a\u4e3a ResultSet.CONCUR_UPDATABLE\u3002 {.is-info}","title":"6.6.1 \u66f4\u65b0ResultSet\u7ed3\u679c\u96c6"},{"location":"JDBC/#662","text":"\u793a\u4f8b 1\uff1a \u7edf\u8ba1\u7ed3\u679c\u96c6\u603b\u6761\u6570 //\u521b\u5efaStatement\u5bf9\u8c61 Statement stm= conn.createStatement(); stm.execute(\"create table test(id int identity(1,1));insert into test values(default)\"); //\u6267\u884c\u7ed3\u679c\u96c6\u67e5\u8be2 ResultSet rs = stm.executeQuery(\"select * from test\") //\u79fb\u52a8\u5149\u6807\u81f3\u7ed3\u679c\u96c6\u672b\u5c3e rs.last(); //\u83b7\u53d6\u7ed3\u679c\u96c6\u884c\u6570 int rsCounts = rs.getRow();","title":"6.6.2 \u901a\u8fc7\u79fb\u52a8\u5149\u6807\u83b7\u53d6\u7ed3\u679c\u96c6\u6761\u6570"},{"location":"JDBC/#663","text":"\u865a\u8c37 JDBC \u652f\u6301\u591a\u7ed3\u679c\u96c6\u5904\u7406\uff0c\u5141\u8bb8 Statement \u63a5\u53e3\u652f\u6301\u591a\u91cd\u6253\u5f00\u7684 ResultSet \u5bf9\u8c61\u3002\u6267\u884c\u8bed\u53e5\u53ef\u4ee5\u662f\u591a\u6761 SQL \u8bed\u53e5\u7684\u96c6\u5408\uff0c\u5373\u4e00\u6b21\u6027\u5411\u865a\u8c37\u670d\u52a1\u5668\u53d1\u9001\u591a\u6761 SQL \u8bed\u53e5\uff0c\u865a\u8c37\u670d\u52a1\u5668\u6267\u884c\u5b8c SQL \u8bed\u53e5\u540e\u8fd4\u56de\u591a\u4e2a\u6267\u884c\u7ed3\u679c\uff1b\u4ea6\u6216\u5b58\u50a8\u8fc7\u7a0b\u5b9a\u4e49\u6709\u591a\u4e2a\u8fd4\u56de\u7ed3\u679c\u96c6\u3002\u865a\u8c37 JDBC \u7684 Statement \u91cd\u8f7d\u4e86 Statement \u63a5\u53e3\u4e2d\u7684 getMoreResults() \u65b9\u6cd5\u3002 \u793a\u4f8b\uff1a\u591a\u7ed3\u679c\u96c6\u5904\u7406 //SQL\u8bed\u53e5\u5305\u542b\u591a\u6761\u67e5\u8be2\u547d\u4ee4 String sql=\" SELECT * FROM A1 WHERE D2=(SELECT AVG(D2) FROM A1 GROUP BY D1);SELECT * FROM A1 WHERE D2>(SELECT MIN(D2) FROM A1 GROUP BY D1)\"; //\u521b\u5efaStatement\u5bf9\u8c61 Statement stm = conn.createStatement(); //\u6267\u884cSQL\u8bed\u53e5 boolean f = stm.execute(sql); //\u5224\u65ad\u662f\u5426\u6709ResultSet\u5bf9\u8c61\u4ea7\u751f if(f == true){ //\u83b7\u53d6\u7ed3\u679c\u96c6\u5bf9\u8c61 ResultSet rs1 = stm.getResultSet(); ... ... ... ... } while(true) { //\u5224\u65adStatement\u662f\u5426\u8fd4\u56de\u4e86\u591a\u4e2aResultSet\u5bf9\u8c61 if(!stm.getMoreResults(Statement.CLOSE_CURRENT_RESULT)){ break; } else if((rs2 = cstm.getResultSet())!=null) { ... ... ... ...//\u6570\u636e\u5904\u7406\u90e8\u5206\u7701\u7565 } }","title":"6.6.3 \u591a\u7ed3\u679c\u96c6\u5904\u7406"},{"location":"JDBC/#664","text":"\u865a\u8c37JDBC\u4e2d\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u751f\u6210\u9700\u6ee1\u8db3\u4e24\u4e2a\u6761\u4ef6\uff1aURL\u8fde\u63a5\u4e32\u5c5e\u6027recv_mode\u503c\u4e3a2\uff0cStatement\u5bf9\u8c61\u6267\u884cSQL\u8bed\u53e5\u4e3a\u5355\u6761SELECT\u8bed\u53e5\u3002 \u5e94\u7528\u7a0b\u5e8f\u7aef\u901a\u8fc7Statement\u7c7b\u7684setFetchSize(int)\u65b9\u6cd5\u6216ResultSet\u7c7b\u7684setFetchSize(int)\u65b9\u6cd5\u8bbe\u7f6e\u6bcf\u6b21\u4ece\u670d\u52a1\u5668\u7aef\u83b7\u53d6\u591a\u5c11\u6761\u6570\u636e\u3002 \u4f7f\u7528\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7684 ResultSet \u5bf9\u8c61\uff0c\u5149\u6807\u53ea\u80fd\u5355\u5411\u5411\u524d\u6b63\u5411\u79fb\u52a8\uff0c\u4e0d\u80fd\u5411\u540e\u79fb\u52a8\u6216\u6765\u56de\u6eda\u52a8\u3002 {.is-info} \u793a\u4f8b\uff1a\u865a\u8c37\u6570\u636e\u5e93\u670d\u52a1\u5668\u7aef\u6e38\u6807\u4f7f\u7528 //\u521b\u5efa\u865a\u8c37JDBC\u7279\u6709Statement\u5bf9\u8c61 Statement stm = (com.xugu.cloudjdbc.Statement)conn.createStatement(); //\u5f00\u542f\u670d\u52a1\u5668\u7aef\u6e38\u6807 stm.setServerCursor(true); //\u8bbe\u7f6e\u670d\u52a1\u5668\u7aef\u6e38\u6807\u5355\u6b21\u8fd4\u56de\u6570\u636e\u6761\u6570 stm.setFetchSize(1000); //\u6267\u884cSQL\u8bed\u53e5 ResultSet rs = stm.executeQuery(\"select * from t1\"); //\u904d\u5386\u6570\u636e while\uff08rs.next()\uff09 { ... ... ... ... } //\u5173\u95ed\u670d\u52a1\u5668\u7aef\u6e38\u6807 stm.setServerCursor(false);","title":"6.6.4 \u670d\u52a1\u5668\u7aef\u6e38\u6807\u4f7f\u7528"},{"location":"JDBC/#665-generatedkeys","text":"JDBC 3.0 \u89c4\u8303\u4e2d\u5bf9\u4e8e\u81ea\u52a8\u4ea7\u751f\u7684\u5173\u952e\u5b57\u6570\u503c\uff0c\u5b9a\u4e49\u4e86\u63a5\u53e3\u89c4\u8303\uff0c\u5373\uff1agetGeneratedKeys() \u65b9\u6cd5\u3002 \u4e3a\u4e86\u89e3\u51b3\u5bf9\u83b7\u53d6\u81ea\u52a8\u4ea7\u751f\u7684\u6216\u81ea\u52a8\u589e\u52a0\u7684\u5173\u952e\u5b57\u7684\u503c\u7684\u9700\u6c42\uff0c\u865a\u8c37 JDBC \u6839\u636e JDBC3.0 \u89c4\u8303\u63d0\u4f9b\u4e86\u83b7\u5f97\u5173\u952e\u5b57\u503c\u7684\u65b9\u6cd5\u3002\u83b7\u53d6\u5173\u952e\u5b57\u7684\u503c\uff0c\u9700\u8981\u5728\u6267\u884c\u65b9\u6cd5\u4e2d\u6307\u5b9a\u81ea\u589e\u5173\u952e\u5b57\u6807\u8bb0\u3002SQL \u8bed\u53e5\u6267\u884c\u5b8c\u540e\uff0c\u8c03\u7528 Statement \u5bf9\u8c61\u7684 getGeneratedKeys() \u65b9\u6cd5\uff0c\u83b7\u5f97\u5305\u542b\u81ea\u589e\u957f\u503c\u7684 ResultSet \u5bf9\u8c61\u3002 \u793a\u4f8b\uff1a\u83b7\u53d6\u6570\u636e\u5e93\u81ea\u589e\u957f\u5173\u952e\u5b57\u7684\u503c //\u521b\u5efaStatement\u5bf9\u8c61 Statement stmt = conn.createStatement(); //\u6307\u5b9a\u81ea\u589e\u957f\u5173\u952e\u5b57\u7684\u6807\u8bc6 String[] colN = {\"id\"}; //\u5728\u6267\u884c\u65b9\u6cd5\u4e2d\u5f15\u5165\u81ea\u589e\u957f\u5173\u952e\u5b57\u6807\u8bc6 stmt.executeUpdate(\"INSERT INTO authors(first_name, last_name) VALUES (\u2018Ghq\u2019, \u2018Wxl\u2019)\",colN); //\u83b7\u53d6\u7ed3\u679c\u96c6 ResultSet rs = stmt.getGeneratedKeys(); if ( rs.next() ) { //\u83b7\u53d6\u7ed3\u679c\u96c6\u4e2d\u7684\u81ea\u589e\u957f\u503c \u3000\u3000 int key = rs.getInt(); }","title":"6.6.5 \u68c0\u7d22\u81ea\u52a8\u4ea7\u751f\u7684\u5173\u952e\u5b57GeneratedKeys"},{"location":"JDBC/#67","text":"\u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u56e0\u5904\u7406\u9700\u8981\u6240\u5efa\u7acb\u7684 ResultSet\u3001Statement\u3001PreparedStatement \u7b49\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61\uff0c\u5728\u4f7f\u7528\u5b8c\u540e\u5fc5\u987b\u5173\u95ed\u3002\u5173\u95ed\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61\uff0c\u76f4\u63a5\u8c03\u7528\u5bf9\u5e94\u7684\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61 close() \u65b9\u6cd5\u5373\u53ef\u3002 \u5f53\u4e0d\u518d\u9700\u8981\u548c\u865a\u8c37\u6570\u636e\u5e93\u8fdb\u884c\u4ea4\u4e92\u65f6\uff0c\u9700\u65ad\u5f00\u6570\u636e\u5e93\u8fde\u63a5\u3002\u8c03\u7528 Connection \u7c7b\u7684 close() \u65b9\u6cd5\u5373\u4f1a\u5173\u95ed\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u540c\u65f6\u91ca\u653e\u8fde\u63a5\u4e0a\u6240\u6301\u6709\u7684\u6240\u6709\u6570\u636e\u5e93\u8d44\u6e90\u3002 \u6570\u636e\u5e93\u8fde\u63a5\u4e3a\u975e\u81ea\u52a8\u63d0\u4ea4\u65f6\uff0c\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61\u5728\u4f7f\u7528\u5b8c\u540e\uff0c\u82e5\u672a\u53ca\u65f6\u5173\u95ed\uff0c\u6b64\u65f6\u8fdb\u884c DDL \u64cd\u4f5c\u5c06\u4f1a\u5bfc\u81f4\u865a\u8c37\u6570\u636e\u5e93\u52a0\u9501\u8d85\u65f6\u6216\u5931\u8d25\u3002 {.is-info}","title":"6.7 \u91ca\u653e\u8d44\u6e90"},{"location":"JDBC/#_4","text":"JDBC 3.0 \u89c4\u8303\u5b9a\u4e49\u6709 java.sql.Blob \u4e0e java.sql.Clob \u63a5\u53e3\uff0c\u6b64\u4e24\u7c7b\u63a5\u53e3\u4e3a\u6570\u636e\u5e93\u5927\u5bf9\u8c61\u6570\u636e\u5904\u7406\u63a5\u53e3\u3002\u865a\u8c37\u6570\u636e\u5e93\u5927\u5bf9\u8c61\u5b57\u6bb5\u7c7b\u578b\u5305\u542b\uff1ablob\u3001clob\u3001binary\u3002 \u5728\u865a\u8c37 JDBC \u4e2d\uff0c\u83b7\u53d6\u5927\u5bf9\u8c61\u6570\u636e\u6709\u4e24\u79cd\u8fd4\u56de\u65b9\u5f0f\uff1a\u4e00\u79cd\u662f\u6570\u636e\u76f4\u63a5\u8fd4\u56de\uff1b\u53e6\u4e00\u79cd\u662f\u8fd4\u56de\u63cf\u8ff0\u7b26\u65b9\u5f0f\u3002\u5f53\u8fd4\u56de\u6570\u636e\u4e2d\u5927\u5bf9\u8c61\u6570\u636e\u8f83\u591a\u65f6\uff0c\u5efa\u8bae\u4f7f\u7528\u8fd4\u56de\u63cf\u8ff0\u7b26\u65b9\u5f0f\uff0c\u4ece\u800c\u907f\u514d\u56e0\u6570\u636e\u8fc7\u591a\u8fc7\u5927\u9020\u6210\u7684 JVM \u5185\u5b58\u6ea2\u51fa\u3002\u865a\u8c37 JDBC \u9a71\u52a8\u542f\u7528\u5927\u5bf9\u8c61\u8fd4\u56de\u63cf\u8ff0\u7b26\u65b9\u5f0f\uff0c\u9700\u5728\u8fde\u63a5 URL \u4e32\u4e0a\u914d\u7f6e\u5c5e\u6027 lob_ret \u4e3a descriptor \u3002","title":"\u4e03. \u5927\u5bf9\u8c61\u7c7b\u578b\u5904\u7406"},{"location":"JDBC/#71","text":"LOB \u5bf9\u8c61\u7684\u63d2\u5165\u5fc5\u987b\u901a\u8fc7 PreparedStatement\u3001CallableStatement \u7c7b\u7684 setXXX() \u65b9\u6cd5\u65b9\u5f0f\u5b9e\u73b0\u3002\u865a\u8c37 JDBC \u4e2d PreparedStatement \u63d0\u4f9b\u591a\u79cd\u65b9\u6cd5\u8bbe\u7f6e\u5927\u5bf9\u8c61\u53c2\u6570\u503c\uff0c\u5982\u4e0b\u5217\u65b9\u6cd5\uff1a setBinaryStream(int parameterIndex,InputStream x) setBlob(int parameterIndex, Blob x) setBlob(int parameterIndex, InputStream x) setBytes(int parameterIndex,byte[] x) setCharacterStream(int parameterIndex, Reader reader) setClob(int parameterIndex, Clob x) setClob(int parameterIndex, Reader reader) setString(int parameterIndex, String x) \u793a\u4f8b\uff1a\u5e94\u7528\u7a0b\u5e8f\u63d2\u5165\u5927\u5bf9\u8c61\u6570\u636e\uff0c\u5176\u4e2d\u8868 b1 \u5b57\u6bb5 photo \u4e3a blob \u7c7b\u578b\uff0c\u5b57\u6bb5 text \u4e3a clob \u7c7b\u578b PreparedStatement ps = conn.prepareStatement(\"INSERT INTO b1 VALUES (?, ?)\")\u037e // blobBytes is a byte[] type ps.setBlob(1, new com.xugu.cloudjdbc.Blob(blobBytes))\u037e // clobString is a String type ps.setClob(2, new com.xugu.cloudjdbc.Clob(clobString))\u037e ps.execute()\uff1b","title":"7.1 \u5411\u8868\u4e2d\u63d2\u5165\u5927\u5bf9\u8c61"},{"location":"JDBC/#72","text":"\u901a\u8fc7\u865a\u8c37 JDBC \u83b7\u53d6\u5927\u5bf9\u8c61\u503c\uff0c\u6570\u636e\u5e93 CLOB \u5bf9\u8c61\u53ef\u901a\u8fc7\u5b57\u7b26\u4e32\u5f62\u5f0f\u6216\u6d41\u5f0f\u6570\u636e\u5f62\u5f0f\u83b7\u53d6\uff0c\u6570\u636e\u5e93 BLOB \u5bf9\u8c61\u53ea\u901a\u8fc7\u6d41\u5f0f\u6570\u636e\u5f62\u5f0f\u83b7\u53d6\u3002 \u793a\u4f8b 1\uff1a\u6d41\u5f0f\u83b7\u53d6 CLOB \u5bf9\u8c61 Statement stm = xgConn.createStatement(); String sql=\u201dselect remark from t_clob where id=101\u201d; ResultSet rs = stm.executeQuery(sql); while(rs.next) { Clob data = rs.getClob(\"remark \"); //\u4ee5\u5b57\u7b26\u6d41\u65b9\u5f0f\u83b7\u53d6\u6570\u636e Reader rd = data.getCharacterStream(); char[] sc = new char[1000]; StringBuffer sb = new StringBuffer(); int len = 0; while((len=rd.read(sc)) !=-1) { sb.append(new String(sc,0,len)); } System.out.println(sb.toString()); } \u793a\u4f8b 2\uff1a\u865a\u8c37 JDBC \u5141\u8bb8\u4ee5\u5b57\u7b26\u4e32\u7684\u5f62\u5f0f\u8bfb\u53d6 CLOB \u5bf9\u8c61 String sql=\"select text from t_clob\"\u037e Statement stm=conn.createStatement()\u037e ResultSet rs=stm.executeQuery(sql)\u037e while(rs.next()) { String clobStr =rs.getString(\"text\")\u037e }","title":"7.2 \u67e5\u8be2\u5927\u5bf9\u8c61\u6570\u636e"},{"location":"JDBC/#_5","text":"\u865a\u8c37\u6570\u636e\u5e93\u662f\u4e00\u6b3e\u5177\u5907\u9ad8\u5b89\u5168\u3001\u9ad8\u6027\u80fd\u3001\u9ad8\u6269\u5c55\u7b49\u7279\u6027\u7684\u3001\u57fa\u4e8e\u5206\u5e03\u5f0f\u67b6\u6784\u7684\u5206\u5e03\u5f0f\u4e8b\u52a1\u578b\u6570\u636e\u5e93\u3002\u90e8\u7f72\u6570\u636e\u5e93\u96c6\u7fa4\u65f6\uff0c\u591a\u53f0\u670d\u52a1\u5668\u4f5c\u4e3a\u4e00\u4e2a\u6574\u4f53\u5bf9\u5916\u63d0\u4f9b\u6570\u636e\u670d\u52a1\u3002\u5728\u591a\u673a\u73af\u5883\u4e0b\uff0c\u4e3a\u4f7f\u6570\u636e\u5e93\u8fde\u63a5\u5747\u5300\u5206\u5e03\u4e8e\u5404\u53f0\u670d\u52a1\uff0c\u865a\u8c37 JDBC \u5728\u63a5\u53e3\u5c42\u5b9e\u73b0\u4e86\u57fa\u4e8e\u8f6f\u8d1f\u8f7d\u5747\u8861\u6280\u672f\u7684\u6570\u636e\u5e93\u8fde\u63a5\u5efa\u7acb\u65b9\u5f0f\u3002 \u865a\u8c37\u6570\u636e\u5e93\u8d1f\u8f7d\u5747\u8861\u5206\u914d\u6570\u636e\u5e93\u8fde\u63a5\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a\u987a\u5e8f\u5206\u914d\u3001\u968f\u673a\u5206\u914d\u3002\u901a\u8fc7\u5728\u6570\u636e\u5e93 URL \u8fde\u63a5\u4e32\u4e0a\u8bbe\u7f6e\u53c2\u6570 conn_type(conn_type:1, \u968f\u673a\u5206\u914d\uff1b2, \u987a\u5e8f\u5206\u914d) \u7c7b\u578b\uff0c\u5b9e\u73b0\u6570\u636e\u5e93\u8fde\u63a5\u5728\u591a\u96c6\u7fa4\u73af\u5883\u4e0b\u7684\u8d1f\u8f7d\u5747\u8861\u3002\u9ed8\u8ba4\u8d1f\u8f7d\u5747\u8861\u5206\u914d\u65b9\u5f0f\uff1a\u987a\u5e8f\u5206\u914d\u3002 \u865a\u8c37 JDBC \u63d0\u4f9b\u4e09\u79cd\u914d\u7f6e\u8d1f\u8f7d\u5747\u8861\u7684\u65b9\u5f0f\uff1a\u6570\u636e\u5e93 URL \u8fde\u63a5\u4e32\u914d\u7f6e\u3001\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u6027\u6587\u4ef6 Properties \u914d\u7f6e\u3001\u6570\u636e\u5e93\u8fde\u63a5 XML \u6587\u4ef6\u914d\u7f6e\u3002 1. URL \u8fde\u63a5\u4e32\u914d\u7f6e Class.forName(\"com.xugu.cloudjdbc.Driver\"); //URL\u8fde\u63a5\u4e32\u4e2d\u4f7f\u7528ips\u5c5e\u6027\u914d\u7f6e\u591aIP\u8d1f\u8f7d\u5747\u8861 Connection conn = DriverManager.getConnection(\"jdbc:xugu://192.168.0.201:5138/SYSTEM?user=SYSDBA&password=SYSDBA&conn_type=1&ips=192.168.0.205,192.168.0.204,192.168.1.206\") \u8fde\u63a5\u5c5e\u6027\u6587\u4ef6 Properties \u914d\u7f6e (Vector \u6216\u5b57\u7b26\u4e32\u6570\u7ec4) Properties info=new Properties(); Class.forName(\"com.xugu.cloudjdbc.Driver\"); //Vector\u7ed3\u6784\u5b58\u653e\u8d1f\u8f7d\u5747\u8861\u591aIP\u5730\u5740\u65b9\u5f0f Vector<String> ipsVector=new Vector<String>(); ipsVector.add(\"192.168.1.201\"); ipsVector.add(\"192.168.1.204\"); ipsVector.add(\"192.168.1.205\"); ipsVector.add(\"192.168.1.206\"); info.put(\"ips\", ipsVector); //\u6570\u7ec4\u5b58\u653e\u8d1f\u8f7d\u5747\u8861\u591aIP\u5730\u5740\u65b9\u5f0f String[] ips={\"192.168.1.205\",\"192.168.1.204\",\"192.168.1.206\"}; info.put(\"ips\", ips); Connection conn = DriverManager.getConnection(\"jdbc:xugu://192.168.1.201:5138/SYSTEM?user=SYSDBA&password=SYSDBA&conn_type=2\",info); \u8fde\u63a5\u5c5e\u6027 XML \u6587\u4ef6\u914d\u7f6e <?xml version=\"1.0\" encoding=\"utf-8\"?> <listeners> <listener> <ip>192.168.1.206</ip> </listener> <listener> <ip>192.168.1.204</ip> </listener> <listener> <ip>192.168.1.205</ip> </listener> </listeners> Class.forName(\"com.xugu.cloudjdbc.Driver\"); Connection conn = DriverManager.getConnection(\"jdbc:xugu:file://xuguClouldListener.xml:5138/SYSTEM?user=SYSDBA&password=SYSDBA&conn_type=1\");","title":"\u516b. \u865a\u8c37\u6570\u636e\u5e93\u8d1f\u8f7d\u5747\u8861"},{"location":"JDBC2/","text":"\u6587\u6863\u5bc6\u7ea7\uff1a\u3010 - \u3011 \u8bf4\u660e\uff1a\u516c\u5f00 \u6587\u6863\u4fee\u8ba2\u5386\u53f2 \u5e8f\u53f7 \u6587\u6863\u7248\u672c \u7a0b\u5e8f\u7248\u672c \u7f16\u64b0\u4eba A-\u589e\u52a0 M-\u66f4\u65b0 D-\u5220\u51cf \u53d8\u66f4\u8bf4\u660e \u5b8c\u6210\u65e5\u671f \u8bc4\u5ba1\u4eba \u8bc4\u5ba1\u65e5\u671f \u8bc4\u5ba1\u7ed3\u679c [\u901a\u8fc7/\u62d2\u7edd] 1 1.0 11.0 \u5468\u5f66\u5f64 A \u6574\u7248\u7f16\u5199 2021-7-12 \u5434\u751f\u52c7 2021-7-12 \u901a\u8fc7 2 2.0 12.0 \u66f9\u831c M \u4fee\u6539\u7b2c\u4e8c\u7ae0\u7c7b\u6269\u5c55\u30014.3\u8fde\u63a5\u53c2\u6570 2022-5-14 \u5468\u5f66\u5f64 2022-5-14 \u901a\u8fc7 3 2.1 12.0 \u66f9\u831c M \u4fee\u6539\u7b2c3.1\u57fa\u672c\u6570\u636e\u7c7b\u578b 2022-6-20 \u5468\u5f66\u5f64 2022-6-20 \u901a\u8fc7 \u4e00. \u865a\u8c37\u6570\u636e\u5e93\u7684JDBC\u9a71\u52a8\u7a0b\u5e8f\u6982\u8ff0 Java \u6570\u636e\u5e93\u8fde\u63a5\uff08Java Database Connectivity\uff0c\u7b80\u79f0 JDBC\uff09\u662f Java \u8bed\u8a00\u4e2d\u7528\u6765\u89c4\u8303\u5ba2\u6237\u7aef\u7a0b\u5e8f\u5982\u4f55\u8bbf\u95ee\u6570\u636e\u5e93\u7684\u5e94\u7528\u7a0b\u5e8f\u63a5\u53e3\uff0c\u63d0\u4f9b\u4e86\u8bf8\u5982\u67e5\u8be2\u548c\u66f4\u65b0\u6570\u636e\u5e93\u4e2d\u6570\u636e\u7684\u65b9\u6cd5\uff0c\u53ef\u4ee5\u4e3a\u591a\u79cd\u5173\u7cfb\u6570\u636e\u5e93\u63d0\u4f9b\u7edf\u4e00\u8bbf\u95ee\u3002JDBC \u63d0\u4f9b\u4e86\u4e00\u79cd\u57fa\u51c6\uff0c\u901a\u8fc7\u6b64\u57fa\u51c6\u6570\u636e\u5e93\u5f00\u53d1\u4eba\u5458\u53ef\u6784\u5efa\u66f4\u9ad8\u7ea7\u7684\u5de5\u5177\u548c\u63a5\u53e3\uff0c\u4e5f\u53ef\u901a\u8fc7\u6b64\u57fa\u51c6\u7f16\u5199\u6570\u636e\u5e93\u5e94\u7528\u7a0b\u5e8f\u3002 \u865a\u8c37\u6570\u636e\u5e93\u7684 JDBC \u9a71\u52a8\u7a0b\u5e8f\uff08\u4ee5\u4e0b\u7b80\u79f0\uff1a\u865a\u8c37 JDBC\uff09\u5b9e\u73b0\u4e86 Java \u7a0b\u5e8f\u548c\u865a\u8c37\u6570\u636e\u5e93\u901a\u4fe1\uff0c\u652f\u6301 SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u7684\u8bbf\u95ee\uff0c\u540c\u65f6\u4e5f\u662f\u6784\u9020\u9ad8\u7ea7 API \u548c\u6570\u636e\u5e93\u5f00\u53d1\u5de5\u5177\u7684\u57fa\u7840\u3002 \u7528\u6237\u60f3\u8981\u5b9e\u73b0\u5bf9\u6570\u636e\u5e93\u7684\u8bbf\u95ee\uff0c\u4e00\u822c\u8981\u7ecf\u8fc7\u5982\u4e0b\u7684\u6b65\u9aa4\uff1a 1. \u901a\u8fc7\u9a71\u52a8\u5668\u7ba1\u7406\u5668\u83b7\u53d6\u8fde\u63a5\u63a5\u53e3\uff1b 2. \u83b7\u5f97 Statement \u6216 Statement \u5b50\u7c7b\uff1b 3. \u901a\u8fc7 Statement \u6267\u884c SQL \u547d\u4ee4\uff1b 4. \u5904\u7406\u6267\u884c\u7ed3\u679c\uff1b 5. \u5173\u95ed Statement\uff1b 6. \u5173\u95ed\u8fde\u63a5\u3002 JDBC \u7ed3\u6784\u56fe, \u5982\u56fe1.1\u6240\u793a\u3002 \u56fe1.1 JDBC\u7ed3\u6784\u56fe \u4f7f\u7528\u865a\u8c37 JDBC \u5b9e\u73b0\u5e94\u7528\u7a0b\u5e8f\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u4e4b\u95f4\u7684\u8fde\u63a5\u670d\u52a1\uff0c\u5e94\u7528\u7a0b\u5e8f\u6240\u5728\u8ba1\u7b97\u673a\u9700\u5df2\u5b89\u88c5 Java \u8fd0\u884c\u73af\u5883\uff08Java Runtime Environment, \u7b80\u79f0 JRE\uff09\u3002\u865a\u8c37 JDBC \u53c2\u7167 JDBC API \u5b9e\u73b0\uff0c\u652f\u6301 JDBC 3.0 \u529f\u80fd\uff0cJava \u5e94\u7528\u7a0b\u5e8f\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u4e4b\u95f4\u7684\u6240\u6709\u64cd\u4f5c\u5747\u9700\u901a\u8fc7\u865a\u8c37 JDBC \u6765\u5b8c\u6210\u3002 \u4f7f\u7528\u865a\u8c37 JDBC \u9700\u8981 JRE 1.6 \u7248\u6216\u66f4\u9ad8\u7248\u672c\u7684 Java \u8fd0\u884c\u65f6\u73af\u5883 (JRE)\u3002 {.is-info} \u4e8c. \u865a\u8c37\u6570\u636e\u5e93\u7684JDBC\u63a5\u53e3\u548c\u5bf9\u8c61\u7c7b JDBC 3.0 \u89c4\u8303\u7531 JDBC 1.0\u3001JDBC 2.0 \u884d\u751f\u800c\u6765\uff0c\u4e3b\u8981\u5305\u542b java.sql \u5305\u4ee5\u53ca javax.sql \u5305\uff0c\u6570\u636e\u5e93 JDBC \u9a71\u52a8\u5b9e\u73b0 JDBC 3.0 \u89c4\u8303\u6240\u5b9a\u4e49\u7684\u7279\u6027\u63a5\u53e3\uff0c\u5373\u53ef\u8fbe\u5230\u5bf9\u6807\u51c6 JDBC 3.0 \u89c4\u8303\u7684\u652f\u6301\u3002 \u865a\u8c37 JDBC \u57fa\u4e8e JDBC 3.0 \u89c4\u8303\u5b9e\u73b0\uff0c\u5b9e\u73b0\u63a5\u53e3\u7c7b\u6620\u5c04\uff0c\u5982\u88682.1\u6240\u793a\u3002 \u88682.1 \u865a\u8c37JDBC\u5b9e\u73b0\u63a5\u53e3\u7c7b | \u63a5\u53e3 | \u865a\u8c37JDBC\u5b9e\u73b0\u7c7b | | ---------------------------------- | ---------------------------------------- | | java.sql.Driver | com.xugu.cloudjdbc.Driver | | java.sql.Connection | com.xugu.cloudjdbc.Connection | | java.sql.Statement | com.xugu.cloudjdbc.Statement | | java.sql.PreparedStatement | com.xugu.cloudjdbc.PreparedStatement | | java.sql.CallableStatement | com.xugu.cloudjdbc.CallableStatement | | java.sql.ResultSet | com.xugu.cloudjdbc.ResultSet | | java.sql.ResultSetMetaData | com.xugu.cloudjdbc.ResultSetMetaData | | java.sql.DatabaseMetaData | com.xugu.cloudjdbc.DatabaseMetaData | | java.sql.PrameterMetaData | com.xugu.cloudjdbc.PrameterMetaData | | java.sql.Types | com.xugu.cloudjdbc.Types | | java.sql.Blob | com.xugu.cloudjdbc.Blob | | java.sql.Clob | com.xugu.cloudjdbc.Clob | | java.sql.Savepoint | com.xugu.cloudjdbc.Savepoint | | javax.sql.DataSource | com.xugu.pool.XgDataSource | | javax.sql.ConnectionPoolDataSource | com.xugu.pool.XgConnectionPoolDataSource | | javx.sql.PooledConnection | com.xugu.pool.XgPooledConnection | \u9664\u4e86\u4ee5\u4e0a\u6807\u51c6\u7c7b\u63a5\u53e3\u5916\uff0c\u865a\u8c37 JDBC \u8fd8\u6269\u5c55\u5b9e\u73b0\u4e86\u4ee5\u4e0b\u7c7b\uff1a - com.xugu.cloudjdbc.ClientInfo - com.xugu.cloudjdbc.OutParameter - com.xugu.cloudjdbc.Rowid - com.xugu.cloudjdbc.SQLXml - com.xugu.cloudjdbc.SSL - com.xugu.pool.StatementWrapper - com.xugu.pool.PreparedStatementWrapper \u4e09. \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b 3.1 \u57fa\u672c\u6570\u636e\u7c7b\u578b \u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b\u3001\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u3001Java \u6570\u636e\u7c7b\u578b\u4e09\u8005\u6620\u5c04\u5173\u7cfb\uff0c\u5982\u88683.1\u6240\u793a\u3002 \u88683.1 \u6570\u636e\u7c7b\u578b\u6620\u5c04\u5173\u7cfb \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b \u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b Java \u6570\u636e\u7c7b\u578b BOOLEAN BOOLEAN boolean SMALLINT SMALLINT short TINYINT TINYINT byte INTEGER INTEGER int BIGINT BIGINT long FLOAT FLOAT float DOUBLE DOUBLE double NUMERIC NUMERIC BigDecimal DECIMAL BigDecimal CHAR CHAR String NCHAR NCHAR String VARCHAR VARCHAR String VARCHAR2 VARCHAR String NVARCHAR2 VARCHAR String BLOB BLOB Blob CLOB CLOB Clob NCLOB BINARY BINARY byte[] VARBINARY LONG VARBINARY DATE DATE Date TIME TIME Time TIMESTAMP TIMESTAMP Timestamp 3.2 \u6269\u5c55\u6570\u636e\u7c7b\u578b \u865a\u8c37 JDBC \u9664\u4e86\u5b9e\u73b0\u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b\uff0c\u8fd8\u6839\u636e\u865a\u8c37\u6570\u636e\u5e93\u81ea\u6709\u7c7b\u578b\u6269\u5c55\u4e86\u90e8\u5206\u6570\u636e\u7c7b\u578b\uff08\u88683.2\u6240\u793a\uff09\uff0c\u5305\u62ec\u4ee5\u4e0b\u6570\u636e\u7c7b\u578b\u3002 1. \u65f6\u95f4\u6570\u636e\u7c7b\u578b DATETIME\u2014\u2014\u2014 \u65e5\u671f\u65f6\u95f4\u7c7b\u578b DATETIME WITH TIME ZONE \u2014\u2014\u2014 \u5e26\u65f6\u533a\u7684\u65e5\u671f\u65f6\u95f4\u7c7b\u578b TIME WITH TIME ZONE \u2014\u2014\u2014 \u5e26\u65f6\u533a\u7684\u65f6\u95f4\u7c7b\u578b INTERVAL YEAR \u2014\u2014\u2014 \u5e74\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL MONTH \u2014\u2014\u2014 \u6708\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY\u2014\u2014\u2014 \u65e5\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL HOUR \u2014\u2014\u2014 \u5c0f\u65f6\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL MINUTE \u2014\u2014\u2014 \u5206\u949f\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL SECOND \u2014\u2014\u2014 \u79d2\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL YEAR TO MONTH \u2014\u2014\u2014 \u5e74\u5230\u6708\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY TO HOUR \u2014\u2014\u2014 \u65e5\u5230\u5c0f\u65f6\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY TO MINUTE \u2014\u2014\u2014 \u65e5\u5230\u5206\u949f\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY TO SECOND \u2014\u2014\u2014 \u65e5\u5230\u79d2\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL HOUR TO MINUTE \u2014\u2014\u2014 \u5c0f\u65f6\u5230\u5206\u949f\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL HOUR TO SECOND \u2014\u2014\u2014 \u5c0f\u65f6\u5230\u79d2\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL MINUTE TO SECOND \u2014\u2014\u2014 \u5206\u949f\u5230\u79d2\u7684\u65f6\u95f4\u95f4\u9694 2. \u6e38\u6807\u6570\u636e\u7c7b\u578b\uff08\u53ea\u5728\u5b58\u50a8\u8fc7\u7a0b\u3001\u51fd\u6570\u3001\u5305\u4e2d\u4f7f\u7528\uff09 CURSOR \u2014\u2014\u2014 \u6e38\u6807\u6570\u636e\u7c7b\u578b SYS_REFCURSOR \u2014\u2014\u2014 \u8fd4\u56de\u6e38\u6807\u6570\u636e\u7c7b\u578b 3. \u5176\u4ed6\u6570\u636e\u7c7b\u578b GUID \u2014\u2014\u2014 \u5168\u5c40\u552f\u4e00\u6807\u8bc6\u7b26 \u88683.2 \u6269\u5c55\u6570\u636e\u7c7b\u578b\u5bf9\u5e94\u8868 \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b \u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b Java \u6570\u636e\u7c7b\u578b DATETIME DATETIME Timestamp DATETIME WITH TIME ZONE DATETIME_TZ String TIME WITH TIME ZONE TIME_TZ String INTERVAL YEAR INTERVAL_Y String INTERVAL MONTH INTERVAL_M INTERVAL DAY INTERVAL_D INTERVAL HOUR INTERVAL_H INTERVAL MINUTE INTERVAL_MI INTERVAL SECOND INTERVAL_S String INTERVAL YEAR TO MONTH INTERVAL_Y2M INTERVAL DAY TO HOUR INTERVAL_D2H INTERVAL DAY TO MINUTE INTERVAL_D2M INTERVAL DAY TO SECOND INTERVAL_D2S INTERVAL HOUR TO MINUTE INTERVAL_H2M INTERVAL HOUR TO SECOND INTERVAL_H2S INTERVAL MINUTE TO SECOND INTERVAL_M2S CURSOR CURSOR \u65e0\u5bf9\u5e94\u7c7b\u578b SYS_REFCURSOR REFCUR GUID GUID String \u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528 ResultSet \u5bf9\u8c61\u6765\u5bf9\u5e94\u83b7\u53d6\u6e38\u6807\u6240\u8fd4\u56de\u6570\u636e\u3002 {.is-info} 3.3 \u6570\u636e\u7c7b\u578b\u8f6c\u6362 \u5728\u8c03\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u4e2d\u7684\u67d0\u4e9b\u65b9\u6cd5\u65f6\uff0c\u9700\u8fdb\u884c Java \u6570\u636e\u7c7b\u578b\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u7684\u8f6c\u6362\uff0c\u8fd9\u4e9b\u65b9\u6cd5\u5305\u62ec\uff1a - ResultSet \u7c7b get\\<Type> \u65b9\u6cd5\uff1b - ResultSet \u7c7b update\\<Type> \u65b9\u6cd5\uff1b - CallableStatement \u7c7b get\\<Type> \u65b9\u6cd5\uff1b - PreparedStatement \u7c7b set\\<Type> \u65b9\u6cd5\u3002 \u6570\u636e\u7c7b\u578b\u4e4b\u95f4\u7684\u8f6c\u6362\uff0c\u9700\u9075\u4ece Java \u6570\u636e\u7c7b\u578b\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u6620\u5c04\u5173\u7cfb\u89c4\u5219\uff0c\u5426\u5219\u53ef\u80fd\u8f6c\u6362\u5931\u8d25\u3002 1. com.xugu.cloudjdbc.ResultSet \u7c7b\u4e2d get\\<Type> \u65b9\u6cd5\u7684\u7c7b\u578b\u8f6c\u6362\uff0c\u5982\u88683.3\u6240\u793a\u3002 2. com.xugu.cloudjdbc.PreparedStatement \u7c7b\u4e2d set\\<Type> \u65b9\u6cd5\u7684\u7c7b\u578b\u8f6c\u6362\uff0c\u5982\u88683.4\u6240\u793a\u3002 X\uff08\u65e0\u4e22\u5931\u8f6c\u6362\uff09\uff1a\u6307\u4ee5\u957f\u7cbe\u5ea6\u7c7b\u578b\u7684 get\\<Type> \u65b9\u6cd5\u83b7\u53d6\u77ed\u7cbe\u5ea6\u6570\u636e\u7c7b\u578b\u5217\u503c\u65e0\u4e22\u5931\u3002 \u5982\uff1a\u4f7f\u7528 getInt() \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u4e3a smallint \u7684\u5217\u6570\u636e\uff0c\u83b7\u53d6\u6570\u636e\u5b8c\u6574\u3002 Z\uff08\u4f9d\u8d56\u8f6c\u6362\uff09\uff1a\u6307 get\\<Type> \u65b9\u6cd5\u4e2d\u7684 Type \u7c7b\u578b\u4e0e\u83b7\u53d6\u6570\u636e\u5e93\u4e2d\u5217\u7684\u6570\u636e\u7c7b\u578b\u4e0d\u4e00\u81f4\uff0c\u6b64\u65f6\u9700\u8981\u901a\u8fc7\u5176\u4ed6\u6570\u636e\u7c7b\u578b\u8f6c\u6362\u4e3a Type \u6570\u636e\u7c7b\u578b\uff0c\u6b64\u8f6c\u6362\u8fc7\u7a0b\u503c\u53ef\u80fd\u4e22\u5931\u90e8\u5206\u6570\u636e\u3002 \u5982\uff1a\u4f7f\u7528 getInt() \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u4e3a float \u7684\u5217\u6570\u636e\uff0c\u53ef\u83b7\u53d6 float \u5217\u6570\u636e\u7684\u6574\u6570\u503c\uff0c\u800c\u5c0f\u6570\u7cbe\u5ea6\u503c\u5c06\u4e22\u5931\u3002 Y\uff08\u76f4\u63a5\u8f6c\u6362\uff09\uff1a\u6307 get\\<Type> \u65b9\u6cd5\u4e2d\u7684 Type \u7c7b\u578b\u4e0e\u83b7\u53d6\u6570\u636e\u5e93\u4e2d\u5217\u7684\u6570\u636e\u7c7b\u578b\u4e00\u81f4\u3002 \u5982\uff1a\u4f7f\u7528 getInt() \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u4e3a integer \u7684\u5217\u6570\u636e\uff0c\u76f4\u63a5\u83b7\u53d6\u5b8c\u6574\u6570\u636e\u3002 {.is-info} P\uff08\u5141\u8bb8\u63d2\u5165\uff09\uff1a\u6307 set\\<Type> \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u5e93\u4e2d\u5217\u6570\u636e\u65f6\uff0c\u6570\u636e\u65e0\u635f\u5931\u5b58\u5165\u6570\u636e\u5e93\u4e2d\u3002 \u5982\uff1a\u4f7f\u7528 setInt() \u65b9\u6cd5\u8bbe\u7f6e\u5217\u6570\u636e\u7c7b\u578b\u4e3a bigint \u7684\u6570\u636e\u65f6\uff0c\u6570\u636e\u53ef\u6b63\u786e\u5b58\u5165\u3002 Z\uff08\u90e8\u5206\u63d2\u5165\uff09\uff1a\u6307 set\\<Type> \u65b9\u6cd5\u4e2d\u7684 Type \u7c7b\u578b\u548c\u6570\u636e\u5e93\u4e2d\u5217\u6570\u636e\u7c7b\u578b\u4e0d\u4e00\u81f4\uff0c\u6570\u636e\u4ec5\u80fd\u90e8\u5206\u6b63\u786e\u5b58\u5165\u3002 \u5982\uff1a\u4f7f\u7528 setInt() \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u5e93\u5217\u7c7b\u578b\u4e3a tinyint \u7684\u6570\u636e\uff0c\u56e0 tinyint \u8868\u793a\u8303\u56f4\u4e3a-128\uff5e127 \u7684\u6574\u6570\u503c\uff0c\u6545\u800c tinyint\u8868\u793a\u8303\u56f4\u5185\u6570\u636e\u53ef\u6b63\u786e\u5b58\u5165\uff0c\u8303\u56f4\u5916\u6570\u636e\u5c06\u63d2\u5165\u5931\u8d25\u3002 {.is-info} \u56db. \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5 4.1 \u90e8\u7f72JDBC\u9a71\u52a8\u7a0b\u5e8f \u901a\u8fc7\u865a\u8c37 JDBC \u9a71\u52a8\u8bbf\u95ee\u865a\u8c37\u6570\u636e\u5e93\uff0c\u9996\u5148\u5e94\u4fdd\u8bc1\u5e94\u7528\u7a0b\u5e8f\u6b63\u786e\u5f15\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u5305 (cloudjdbc-*.*.*.jar)\uff0c\u5373\u5c06\u9a71\u52a8\u5305\u62f7\u8d1d\u81f3\u5e94\u7528\u7a0b\u5e8f\u5e76\u6dfb\u52a0\u5f15\u7528\u3002 4.2 \u52a0\u8f7dJDBC\u9a71\u52a8\u7a0b\u5e8f \u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u8fdb\u884c\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u8c03\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u7a0b\u5e8f\uff0c\u9996\u5148\u8981\u5c06\u865a\u8c37 JDBC \u9a71\u52a8\u52a0\u8f7d\u5230\u7cfb\u7edf\u5185\u5b58\u4e2d\uff0c\u7136\u540e\u4f9b\u7cfb\u7edf\u4f7f\u7528\u3002\u865a\u8c37 JDBC \u7684\u9a71\u52a8\u5b9e\u73b0\u7c7b\u4e3acom.xugu.cloudjdbc.Driver\uff0c\u4ee5\u4e0b\u662f\u5c06\u865a\u8c37 JDBC \u9a71\u52a8\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\u7684\u4ee3\u7801\uff1a //\u663e\u793a\u6ce8\u518c DriverManager.registerDriver(new com.xugu.cloudjdbc.Driver())\u037e //\u9690\u5f0f\u6ce8\u518c Class.forName(\u201ccom.xugu.cloudjdbc.Driver\u201d)\u037e \u9690\u5f0f\u6ce8\u518c\u5373\u901a\u8fc7 Class.forName() \u5c06\u5bf9\u5e94\u7684\u9a71\u52a8\u7c7b\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\uff0c\u5c06\u6267\u884c\u5185\u5b58\u4e2d\u7684 static \u9759\u6001\u4ee3\u7801\u6bb5\uff0c\u6b64\u4ee3\u7801\u6bb5\u4f1a\u521b\u5efa\u4e00\u4e2a\u865a\u8c37 JDBC \u9a71\u52a8\u7684\u5b9e\u4f8b\uff0c\u5e76\u653e\u5165 DriverManager \u4e2d\uff0c\u4f9b DriverManager \u4f7f\u7528\u3002 {.is-info} 4.3 \u8fde\u63a5\u5b57\u4e32\u53ca\u53c2\u6570\u8bbe\u7f6e \u865a\u8c37 JDBC \u9a71\u52a8\u8fde\u63a5 URL \u4e32\u683c\u5f0f\uff1a jdbc:xugu://serverIP:portNumber/databaseName[?property=value[&property=value]] \u865a\u8c37 JDBC \u9a71\u52a8\u8fde\u63a5 URL \u4e32\u683c\u5f0f\uff1a 1). jdbc:xugu:// \uff1a\uff08\u5fc5\u9700\uff09\u865a\u8c37\u6570\u636e\u5e93\u7279\u5b9a\u534f\u8bae\u3002 2). serverIP \uff1a\uff08\u5fc5\u9700\uff09\u865a\u8c37\u6570\u636e\u5e93\u6240\u5728\u670d\u52a1\u5668\u7684 IP \u5730\u5740\u3002 3). portNumber\uff1a\uff08\u5fc5\u9700\uff09\u662f\u865a\u8c37\u6570\u636e\u5e93\u670d\u52a1 TCP \u8bbf\u95ee\u7aef\u53e3\uff0c\u9ed8\u8ba4 5138\u3002 4). databaseName\uff1a\uff08\u5fc5\u9700\uff09\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u5e93\u540d\u79f0\u3002 5). property\uff1a\uff08\u53ef\u9009\uff09\u865a\u8c37\u6570\u636e\u5e93\u7684 URL \u8fde\u63a5\u5c5e\u6027\u3002\u591a\u4e2a\u8fde\u63a5\u5c5e\u6027\u4e4b\u95f4\u4f7f\u7528\u201c&\u201d\u5206\u9694\uff0c\u4e0d\u53ef\u91cd\u590d\u3002 \u865a\u8c37 JDBC \u9a71\u52a8 URL \u4e32\u793a\u4f8b\u5982\u4e0b\uff1a String url = jdbc:xugu://localhost:5138/System?user=GUEST&password=GUEST\u037e property \u8bbe\u7f6e\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u6027\uff0c\u5e38\u7528\u8fde\u63a5\u5c5e\u6027\u89c1\u88684.1\u3002 \u88684.1 \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u6027 table th:first-of-type { width: 20%; } table th:nth-of-type(2) { width: 10%; } table th:nth-of-type(3) { width: 10%; } table th:nth-of-type(4) { width: 50%; } \u5c5e\u6027\u540d\u79f0 \u5fc5\u9009\u9879 \u53d6\u503c \u8bf4\u660e database \u221a \u5b57\u7b26\u4e32 \u6570\u636e\u5e93\u540d\u79f0 user \u221a \u5b57\u7b26\u4e32 \u7528\u6237\u540d\u79f0 password \u221a \u5b57\u7b26\u4e32 \u7528\u6237\u5bc6\u7801 encryptor \u00d7 \u5b57\u7b26\u4e32 \u7528\u4e8e\u542f\u52a8\u52a0\u5bc6\u6570\u636e\u5e93\uff0c\u82e5\u5e93\u672a\u52a0\u5bc6\uff0c\u5219\u53ef\u4e0d\u8981\uff0c\u4f46\u5e26\u4e0a\u6b64\u53c2\u6570\u4e0d\u4f1a\u5f71\u54cd\u8fde\u63a5 char_set \u00d7 \u5b57\u7b26\u4e32 \u8fde\u63a5\u5b57\u7b26\u96c6\u3002'GB2312'\u3001'GBK'\u3001'UTF8' \u7b49\uff0c\u9ed8\u8ba4\uff1aGBK time_zone \u00d7 \u5b57\u7b26\u4e32 \u5ba2\u6237\u7aef\u65f6\u533a\u3002\u9ed8\u8ba4\uff1a\u865a\u8c37\u6570\u636e\u5e93\u914d\u7f6e\u53c2\u6570 def_timezone \u6240\u8bbe\u7f6e\u65f6\u533a\uff08\u53ea\u5bf9\u7cfb\u7edf\u65f6\u95f4\u51fd\u6570\u751f\u6548\uff09 iso_level \u00d7 \u5b57\u7b26\u4e32 'READ COMMITED'\uff1a\u8bfb\u5df2\u63d0\u4ea4\uff1b 'REPEATIABLE READ'\uff1a\u53ef\u91cd\u590d\u8bfb\uff1b'SERIALIZABLE'\uff1a\u5e8f\u5217\u5316 lock_time \u00d7 \u6570\u503c \u5355\u4f4d\uff1a\u6beb\u79d2\uff0c\u9ed8\u8ba4\u503c\uff1a0\uff0c\u8868\u793a\u8fde\u63a5\u4e2d\u7684\u4e8b\u52a1\u9501\u5f81\u7528\u65f6\uff0c\u6700\u5927\u7b49\u5019\u65f6\u95f4\uff0c\u82e5\u5728\u8bbe\u7f6e\u65f6\u95f4\u5185\u52a0\u9501\u5931\u8d25\uff0c\u56de\u6eda\u4e8b\u52a1\u5e76\u62a5\u9519 lob_ret \u00d7 \u5b57\u7b26\u4e32 \u5927\u5bf9\u8c61\uff08Blob\u3001Clob\uff09\u6570\u636e\u8fd4\u56de\u65b9\u5f0f\u3002\u5c5e\u6027\u4e3a descriptor \u65f6\uff0c\u4ee5\u63cf\u8ff0\u7b26\u65b9\u5f0f\u8fd4\u56de\uff1b\u5176\u4ed6\u4ee5\u6570\u636e\u6d41\u65b9\u5f0f\u8fd4\u56de\u3002\u9ed8\u8ba4\uff1a\u4ee5\u6570\u636e\u6d41\u65b9\u5f0f\u8fd4\u56de return_rowid \u00d7 \u5e03\u5c14\u503c \u662f\u5426\u8fd4\u56de\u8bb0\u5f55 rowid \u503c\u3002\u5c5e\u6027\u4e3a TRUE \u65f6\uff0c\u8fd4\u56de rowid\uff1b\u5176\u4ed6\u8fd4\u56de FALSE\u3002\u9ed8\u8ba4\uff1aFALSE auto_commit \u00d7 on/off \u4e8b\u52a1\u662f\u5426\u81ea\u52a8\u63d0\u4ea4\u3002\u5c5e\u6027\u4e3a ON \u65f6\uff0c\u8fde\u63a5\u81ea\u52a8\u63d0\u4ea4\uff1b\u5c5e\u6027\u4e3a OFF\u65f6\uff0c\u8fde\u63a5\u975e\u81ea\u52a8\u63d0\u4ea4\u3002\u9ed8\u8ba4\uff1aON conn_type \u00d7 \u6570\u503c \u8d1f\u8f7d\u5747\u8861\u5206\u914d\u65b9\u5f0f\u3002\u5c5e\u6027\u4e3a 1 \u65f6\uff0c\u968f\u673a\u5206\u914d\uff1b\u5c5e\u6027\u4e3a 2 \u65f6\uff0c\u987a\u5e8f\u5206\u914d\u3002\u9ed8\u8ba4\uff1a2 ips \u00d7 \u5b57\u7b26\u4e32 \u8d1f\u8f7d\u5747\u8861\u8fde\u63a5 IP \u5730\u5740\uff0c\u591a\u4e2a IP \u5730\u5740\u4ee5\u9017\u53f7\u5206\u9694\uff08\u8be6\u7ec6\u89c1\u8d1f\u8f7d\u5747\u8861\uff09 CompatibleOracle \u00d7 \u5e03\u5c14\u503c \u517c\u5bb9 Oracle \u9009\u9879\u3002\u5c5e\u6027\u4e3a true\uff0c\u517c\u5bb9 Oracle\u037e \u5c5e\u6027\u4e3a FALSE\uff0c\u865a\u8c37 JDBC \u81ea\u6709\u5b9e\u73b0 recv_mode \u00d7 \u6570\u503c \u63a5\u6536\u6a21\u5f0f\u9009\u9879\u3002\u5c5e\u6027\u503c\u4e3a 0 \u65f6\uff0c\u672c\u5730\u5168\u63a5\u6536\u6a21\u5f0f\uff1b\u5c5e\u6027\u503c\u4e3a 1 \u65f6\uff0c\u7f51\u7edc\u63a5\u6536\u6a21\u5f0f\uff1b\u5c5e\u6027\u503c\u4e3a 2 \u65f6\uff0c\u670d\u52a1\u5668\u7aef\u6e38\u6807\u63a5\u6536\u6a21\u5f0f\u3002\u9ed8\u8ba4\uff1a0 emptyStringAsNull \u00d7 \u5e03\u5c14\u503c \u7a7a\u5b57\u4e32\u5904\u7406\u3002\u5c5e\u6027\u4e3a FALSE \u65f6\uff0c\u7a7a\u5b57\u7b26\u4e32\u8ba4\u5b9a\u4e3a NULL\uff1b\u5c5e\u6027\u4e3a TRUE \u65f6\uff0c\u7a7a\u5b57\u7b26\u4e32\u4fdd\u7559\u3002\u9ed8\u8ba4\uff1a\u7a7a\u5b57\u4e32\u4fdd\u7559 xgversion \u00d7 201/301 \u5ba2\u6237\u7aef\u534f\u8bae\u7248\u672c\uff0c\u865a\u8c37\u6570\u636e\u5e93V12\u7248\u672c\u5347\u7ea7\u652f\u6301301\u534f\u8bae\uff0c\u540c\u65f6\u517c\u5bb9201\u534f\u8bae SSL \u00d7 SSL \u8fde\u63a5\u52a0\u5bc6\u53c2\u6570\u3002\u5c5e\u6027\u503c\u3010SSL\uff1a\u542f\u7528SSL\u52a0\u5bc6\u4f20\u8f93\uff1bNSSL\uff1a\u7981\u7528SSL\u52a0\u5bc6\u4f20\u8f93\u3011 slowsqltime \u00d7 \u6570\u503c \u8bbe\u7f6e\u6162SQL\u6267\u884c\u65f6\u95f4\u3002SQL\u8bed\u53e5\u6267\u884c\u65f6\u95f4\u8d85\u8fc7\u8be5\u6570\u503c\uff0c\u65e5\u5fd7\u5219\u4f1a\u8f93\u51fa\u6267\u884cSQL batch_mode \u00d7 \u5e03\u5c14\u503c PreparedStatement\u662f\u5426\u4f7f\u7528\u6279\u91cf\u5904\u7406\u3002\u5c5e\u6027\u4e3a TRUE \u65f6\uff0cexecuteBatch\u91c7\u7528\u6279\u91cf\u6a21\u578b\uff1bFALSE\u5219\u91c7\u7528\u5355\u6761\u5904\u7406\u6a21\u578b\u3002\u9ed8\u8ba4\uff1aFALSE \u8fde\u63a5\u53c2\u6570\u4f7f\u7528SSL\u5c5e\u6027\u65f6\uff0c\u4f9d\u8d56\u7a0b\u5e8f\u5305\u4e2d\u63d0\u4f9b\u7684\u52a8\u6001\u94fe\u63a5\u5e93\uff0c\u4f7f\u7528\u524d\u9700\u5c06\u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u5230\u64cd\u4f5c\u7cfb\u7edf\u6307\u5b9a\u4f4d\u7f6e\u65b9\u53ef\u6b63\u5e38\u4f7f\u7528SSL\u52a0\u5bc6\u529f\u80fd\u3002 Windows 32\u4f4d\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u7528SSL\u5c5e\u6027\u524d\uff0c\u9700\u5c06\u7a0b\u5e8f\u5305 ssl/win32 \u4e0b xgssl.dll \u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u62f7\u8d1d\u5230\u7cfb\u7edf\u76ee\u5f55 C:/windows/system32 \u76ee\u5f55\u4f4d\u7f6e\u3002 Windows 64\u4f4d\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u7528SSL\u5c5e\u6027\u524d\uff0c\u9700\u5c06\u7a0b\u5e8f\u5305 ssl/win64 \u4e0b xgssl.dll \u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u62f7\u8d1d\u5230\u7cfb\u7edf\u76ee\u5f55 C:/windows/system32 \u76ee\u5f55\u4e0b\u3002 Linux X64\u4f4d\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u7528SSL\u5c5e\u6027\u524d\uff0c\u9700\u5c06\u7a0b\u5e8f\u5305 ssl/linux64 \u4e0b libxgssl.so \u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u62f7\u8d1d\u5230\u7cfb\u7edf\u76ee\u5f55 /usr/lib\u6216\u8005/usr/lib4 \u76ee\u5f55\u4e0b\u3002 \u865a\u8c37 JDBC \u8bbe\u7f6e\u8fde\u63a5\u5c5e\u6027\u793a\u4f8b\u5982\u4e0b (\u7248\u672c\u53f7\u3001\u5927\u5bf9\u8c61\u63cf\u8ff0\u7b26\u3001\u65f6\u533a\u3001\u5173\u95ed\u8fde\u63a5\u81ea\u52a8\u63d0\u4ea4)\uff1a String url=jdbc:xugu://localhost:5138/System?user=GUEST&password=GUEST&version=110&auto_commit=false&lob_ret=descriptor&time_zone=GMT-8:00\u037e 4.4 \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5 \u5728\u5e94\u7528\u7a0b\u5e8f\u5c06\u865a\u8c37 JDBC \u9a71\u52a8\u52a0\u8f7d\u5230\u7cfb\u7edf\u5185\u5b58\u4e2d\u540e\uff0c\u53ef\u901a\u8fc7 DriverManager \u7c7b\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u65b9\u6cd5\u5982\u4e0b\uff1a DriverManager.getConnection(String url)\u037e DriverManager.getConnection(String url,Properties)\u037e DriverManager.getConnection(String url,String user,String password)\u037e \u4e94. \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u6e90\u548c\u8fde\u63a5\u6c60 \u901a\u8fc7 DriverManager \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u4ee5\u5916\uff0c\u8fd8\u53ef\u4ee5\u4f7f\u7528\u6570\u636e\u6e90\u6216\u8fde\u63a5\u6c60\u65b9\u5f0f\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u3002\u901a\u8fc7\u6570\u636e\u6e90\u65b9\u5f0f\u6216\u8fde\u63a5\u6c60\u65b9\u5f0f\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u6709\u4ee5\u4e0b\u4f18\u70b9\uff1a - \u8d44\u6e90\u91cd\u7528 \u7531\u4e8e\u6570\u636e\u5e93\u8fde\u63a5\u5f97\u5230\u91cd\u7528\uff0c\u907f\u514d\u4e86\u9891\u7e41\u521b\u5efa\u3001\u91ca\u653e\u8fde\u63a5\u5f15\u8d77\u7684\u5927\u91cf\u6027\u80fd\u5f00\u9500\u3002\u5728\u51cf\u5c11\u7cfb\u7edf\u6d88\u8017\u7684\u57fa\u7840\u4e0a\uff0c\u53e6\u4e00\u65b9\u9762\u4e5f\u589e\u8fdb\u4e86\u7cfb\u7edf\u8fd0\u884c\u73af\u5883\u7684\u5e73\u7a33\u6027\uff08\u51cf\u5c11\u5185\u5b58\u788e\u7247\u4ee5\u53ca\u6570\u636e\u5e93\u4e34\u65f6\u8fdb\u7a0b/\u7ebf\u7a0b\u7684\u6570\u91cf\uff09\u3002 - \u66f4\u5feb\u7684\u7cfb\u7edf\u54cd\u5e94 \u6570\u636e\u5e93\u8fde\u63a5\u6c60\u5728\u521d\u59cb\u5316\u8fc7\u7a0b\u4e2d\uff0c\u5f80\u5f80\u5df2\u7ecf\u521b\u5efa\u4e86\u82e5\u5e72\u6570\u636e\u5e93\u8fde\u63a5\u7f6e\u4e8e\u6c60\u4e2d\u5907\u7528\u3002\u6b64\u65f6\u8fde\u63a5\u7684\u521d\u59cb\u5316\u5de5\u4f5c\u5747\u5df2\u5b8c\u6210\u3002\u5bf9\u4e8e\u4e1a\u52a1\u8bf7\u6c42\u5904\u7406\u800c\u8a00\uff0c\u76f4\u63a5\u5229\u7528\u73b0\u6709\u53ef\u7528\u8fde\u63a5\uff0c\u907f\u514d\u4e86\u6570\u636e\u5e93\u8fde\u63a5\u521d\u59cb\u5316\u548c\u91ca\u653e\u8fc7\u7a0b\u7684\u65f6\u95f4\u5f00\u9500\uff0c\u4ece\u800c\u7f29\u51cf\u4e86\u7cfb\u7edf\u6574\u4f53\u54cd\u5e94\u65f6\u95f4\u3002 - \u65b0\u7684\u8d44\u6e90\u5206\u914d\u624b\u6bb5 \u5bf9\u4e8e\u591a\u5e94\u7528\u5171\u4eab\u540c\u4e00\u6570\u636e\u5e93\u7684\u7cfb\u7edf\u800c\u8a00\uff0c\u53ef\u5728\u5e94\u7528\u5c42\u901a\u8fc7\u6570\u636e\u5e93\u8fde\u63a5\u7684\u914d\u7f6e\uff0c\u9650\u5236\u5355\u4e00\u5e94\u7528\u7533\u8bf7\u6570\u636e\u5e93\u8fde\u63a5\u6570\uff0c\u4ece\u800c\u907f\u514d\u5355\u4e00\u5e94\u7528\u72ec\u5360\u6240\u6709\u6570\u636e\u5e93\u8d44\u6e90\u3002 \u865a\u8c37 JDBC \u4e2d\u6570\u636e\u6e90\u5b9e\u73b0\u7c7b\u4e3a com.xugu.pool.XgDataSource\uff0c\u8fde\u63a5\u6c60\u5b9e\u73b0\u7c7b\u4e3acom.xugu.pool \u5305\u4e2d\u7684 XgDataSource\u3001XgPooledConnection\u3001XgConnectionPoolDataSource\u3001XgConnectionEventListener\u3001XgConnectionEvent\u3002 5.1 \u4f7f\u7528\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u6e90\u521b\u5efa\u8fde\u63a5 XgDataSource \u63d0\u4f9b set \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u6e90\u8fde\u63a5\u5c5e\u6027\uff1a \u793a\u4f8b\uff1a\u901a\u8fc7 XgDataSource \u4e0e\u865a\u8c37\u6570\u636e\u5e93\u5efa\u7acb\u8fde\u63a5 com.xugu.pool.XgDataSource ds = new com.xugu.pool.XgDataSource()\u037e ds.setUrl(\"jdbc:xugu://127.0.0.1:5138/db\")\u037e ds.setUser(\"SYSDBA\")\u037e ds.setPassword(\"SYSDBA\")\u037e Properties pro = new Properties()\u037e pro.setProperty(\"return_rowid\", \"true\")\u037e pro.setProperty(\"auto_commit\", \"off\")\u037e ds.setPro(pro)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u767b\u5f55\u4e32\u3002url\u4e3a\u6570\u636e\u5e93\u767b\u5f55\u4e32 setUrl(String url)\uff1b //\u6307\u5b9a\u6570\u636e\u5e93\u670d\u52a1\u5668\u3002host\u4e3a\u670d\u52a1\u5668\u5730\u5740 setHostName(String host)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u540d\u3002dbName\u4e3a\u6570\u636e\u5e93\u540d setDatabaseName(String dbName)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u7aef\u53e3\u53f7\u3002port\u4e3a\u6570\u636e\u5e93\u7aef\u53e3\u53f7 setPort(int port)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u7528\u6237\u3002userName\u4e3a\u6570\u636e\u5e93\u767b\u5f55\u7528\u6237\u540d setUser(String userName)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u767b\u5f55\u5bc6\u7801\u3002passWord\u4e3a\u6570\u636e\u5e93\u767b\u5f55\u5bc6\u7801 setPassword(Stirng passWord)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u767b\u5f55\u53c2\u6570\u3002ds_pro\u4e3a\u6570\u636e\u5e93\u8fde\u63a5\u53c2\u6570 setPro(Properties ds_pro)\uff1b // \u901a\u8fc7\u6570\u636e\u6e90\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5 Connection conn = ds.getConnection()\u037e \u5728 com.xugu.pool.XgDataSource \u7c7b\u4e2d\u901a\u8fc7 setXX() \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u6e90\u7684\u8fde\u63a5\u5c5e\u6027\uff0c\u82e5\u672a\u6307\u5b9a\u5219\u4f7f\u7528\u9ed8\u8ba4\u5c5e\u6027\u503c\uff1a\u6570\u636e\u5e93\u670d\u52a1\u5668\u5730\u5740\u9ed8\u8ba4\u4e3a\u201clocalhost\u201d \uff0c\u8fde\u63a5\u6570\u636e\u5e93\u9ed8\u8ba4\u4e3a\u201cSYSTEM\u201d \uff0c\u8bbf\u95ee\u7aef\u53e3\u53f7\u9ed8\u8ba4\u4e3a\u201c5138\u201d \uff0c\u8bbf\u95ee\u7528\u6237\u540d\u9ed8\u8ba4\u4e3a\u201cGUEST\u201d \uff0c\u7528\u6237\u5bc6\u7801\u9ed8\u8ba4\u4e3a\u201cGUEST\u201d \u3002URL \u9ed8\u8ba4\u8fde\u63a5\u4e32\u4e3a\u201cjdbc:xugu://127.0.0.1:5138/SYSTEM?user=GUEST&password=GUEST&version=110\u201d\u3002\u6570\u636e\u6e90\u5efa\u7acb\u540e\uff0c\u53ef\u901a\u8fc7\u8c03\u7528 XgDataSource \u7c7b\u4e2d\u7684 getConnection() \u548c getConnection(String username,String password) \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u3002 5.2 \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u6c60 \u8fde\u63a5\u6c60\u6280\u672f\u7684\u6838\u5fc3\u601d\u60f3\u662f\uff1a\u8fde\u63a5\u590d\u7528\uff0c\u901a\u8fc7\u5efa\u7acb\u4e00\u4e2a\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u4ee5\u53ca\u4e00\u5957\u8fde\u63a5\u4f7f\u7528\u3001\u5206\u914d\u3001\u7ba1\u7406\u7b56\u7565\uff0c\u8be5\u8fde\u63a5\u6c60\u4e2d\u7684\u8fde\u63a5\u53ef\u4ee5\u5f97\u5230\u9ad8\u6548\u3001\u5b89\u5168\u7684\u590d\u7528\uff0c\u907f\u514d\u4e86\u6570\u636e\u5e93\u8fde\u63a5\u9891\u7e41\u5efa\u7acb\u3001\u5173\u95ed\u7684\u5f00\u9500\u3002 \u865a\u8c37 JDBC \u8fde\u63a5\u6c60\u5b9e\u73b0\u7c7b\u5bf9\u865a\u8c37\u6570\u636e\u5e93\u539f\u59cb\u8fde\u63a5\u8fdb\u884c\u4e86\u5c01\u88c5\uff0c\u4ece\u800c\u65b9\u4fbf\u4e86\u6570\u636e\u5e93\u5e94\u7528\u5bf9\u4e8e\u8fde\u63a5\u7684\u4f7f\u7528\uff08\u7279\u522b\u662f\u5bf9\u4e8e\u4e8b\u52a1\u5904\u7406\uff09\uff0c\u63d0\u9ad8\u4e86\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u6548\u7387\uff0c\u4e5f\u6b63\u662f\u56e0\u4e3a\u8fd9\u4e2a\u5c01\u88c5\u5c42\u7684\u5b58\u5728\uff0c\u9694\u79bb\u4e86\u5e94\u7528\u7684\u672c\u8eab\u7684\u5904\u7406\u903b\u8f91\u548c\u5177\u4f53\u6570\u636e\u5e93\u8bbf\u95ee\u903b\u8f91\uff0c\u4f7f\u5e94\u7528\u672c\u8eab\u7684\u590d\u7528\u6210\u4e3a\u53ef\u80fd\u3002\u8fde\u63a5\u6c60\u4e3b\u8981\u7531\u4e09\u90e8\u5206\u7ec4\u6210\uff1a\u8fde\u63a5\u6c60\u7684\u5efa\u7acb\u3001\u8fde\u63a5\u6c60\u4e2d\u8fde\u63a5\u7684\u4f7f\u7528\u7ba1\u7406\u3001\u8fde\u63a5\u6c60\u7684\u5173\u95ed\u3002 \u865a\u8c37 JDBC \u8fde\u63a5\u6c60\u7684\u57fa\u672c\u601d\u60f3\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u5efa\u7acb\u4e00\u4e2a\u201c\u7f13\u51b2\u6c60\u201d\u3002\u9884\u5148\u5728\u201c\u7f13\u51b2\u6c60\u201d\u4e2d\u653e\u5165\u4e00\u5b9a\u6570\u91cf\u7684\u8fde\u63a5\uff0c\u5f53\u9700\u8981\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65f6\uff0c\u53ea\u9700\u4ece\u201c\u7f13\u51b2\u6c60\u201d\u4e2d\u53d6\u51fa\u4e00\u4e2a\uff0c\u4f7f\u7528\u5b8c\u6bd5\u4e4b\u540e\u518d\u653e\u56de\u53bb\u3002\u901a\u8fc7\u8bbe\u5b9a\u8fde\u63a5\u6c60\u6700\u5927\u8fde\u63a5\u6570\u6765\u9632\u6b62\u7cfb\u7edf\u65e0\u5c3d\u7684\u4e0e\u6570\u636e\u5e93\u8fde\u63a5\u3002\u4ea6\u53ef\u901a\u8fc7\u8fde\u63a5\u6c60\u7684\u7ba1\u7406\u673a\u5236\u76d1\u89c6\u6570\u636e\u5e93\u7684\u8fde\u63a5\u6570\u91cf\u3001\u4f7f\u7528\u60c5\u51b5\uff0c\u4e3a\u7cfb\u7edf\u5f00\u53d1\u3001\u6d4b\u8bd5\u53ca\u6027\u80fd\u8c03\u6574\u63d0\u4f9b\u4f9d\u636e\u3002 \u5f53\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u5b8c\u6570\u636e\u5e93\u8fde\u63a5\u8c03\u7528\u8fde\u63a5\u5173\u95ed\u65b9\u6cd5\u65f6\uff0c\u8be5\u8fde\u63a5\u5e76\u672a\u9500\u6bc1\uff0c\u800c\u662f\u88ab\u5f52\u8fd8\u7ed9\u8fde\u63a5\u6c60\u7b49\u5f85\u4e0b\u6b21\u7ee7\u7eed\u8c03\u7528\u3002 {.is-info} \u865a\u8c37 JDBC \u5b9e\u73b0\u8fde\u63a5\u6c60\u670d\u52a1\u6240\u63d0\u4f9b\u7684\u63a5\u53e3\u7c7b\u5982\u4e0b\uff1a - XgDataSource \u5b9e\u73b0 javax.sql.DataSource \u63a5\u53e3\uff1b - XgPooledConnection \u5b9e\u73b0 javax.sql.PooledConnection \u63a5\u53e3\uff1b - XgConnectionPoolDataSource \u5b9e\u73b0 javax.sql.ConnectionPoolDataSource \u63a5\u53e3\uff1b - XgConnectionEventListener \u5b9e\u73b0 javax.sql.ConnectionEventListener \u63a5\u53e3\uff1b - XgConnectionEvent \u7ee7\u627f\u81ea javax.sql.ConnectionEvent \u7c7b\u3002 \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u4e2d\u7684\u8fde\u63a5\u5747\u662f\u901a\u8fc7\u6570\u636e\u6e90\u5efa\u7acb\u7684\uff0c\u6545\u800c XgConnectionPoolDataSource \u7ee7\u627f\u4e86 com.xugu.pool.XgDataSource \u7c7b\u3002\u7528\u6237\u4ea6\u53ef\u901a\u8fc7 XgConnectionPoolDataSource \u5bf9\u8c61\u8bbe\u7f6e\u6570\u636e\u6e90\u5c5e\u6027\u548c\u8fde\u63a5\u6c60\u5c5e\u6027\uff1a //\u6700\u5c0f\u8fde\u63a5\u6570 setMinIdle(int min) //\u6700\u5927\u8fde\u63a5\u6570 setMaxActive(int max) //\u767b\u5f55\u7a7a\u95f2\u65f6\u95f4 setLoginTimeout(int time) //\u6700\u5927\u7b49\u5f85\u8fde\u63a5\u8d85\u65f6 setMaxWaitTime(long waitTime) \u5176\u4e2d\uff1asetLoginTimeout() \u548c setMaxWaitTime() \u65b9\u6cd5\u4e2d\u53c2\u6570\u5355\u4f4d\u4e3a\u6beb\u79d2\uff0c\u5176\u4ed6\u65b9\u6cd5\u4e2d\u53c2\u6570\u5355\u4f4d\u4e3a\u79d2\u3002 \u793a\u4f8b\uff1a\u521b\u5efa\u4e00\u4e2a\u865a\u8c37 JDBC \u8fde\u63a5\u6c60\uff0c\u5e76\u901a\u8fc7\u8fde\u63a5\u6c60\u83b7\u53d6\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u3002 XgConnectionPoolDataSource CPDSource = new XgConnectionPoolDataSource()\u037e CPDSource.setHostName(\u201clocalhost\u201d)\u037e CPDSource.setPort(5138)\u037e CPDSource.setDatabaseName(\u201cxuguNew\u201d)\u037e CPDSource.setUser(\u201cSYSDBA\u201d)\u037e CPDSource.setPassword(\u201cSYSDBA\u201d)\u037e CPDSource.setUrl(\"jdbc:xugu://localhost:5138/xuguNew)\u037e CPDSource.setMaxActive(50)\u037e CPDSource.setMinIdle(5)\u037e CPDSource.setLoginTimeout(3000)\u037e CPDSource.setMaxWaitTime(3000)\u037e XgPooledConnection Pconn = (XgPooledConnection)CPDSource.getPooledConnection()\u037e Connection conn = Pconn.getConnection()\u037e \u516d. \u865a\u8c37\u6570\u636e\u5e93\u7684JDBC\u4ea4\u4e92\u6d41\u7a0b \u4f7f\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u5b9e\u73b0\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u4ea4\u4e92\u7684\u4e00\u822c\u4f7f\u7528\u6b65\u9aa4\uff1a\u5bfc\u5165\u865a\u8c37 JDBC \u9a71\u52a8\u5305 \u2192 \u52a0\u8f7d\u865a\u8c37 JDBC \u9a71\u52a8\u7a0b\u5e8f \u2192 \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5 Connection \u2192 \u521b\u5efa\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61 Statement \u2192 \u6267\u884c SQL \u8bed\u53e5 \u2192 \u5904\u7406\u6267\u884c\u7ed3\u679c ResultSet \u2192 \u91ca\u653e\u8d44\u6e90\u3002 - \u7b2c 1 \u6b65\uff1a\u5bfc\u5165\u865a\u8c37 JDBC \u9a71\u52a8\u5305 - \u7b2c 2 \u6b65\uff1a\u6ce8\u518a\u9a71\u52a8 (\u4ec5\u505a\u4e00\u6b21) - \u7b2c 3 \u6b65\uff1a\u5efa\u7acb\u8fde\u63a5 (Connection) - \u7b2c 4 \u6b65\uff1a\u521b\u5efa\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61 (Statement) - \u7b2c 5 \u6b65\uff1a\u6267\u884c SQL \u8bed\u53e5 - \u7b2c 6 \u6b65\uff1a\u5904\u7406\u6267\u884c\u7ed3\u679c (ResultSet) - \u7b2c 7 \u6b65\uff1a\u91ca\u653e\u8d44\u6e90 6.1 \u5bfc\u5165\u865a\u8c37JDBC\u9a71\u52a8\u5305 \u4e0b\u8f7d\u865a\u8c37\u6570\u636e\u5e93\u4e13\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u5305 (cloudjdbc-*.*.*.jar)\uff0c\u5e76\u5bfc\u5165\u5230\u5e94\u7528\u7a0b\u5e8f\u4e2d\u3002 6.2 \u52a0\u8f7d\u865a\u8c37JDBC\u9a71\u52a8 \u865a\u8c37 JDBC \u9a71\u52a8\u7a0b\u5e8f\u4e2d Driver \u63a5\u53e3\u5b9e\u73b0\u7c7b\u4e3a com.xugu.cloudjdbc.Driver\u3002\u52a0\u8f7d\u9a71\u52a8\u65b9\u5f0f\u4e3a DriverManager.registerDriver(new com.xugu.cloudjdbc.Driver()) \u6216Class.forName(\u201ccom.xugu.cloudjdbc.Driver\u201d)\u3002 6.3 \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5 \u5efa\u7acb\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u7684\u65b9\u5f0f\u6709\u591a\u79cd\uff0c\u53ef\u6839\u636e\u5e94\u7528\u7a0b\u5e8f\u5b9e\u9645\u4f7f\u7528\u573a\u666f\u9009\u62e9\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65b9\u5f0f\u3002\u5e38\u89c1\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65b9\u5f0f\u5982\u4e0b\uff1a - \u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u4f7f\u7528 DriverManager \u83b7\u5f97\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\uff1b - \u4f7f\u7528\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u6e90/\u8fde\u63a5\u6c60\u7684\u65b9\u5f0f\u83b7\u53d6\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\uff1b - \u4f7f\u7528\u7b2c\u4e09\u65b9\u901a\u7528\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u65b9\u5f0f\u83b7\u53d6\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u3002 \u5982\uff1adruid\u3001c3p0\u3001dbcp\u3001JNDI \u7b49\u3002 6.3.1 \u6253\u5f00\u6570\u636e\u5e93\u8fde\u63a5 \u6253\u5f00\u6570\u636e\u5e93\u8fde\u63a5\u5373\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u5bf9\u8c61 Connection \u7c7b\u3002 \u5982\uff1aDriverManager \u901a\u8fc7 getConnection() \u65b9\u6cd5\u83b7\u53d6 Connection \u7c7b\u5bf9\u8c61\u3002DriverManager \u7684 getConnection() \u65b9\u6cd5\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\u7684\u65b9\u5f0f\u4ea6\u6709\u591a\u79cd\u3002\u4ee5\u4e0b\u4e3a\u5e38\u89c1\u65b9\u5f0f\uff1a - getConnection(String url) \u53c2\u6570\u8bf4\u660e\uff1a - url\uff1a\u8bbf\u95ee\u6570\u636e\u5e93\u7684 URL \u8def\u5f84\u3002 \u793a\u4f8b\uff1a \u4e0b\u9762\u7684\u4ee3\u7801\u5229\u7528 getConnection \u65b9\u6cd5\u521b\u5efa\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u3002 ``` public Connection getConnection(){ Connection con=null\u037e try{ //\u6ce8\u518c\u6570\u636e\u5e93\u9a71\u52a8 Class.forName(\"com.xugu.cloudjdbc.Driver\")\u037e //\u5b9a\u4e49\u8fde\u63a5\u6570\u636e\u5e93\u7684url String url = \"jdbc:xugu://localhost:5138/db?user=user1\uff06password=pwd\"\u037e //\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5 con = DriverManager.getConnection(url)\u037e System.out.println(\"\u6570\u636e\u5e93\u8fde\u63a5\u6210\u529f\uff01\")\u037e }catch(Exception e){ e.printStackTrace()\u037e } //\u8fd4\u56de\u4e00\u4e2a\u8fde\u63a5 return con\u037e } ``` getConnection(String url,String user,String password) \u53c2\u6570\u8bf4\u660e\uff1a url\uff1a\u8bbf\u95ee\u6570\u636e\u5e93\u7684 URL \u8def\u5f84\u3002 user\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u7528\u6237\u540d\u3002 password\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u7528\u6237\u5bc6\u7801\u3002 \u793a\u4f8b\uff1a \u4e0b\u9762\u7684\u4ee3\u7801\u5229\u7528 getConnection \u65b9\u6cd5\u521b\u5efa\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u3002 private Connection con; private String user = \"user1\"; //\u5b9a\u4e49\u8fde\u63a5\u6570\u636e\u5e93\u7684\u7528\u6237\u540d private String password = \"pwd\"; //\u5b9a\u4e49\u8fde\u63a5\u6570\u636e\u5e93\u7684\u5bc6\u7801 private String className = \"com.xugu.cloudjdbc.Driver\";//\u5b9a\u4e49\u865a\u8c37JDBC\u9a71\u52a8 private String url = \"jdbc:xugu://localhost:5138/db\"; /\\*\\*\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\\*/ public Connection getConnection(){ try{ Class.forName(className);//\u52a0\u8f7d\u6570\u636e\u5e93\u9a71\u52a8 System.out.println(\"\u6570\u636e\u5e93\u9a71\u52a8\u52a0\u8f7d\u6210\u529f\uff01\"); con = DriverManager.getConnection(url,user,password); //\u8fde\u63a5\u6570\u636e\u5e93 System.out.println(\"\u6210\u529f\u5730\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\uff01\"); }catch(Exception e){ System.out.println(\"\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\u5931\u8d25\uff01\"); con = null; e.printStackTrace(); } finally { If(conn != null){ //\u91ca\u653e\u8fde\u63a5\u8d44\u6e90 conn.close(); } } return con; } getConnection(String url,Properties info) \u53c2\u6570\u8bf4\u660e\uff1a url\uff1a\u8bbf\u95ee\u6570\u636e\u5e93\u7684 URL \u8def\u5f84\u3002 info\uff1a\u4e00\u4e2a\u6301\u4e45\u7684\u5c5e\u6027\u96c6\u5bf9\u8c61\uff0c\u5305\u62ec user \u548c password \u7b49\u5c5e\u6027\u3002 \u793a\u4f8b\uff1a \u4e0b\u9762\u7684\u4ee3\u7801\u5229\u7528 getConnection \u65b9\u6cd5\u521b\u5efa\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u3002 public Connection getConnection(){ Connection con = null; //\u5b9a\u4e49\u6570\u636e\u5e93\u8fde\u63a5\u5bf9\u8c61 Properties info = new Properties(); //\u5b9a\u4e49Properties\u5bf9\u8c61 info.setProperty(\"user\",\"user1\"); //\u8bbe\u7f6eProperties\u5bf9\u8c61\u5c5e\u6027 info.setProperty(\"password\",\"pwd\"); try{ //\u6ce8\u518c\u6570\u636e\u5e93\u9a71\u52a8 Class.forName(\"com.xugu.cloudjdbc.Driver\"); //test\u4e3a\u6570\u636e\u5e93\u540d\u79f0 String url = \"jdbc:xugu://localhost:5138/db\"; //\u83b7\u53d6\u8fde\u63a5\u6570\u636e\u5e93\u7684Connection\u5bf9\u8c61 con = DriverManager.getConnection(url,info); System.out.println(\"\u6570\u636e\u5e93\u8fde\u63a5\u6210\u529f\uff01\"); }catch(Exception e){ e.printStackTrace(); } //\u8fd4\u56de\u4e00\u4e2a\u8fde\u63a5 return con; } 6.3.2 \u8fde\u63a5\u4e8b\u52a1\u7ba1\u7406 \u6570\u636e\u5e93\u4e8b\u52a1 (transaction) \u662f\u8bbf\u95ee\u5e76\u53ef\u80fd\u64cd\u4f5c\u5404\u79cd\u6570\u636e\u9879\u7684\u4e00\u4e2a\u6570\u636e\u5e93\u64cd\u4f5c\u5e8f\u5217\uff0c\u8fd9\u4e9b\u64cd\u4f5c\u8981\u4e48\u5168\u90e8\u6267\u884c, \u8981\u4e48\u5168\u90e8\u4e0d\u6267\u884c\uff0c\u662f\u4e00\u4e2a\u4e0d\u53ef\u5206\u5272\u7684\u5de5\u4f5c\u5355\u4f4d\u3002\u4e8b\u52a1\u7531\u4e8b\u52a1\u5f00\u59cb\u5230\u4e8b\u52a1\u7ed3\u675f\u4e4b\u95f4\u6267\u884c\u7684\u5168\u90e8\u6570\u636e\u5e93\u64cd\u4f5c\u7ec4\u6210\u3002 \u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\uff0c\u5373\u5f53\u4e00\u6761 SQL \u8bed\u53e5\u6267\u884c\u5b8c\u6210\u540e\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u5c06\u81ea\u52a8\u63d0\u4ea4\u8be5\u8bed\u53e5\u6240\u5728\u4e8b\u52a1\u3002\u5728\u865a\u8c37 JDBC \u9a71\u52a8\u4e2d\u63a7\u5236\u4e8b\u52a1\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a - \u901a\u8fc7\u6570\u636e\u5e93\u8fde\u63a5 URL \u4e32\u7684 auto_commit \u5c5e\u6027\uff0c\u63a7\u5236\u4e8b\u52a1\u7684\u5f00\u542f\u4e0e\u5173\u95ed\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b auto_commit \u5c5e\u6027\u4e3a on\uff0c\u5373\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u3002 - \u901a\u8fc7 Connection \u7c7b\u7684 setAutoCommit(boolean commit) \u65b9\u6cd5\u63a7\u5236\u4e8b\u52a1\u7684\u5f00\u542f\u4e0e\u5173\u95ed\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b commit \u5c5e\u6027\u4e3a TRUE\uff0c\u5373\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u3002 \u5728\u7981\u7528\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u4e0b\uff0c\u4f7f\u7528 Connection \u7c7b\u7684 commit() \u65b9\u6cd5\u63d0\u4ea4 SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u505a\u7684\u66f4\u6539\uff0c\u800c Connection \u7c7b\u7684 rollback() \u65b9\u6cd5\u5c06\u56de\u6eda SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u7684\u66f4\u6539\uff0c\u4e0a\u8ff0\u4e24\u79cd\u65b9\u6cd5\u6267\u884c\u5b8c\u6210\u540e\u5747\u5c06\u91ca\u653e\u4e8b\u52a1\u6301\u6709\u7684\u5168\u90e8\u9501\u8d44\u6e90\u3002 \u4e8b\u52a1\u4ec5\u5bf9\u6570\u636e\u5e93 DML \u64cd\u4f5c\u6709\u6548\u3002 {.is-info} \u4ee5\u4e0b\u4e3a\u4f7f\u7528 setAutoCommit() \u65b9\u6cd5\u63a7\u5236\u4e8b\u52a1\u63d0\u4ea4\u7684\u793a\u4f8b\u4ee3\u7801\uff1a //\u8bbe\u7f6e\u4e8b\u52a1\u4e3a\u975e\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f conn.setAutoCommit(false)\u037e //\u521b\u5efa\u6570\u636e\u5e93Statement\u5bf9\u8c61 Statement stm = conn.createStatement()\u037e //\u6570\u636e\u5e93\u4e8b\u52a1\u6267\u884cSQL\u8bed\u53e5 String sql = \"insert into test (comp_id,comp_name) values(1,'comp')\"\u037e //\u6267\u884c\u9759\u6001SQL\u8bed\u53e5 stm.execute(sql)\u037e //\u6570\u636e\u5e93\u9884\u5904\u7406SQL\u8bed\u53e5 PreparedStatement pstm = conn. prepareStatement(\u201cupdate test set id=? where comp_name=?\u201d) //\u9884\u5904\u7406SQL\u8bed\u53e5\u7b2c\u4e00\u4e2a\u53c2\u6570\u8d4b\u503c pstm.setInt(1,15)\u037e //\u9884\u5904\u7406SQL\u8bed\u53e5\u7b2c\u4e8c\u4e2a\u53c2\u6570\u8d4b\u503c pstm.setString(2,'DBMS')\u037e //\u6267\u884c\u9884\u5904\u7406SQL\u8bed\u53e5 pstm.execute()\u037e //\u63d0\u4ea4\u4e8b\u52a1 conn.commit()\u037e //\u5220\u9664\u8868\u4e2d\u6307\u5b9a\u884c\u6570\u636e stm.execute(\u201cdelete from test where id=15\u201d)\u037e //\u4e8b\u52a1\u56de\u6eda\u65b9\u6cd5 conn.rollback()\u037e \u4e0a\u9762\u4ee3\u7801\u4e2d\u6267\u884c\u63d0\u4ea4\u4e8b\u52a1\u64cd\u4f5c\uff0c\u6267\u884c\u9759\u6001 SQL \u8bed\u53e5\u4e0e\u6267\u884c\u9884\u5904\u7406 SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u7684\u66f4\u6539\u5c06\u6c38\u4e45\u751f\u6548\uff1b\u800c\u540e\u6267\u884c\u7684\u5220\u9664\u8868\u4e2d\u6307\u5b9a\u884c\u6570\u636e\u64cd\u4f5c\uff0c\u56e0\u5176\u540e\u8c03\u7528\u7684 rollback() \u65b9\u6cd5\uff0cdelete \u547d\u4ee4\u5bf9\u6570\u636e\u5e93\u7684\u6570\u636e\u66f4\u6539\u5c06\u88ab\u56de\u6eda\u6389\uff0c\u6545\u800c\u5bf9\u6570\u636e\u5e93\u7684\u5220\u9664\u64cd\u4f5c\u4e0d\u4f1a\u751f\u6548\u3002 6.3.3 \u8fde\u63a5\u4e8b\u52a1\u63a7\u5236\uff0cSavepoint\u63a5\u53e3 JDBC \u89c4\u8303 3.0 \u4e2d\u4e3a\u4e86\u589e\u52a0\u5bf9\u4e8b\u52a1\u7684\u63a7\u5236\uff0c\u65b0\u589e Savepoint \u63a5\u53e3\uff0c\u5176\u4ee3\u8868\u4e8b\u52a1\u4e2d\u7684\u4e00\u4e2a\u903b\u8f91\u4e8b\u52a1\u70b9\u3002\u5728\u975e\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u4e0b\uff0c\u4e00\u4e2a\u4e8b\u52a1\u4e2d\u53ef\u4ee5\u8bbe\u7f6e\u591a\u4e2a Savepoint\uff0c\u5728\u4ee3\u7801\u4e2d\u8fdb\u884c\u4e8b\u52a1\u56de\u6eda\u64cd\u4f5c\u65f6\uff0c\u53ef\u4ee5\u6307\u5b9a\u4e8b\u52a1\u56de\u6eda\u5230\u6307\u5b9a Savepoint \u4f4d\u7f6e\uff0c\u6307\u5b9a\u56de\u6eda\u4f4d\u7f6e\u524d\u7684\u4e8b\u52a1\u64cd\u4f5c\u4ecd\u7136\u4fdd\u7559\u3002\u6b64\u63a5\u53e3\u5927\u5927\u63d0\u9ad8\u4e86\u4e8b\u52a1\u5904\u7406\u7684\u7c92\u5ea6\uff0c\u65b9\u4fbf\u5e94\u7528\u7a0b\u5e8f\u63a7\u5236\u4e8b\u52a1\u5904\u7406\u903b\u8f91\u3002 \u793a\u4f8b\uff1a\u8fde\u63a5\u4e8b\u52a1\u63a7\u5236\u63a5\u53e3 Savepoint \u4f7f\u7528 //\u8bbe\u7f6e\u975e\u81ea\u52a8\u63d0\u4ea4 conn.setAutoCommit(false); //\u521b\u5efaStatement\u5bf9\u8c61 Statement stm = conn.createStatement(); //\u6267\u884cSQL\u547d\u4ee4 stm.execute(sql1); stm.execute(sql2); //\u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\u70b9save1 java.sql.Savepoint save1 =conn.setSavepoint(\"save_1\"); stm.execute(sql3); //\u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\u70b9save2 java.sql.Savepoint save2 =conn.setSavepoint(\"save_2\"); stm.execute(sql4); //\u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\u70b9save3 java.sql.Savepoint save3 =conn.setSavepoint(\"save_3\"); stm.execute(sql5); //\u56de\u6eda\u4e8b\u52a1\u5230\u56de\u6eda\u70b9save3 conn.rollback(save3); conn.commit(); \u4ee5\u4e0a\u4ee3\u7801\u6bb5\u4e2d\uff0c\u4e8b\u52a1\u6267\u884c\u8bed\u53e5 sql5 \u5c06\u88ab\u56de\u6eda\u6389\u3002 6.4 \u521b\u5efa\u6267\u884cSQL\u8bed\u53e5\u5bf9\u8c61 \u5728\u6570\u636e\u5e93\u6807\u51c6\u4e2d\uff0c\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61\u5206\u4e3a\u4e09\u7c7b\uff1a\u6267\u884c\u9759\u6001 SQL \u8bed\u53e5\u7684 Statement \u5bf9\u8c61\u3001\u6267\u884c\u9884\u7f16\u8bd1 SQL \u8bed\u53e5\u7684 PreparedStatement \u5bf9\u8c61\u4ee5\u53ca\u6267\u884c\u6570\u636e\u5e93\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\u7684 CallableStatement \u5bf9\u8c61\u3002 6.4.1 \u6267\u884cSQL\u5bf9\u8c61Statement Statement \u5bf9\u8c61\u7528\u4e8e\u6267\u884c\u9759\u6001 SQL \u8bed\u53e5\u548c\u83b7\u5f97 SQL \u4ea7\u751f\u7684\u7ed3\u679c\u3002\u5728\u865a\u8c37 JDBC \u9a71\u52a8\u4e2d\uff0c\u865a\u8c37\u6570\u636e\u5e93 DDL \u64cd\u4f5c\u5747\u901a\u8fc7 Statement \u5bf9\u8c61\u6765\u6267\u884c\u3002 Statement \u5bf9\u8c61\u901a\u8fc7 Connection \u7c7b\u7684 createStatement() \u65b9\u6cd5\u521b\u5efa\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a //\u521b\u5efa\u6267\u884cSQL\u8bed\u53e5\u5bf9\u8c61Statement Statement stm = conn.createStatement()\u037e 6.4.2 \u6267\u884cSQL\u5bf9\u8c61PreparedStatement PreparedStatement \u5bf9\u8c61\u4f7f\u7528\u65f6\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u5bf9\u6267\u884c SQL \u8bed\u53e5\u8fdb\u884c\u9884\u7f16\u8bd1\u5904\u7406\uff0c\u9884\u7f16\u8bd1 SQL \u8bed\u53e5\u5c06\u5728\u672a\u6765\u7684\u4f7f\u7528\u4e2d\u88ab\u91cd\u7528\u3002\u4e0e Statement \u5bf9\u8c61\u76f8\u6bd4\uff0cPreparedStatement \u5bf9\u8c61\u64cd\u4f5c\u591a\u6761 SQL \u8bed\u53e5\u7684\u6548\u7387\u66f4\u9ad8\u3002 \u7ecf\u8fc7\u9884\u7f16\u8bd1\u5e76\u5b58\u50a8\u5728 PreparedStatement \u5bf9\u8c61\u4e2d\u7684 SQL \u8bed\u53e5\uff0c\u901a\u8fc7 Connection \u7c7b\u7684 prepareStatement() \u65b9\u6cd5\u521b\u5efa\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a //\u521b\u5efa\u6267\u884c\u9884\u7f16\u8bd1SQL\u8bed\u53e5\u5bf9\u8c61PreparedStatement PreparedStatement preStatement = conn.prepareStatement(\u201c\u9884\u7f16\u8bd1SQL\u8bed\u53e5\u201d); \u9884\u5904\u7406 PreparedStatement \u5bf9\u8c61\u76f8\u5bf9\u4e8e\u9759\u6001 Statement \u5bf9\u8c61\u7684\u4f18\u52bf\uff1a - PreparedStatement \u53ef\u4ee5\u52a8\u6001\u4f20\u5165\u53c2\u6570\u503c\uff1b - PreparedStatement \u6bd4 Statement \u66f4\u5feb\uff1b PreparedStatement \u4f1a\u5c06 SQL \u8bed\u53e5\u9884\u7f16\u8bd1\u5728\u6570\u636e\u5e93\u7cfb\u7edf\u4e2d\uff0c\u6267\u884c\u8ba1\u5212\u540c\u6837\u4f1a\u88ab\u7f13\u5b58\u8d77\u6765\uff0c\u5b83\u5141\u8bb8\u6570\u636e\u5e93\u505a\u53c2\u6570\u5316\u67e5\u8be2\u3002\u4f7f\u7528\u9884\u5904\u7406\u8bed\u53e5\u6bd4\u666e\u901a\u7684 Statement \u67e5\u8be2\u66f4\u5feb\uff0c\u56e0\u505a\u7684\u5de5\u4f5c\u66f4\u5c11 (\u6570\u636e\u5e93\u5bf9 SQL \u8bed\u53e5\u7684\u5206\u6790\u3001\u7f16\u8bd1\u3001\u4f18\u5316\u5df2\u7ecf\u5728\u7b2c\u4e00\u6b21\u67e5\u8be2\u524d\u5b8c\u6210\u4e86)\u037e - PreparedStatement \u53ef\u4ee5\u9632\u6b62 SQL \u6ce8\u5165\u5f0f\u653b\u51fb\u3002 PreparedStatement \u5728\u4f7f\u7528\u53c2\u6570\u5316\u67e5\u8be2\u7684\u60c5\u51b5\u4e0b\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u4e0d\u4f1a\u5c06\u53c2\u6570\u7684\u5185\u5bb9\u89c6\u4e3a SQL \u6307\u4ee4\u7684\u4e00\u90e8\u5206\u6765\u5904\u7406\uff0c\u800c\u662f\u5728\u6570\u636e\u5e93\u5b8c\u6210 SQL \u6307\u4ee4\u7684\u7f16\u8bd1\u540e\uff0c\u624d\u5957\u7528\u53c2\u6570\u8fd0\u884c\uff0c\u56e0\u6b64\u5c31\u7b97\u53c2\u6570\u4e2d\u542b\u6709\u7834\u574f\u6027\u7684\u6307\u4ee4\uff0c\u4e5f\u4e0d\u4f1a\u88ab\u6570\u636e\u5e93\u6240\u8fd0\u884c\u3002 6.4.3 \u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u5bf9\u8c61CallableStatement CallableStatement \u5bf9\u8c61\u5b9e\u73b0\u4e86\u4ece Java \u5e94\u7528\u7a0b\u5e8f\u4e2d\u8c03\u7528\u6570\u636e\u5e93\u5b58\u50a8\u8fc7\u7a0b\u3002\u4f46\u6b64\u8c03\u7528\u8fc7\u7a0b\u5e76\u4e0d\u5305\u542b\u5b58\u50a8\u8fc7\u7a0b\u672c\u8eab\uff0c\u56e0\u5b58\u50a8\u8fc7\u7a0b\u5b58\u50a8\u5728\u6570\u636e\u5e93\u4e2d\u3002 CallableStatement \u5bf9\u8c61\u4e3a\u6240\u6709\u7684\u6570\u636e\u5e93\u63d0\u4f9b\u4e86\u4e00\u79cd\u4ee5\u6807\u51c6\u5f62\u5f0f\u8c03\u7528\u5b58\u50a8\u8fc7\u7a0b\u7684\u65b9\u6cd5\uff0c\u901a\u8fc7 Connection \u7c7b\u7684 prepareCall() \u65b9\u6cd5\u521b\u5efa\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a //\u521b\u5efa\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u5bf9\u8c61CallableStatement CallableStatement cstmt= conn.prepareCall(\u201c{call \u5b58\u50a8\u8fc7\u7a0b\u540d(\u53c2\u6570\u8868\u5217)}\u201d); 6.4.4 \u6267\u884cSQL\u8bed\u53e5\u5bf9\u8c61\u5c5e\u6027\u6269\u5145 \u5728\u521b\u5efa\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61\u65f6\uff0c\u53ef\u901a\u8fc7\u6784\u9020\u65b9\u6cd5\u7684\u4e0d\u540c\u53c2\u6570\u8bbe\u7f6e ResultSet \u5bf9\u8c61\u5c5e\u6027\uff0c\u5c5e\u6027\u5305\u62ec\u7ed3\u679c\u7c7b\u578b ResultSetType\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b ResultSetConcurrency\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b ResultSetHoldability\u3002 ResultSetType \u9ed8\u8ba4\u4e3a ResultSet.TYPE_SCROLL_INSENSITIVE\uff1a\u652f\u6301\u7ed3\u679c\u96c6 backforward\u3001last\u3001first \u7b49\u64cd\u4f5c\uff0c\u5bf9\u6570\u636e\u5e93\u4e2d\u5176\u5b83 session \u8fdb\u884c\u7684\u6570\u636e\u66f4\u6539\u4e0d\u654f\u611f\uff1b ResultSetConcurrency \u9ed8\u8ba4\u4e3a ResultSet.CONCUR_READ_ONLY: \u4e0d\u53ef\u66f4\u65b0\u7ed3\u679c\u96c6\uff1b\u8be5\u5c5e\u6027\u4ea6\u53ef\u66f4\u6539\u4e3a ResultSet.CONCUR_UPDATABLE\uff0c\u652f\u6301\u5728 ResultSet \u4e2d\u5bf9\u8bb0\u5f55\u8fdb\u884c\u4fee\u6539\uff0c\u4fee\u6539\u540e\u8bb0\u5f55\u66f4\u65b0\u5230\u6570\u636e\u5e93\uff0c\u4fee\u6539\u64cd\u4f5c\u53ef\u5305\u542b\u63d2\u5165\u3001\u5220\u9664\u6216\u66f4\u65b0\uff1b ResultSetHoldability \u9ed8\u8ba4\u4e3a ResultSet.HOLD_CURSORS_OVER_COMMIT: \u5728\u4e8b\u52a1 commit \u6216 rollback \u540e\uff0cResultSet \u4ecd\u7136\u53ef\u7528\u3002 Connection \u7c7b\u521b\u5efa Statement \u5bf9\u8c61\u6784\u9020\u65b9\u6cd5\uff1a //Statement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 createStatement(int resultSetType,int resultSetConcurrency)\uff1b //Statement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 createStatement(int resultSetType,int resultSetConcurrency, int resultSetHoldability)\uff1b Connection \u7c7b\u521b\u5efa PreparedStatement \u5bf9\u8c61\u6784\u9020\u65b9\u6cd5\uff1a //PreparedStatement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareStatement(String sql, int resultSetType,int resultSetConcurrency) //PrepareStatment\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareStatement(String sql, int resultSetType,int resultSetConcurrency, int resultSetHoldability) Connection \u7c7b\u521b\u5efa CallableStatement \u5bf9\u8c61\u6784\u9020\u65b9\u6cd5\uff1a //CallableStatement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareCall(String sql, int resultSetType,int resultSetConcurrency) //CallableStatement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareCall(String sql, int resultSetType,int resultSetConcurrency, int resultSetHoldability) 6.5 \u6267\u884cSQL\u8bed\u53e5 Statement \u5bf9\u8c61\u5b9a\u4e49\u4e86\u591a\u79cd\u6267\u884c SQL \u8bed\u53e5\u7684\u65b9\u6cd5\uff0c\u7528\u6765\u5904\u7406\u8fd4\u56de\u4e0d\u540c\u7ed3\u679c\u7684 SQL \u547d\u4ee4\uff1a - execute(String sql)\uff1a\u6267\u884c\u53ef\u4ee5\u8fd4\u56de\u591a\u4e2a\u7ed3\u679c\u96c6\u7684 SQL \u8bed\u53e5\u8fd4\u56de\u7c7b\u578b\u4e3a boolean\uff0c\u5982\u679c\u8fd4\u56de\u7684\u662f\u66f4\u65b0\u7684\u6570\u76ee\uff0c\u5219\u8fd4\u56de false\uff1b\u5982\u679c\u8fd4\u56de\u7684\u662f ResultSet \u5bf9\u8c61\uff0c\u5219\u8fd4\u56detrue\u3002 - executeQuery(String sql)\uff1a\u6267\u884c\u8fd4\u56de\u5355\u4e2a ResultSet \u7684 SQL \u8bed\u53e5\u8fd4\u56de\u7c7b\u578b\u4e3a ResultSet \u5bf9\u8c61\u3002 - executeUpdate()\uff1a\u6267\u884c SQL INSERT\u3001UPDATE \u6216 DELETE \u8bed\u53e5\u8fd4\u56de\u503c\u4e3a int \u578b\uff0c\u6570\u636e\u5e93\u53d7\u5f71\u54cd\u7684\u884c\u8ba1\u6570\u3002 - \u6279\u5904\u7406\u65b9\u6cd5\uff1a\u6279\u91cf\u6267\u884c SQL \u8bed\u53e5 clearBatch()\uff1a\u6e05\u7a7a\u5386\u53f2 batch \u547d\u4ee4\uff1b addBatch(String sql)\uff1a\u6dfb\u52a0\u8981\u6267\u884c\u7684 sql\uff1b executeBatch()\uff1a\u6279\u91cf\u6267\u884c sql\u3002 PreparedStatement \u7ee7\u627f\u81ea Statement\uff0c\u5b9a\u4e49\u4e86\u5927\u91cf\u7684 setter \u65b9\u6cd5\u7528\u4e8e\u8bbe\u7f6e\u52a8\u6001 sql\u7684\u53c2\u6570\uff0c\u56e0\u6b64 PreparedStatement \u652f\u6301\u52a8\u6001\u4f20\u53c2\uff1b\u53e6\u5916 PreparedStatement \u5185\u90e8\u5b58\u50a8\u4e86\u89e3\u6790\u7684 sql\uff0c\u53ef\u4ee5\u591a\u6b21\u6267\u884c\u800c\u65e0\u9700\u91cd\u590d\u89e3\u6790\u3002PreparedStatement \u7ee7\u627f\u81ea Statement\uff0cCallableStatement \u7ee7\u627f\u81ea PreparedStatement\uff0c\u6545\u800c\u4e09\u8005\u6267\u884c SQL \u8bed\u53e5\u7684\u65b9\u5f0f\u53ef\u901a\u7528\u3002 6.5.1 \u901a\u8fc7Statement\u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c \u901a\u8fc7 Statement \u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c\u9700\u8981\u6ce8\u610f\u7684\u4e8b\u9879\uff1a - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u524d\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u8bbe\u7f6e\u4e3a FALSE\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\uff0c\u5e76\u8fdb\u884c\u624b\u52a8\u63d0\u4ea4\uff08commit\uff09\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u540e\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u6062\u590d\u4e3a TRUE\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u5f02\u5e38\u53d1\u751f\u65f6\uff0c\u8fdb\u884c rollback(\u56de\u6eda)\u3002 \u793a\u4f8b\uff1a\u901a\u8fc7 Statement \u6279\u91cf\u64cd\u4f5c\u6570\u636e try { //\u521b\u5efaStatement\u5bf9\u8c61 stm = con.createStatement(); //\u8bbe\u7f6e\u4e8b\u52a1\u975e\u81ea\u52a8\u63d0\u4ea4 con.setAutoCommit(false); // \u6dfb\u52a0\u591a\u6761SQL\u8bed\u53e5\u5230\u6279\u5904\u7406\u4e2d stm.addBatch(\"insert into student values(23,'tangbao','\u9ad8\u6570',100)\"); stm.addBatch(\"insert into student values(24,'\u738b\u5b9a','c#',98)\"); stm.addBatch(\"insert into student values(25,'\u738b\u56fd\u4e91','java',90)\"); //\u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c stm.executeBatch(); System.out.println(\"\u63d2\u5165\u6210\u529f!\"); //\u6267\u884c\u6210\u529f\u540e\u8fdb\u884c\u6570\u636e\u63d0\u4ea4 con.commit(); System.out.println(\"\u63d0\u4ea4\u6210\u529f!\"); //\u5173\u95ed\u975e\u81ea\u52a8\u63d0\u4ea4 con.setAutoCommit(true); } catch (SQLException e) { if (!con.isClosed()) { con.rollback(); //\u51fa\u73b0\u5f02\u5e38\uff0c\u56de\u6eda\u4e8b\u52a1 System.out.println(\"\u63d0\u4ea4\u5931\u8d25\uff0c\u56de\u6eda\uff01\"); con.setAutoCommit(true); //\u5173\u95ed\u975e\u81ea\u52a8\u63d0\u4ea4 } } finally { if (stmt != null) { //\u5173\u95ed\u64cd\u4f5c\u5bf9\u8c61 stmt.close(); } } 6.5.2 \u901a\u8fc7PreparedStatement\u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c \u901a\u8fc7 PreparedStatement \u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c\u9700\u8981\u6ce8\u610f\u7684\u4e8b\u9879\uff1a - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u524d\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u8bbe\u7f6e\u4e3a FALSE\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\uff0c\u5e76\u8fdb\u884c\u624b\u52a8\u63d0\u4ea4\uff08commit\uff09\uff0c\u6570\u636e\u91cf\u5927\u65f6\uff0c\u8bbe\u7f6e\u624b\u52a8\u63d0\u4ea4\u95f4\u9694\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u540e\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u6062\u590d\u4e3a TRUE\uff1b \u2022 \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u5f02\u5e38\u53d1\u751f\u65f6\uff0c\u8fdb\u884c rollback(\u56de\u6eda)\uff1b - PreparedStatement \u6267\u884c\u8bed\u53e5\u4e0d\u80fd\u4e3a DDL \u8bed\u53e5\u3002 \u793a\u4f8b\uff1a\u5c06 10000 \u6761\u8bb0\u5f55\u63d2\u5165\u6570\u636e\u5e93\u4e2d\uff0c\u6bcf 100 \u6761\u6267\u884c\u4e00\u6b21\u63d0\u4ea4\u64cd\u4f5c try{ conn.setAutoCommit(false); //\u8bbe\u7f6e\u975e\u81ea\u52a8\u63d0\u4ea4 //\u521b\u5efaPreparedStatement\u5bf9\u8c61 ps = conn.prepareStatement(\"insert into testtab values (?, ?, ?)\"); //\u5faa\u73af\u6dfb\u52a0\u6279\u5904\u7406\u6570\u636e for(int i = 0;i<list.size();i++){ HashMap map = list.get(i);//list\u4e3a\u6570\u636e\u5c01\u88c5\uff0c\u6b64\u5904\u7565 ps.setString(1, map.get(\"id\").toString()); ps.setString(2, map.get(\"name\").toString()); ps.setString(3, map.get(\"age\").toString()); ps.addBatch(); if(mod(i,100)==0){//\u6bcf100\u6761\u6267\u884c\u4e00\u6b21\u6267\u884c\u64cd\u4f5c ps.executeBatch();//\u6267\u884c\u6279\u91cf\u63d2\u5165 conn.commit();//\u6267\u884c\u4e8b\u52a1\u63d0\u4ea4 } } ps.executeBatch();//\u6267\u884c\u6279\u91cf\u63d2\u5165 conn.commit(); //\u63d0\u4ea4\u4e8b\u52a1 }catch(Exception e){ if (!conn.isClosed()) { conn.rollback(); //\u51fa\u73b0\u5f02\u5e38\uff0c\u56de\u6eda\u4e8b\u52a1 System.out.println(\"\u63d0\u4ea4\u5931\u8d25\uff0c\u56de\u6eda\uff01\"); conn.setAutoCommit(true); //\u5173\u95ed\u975e\u81ea\u52a8\u63d0\u4ea4 } } finally { if (ps!= null) { ps.close();//\u5173\u95ed\u64cd\u4f5c\u5bf9\u8c61 } } 6.5.3 CallableStatement\u7ed1\u5b9a\u53c2\u6570 CallableStatement \u5b58\u5728\u4e09\u79cd\u7c7b\u578b\u7684\u53c2\u6570 IN\u3001OUT \u548c INOUT\u3002 - IN\uff1a\u521b\u5efa SQL \u8bed\u53e5\u65f6\u5176\u53c2\u6570\u503c\u672a\u77e5\u3002\u4f7f\u7528 setXXX() \u65b9\u6cd5\u5c06\u503c\u7ed1\u5b9a\u5230 IN \u53c2\u6570\u3002 - OUT\uff1a\u7531 SQL \u8bed\u53e5\u8fd4\u56de\u7684\u53c2\u6570\u503c\u3002\u53ef\u4ee5\u4f7f\u7528 getXXX() \u65b9\u6cd5\u4ece OUT \u53c2\u6570\u4e2d\u68c0\u7d22\u503c\u3002 - INOUT\uff1a\u63d0\u4f9b\u8f93\u5165\u548c\u8f93\u51fa\u503c\u7684\u53c2\u6570\u3002\u4f7f\u7528 setXXX() \u65b9\u6cd5\u7ed1\u5b9a\u53d8\u91cf\u5e76\u4f7f\u7528getXXX() \u65b9\u6cd5\u68c0\u7d22\u503c\u3002 \u793a\u4f8b 1\uff1a\u901a\u8fc7\u53c2\u6570\u4e0b\u6807\u7ed1\u5b9a\u53c2\u6570 //\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\u8bed\u53e5 String sql =\"{call pro_2(?,?,?)}\"; //\u521b\u5efaCallableStatement\u5bf9\u8c61 CallableStatement cstm = conn.prepareCall(sql); //\u901a\u8fc7\u53c2\u6570\u4e0b\u6807\u8bbe\u7f6e\u53c2\u6570(IN\u53c2\u6570) cstm.setInt(1, 20490); //\u6ce8\u518cOUT\u53c2\u6570\u6570\u636e\u7c7b\u578b cstm.registerOutParameter(2, com.xugu.cloudjdbc.Types.VARCHAR); cstm.registerOutParameter(3, com.xugu.cloudjdbc.Types.VARCHAR); //\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528 cstm.execute(); //\u83b7\u53d6\u5b58\u50a8\u8fc7\u7a0b\u8f93\u51fa\u53c2\u6570 String name = (String)cstm.getObject(2); String address = (String)cstm.getObject(3); \u793a\u4f8b 2\uff1a\u901a\u8fc7\u53c2\u6570\u540d\u7ed1\u5b9a\u53c2\u6570 //\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\u8bed\u53e5 CallableStatement pstm = conn.prepareCall(\"insert into tt1 values(:id,:name)\"); //\u901a\u8fc7\u53c2\u6570\u540d\u8bbe\u7f6e\u53c2\u6570(IN\u53c2\u6570) pstm.setInt(\"id\", 1); pstm.setString(\"name\", \"cloud\"); //\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528 pstm.execute(); 6.6 \u5904\u7406\u6267\u884c\u7ed3\u679c ResultSet \u7c7b\u662f\u901a\u8fc7 Statement \u53ca\u5176\u5b50\u7c7b\u6267\u884c SQL \u67e5\u8be2\u8bed\u53e5\u5f97\u5230\u7684\u7ed3\u679c\u96c6\u3002ResultSet \u7c7b\u5305\u542b\u4e09\u4e2a\u91cd\u8981\u5c5e\u6027\uff1aResultSet \u5bf9\u8c61\u5e76\u53d1\u6a21\u5f0f\u3001ResultSet \u5bf9\u8c61\u5149\u6807\u5904\u7406\u65b9\u5411\u3001ResultSet \u5bf9\u8c61\u5149\u6807\u7c7b\u578b\u3002ResultSet \u7c7b\u5177\u6709\u6307\u5411\u5f53\u524d\u7ed3\u679c\u96c6\u6570\u636e\u884c\u4f4d\u7f6e\u5149\u6807\uff0c\u5149\u6807\u4f4d\u7f6e\u521d\u59cb\u88ab\u7f6e\u4e8e\u7b2c\u4e00\u884c\u4e4b\u524d\uff0c\u901a\u8fc7 ResultSet \u7c7b\u5c01\u88c5\u7684\u5149\u6807\u79fb\u52a8\u65b9\u6cd5\u5b9e\u73b0\u5bf9\u5149\u6807\u4f4d\u7f6e\u7684\u63a7\u5236\uff0c\u5f53 ResultSet \u5bf9\u8c61\u7684\u5149\u6807\u79fb\u81f3\u6570\u636e\u7ed3\u679c\u96c6\u672b\u5c3e\u65f6 (\u4e0b\u4e00\u884c\u65e0\u6570\u636e)\uff0c\u8fd4\u56de FALSE\u3002 \u5728\u865a\u8c37 JDBC \u4e2d\uff0cResultSet \u7c7b\u5206\u4e3a\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u548c\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\uff08\u901a\u8fc7 URL \u8fde\u63a5\u4e32\u53c2\u6570 recv_mode \u914d\u7f6e\uff09\u3002\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u9ed8\u8ba4\u5c5e\u6027\u4e3a\u4e0d\u53ef\u66f4\u65b0\u3001\u5411\u524d\u79fb\u52a8\u3001\u53ef\u4ee5\u6eda\u52a8\uff1b\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u9ed8\u8ba4\u5c5e\u6027\u4e3a\u4e0d\u53ef\u66f4\u65b0\u3001\u53ea\u5411\u524d\u79fb\u52a8\u3001\u4e0d\u53ef\u6eda\u52a8\u3002 Statement \u5bf9\u8c61\u6267\u884c SQL \u8bed\u53e5\u8fd4\u56de\u7ed3\u679c\u96c6\u4ec5\u80fd\u662f\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\uff0c\u800c PreparedStatement \u5bf9\u8c61\u6267\u884c SQL \u8bed\u53e5\u8fd4\u56de\u7ed3\u679c\u96c6\u53ef\u4e3a\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u6216\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u3002 \u5f53\u6267\u884c SQL \u8fd4\u56de\u6570\u636e\u7ed3\u679c\u96c6\u8f83\u5927\u65f6\uff0c\u5efa\u8bae\u4f7f\u7528\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\uff0c\u907f\u514d JVM \u7684\u6ea2\u51fa\u3002 {.is-info} 6.6.1 \u66f4\u65b0ResultSet\u7ed3\u679c\u96c6 \u521b\u5efa Statement \u5bf9\u8c61\u65f6\uff0c\u8bbe\u7f6e Statement \u5c5e\u6027 RresultSetConcurrency \u4e3a ResultSet.CONCUR_UPDATABLE\uff0c\u5e76\u4e14\u6570\u636e\u5e93 URL \u8fde\u63a5\u4e32\u5c5e\u6027 return_rowid \u8bbe\u7f6e\u4e3a TRUE\u65f6\uff0cStatement \u5bf9\u8c61\u6267\u884c SQL \u8bed\u53e5\u8fd4\u56de\u7684 ResultSet \u7ed3\u679c\u96c6\u624d\u80fd\u88ab\u66f4\u65b0\u3002\u5f53 ResultSet \u5bf9\u8c61\u4e3a\u53ef\u66f4\u65b0\u7ed3\u679c\u96c6\u65f6\uff0c\u5c06\u5149\u6807\u79fb\u81f3\u63d2\u5165\u4f4d\u7f6e\uff0c\u53ef\u8c03\u7528 ResultSet \u7c7b\u5bf9\u5e94\u7684 update \u65b9\u6cd5\u4fee\u6539\u7ed3\u679c\u96c6\u4e2d\u884c\u6570\u636e\uff0c\u5e76\u901a\u8fc7 updateRow \u65b9\u6cd5\u5c06\u66f4\u6539\u6570\u636e\u66f4\u65b0\u5230\u6570\u636e\u5e93\u4e2d\u3002 \u793a\u4f8b\uff1a\u901a\u8fc7\u4fee\u6539\u7ed3\u679c\u96c6\u4e2d\u6570\u636e\u503c\u66f4\u6539\u6570\u636e\u5e93\u4e2d\u5bf9\u5e94\u8bb0\u5f55 //\u521b\u5efaStatement\u5bf9\u8c61\u5e76\u8bbe\u7f6e\u7ed3\u679c\u96c6\u5c5e\u6027\u4e3a\u53ef\u66f4\u65b0 Statement stm = conn.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_UPDATABLE); //\u6267\u884cSQL\u8bed\u53e5 ResultSet rs = stm.executeQuery(sql); //\u7ed3\u679c\u96c6\u904d\u5386 while(rs.next()) { //\u66f4\u65b0\u7ed3\u679c\u96c6\u4e2d\u6307\u5b9a\u5217\u6570\u636e rs.updateLong(1, 5); //\u66f4\u65b0\u7ed3\u679c\u96c6\u4e2d\u6307\u5b9a\u5217\u6570\u636e rs.updateFloat(3, 12.3f); //\u7ed3\u679c\u96c6\u53d8\u66f4\u56de\u5199\u5165\u6570\u636e\u5e93 rs.updateRow(); } \u901a\u8fc7\u8c03\u7528 ResultSet \u7c7b\u7684 next()\u3001previous()\u3001absolute(int) \u65b9\u6cd5\u79fb\u52a8\u5149\u6807\u4f4d\u7f6e\uff0c\u5c06\u5149\u6807\u4f4d\u7f6e\u79fb\u52a8\u5230\u6307\u5b9a\u6570\u636e\u884c\uff0c\u901a\u8fc7 ResultSet \u7c7b\u5bf9\u5e94\u7684 get \u65b9\u6cd5\u83b7\u53d6\u884c\u6570\u636e\u3002 \u5982\u4f7f\u7528\u7ed3\u679c\u96c6\u66f4\u65b0\u6570\u636e\u5e93\u6570\u636e\uff0c\u9700\u5728\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65f6\uff0c\u8bbe\u7f6e\u8fde\u63a5\u5c5e\u6027 return_rowid \u4e3aTRUE\uff0c\u4e14\u5728\u751f\u6210\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61\u65f6\uff0c\u5e76\u53d1\u5c5e\u6027\u6307\u5b9a\u4e3a ResultSet.CONCUR_UPDATABLE\u3002 {.is-info} 6.6.2 \u901a\u8fc7\u79fb\u52a8\u5149\u6807\u83b7\u53d6\u7ed3\u679c\u96c6\u6761\u6570 \u793a\u4f8b 1\uff1a \u7edf\u8ba1\u7ed3\u679c\u96c6\u603b\u6761\u6570 //\u521b\u5efaStatement\u5bf9\u8c61 Statement stm= conn.createStatement(); stm.execute(\"create table test(id int identity(1,1));insert into test values(default)\"); //\u6267\u884c\u7ed3\u679c\u96c6\u67e5\u8be2 ResultSet rs = stm.executeQuery(\"select * from test\") //\u79fb\u52a8\u5149\u6807\u81f3\u7ed3\u679c\u96c6\u672b\u5c3e rs.last(); //\u83b7\u53d6\u7ed3\u679c\u96c6\u884c\u6570 int rsCounts = rs.getRow(); 6.6.3 \u591a\u7ed3\u679c\u96c6\u5904\u7406 \u865a\u8c37 JDBC \u652f\u6301\u591a\u7ed3\u679c\u96c6\u5904\u7406\uff0c\u5141\u8bb8 Statement \u63a5\u53e3\u652f\u6301\u591a\u91cd\u6253\u5f00\u7684 ResultSet \u5bf9\u8c61\u3002\u6267\u884c\u8bed\u53e5\u53ef\u4ee5\u662f\u591a\u6761 SQL \u8bed\u53e5\u7684\u96c6\u5408\uff0c\u5373\u4e00\u6b21\u6027\u5411\u865a\u8c37\u670d\u52a1\u5668\u53d1\u9001\u591a\u6761 SQL \u8bed\u53e5\uff0c\u865a\u8c37\u670d\u52a1\u5668\u6267\u884c\u5b8c SQL \u8bed\u53e5\u540e\u8fd4\u56de\u591a\u4e2a\u6267\u884c\u7ed3\u679c\uff1b\u4ea6\u6216\u5b58\u50a8\u8fc7\u7a0b\u5b9a\u4e49\u6709\u591a\u4e2a\u8fd4\u56de\u7ed3\u679c\u96c6\u3002\u865a\u8c37 JDBC \u7684 Statement \u91cd\u8f7d\u4e86 Statement \u63a5\u53e3\u4e2d\u7684 getMoreResults() \u65b9\u6cd5\u3002 \u793a\u4f8b\uff1a\u591a\u7ed3\u679c\u96c6\u5904\u7406 //SQL\u8bed\u53e5\u5305\u542b\u591a\u6761\u67e5\u8be2\u547d\u4ee4 String sql=\" SELECT * FROM A1 WHERE D2=(SELECT AVG(D2) FROM A1 GROUP BY D1);SELECT * FROM A1 WHERE D2>(SELECT MIN(D2) FROM A1 GROUP BY D1)\"; //\u521b\u5efaStatement\u5bf9\u8c61 Statement stm = conn.createStatement(); //\u6267\u884cSQL\u8bed\u53e5 boolean f = stm.execute(sql); //\u5224\u65ad\u662f\u5426\u6709ResultSet\u5bf9\u8c61\u4ea7\u751f if(f == true){ //\u83b7\u53d6\u7ed3\u679c\u96c6\u5bf9\u8c61 ResultSet rs1 = stm.getResultSet(); ... ... ... ... } while(true) { //\u5224\u65adStatement\u662f\u5426\u8fd4\u56de\u4e86\u591a\u4e2aResultSet\u5bf9\u8c61 if(!stm.getMoreResults(Statement.CLOSE_CURRENT_RESULT)){ break; } else if((rs2 = cstm.getResultSet())!=null) { ... ... ... ...//\u6570\u636e\u5904\u7406\u90e8\u5206\u7701\u7565 } } 6.6.4 \u670d\u52a1\u5668\u7aef\u6e38\u6807\u4f7f\u7528 \u865a\u8c37JDBC\u4e2d\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u751f\u6210\u9700\u6ee1\u8db3\u4e24\u4e2a\u6761\u4ef6\uff1aURL\u8fde\u63a5\u4e32\u5c5e\u6027recv_mode\u503c\u4e3a2\uff0cStatement\u5bf9\u8c61\u6267\u884cSQL\u8bed\u53e5\u4e3a\u5355\u6761SELECT\u8bed\u53e5\u3002 \u5e94\u7528\u7a0b\u5e8f\u7aef\u901a\u8fc7Statement\u7c7b\u7684setFetchSize(int)\u65b9\u6cd5\u6216ResultSet\u7c7b\u7684setFetchSize(int)\u65b9\u6cd5\u8bbe\u7f6e\u6bcf\u6b21\u4ece\u670d\u52a1\u5668\u7aef\u83b7\u53d6\u591a\u5c11\u6761\u6570\u636e\u3002 \u4f7f\u7528\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7684 ResultSet \u5bf9\u8c61\uff0c\u5149\u6807\u53ea\u80fd\u5355\u5411\u5411\u524d\u6b63\u5411\u79fb\u52a8\uff0c\u4e0d\u80fd\u5411\u540e\u79fb\u52a8\u6216\u6765\u56de\u6eda\u52a8\u3002 {.is-info} \u793a\u4f8b\uff1a\u865a\u8c37\u6570\u636e\u5e93\u670d\u52a1\u5668\u7aef\u6e38\u6807\u4f7f\u7528 //\u521b\u5efa\u865a\u8c37JDBC\u7279\u6709Statement\u5bf9\u8c61 Statement stm = (com.xugu.cloudjdbc.Statement)conn.createStatement(); //\u5f00\u542f\u670d\u52a1\u5668\u7aef\u6e38\u6807 stm.setServerCursor(true); //\u8bbe\u7f6e\u670d\u52a1\u5668\u7aef\u6e38\u6807\u5355\u6b21\u8fd4\u56de\u6570\u636e\u6761\u6570 stm.setFetchSize(1000); //\u6267\u884cSQL\u8bed\u53e5 ResultSet rs = stm.executeQuery(\"select * from t1\"); //\u904d\u5386\u6570\u636e while\uff08rs.next()\uff09 { ... ... ... ... } //\u5173\u95ed\u670d\u52a1\u5668\u7aef\u6e38\u6807 stm.setServerCursor(false); 6.6.5 \u68c0\u7d22\u81ea\u52a8\u4ea7\u751f\u7684\u5173\u952e\u5b57GeneratedKeys JDBC 3.0 \u89c4\u8303\u4e2d\u5bf9\u4e8e\u81ea\u52a8\u4ea7\u751f\u7684\u5173\u952e\u5b57\u6570\u503c\uff0c\u5b9a\u4e49\u4e86\u63a5\u53e3\u89c4\u8303\uff0c\u5373\uff1agetGeneratedKeys() \u65b9\u6cd5\u3002 \u4e3a\u4e86\u89e3\u51b3\u5bf9\u83b7\u53d6\u81ea\u52a8\u4ea7\u751f\u7684\u6216\u81ea\u52a8\u589e\u52a0\u7684\u5173\u952e\u5b57\u7684\u503c\u7684\u9700\u6c42\uff0c\u865a\u8c37 JDBC \u6839\u636e JDBC3.0 \u89c4\u8303\u63d0\u4f9b\u4e86\u83b7\u5f97\u5173\u952e\u5b57\u503c\u7684\u65b9\u6cd5\u3002\u83b7\u53d6\u5173\u952e\u5b57\u7684\u503c\uff0c\u9700\u8981\u5728\u6267\u884c\u65b9\u6cd5\u4e2d\u6307\u5b9a\u81ea\u589e\u5173\u952e\u5b57\u6807\u8bb0\u3002SQL \u8bed\u53e5\u6267\u884c\u5b8c\u540e\uff0c\u8c03\u7528 Statement \u5bf9\u8c61\u7684 getGeneratedKeys() \u65b9\u6cd5\uff0c\u83b7\u5f97\u5305\u542b\u81ea\u589e\u957f\u503c\u7684 ResultSet \u5bf9\u8c61\u3002 \u793a\u4f8b\uff1a\u83b7\u53d6\u6570\u636e\u5e93\u81ea\u589e\u957f\u5173\u952e\u5b57\u7684\u503c //\u521b\u5efaStatement\u5bf9\u8c61 Statement stmt = conn.createStatement(); //\u6307\u5b9a\u81ea\u589e\u957f\u5173\u952e\u5b57\u7684\u6807\u8bc6 String[] colN = {\"id\"}; //\u5728\u6267\u884c\u65b9\u6cd5\u4e2d\u5f15\u5165\u81ea\u589e\u957f\u5173\u952e\u5b57\u6807\u8bc6 stmt.executeUpdate(\"INSERT INTO authors(first_name, last_name) VALUES (\u2018Ghq\u2019, \u2018Wxl\u2019)\",colN); //\u83b7\u53d6\u7ed3\u679c\u96c6 ResultSet rs = stmt.getGeneratedKeys(); if ( rs.next() ) { //\u83b7\u53d6\u7ed3\u679c\u96c6\u4e2d\u7684\u81ea\u589e\u957f\u503c \u3000\u3000 int key = rs.getInt(); } 6.7 \u91ca\u653e\u8d44\u6e90 \u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u56e0\u5904\u7406\u9700\u8981\u6240\u5efa\u7acb\u7684 ResultSet\u3001Statement\u3001PreparedStatement \u7b49\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61\uff0c\u5728\u4f7f\u7528\u5b8c\u540e\u5fc5\u987b\u5173\u95ed\u3002\u5173\u95ed\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61\uff0c\u76f4\u63a5\u8c03\u7528\u5bf9\u5e94\u7684\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61 close() \u65b9\u6cd5\u5373\u53ef\u3002 \u5f53\u4e0d\u518d\u9700\u8981\u548c\u865a\u8c37\u6570\u636e\u5e93\u8fdb\u884c\u4ea4\u4e92\u65f6\uff0c\u9700\u65ad\u5f00\u6570\u636e\u5e93\u8fde\u63a5\u3002\u8c03\u7528 Connection \u7c7b\u7684 close() \u65b9\u6cd5\u5373\u4f1a\u5173\u95ed\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u540c\u65f6\u91ca\u653e\u8fde\u63a5\u4e0a\u6240\u6301\u6709\u7684\u6240\u6709\u6570\u636e\u5e93\u8d44\u6e90\u3002 \u6570\u636e\u5e93\u8fde\u63a5\u4e3a\u975e\u81ea\u52a8\u63d0\u4ea4\u65f6\uff0c\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61\u5728\u4f7f\u7528\u5b8c\u540e\uff0c\u82e5\u672a\u53ca\u65f6\u5173\u95ed\uff0c\u6b64\u65f6\u8fdb\u884c DDL \u64cd\u4f5c\u5c06\u4f1a\u5bfc\u81f4\u865a\u8c37\u6570\u636e\u5e93\u52a0\u9501\u8d85\u65f6\u6216\u5931\u8d25\u3002 {.is-info} \u4e03. \u5927\u5bf9\u8c61\u7c7b\u578b\u5904\u7406 JDBC 3.0 \u89c4\u8303\u5b9a\u4e49\u6709 java.sql.Blob \u4e0e java.sql.Clob \u63a5\u53e3\uff0c\u6b64\u4e24\u7c7b\u63a5\u53e3\u4e3a\u6570\u636e\u5e93\u5927\u5bf9\u8c61\u6570\u636e\u5904\u7406\u63a5\u53e3\u3002\u865a\u8c37\u6570\u636e\u5e93\u5927\u5bf9\u8c61\u5b57\u6bb5\u7c7b\u578b\u5305\u542b\uff1ablob\u3001clob\u3001binary\u3002 \u5728\u865a\u8c37 JDBC \u4e2d\uff0c\u83b7\u53d6\u5927\u5bf9\u8c61\u6570\u636e\u6709\u4e24\u79cd\u8fd4\u56de\u65b9\u5f0f\uff1a\u4e00\u79cd\u662f\u6570\u636e\u76f4\u63a5\u8fd4\u56de\uff1b\u53e6\u4e00\u79cd\u662f\u8fd4\u56de\u63cf\u8ff0\u7b26\u65b9\u5f0f\u3002\u5f53\u8fd4\u56de\u6570\u636e\u4e2d\u5927\u5bf9\u8c61\u6570\u636e\u8f83\u591a\u65f6\uff0c\u5efa\u8bae\u4f7f\u7528\u8fd4\u56de\u63cf\u8ff0\u7b26\u65b9\u5f0f\uff0c\u4ece\u800c\u907f\u514d\u56e0\u6570\u636e\u8fc7\u591a\u8fc7\u5927\u9020\u6210\u7684 JVM \u5185\u5b58\u6ea2\u51fa\u3002\u865a\u8c37 JDBC \u9a71\u52a8\u542f\u7528\u5927\u5bf9\u8c61\u8fd4\u56de\u63cf\u8ff0\u7b26\u65b9\u5f0f\uff0c\u9700\u5728\u8fde\u63a5 URL \u4e32\u4e0a\u914d\u7f6e\u5c5e\u6027 lob_ret \u4e3a descriptor \u3002 7.1 \u5411\u8868\u4e2d\u63d2\u5165\u5927\u5bf9\u8c61 LOB \u5bf9\u8c61\u7684\u63d2\u5165\u5fc5\u987b\u901a\u8fc7 PreparedStatement\u3001CallableStatement \u7c7b\u7684 setXXX() \u65b9\u6cd5\u65b9\u5f0f\u5b9e\u73b0\u3002\u865a\u8c37 JDBC \u4e2d PreparedStatement \u63d0\u4f9b\u591a\u79cd\u65b9\u6cd5\u8bbe\u7f6e\u5927\u5bf9\u8c61\u53c2\u6570\u503c\uff0c\u5982\u4e0b\u5217\u65b9\u6cd5\uff1a setBinaryStream(int parameterIndex,InputStream x) setBlob(int parameterIndex, Blob x) setBlob(int parameterIndex, InputStream x) setBytes(int parameterIndex,byte[] x) setCharacterStream(int parameterIndex, Reader reader) setClob(int parameterIndex, Clob x) setClob(int parameterIndex, Reader reader) setString(int parameterIndex, String x) \u793a\u4f8b\uff1a\u5e94\u7528\u7a0b\u5e8f\u63d2\u5165\u5927\u5bf9\u8c61\u6570\u636e\uff0c\u5176\u4e2d\u8868 b1 \u5b57\u6bb5 photo \u4e3a blob \u7c7b\u578b\uff0c\u5b57\u6bb5 text \u4e3a clob \u7c7b\u578b PreparedStatement ps = conn.prepareStatement(\"INSERT INTO b1 VALUES (?, ?)\")\u037e // blobBytes is a byte[] type ps.setBlob(1, new com.xugu.cloudjdbc.Blob(blobBytes))\u037e // clobString is a String type ps.setClob(2, new com.xugu.cloudjdbc.Clob(clobString))\u037e ps.execute()\uff1b 7.2 \u67e5\u8be2\u5927\u5bf9\u8c61\u6570\u636e \u901a\u8fc7\u865a\u8c37 JDBC \u83b7\u53d6\u5927\u5bf9\u8c61\u503c\uff0c\u6570\u636e\u5e93 CLOB \u5bf9\u8c61\u53ef\u901a\u8fc7\u5b57\u7b26\u4e32\u5f62\u5f0f\u6216\u6d41\u5f0f\u6570\u636e\u5f62\u5f0f\u83b7\u53d6\uff0c\u6570\u636e\u5e93 BLOB \u5bf9\u8c61\u53ea\u901a\u8fc7\u6d41\u5f0f\u6570\u636e\u5f62\u5f0f\u83b7\u53d6\u3002 \u793a\u4f8b 1\uff1a\u6d41\u5f0f\u83b7\u53d6 CLOB \u5bf9\u8c61 Statement stm = xgConn.createStatement(); String sql=\u201dselect remark from t_clob where id=101\u201d; ResultSet rs = stm.executeQuery(sql); while(rs.next) { Clob data = rs.getClob(\"remark \"); //\u4ee5\u5b57\u7b26\u6d41\u65b9\u5f0f\u83b7\u53d6\u6570\u636e Reader rd = data.getCharacterStream(); char[] sc = new char[1000]; StringBuffer sb = new StringBuffer(); int len = 0; while((len=rd.read(sc)) !=-1) { sb.append(new String(sc,0,len)); } System.out.println(sb.toString()); } \u793a\u4f8b 2\uff1a\u865a\u8c37 JDBC \u5141\u8bb8\u4ee5\u5b57\u7b26\u4e32\u7684\u5f62\u5f0f\u8bfb\u53d6 CLOB \u5bf9\u8c61 String sql=\"select text from t_clob\"\u037e Statement stm=conn.createStatement()\u037e ResultSet rs=stm.executeQuery(sql)\u037e while(rs.next()) { String clobStr =rs.getString(\"text\")\u037e } \u516b. \u865a\u8c37\u6570\u636e\u5e93\u8d1f\u8f7d\u5747\u8861 \u865a\u8c37\u6570\u636e\u5e93\u662f\u4e00\u6b3e\u5177\u5907\u9ad8\u5b89\u5168\u3001\u9ad8\u6027\u80fd\u3001\u9ad8\u6269\u5c55\u7b49\u7279\u6027\u7684\u3001\u57fa\u4e8e\u5206\u5e03\u5f0f\u67b6\u6784\u7684\u5206\u5e03\u5f0f\u4e8b\u52a1\u578b\u6570\u636e\u5e93\u3002\u90e8\u7f72\u6570\u636e\u5e93\u96c6\u7fa4\u65f6\uff0c\u591a\u53f0\u670d\u52a1\u5668\u4f5c\u4e3a\u4e00\u4e2a\u6574\u4f53\u5bf9\u5916\u63d0\u4f9b\u6570\u636e\u670d\u52a1\u3002\u5728\u591a\u673a\u73af\u5883\u4e0b\uff0c\u4e3a\u4f7f\u6570\u636e\u5e93\u8fde\u63a5\u5747\u5300\u5206\u5e03\u4e8e\u5404\u53f0\u670d\u52a1\uff0c\u865a\u8c37 JDBC \u5728\u63a5\u53e3\u5c42\u5b9e\u73b0\u4e86\u57fa\u4e8e\u8f6f\u8d1f\u8f7d\u5747\u8861\u6280\u672f\u7684\u6570\u636e\u5e93\u8fde\u63a5\u5efa\u7acb\u65b9\u5f0f\u3002 \u865a\u8c37\u6570\u636e\u5e93\u8d1f\u8f7d\u5747\u8861\u5206\u914d\u6570\u636e\u5e93\u8fde\u63a5\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a\u987a\u5e8f\u5206\u914d\u3001\u968f\u673a\u5206\u914d\u3002\u901a\u8fc7\u5728\u6570\u636e\u5e93 URL \u8fde\u63a5\u4e32\u4e0a\u8bbe\u7f6e\u53c2\u6570 conn_type(conn_type:1, \u968f\u673a\u5206\u914d\uff1b2, \u987a\u5e8f\u5206\u914d) \u7c7b\u578b\uff0c\u5b9e\u73b0\u6570\u636e\u5e93\u8fde\u63a5\u5728\u591a\u96c6\u7fa4\u73af\u5883\u4e0b\u7684\u8d1f\u8f7d\u5747\u8861\u3002\u9ed8\u8ba4\u8d1f\u8f7d\u5747\u8861\u5206\u914d\u65b9\u5f0f\uff1a\u987a\u5e8f\u5206\u914d\u3002 \u865a\u8c37 JDBC \u63d0\u4f9b\u4e09\u79cd\u914d\u7f6e\u8d1f\u8f7d\u5747\u8861\u7684\u65b9\u5f0f\uff1a\u6570\u636e\u5e93 URL \u8fde\u63a5\u4e32\u914d\u7f6e\u3001\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u6027\u6587\u4ef6 Properties \u914d\u7f6e\u3001\u6570\u636e\u5e93\u8fde\u63a5 XML \u6587\u4ef6\u914d\u7f6e\u3002 1. URL \u8fde\u63a5\u4e32\u914d\u7f6e Class.forName(\"com.xugu.cloudjdbc.Driver\"); //URL\u8fde\u63a5\u4e32\u4e2d\u4f7f\u7528ips\u5c5e\u6027\u914d\u7f6e\u591aIP\u8d1f\u8f7d\u5747\u8861 Connection conn = DriverManager.getConnection(\"jdbc:xugu://192.168.0.201:5138/SYSTEM?user=SYSDBA&password=SYSDBA&conn_type=1&ips=192.168.0.205,192.168.0.204,192.168.1.206\") \u8fde\u63a5\u5c5e\u6027\u6587\u4ef6 Properties \u914d\u7f6e (Vector \u6216\u5b57\u7b26\u4e32\u6570\u7ec4) Properties info=new Properties(); Class.forName(\"com.xugu.cloudjdbc.Driver\"); //Vector\u7ed3\u6784\u5b58\u653e\u8d1f\u8f7d\u5747\u8861\u591aIP\u5730\u5740\u65b9\u5f0f Vector<String> ipsVector=new Vector<String>(); ipsVector.add(\"192.168.1.201\"); ipsVector.add(\"192.168.1.204\"); ipsVector.add(\"192.168.1.205\"); ipsVector.add(\"192.168.1.206\"); info.put(\"ips\", ipsVector); //\u6570\u7ec4\u5b58\u653e\u8d1f\u8f7d\u5747\u8861\u591aIP\u5730\u5740\u65b9\u5f0f String[] ips={\"192.168.1.205\",\"192.168.1.204\",\"192.168.1.206\"}; info.put(\"ips\", ips); Connection conn = DriverManager.getConnection(\"jdbc:xugu://192.168.1.201:5138/SYSTEM?user=SYSDBA&password=SYSDBA&conn_type=2\",info); \u8fde\u63a5\u5c5e\u6027 XML \u6587\u4ef6\u914d\u7f6e <?xml version=\"1.0\" encoding=\"utf-8\"?> <listeners> <listener> <ip>192.168.1.206</ip> </listener> <listener> <ip>192.168.1.204</ip> </listener> <listener> <ip>192.168.1.205</ip> </listener> </listeners> Class.forName(\"com.xugu.cloudjdbc.Driver\"); Connection conn = DriverManager.getConnection(\"jdbc:xugu:file://xuguClouldListener.xml:5138/SYSTEM?user=SYSDBA&password=SYSDBA&conn_type=1\");","title":"JDBC2"},{"location":"JDBC2/#jdbc","text":"Java \u6570\u636e\u5e93\u8fde\u63a5\uff08Java Database Connectivity\uff0c\u7b80\u79f0 JDBC\uff09\u662f Java \u8bed\u8a00\u4e2d\u7528\u6765\u89c4\u8303\u5ba2\u6237\u7aef\u7a0b\u5e8f\u5982\u4f55\u8bbf\u95ee\u6570\u636e\u5e93\u7684\u5e94\u7528\u7a0b\u5e8f\u63a5\u53e3\uff0c\u63d0\u4f9b\u4e86\u8bf8\u5982\u67e5\u8be2\u548c\u66f4\u65b0\u6570\u636e\u5e93\u4e2d\u6570\u636e\u7684\u65b9\u6cd5\uff0c\u53ef\u4ee5\u4e3a\u591a\u79cd\u5173\u7cfb\u6570\u636e\u5e93\u63d0\u4f9b\u7edf\u4e00\u8bbf\u95ee\u3002JDBC \u63d0\u4f9b\u4e86\u4e00\u79cd\u57fa\u51c6\uff0c\u901a\u8fc7\u6b64\u57fa\u51c6\u6570\u636e\u5e93\u5f00\u53d1\u4eba\u5458\u53ef\u6784\u5efa\u66f4\u9ad8\u7ea7\u7684\u5de5\u5177\u548c\u63a5\u53e3\uff0c\u4e5f\u53ef\u901a\u8fc7\u6b64\u57fa\u51c6\u7f16\u5199\u6570\u636e\u5e93\u5e94\u7528\u7a0b\u5e8f\u3002 \u865a\u8c37\u6570\u636e\u5e93\u7684 JDBC \u9a71\u52a8\u7a0b\u5e8f\uff08\u4ee5\u4e0b\u7b80\u79f0\uff1a\u865a\u8c37 JDBC\uff09\u5b9e\u73b0\u4e86 Java \u7a0b\u5e8f\u548c\u865a\u8c37\u6570\u636e\u5e93\u901a\u4fe1\uff0c\u652f\u6301 SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u7684\u8bbf\u95ee\uff0c\u540c\u65f6\u4e5f\u662f\u6784\u9020\u9ad8\u7ea7 API \u548c\u6570\u636e\u5e93\u5f00\u53d1\u5de5\u5177\u7684\u57fa\u7840\u3002 \u7528\u6237\u60f3\u8981\u5b9e\u73b0\u5bf9\u6570\u636e\u5e93\u7684\u8bbf\u95ee\uff0c\u4e00\u822c\u8981\u7ecf\u8fc7\u5982\u4e0b\u7684\u6b65\u9aa4\uff1a 1. \u901a\u8fc7\u9a71\u52a8\u5668\u7ba1\u7406\u5668\u83b7\u53d6\u8fde\u63a5\u63a5\u53e3\uff1b 2. \u83b7\u5f97 Statement \u6216 Statement \u5b50\u7c7b\uff1b 3. \u901a\u8fc7 Statement \u6267\u884c SQL \u547d\u4ee4\uff1b 4. \u5904\u7406\u6267\u884c\u7ed3\u679c\uff1b 5. \u5173\u95ed Statement\uff1b 6. \u5173\u95ed\u8fde\u63a5\u3002 JDBC \u7ed3\u6784\u56fe, \u5982\u56fe1.1\u6240\u793a\u3002 \u56fe1.1 JDBC\u7ed3\u6784\u56fe \u4f7f\u7528\u865a\u8c37 JDBC \u5b9e\u73b0\u5e94\u7528\u7a0b\u5e8f\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u4e4b\u95f4\u7684\u8fde\u63a5\u670d\u52a1\uff0c\u5e94\u7528\u7a0b\u5e8f\u6240\u5728\u8ba1\u7b97\u673a\u9700\u5df2\u5b89\u88c5 Java \u8fd0\u884c\u73af\u5883\uff08Java Runtime Environment, \u7b80\u79f0 JRE\uff09\u3002\u865a\u8c37 JDBC \u53c2\u7167 JDBC API \u5b9e\u73b0\uff0c\u652f\u6301 JDBC 3.0 \u529f\u80fd\uff0cJava \u5e94\u7528\u7a0b\u5e8f\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u4e4b\u95f4\u7684\u6240\u6709\u64cd\u4f5c\u5747\u9700\u901a\u8fc7\u865a\u8c37 JDBC \u6765\u5b8c\u6210\u3002 \u4f7f\u7528\u865a\u8c37 JDBC \u9700\u8981 JRE 1.6 \u7248\u6216\u66f4\u9ad8\u7248\u672c\u7684 Java \u8fd0\u884c\u65f6\u73af\u5883 (JRE)\u3002 {.is-info}","title":"\u4e00. \u865a\u8c37\u6570\u636e\u5e93\u7684JDBC\u9a71\u52a8\u7a0b\u5e8f\u6982\u8ff0"},{"location":"JDBC2/#jdbc_1","text":"JDBC 3.0 \u89c4\u8303\u7531 JDBC 1.0\u3001JDBC 2.0 \u884d\u751f\u800c\u6765\uff0c\u4e3b\u8981\u5305\u542b java.sql \u5305\u4ee5\u53ca javax.sql \u5305\uff0c\u6570\u636e\u5e93 JDBC \u9a71\u52a8\u5b9e\u73b0 JDBC 3.0 \u89c4\u8303\u6240\u5b9a\u4e49\u7684\u7279\u6027\u63a5\u53e3\uff0c\u5373\u53ef\u8fbe\u5230\u5bf9\u6807\u51c6 JDBC 3.0 \u89c4\u8303\u7684\u652f\u6301\u3002 \u865a\u8c37 JDBC \u57fa\u4e8e JDBC 3.0 \u89c4\u8303\u5b9e\u73b0\uff0c\u5b9e\u73b0\u63a5\u53e3\u7c7b\u6620\u5c04\uff0c\u5982\u88682.1\u6240\u793a\u3002 \u88682.1 \u865a\u8c37JDBC\u5b9e\u73b0\u63a5\u53e3\u7c7b | \u63a5\u53e3 | \u865a\u8c37JDBC\u5b9e\u73b0\u7c7b | | ---------------------------------- | ---------------------------------------- | | java.sql.Driver | com.xugu.cloudjdbc.Driver | | java.sql.Connection | com.xugu.cloudjdbc.Connection | | java.sql.Statement | com.xugu.cloudjdbc.Statement | | java.sql.PreparedStatement | com.xugu.cloudjdbc.PreparedStatement | | java.sql.CallableStatement | com.xugu.cloudjdbc.CallableStatement | | java.sql.ResultSet | com.xugu.cloudjdbc.ResultSet | | java.sql.ResultSetMetaData | com.xugu.cloudjdbc.ResultSetMetaData | | java.sql.DatabaseMetaData | com.xugu.cloudjdbc.DatabaseMetaData | | java.sql.PrameterMetaData | com.xugu.cloudjdbc.PrameterMetaData | | java.sql.Types | com.xugu.cloudjdbc.Types | | java.sql.Blob | com.xugu.cloudjdbc.Blob | | java.sql.Clob | com.xugu.cloudjdbc.Clob | | java.sql.Savepoint | com.xugu.cloudjdbc.Savepoint | | javax.sql.DataSource | com.xugu.pool.XgDataSource | | javax.sql.ConnectionPoolDataSource | com.xugu.pool.XgConnectionPoolDataSource | | javx.sql.PooledConnection | com.xugu.pool.XgPooledConnection | \u9664\u4e86\u4ee5\u4e0a\u6807\u51c6\u7c7b\u63a5\u53e3\u5916\uff0c\u865a\u8c37 JDBC \u8fd8\u6269\u5c55\u5b9e\u73b0\u4e86\u4ee5\u4e0b\u7c7b\uff1a - com.xugu.cloudjdbc.ClientInfo - com.xugu.cloudjdbc.OutParameter - com.xugu.cloudjdbc.Rowid - com.xugu.cloudjdbc.SQLXml - com.xugu.cloudjdbc.SSL - com.xugu.pool.StatementWrapper - com.xugu.pool.PreparedStatementWrapper","title":"\u4e8c. \u865a\u8c37\u6570\u636e\u5e93\u7684JDBC\u63a5\u53e3\u548c\u5bf9\u8c61\u7c7b"},{"location":"JDBC2/#_1","text":"","title":"\u4e09. \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b"},{"location":"JDBC2/#31","text":"\u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b\u3001\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u3001Java \u6570\u636e\u7c7b\u578b\u4e09\u8005\u6620\u5c04\u5173\u7cfb\uff0c\u5982\u88683.1\u6240\u793a\u3002 \u88683.1 \u6570\u636e\u7c7b\u578b\u6620\u5c04\u5173\u7cfb \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b \u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b Java \u6570\u636e\u7c7b\u578b BOOLEAN BOOLEAN boolean SMALLINT SMALLINT short TINYINT TINYINT byte INTEGER INTEGER int BIGINT BIGINT long FLOAT FLOAT float DOUBLE DOUBLE double NUMERIC NUMERIC BigDecimal DECIMAL BigDecimal CHAR CHAR String NCHAR NCHAR String VARCHAR VARCHAR String VARCHAR2 VARCHAR String NVARCHAR2 VARCHAR String BLOB BLOB Blob CLOB CLOB Clob NCLOB BINARY BINARY byte[] VARBINARY LONG VARBINARY DATE DATE Date TIME TIME Time TIMESTAMP TIMESTAMP Timestamp","title":"3.1 \u57fa\u672c\u6570\u636e\u7c7b\u578b"},{"location":"JDBC2/#32","text":"\u865a\u8c37 JDBC \u9664\u4e86\u5b9e\u73b0\u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b\uff0c\u8fd8\u6839\u636e\u865a\u8c37\u6570\u636e\u5e93\u81ea\u6709\u7c7b\u578b\u6269\u5c55\u4e86\u90e8\u5206\u6570\u636e\u7c7b\u578b\uff08\u88683.2\u6240\u793a\uff09\uff0c\u5305\u62ec\u4ee5\u4e0b\u6570\u636e\u7c7b\u578b\u3002 1. \u65f6\u95f4\u6570\u636e\u7c7b\u578b DATETIME\u2014\u2014\u2014 \u65e5\u671f\u65f6\u95f4\u7c7b\u578b DATETIME WITH TIME ZONE \u2014\u2014\u2014 \u5e26\u65f6\u533a\u7684\u65e5\u671f\u65f6\u95f4\u7c7b\u578b TIME WITH TIME ZONE \u2014\u2014\u2014 \u5e26\u65f6\u533a\u7684\u65f6\u95f4\u7c7b\u578b INTERVAL YEAR \u2014\u2014\u2014 \u5e74\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL MONTH \u2014\u2014\u2014 \u6708\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY\u2014\u2014\u2014 \u65e5\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL HOUR \u2014\u2014\u2014 \u5c0f\u65f6\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL MINUTE \u2014\u2014\u2014 \u5206\u949f\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL SECOND \u2014\u2014\u2014 \u79d2\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL YEAR TO MONTH \u2014\u2014\u2014 \u5e74\u5230\u6708\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY TO HOUR \u2014\u2014\u2014 \u65e5\u5230\u5c0f\u65f6\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY TO MINUTE \u2014\u2014\u2014 \u65e5\u5230\u5206\u949f\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY TO SECOND \u2014\u2014\u2014 \u65e5\u5230\u79d2\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL HOUR TO MINUTE \u2014\u2014\u2014 \u5c0f\u65f6\u5230\u5206\u949f\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL HOUR TO SECOND \u2014\u2014\u2014 \u5c0f\u65f6\u5230\u79d2\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL MINUTE TO SECOND \u2014\u2014\u2014 \u5206\u949f\u5230\u79d2\u7684\u65f6\u95f4\u95f4\u9694 2. \u6e38\u6807\u6570\u636e\u7c7b\u578b\uff08\u53ea\u5728\u5b58\u50a8\u8fc7\u7a0b\u3001\u51fd\u6570\u3001\u5305\u4e2d\u4f7f\u7528\uff09 CURSOR \u2014\u2014\u2014 \u6e38\u6807\u6570\u636e\u7c7b\u578b SYS_REFCURSOR \u2014\u2014\u2014 \u8fd4\u56de\u6e38\u6807\u6570\u636e\u7c7b\u578b 3. \u5176\u4ed6\u6570\u636e\u7c7b\u578b GUID \u2014\u2014\u2014 \u5168\u5c40\u552f\u4e00\u6807\u8bc6\u7b26 \u88683.2 \u6269\u5c55\u6570\u636e\u7c7b\u578b\u5bf9\u5e94\u8868 \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b \u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b Java \u6570\u636e\u7c7b\u578b DATETIME DATETIME Timestamp DATETIME WITH TIME ZONE DATETIME_TZ String TIME WITH TIME ZONE TIME_TZ String INTERVAL YEAR INTERVAL_Y String INTERVAL MONTH INTERVAL_M INTERVAL DAY INTERVAL_D INTERVAL HOUR INTERVAL_H INTERVAL MINUTE INTERVAL_MI INTERVAL SECOND INTERVAL_S String INTERVAL YEAR TO MONTH INTERVAL_Y2M INTERVAL DAY TO HOUR INTERVAL_D2H INTERVAL DAY TO MINUTE INTERVAL_D2M INTERVAL DAY TO SECOND INTERVAL_D2S INTERVAL HOUR TO MINUTE INTERVAL_H2M INTERVAL HOUR TO SECOND INTERVAL_H2S INTERVAL MINUTE TO SECOND INTERVAL_M2S CURSOR CURSOR \u65e0\u5bf9\u5e94\u7c7b\u578b SYS_REFCURSOR REFCUR GUID GUID String \u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528 ResultSet \u5bf9\u8c61\u6765\u5bf9\u5e94\u83b7\u53d6\u6e38\u6807\u6240\u8fd4\u56de\u6570\u636e\u3002 {.is-info}","title":"3.2 \u6269\u5c55\u6570\u636e\u7c7b\u578b"},{"location":"JDBC2/#33","text":"\u5728\u8c03\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u4e2d\u7684\u67d0\u4e9b\u65b9\u6cd5\u65f6\uff0c\u9700\u8fdb\u884c Java \u6570\u636e\u7c7b\u578b\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u7684\u8f6c\u6362\uff0c\u8fd9\u4e9b\u65b9\u6cd5\u5305\u62ec\uff1a - ResultSet \u7c7b get\\<Type> \u65b9\u6cd5\uff1b - ResultSet \u7c7b update\\<Type> \u65b9\u6cd5\uff1b - CallableStatement \u7c7b get\\<Type> \u65b9\u6cd5\uff1b - PreparedStatement \u7c7b set\\<Type> \u65b9\u6cd5\u3002 \u6570\u636e\u7c7b\u578b\u4e4b\u95f4\u7684\u8f6c\u6362\uff0c\u9700\u9075\u4ece Java \u6570\u636e\u7c7b\u578b\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u6620\u5c04\u5173\u7cfb\u89c4\u5219\uff0c\u5426\u5219\u53ef\u80fd\u8f6c\u6362\u5931\u8d25\u3002 1. com.xugu.cloudjdbc.ResultSet \u7c7b\u4e2d get\\<Type> \u65b9\u6cd5\u7684\u7c7b\u578b\u8f6c\u6362\uff0c\u5982\u88683.3\u6240\u793a\u3002 2. com.xugu.cloudjdbc.PreparedStatement \u7c7b\u4e2d set\\<Type> \u65b9\u6cd5\u7684\u7c7b\u578b\u8f6c\u6362\uff0c\u5982\u88683.4\u6240\u793a\u3002 X\uff08\u65e0\u4e22\u5931\u8f6c\u6362\uff09\uff1a\u6307\u4ee5\u957f\u7cbe\u5ea6\u7c7b\u578b\u7684 get\\<Type> \u65b9\u6cd5\u83b7\u53d6\u77ed\u7cbe\u5ea6\u6570\u636e\u7c7b\u578b\u5217\u503c\u65e0\u4e22\u5931\u3002 \u5982\uff1a\u4f7f\u7528 getInt() \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u4e3a smallint \u7684\u5217\u6570\u636e\uff0c\u83b7\u53d6\u6570\u636e\u5b8c\u6574\u3002 Z\uff08\u4f9d\u8d56\u8f6c\u6362\uff09\uff1a\u6307 get\\<Type> \u65b9\u6cd5\u4e2d\u7684 Type \u7c7b\u578b\u4e0e\u83b7\u53d6\u6570\u636e\u5e93\u4e2d\u5217\u7684\u6570\u636e\u7c7b\u578b\u4e0d\u4e00\u81f4\uff0c\u6b64\u65f6\u9700\u8981\u901a\u8fc7\u5176\u4ed6\u6570\u636e\u7c7b\u578b\u8f6c\u6362\u4e3a Type \u6570\u636e\u7c7b\u578b\uff0c\u6b64\u8f6c\u6362\u8fc7\u7a0b\u503c\u53ef\u80fd\u4e22\u5931\u90e8\u5206\u6570\u636e\u3002 \u5982\uff1a\u4f7f\u7528 getInt() \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u4e3a float \u7684\u5217\u6570\u636e\uff0c\u53ef\u83b7\u53d6 float \u5217\u6570\u636e\u7684\u6574\u6570\u503c\uff0c\u800c\u5c0f\u6570\u7cbe\u5ea6\u503c\u5c06\u4e22\u5931\u3002 Y\uff08\u76f4\u63a5\u8f6c\u6362\uff09\uff1a\u6307 get\\<Type> \u65b9\u6cd5\u4e2d\u7684 Type \u7c7b\u578b\u4e0e\u83b7\u53d6\u6570\u636e\u5e93\u4e2d\u5217\u7684\u6570\u636e\u7c7b\u578b\u4e00\u81f4\u3002 \u5982\uff1a\u4f7f\u7528 getInt() \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u4e3a integer \u7684\u5217\u6570\u636e\uff0c\u76f4\u63a5\u83b7\u53d6\u5b8c\u6574\u6570\u636e\u3002 {.is-info} P\uff08\u5141\u8bb8\u63d2\u5165\uff09\uff1a\u6307 set\\<Type> \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u5e93\u4e2d\u5217\u6570\u636e\u65f6\uff0c\u6570\u636e\u65e0\u635f\u5931\u5b58\u5165\u6570\u636e\u5e93\u4e2d\u3002 \u5982\uff1a\u4f7f\u7528 setInt() \u65b9\u6cd5\u8bbe\u7f6e\u5217\u6570\u636e\u7c7b\u578b\u4e3a bigint \u7684\u6570\u636e\u65f6\uff0c\u6570\u636e\u53ef\u6b63\u786e\u5b58\u5165\u3002 Z\uff08\u90e8\u5206\u63d2\u5165\uff09\uff1a\u6307 set\\<Type> \u65b9\u6cd5\u4e2d\u7684 Type \u7c7b\u578b\u548c\u6570\u636e\u5e93\u4e2d\u5217\u6570\u636e\u7c7b\u578b\u4e0d\u4e00\u81f4\uff0c\u6570\u636e\u4ec5\u80fd\u90e8\u5206\u6b63\u786e\u5b58\u5165\u3002 \u5982\uff1a\u4f7f\u7528 setInt() \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u5e93\u5217\u7c7b\u578b\u4e3a tinyint \u7684\u6570\u636e\uff0c\u56e0 tinyint \u8868\u793a\u8303\u56f4\u4e3a-128\uff5e127 \u7684\u6574\u6570\u503c\uff0c\u6545\u800c tinyint\u8868\u793a\u8303\u56f4\u5185\u6570\u636e\u53ef\u6b63\u786e\u5b58\u5165\uff0c\u8303\u56f4\u5916\u6570\u636e\u5c06\u63d2\u5165\u5931\u8d25\u3002 {.is-info}","title":"3.3 \u6570\u636e\u7c7b\u578b\u8f6c\u6362"},{"location":"JDBC2/#_2","text":"","title":"\u56db. \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5"},{"location":"JDBC2/#41-jdbc","text":"\u901a\u8fc7\u865a\u8c37 JDBC \u9a71\u52a8\u8bbf\u95ee\u865a\u8c37\u6570\u636e\u5e93\uff0c\u9996\u5148\u5e94\u4fdd\u8bc1\u5e94\u7528\u7a0b\u5e8f\u6b63\u786e\u5f15\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u5305 (cloudjdbc-*.*.*.jar)\uff0c\u5373\u5c06\u9a71\u52a8\u5305\u62f7\u8d1d\u81f3\u5e94\u7528\u7a0b\u5e8f\u5e76\u6dfb\u52a0\u5f15\u7528\u3002","title":"4.1 \u90e8\u7f72JDBC\u9a71\u52a8\u7a0b\u5e8f"},{"location":"JDBC2/#42-jdbc","text":"\u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u8fdb\u884c\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u8c03\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u7a0b\u5e8f\uff0c\u9996\u5148\u8981\u5c06\u865a\u8c37 JDBC \u9a71\u52a8\u52a0\u8f7d\u5230\u7cfb\u7edf\u5185\u5b58\u4e2d\uff0c\u7136\u540e\u4f9b\u7cfb\u7edf\u4f7f\u7528\u3002\u865a\u8c37 JDBC \u7684\u9a71\u52a8\u5b9e\u73b0\u7c7b\u4e3acom.xugu.cloudjdbc.Driver\uff0c\u4ee5\u4e0b\u662f\u5c06\u865a\u8c37 JDBC \u9a71\u52a8\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\u7684\u4ee3\u7801\uff1a //\u663e\u793a\u6ce8\u518c DriverManager.registerDriver(new com.xugu.cloudjdbc.Driver())\u037e //\u9690\u5f0f\u6ce8\u518c Class.forName(\u201ccom.xugu.cloudjdbc.Driver\u201d)\u037e \u9690\u5f0f\u6ce8\u518c\u5373\u901a\u8fc7 Class.forName() \u5c06\u5bf9\u5e94\u7684\u9a71\u52a8\u7c7b\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\uff0c\u5c06\u6267\u884c\u5185\u5b58\u4e2d\u7684 static \u9759\u6001\u4ee3\u7801\u6bb5\uff0c\u6b64\u4ee3\u7801\u6bb5\u4f1a\u521b\u5efa\u4e00\u4e2a\u865a\u8c37 JDBC \u9a71\u52a8\u7684\u5b9e\u4f8b\uff0c\u5e76\u653e\u5165 DriverManager \u4e2d\uff0c\u4f9b DriverManager \u4f7f\u7528\u3002 {.is-info}","title":"4.2 \u52a0\u8f7dJDBC\u9a71\u52a8\u7a0b\u5e8f"},{"location":"JDBC2/#43","text":"\u865a\u8c37 JDBC \u9a71\u52a8\u8fde\u63a5 URL \u4e32\u683c\u5f0f\uff1a jdbc:xugu://serverIP:portNumber/databaseName[?property=value[&property=value]] \u865a\u8c37 JDBC \u9a71\u52a8\u8fde\u63a5 URL \u4e32\u683c\u5f0f\uff1a 1). jdbc:xugu:// \uff1a\uff08\u5fc5\u9700\uff09\u865a\u8c37\u6570\u636e\u5e93\u7279\u5b9a\u534f\u8bae\u3002 2). serverIP \uff1a\uff08\u5fc5\u9700\uff09\u865a\u8c37\u6570\u636e\u5e93\u6240\u5728\u670d\u52a1\u5668\u7684 IP \u5730\u5740\u3002 3). portNumber\uff1a\uff08\u5fc5\u9700\uff09\u662f\u865a\u8c37\u6570\u636e\u5e93\u670d\u52a1 TCP \u8bbf\u95ee\u7aef\u53e3\uff0c\u9ed8\u8ba4 5138\u3002 4). databaseName\uff1a\uff08\u5fc5\u9700\uff09\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u5e93\u540d\u79f0\u3002 5). property\uff1a\uff08\u53ef\u9009\uff09\u865a\u8c37\u6570\u636e\u5e93\u7684 URL \u8fde\u63a5\u5c5e\u6027\u3002\u591a\u4e2a\u8fde\u63a5\u5c5e\u6027\u4e4b\u95f4\u4f7f\u7528\u201c&\u201d\u5206\u9694\uff0c\u4e0d\u53ef\u91cd\u590d\u3002 \u865a\u8c37 JDBC \u9a71\u52a8 URL \u4e32\u793a\u4f8b\u5982\u4e0b\uff1a String url = jdbc:xugu://localhost:5138/System?user=GUEST&password=GUEST\u037e property \u8bbe\u7f6e\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u6027\uff0c\u5e38\u7528\u8fde\u63a5\u5c5e\u6027\u89c1\u88684.1\u3002 \u88684.1 \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u6027 table th:first-of-type { width: 20%; } table th:nth-of-type(2) { width: 10%; } table th:nth-of-type(3) { width: 10%; } table th:nth-of-type(4) { width: 50%; } \u5c5e\u6027\u540d\u79f0 \u5fc5\u9009\u9879 \u53d6\u503c \u8bf4\u660e database \u221a \u5b57\u7b26\u4e32 \u6570\u636e\u5e93\u540d\u79f0 user \u221a \u5b57\u7b26\u4e32 \u7528\u6237\u540d\u79f0 password \u221a \u5b57\u7b26\u4e32 \u7528\u6237\u5bc6\u7801 encryptor \u00d7 \u5b57\u7b26\u4e32 \u7528\u4e8e\u542f\u52a8\u52a0\u5bc6\u6570\u636e\u5e93\uff0c\u82e5\u5e93\u672a\u52a0\u5bc6\uff0c\u5219\u53ef\u4e0d\u8981\uff0c\u4f46\u5e26\u4e0a\u6b64\u53c2\u6570\u4e0d\u4f1a\u5f71\u54cd\u8fde\u63a5 char_set \u00d7 \u5b57\u7b26\u4e32 \u8fde\u63a5\u5b57\u7b26\u96c6\u3002'GB2312'\u3001'GBK'\u3001'UTF8' \u7b49\uff0c\u9ed8\u8ba4\uff1aGBK time_zone \u00d7 \u5b57\u7b26\u4e32 \u5ba2\u6237\u7aef\u65f6\u533a\u3002\u9ed8\u8ba4\uff1a\u865a\u8c37\u6570\u636e\u5e93\u914d\u7f6e\u53c2\u6570 def_timezone \u6240\u8bbe\u7f6e\u65f6\u533a\uff08\u53ea\u5bf9\u7cfb\u7edf\u65f6\u95f4\u51fd\u6570\u751f\u6548\uff09 iso_level \u00d7 \u5b57\u7b26\u4e32 'READ COMMITED'\uff1a\u8bfb\u5df2\u63d0\u4ea4\uff1b 'REPEATIABLE READ'\uff1a\u53ef\u91cd\u590d\u8bfb\uff1b'SERIALIZABLE'\uff1a\u5e8f\u5217\u5316 lock_time \u00d7 \u6570\u503c \u5355\u4f4d\uff1a\u6beb\u79d2\uff0c\u9ed8\u8ba4\u503c\uff1a0\uff0c\u8868\u793a\u8fde\u63a5\u4e2d\u7684\u4e8b\u52a1\u9501\u5f81\u7528\u65f6\uff0c\u6700\u5927\u7b49\u5019\u65f6\u95f4\uff0c\u82e5\u5728\u8bbe\u7f6e\u65f6\u95f4\u5185\u52a0\u9501\u5931\u8d25\uff0c\u56de\u6eda\u4e8b\u52a1\u5e76\u62a5\u9519 lob_ret \u00d7 \u5b57\u7b26\u4e32 \u5927\u5bf9\u8c61\uff08Blob\u3001Clob\uff09\u6570\u636e\u8fd4\u56de\u65b9\u5f0f\u3002\u5c5e\u6027\u4e3a descriptor \u65f6\uff0c\u4ee5\u63cf\u8ff0\u7b26\u65b9\u5f0f\u8fd4\u56de\uff1b\u5176\u4ed6\u4ee5\u6570\u636e\u6d41\u65b9\u5f0f\u8fd4\u56de\u3002\u9ed8\u8ba4\uff1a\u4ee5\u6570\u636e\u6d41\u65b9\u5f0f\u8fd4\u56de return_rowid \u00d7 \u5e03\u5c14\u503c \u662f\u5426\u8fd4\u56de\u8bb0\u5f55 rowid \u503c\u3002\u5c5e\u6027\u4e3a TRUE \u65f6\uff0c\u8fd4\u56de rowid\uff1b\u5176\u4ed6\u8fd4\u56de FALSE\u3002\u9ed8\u8ba4\uff1aFALSE auto_commit \u00d7 on/off \u4e8b\u52a1\u662f\u5426\u81ea\u52a8\u63d0\u4ea4\u3002\u5c5e\u6027\u4e3a ON \u65f6\uff0c\u8fde\u63a5\u81ea\u52a8\u63d0\u4ea4\uff1b\u5c5e\u6027\u4e3a OFF\u65f6\uff0c\u8fde\u63a5\u975e\u81ea\u52a8\u63d0\u4ea4\u3002\u9ed8\u8ba4\uff1aON conn_type \u00d7 \u6570\u503c \u8d1f\u8f7d\u5747\u8861\u5206\u914d\u65b9\u5f0f\u3002\u5c5e\u6027\u4e3a 1 \u65f6\uff0c\u968f\u673a\u5206\u914d\uff1b\u5c5e\u6027\u4e3a 2 \u65f6\uff0c\u987a\u5e8f\u5206\u914d\u3002\u9ed8\u8ba4\uff1a2 ips \u00d7 \u5b57\u7b26\u4e32 \u8d1f\u8f7d\u5747\u8861\u8fde\u63a5 IP \u5730\u5740\uff0c\u591a\u4e2a IP \u5730\u5740\u4ee5\u9017\u53f7\u5206\u9694\uff08\u8be6\u7ec6\u89c1\u8d1f\u8f7d\u5747\u8861\uff09 CompatibleOracle \u00d7 \u5e03\u5c14\u503c \u517c\u5bb9 Oracle \u9009\u9879\u3002\u5c5e\u6027\u4e3a true\uff0c\u517c\u5bb9 Oracle\u037e \u5c5e\u6027\u4e3a FALSE\uff0c\u865a\u8c37 JDBC \u81ea\u6709\u5b9e\u73b0 recv_mode \u00d7 \u6570\u503c \u63a5\u6536\u6a21\u5f0f\u9009\u9879\u3002\u5c5e\u6027\u503c\u4e3a 0 \u65f6\uff0c\u672c\u5730\u5168\u63a5\u6536\u6a21\u5f0f\uff1b\u5c5e\u6027\u503c\u4e3a 1 \u65f6\uff0c\u7f51\u7edc\u63a5\u6536\u6a21\u5f0f\uff1b\u5c5e\u6027\u503c\u4e3a 2 \u65f6\uff0c\u670d\u52a1\u5668\u7aef\u6e38\u6807\u63a5\u6536\u6a21\u5f0f\u3002\u9ed8\u8ba4\uff1a0 emptyStringAsNull \u00d7 \u5e03\u5c14\u503c \u7a7a\u5b57\u4e32\u5904\u7406\u3002\u5c5e\u6027\u4e3a FALSE \u65f6\uff0c\u7a7a\u5b57\u7b26\u4e32\u8ba4\u5b9a\u4e3a NULL\uff1b\u5c5e\u6027\u4e3a TRUE \u65f6\uff0c\u7a7a\u5b57\u7b26\u4e32\u4fdd\u7559\u3002\u9ed8\u8ba4\uff1a\u7a7a\u5b57\u4e32\u4fdd\u7559 xgversion \u00d7 201/301 \u5ba2\u6237\u7aef\u534f\u8bae\u7248\u672c\uff0c\u865a\u8c37\u6570\u636e\u5e93V12\u7248\u672c\u5347\u7ea7\u652f\u6301301\u534f\u8bae\uff0c\u540c\u65f6\u517c\u5bb9201\u534f\u8bae SSL \u00d7 SSL \u8fde\u63a5\u52a0\u5bc6\u53c2\u6570\u3002\u5c5e\u6027\u503c\u3010SSL\uff1a\u542f\u7528SSL\u52a0\u5bc6\u4f20\u8f93\uff1bNSSL\uff1a\u7981\u7528SSL\u52a0\u5bc6\u4f20\u8f93\u3011 slowsqltime \u00d7 \u6570\u503c \u8bbe\u7f6e\u6162SQL\u6267\u884c\u65f6\u95f4\u3002SQL\u8bed\u53e5\u6267\u884c\u65f6\u95f4\u8d85\u8fc7\u8be5\u6570\u503c\uff0c\u65e5\u5fd7\u5219\u4f1a\u8f93\u51fa\u6267\u884cSQL batch_mode \u00d7 \u5e03\u5c14\u503c PreparedStatement\u662f\u5426\u4f7f\u7528\u6279\u91cf\u5904\u7406\u3002\u5c5e\u6027\u4e3a TRUE \u65f6\uff0cexecuteBatch\u91c7\u7528\u6279\u91cf\u6a21\u578b\uff1bFALSE\u5219\u91c7\u7528\u5355\u6761\u5904\u7406\u6a21\u578b\u3002\u9ed8\u8ba4\uff1aFALSE \u8fde\u63a5\u53c2\u6570\u4f7f\u7528SSL\u5c5e\u6027\u65f6\uff0c\u4f9d\u8d56\u7a0b\u5e8f\u5305\u4e2d\u63d0\u4f9b\u7684\u52a8\u6001\u94fe\u63a5\u5e93\uff0c\u4f7f\u7528\u524d\u9700\u5c06\u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u5230\u64cd\u4f5c\u7cfb\u7edf\u6307\u5b9a\u4f4d\u7f6e\u65b9\u53ef\u6b63\u5e38\u4f7f\u7528SSL\u52a0\u5bc6\u529f\u80fd\u3002 Windows 32\u4f4d\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u7528SSL\u5c5e\u6027\u524d\uff0c\u9700\u5c06\u7a0b\u5e8f\u5305 ssl/win32 \u4e0b xgssl.dll \u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u62f7\u8d1d\u5230\u7cfb\u7edf\u76ee\u5f55 C:/windows/system32 \u76ee\u5f55\u4f4d\u7f6e\u3002 Windows 64\u4f4d\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u7528SSL\u5c5e\u6027\u524d\uff0c\u9700\u5c06\u7a0b\u5e8f\u5305 ssl/win64 \u4e0b xgssl.dll \u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u62f7\u8d1d\u5230\u7cfb\u7edf\u76ee\u5f55 C:/windows/system32 \u76ee\u5f55\u4e0b\u3002 Linux X64\u4f4d\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u7528SSL\u5c5e\u6027\u524d\uff0c\u9700\u5c06\u7a0b\u5e8f\u5305 ssl/linux64 \u4e0b libxgssl.so \u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u62f7\u8d1d\u5230\u7cfb\u7edf\u76ee\u5f55 /usr/lib\u6216\u8005/usr/lib4 \u76ee\u5f55\u4e0b\u3002 \u865a\u8c37 JDBC \u8bbe\u7f6e\u8fde\u63a5\u5c5e\u6027\u793a\u4f8b\u5982\u4e0b (\u7248\u672c\u53f7\u3001\u5927\u5bf9\u8c61\u63cf\u8ff0\u7b26\u3001\u65f6\u533a\u3001\u5173\u95ed\u8fde\u63a5\u81ea\u52a8\u63d0\u4ea4)\uff1a String url=jdbc:xugu://localhost:5138/System?user=GUEST&password=GUEST&version=110&auto_commit=false&lob_ret=descriptor&time_zone=GMT-8:00\u037e","title":"4.3 \u8fde\u63a5\u5b57\u4e32\u53ca\u53c2\u6570\u8bbe\u7f6e"},{"location":"JDBC2/#44","text":"\u5728\u5e94\u7528\u7a0b\u5e8f\u5c06\u865a\u8c37 JDBC \u9a71\u52a8\u52a0\u8f7d\u5230\u7cfb\u7edf\u5185\u5b58\u4e2d\u540e\uff0c\u53ef\u901a\u8fc7 DriverManager \u7c7b\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u65b9\u6cd5\u5982\u4e0b\uff1a DriverManager.getConnection(String url)\u037e DriverManager.getConnection(String url,Properties)\u037e DriverManager.getConnection(String url,String user,String password)\u037e","title":"4.4 \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5"},{"location":"JDBC2/#_3","text":"\u901a\u8fc7 DriverManager \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u4ee5\u5916\uff0c\u8fd8\u53ef\u4ee5\u4f7f\u7528\u6570\u636e\u6e90\u6216\u8fde\u63a5\u6c60\u65b9\u5f0f\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u3002\u901a\u8fc7\u6570\u636e\u6e90\u65b9\u5f0f\u6216\u8fde\u63a5\u6c60\u65b9\u5f0f\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u6709\u4ee5\u4e0b\u4f18\u70b9\uff1a - \u8d44\u6e90\u91cd\u7528 \u7531\u4e8e\u6570\u636e\u5e93\u8fde\u63a5\u5f97\u5230\u91cd\u7528\uff0c\u907f\u514d\u4e86\u9891\u7e41\u521b\u5efa\u3001\u91ca\u653e\u8fde\u63a5\u5f15\u8d77\u7684\u5927\u91cf\u6027\u80fd\u5f00\u9500\u3002\u5728\u51cf\u5c11\u7cfb\u7edf\u6d88\u8017\u7684\u57fa\u7840\u4e0a\uff0c\u53e6\u4e00\u65b9\u9762\u4e5f\u589e\u8fdb\u4e86\u7cfb\u7edf\u8fd0\u884c\u73af\u5883\u7684\u5e73\u7a33\u6027\uff08\u51cf\u5c11\u5185\u5b58\u788e\u7247\u4ee5\u53ca\u6570\u636e\u5e93\u4e34\u65f6\u8fdb\u7a0b/\u7ebf\u7a0b\u7684\u6570\u91cf\uff09\u3002 - \u66f4\u5feb\u7684\u7cfb\u7edf\u54cd\u5e94 \u6570\u636e\u5e93\u8fde\u63a5\u6c60\u5728\u521d\u59cb\u5316\u8fc7\u7a0b\u4e2d\uff0c\u5f80\u5f80\u5df2\u7ecf\u521b\u5efa\u4e86\u82e5\u5e72\u6570\u636e\u5e93\u8fde\u63a5\u7f6e\u4e8e\u6c60\u4e2d\u5907\u7528\u3002\u6b64\u65f6\u8fde\u63a5\u7684\u521d\u59cb\u5316\u5de5\u4f5c\u5747\u5df2\u5b8c\u6210\u3002\u5bf9\u4e8e\u4e1a\u52a1\u8bf7\u6c42\u5904\u7406\u800c\u8a00\uff0c\u76f4\u63a5\u5229\u7528\u73b0\u6709\u53ef\u7528\u8fde\u63a5\uff0c\u907f\u514d\u4e86\u6570\u636e\u5e93\u8fde\u63a5\u521d\u59cb\u5316\u548c\u91ca\u653e\u8fc7\u7a0b\u7684\u65f6\u95f4\u5f00\u9500\uff0c\u4ece\u800c\u7f29\u51cf\u4e86\u7cfb\u7edf\u6574\u4f53\u54cd\u5e94\u65f6\u95f4\u3002 - \u65b0\u7684\u8d44\u6e90\u5206\u914d\u624b\u6bb5 \u5bf9\u4e8e\u591a\u5e94\u7528\u5171\u4eab\u540c\u4e00\u6570\u636e\u5e93\u7684\u7cfb\u7edf\u800c\u8a00\uff0c\u53ef\u5728\u5e94\u7528\u5c42\u901a\u8fc7\u6570\u636e\u5e93\u8fde\u63a5\u7684\u914d\u7f6e\uff0c\u9650\u5236\u5355\u4e00\u5e94\u7528\u7533\u8bf7\u6570\u636e\u5e93\u8fde\u63a5\u6570\uff0c\u4ece\u800c\u907f\u514d\u5355\u4e00\u5e94\u7528\u72ec\u5360\u6240\u6709\u6570\u636e\u5e93\u8d44\u6e90\u3002 \u865a\u8c37 JDBC \u4e2d\u6570\u636e\u6e90\u5b9e\u73b0\u7c7b\u4e3a com.xugu.pool.XgDataSource\uff0c\u8fde\u63a5\u6c60\u5b9e\u73b0\u7c7b\u4e3acom.xugu.pool \u5305\u4e2d\u7684 XgDataSource\u3001XgPooledConnection\u3001XgConnectionPoolDataSource\u3001XgConnectionEventListener\u3001XgConnectionEvent\u3002","title":"\u4e94. \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u6e90\u548c\u8fde\u63a5\u6c60"},{"location":"JDBC2/#51","text":"XgDataSource \u63d0\u4f9b set \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u6e90\u8fde\u63a5\u5c5e\u6027\uff1a \u793a\u4f8b\uff1a\u901a\u8fc7 XgDataSource \u4e0e\u865a\u8c37\u6570\u636e\u5e93\u5efa\u7acb\u8fde\u63a5 com.xugu.pool.XgDataSource ds = new com.xugu.pool.XgDataSource()\u037e ds.setUrl(\"jdbc:xugu://127.0.0.1:5138/db\")\u037e ds.setUser(\"SYSDBA\")\u037e ds.setPassword(\"SYSDBA\")\u037e Properties pro = new Properties()\u037e pro.setProperty(\"return_rowid\", \"true\")\u037e pro.setProperty(\"auto_commit\", \"off\")\u037e ds.setPro(pro)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u767b\u5f55\u4e32\u3002url\u4e3a\u6570\u636e\u5e93\u767b\u5f55\u4e32 setUrl(String url)\uff1b //\u6307\u5b9a\u6570\u636e\u5e93\u670d\u52a1\u5668\u3002host\u4e3a\u670d\u52a1\u5668\u5730\u5740 setHostName(String host)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u540d\u3002dbName\u4e3a\u6570\u636e\u5e93\u540d setDatabaseName(String dbName)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u7aef\u53e3\u53f7\u3002port\u4e3a\u6570\u636e\u5e93\u7aef\u53e3\u53f7 setPort(int port)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u7528\u6237\u3002userName\u4e3a\u6570\u636e\u5e93\u767b\u5f55\u7528\u6237\u540d setUser(String userName)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u767b\u5f55\u5bc6\u7801\u3002passWord\u4e3a\u6570\u636e\u5e93\u767b\u5f55\u5bc6\u7801 setPassword(Stirng passWord)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u767b\u5f55\u53c2\u6570\u3002ds_pro\u4e3a\u6570\u636e\u5e93\u8fde\u63a5\u53c2\u6570 setPro(Properties ds_pro)\uff1b // \u901a\u8fc7\u6570\u636e\u6e90\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5 Connection conn = ds.getConnection()\u037e \u5728 com.xugu.pool.XgDataSource \u7c7b\u4e2d\u901a\u8fc7 setXX() \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u6e90\u7684\u8fde\u63a5\u5c5e\u6027\uff0c\u82e5\u672a\u6307\u5b9a\u5219\u4f7f\u7528\u9ed8\u8ba4\u5c5e\u6027\u503c\uff1a\u6570\u636e\u5e93\u670d\u52a1\u5668\u5730\u5740\u9ed8\u8ba4\u4e3a\u201clocalhost\u201d \uff0c\u8fde\u63a5\u6570\u636e\u5e93\u9ed8\u8ba4\u4e3a\u201cSYSTEM\u201d \uff0c\u8bbf\u95ee\u7aef\u53e3\u53f7\u9ed8\u8ba4\u4e3a\u201c5138\u201d \uff0c\u8bbf\u95ee\u7528\u6237\u540d\u9ed8\u8ba4\u4e3a\u201cGUEST\u201d \uff0c\u7528\u6237\u5bc6\u7801\u9ed8\u8ba4\u4e3a\u201cGUEST\u201d \u3002URL \u9ed8\u8ba4\u8fde\u63a5\u4e32\u4e3a\u201cjdbc:xugu://127.0.0.1:5138/SYSTEM?user=GUEST&password=GUEST&version=110\u201d\u3002\u6570\u636e\u6e90\u5efa\u7acb\u540e\uff0c\u53ef\u901a\u8fc7\u8c03\u7528 XgDataSource \u7c7b\u4e2d\u7684 getConnection() \u548c getConnection(String username,String password) \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u3002","title":"5.1 \u4f7f\u7528\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u6e90\u521b\u5efa\u8fde\u63a5"},{"location":"JDBC2/#52","text":"\u8fde\u63a5\u6c60\u6280\u672f\u7684\u6838\u5fc3\u601d\u60f3\u662f\uff1a\u8fde\u63a5\u590d\u7528\uff0c\u901a\u8fc7\u5efa\u7acb\u4e00\u4e2a\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u4ee5\u53ca\u4e00\u5957\u8fde\u63a5\u4f7f\u7528\u3001\u5206\u914d\u3001\u7ba1\u7406\u7b56\u7565\uff0c\u8be5\u8fde\u63a5\u6c60\u4e2d\u7684\u8fde\u63a5\u53ef\u4ee5\u5f97\u5230\u9ad8\u6548\u3001\u5b89\u5168\u7684\u590d\u7528\uff0c\u907f\u514d\u4e86\u6570\u636e\u5e93\u8fde\u63a5\u9891\u7e41\u5efa\u7acb\u3001\u5173\u95ed\u7684\u5f00\u9500\u3002 \u865a\u8c37 JDBC \u8fde\u63a5\u6c60\u5b9e\u73b0\u7c7b\u5bf9\u865a\u8c37\u6570\u636e\u5e93\u539f\u59cb\u8fde\u63a5\u8fdb\u884c\u4e86\u5c01\u88c5\uff0c\u4ece\u800c\u65b9\u4fbf\u4e86\u6570\u636e\u5e93\u5e94\u7528\u5bf9\u4e8e\u8fde\u63a5\u7684\u4f7f\u7528\uff08\u7279\u522b\u662f\u5bf9\u4e8e\u4e8b\u52a1\u5904\u7406\uff09\uff0c\u63d0\u9ad8\u4e86\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u6548\u7387\uff0c\u4e5f\u6b63\u662f\u56e0\u4e3a\u8fd9\u4e2a\u5c01\u88c5\u5c42\u7684\u5b58\u5728\uff0c\u9694\u79bb\u4e86\u5e94\u7528\u7684\u672c\u8eab\u7684\u5904\u7406\u903b\u8f91\u548c\u5177\u4f53\u6570\u636e\u5e93\u8bbf\u95ee\u903b\u8f91\uff0c\u4f7f\u5e94\u7528\u672c\u8eab\u7684\u590d\u7528\u6210\u4e3a\u53ef\u80fd\u3002\u8fde\u63a5\u6c60\u4e3b\u8981\u7531\u4e09\u90e8\u5206\u7ec4\u6210\uff1a\u8fde\u63a5\u6c60\u7684\u5efa\u7acb\u3001\u8fde\u63a5\u6c60\u4e2d\u8fde\u63a5\u7684\u4f7f\u7528\u7ba1\u7406\u3001\u8fde\u63a5\u6c60\u7684\u5173\u95ed\u3002 \u865a\u8c37 JDBC \u8fde\u63a5\u6c60\u7684\u57fa\u672c\u601d\u60f3\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u5efa\u7acb\u4e00\u4e2a\u201c\u7f13\u51b2\u6c60\u201d\u3002\u9884\u5148\u5728\u201c\u7f13\u51b2\u6c60\u201d\u4e2d\u653e\u5165\u4e00\u5b9a\u6570\u91cf\u7684\u8fde\u63a5\uff0c\u5f53\u9700\u8981\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65f6\uff0c\u53ea\u9700\u4ece\u201c\u7f13\u51b2\u6c60\u201d\u4e2d\u53d6\u51fa\u4e00\u4e2a\uff0c\u4f7f\u7528\u5b8c\u6bd5\u4e4b\u540e\u518d\u653e\u56de\u53bb\u3002\u901a\u8fc7\u8bbe\u5b9a\u8fde\u63a5\u6c60\u6700\u5927\u8fde\u63a5\u6570\u6765\u9632\u6b62\u7cfb\u7edf\u65e0\u5c3d\u7684\u4e0e\u6570\u636e\u5e93\u8fde\u63a5\u3002\u4ea6\u53ef\u901a\u8fc7\u8fde\u63a5\u6c60\u7684\u7ba1\u7406\u673a\u5236\u76d1\u89c6\u6570\u636e\u5e93\u7684\u8fde\u63a5\u6570\u91cf\u3001\u4f7f\u7528\u60c5\u51b5\uff0c\u4e3a\u7cfb\u7edf\u5f00\u53d1\u3001\u6d4b\u8bd5\u53ca\u6027\u80fd\u8c03\u6574\u63d0\u4f9b\u4f9d\u636e\u3002 \u5f53\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u5b8c\u6570\u636e\u5e93\u8fde\u63a5\u8c03\u7528\u8fde\u63a5\u5173\u95ed\u65b9\u6cd5\u65f6\uff0c\u8be5\u8fde\u63a5\u5e76\u672a\u9500\u6bc1\uff0c\u800c\u662f\u88ab\u5f52\u8fd8\u7ed9\u8fde\u63a5\u6c60\u7b49\u5f85\u4e0b\u6b21\u7ee7\u7eed\u8c03\u7528\u3002 {.is-info} \u865a\u8c37 JDBC \u5b9e\u73b0\u8fde\u63a5\u6c60\u670d\u52a1\u6240\u63d0\u4f9b\u7684\u63a5\u53e3\u7c7b\u5982\u4e0b\uff1a - XgDataSource \u5b9e\u73b0 javax.sql.DataSource \u63a5\u53e3\uff1b - XgPooledConnection \u5b9e\u73b0 javax.sql.PooledConnection \u63a5\u53e3\uff1b - XgConnectionPoolDataSource \u5b9e\u73b0 javax.sql.ConnectionPoolDataSource \u63a5\u53e3\uff1b - XgConnectionEventListener \u5b9e\u73b0 javax.sql.ConnectionEventListener \u63a5\u53e3\uff1b - XgConnectionEvent \u7ee7\u627f\u81ea javax.sql.ConnectionEvent \u7c7b\u3002 \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u4e2d\u7684\u8fde\u63a5\u5747\u662f\u901a\u8fc7\u6570\u636e\u6e90\u5efa\u7acb\u7684\uff0c\u6545\u800c XgConnectionPoolDataSource \u7ee7\u627f\u4e86 com.xugu.pool.XgDataSource \u7c7b\u3002\u7528\u6237\u4ea6\u53ef\u901a\u8fc7 XgConnectionPoolDataSource \u5bf9\u8c61\u8bbe\u7f6e\u6570\u636e\u6e90\u5c5e\u6027\u548c\u8fde\u63a5\u6c60\u5c5e\u6027\uff1a //\u6700\u5c0f\u8fde\u63a5\u6570 setMinIdle(int min) //\u6700\u5927\u8fde\u63a5\u6570 setMaxActive(int max) //\u767b\u5f55\u7a7a\u95f2\u65f6\u95f4 setLoginTimeout(int time) //\u6700\u5927\u7b49\u5f85\u8fde\u63a5\u8d85\u65f6 setMaxWaitTime(long waitTime) \u5176\u4e2d\uff1asetLoginTimeout() \u548c setMaxWaitTime() \u65b9\u6cd5\u4e2d\u53c2\u6570\u5355\u4f4d\u4e3a\u6beb\u79d2\uff0c\u5176\u4ed6\u65b9\u6cd5\u4e2d\u53c2\u6570\u5355\u4f4d\u4e3a\u79d2\u3002 \u793a\u4f8b\uff1a\u521b\u5efa\u4e00\u4e2a\u865a\u8c37 JDBC \u8fde\u63a5\u6c60\uff0c\u5e76\u901a\u8fc7\u8fde\u63a5\u6c60\u83b7\u53d6\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u3002 XgConnectionPoolDataSource CPDSource = new XgConnectionPoolDataSource()\u037e CPDSource.setHostName(\u201clocalhost\u201d)\u037e CPDSource.setPort(5138)\u037e CPDSource.setDatabaseName(\u201cxuguNew\u201d)\u037e CPDSource.setUser(\u201cSYSDBA\u201d)\u037e CPDSource.setPassword(\u201cSYSDBA\u201d)\u037e CPDSource.setUrl(\"jdbc:xugu://localhost:5138/xuguNew)\u037e CPDSource.setMaxActive(50)\u037e CPDSource.setMinIdle(5)\u037e CPDSource.setLoginTimeout(3000)\u037e CPDSource.setMaxWaitTime(3000)\u037e XgPooledConnection Pconn = (XgPooledConnection)CPDSource.getPooledConnection()\u037e Connection conn = Pconn.getConnection()\u037e","title":"5.2 \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u6c60"},{"location":"JDBC2/#jdbc_2","text":"\u4f7f\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u5b9e\u73b0\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u4ea4\u4e92\u7684\u4e00\u822c\u4f7f\u7528\u6b65\u9aa4\uff1a\u5bfc\u5165\u865a\u8c37 JDBC \u9a71\u52a8\u5305 \u2192 \u52a0\u8f7d\u865a\u8c37 JDBC \u9a71\u52a8\u7a0b\u5e8f \u2192 \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5 Connection \u2192 \u521b\u5efa\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61 Statement \u2192 \u6267\u884c SQL \u8bed\u53e5 \u2192 \u5904\u7406\u6267\u884c\u7ed3\u679c ResultSet \u2192 \u91ca\u653e\u8d44\u6e90\u3002 - \u7b2c 1 \u6b65\uff1a\u5bfc\u5165\u865a\u8c37 JDBC \u9a71\u52a8\u5305 - \u7b2c 2 \u6b65\uff1a\u6ce8\u518a\u9a71\u52a8 (\u4ec5\u505a\u4e00\u6b21) - \u7b2c 3 \u6b65\uff1a\u5efa\u7acb\u8fde\u63a5 (Connection) - \u7b2c 4 \u6b65\uff1a\u521b\u5efa\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61 (Statement) - \u7b2c 5 \u6b65\uff1a\u6267\u884c SQL \u8bed\u53e5 - \u7b2c 6 \u6b65\uff1a\u5904\u7406\u6267\u884c\u7ed3\u679c (ResultSet) - \u7b2c 7 \u6b65\uff1a\u91ca\u653e\u8d44\u6e90","title":"\u516d. \u865a\u8c37\u6570\u636e\u5e93\u7684JDBC\u4ea4\u4e92\u6d41\u7a0b"},{"location":"JDBC2/#61-jdbc","text":"\u4e0b\u8f7d\u865a\u8c37\u6570\u636e\u5e93\u4e13\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u5305 (cloudjdbc-*.*.*.jar)\uff0c\u5e76\u5bfc\u5165\u5230\u5e94\u7528\u7a0b\u5e8f\u4e2d\u3002","title":"6.1 \u5bfc\u5165\u865a\u8c37JDBC\u9a71\u52a8\u5305"},{"location":"JDBC2/#62-jdbc","text":"\u865a\u8c37 JDBC \u9a71\u52a8\u7a0b\u5e8f\u4e2d Driver \u63a5\u53e3\u5b9e\u73b0\u7c7b\u4e3a com.xugu.cloudjdbc.Driver\u3002\u52a0\u8f7d\u9a71\u52a8\u65b9\u5f0f\u4e3a DriverManager.registerDriver(new com.xugu.cloudjdbc.Driver()) \u6216Class.forName(\u201ccom.xugu.cloudjdbc.Driver\u201d)\u3002","title":"6.2 \u52a0\u8f7d\u865a\u8c37JDBC\u9a71\u52a8"},{"location":"JDBC2/#63","text":"\u5efa\u7acb\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u7684\u65b9\u5f0f\u6709\u591a\u79cd\uff0c\u53ef\u6839\u636e\u5e94\u7528\u7a0b\u5e8f\u5b9e\u9645\u4f7f\u7528\u573a\u666f\u9009\u62e9\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65b9\u5f0f\u3002\u5e38\u89c1\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65b9\u5f0f\u5982\u4e0b\uff1a - \u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u4f7f\u7528 DriverManager \u83b7\u5f97\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\uff1b - \u4f7f\u7528\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u6e90/\u8fde\u63a5\u6c60\u7684\u65b9\u5f0f\u83b7\u53d6\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\uff1b - \u4f7f\u7528\u7b2c\u4e09\u65b9\u901a\u7528\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u65b9\u5f0f\u83b7\u53d6\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u3002 \u5982\uff1adruid\u3001c3p0\u3001dbcp\u3001JNDI \u7b49\u3002","title":"6.3 \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5"},{"location":"JDBC2/#631","text":"\u6253\u5f00\u6570\u636e\u5e93\u8fde\u63a5\u5373\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u5bf9\u8c61 Connection \u7c7b\u3002 \u5982\uff1aDriverManager \u901a\u8fc7 getConnection() \u65b9\u6cd5\u83b7\u53d6 Connection \u7c7b\u5bf9\u8c61\u3002DriverManager \u7684 getConnection() \u65b9\u6cd5\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\u7684\u65b9\u5f0f\u4ea6\u6709\u591a\u79cd\u3002\u4ee5\u4e0b\u4e3a\u5e38\u89c1\u65b9\u5f0f\uff1a - getConnection(String url) \u53c2\u6570\u8bf4\u660e\uff1a - url\uff1a\u8bbf\u95ee\u6570\u636e\u5e93\u7684 URL \u8def\u5f84\u3002 \u793a\u4f8b\uff1a \u4e0b\u9762\u7684\u4ee3\u7801\u5229\u7528 getConnection \u65b9\u6cd5\u521b\u5efa\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u3002 ``` public Connection getConnection(){ Connection con=null\u037e try{ //\u6ce8\u518c\u6570\u636e\u5e93\u9a71\u52a8 Class.forName(\"com.xugu.cloudjdbc.Driver\")\u037e //\u5b9a\u4e49\u8fde\u63a5\u6570\u636e\u5e93\u7684url String url = \"jdbc:xugu://localhost:5138/db?user=user1\uff06password=pwd\"\u037e //\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5 con = DriverManager.getConnection(url)\u037e System.out.println(\"\u6570\u636e\u5e93\u8fde\u63a5\u6210\u529f\uff01\")\u037e }catch(Exception e){ e.printStackTrace()\u037e } //\u8fd4\u56de\u4e00\u4e2a\u8fde\u63a5 return con\u037e } ``` getConnection(String url,String user,String password) \u53c2\u6570\u8bf4\u660e\uff1a url\uff1a\u8bbf\u95ee\u6570\u636e\u5e93\u7684 URL \u8def\u5f84\u3002 user\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u7528\u6237\u540d\u3002 password\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u7528\u6237\u5bc6\u7801\u3002 \u793a\u4f8b\uff1a \u4e0b\u9762\u7684\u4ee3\u7801\u5229\u7528 getConnection \u65b9\u6cd5\u521b\u5efa\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u3002 private Connection con; private String user = \"user1\"; //\u5b9a\u4e49\u8fde\u63a5\u6570\u636e\u5e93\u7684\u7528\u6237\u540d private String password = \"pwd\"; //\u5b9a\u4e49\u8fde\u63a5\u6570\u636e\u5e93\u7684\u5bc6\u7801 private String className = \"com.xugu.cloudjdbc.Driver\";//\u5b9a\u4e49\u865a\u8c37JDBC\u9a71\u52a8 private String url = \"jdbc:xugu://localhost:5138/db\"; /\\*\\*\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\\*/ public Connection getConnection(){ try{ Class.forName(className);//\u52a0\u8f7d\u6570\u636e\u5e93\u9a71\u52a8 System.out.println(\"\u6570\u636e\u5e93\u9a71\u52a8\u52a0\u8f7d\u6210\u529f\uff01\"); con = DriverManager.getConnection(url,user,password); //\u8fde\u63a5\u6570\u636e\u5e93 System.out.println(\"\u6210\u529f\u5730\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\uff01\"); }catch(Exception e){ System.out.println(\"\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\u5931\u8d25\uff01\"); con = null; e.printStackTrace(); } finally { If(conn != null){ //\u91ca\u653e\u8fde\u63a5\u8d44\u6e90 conn.close(); } } return con; } getConnection(String url,Properties info) \u53c2\u6570\u8bf4\u660e\uff1a url\uff1a\u8bbf\u95ee\u6570\u636e\u5e93\u7684 URL \u8def\u5f84\u3002 info\uff1a\u4e00\u4e2a\u6301\u4e45\u7684\u5c5e\u6027\u96c6\u5bf9\u8c61\uff0c\u5305\u62ec user \u548c password \u7b49\u5c5e\u6027\u3002 \u793a\u4f8b\uff1a \u4e0b\u9762\u7684\u4ee3\u7801\u5229\u7528 getConnection \u65b9\u6cd5\u521b\u5efa\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u3002 public Connection getConnection(){ Connection con = null; //\u5b9a\u4e49\u6570\u636e\u5e93\u8fde\u63a5\u5bf9\u8c61 Properties info = new Properties(); //\u5b9a\u4e49Properties\u5bf9\u8c61 info.setProperty(\"user\",\"user1\"); //\u8bbe\u7f6eProperties\u5bf9\u8c61\u5c5e\u6027 info.setProperty(\"password\",\"pwd\"); try{ //\u6ce8\u518c\u6570\u636e\u5e93\u9a71\u52a8 Class.forName(\"com.xugu.cloudjdbc.Driver\"); //test\u4e3a\u6570\u636e\u5e93\u540d\u79f0 String url = \"jdbc:xugu://localhost:5138/db\"; //\u83b7\u53d6\u8fde\u63a5\u6570\u636e\u5e93\u7684Connection\u5bf9\u8c61 con = DriverManager.getConnection(url,info); System.out.println(\"\u6570\u636e\u5e93\u8fde\u63a5\u6210\u529f\uff01\"); }catch(Exception e){ e.printStackTrace(); } //\u8fd4\u56de\u4e00\u4e2a\u8fde\u63a5 return con; }","title":"6.3.1 \u6253\u5f00\u6570\u636e\u5e93\u8fde\u63a5"},{"location":"JDBC2/#632","text":"\u6570\u636e\u5e93\u4e8b\u52a1 (transaction) \u662f\u8bbf\u95ee\u5e76\u53ef\u80fd\u64cd\u4f5c\u5404\u79cd\u6570\u636e\u9879\u7684\u4e00\u4e2a\u6570\u636e\u5e93\u64cd\u4f5c\u5e8f\u5217\uff0c\u8fd9\u4e9b\u64cd\u4f5c\u8981\u4e48\u5168\u90e8\u6267\u884c, \u8981\u4e48\u5168\u90e8\u4e0d\u6267\u884c\uff0c\u662f\u4e00\u4e2a\u4e0d\u53ef\u5206\u5272\u7684\u5de5\u4f5c\u5355\u4f4d\u3002\u4e8b\u52a1\u7531\u4e8b\u52a1\u5f00\u59cb\u5230\u4e8b\u52a1\u7ed3\u675f\u4e4b\u95f4\u6267\u884c\u7684\u5168\u90e8\u6570\u636e\u5e93\u64cd\u4f5c\u7ec4\u6210\u3002 \u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\uff0c\u5373\u5f53\u4e00\u6761 SQL \u8bed\u53e5\u6267\u884c\u5b8c\u6210\u540e\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u5c06\u81ea\u52a8\u63d0\u4ea4\u8be5\u8bed\u53e5\u6240\u5728\u4e8b\u52a1\u3002\u5728\u865a\u8c37 JDBC \u9a71\u52a8\u4e2d\u63a7\u5236\u4e8b\u52a1\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a - \u901a\u8fc7\u6570\u636e\u5e93\u8fde\u63a5 URL \u4e32\u7684 auto_commit \u5c5e\u6027\uff0c\u63a7\u5236\u4e8b\u52a1\u7684\u5f00\u542f\u4e0e\u5173\u95ed\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b auto_commit \u5c5e\u6027\u4e3a on\uff0c\u5373\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u3002 - \u901a\u8fc7 Connection \u7c7b\u7684 setAutoCommit(boolean commit) \u65b9\u6cd5\u63a7\u5236\u4e8b\u52a1\u7684\u5f00\u542f\u4e0e\u5173\u95ed\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b commit \u5c5e\u6027\u4e3a TRUE\uff0c\u5373\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u3002 \u5728\u7981\u7528\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u4e0b\uff0c\u4f7f\u7528 Connection \u7c7b\u7684 commit() \u65b9\u6cd5\u63d0\u4ea4 SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u505a\u7684\u66f4\u6539\uff0c\u800c Connection \u7c7b\u7684 rollback() \u65b9\u6cd5\u5c06\u56de\u6eda SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u7684\u66f4\u6539\uff0c\u4e0a\u8ff0\u4e24\u79cd\u65b9\u6cd5\u6267\u884c\u5b8c\u6210\u540e\u5747\u5c06\u91ca\u653e\u4e8b\u52a1\u6301\u6709\u7684\u5168\u90e8\u9501\u8d44\u6e90\u3002 \u4e8b\u52a1\u4ec5\u5bf9\u6570\u636e\u5e93 DML \u64cd\u4f5c\u6709\u6548\u3002 {.is-info} \u4ee5\u4e0b\u4e3a\u4f7f\u7528 setAutoCommit() \u65b9\u6cd5\u63a7\u5236\u4e8b\u52a1\u63d0\u4ea4\u7684\u793a\u4f8b\u4ee3\u7801\uff1a //\u8bbe\u7f6e\u4e8b\u52a1\u4e3a\u975e\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f conn.setAutoCommit(false)\u037e //\u521b\u5efa\u6570\u636e\u5e93Statement\u5bf9\u8c61 Statement stm = conn.createStatement()\u037e //\u6570\u636e\u5e93\u4e8b\u52a1\u6267\u884cSQL\u8bed\u53e5 String sql = \"insert into test (comp_id,comp_name) values(1,'comp')\"\u037e //\u6267\u884c\u9759\u6001SQL\u8bed\u53e5 stm.execute(sql)\u037e //\u6570\u636e\u5e93\u9884\u5904\u7406SQL\u8bed\u53e5 PreparedStatement pstm = conn. prepareStatement(\u201cupdate test set id=? where comp_name=?\u201d) //\u9884\u5904\u7406SQL\u8bed\u53e5\u7b2c\u4e00\u4e2a\u53c2\u6570\u8d4b\u503c pstm.setInt(1,15)\u037e //\u9884\u5904\u7406SQL\u8bed\u53e5\u7b2c\u4e8c\u4e2a\u53c2\u6570\u8d4b\u503c pstm.setString(2,'DBMS')\u037e //\u6267\u884c\u9884\u5904\u7406SQL\u8bed\u53e5 pstm.execute()\u037e //\u63d0\u4ea4\u4e8b\u52a1 conn.commit()\u037e //\u5220\u9664\u8868\u4e2d\u6307\u5b9a\u884c\u6570\u636e stm.execute(\u201cdelete from test where id=15\u201d)\u037e //\u4e8b\u52a1\u56de\u6eda\u65b9\u6cd5 conn.rollback()\u037e \u4e0a\u9762\u4ee3\u7801\u4e2d\u6267\u884c\u63d0\u4ea4\u4e8b\u52a1\u64cd\u4f5c\uff0c\u6267\u884c\u9759\u6001 SQL \u8bed\u53e5\u4e0e\u6267\u884c\u9884\u5904\u7406 SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u7684\u66f4\u6539\u5c06\u6c38\u4e45\u751f\u6548\uff1b\u800c\u540e\u6267\u884c\u7684\u5220\u9664\u8868\u4e2d\u6307\u5b9a\u884c\u6570\u636e\u64cd\u4f5c\uff0c\u56e0\u5176\u540e\u8c03\u7528\u7684 rollback() \u65b9\u6cd5\uff0cdelete \u547d\u4ee4\u5bf9\u6570\u636e\u5e93\u7684\u6570\u636e\u66f4\u6539\u5c06\u88ab\u56de\u6eda\u6389\uff0c\u6545\u800c\u5bf9\u6570\u636e\u5e93\u7684\u5220\u9664\u64cd\u4f5c\u4e0d\u4f1a\u751f\u6548\u3002","title":"6.3.2 \u8fde\u63a5\u4e8b\u52a1\u7ba1\u7406"},{"location":"JDBC2/#633-savepoint","text":"JDBC \u89c4\u8303 3.0 \u4e2d\u4e3a\u4e86\u589e\u52a0\u5bf9\u4e8b\u52a1\u7684\u63a7\u5236\uff0c\u65b0\u589e Savepoint \u63a5\u53e3\uff0c\u5176\u4ee3\u8868\u4e8b\u52a1\u4e2d\u7684\u4e00\u4e2a\u903b\u8f91\u4e8b\u52a1\u70b9\u3002\u5728\u975e\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u4e0b\uff0c\u4e00\u4e2a\u4e8b\u52a1\u4e2d\u53ef\u4ee5\u8bbe\u7f6e\u591a\u4e2a Savepoint\uff0c\u5728\u4ee3\u7801\u4e2d\u8fdb\u884c\u4e8b\u52a1\u56de\u6eda\u64cd\u4f5c\u65f6\uff0c\u53ef\u4ee5\u6307\u5b9a\u4e8b\u52a1\u56de\u6eda\u5230\u6307\u5b9a Savepoint \u4f4d\u7f6e\uff0c\u6307\u5b9a\u56de\u6eda\u4f4d\u7f6e\u524d\u7684\u4e8b\u52a1\u64cd\u4f5c\u4ecd\u7136\u4fdd\u7559\u3002\u6b64\u63a5\u53e3\u5927\u5927\u63d0\u9ad8\u4e86\u4e8b\u52a1\u5904\u7406\u7684\u7c92\u5ea6\uff0c\u65b9\u4fbf\u5e94\u7528\u7a0b\u5e8f\u63a7\u5236\u4e8b\u52a1\u5904\u7406\u903b\u8f91\u3002 \u793a\u4f8b\uff1a\u8fde\u63a5\u4e8b\u52a1\u63a7\u5236\u63a5\u53e3 Savepoint \u4f7f\u7528 //\u8bbe\u7f6e\u975e\u81ea\u52a8\u63d0\u4ea4 conn.setAutoCommit(false); //\u521b\u5efaStatement\u5bf9\u8c61 Statement stm = conn.createStatement(); //\u6267\u884cSQL\u547d\u4ee4 stm.execute(sql1); stm.execute(sql2); //\u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\u70b9save1 java.sql.Savepoint save1 =conn.setSavepoint(\"save_1\"); stm.execute(sql3); //\u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\u70b9save2 java.sql.Savepoint save2 =conn.setSavepoint(\"save_2\"); stm.execute(sql4); //\u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\u70b9save3 java.sql.Savepoint save3 =conn.setSavepoint(\"save_3\"); stm.execute(sql5); //\u56de\u6eda\u4e8b\u52a1\u5230\u56de\u6eda\u70b9save3 conn.rollback(save3); conn.commit(); \u4ee5\u4e0a\u4ee3\u7801\u6bb5\u4e2d\uff0c\u4e8b\u52a1\u6267\u884c\u8bed\u53e5 sql5 \u5c06\u88ab\u56de\u6eda\u6389\u3002","title":"6.3.3 \u8fde\u63a5\u4e8b\u52a1\u63a7\u5236\uff0cSavepoint\u63a5\u53e3"},{"location":"JDBC2/#64-sql","text":"\u5728\u6570\u636e\u5e93\u6807\u51c6\u4e2d\uff0c\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61\u5206\u4e3a\u4e09\u7c7b\uff1a\u6267\u884c\u9759\u6001 SQL \u8bed\u53e5\u7684 Statement \u5bf9\u8c61\u3001\u6267\u884c\u9884\u7f16\u8bd1 SQL \u8bed\u53e5\u7684 PreparedStatement \u5bf9\u8c61\u4ee5\u53ca\u6267\u884c\u6570\u636e\u5e93\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\u7684 CallableStatement \u5bf9\u8c61\u3002","title":"6.4 \u521b\u5efa\u6267\u884cSQL\u8bed\u53e5\u5bf9\u8c61"},{"location":"JDBC2/#641-sqlstatement","text":"Statement \u5bf9\u8c61\u7528\u4e8e\u6267\u884c\u9759\u6001 SQL \u8bed\u53e5\u548c\u83b7\u5f97 SQL \u4ea7\u751f\u7684\u7ed3\u679c\u3002\u5728\u865a\u8c37 JDBC \u9a71\u52a8\u4e2d\uff0c\u865a\u8c37\u6570\u636e\u5e93 DDL \u64cd\u4f5c\u5747\u901a\u8fc7 Statement \u5bf9\u8c61\u6765\u6267\u884c\u3002 Statement \u5bf9\u8c61\u901a\u8fc7 Connection \u7c7b\u7684 createStatement() \u65b9\u6cd5\u521b\u5efa\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a //\u521b\u5efa\u6267\u884cSQL\u8bed\u53e5\u5bf9\u8c61Statement Statement stm = conn.createStatement()\u037e","title":"6.4.1 \u6267\u884cSQL\u5bf9\u8c61Statement"},{"location":"JDBC2/#642-sqlpreparedstatement","text":"PreparedStatement \u5bf9\u8c61\u4f7f\u7528\u65f6\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u5bf9\u6267\u884c SQL \u8bed\u53e5\u8fdb\u884c\u9884\u7f16\u8bd1\u5904\u7406\uff0c\u9884\u7f16\u8bd1 SQL \u8bed\u53e5\u5c06\u5728\u672a\u6765\u7684\u4f7f\u7528\u4e2d\u88ab\u91cd\u7528\u3002\u4e0e Statement \u5bf9\u8c61\u76f8\u6bd4\uff0cPreparedStatement \u5bf9\u8c61\u64cd\u4f5c\u591a\u6761 SQL \u8bed\u53e5\u7684\u6548\u7387\u66f4\u9ad8\u3002 \u7ecf\u8fc7\u9884\u7f16\u8bd1\u5e76\u5b58\u50a8\u5728 PreparedStatement \u5bf9\u8c61\u4e2d\u7684 SQL \u8bed\u53e5\uff0c\u901a\u8fc7 Connection \u7c7b\u7684 prepareStatement() \u65b9\u6cd5\u521b\u5efa\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a //\u521b\u5efa\u6267\u884c\u9884\u7f16\u8bd1SQL\u8bed\u53e5\u5bf9\u8c61PreparedStatement PreparedStatement preStatement = conn.prepareStatement(\u201c\u9884\u7f16\u8bd1SQL\u8bed\u53e5\u201d); \u9884\u5904\u7406 PreparedStatement \u5bf9\u8c61\u76f8\u5bf9\u4e8e\u9759\u6001 Statement \u5bf9\u8c61\u7684\u4f18\u52bf\uff1a - PreparedStatement \u53ef\u4ee5\u52a8\u6001\u4f20\u5165\u53c2\u6570\u503c\uff1b - PreparedStatement \u6bd4 Statement \u66f4\u5feb\uff1b PreparedStatement \u4f1a\u5c06 SQL \u8bed\u53e5\u9884\u7f16\u8bd1\u5728\u6570\u636e\u5e93\u7cfb\u7edf\u4e2d\uff0c\u6267\u884c\u8ba1\u5212\u540c\u6837\u4f1a\u88ab\u7f13\u5b58\u8d77\u6765\uff0c\u5b83\u5141\u8bb8\u6570\u636e\u5e93\u505a\u53c2\u6570\u5316\u67e5\u8be2\u3002\u4f7f\u7528\u9884\u5904\u7406\u8bed\u53e5\u6bd4\u666e\u901a\u7684 Statement \u67e5\u8be2\u66f4\u5feb\uff0c\u56e0\u505a\u7684\u5de5\u4f5c\u66f4\u5c11 (\u6570\u636e\u5e93\u5bf9 SQL \u8bed\u53e5\u7684\u5206\u6790\u3001\u7f16\u8bd1\u3001\u4f18\u5316\u5df2\u7ecf\u5728\u7b2c\u4e00\u6b21\u67e5\u8be2\u524d\u5b8c\u6210\u4e86)\u037e - PreparedStatement \u53ef\u4ee5\u9632\u6b62 SQL \u6ce8\u5165\u5f0f\u653b\u51fb\u3002 PreparedStatement \u5728\u4f7f\u7528\u53c2\u6570\u5316\u67e5\u8be2\u7684\u60c5\u51b5\u4e0b\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u4e0d\u4f1a\u5c06\u53c2\u6570\u7684\u5185\u5bb9\u89c6\u4e3a SQL \u6307\u4ee4\u7684\u4e00\u90e8\u5206\u6765\u5904\u7406\uff0c\u800c\u662f\u5728\u6570\u636e\u5e93\u5b8c\u6210 SQL \u6307\u4ee4\u7684\u7f16\u8bd1\u540e\uff0c\u624d\u5957\u7528\u53c2\u6570\u8fd0\u884c\uff0c\u56e0\u6b64\u5c31\u7b97\u53c2\u6570\u4e2d\u542b\u6709\u7834\u574f\u6027\u7684\u6307\u4ee4\uff0c\u4e5f\u4e0d\u4f1a\u88ab\u6570\u636e\u5e93\u6240\u8fd0\u884c\u3002","title":"6.4.2 \u6267\u884cSQL\u5bf9\u8c61PreparedStatement"},{"location":"JDBC2/#643-callablestatement","text":"CallableStatement \u5bf9\u8c61\u5b9e\u73b0\u4e86\u4ece Java \u5e94\u7528\u7a0b\u5e8f\u4e2d\u8c03\u7528\u6570\u636e\u5e93\u5b58\u50a8\u8fc7\u7a0b\u3002\u4f46\u6b64\u8c03\u7528\u8fc7\u7a0b\u5e76\u4e0d\u5305\u542b\u5b58\u50a8\u8fc7\u7a0b\u672c\u8eab\uff0c\u56e0\u5b58\u50a8\u8fc7\u7a0b\u5b58\u50a8\u5728\u6570\u636e\u5e93\u4e2d\u3002 CallableStatement \u5bf9\u8c61\u4e3a\u6240\u6709\u7684\u6570\u636e\u5e93\u63d0\u4f9b\u4e86\u4e00\u79cd\u4ee5\u6807\u51c6\u5f62\u5f0f\u8c03\u7528\u5b58\u50a8\u8fc7\u7a0b\u7684\u65b9\u6cd5\uff0c\u901a\u8fc7 Connection \u7c7b\u7684 prepareCall() \u65b9\u6cd5\u521b\u5efa\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a //\u521b\u5efa\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u5bf9\u8c61CallableStatement CallableStatement cstmt= conn.prepareCall(\u201c{call \u5b58\u50a8\u8fc7\u7a0b\u540d(\u53c2\u6570\u8868\u5217)}\u201d);","title":"6.4.3 \u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u5bf9\u8c61CallableStatement"},{"location":"JDBC2/#644-sql","text":"\u5728\u521b\u5efa\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61\u65f6\uff0c\u53ef\u901a\u8fc7\u6784\u9020\u65b9\u6cd5\u7684\u4e0d\u540c\u53c2\u6570\u8bbe\u7f6e ResultSet \u5bf9\u8c61\u5c5e\u6027\uff0c\u5c5e\u6027\u5305\u62ec\u7ed3\u679c\u7c7b\u578b ResultSetType\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b ResultSetConcurrency\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b ResultSetHoldability\u3002 ResultSetType \u9ed8\u8ba4\u4e3a ResultSet.TYPE_SCROLL_INSENSITIVE\uff1a\u652f\u6301\u7ed3\u679c\u96c6 backforward\u3001last\u3001first \u7b49\u64cd\u4f5c\uff0c\u5bf9\u6570\u636e\u5e93\u4e2d\u5176\u5b83 session \u8fdb\u884c\u7684\u6570\u636e\u66f4\u6539\u4e0d\u654f\u611f\uff1b ResultSetConcurrency \u9ed8\u8ba4\u4e3a ResultSet.CONCUR_READ_ONLY: \u4e0d\u53ef\u66f4\u65b0\u7ed3\u679c\u96c6\uff1b\u8be5\u5c5e\u6027\u4ea6\u53ef\u66f4\u6539\u4e3a ResultSet.CONCUR_UPDATABLE\uff0c\u652f\u6301\u5728 ResultSet \u4e2d\u5bf9\u8bb0\u5f55\u8fdb\u884c\u4fee\u6539\uff0c\u4fee\u6539\u540e\u8bb0\u5f55\u66f4\u65b0\u5230\u6570\u636e\u5e93\uff0c\u4fee\u6539\u64cd\u4f5c\u53ef\u5305\u542b\u63d2\u5165\u3001\u5220\u9664\u6216\u66f4\u65b0\uff1b ResultSetHoldability \u9ed8\u8ba4\u4e3a ResultSet.HOLD_CURSORS_OVER_COMMIT: \u5728\u4e8b\u52a1 commit \u6216 rollback \u540e\uff0cResultSet \u4ecd\u7136\u53ef\u7528\u3002 Connection \u7c7b\u521b\u5efa Statement \u5bf9\u8c61\u6784\u9020\u65b9\u6cd5\uff1a //Statement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 createStatement(int resultSetType,int resultSetConcurrency)\uff1b //Statement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 createStatement(int resultSetType,int resultSetConcurrency, int resultSetHoldability)\uff1b Connection \u7c7b\u521b\u5efa PreparedStatement \u5bf9\u8c61\u6784\u9020\u65b9\u6cd5\uff1a //PreparedStatement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareStatement(String sql, int resultSetType,int resultSetConcurrency) //PrepareStatment\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareStatement(String sql, int resultSetType,int resultSetConcurrency, int resultSetHoldability) Connection \u7c7b\u521b\u5efa CallableStatement \u5bf9\u8c61\u6784\u9020\u65b9\u6cd5\uff1a //CallableStatement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareCall(String sql, int resultSetType,int resultSetConcurrency) //CallableStatement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareCall(String sql, int resultSetType,int resultSetConcurrency, int resultSetHoldability)","title":"6.4.4 \u6267\u884cSQL\u8bed\u53e5\u5bf9\u8c61\u5c5e\u6027\u6269\u5145"},{"location":"JDBC2/#65-sql","text":"Statement \u5bf9\u8c61\u5b9a\u4e49\u4e86\u591a\u79cd\u6267\u884c SQL \u8bed\u53e5\u7684\u65b9\u6cd5\uff0c\u7528\u6765\u5904\u7406\u8fd4\u56de\u4e0d\u540c\u7ed3\u679c\u7684 SQL \u547d\u4ee4\uff1a - execute(String sql)\uff1a\u6267\u884c\u53ef\u4ee5\u8fd4\u56de\u591a\u4e2a\u7ed3\u679c\u96c6\u7684 SQL \u8bed\u53e5\u8fd4\u56de\u7c7b\u578b\u4e3a boolean\uff0c\u5982\u679c\u8fd4\u56de\u7684\u662f\u66f4\u65b0\u7684\u6570\u76ee\uff0c\u5219\u8fd4\u56de false\uff1b\u5982\u679c\u8fd4\u56de\u7684\u662f ResultSet \u5bf9\u8c61\uff0c\u5219\u8fd4\u56detrue\u3002 - executeQuery(String sql)\uff1a\u6267\u884c\u8fd4\u56de\u5355\u4e2a ResultSet \u7684 SQL \u8bed\u53e5\u8fd4\u56de\u7c7b\u578b\u4e3a ResultSet \u5bf9\u8c61\u3002 - executeUpdate()\uff1a\u6267\u884c SQL INSERT\u3001UPDATE \u6216 DELETE \u8bed\u53e5\u8fd4\u56de\u503c\u4e3a int \u578b\uff0c\u6570\u636e\u5e93\u53d7\u5f71\u54cd\u7684\u884c\u8ba1\u6570\u3002 - \u6279\u5904\u7406\u65b9\u6cd5\uff1a\u6279\u91cf\u6267\u884c SQL \u8bed\u53e5 clearBatch()\uff1a\u6e05\u7a7a\u5386\u53f2 batch \u547d\u4ee4\uff1b addBatch(String sql)\uff1a\u6dfb\u52a0\u8981\u6267\u884c\u7684 sql\uff1b executeBatch()\uff1a\u6279\u91cf\u6267\u884c sql\u3002 PreparedStatement \u7ee7\u627f\u81ea Statement\uff0c\u5b9a\u4e49\u4e86\u5927\u91cf\u7684 setter \u65b9\u6cd5\u7528\u4e8e\u8bbe\u7f6e\u52a8\u6001 sql\u7684\u53c2\u6570\uff0c\u56e0\u6b64 PreparedStatement \u652f\u6301\u52a8\u6001\u4f20\u53c2\uff1b\u53e6\u5916 PreparedStatement \u5185\u90e8\u5b58\u50a8\u4e86\u89e3\u6790\u7684 sql\uff0c\u53ef\u4ee5\u591a\u6b21\u6267\u884c\u800c\u65e0\u9700\u91cd\u590d\u89e3\u6790\u3002PreparedStatement \u7ee7\u627f\u81ea Statement\uff0cCallableStatement \u7ee7\u627f\u81ea PreparedStatement\uff0c\u6545\u800c\u4e09\u8005\u6267\u884c SQL \u8bed\u53e5\u7684\u65b9\u5f0f\u53ef\u901a\u7528\u3002","title":"6.5 \u6267\u884cSQL\u8bed\u53e5"},{"location":"JDBC2/#651-statement","text":"\u901a\u8fc7 Statement \u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c\u9700\u8981\u6ce8\u610f\u7684\u4e8b\u9879\uff1a - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u524d\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u8bbe\u7f6e\u4e3a FALSE\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\uff0c\u5e76\u8fdb\u884c\u624b\u52a8\u63d0\u4ea4\uff08commit\uff09\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u540e\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u6062\u590d\u4e3a TRUE\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u5f02\u5e38\u53d1\u751f\u65f6\uff0c\u8fdb\u884c rollback(\u56de\u6eda)\u3002 \u793a\u4f8b\uff1a\u901a\u8fc7 Statement \u6279\u91cf\u64cd\u4f5c\u6570\u636e try { //\u521b\u5efaStatement\u5bf9\u8c61 stm = con.createStatement(); //\u8bbe\u7f6e\u4e8b\u52a1\u975e\u81ea\u52a8\u63d0\u4ea4 con.setAutoCommit(false); // \u6dfb\u52a0\u591a\u6761SQL\u8bed\u53e5\u5230\u6279\u5904\u7406\u4e2d stm.addBatch(\"insert into student values(23,'tangbao','\u9ad8\u6570',100)\"); stm.addBatch(\"insert into student values(24,'\u738b\u5b9a','c#',98)\"); stm.addBatch(\"insert into student values(25,'\u738b\u56fd\u4e91','java',90)\"); //\u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c stm.executeBatch(); System.out.println(\"\u63d2\u5165\u6210\u529f!\"); //\u6267\u884c\u6210\u529f\u540e\u8fdb\u884c\u6570\u636e\u63d0\u4ea4 con.commit(); System.out.println(\"\u63d0\u4ea4\u6210\u529f!\"); //\u5173\u95ed\u975e\u81ea\u52a8\u63d0\u4ea4 con.setAutoCommit(true); } catch (SQLException e) { if (!con.isClosed()) { con.rollback(); //\u51fa\u73b0\u5f02\u5e38\uff0c\u56de\u6eda\u4e8b\u52a1 System.out.println(\"\u63d0\u4ea4\u5931\u8d25\uff0c\u56de\u6eda\uff01\"); con.setAutoCommit(true); //\u5173\u95ed\u975e\u81ea\u52a8\u63d0\u4ea4 } } finally { if (stmt != null) { //\u5173\u95ed\u64cd\u4f5c\u5bf9\u8c61 stmt.close(); } }","title":"6.5.1 \u901a\u8fc7Statement\u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c"},{"location":"JDBC2/#652-preparedstatement","text":"\u901a\u8fc7 PreparedStatement \u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c\u9700\u8981\u6ce8\u610f\u7684\u4e8b\u9879\uff1a - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u524d\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u8bbe\u7f6e\u4e3a FALSE\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\uff0c\u5e76\u8fdb\u884c\u624b\u52a8\u63d0\u4ea4\uff08commit\uff09\uff0c\u6570\u636e\u91cf\u5927\u65f6\uff0c\u8bbe\u7f6e\u624b\u52a8\u63d0\u4ea4\u95f4\u9694\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u540e\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u6062\u590d\u4e3a TRUE\uff1b \u2022 \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u5f02\u5e38\u53d1\u751f\u65f6\uff0c\u8fdb\u884c rollback(\u56de\u6eda)\uff1b - PreparedStatement \u6267\u884c\u8bed\u53e5\u4e0d\u80fd\u4e3a DDL \u8bed\u53e5\u3002 \u793a\u4f8b\uff1a\u5c06 10000 \u6761\u8bb0\u5f55\u63d2\u5165\u6570\u636e\u5e93\u4e2d\uff0c\u6bcf 100 \u6761\u6267\u884c\u4e00\u6b21\u63d0\u4ea4\u64cd\u4f5c try{ conn.setAutoCommit(false); //\u8bbe\u7f6e\u975e\u81ea\u52a8\u63d0\u4ea4 //\u521b\u5efaPreparedStatement\u5bf9\u8c61 ps = conn.prepareStatement(\"insert into testtab values (?, ?, ?)\"); //\u5faa\u73af\u6dfb\u52a0\u6279\u5904\u7406\u6570\u636e for(int i = 0;i<list.size();i++){ HashMap map = list.get(i);//list\u4e3a\u6570\u636e\u5c01\u88c5\uff0c\u6b64\u5904\u7565 ps.setString(1, map.get(\"id\").toString()); ps.setString(2, map.get(\"name\").toString()); ps.setString(3, map.get(\"age\").toString()); ps.addBatch(); if(mod(i,100)==0){//\u6bcf100\u6761\u6267\u884c\u4e00\u6b21\u6267\u884c\u64cd\u4f5c ps.executeBatch();//\u6267\u884c\u6279\u91cf\u63d2\u5165 conn.commit();//\u6267\u884c\u4e8b\u52a1\u63d0\u4ea4 } } ps.executeBatch();//\u6267\u884c\u6279\u91cf\u63d2\u5165 conn.commit(); //\u63d0\u4ea4\u4e8b\u52a1 }catch(Exception e){ if (!conn.isClosed()) { conn.rollback(); //\u51fa\u73b0\u5f02\u5e38\uff0c\u56de\u6eda\u4e8b\u52a1 System.out.println(\"\u63d0\u4ea4\u5931\u8d25\uff0c\u56de\u6eda\uff01\"); conn.setAutoCommit(true); //\u5173\u95ed\u975e\u81ea\u52a8\u63d0\u4ea4 } } finally { if (ps!= null) { ps.close();//\u5173\u95ed\u64cd\u4f5c\u5bf9\u8c61 } }","title":"6.5.2 \u901a\u8fc7PreparedStatement\u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c"},{"location":"JDBC2/#653-callablestatement","text":"CallableStatement \u5b58\u5728\u4e09\u79cd\u7c7b\u578b\u7684\u53c2\u6570 IN\u3001OUT \u548c INOUT\u3002 - IN\uff1a\u521b\u5efa SQL \u8bed\u53e5\u65f6\u5176\u53c2\u6570\u503c\u672a\u77e5\u3002\u4f7f\u7528 setXXX() \u65b9\u6cd5\u5c06\u503c\u7ed1\u5b9a\u5230 IN \u53c2\u6570\u3002 - OUT\uff1a\u7531 SQL \u8bed\u53e5\u8fd4\u56de\u7684\u53c2\u6570\u503c\u3002\u53ef\u4ee5\u4f7f\u7528 getXXX() \u65b9\u6cd5\u4ece OUT \u53c2\u6570\u4e2d\u68c0\u7d22\u503c\u3002 - INOUT\uff1a\u63d0\u4f9b\u8f93\u5165\u548c\u8f93\u51fa\u503c\u7684\u53c2\u6570\u3002\u4f7f\u7528 setXXX() \u65b9\u6cd5\u7ed1\u5b9a\u53d8\u91cf\u5e76\u4f7f\u7528getXXX() \u65b9\u6cd5\u68c0\u7d22\u503c\u3002 \u793a\u4f8b 1\uff1a\u901a\u8fc7\u53c2\u6570\u4e0b\u6807\u7ed1\u5b9a\u53c2\u6570 //\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\u8bed\u53e5 String sql =\"{call pro_2(?,?,?)}\"; //\u521b\u5efaCallableStatement\u5bf9\u8c61 CallableStatement cstm = conn.prepareCall(sql); //\u901a\u8fc7\u53c2\u6570\u4e0b\u6807\u8bbe\u7f6e\u53c2\u6570(IN\u53c2\u6570) cstm.setInt(1, 20490); //\u6ce8\u518cOUT\u53c2\u6570\u6570\u636e\u7c7b\u578b cstm.registerOutParameter(2, com.xugu.cloudjdbc.Types.VARCHAR); cstm.registerOutParameter(3, com.xugu.cloudjdbc.Types.VARCHAR); //\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528 cstm.execute(); //\u83b7\u53d6\u5b58\u50a8\u8fc7\u7a0b\u8f93\u51fa\u53c2\u6570 String name = (String)cstm.getObject(2); String address = (String)cstm.getObject(3); \u793a\u4f8b 2\uff1a\u901a\u8fc7\u53c2\u6570\u540d\u7ed1\u5b9a\u53c2\u6570 //\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\u8bed\u53e5 CallableStatement pstm = conn.prepareCall(\"insert into tt1 values(:id,:name)\"); //\u901a\u8fc7\u53c2\u6570\u540d\u8bbe\u7f6e\u53c2\u6570(IN\u53c2\u6570) pstm.setInt(\"id\", 1); pstm.setString(\"name\", \"cloud\"); //\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528 pstm.execute();","title":"6.5.3 CallableStatement\u7ed1\u5b9a\u53c2\u6570"},{"location":"JDBC2/#66","text":"ResultSet \u7c7b\u662f\u901a\u8fc7 Statement \u53ca\u5176\u5b50\u7c7b\u6267\u884c SQL \u67e5\u8be2\u8bed\u53e5\u5f97\u5230\u7684\u7ed3\u679c\u96c6\u3002ResultSet \u7c7b\u5305\u542b\u4e09\u4e2a\u91cd\u8981\u5c5e\u6027\uff1aResultSet \u5bf9\u8c61\u5e76\u53d1\u6a21\u5f0f\u3001ResultSet \u5bf9\u8c61\u5149\u6807\u5904\u7406\u65b9\u5411\u3001ResultSet \u5bf9\u8c61\u5149\u6807\u7c7b\u578b\u3002ResultSet \u7c7b\u5177\u6709\u6307\u5411\u5f53\u524d\u7ed3\u679c\u96c6\u6570\u636e\u884c\u4f4d\u7f6e\u5149\u6807\uff0c\u5149\u6807\u4f4d\u7f6e\u521d\u59cb\u88ab\u7f6e\u4e8e\u7b2c\u4e00\u884c\u4e4b\u524d\uff0c\u901a\u8fc7 ResultSet \u7c7b\u5c01\u88c5\u7684\u5149\u6807\u79fb\u52a8\u65b9\u6cd5\u5b9e\u73b0\u5bf9\u5149\u6807\u4f4d\u7f6e\u7684\u63a7\u5236\uff0c\u5f53 ResultSet \u5bf9\u8c61\u7684\u5149\u6807\u79fb\u81f3\u6570\u636e\u7ed3\u679c\u96c6\u672b\u5c3e\u65f6 (\u4e0b\u4e00\u884c\u65e0\u6570\u636e)\uff0c\u8fd4\u56de FALSE\u3002 \u5728\u865a\u8c37 JDBC \u4e2d\uff0cResultSet \u7c7b\u5206\u4e3a\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u548c\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\uff08\u901a\u8fc7 URL \u8fde\u63a5\u4e32\u53c2\u6570 recv_mode \u914d\u7f6e\uff09\u3002\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u9ed8\u8ba4\u5c5e\u6027\u4e3a\u4e0d\u53ef\u66f4\u65b0\u3001\u5411\u524d\u79fb\u52a8\u3001\u53ef\u4ee5\u6eda\u52a8\uff1b\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u9ed8\u8ba4\u5c5e\u6027\u4e3a\u4e0d\u53ef\u66f4\u65b0\u3001\u53ea\u5411\u524d\u79fb\u52a8\u3001\u4e0d\u53ef\u6eda\u52a8\u3002 Statement \u5bf9\u8c61\u6267\u884c SQL \u8bed\u53e5\u8fd4\u56de\u7ed3\u679c\u96c6\u4ec5\u80fd\u662f\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\uff0c\u800c PreparedStatement \u5bf9\u8c61\u6267\u884c SQL \u8bed\u53e5\u8fd4\u56de\u7ed3\u679c\u96c6\u53ef\u4e3a\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u6216\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u3002 \u5f53\u6267\u884c SQL \u8fd4\u56de\u6570\u636e\u7ed3\u679c\u96c6\u8f83\u5927\u65f6\uff0c\u5efa\u8bae\u4f7f\u7528\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\uff0c\u907f\u514d JVM \u7684\u6ea2\u51fa\u3002 {.is-info}","title":"6.6 \u5904\u7406\u6267\u884c\u7ed3\u679c"},{"location":"JDBC2/#661-resultset","text":"\u521b\u5efa Statement \u5bf9\u8c61\u65f6\uff0c\u8bbe\u7f6e Statement \u5c5e\u6027 RresultSetConcurrency \u4e3a ResultSet.CONCUR_UPDATABLE\uff0c\u5e76\u4e14\u6570\u636e\u5e93 URL \u8fde\u63a5\u4e32\u5c5e\u6027 return_rowid \u8bbe\u7f6e\u4e3a TRUE\u65f6\uff0cStatement \u5bf9\u8c61\u6267\u884c SQL \u8bed\u53e5\u8fd4\u56de\u7684 ResultSet \u7ed3\u679c\u96c6\u624d\u80fd\u88ab\u66f4\u65b0\u3002\u5f53 ResultSet \u5bf9\u8c61\u4e3a\u53ef\u66f4\u65b0\u7ed3\u679c\u96c6\u65f6\uff0c\u5c06\u5149\u6807\u79fb\u81f3\u63d2\u5165\u4f4d\u7f6e\uff0c\u53ef\u8c03\u7528 ResultSet \u7c7b\u5bf9\u5e94\u7684 update \u65b9\u6cd5\u4fee\u6539\u7ed3\u679c\u96c6\u4e2d\u884c\u6570\u636e\uff0c\u5e76\u901a\u8fc7 updateRow \u65b9\u6cd5\u5c06\u66f4\u6539\u6570\u636e\u66f4\u65b0\u5230\u6570\u636e\u5e93\u4e2d\u3002 \u793a\u4f8b\uff1a\u901a\u8fc7\u4fee\u6539\u7ed3\u679c\u96c6\u4e2d\u6570\u636e\u503c\u66f4\u6539\u6570\u636e\u5e93\u4e2d\u5bf9\u5e94\u8bb0\u5f55 //\u521b\u5efaStatement\u5bf9\u8c61\u5e76\u8bbe\u7f6e\u7ed3\u679c\u96c6\u5c5e\u6027\u4e3a\u53ef\u66f4\u65b0 Statement stm = conn.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_UPDATABLE); //\u6267\u884cSQL\u8bed\u53e5 ResultSet rs = stm.executeQuery(sql); //\u7ed3\u679c\u96c6\u904d\u5386 while(rs.next()) { //\u66f4\u65b0\u7ed3\u679c\u96c6\u4e2d\u6307\u5b9a\u5217\u6570\u636e rs.updateLong(1, 5); //\u66f4\u65b0\u7ed3\u679c\u96c6\u4e2d\u6307\u5b9a\u5217\u6570\u636e rs.updateFloat(3, 12.3f); //\u7ed3\u679c\u96c6\u53d8\u66f4\u56de\u5199\u5165\u6570\u636e\u5e93 rs.updateRow(); } \u901a\u8fc7\u8c03\u7528 ResultSet \u7c7b\u7684 next()\u3001previous()\u3001absolute(int) \u65b9\u6cd5\u79fb\u52a8\u5149\u6807\u4f4d\u7f6e\uff0c\u5c06\u5149\u6807\u4f4d\u7f6e\u79fb\u52a8\u5230\u6307\u5b9a\u6570\u636e\u884c\uff0c\u901a\u8fc7 ResultSet \u7c7b\u5bf9\u5e94\u7684 get \u65b9\u6cd5\u83b7\u53d6\u884c\u6570\u636e\u3002 \u5982\u4f7f\u7528\u7ed3\u679c\u96c6\u66f4\u65b0\u6570\u636e\u5e93\u6570\u636e\uff0c\u9700\u5728\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65f6\uff0c\u8bbe\u7f6e\u8fde\u63a5\u5c5e\u6027 return_rowid \u4e3aTRUE\uff0c\u4e14\u5728\u751f\u6210\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61\u65f6\uff0c\u5e76\u53d1\u5c5e\u6027\u6307\u5b9a\u4e3a ResultSet.CONCUR_UPDATABLE\u3002 {.is-info}","title":"6.6.1 \u66f4\u65b0ResultSet\u7ed3\u679c\u96c6"},{"location":"JDBC2/#662","text":"\u793a\u4f8b 1\uff1a \u7edf\u8ba1\u7ed3\u679c\u96c6\u603b\u6761\u6570 //\u521b\u5efaStatement\u5bf9\u8c61 Statement stm= conn.createStatement(); stm.execute(\"create table test(id int identity(1,1));insert into test values(default)\"); //\u6267\u884c\u7ed3\u679c\u96c6\u67e5\u8be2 ResultSet rs = stm.executeQuery(\"select * from test\") //\u79fb\u52a8\u5149\u6807\u81f3\u7ed3\u679c\u96c6\u672b\u5c3e rs.last(); //\u83b7\u53d6\u7ed3\u679c\u96c6\u884c\u6570 int rsCounts = rs.getRow();","title":"6.6.2 \u901a\u8fc7\u79fb\u52a8\u5149\u6807\u83b7\u53d6\u7ed3\u679c\u96c6\u6761\u6570"},{"location":"JDBC2/#663","text":"\u865a\u8c37 JDBC \u652f\u6301\u591a\u7ed3\u679c\u96c6\u5904\u7406\uff0c\u5141\u8bb8 Statement \u63a5\u53e3\u652f\u6301\u591a\u91cd\u6253\u5f00\u7684 ResultSet \u5bf9\u8c61\u3002\u6267\u884c\u8bed\u53e5\u53ef\u4ee5\u662f\u591a\u6761 SQL \u8bed\u53e5\u7684\u96c6\u5408\uff0c\u5373\u4e00\u6b21\u6027\u5411\u865a\u8c37\u670d\u52a1\u5668\u53d1\u9001\u591a\u6761 SQL \u8bed\u53e5\uff0c\u865a\u8c37\u670d\u52a1\u5668\u6267\u884c\u5b8c SQL \u8bed\u53e5\u540e\u8fd4\u56de\u591a\u4e2a\u6267\u884c\u7ed3\u679c\uff1b\u4ea6\u6216\u5b58\u50a8\u8fc7\u7a0b\u5b9a\u4e49\u6709\u591a\u4e2a\u8fd4\u56de\u7ed3\u679c\u96c6\u3002\u865a\u8c37 JDBC \u7684 Statement \u91cd\u8f7d\u4e86 Statement \u63a5\u53e3\u4e2d\u7684 getMoreResults() \u65b9\u6cd5\u3002 \u793a\u4f8b\uff1a\u591a\u7ed3\u679c\u96c6\u5904\u7406 //SQL\u8bed\u53e5\u5305\u542b\u591a\u6761\u67e5\u8be2\u547d\u4ee4 String sql=\" SELECT * FROM A1 WHERE D2=(SELECT AVG(D2) FROM A1 GROUP BY D1);SELECT * FROM A1 WHERE D2>(SELECT MIN(D2) FROM A1 GROUP BY D1)\"; //\u521b\u5efaStatement\u5bf9\u8c61 Statement stm = conn.createStatement(); //\u6267\u884cSQL\u8bed\u53e5 boolean f = stm.execute(sql); //\u5224\u65ad\u662f\u5426\u6709ResultSet\u5bf9\u8c61\u4ea7\u751f if(f == true){ //\u83b7\u53d6\u7ed3\u679c\u96c6\u5bf9\u8c61 ResultSet rs1 = stm.getResultSet(); ... ... ... ... } while(true) { //\u5224\u65adStatement\u662f\u5426\u8fd4\u56de\u4e86\u591a\u4e2aResultSet\u5bf9\u8c61 if(!stm.getMoreResults(Statement.CLOSE_CURRENT_RESULT)){ break; } else if((rs2 = cstm.getResultSet())!=null) { ... ... ... ...//\u6570\u636e\u5904\u7406\u90e8\u5206\u7701\u7565 } }","title":"6.6.3 \u591a\u7ed3\u679c\u96c6\u5904\u7406"},{"location":"JDBC2/#664","text":"\u865a\u8c37JDBC\u4e2d\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u751f\u6210\u9700\u6ee1\u8db3\u4e24\u4e2a\u6761\u4ef6\uff1aURL\u8fde\u63a5\u4e32\u5c5e\u6027recv_mode\u503c\u4e3a2\uff0cStatement\u5bf9\u8c61\u6267\u884cSQL\u8bed\u53e5\u4e3a\u5355\u6761SELECT\u8bed\u53e5\u3002 \u5e94\u7528\u7a0b\u5e8f\u7aef\u901a\u8fc7Statement\u7c7b\u7684setFetchSize(int)\u65b9\u6cd5\u6216ResultSet\u7c7b\u7684setFetchSize(int)\u65b9\u6cd5\u8bbe\u7f6e\u6bcf\u6b21\u4ece\u670d\u52a1\u5668\u7aef\u83b7\u53d6\u591a\u5c11\u6761\u6570\u636e\u3002 \u4f7f\u7528\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7684 ResultSet \u5bf9\u8c61\uff0c\u5149\u6807\u53ea\u80fd\u5355\u5411\u5411\u524d\u6b63\u5411\u79fb\u52a8\uff0c\u4e0d\u80fd\u5411\u540e\u79fb\u52a8\u6216\u6765\u56de\u6eda\u52a8\u3002 {.is-info} \u793a\u4f8b\uff1a\u865a\u8c37\u6570\u636e\u5e93\u670d\u52a1\u5668\u7aef\u6e38\u6807\u4f7f\u7528 //\u521b\u5efa\u865a\u8c37JDBC\u7279\u6709Statement\u5bf9\u8c61 Statement stm = (com.xugu.cloudjdbc.Statement)conn.createStatement(); //\u5f00\u542f\u670d\u52a1\u5668\u7aef\u6e38\u6807 stm.setServerCursor(true); //\u8bbe\u7f6e\u670d\u52a1\u5668\u7aef\u6e38\u6807\u5355\u6b21\u8fd4\u56de\u6570\u636e\u6761\u6570 stm.setFetchSize(1000); //\u6267\u884cSQL\u8bed\u53e5 ResultSet rs = stm.executeQuery(\"select * from t1\"); //\u904d\u5386\u6570\u636e while\uff08rs.next()\uff09 { ... ... ... ... } //\u5173\u95ed\u670d\u52a1\u5668\u7aef\u6e38\u6807 stm.setServerCursor(false);","title":"6.6.4 \u670d\u52a1\u5668\u7aef\u6e38\u6807\u4f7f\u7528"},{"location":"JDBC2/#665-generatedkeys","text":"JDBC 3.0 \u89c4\u8303\u4e2d\u5bf9\u4e8e\u81ea\u52a8\u4ea7\u751f\u7684\u5173\u952e\u5b57\u6570\u503c\uff0c\u5b9a\u4e49\u4e86\u63a5\u53e3\u89c4\u8303\uff0c\u5373\uff1agetGeneratedKeys() \u65b9\u6cd5\u3002 \u4e3a\u4e86\u89e3\u51b3\u5bf9\u83b7\u53d6\u81ea\u52a8\u4ea7\u751f\u7684\u6216\u81ea\u52a8\u589e\u52a0\u7684\u5173\u952e\u5b57\u7684\u503c\u7684\u9700\u6c42\uff0c\u865a\u8c37 JDBC \u6839\u636e JDBC3.0 \u89c4\u8303\u63d0\u4f9b\u4e86\u83b7\u5f97\u5173\u952e\u5b57\u503c\u7684\u65b9\u6cd5\u3002\u83b7\u53d6\u5173\u952e\u5b57\u7684\u503c\uff0c\u9700\u8981\u5728\u6267\u884c\u65b9\u6cd5\u4e2d\u6307\u5b9a\u81ea\u589e\u5173\u952e\u5b57\u6807\u8bb0\u3002SQL \u8bed\u53e5\u6267\u884c\u5b8c\u540e\uff0c\u8c03\u7528 Statement \u5bf9\u8c61\u7684 getGeneratedKeys() \u65b9\u6cd5\uff0c\u83b7\u5f97\u5305\u542b\u81ea\u589e\u957f\u503c\u7684 ResultSet \u5bf9\u8c61\u3002 \u793a\u4f8b\uff1a\u83b7\u53d6\u6570\u636e\u5e93\u81ea\u589e\u957f\u5173\u952e\u5b57\u7684\u503c //\u521b\u5efaStatement\u5bf9\u8c61 Statement stmt = conn.createStatement(); //\u6307\u5b9a\u81ea\u589e\u957f\u5173\u952e\u5b57\u7684\u6807\u8bc6 String[] colN = {\"id\"}; //\u5728\u6267\u884c\u65b9\u6cd5\u4e2d\u5f15\u5165\u81ea\u589e\u957f\u5173\u952e\u5b57\u6807\u8bc6 stmt.executeUpdate(\"INSERT INTO authors(first_name, last_name) VALUES (\u2018Ghq\u2019, \u2018Wxl\u2019)\",colN); //\u83b7\u53d6\u7ed3\u679c\u96c6 ResultSet rs = stmt.getGeneratedKeys(); if ( rs.next() ) { //\u83b7\u53d6\u7ed3\u679c\u96c6\u4e2d\u7684\u81ea\u589e\u957f\u503c \u3000\u3000 int key = rs.getInt(); }","title":"6.6.5 \u68c0\u7d22\u81ea\u52a8\u4ea7\u751f\u7684\u5173\u952e\u5b57GeneratedKeys"},{"location":"JDBC2/#67","text":"\u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u56e0\u5904\u7406\u9700\u8981\u6240\u5efa\u7acb\u7684 ResultSet\u3001Statement\u3001PreparedStatement \u7b49\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61\uff0c\u5728\u4f7f\u7528\u5b8c\u540e\u5fc5\u987b\u5173\u95ed\u3002\u5173\u95ed\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61\uff0c\u76f4\u63a5\u8c03\u7528\u5bf9\u5e94\u7684\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61 close() \u65b9\u6cd5\u5373\u53ef\u3002 \u5f53\u4e0d\u518d\u9700\u8981\u548c\u865a\u8c37\u6570\u636e\u5e93\u8fdb\u884c\u4ea4\u4e92\u65f6\uff0c\u9700\u65ad\u5f00\u6570\u636e\u5e93\u8fde\u63a5\u3002\u8c03\u7528 Connection \u7c7b\u7684 close() \u65b9\u6cd5\u5373\u4f1a\u5173\u95ed\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u540c\u65f6\u91ca\u653e\u8fde\u63a5\u4e0a\u6240\u6301\u6709\u7684\u6240\u6709\u6570\u636e\u5e93\u8d44\u6e90\u3002 \u6570\u636e\u5e93\u8fde\u63a5\u4e3a\u975e\u81ea\u52a8\u63d0\u4ea4\u65f6\uff0c\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61\u5728\u4f7f\u7528\u5b8c\u540e\uff0c\u82e5\u672a\u53ca\u65f6\u5173\u95ed\uff0c\u6b64\u65f6\u8fdb\u884c DDL \u64cd\u4f5c\u5c06\u4f1a\u5bfc\u81f4\u865a\u8c37\u6570\u636e\u5e93\u52a0\u9501\u8d85\u65f6\u6216\u5931\u8d25\u3002 {.is-info}","title":"6.7 \u91ca\u653e\u8d44\u6e90"},{"location":"JDBC2/#_4","text":"JDBC 3.0 \u89c4\u8303\u5b9a\u4e49\u6709 java.sql.Blob \u4e0e java.sql.Clob \u63a5\u53e3\uff0c\u6b64\u4e24\u7c7b\u63a5\u53e3\u4e3a\u6570\u636e\u5e93\u5927\u5bf9\u8c61\u6570\u636e\u5904\u7406\u63a5\u53e3\u3002\u865a\u8c37\u6570\u636e\u5e93\u5927\u5bf9\u8c61\u5b57\u6bb5\u7c7b\u578b\u5305\u542b\uff1ablob\u3001clob\u3001binary\u3002 \u5728\u865a\u8c37 JDBC \u4e2d\uff0c\u83b7\u53d6\u5927\u5bf9\u8c61\u6570\u636e\u6709\u4e24\u79cd\u8fd4\u56de\u65b9\u5f0f\uff1a\u4e00\u79cd\u662f\u6570\u636e\u76f4\u63a5\u8fd4\u56de\uff1b\u53e6\u4e00\u79cd\u662f\u8fd4\u56de\u63cf\u8ff0\u7b26\u65b9\u5f0f\u3002\u5f53\u8fd4\u56de\u6570\u636e\u4e2d\u5927\u5bf9\u8c61\u6570\u636e\u8f83\u591a\u65f6\uff0c\u5efa\u8bae\u4f7f\u7528\u8fd4\u56de\u63cf\u8ff0\u7b26\u65b9\u5f0f\uff0c\u4ece\u800c\u907f\u514d\u56e0\u6570\u636e\u8fc7\u591a\u8fc7\u5927\u9020\u6210\u7684 JVM \u5185\u5b58\u6ea2\u51fa\u3002\u865a\u8c37 JDBC \u9a71\u52a8\u542f\u7528\u5927\u5bf9\u8c61\u8fd4\u56de\u63cf\u8ff0\u7b26\u65b9\u5f0f\uff0c\u9700\u5728\u8fde\u63a5 URL \u4e32\u4e0a\u914d\u7f6e\u5c5e\u6027 lob_ret \u4e3a descriptor \u3002","title":"\u4e03. \u5927\u5bf9\u8c61\u7c7b\u578b\u5904\u7406"},{"location":"JDBC2/#71","text":"LOB \u5bf9\u8c61\u7684\u63d2\u5165\u5fc5\u987b\u901a\u8fc7 PreparedStatement\u3001CallableStatement \u7c7b\u7684 setXXX() \u65b9\u6cd5\u65b9\u5f0f\u5b9e\u73b0\u3002\u865a\u8c37 JDBC \u4e2d PreparedStatement \u63d0\u4f9b\u591a\u79cd\u65b9\u6cd5\u8bbe\u7f6e\u5927\u5bf9\u8c61\u53c2\u6570\u503c\uff0c\u5982\u4e0b\u5217\u65b9\u6cd5\uff1a setBinaryStream(int parameterIndex,InputStream x) setBlob(int parameterIndex, Blob x) setBlob(int parameterIndex, InputStream x) setBytes(int parameterIndex,byte[] x) setCharacterStream(int parameterIndex, Reader reader) setClob(int parameterIndex, Clob x) setClob(int parameterIndex, Reader reader) setString(int parameterIndex, String x) \u793a\u4f8b\uff1a\u5e94\u7528\u7a0b\u5e8f\u63d2\u5165\u5927\u5bf9\u8c61\u6570\u636e\uff0c\u5176\u4e2d\u8868 b1 \u5b57\u6bb5 photo \u4e3a blob \u7c7b\u578b\uff0c\u5b57\u6bb5 text \u4e3a clob \u7c7b\u578b PreparedStatement ps = conn.prepareStatement(\"INSERT INTO b1 VALUES (?, ?)\")\u037e // blobBytes is a byte[] type ps.setBlob(1, new com.xugu.cloudjdbc.Blob(blobBytes))\u037e // clobString is a String type ps.setClob(2, new com.xugu.cloudjdbc.Clob(clobString))\u037e ps.execute()\uff1b","title":"7.1 \u5411\u8868\u4e2d\u63d2\u5165\u5927\u5bf9\u8c61"},{"location":"JDBC2/#72","text":"\u901a\u8fc7\u865a\u8c37 JDBC \u83b7\u53d6\u5927\u5bf9\u8c61\u503c\uff0c\u6570\u636e\u5e93 CLOB \u5bf9\u8c61\u53ef\u901a\u8fc7\u5b57\u7b26\u4e32\u5f62\u5f0f\u6216\u6d41\u5f0f\u6570\u636e\u5f62\u5f0f\u83b7\u53d6\uff0c\u6570\u636e\u5e93 BLOB \u5bf9\u8c61\u53ea\u901a\u8fc7\u6d41\u5f0f\u6570\u636e\u5f62\u5f0f\u83b7\u53d6\u3002 \u793a\u4f8b 1\uff1a\u6d41\u5f0f\u83b7\u53d6 CLOB \u5bf9\u8c61 Statement stm = xgConn.createStatement(); String sql=\u201dselect remark from t_clob where id=101\u201d; ResultSet rs = stm.executeQuery(sql); while(rs.next) { Clob data = rs.getClob(\"remark \"); //\u4ee5\u5b57\u7b26\u6d41\u65b9\u5f0f\u83b7\u53d6\u6570\u636e Reader rd = data.getCharacterStream(); char[] sc = new char[1000]; StringBuffer sb = new StringBuffer(); int len = 0; while((len=rd.read(sc)) !=-1) { sb.append(new String(sc,0,len)); } System.out.println(sb.toString()); } \u793a\u4f8b 2\uff1a\u865a\u8c37 JDBC \u5141\u8bb8\u4ee5\u5b57\u7b26\u4e32\u7684\u5f62\u5f0f\u8bfb\u53d6 CLOB \u5bf9\u8c61 String sql=\"select text from t_clob\"\u037e Statement stm=conn.createStatement()\u037e ResultSet rs=stm.executeQuery(sql)\u037e while(rs.next()) { String clobStr =rs.getString(\"text\")\u037e }","title":"7.2 \u67e5\u8be2\u5927\u5bf9\u8c61\u6570\u636e"},{"location":"JDBC2/#_5","text":"\u865a\u8c37\u6570\u636e\u5e93\u662f\u4e00\u6b3e\u5177\u5907\u9ad8\u5b89\u5168\u3001\u9ad8\u6027\u80fd\u3001\u9ad8\u6269\u5c55\u7b49\u7279\u6027\u7684\u3001\u57fa\u4e8e\u5206\u5e03\u5f0f\u67b6\u6784\u7684\u5206\u5e03\u5f0f\u4e8b\u52a1\u578b\u6570\u636e\u5e93\u3002\u90e8\u7f72\u6570\u636e\u5e93\u96c6\u7fa4\u65f6\uff0c\u591a\u53f0\u670d\u52a1\u5668\u4f5c\u4e3a\u4e00\u4e2a\u6574\u4f53\u5bf9\u5916\u63d0\u4f9b\u6570\u636e\u670d\u52a1\u3002\u5728\u591a\u673a\u73af\u5883\u4e0b\uff0c\u4e3a\u4f7f\u6570\u636e\u5e93\u8fde\u63a5\u5747\u5300\u5206\u5e03\u4e8e\u5404\u53f0\u670d\u52a1\uff0c\u865a\u8c37 JDBC \u5728\u63a5\u53e3\u5c42\u5b9e\u73b0\u4e86\u57fa\u4e8e\u8f6f\u8d1f\u8f7d\u5747\u8861\u6280\u672f\u7684\u6570\u636e\u5e93\u8fde\u63a5\u5efa\u7acb\u65b9\u5f0f\u3002 \u865a\u8c37\u6570\u636e\u5e93\u8d1f\u8f7d\u5747\u8861\u5206\u914d\u6570\u636e\u5e93\u8fde\u63a5\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a\u987a\u5e8f\u5206\u914d\u3001\u968f\u673a\u5206\u914d\u3002\u901a\u8fc7\u5728\u6570\u636e\u5e93 URL \u8fde\u63a5\u4e32\u4e0a\u8bbe\u7f6e\u53c2\u6570 conn_type(conn_type:1, \u968f\u673a\u5206\u914d\uff1b2, \u987a\u5e8f\u5206\u914d) \u7c7b\u578b\uff0c\u5b9e\u73b0\u6570\u636e\u5e93\u8fde\u63a5\u5728\u591a\u96c6\u7fa4\u73af\u5883\u4e0b\u7684\u8d1f\u8f7d\u5747\u8861\u3002\u9ed8\u8ba4\u8d1f\u8f7d\u5747\u8861\u5206\u914d\u65b9\u5f0f\uff1a\u987a\u5e8f\u5206\u914d\u3002 \u865a\u8c37 JDBC \u63d0\u4f9b\u4e09\u79cd\u914d\u7f6e\u8d1f\u8f7d\u5747\u8861\u7684\u65b9\u5f0f\uff1a\u6570\u636e\u5e93 URL \u8fde\u63a5\u4e32\u914d\u7f6e\u3001\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u6027\u6587\u4ef6 Properties \u914d\u7f6e\u3001\u6570\u636e\u5e93\u8fde\u63a5 XML \u6587\u4ef6\u914d\u7f6e\u3002 1. URL \u8fde\u63a5\u4e32\u914d\u7f6e Class.forName(\"com.xugu.cloudjdbc.Driver\"); //URL\u8fde\u63a5\u4e32\u4e2d\u4f7f\u7528ips\u5c5e\u6027\u914d\u7f6e\u591aIP\u8d1f\u8f7d\u5747\u8861 Connection conn = DriverManager.getConnection(\"jdbc:xugu://192.168.0.201:5138/SYSTEM?user=SYSDBA&password=SYSDBA&conn_type=1&ips=192.168.0.205,192.168.0.204,192.168.1.206\") \u8fde\u63a5\u5c5e\u6027\u6587\u4ef6 Properties \u914d\u7f6e (Vector \u6216\u5b57\u7b26\u4e32\u6570\u7ec4) Properties info=new Properties(); Class.forName(\"com.xugu.cloudjdbc.Driver\"); //Vector\u7ed3\u6784\u5b58\u653e\u8d1f\u8f7d\u5747\u8861\u591aIP\u5730\u5740\u65b9\u5f0f Vector<String> ipsVector=new Vector<String>(); ipsVector.add(\"192.168.1.201\"); ipsVector.add(\"192.168.1.204\"); ipsVector.add(\"192.168.1.205\"); ipsVector.add(\"192.168.1.206\"); info.put(\"ips\", ipsVector); //\u6570\u7ec4\u5b58\u653e\u8d1f\u8f7d\u5747\u8861\u591aIP\u5730\u5740\u65b9\u5f0f String[] ips={\"192.168.1.205\",\"192.168.1.204\",\"192.168.1.206\"}; info.put(\"ips\", ips); Connection conn = DriverManager.getConnection(\"jdbc:xugu://192.168.1.201:5138/SYSTEM?user=SYSDBA&password=SYSDBA&conn_type=2\",info); \u8fde\u63a5\u5c5e\u6027 XML \u6587\u4ef6\u914d\u7f6e <?xml version=\"1.0\" encoding=\"utf-8\"?> <listeners> <listener> <ip>192.168.1.206</ip> </listener> <listener> <ip>192.168.1.204</ip> </listener> <listener> <ip>192.168.1.205</ip> </listener> </listeners> Class.forName(\"com.xugu.cloudjdbc.Driver\"); Connection conn = DriverManager.getConnection(\"jdbc:xugu:file://xuguClouldListener.xml:5138/SYSTEM?user=SYSDBA&password=SYSDBA&conn_type=1\");","title":"\u516b. \u865a\u8c37\u6570\u636e\u5e93\u8d1f\u8f7d\u5747\u8861"},{"location":"JDBC3/","text":"\u6587\u6863\u5bc6\u7ea7\uff1a\u3010 - \u3011 \u8bf4\u660e\uff1a\u516c\u5f00 \u6587\u6863\u4fee\u8ba2\u5386\u53f2 \u5e8f\u53f7 \u6587\u6863\u7248\u672c \u7a0b\u5e8f\u7248\u672c \u7f16\u64b0\u4eba A-\u589e\u52a0 M-\u66f4\u65b0 D-\u5220\u51cf \u53d8\u66f4\u8bf4\u660e \u5b8c\u6210\u65e5\u671f \u8bc4\u5ba1\u4eba \u8bc4\u5ba1\u65e5\u671f \u8bc4\u5ba1\u7ed3\u679c [\u901a\u8fc7/\u62d2\u7edd] 1 1.0 11.0 \u5468\u5f66\u5f64 A \u6574\u7248\u7f16\u5199 2021-7-12 \u5434\u751f\u52c7 2021-7-12 \u901a\u8fc7 2 2.0 12.0 \u66f9\u831c M \u4fee\u6539\u7b2c\u4e8c\u7ae0\u7c7b\u6269\u5c55\u30014.3\u8fde\u63a5\u53c2\u6570 2022-5-14 \u5468\u5f66\u5f64 2022-5-14 \u901a\u8fc7 3 2.1 12.0 \u66f9\u831c M \u4fee\u6539\u7b2c3.1\u57fa\u672c\u6570\u636e\u7c7b\u578b 2022-6-20 \u5468\u5f66\u5f64 2022-6-20 \u901a\u8fc7 \u4e00. \u865a\u8c37\u6570\u636e\u5e93\u7684JDBC\u9a71\u52a8\u7a0b\u5e8f\u6982\u8ff0 Java \u6570\u636e\u5e93\u8fde\u63a5\uff08Java Database Connectivity\uff0c\u7b80\u79f0 JDBC\uff09\u662f Java \u8bed\u8a00\u4e2d\u7528\u6765\u89c4\u8303\u5ba2\u6237\u7aef\u7a0b\u5e8f\u5982\u4f55\u8bbf\u95ee\u6570\u636e\u5e93\u7684\u5e94\u7528\u7a0b\u5e8f\u63a5\u53e3\uff0c\u63d0\u4f9b\u4e86\u8bf8\u5982\u67e5\u8be2\u548c\u66f4\u65b0\u6570\u636e\u5e93\u4e2d\u6570\u636e\u7684\u65b9\u6cd5\uff0c\u53ef\u4ee5\u4e3a\u591a\u79cd\u5173\u7cfb\u6570\u636e\u5e93\u63d0\u4f9b\u7edf\u4e00\u8bbf\u95ee\u3002JDBC \u63d0\u4f9b\u4e86\u4e00\u79cd\u57fa\u51c6\uff0c\u901a\u8fc7\u6b64\u57fa\u51c6\u6570\u636e\u5e93\u5f00\u53d1\u4eba\u5458\u53ef\u6784\u5efa\u66f4\u9ad8\u7ea7\u7684\u5de5\u5177\u548c\u63a5\u53e3\uff0c\u4e5f\u53ef\u901a\u8fc7\u6b64\u57fa\u51c6\u7f16\u5199\u6570\u636e\u5e93\u5e94\u7528\u7a0b\u5e8f\u3002 \u865a\u8c37\u6570\u636e\u5e93\u7684 JDBC \u9a71\u52a8\u7a0b\u5e8f\uff08\u4ee5\u4e0b\u7b80\u79f0\uff1a\u865a\u8c37 JDBC\uff09\u5b9e\u73b0\u4e86 Java \u7a0b\u5e8f\u548c\u865a\u8c37\u6570\u636e\u5e93\u901a\u4fe1\uff0c\u652f\u6301 SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u7684\u8bbf\u95ee\uff0c\u540c\u65f6\u4e5f\u662f\u6784\u9020\u9ad8\u7ea7 API \u548c\u6570\u636e\u5e93\u5f00\u53d1\u5de5\u5177\u7684\u57fa\u7840\u3002 \u7528\u6237\u60f3\u8981\u5b9e\u73b0\u5bf9\u6570\u636e\u5e93\u7684\u8bbf\u95ee\uff0c\u4e00\u822c\u8981\u7ecf\u8fc7\u5982\u4e0b\u7684\u6b65\u9aa4\uff1a 1. \u901a\u8fc7\u9a71\u52a8\u5668\u7ba1\u7406\u5668\u83b7\u53d6\u8fde\u63a5\u63a5\u53e3\uff1b 2. \u83b7\u5f97 Statement \u6216 Statement \u5b50\u7c7b\uff1b 3. \u901a\u8fc7 Statement \u6267\u884c SQL \u547d\u4ee4\uff1b 4. \u5904\u7406\u6267\u884c\u7ed3\u679c\uff1b 5. \u5173\u95ed Statement\uff1b 6. \u5173\u95ed\u8fde\u63a5\u3002 JDBC \u7ed3\u6784\u56fe, \u5982\u56fe1.1\u6240\u793a\u3002 \u56fe1.1 JDBC\u7ed3\u6784\u56fe \u4f7f\u7528\u865a\u8c37 JDBC \u5b9e\u73b0\u5e94\u7528\u7a0b\u5e8f\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u4e4b\u95f4\u7684\u8fde\u63a5\u670d\u52a1\uff0c\u5e94\u7528\u7a0b\u5e8f\u6240\u5728\u8ba1\u7b97\u673a\u9700\u5df2\u5b89\u88c5 Java \u8fd0\u884c\u73af\u5883\uff08Java Runtime Environment, \u7b80\u79f0 JRE\uff09\u3002\u865a\u8c37 JDBC \u53c2\u7167 JDBC API \u5b9e\u73b0\uff0c\u652f\u6301 JDBC 3.0 \u529f\u80fd\uff0cJava \u5e94\u7528\u7a0b\u5e8f\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u4e4b\u95f4\u7684\u6240\u6709\u64cd\u4f5c\u5747\u9700\u901a\u8fc7\u865a\u8c37 JDBC \u6765\u5b8c\u6210\u3002 \u4f7f\u7528\u865a\u8c37 JDBC \u9700\u8981 JRE 1.6 \u7248\u6216\u66f4\u9ad8\u7248\u672c\u7684 Java \u8fd0\u884c\u65f6\u73af\u5883 (JRE)\u3002 {.is-info} \u4e8c. \u865a\u8c37\u6570\u636e\u5e93\u7684JDBC\u63a5\u53e3\u548c\u5bf9\u8c61\u7c7b JDBC 3.0 \u89c4\u8303\u7531 JDBC 1.0\u3001JDBC 2.0 \u884d\u751f\u800c\u6765\uff0c\u4e3b\u8981\u5305\u542b java.sql \u5305\u4ee5\u53ca javax.sql \u5305\uff0c\u6570\u636e\u5e93 JDBC \u9a71\u52a8\u5b9e\u73b0 JDBC 3.0 \u89c4\u8303\u6240\u5b9a\u4e49\u7684\u7279\u6027\u63a5\u53e3\uff0c\u5373\u53ef\u8fbe\u5230\u5bf9\u6807\u51c6 JDBC 3.0 \u89c4\u8303\u7684\u652f\u6301\u3002 \u865a\u8c37 JDBC \u57fa\u4e8e JDBC 3.0 \u89c4\u8303\u5b9e\u73b0\uff0c\u5b9e\u73b0\u63a5\u53e3\u7c7b\u6620\u5c04\uff0c\u5982\u88682.1\u6240\u793a\u3002 \u88682.1 \u865a\u8c37JDBC\u5b9e\u73b0\u63a5\u53e3\u7c7b | \u63a5\u53e3 | \u865a\u8c37JDBC\u5b9e\u73b0\u7c7b | | ---------------------------------- | ---------------------------------------- | | java.sql.Driver | com.xugu.cloudjdbc.Driver | | java.sql.Connection | com.xugu.cloudjdbc.Connection | | java.sql.Statement | com.xugu.cloudjdbc.Statement | | java.sql.PreparedStatement | com.xugu.cloudjdbc.PreparedStatement | | java.sql.CallableStatement | com.xugu.cloudjdbc.CallableStatement | | java.sql.ResultSet | com.xugu.cloudjdbc.ResultSet | | java.sql.ResultSetMetaData | com.xugu.cloudjdbc.ResultSetMetaData | | java.sql.DatabaseMetaData | com.xugu.cloudjdbc.DatabaseMetaData | | java.sql.PrameterMetaData | com.xugu.cloudjdbc.PrameterMetaData | | java.sql.Types | com.xugu.cloudjdbc.Types | | java.sql.Blob | com.xugu.cloudjdbc.Blob | | java.sql.Clob | com.xugu.cloudjdbc.Clob | | java.sql.Savepoint | com.xugu.cloudjdbc.Savepoint | | javax.sql.DataSource | com.xugu.pool.XgDataSource | | javax.sql.ConnectionPoolDataSource | com.xugu.pool.XgConnectionPoolDataSource | | javx.sql.PooledConnection | com.xugu.pool.XgPooledConnection | \u9664\u4e86\u4ee5\u4e0a\u6807\u51c6\u7c7b\u63a5\u53e3\u5916\uff0c\u865a\u8c37 JDBC \u8fd8\u6269\u5c55\u5b9e\u73b0\u4e86\u4ee5\u4e0b\u7c7b\uff1a - com.xugu.cloudjdbc.ClientInfo - com.xugu.cloudjdbc.OutParameter - com.xugu.cloudjdbc.Rowid - com.xugu.cloudjdbc.SQLXml - com.xugu.cloudjdbc.SSL - com.xugu.pool.StatementWrapper - com.xugu.pool.PreparedStatementWrapper \u4e09. \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b 3.1 \u57fa\u672c\u6570\u636e\u7c7b\u578b \u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b\u3001\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u3001Java \u6570\u636e\u7c7b\u578b\u4e09\u8005\u6620\u5c04\u5173\u7cfb\uff0c\u5982\u88683.1\u6240\u793a\u3002 \u88683.1 \u6570\u636e\u7c7b\u578b\u6620\u5c04\u5173\u7cfb \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b \u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b Java \u6570\u636e\u7c7b\u578b BOOLEAN BOOLEAN boolean SMALLINT SMALLINT short TINYINT TINYINT byte INTEGER INTEGER int BIGINT BIGINT long FLOAT FLOAT float DOUBLE DOUBLE double NUMERIC NUMERIC BigDecimal DECIMAL BigDecimal CHAR CHAR String NCHAR NCHAR String VARCHAR VARCHAR String VARCHAR2 VARCHAR String NVARCHAR2 VARCHAR String BLOB BLOB Blob CLOB CLOB Clob NCLOB BINARY BINARY byte[] VARBINARY LONG VARBINARY DATE DATE Date TIME TIME Time TIMESTAMP TIMESTAMP Timestamp 3.2 \u6269\u5c55\u6570\u636e\u7c7b\u578b \u865a\u8c37 JDBC \u9664\u4e86\u5b9e\u73b0\u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b\uff0c\u8fd8\u6839\u636e\u865a\u8c37\u6570\u636e\u5e93\u81ea\u6709\u7c7b\u578b\u6269\u5c55\u4e86\u90e8\u5206\u6570\u636e\u7c7b\u578b\uff08\u88683.2\u6240\u793a\uff09\uff0c\u5305\u62ec\u4ee5\u4e0b\u6570\u636e\u7c7b\u578b\u3002 1. \u65f6\u95f4\u6570\u636e\u7c7b\u578b DATETIME\u2014\u2014\u2014 \u65e5\u671f\u65f6\u95f4\u7c7b\u578b DATETIME WITH TIME ZONE \u2014\u2014\u2014 \u5e26\u65f6\u533a\u7684\u65e5\u671f\u65f6\u95f4\u7c7b\u578b TIME WITH TIME ZONE \u2014\u2014\u2014 \u5e26\u65f6\u533a\u7684\u65f6\u95f4\u7c7b\u578b INTERVAL YEAR \u2014\u2014\u2014 \u5e74\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL MONTH \u2014\u2014\u2014 \u6708\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY\u2014\u2014\u2014 \u65e5\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL HOUR \u2014\u2014\u2014 \u5c0f\u65f6\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL MINUTE \u2014\u2014\u2014 \u5206\u949f\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL SECOND \u2014\u2014\u2014 \u79d2\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL YEAR TO MONTH \u2014\u2014\u2014 \u5e74\u5230\u6708\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY TO HOUR \u2014\u2014\u2014 \u65e5\u5230\u5c0f\u65f6\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY TO MINUTE \u2014\u2014\u2014 \u65e5\u5230\u5206\u949f\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY TO SECOND \u2014\u2014\u2014 \u65e5\u5230\u79d2\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL HOUR TO MINUTE \u2014\u2014\u2014 \u5c0f\u65f6\u5230\u5206\u949f\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL HOUR TO SECOND \u2014\u2014\u2014 \u5c0f\u65f6\u5230\u79d2\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL MINUTE TO SECOND \u2014\u2014\u2014 \u5206\u949f\u5230\u79d2\u7684\u65f6\u95f4\u95f4\u9694 2. \u6e38\u6807\u6570\u636e\u7c7b\u578b\uff08\u53ea\u5728\u5b58\u50a8\u8fc7\u7a0b\u3001\u51fd\u6570\u3001\u5305\u4e2d\u4f7f\u7528\uff09 CURSOR \u2014\u2014\u2014 \u6e38\u6807\u6570\u636e\u7c7b\u578b SYS_REFCURSOR \u2014\u2014\u2014 \u8fd4\u56de\u6e38\u6807\u6570\u636e\u7c7b\u578b 3. \u5176\u4ed6\u6570\u636e\u7c7b\u578b GUID \u2014\u2014\u2014 \u5168\u5c40\u552f\u4e00\u6807\u8bc6\u7b26 \u88683.2 \u6269\u5c55\u6570\u636e\u7c7b\u578b\u5bf9\u5e94\u8868 \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b \u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b Java \u6570\u636e\u7c7b\u578b DATETIME DATETIME Timestamp DATETIME WITH TIME ZONE DATETIME_TZ String TIME WITH TIME ZONE TIME_TZ String INTERVAL YEAR INTERVAL_Y String INTERVAL MONTH INTERVAL_M INTERVAL DAY INTERVAL_D INTERVAL HOUR INTERVAL_H INTERVAL MINUTE INTERVAL_MI INTERVAL SECOND INTERVAL_S String INTERVAL YEAR TO MONTH INTERVAL_Y2M INTERVAL DAY TO HOUR INTERVAL_D2H INTERVAL DAY TO MINUTE INTERVAL_D2M INTERVAL DAY TO SECOND INTERVAL_D2S INTERVAL HOUR TO MINUTE INTERVAL_H2M INTERVAL HOUR TO SECOND INTERVAL_H2S INTERVAL MINUTE TO SECOND INTERVAL_M2S CURSOR CURSOR \u65e0\u5bf9\u5e94\u7c7b\u578b SYS_REFCURSOR REFCUR GUID GUID String \u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528 ResultSet \u5bf9\u8c61\u6765\u5bf9\u5e94\u83b7\u53d6\u6e38\u6807\u6240\u8fd4\u56de\u6570\u636e\u3002 {.is-info} 3.3 \u6570\u636e\u7c7b\u578b\u8f6c\u6362 \u5728\u8c03\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u4e2d\u7684\u67d0\u4e9b\u65b9\u6cd5\u65f6\uff0c\u9700\u8fdb\u884c Java \u6570\u636e\u7c7b\u578b\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u7684\u8f6c\u6362\uff0c\u8fd9\u4e9b\u65b9\u6cd5\u5305\u62ec\uff1a - ResultSet \u7c7b get\\<Type> \u65b9\u6cd5\uff1b - ResultSet \u7c7b update\\<Type> \u65b9\u6cd5\uff1b - CallableStatement \u7c7b get\\<Type> \u65b9\u6cd5\uff1b - PreparedStatement \u7c7b set\\<Type> \u65b9\u6cd5\u3002 \u6570\u636e\u7c7b\u578b\u4e4b\u95f4\u7684\u8f6c\u6362\uff0c\u9700\u9075\u4ece Java \u6570\u636e\u7c7b\u578b\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u6620\u5c04\u5173\u7cfb\u89c4\u5219\uff0c\u5426\u5219\u53ef\u80fd\u8f6c\u6362\u5931\u8d25\u3002 1. com.xugu.cloudjdbc.ResultSet \u7c7b\u4e2d get\\<Type> \u65b9\u6cd5\u7684\u7c7b\u578b\u8f6c\u6362\uff0c\u5982\u88683.3\u6240\u793a\u3002 2. com.xugu.cloudjdbc.PreparedStatement \u7c7b\u4e2d set\\<Type> \u65b9\u6cd5\u7684\u7c7b\u578b\u8f6c\u6362\uff0c\u5982\u88683.4\u6240\u793a\u3002 X\uff08\u65e0\u4e22\u5931\u8f6c\u6362\uff09\uff1a\u6307\u4ee5\u957f\u7cbe\u5ea6\u7c7b\u578b\u7684 get\\<Type> \u65b9\u6cd5\u83b7\u53d6\u77ed\u7cbe\u5ea6\u6570\u636e\u7c7b\u578b\u5217\u503c\u65e0\u4e22\u5931\u3002 \u5982\uff1a\u4f7f\u7528 getInt() \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u4e3a smallint \u7684\u5217\u6570\u636e\uff0c\u83b7\u53d6\u6570\u636e\u5b8c\u6574\u3002 Z\uff08\u4f9d\u8d56\u8f6c\u6362\uff09\uff1a\u6307 get\\<Type> \u65b9\u6cd5\u4e2d\u7684 Type \u7c7b\u578b\u4e0e\u83b7\u53d6\u6570\u636e\u5e93\u4e2d\u5217\u7684\u6570\u636e\u7c7b\u578b\u4e0d\u4e00\u81f4\uff0c\u6b64\u65f6\u9700\u8981\u901a\u8fc7\u5176\u4ed6\u6570\u636e\u7c7b\u578b\u8f6c\u6362\u4e3a Type \u6570\u636e\u7c7b\u578b\uff0c\u6b64\u8f6c\u6362\u8fc7\u7a0b\u503c\u53ef\u80fd\u4e22\u5931\u90e8\u5206\u6570\u636e\u3002 \u5982\uff1a\u4f7f\u7528 getInt() \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u4e3a float \u7684\u5217\u6570\u636e\uff0c\u53ef\u83b7\u53d6 float \u5217\u6570\u636e\u7684\u6574\u6570\u503c\uff0c\u800c\u5c0f\u6570\u7cbe\u5ea6\u503c\u5c06\u4e22\u5931\u3002 Y\uff08\u76f4\u63a5\u8f6c\u6362\uff09\uff1a\u6307 get\\<Type> \u65b9\u6cd5\u4e2d\u7684 Type \u7c7b\u578b\u4e0e\u83b7\u53d6\u6570\u636e\u5e93\u4e2d\u5217\u7684\u6570\u636e\u7c7b\u578b\u4e00\u81f4\u3002 \u5982\uff1a\u4f7f\u7528 getInt() \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u4e3a integer \u7684\u5217\u6570\u636e\uff0c\u76f4\u63a5\u83b7\u53d6\u5b8c\u6574\u6570\u636e\u3002 {.is-info} P\uff08\u5141\u8bb8\u63d2\u5165\uff09\uff1a\u6307 set\\<Type> \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u5e93\u4e2d\u5217\u6570\u636e\u65f6\uff0c\u6570\u636e\u65e0\u635f\u5931\u5b58\u5165\u6570\u636e\u5e93\u4e2d\u3002 \u5982\uff1a\u4f7f\u7528 setInt() \u65b9\u6cd5\u8bbe\u7f6e\u5217\u6570\u636e\u7c7b\u578b\u4e3a bigint \u7684\u6570\u636e\u65f6\uff0c\u6570\u636e\u53ef\u6b63\u786e\u5b58\u5165\u3002 Z\uff08\u90e8\u5206\u63d2\u5165\uff09\uff1a\u6307 set\\<Type> \u65b9\u6cd5\u4e2d\u7684 Type \u7c7b\u578b\u548c\u6570\u636e\u5e93\u4e2d\u5217\u6570\u636e\u7c7b\u578b\u4e0d\u4e00\u81f4\uff0c\u6570\u636e\u4ec5\u80fd\u90e8\u5206\u6b63\u786e\u5b58\u5165\u3002 \u5982\uff1a\u4f7f\u7528 setInt() \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u5e93\u5217\u7c7b\u578b\u4e3a tinyint \u7684\u6570\u636e\uff0c\u56e0 tinyint \u8868\u793a\u8303\u56f4\u4e3a-128\uff5e127 \u7684\u6574\u6570\u503c\uff0c\u6545\u800c tinyint\u8868\u793a\u8303\u56f4\u5185\u6570\u636e\u53ef\u6b63\u786e\u5b58\u5165\uff0c\u8303\u56f4\u5916\u6570\u636e\u5c06\u63d2\u5165\u5931\u8d25\u3002 {.is-info} \u56db. \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5 4.1 \u90e8\u7f72JDBC\u9a71\u52a8\u7a0b\u5e8f \u901a\u8fc7\u865a\u8c37 JDBC \u9a71\u52a8\u8bbf\u95ee\u865a\u8c37\u6570\u636e\u5e93\uff0c\u9996\u5148\u5e94\u4fdd\u8bc1\u5e94\u7528\u7a0b\u5e8f\u6b63\u786e\u5f15\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u5305 (cloudjdbc-*.*.*.jar)\uff0c\u5373\u5c06\u9a71\u52a8\u5305\u62f7\u8d1d\u81f3\u5e94\u7528\u7a0b\u5e8f\u5e76\u6dfb\u52a0\u5f15\u7528\u3002 4.2 \u52a0\u8f7dJDBC\u9a71\u52a8\u7a0b\u5e8f \u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u8fdb\u884c\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u8c03\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u7a0b\u5e8f\uff0c\u9996\u5148\u8981\u5c06\u865a\u8c37 JDBC \u9a71\u52a8\u52a0\u8f7d\u5230\u7cfb\u7edf\u5185\u5b58\u4e2d\uff0c\u7136\u540e\u4f9b\u7cfb\u7edf\u4f7f\u7528\u3002\u865a\u8c37 JDBC \u7684\u9a71\u52a8\u5b9e\u73b0\u7c7b\u4e3acom.xugu.cloudjdbc.Driver\uff0c\u4ee5\u4e0b\u662f\u5c06\u865a\u8c37 JDBC \u9a71\u52a8\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\u7684\u4ee3\u7801\uff1a //\u663e\u793a\u6ce8\u518c DriverManager.registerDriver(new com.xugu.cloudjdbc.Driver())\u037e //\u9690\u5f0f\u6ce8\u518c Class.forName(\u201ccom.xugu.cloudjdbc.Driver\u201d)\u037e \u9690\u5f0f\u6ce8\u518c\u5373\u901a\u8fc7 Class.forName() \u5c06\u5bf9\u5e94\u7684\u9a71\u52a8\u7c7b\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\uff0c\u5c06\u6267\u884c\u5185\u5b58\u4e2d\u7684 static \u9759\u6001\u4ee3\u7801\u6bb5\uff0c\u6b64\u4ee3\u7801\u6bb5\u4f1a\u521b\u5efa\u4e00\u4e2a\u865a\u8c37 JDBC \u9a71\u52a8\u7684\u5b9e\u4f8b\uff0c\u5e76\u653e\u5165 DriverManager \u4e2d\uff0c\u4f9b DriverManager \u4f7f\u7528\u3002 {.is-info} 4.3 \u8fde\u63a5\u5b57\u4e32\u53ca\u53c2\u6570\u8bbe\u7f6e \u865a\u8c37 JDBC \u9a71\u52a8\u8fde\u63a5 URL \u4e32\u683c\u5f0f\uff1a jdbc:xugu://serverIP:portNumber/databaseName[?property=value[&property=value]] \u865a\u8c37 JDBC \u9a71\u52a8\u8fde\u63a5 URL \u4e32\u683c\u5f0f\uff1a 1). jdbc:xugu:// \uff1a\uff08\u5fc5\u9700\uff09\u865a\u8c37\u6570\u636e\u5e93\u7279\u5b9a\u534f\u8bae\u3002 2). serverIP \uff1a\uff08\u5fc5\u9700\uff09\u865a\u8c37\u6570\u636e\u5e93\u6240\u5728\u670d\u52a1\u5668\u7684 IP \u5730\u5740\u3002 3). portNumber\uff1a\uff08\u5fc5\u9700\uff09\u662f\u865a\u8c37\u6570\u636e\u5e93\u670d\u52a1 TCP \u8bbf\u95ee\u7aef\u53e3\uff0c\u9ed8\u8ba4 5138\u3002 4). databaseName\uff1a\uff08\u5fc5\u9700\uff09\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u5e93\u540d\u79f0\u3002 5). property\uff1a\uff08\u53ef\u9009\uff09\u865a\u8c37\u6570\u636e\u5e93\u7684 URL \u8fde\u63a5\u5c5e\u6027\u3002\u591a\u4e2a\u8fde\u63a5\u5c5e\u6027\u4e4b\u95f4\u4f7f\u7528\u201c&\u201d\u5206\u9694\uff0c\u4e0d\u53ef\u91cd\u590d\u3002 \u865a\u8c37 JDBC \u9a71\u52a8 URL \u4e32\u793a\u4f8b\u5982\u4e0b\uff1a String url = jdbc:xugu://localhost:5138/System?user=GUEST&password=GUEST\u037e property \u8bbe\u7f6e\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u6027\uff0c\u5e38\u7528\u8fde\u63a5\u5c5e\u6027\u89c1\u88684.1\u3002 \u88684.1 \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u6027 table th:first-of-type { width: 20%; } table th:nth-of-type(2) { width: 10%; } table th:nth-of-type(3) { width: 10%; } table th:nth-of-type(4) { width: 50%; } \u5c5e\u6027\u540d\u79f0 \u5fc5\u9009\u9879 \u53d6\u503c \u8bf4\u660e database \u221a \u5b57\u7b26\u4e32 \u6570\u636e\u5e93\u540d\u79f0 user \u221a \u5b57\u7b26\u4e32 \u7528\u6237\u540d\u79f0 password \u221a \u5b57\u7b26\u4e32 \u7528\u6237\u5bc6\u7801 encryptor \u00d7 \u5b57\u7b26\u4e32 \u7528\u4e8e\u542f\u52a8\u52a0\u5bc6\u6570\u636e\u5e93\uff0c\u82e5\u5e93\u672a\u52a0\u5bc6\uff0c\u5219\u53ef\u4e0d\u8981\uff0c\u4f46\u5e26\u4e0a\u6b64\u53c2\u6570\u4e0d\u4f1a\u5f71\u54cd\u8fde\u63a5 char_set \u00d7 \u5b57\u7b26\u4e32 \u8fde\u63a5\u5b57\u7b26\u96c6\u3002'GB2312'\u3001'GBK'\u3001'UTF8' \u7b49\uff0c\u9ed8\u8ba4\uff1aGBK time_zone \u00d7 \u5b57\u7b26\u4e32 \u5ba2\u6237\u7aef\u65f6\u533a\u3002\u9ed8\u8ba4\uff1a\u865a\u8c37\u6570\u636e\u5e93\u914d\u7f6e\u53c2\u6570 def_timezone \u6240\u8bbe\u7f6e\u65f6\u533a\uff08\u53ea\u5bf9\u7cfb\u7edf\u65f6\u95f4\u51fd\u6570\u751f\u6548\uff09 iso_level \u00d7 \u5b57\u7b26\u4e32 'READ COMMITED'\uff1a\u8bfb\u5df2\u63d0\u4ea4\uff1b 'REPEATIABLE READ'\uff1a\u53ef\u91cd\u590d\u8bfb\uff1b'SERIALIZABLE'\uff1a\u5e8f\u5217\u5316 lock_time \u00d7 \u6570\u503c \u5355\u4f4d\uff1a\u6beb\u79d2\uff0c\u9ed8\u8ba4\u503c\uff1a0\uff0c\u8868\u793a\u8fde\u63a5\u4e2d\u7684\u4e8b\u52a1\u9501\u5f81\u7528\u65f6\uff0c\u6700\u5927\u7b49\u5019\u65f6\u95f4\uff0c\u82e5\u5728\u8bbe\u7f6e\u65f6\u95f4\u5185\u52a0\u9501\u5931\u8d25\uff0c\u56de\u6eda\u4e8b\u52a1\u5e76\u62a5\u9519 lob_ret \u00d7 \u5b57\u7b26\u4e32 \u5927\u5bf9\u8c61\uff08Blob\u3001Clob\uff09\u6570\u636e\u8fd4\u56de\u65b9\u5f0f\u3002\u5c5e\u6027\u4e3a descriptor \u65f6\uff0c\u4ee5\u63cf\u8ff0\u7b26\u65b9\u5f0f\u8fd4\u56de\uff1b\u5176\u4ed6\u4ee5\u6570\u636e\u6d41\u65b9\u5f0f\u8fd4\u56de\u3002\u9ed8\u8ba4\uff1a\u4ee5\u6570\u636e\u6d41\u65b9\u5f0f\u8fd4\u56de return_rowid \u00d7 \u5e03\u5c14\u503c \u662f\u5426\u8fd4\u56de\u8bb0\u5f55 rowid \u503c\u3002\u5c5e\u6027\u4e3a TRUE \u65f6\uff0c\u8fd4\u56de rowid\uff1b\u5176\u4ed6\u8fd4\u56de FALSE\u3002\u9ed8\u8ba4\uff1aFALSE auto_commit \u00d7 on/off \u4e8b\u52a1\u662f\u5426\u81ea\u52a8\u63d0\u4ea4\u3002\u5c5e\u6027\u4e3a ON \u65f6\uff0c\u8fde\u63a5\u81ea\u52a8\u63d0\u4ea4\uff1b\u5c5e\u6027\u4e3a OFF\u65f6\uff0c\u8fde\u63a5\u975e\u81ea\u52a8\u63d0\u4ea4\u3002\u9ed8\u8ba4\uff1aON conn_type \u00d7 \u6570\u503c \u8d1f\u8f7d\u5747\u8861\u5206\u914d\u65b9\u5f0f\u3002\u5c5e\u6027\u4e3a 1 \u65f6\uff0c\u968f\u673a\u5206\u914d\uff1b\u5c5e\u6027\u4e3a 2 \u65f6\uff0c\u987a\u5e8f\u5206\u914d\u3002\u9ed8\u8ba4\uff1a2 ips \u00d7 \u5b57\u7b26\u4e32 \u8d1f\u8f7d\u5747\u8861\u8fde\u63a5 IP \u5730\u5740\uff0c\u591a\u4e2a IP \u5730\u5740\u4ee5\u9017\u53f7\u5206\u9694\uff08\u8be6\u7ec6\u89c1\u8d1f\u8f7d\u5747\u8861\uff09 CompatibleOracle \u00d7 \u5e03\u5c14\u503c \u517c\u5bb9 Oracle \u9009\u9879\u3002\u5c5e\u6027\u4e3a true\uff0c\u517c\u5bb9 Oracle\u037e \u5c5e\u6027\u4e3a FALSE\uff0c\u865a\u8c37 JDBC \u81ea\u6709\u5b9e\u73b0 recv_mode \u00d7 \u6570\u503c \u63a5\u6536\u6a21\u5f0f\u9009\u9879\u3002\u5c5e\u6027\u503c\u4e3a 0 \u65f6\uff0c\u672c\u5730\u5168\u63a5\u6536\u6a21\u5f0f\uff1b\u5c5e\u6027\u503c\u4e3a 1 \u65f6\uff0c\u7f51\u7edc\u63a5\u6536\u6a21\u5f0f\uff1b\u5c5e\u6027\u503c\u4e3a 2 \u65f6\uff0c\u670d\u52a1\u5668\u7aef\u6e38\u6807\u63a5\u6536\u6a21\u5f0f\u3002\u9ed8\u8ba4\uff1a0 emptyStringAsNull \u00d7 \u5e03\u5c14\u503c \u7a7a\u5b57\u4e32\u5904\u7406\u3002\u5c5e\u6027\u4e3a FALSE \u65f6\uff0c\u7a7a\u5b57\u7b26\u4e32\u8ba4\u5b9a\u4e3a NULL\uff1b\u5c5e\u6027\u4e3a TRUE \u65f6\uff0c\u7a7a\u5b57\u7b26\u4e32\u4fdd\u7559\u3002\u9ed8\u8ba4\uff1a\u7a7a\u5b57\u4e32\u4fdd\u7559 xgversion \u00d7 201/301 \u5ba2\u6237\u7aef\u534f\u8bae\u7248\u672c\uff0c\u865a\u8c37\u6570\u636e\u5e93V12\u7248\u672c\u5347\u7ea7\u652f\u6301301\u534f\u8bae\uff0c\u540c\u65f6\u517c\u5bb9201\u534f\u8bae SSL \u00d7 SSL \u8fde\u63a5\u52a0\u5bc6\u53c2\u6570\u3002\u5c5e\u6027\u503c\u3010SSL\uff1a\u542f\u7528SSL\u52a0\u5bc6\u4f20\u8f93\uff1bNSSL\uff1a\u7981\u7528SSL\u52a0\u5bc6\u4f20\u8f93\u3011 slowsqltime \u00d7 \u6570\u503c \u8bbe\u7f6e\u6162SQL\u6267\u884c\u65f6\u95f4\u3002SQL\u8bed\u53e5\u6267\u884c\u65f6\u95f4\u8d85\u8fc7\u8be5\u6570\u503c\uff0c\u65e5\u5fd7\u5219\u4f1a\u8f93\u51fa\u6267\u884cSQL batch_mode \u00d7 \u5e03\u5c14\u503c PreparedStatement\u662f\u5426\u4f7f\u7528\u6279\u91cf\u5904\u7406\u3002\u5c5e\u6027\u4e3a TRUE \u65f6\uff0cexecuteBatch\u91c7\u7528\u6279\u91cf\u6a21\u578b\uff1bFALSE\u5219\u91c7\u7528\u5355\u6761\u5904\u7406\u6a21\u578b\u3002\u9ed8\u8ba4\uff1aFALSE \u8fde\u63a5\u53c2\u6570\u4f7f\u7528SSL\u5c5e\u6027\u65f6\uff0c\u4f9d\u8d56\u7a0b\u5e8f\u5305\u4e2d\u63d0\u4f9b\u7684\u52a8\u6001\u94fe\u63a5\u5e93\uff0c\u4f7f\u7528\u524d\u9700\u5c06\u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u5230\u64cd\u4f5c\u7cfb\u7edf\u6307\u5b9a\u4f4d\u7f6e\u65b9\u53ef\u6b63\u5e38\u4f7f\u7528SSL\u52a0\u5bc6\u529f\u80fd\u3002 Windows 32\u4f4d\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u7528SSL\u5c5e\u6027\u524d\uff0c\u9700\u5c06\u7a0b\u5e8f\u5305 ssl/win32 \u4e0b xgssl.dll \u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u62f7\u8d1d\u5230\u7cfb\u7edf\u76ee\u5f55 C:/windows/system32 \u76ee\u5f55\u4f4d\u7f6e\u3002 Windows 64\u4f4d\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u7528SSL\u5c5e\u6027\u524d\uff0c\u9700\u5c06\u7a0b\u5e8f\u5305 ssl/win64 \u4e0b xgssl.dll \u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u62f7\u8d1d\u5230\u7cfb\u7edf\u76ee\u5f55 C:/windows/system32 \u76ee\u5f55\u4e0b\u3002 Linux X64\u4f4d\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u7528SSL\u5c5e\u6027\u524d\uff0c\u9700\u5c06\u7a0b\u5e8f\u5305 ssl/linux64 \u4e0b libxgssl.so \u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u62f7\u8d1d\u5230\u7cfb\u7edf\u76ee\u5f55 /usr/lib\u6216\u8005/usr/lib4 \u76ee\u5f55\u4e0b\u3002 \u865a\u8c37 JDBC \u8bbe\u7f6e\u8fde\u63a5\u5c5e\u6027\u793a\u4f8b\u5982\u4e0b (\u7248\u672c\u53f7\u3001\u5927\u5bf9\u8c61\u63cf\u8ff0\u7b26\u3001\u65f6\u533a\u3001\u5173\u95ed\u8fde\u63a5\u81ea\u52a8\u63d0\u4ea4)\uff1a String url=jdbc:xugu://localhost:5138/System?user=GUEST&password=GUEST&version=110&auto_commit=false&lob_ret=descriptor&time_zone=GMT-8:00\u037e 4.4 \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5 \u5728\u5e94\u7528\u7a0b\u5e8f\u5c06\u865a\u8c37 JDBC \u9a71\u52a8\u52a0\u8f7d\u5230\u7cfb\u7edf\u5185\u5b58\u4e2d\u540e\uff0c\u53ef\u901a\u8fc7 DriverManager \u7c7b\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u65b9\u6cd5\u5982\u4e0b\uff1a DriverManager.getConnection(String url)\u037e DriverManager.getConnection(String url,Properties)\u037e DriverManager.getConnection(String url,String user,String password)\u037e \u4e94. \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u6e90\u548c\u8fde\u63a5\u6c60 \u901a\u8fc7 DriverManager \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u4ee5\u5916\uff0c\u8fd8\u53ef\u4ee5\u4f7f\u7528\u6570\u636e\u6e90\u6216\u8fde\u63a5\u6c60\u65b9\u5f0f\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u3002\u901a\u8fc7\u6570\u636e\u6e90\u65b9\u5f0f\u6216\u8fde\u63a5\u6c60\u65b9\u5f0f\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u6709\u4ee5\u4e0b\u4f18\u70b9\uff1a - \u8d44\u6e90\u91cd\u7528 \u7531\u4e8e\u6570\u636e\u5e93\u8fde\u63a5\u5f97\u5230\u91cd\u7528\uff0c\u907f\u514d\u4e86\u9891\u7e41\u521b\u5efa\u3001\u91ca\u653e\u8fde\u63a5\u5f15\u8d77\u7684\u5927\u91cf\u6027\u80fd\u5f00\u9500\u3002\u5728\u51cf\u5c11\u7cfb\u7edf\u6d88\u8017\u7684\u57fa\u7840\u4e0a\uff0c\u53e6\u4e00\u65b9\u9762\u4e5f\u589e\u8fdb\u4e86\u7cfb\u7edf\u8fd0\u884c\u73af\u5883\u7684\u5e73\u7a33\u6027\uff08\u51cf\u5c11\u5185\u5b58\u788e\u7247\u4ee5\u53ca\u6570\u636e\u5e93\u4e34\u65f6\u8fdb\u7a0b/\u7ebf\u7a0b\u7684\u6570\u91cf\uff09\u3002 - \u66f4\u5feb\u7684\u7cfb\u7edf\u54cd\u5e94 \u6570\u636e\u5e93\u8fde\u63a5\u6c60\u5728\u521d\u59cb\u5316\u8fc7\u7a0b\u4e2d\uff0c\u5f80\u5f80\u5df2\u7ecf\u521b\u5efa\u4e86\u82e5\u5e72\u6570\u636e\u5e93\u8fde\u63a5\u7f6e\u4e8e\u6c60\u4e2d\u5907\u7528\u3002\u6b64\u65f6\u8fde\u63a5\u7684\u521d\u59cb\u5316\u5de5\u4f5c\u5747\u5df2\u5b8c\u6210\u3002\u5bf9\u4e8e\u4e1a\u52a1\u8bf7\u6c42\u5904\u7406\u800c\u8a00\uff0c\u76f4\u63a5\u5229\u7528\u73b0\u6709\u53ef\u7528\u8fde\u63a5\uff0c\u907f\u514d\u4e86\u6570\u636e\u5e93\u8fde\u63a5\u521d\u59cb\u5316\u548c\u91ca\u653e\u8fc7\u7a0b\u7684\u65f6\u95f4\u5f00\u9500\uff0c\u4ece\u800c\u7f29\u51cf\u4e86\u7cfb\u7edf\u6574\u4f53\u54cd\u5e94\u65f6\u95f4\u3002 - \u65b0\u7684\u8d44\u6e90\u5206\u914d\u624b\u6bb5 \u5bf9\u4e8e\u591a\u5e94\u7528\u5171\u4eab\u540c\u4e00\u6570\u636e\u5e93\u7684\u7cfb\u7edf\u800c\u8a00\uff0c\u53ef\u5728\u5e94\u7528\u5c42\u901a\u8fc7\u6570\u636e\u5e93\u8fde\u63a5\u7684\u914d\u7f6e\uff0c\u9650\u5236\u5355\u4e00\u5e94\u7528\u7533\u8bf7\u6570\u636e\u5e93\u8fde\u63a5\u6570\uff0c\u4ece\u800c\u907f\u514d\u5355\u4e00\u5e94\u7528\u72ec\u5360\u6240\u6709\u6570\u636e\u5e93\u8d44\u6e90\u3002 \u865a\u8c37 JDBC \u4e2d\u6570\u636e\u6e90\u5b9e\u73b0\u7c7b\u4e3a com.xugu.pool.XgDataSource\uff0c\u8fde\u63a5\u6c60\u5b9e\u73b0\u7c7b\u4e3acom.xugu.pool \u5305\u4e2d\u7684 XgDataSource\u3001XgPooledConnection\u3001XgConnectionPoolDataSource\u3001XgConnectionEventListener\u3001XgConnectionEvent\u3002 5.1 \u4f7f\u7528\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u6e90\u521b\u5efa\u8fde\u63a5 XgDataSource \u63d0\u4f9b set \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u6e90\u8fde\u63a5\u5c5e\u6027\uff1a \u793a\u4f8b\uff1a\u901a\u8fc7 XgDataSource \u4e0e\u865a\u8c37\u6570\u636e\u5e93\u5efa\u7acb\u8fde\u63a5 com.xugu.pool.XgDataSource ds = new com.xugu.pool.XgDataSource()\u037e ds.setUrl(\"jdbc:xugu://127.0.0.1:5138/db\")\u037e ds.setUser(\"SYSDBA\")\u037e ds.setPassword(\"SYSDBA\")\u037e Properties pro = new Properties()\u037e pro.setProperty(\"return_rowid\", \"true\")\u037e pro.setProperty(\"auto_commit\", \"off\")\u037e ds.setPro(pro)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u767b\u5f55\u4e32\u3002url\u4e3a\u6570\u636e\u5e93\u767b\u5f55\u4e32 setUrl(String url)\uff1b //\u6307\u5b9a\u6570\u636e\u5e93\u670d\u52a1\u5668\u3002host\u4e3a\u670d\u52a1\u5668\u5730\u5740 setHostName(String host)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u540d\u3002dbName\u4e3a\u6570\u636e\u5e93\u540d setDatabaseName(String dbName)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u7aef\u53e3\u53f7\u3002port\u4e3a\u6570\u636e\u5e93\u7aef\u53e3\u53f7 setPort(int port)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u7528\u6237\u3002userName\u4e3a\u6570\u636e\u5e93\u767b\u5f55\u7528\u6237\u540d setUser(String userName)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u767b\u5f55\u5bc6\u7801\u3002passWord\u4e3a\u6570\u636e\u5e93\u767b\u5f55\u5bc6\u7801 setPassword(Stirng passWord)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u767b\u5f55\u53c2\u6570\u3002ds_pro\u4e3a\u6570\u636e\u5e93\u8fde\u63a5\u53c2\u6570 setPro(Properties ds_pro)\uff1b // \u901a\u8fc7\u6570\u636e\u6e90\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5 Connection conn = ds.getConnection()\u037e \u5728 com.xugu.pool.XgDataSource \u7c7b\u4e2d\u901a\u8fc7 setXX() \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u6e90\u7684\u8fde\u63a5\u5c5e\u6027\uff0c\u82e5\u672a\u6307\u5b9a\u5219\u4f7f\u7528\u9ed8\u8ba4\u5c5e\u6027\u503c\uff1a\u6570\u636e\u5e93\u670d\u52a1\u5668\u5730\u5740\u9ed8\u8ba4\u4e3a\u201clocalhost\u201d \uff0c\u8fde\u63a5\u6570\u636e\u5e93\u9ed8\u8ba4\u4e3a\u201cSYSTEM\u201d \uff0c\u8bbf\u95ee\u7aef\u53e3\u53f7\u9ed8\u8ba4\u4e3a\u201c5138\u201d \uff0c\u8bbf\u95ee\u7528\u6237\u540d\u9ed8\u8ba4\u4e3a\u201cGUEST\u201d \uff0c\u7528\u6237\u5bc6\u7801\u9ed8\u8ba4\u4e3a\u201cGUEST\u201d \u3002URL \u9ed8\u8ba4\u8fde\u63a5\u4e32\u4e3a\u201cjdbc:xugu://127.0.0.1:5138/SYSTEM?user=GUEST&password=GUEST&version=110\u201d\u3002\u6570\u636e\u6e90\u5efa\u7acb\u540e\uff0c\u53ef\u901a\u8fc7\u8c03\u7528 XgDataSource \u7c7b\u4e2d\u7684 getConnection() \u548c getConnection(String username,String password) \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u3002 5.2 \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u6c60 \u8fde\u63a5\u6c60\u6280\u672f\u7684\u6838\u5fc3\u601d\u60f3\u662f\uff1a\u8fde\u63a5\u590d\u7528\uff0c\u901a\u8fc7\u5efa\u7acb\u4e00\u4e2a\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u4ee5\u53ca\u4e00\u5957\u8fde\u63a5\u4f7f\u7528\u3001\u5206\u914d\u3001\u7ba1\u7406\u7b56\u7565\uff0c\u8be5\u8fde\u63a5\u6c60\u4e2d\u7684\u8fde\u63a5\u53ef\u4ee5\u5f97\u5230\u9ad8\u6548\u3001\u5b89\u5168\u7684\u590d\u7528\uff0c\u907f\u514d\u4e86\u6570\u636e\u5e93\u8fde\u63a5\u9891\u7e41\u5efa\u7acb\u3001\u5173\u95ed\u7684\u5f00\u9500\u3002 \u865a\u8c37 JDBC \u8fde\u63a5\u6c60\u5b9e\u73b0\u7c7b\u5bf9\u865a\u8c37\u6570\u636e\u5e93\u539f\u59cb\u8fde\u63a5\u8fdb\u884c\u4e86\u5c01\u88c5\uff0c\u4ece\u800c\u65b9\u4fbf\u4e86\u6570\u636e\u5e93\u5e94\u7528\u5bf9\u4e8e\u8fde\u63a5\u7684\u4f7f\u7528\uff08\u7279\u522b\u662f\u5bf9\u4e8e\u4e8b\u52a1\u5904\u7406\uff09\uff0c\u63d0\u9ad8\u4e86\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u6548\u7387\uff0c\u4e5f\u6b63\u662f\u56e0\u4e3a\u8fd9\u4e2a\u5c01\u88c5\u5c42\u7684\u5b58\u5728\uff0c\u9694\u79bb\u4e86\u5e94\u7528\u7684\u672c\u8eab\u7684\u5904\u7406\u903b\u8f91\u548c\u5177\u4f53\u6570\u636e\u5e93\u8bbf\u95ee\u903b\u8f91\uff0c\u4f7f\u5e94\u7528\u672c\u8eab\u7684\u590d\u7528\u6210\u4e3a\u53ef\u80fd\u3002\u8fde\u63a5\u6c60\u4e3b\u8981\u7531\u4e09\u90e8\u5206\u7ec4\u6210\uff1a\u8fde\u63a5\u6c60\u7684\u5efa\u7acb\u3001\u8fde\u63a5\u6c60\u4e2d\u8fde\u63a5\u7684\u4f7f\u7528\u7ba1\u7406\u3001\u8fde\u63a5\u6c60\u7684\u5173\u95ed\u3002 \u865a\u8c37 JDBC \u8fde\u63a5\u6c60\u7684\u57fa\u672c\u601d\u60f3\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u5efa\u7acb\u4e00\u4e2a\u201c\u7f13\u51b2\u6c60\u201d\u3002\u9884\u5148\u5728\u201c\u7f13\u51b2\u6c60\u201d\u4e2d\u653e\u5165\u4e00\u5b9a\u6570\u91cf\u7684\u8fde\u63a5\uff0c\u5f53\u9700\u8981\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65f6\uff0c\u53ea\u9700\u4ece\u201c\u7f13\u51b2\u6c60\u201d\u4e2d\u53d6\u51fa\u4e00\u4e2a\uff0c\u4f7f\u7528\u5b8c\u6bd5\u4e4b\u540e\u518d\u653e\u56de\u53bb\u3002\u901a\u8fc7\u8bbe\u5b9a\u8fde\u63a5\u6c60\u6700\u5927\u8fde\u63a5\u6570\u6765\u9632\u6b62\u7cfb\u7edf\u65e0\u5c3d\u7684\u4e0e\u6570\u636e\u5e93\u8fde\u63a5\u3002\u4ea6\u53ef\u901a\u8fc7\u8fde\u63a5\u6c60\u7684\u7ba1\u7406\u673a\u5236\u76d1\u89c6\u6570\u636e\u5e93\u7684\u8fde\u63a5\u6570\u91cf\u3001\u4f7f\u7528\u60c5\u51b5\uff0c\u4e3a\u7cfb\u7edf\u5f00\u53d1\u3001\u6d4b\u8bd5\u53ca\u6027\u80fd\u8c03\u6574\u63d0\u4f9b\u4f9d\u636e\u3002 \u5f53\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u5b8c\u6570\u636e\u5e93\u8fde\u63a5\u8c03\u7528\u8fde\u63a5\u5173\u95ed\u65b9\u6cd5\u65f6\uff0c\u8be5\u8fde\u63a5\u5e76\u672a\u9500\u6bc1\uff0c\u800c\u662f\u88ab\u5f52\u8fd8\u7ed9\u8fde\u63a5\u6c60\u7b49\u5f85\u4e0b\u6b21\u7ee7\u7eed\u8c03\u7528\u3002 {.is-info} \u865a\u8c37 JDBC \u5b9e\u73b0\u8fde\u63a5\u6c60\u670d\u52a1\u6240\u63d0\u4f9b\u7684\u63a5\u53e3\u7c7b\u5982\u4e0b\uff1a - XgDataSource \u5b9e\u73b0 javax.sql.DataSource \u63a5\u53e3\uff1b - XgPooledConnection \u5b9e\u73b0 javax.sql.PooledConnection \u63a5\u53e3\uff1b - XgConnectionPoolDataSource \u5b9e\u73b0 javax.sql.ConnectionPoolDataSource \u63a5\u53e3\uff1b - XgConnectionEventListener \u5b9e\u73b0 javax.sql.ConnectionEventListener \u63a5\u53e3\uff1b - XgConnectionEvent \u7ee7\u627f\u81ea javax.sql.ConnectionEvent \u7c7b\u3002 \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u4e2d\u7684\u8fde\u63a5\u5747\u662f\u901a\u8fc7\u6570\u636e\u6e90\u5efa\u7acb\u7684\uff0c\u6545\u800c XgConnectionPoolDataSource \u7ee7\u627f\u4e86 com.xugu.pool.XgDataSource \u7c7b\u3002\u7528\u6237\u4ea6\u53ef\u901a\u8fc7 XgConnectionPoolDataSource \u5bf9\u8c61\u8bbe\u7f6e\u6570\u636e\u6e90\u5c5e\u6027\u548c\u8fde\u63a5\u6c60\u5c5e\u6027\uff1a //\u6700\u5c0f\u8fde\u63a5\u6570 setMinIdle(int min) //\u6700\u5927\u8fde\u63a5\u6570 setMaxActive(int max) //\u767b\u5f55\u7a7a\u95f2\u65f6\u95f4 setLoginTimeout(int time) //\u6700\u5927\u7b49\u5f85\u8fde\u63a5\u8d85\u65f6 setMaxWaitTime(long waitTime) \u5176\u4e2d\uff1asetLoginTimeout() \u548c setMaxWaitTime() \u65b9\u6cd5\u4e2d\u53c2\u6570\u5355\u4f4d\u4e3a\u6beb\u79d2\uff0c\u5176\u4ed6\u65b9\u6cd5\u4e2d\u53c2\u6570\u5355\u4f4d\u4e3a\u79d2\u3002 \u793a\u4f8b\uff1a\u521b\u5efa\u4e00\u4e2a\u865a\u8c37 JDBC \u8fde\u63a5\u6c60\uff0c\u5e76\u901a\u8fc7\u8fde\u63a5\u6c60\u83b7\u53d6\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u3002 XgConnectionPoolDataSource CPDSource = new XgConnectionPoolDataSource()\u037e CPDSource.setHostName(\u201clocalhost\u201d)\u037e CPDSource.setPort(5138)\u037e CPDSource.setDatabaseName(\u201cxuguNew\u201d)\u037e CPDSource.setUser(\u201cSYSDBA\u201d)\u037e CPDSource.setPassword(\u201cSYSDBA\u201d)\u037e CPDSource.setUrl(\"jdbc:xugu://localhost:5138/xuguNew)\u037e CPDSource.setMaxActive(50)\u037e CPDSource.setMinIdle(5)\u037e CPDSource.setLoginTimeout(3000)\u037e CPDSource.setMaxWaitTime(3000)\u037e XgPooledConnection Pconn = (XgPooledConnection)CPDSource.getPooledConnection()\u037e Connection conn = Pconn.getConnection()\u037e \u516d. \u865a\u8c37\u6570\u636e\u5e93\u7684JDBC\u4ea4\u4e92\u6d41\u7a0b \u4f7f\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u5b9e\u73b0\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u4ea4\u4e92\u7684\u4e00\u822c\u4f7f\u7528\u6b65\u9aa4\uff1a\u5bfc\u5165\u865a\u8c37 JDBC \u9a71\u52a8\u5305 \u2192 \u52a0\u8f7d\u865a\u8c37 JDBC \u9a71\u52a8\u7a0b\u5e8f \u2192 \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5 Connection \u2192 \u521b\u5efa\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61 Statement \u2192 \u6267\u884c SQL \u8bed\u53e5 \u2192 \u5904\u7406\u6267\u884c\u7ed3\u679c ResultSet \u2192 \u91ca\u653e\u8d44\u6e90\u3002 - \u7b2c 1 \u6b65\uff1a\u5bfc\u5165\u865a\u8c37 JDBC \u9a71\u52a8\u5305 - \u7b2c 2 \u6b65\uff1a\u6ce8\u518a\u9a71\u52a8 (\u4ec5\u505a\u4e00\u6b21) - \u7b2c 3 \u6b65\uff1a\u5efa\u7acb\u8fde\u63a5 (Connection) - \u7b2c 4 \u6b65\uff1a\u521b\u5efa\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61 (Statement) - \u7b2c 5 \u6b65\uff1a\u6267\u884c SQL \u8bed\u53e5 - \u7b2c 6 \u6b65\uff1a\u5904\u7406\u6267\u884c\u7ed3\u679c (ResultSet) - \u7b2c 7 \u6b65\uff1a\u91ca\u653e\u8d44\u6e90 6.1 \u5bfc\u5165\u865a\u8c37JDBC\u9a71\u52a8\u5305 \u4e0b\u8f7d\u865a\u8c37\u6570\u636e\u5e93\u4e13\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u5305 (cloudjdbc-*.*.*.jar)\uff0c\u5e76\u5bfc\u5165\u5230\u5e94\u7528\u7a0b\u5e8f\u4e2d\u3002 6.2 \u52a0\u8f7d\u865a\u8c37JDBC\u9a71\u52a8 \u865a\u8c37 JDBC \u9a71\u52a8\u7a0b\u5e8f\u4e2d Driver \u63a5\u53e3\u5b9e\u73b0\u7c7b\u4e3a com.xugu.cloudjdbc.Driver\u3002\u52a0\u8f7d\u9a71\u52a8\u65b9\u5f0f\u4e3a DriverManager.registerDriver(new com.xugu.cloudjdbc.Driver()) \u6216Class.forName(\u201ccom.xugu.cloudjdbc.Driver\u201d)\u3002 6.3 \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5 \u5efa\u7acb\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u7684\u65b9\u5f0f\u6709\u591a\u79cd\uff0c\u53ef\u6839\u636e\u5e94\u7528\u7a0b\u5e8f\u5b9e\u9645\u4f7f\u7528\u573a\u666f\u9009\u62e9\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65b9\u5f0f\u3002\u5e38\u89c1\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65b9\u5f0f\u5982\u4e0b\uff1a - \u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u4f7f\u7528 DriverManager \u83b7\u5f97\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\uff1b - \u4f7f\u7528\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u6e90/\u8fde\u63a5\u6c60\u7684\u65b9\u5f0f\u83b7\u53d6\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\uff1b - \u4f7f\u7528\u7b2c\u4e09\u65b9\u901a\u7528\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u65b9\u5f0f\u83b7\u53d6\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u3002 \u5982\uff1adruid\u3001c3p0\u3001dbcp\u3001JNDI \u7b49\u3002 6.3.1 \u6253\u5f00\u6570\u636e\u5e93\u8fde\u63a5 \u6253\u5f00\u6570\u636e\u5e93\u8fde\u63a5\u5373\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u5bf9\u8c61 Connection \u7c7b\u3002 \u5982\uff1aDriverManager \u901a\u8fc7 getConnection() \u65b9\u6cd5\u83b7\u53d6 Connection \u7c7b\u5bf9\u8c61\u3002DriverManager \u7684 getConnection() \u65b9\u6cd5\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\u7684\u65b9\u5f0f\u4ea6\u6709\u591a\u79cd\u3002\u4ee5\u4e0b\u4e3a\u5e38\u89c1\u65b9\u5f0f\uff1a - getConnection(String url) \u53c2\u6570\u8bf4\u660e\uff1a - url\uff1a\u8bbf\u95ee\u6570\u636e\u5e93\u7684 URL \u8def\u5f84\u3002 \u793a\u4f8b\uff1a \u4e0b\u9762\u7684\u4ee3\u7801\u5229\u7528 getConnection \u65b9\u6cd5\u521b\u5efa\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u3002 ``` public Connection getConnection(){ Connection con=null\u037e try{ //\u6ce8\u518c\u6570\u636e\u5e93\u9a71\u52a8 Class.forName(\"com.xugu.cloudjdbc.Driver\")\u037e //\u5b9a\u4e49\u8fde\u63a5\u6570\u636e\u5e93\u7684url String url = \"jdbc:xugu://localhost:5138/db?user=user1\uff06password=pwd\"\u037e //\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5 con = DriverManager.getConnection(url)\u037e System.out.println(\"\u6570\u636e\u5e93\u8fde\u63a5\u6210\u529f\uff01\")\u037e }catch(Exception e){ e.printStackTrace()\u037e } //\u8fd4\u56de\u4e00\u4e2a\u8fde\u63a5 return con\u037e } ``` getConnection(String url,String user,String password) \u53c2\u6570\u8bf4\u660e\uff1a url\uff1a\u8bbf\u95ee\u6570\u636e\u5e93\u7684 URL \u8def\u5f84\u3002 user\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u7528\u6237\u540d\u3002 password\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u7528\u6237\u5bc6\u7801\u3002 \u793a\u4f8b\uff1a \u4e0b\u9762\u7684\u4ee3\u7801\u5229\u7528 getConnection \u65b9\u6cd5\u521b\u5efa\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u3002 private Connection con; private String user = \"user1\"; //\u5b9a\u4e49\u8fde\u63a5\u6570\u636e\u5e93\u7684\u7528\u6237\u540d private String password = \"pwd\"; //\u5b9a\u4e49\u8fde\u63a5\u6570\u636e\u5e93\u7684\u5bc6\u7801 private String className = \"com.xugu.cloudjdbc.Driver\";//\u5b9a\u4e49\u865a\u8c37JDBC\u9a71\u52a8 private String url = \"jdbc:xugu://localhost:5138/db\"; /\\*\\*\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\\*/ public Connection getConnection(){ try{ Class.forName(className);//\u52a0\u8f7d\u6570\u636e\u5e93\u9a71\u52a8 System.out.println(\"\u6570\u636e\u5e93\u9a71\u52a8\u52a0\u8f7d\u6210\u529f\uff01\"); con = DriverManager.getConnection(url,user,password); //\u8fde\u63a5\u6570\u636e\u5e93 System.out.println(\"\u6210\u529f\u5730\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\uff01\"); }catch(Exception e){ System.out.println(\"\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\u5931\u8d25\uff01\"); con = null; e.printStackTrace(); } finally { If(conn != null){ //\u91ca\u653e\u8fde\u63a5\u8d44\u6e90 conn.close(); } } return con; } getConnection(String url,Properties info) \u53c2\u6570\u8bf4\u660e\uff1a url\uff1a\u8bbf\u95ee\u6570\u636e\u5e93\u7684 URL \u8def\u5f84\u3002 info\uff1a\u4e00\u4e2a\u6301\u4e45\u7684\u5c5e\u6027\u96c6\u5bf9\u8c61\uff0c\u5305\u62ec user \u548c password \u7b49\u5c5e\u6027\u3002 \u793a\u4f8b\uff1a \u4e0b\u9762\u7684\u4ee3\u7801\u5229\u7528 getConnection \u65b9\u6cd5\u521b\u5efa\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u3002 public Connection getConnection(){ Connection con = null; //\u5b9a\u4e49\u6570\u636e\u5e93\u8fde\u63a5\u5bf9\u8c61 Properties info = new Properties(); //\u5b9a\u4e49Properties\u5bf9\u8c61 info.setProperty(\"user\",\"user1\"); //\u8bbe\u7f6eProperties\u5bf9\u8c61\u5c5e\u6027 info.setProperty(\"password\",\"pwd\"); try{ //\u6ce8\u518c\u6570\u636e\u5e93\u9a71\u52a8 Class.forName(\"com.xugu.cloudjdbc.Driver\"); //test\u4e3a\u6570\u636e\u5e93\u540d\u79f0 String url = \"jdbc:xugu://localhost:5138/db\"; //\u83b7\u53d6\u8fde\u63a5\u6570\u636e\u5e93\u7684Connection\u5bf9\u8c61 con = DriverManager.getConnection(url,info); System.out.println(\"\u6570\u636e\u5e93\u8fde\u63a5\u6210\u529f\uff01\"); }catch(Exception e){ e.printStackTrace(); } //\u8fd4\u56de\u4e00\u4e2a\u8fde\u63a5 return con; } 6.3.2 \u8fde\u63a5\u4e8b\u52a1\u7ba1\u7406 \u6570\u636e\u5e93\u4e8b\u52a1 (transaction) \u662f\u8bbf\u95ee\u5e76\u53ef\u80fd\u64cd\u4f5c\u5404\u79cd\u6570\u636e\u9879\u7684\u4e00\u4e2a\u6570\u636e\u5e93\u64cd\u4f5c\u5e8f\u5217\uff0c\u8fd9\u4e9b\u64cd\u4f5c\u8981\u4e48\u5168\u90e8\u6267\u884c, \u8981\u4e48\u5168\u90e8\u4e0d\u6267\u884c\uff0c\u662f\u4e00\u4e2a\u4e0d\u53ef\u5206\u5272\u7684\u5de5\u4f5c\u5355\u4f4d\u3002\u4e8b\u52a1\u7531\u4e8b\u52a1\u5f00\u59cb\u5230\u4e8b\u52a1\u7ed3\u675f\u4e4b\u95f4\u6267\u884c\u7684\u5168\u90e8\u6570\u636e\u5e93\u64cd\u4f5c\u7ec4\u6210\u3002 \u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\uff0c\u5373\u5f53\u4e00\u6761 SQL \u8bed\u53e5\u6267\u884c\u5b8c\u6210\u540e\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u5c06\u81ea\u52a8\u63d0\u4ea4\u8be5\u8bed\u53e5\u6240\u5728\u4e8b\u52a1\u3002\u5728\u865a\u8c37 JDBC \u9a71\u52a8\u4e2d\u63a7\u5236\u4e8b\u52a1\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a - \u901a\u8fc7\u6570\u636e\u5e93\u8fde\u63a5 URL \u4e32\u7684 auto_commit \u5c5e\u6027\uff0c\u63a7\u5236\u4e8b\u52a1\u7684\u5f00\u542f\u4e0e\u5173\u95ed\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b auto_commit \u5c5e\u6027\u4e3a on\uff0c\u5373\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u3002 - \u901a\u8fc7 Connection \u7c7b\u7684 setAutoCommit(boolean commit) \u65b9\u6cd5\u63a7\u5236\u4e8b\u52a1\u7684\u5f00\u542f\u4e0e\u5173\u95ed\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b commit \u5c5e\u6027\u4e3a TRUE\uff0c\u5373\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u3002 \u5728\u7981\u7528\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u4e0b\uff0c\u4f7f\u7528 Connection \u7c7b\u7684 commit() \u65b9\u6cd5\u63d0\u4ea4 SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u505a\u7684\u66f4\u6539\uff0c\u800c Connection \u7c7b\u7684 rollback() \u65b9\u6cd5\u5c06\u56de\u6eda SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u7684\u66f4\u6539\uff0c\u4e0a\u8ff0\u4e24\u79cd\u65b9\u6cd5\u6267\u884c\u5b8c\u6210\u540e\u5747\u5c06\u91ca\u653e\u4e8b\u52a1\u6301\u6709\u7684\u5168\u90e8\u9501\u8d44\u6e90\u3002 \u4e8b\u52a1\u4ec5\u5bf9\u6570\u636e\u5e93 DML \u64cd\u4f5c\u6709\u6548\u3002 {.is-info} \u4ee5\u4e0b\u4e3a\u4f7f\u7528 setAutoCommit() \u65b9\u6cd5\u63a7\u5236\u4e8b\u52a1\u63d0\u4ea4\u7684\u793a\u4f8b\u4ee3\u7801\uff1a //\u8bbe\u7f6e\u4e8b\u52a1\u4e3a\u975e\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f conn.setAutoCommit(false)\u037e //\u521b\u5efa\u6570\u636e\u5e93Statement\u5bf9\u8c61 Statement stm = conn.createStatement()\u037e //\u6570\u636e\u5e93\u4e8b\u52a1\u6267\u884cSQL\u8bed\u53e5 String sql = \"insert into test (comp_id,comp_name) values(1,'comp')\"\u037e //\u6267\u884c\u9759\u6001SQL\u8bed\u53e5 stm.execute(sql)\u037e //\u6570\u636e\u5e93\u9884\u5904\u7406SQL\u8bed\u53e5 PreparedStatement pstm = conn. prepareStatement(\u201cupdate test set id=? where comp_name=?\u201d) //\u9884\u5904\u7406SQL\u8bed\u53e5\u7b2c\u4e00\u4e2a\u53c2\u6570\u8d4b\u503c pstm.setInt(1,15)\u037e //\u9884\u5904\u7406SQL\u8bed\u53e5\u7b2c\u4e8c\u4e2a\u53c2\u6570\u8d4b\u503c pstm.setString(2,'DBMS')\u037e //\u6267\u884c\u9884\u5904\u7406SQL\u8bed\u53e5 pstm.execute()\u037e //\u63d0\u4ea4\u4e8b\u52a1 conn.commit()\u037e //\u5220\u9664\u8868\u4e2d\u6307\u5b9a\u884c\u6570\u636e stm.execute(\u201cdelete from test where id=15\u201d)\u037e //\u4e8b\u52a1\u56de\u6eda\u65b9\u6cd5 conn.rollback()\u037e \u4e0a\u9762\u4ee3\u7801\u4e2d\u6267\u884c\u63d0\u4ea4\u4e8b\u52a1\u64cd\u4f5c\uff0c\u6267\u884c\u9759\u6001 SQL \u8bed\u53e5\u4e0e\u6267\u884c\u9884\u5904\u7406 SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u7684\u66f4\u6539\u5c06\u6c38\u4e45\u751f\u6548\uff1b\u800c\u540e\u6267\u884c\u7684\u5220\u9664\u8868\u4e2d\u6307\u5b9a\u884c\u6570\u636e\u64cd\u4f5c\uff0c\u56e0\u5176\u540e\u8c03\u7528\u7684 rollback() \u65b9\u6cd5\uff0cdelete \u547d\u4ee4\u5bf9\u6570\u636e\u5e93\u7684\u6570\u636e\u66f4\u6539\u5c06\u88ab\u56de\u6eda\u6389\uff0c\u6545\u800c\u5bf9\u6570\u636e\u5e93\u7684\u5220\u9664\u64cd\u4f5c\u4e0d\u4f1a\u751f\u6548\u3002 6.3.3 \u8fde\u63a5\u4e8b\u52a1\u63a7\u5236\uff0cSavepoint\u63a5\u53e3 JDBC \u89c4\u8303 3.0 \u4e2d\u4e3a\u4e86\u589e\u52a0\u5bf9\u4e8b\u52a1\u7684\u63a7\u5236\uff0c\u65b0\u589e Savepoint \u63a5\u53e3\uff0c\u5176\u4ee3\u8868\u4e8b\u52a1\u4e2d\u7684\u4e00\u4e2a\u903b\u8f91\u4e8b\u52a1\u70b9\u3002\u5728\u975e\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u4e0b\uff0c\u4e00\u4e2a\u4e8b\u52a1\u4e2d\u53ef\u4ee5\u8bbe\u7f6e\u591a\u4e2a Savepoint\uff0c\u5728\u4ee3\u7801\u4e2d\u8fdb\u884c\u4e8b\u52a1\u56de\u6eda\u64cd\u4f5c\u65f6\uff0c\u53ef\u4ee5\u6307\u5b9a\u4e8b\u52a1\u56de\u6eda\u5230\u6307\u5b9a Savepoint \u4f4d\u7f6e\uff0c\u6307\u5b9a\u56de\u6eda\u4f4d\u7f6e\u524d\u7684\u4e8b\u52a1\u64cd\u4f5c\u4ecd\u7136\u4fdd\u7559\u3002\u6b64\u63a5\u53e3\u5927\u5927\u63d0\u9ad8\u4e86\u4e8b\u52a1\u5904\u7406\u7684\u7c92\u5ea6\uff0c\u65b9\u4fbf\u5e94\u7528\u7a0b\u5e8f\u63a7\u5236\u4e8b\u52a1\u5904\u7406\u903b\u8f91\u3002 \u793a\u4f8b\uff1a\u8fde\u63a5\u4e8b\u52a1\u63a7\u5236\u63a5\u53e3 Savepoint \u4f7f\u7528 //\u8bbe\u7f6e\u975e\u81ea\u52a8\u63d0\u4ea4 conn.setAutoCommit(false); //\u521b\u5efaStatement\u5bf9\u8c61 Statement stm = conn.createStatement(); //\u6267\u884cSQL\u547d\u4ee4 stm.execute(sql1); stm.execute(sql2); //\u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\u70b9save1 java.sql.Savepoint save1 =conn.setSavepoint(\"save_1\"); stm.execute(sql3); //\u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\u70b9save2 java.sql.Savepoint save2 =conn.setSavepoint(\"save_2\"); stm.execute(sql4); //\u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\u70b9save3 java.sql.Savepoint save3 =conn.setSavepoint(\"save_3\"); stm.execute(sql5); //\u56de\u6eda\u4e8b\u52a1\u5230\u56de\u6eda\u70b9save3 conn.rollback(save3); conn.commit(); \u4ee5\u4e0a\u4ee3\u7801\u6bb5\u4e2d\uff0c\u4e8b\u52a1\u6267\u884c\u8bed\u53e5 sql5 \u5c06\u88ab\u56de\u6eda\u6389\u3002 6.4 \u521b\u5efa\u6267\u884cSQL\u8bed\u53e5\u5bf9\u8c61 \u5728\u6570\u636e\u5e93\u6807\u51c6\u4e2d\uff0c\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61\u5206\u4e3a\u4e09\u7c7b\uff1a\u6267\u884c\u9759\u6001 SQL \u8bed\u53e5\u7684 Statement \u5bf9\u8c61\u3001\u6267\u884c\u9884\u7f16\u8bd1 SQL \u8bed\u53e5\u7684 PreparedStatement \u5bf9\u8c61\u4ee5\u53ca\u6267\u884c\u6570\u636e\u5e93\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\u7684 CallableStatement \u5bf9\u8c61\u3002 6.4.1 \u6267\u884cSQL\u5bf9\u8c61Statement Statement \u5bf9\u8c61\u7528\u4e8e\u6267\u884c\u9759\u6001 SQL \u8bed\u53e5\u548c\u83b7\u5f97 SQL \u4ea7\u751f\u7684\u7ed3\u679c\u3002\u5728\u865a\u8c37 JDBC \u9a71\u52a8\u4e2d\uff0c\u865a\u8c37\u6570\u636e\u5e93 DDL \u64cd\u4f5c\u5747\u901a\u8fc7 Statement \u5bf9\u8c61\u6765\u6267\u884c\u3002 Statement \u5bf9\u8c61\u901a\u8fc7 Connection \u7c7b\u7684 createStatement() \u65b9\u6cd5\u521b\u5efa\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a //\u521b\u5efa\u6267\u884cSQL\u8bed\u53e5\u5bf9\u8c61Statement Statement stm = conn.createStatement()\u037e 6.4.2 \u6267\u884cSQL\u5bf9\u8c61PreparedStatement PreparedStatement \u5bf9\u8c61\u4f7f\u7528\u65f6\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u5bf9\u6267\u884c SQL \u8bed\u53e5\u8fdb\u884c\u9884\u7f16\u8bd1\u5904\u7406\uff0c\u9884\u7f16\u8bd1 SQL \u8bed\u53e5\u5c06\u5728\u672a\u6765\u7684\u4f7f\u7528\u4e2d\u88ab\u91cd\u7528\u3002\u4e0e Statement \u5bf9\u8c61\u76f8\u6bd4\uff0cPreparedStatement \u5bf9\u8c61\u64cd\u4f5c\u591a\u6761 SQL \u8bed\u53e5\u7684\u6548\u7387\u66f4\u9ad8\u3002 \u7ecf\u8fc7\u9884\u7f16\u8bd1\u5e76\u5b58\u50a8\u5728 PreparedStatement \u5bf9\u8c61\u4e2d\u7684 SQL \u8bed\u53e5\uff0c\u901a\u8fc7 Connection \u7c7b\u7684 prepareStatement() \u65b9\u6cd5\u521b\u5efa\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a //\u521b\u5efa\u6267\u884c\u9884\u7f16\u8bd1SQL\u8bed\u53e5\u5bf9\u8c61PreparedStatement PreparedStatement preStatement = conn.prepareStatement(\u201c\u9884\u7f16\u8bd1SQL\u8bed\u53e5\u201d); \u9884\u5904\u7406 PreparedStatement \u5bf9\u8c61\u76f8\u5bf9\u4e8e\u9759\u6001 Statement \u5bf9\u8c61\u7684\u4f18\u52bf\uff1a - PreparedStatement \u53ef\u4ee5\u52a8\u6001\u4f20\u5165\u53c2\u6570\u503c\uff1b - PreparedStatement \u6bd4 Statement \u66f4\u5feb\uff1b PreparedStatement \u4f1a\u5c06 SQL \u8bed\u53e5\u9884\u7f16\u8bd1\u5728\u6570\u636e\u5e93\u7cfb\u7edf\u4e2d\uff0c\u6267\u884c\u8ba1\u5212\u540c\u6837\u4f1a\u88ab\u7f13\u5b58\u8d77\u6765\uff0c\u5b83\u5141\u8bb8\u6570\u636e\u5e93\u505a\u53c2\u6570\u5316\u67e5\u8be2\u3002\u4f7f\u7528\u9884\u5904\u7406\u8bed\u53e5\u6bd4\u666e\u901a\u7684 Statement \u67e5\u8be2\u66f4\u5feb\uff0c\u56e0\u505a\u7684\u5de5\u4f5c\u66f4\u5c11 (\u6570\u636e\u5e93\u5bf9 SQL \u8bed\u53e5\u7684\u5206\u6790\u3001\u7f16\u8bd1\u3001\u4f18\u5316\u5df2\u7ecf\u5728\u7b2c\u4e00\u6b21\u67e5\u8be2\u524d\u5b8c\u6210\u4e86)\u037e - PreparedStatement \u53ef\u4ee5\u9632\u6b62 SQL \u6ce8\u5165\u5f0f\u653b\u51fb\u3002 PreparedStatement \u5728\u4f7f\u7528\u53c2\u6570\u5316\u67e5\u8be2\u7684\u60c5\u51b5\u4e0b\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u4e0d\u4f1a\u5c06\u53c2\u6570\u7684\u5185\u5bb9\u89c6\u4e3a SQL \u6307\u4ee4\u7684\u4e00\u90e8\u5206\u6765\u5904\u7406\uff0c\u800c\u662f\u5728\u6570\u636e\u5e93\u5b8c\u6210 SQL \u6307\u4ee4\u7684\u7f16\u8bd1\u540e\uff0c\u624d\u5957\u7528\u53c2\u6570\u8fd0\u884c\uff0c\u56e0\u6b64\u5c31\u7b97\u53c2\u6570\u4e2d\u542b\u6709\u7834\u574f\u6027\u7684\u6307\u4ee4\uff0c\u4e5f\u4e0d\u4f1a\u88ab\u6570\u636e\u5e93\u6240\u8fd0\u884c\u3002 6.4.3 \u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u5bf9\u8c61CallableStatement CallableStatement \u5bf9\u8c61\u5b9e\u73b0\u4e86\u4ece Java \u5e94\u7528\u7a0b\u5e8f\u4e2d\u8c03\u7528\u6570\u636e\u5e93\u5b58\u50a8\u8fc7\u7a0b\u3002\u4f46\u6b64\u8c03\u7528\u8fc7\u7a0b\u5e76\u4e0d\u5305\u542b\u5b58\u50a8\u8fc7\u7a0b\u672c\u8eab\uff0c\u56e0\u5b58\u50a8\u8fc7\u7a0b\u5b58\u50a8\u5728\u6570\u636e\u5e93\u4e2d\u3002 CallableStatement \u5bf9\u8c61\u4e3a\u6240\u6709\u7684\u6570\u636e\u5e93\u63d0\u4f9b\u4e86\u4e00\u79cd\u4ee5\u6807\u51c6\u5f62\u5f0f\u8c03\u7528\u5b58\u50a8\u8fc7\u7a0b\u7684\u65b9\u6cd5\uff0c\u901a\u8fc7 Connection \u7c7b\u7684 prepareCall() \u65b9\u6cd5\u521b\u5efa\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a //\u521b\u5efa\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u5bf9\u8c61CallableStatement CallableStatement cstmt= conn.prepareCall(\u201c{call \u5b58\u50a8\u8fc7\u7a0b\u540d(\u53c2\u6570\u8868\u5217)}\u201d); 6.4.4 \u6267\u884cSQL\u8bed\u53e5\u5bf9\u8c61\u5c5e\u6027\u6269\u5145 \u5728\u521b\u5efa\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61\u65f6\uff0c\u53ef\u901a\u8fc7\u6784\u9020\u65b9\u6cd5\u7684\u4e0d\u540c\u53c2\u6570\u8bbe\u7f6e ResultSet \u5bf9\u8c61\u5c5e\u6027\uff0c\u5c5e\u6027\u5305\u62ec\u7ed3\u679c\u7c7b\u578b ResultSetType\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b ResultSetConcurrency\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b ResultSetHoldability\u3002 ResultSetType \u9ed8\u8ba4\u4e3a ResultSet.TYPE_SCROLL_INSENSITIVE\uff1a\u652f\u6301\u7ed3\u679c\u96c6 backforward\u3001last\u3001first \u7b49\u64cd\u4f5c\uff0c\u5bf9\u6570\u636e\u5e93\u4e2d\u5176\u5b83 session \u8fdb\u884c\u7684\u6570\u636e\u66f4\u6539\u4e0d\u654f\u611f\uff1b ResultSetConcurrency \u9ed8\u8ba4\u4e3a ResultSet.CONCUR_READ_ONLY: \u4e0d\u53ef\u66f4\u65b0\u7ed3\u679c\u96c6\uff1b\u8be5\u5c5e\u6027\u4ea6\u53ef\u66f4\u6539\u4e3a ResultSet.CONCUR_UPDATABLE\uff0c\u652f\u6301\u5728 ResultSet \u4e2d\u5bf9\u8bb0\u5f55\u8fdb\u884c\u4fee\u6539\uff0c\u4fee\u6539\u540e\u8bb0\u5f55\u66f4\u65b0\u5230\u6570\u636e\u5e93\uff0c\u4fee\u6539\u64cd\u4f5c\u53ef\u5305\u542b\u63d2\u5165\u3001\u5220\u9664\u6216\u66f4\u65b0\uff1b ResultSetHoldability \u9ed8\u8ba4\u4e3a ResultSet.HOLD_CURSORS_OVER_COMMIT: \u5728\u4e8b\u52a1 commit \u6216 rollback \u540e\uff0cResultSet \u4ecd\u7136\u53ef\u7528\u3002 Connection \u7c7b\u521b\u5efa Statement \u5bf9\u8c61\u6784\u9020\u65b9\u6cd5\uff1a //Statement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 createStatement(int resultSetType,int resultSetConcurrency)\uff1b //Statement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 createStatement(int resultSetType,int resultSetConcurrency, int resultSetHoldability)\uff1b Connection \u7c7b\u521b\u5efa PreparedStatement \u5bf9\u8c61\u6784\u9020\u65b9\u6cd5\uff1a //PreparedStatement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareStatement(String sql, int resultSetType,int resultSetConcurrency) //PrepareStatment\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareStatement(String sql, int resultSetType,int resultSetConcurrency, int resultSetHoldability) Connection \u7c7b\u521b\u5efa CallableStatement \u5bf9\u8c61\u6784\u9020\u65b9\u6cd5\uff1a //CallableStatement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareCall(String sql, int resultSetType,int resultSetConcurrency) //CallableStatement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareCall(String sql, int resultSetType,int resultSetConcurrency, int resultSetHoldability) 6.5 \u6267\u884cSQL\u8bed\u53e5 Statement \u5bf9\u8c61\u5b9a\u4e49\u4e86\u591a\u79cd\u6267\u884c SQL \u8bed\u53e5\u7684\u65b9\u6cd5\uff0c\u7528\u6765\u5904\u7406\u8fd4\u56de\u4e0d\u540c\u7ed3\u679c\u7684 SQL \u547d\u4ee4\uff1a - execute(String sql)\uff1a\u6267\u884c\u53ef\u4ee5\u8fd4\u56de\u591a\u4e2a\u7ed3\u679c\u96c6\u7684 SQL \u8bed\u53e5\u8fd4\u56de\u7c7b\u578b\u4e3a boolean\uff0c\u5982\u679c\u8fd4\u56de\u7684\u662f\u66f4\u65b0\u7684\u6570\u76ee\uff0c\u5219\u8fd4\u56de false\uff1b\u5982\u679c\u8fd4\u56de\u7684\u662f ResultSet \u5bf9\u8c61\uff0c\u5219\u8fd4\u56detrue\u3002 - executeQuery(String sql)\uff1a\u6267\u884c\u8fd4\u56de\u5355\u4e2a ResultSet \u7684 SQL \u8bed\u53e5\u8fd4\u56de\u7c7b\u578b\u4e3a ResultSet \u5bf9\u8c61\u3002 - executeUpdate()\uff1a\u6267\u884c SQL INSERT\u3001UPDATE \u6216 DELETE \u8bed\u53e5\u8fd4\u56de\u503c\u4e3a int \u578b\uff0c\u6570\u636e\u5e93\u53d7\u5f71\u54cd\u7684\u884c\u8ba1\u6570\u3002 - \u6279\u5904\u7406\u65b9\u6cd5\uff1a\u6279\u91cf\u6267\u884c SQL \u8bed\u53e5 clearBatch()\uff1a\u6e05\u7a7a\u5386\u53f2 batch \u547d\u4ee4\uff1b addBatch(String sql)\uff1a\u6dfb\u52a0\u8981\u6267\u884c\u7684 sql\uff1b executeBatch()\uff1a\u6279\u91cf\u6267\u884c sql\u3002 PreparedStatement \u7ee7\u627f\u81ea Statement\uff0c\u5b9a\u4e49\u4e86\u5927\u91cf\u7684 setter \u65b9\u6cd5\u7528\u4e8e\u8bbe\u7f6e\u52a8\u6001 sql\u7684\u53c2\u6570\uff0c\u56e0\u6b64 PreparedStatement \u652f\u6301\u52a8\u6001\u4f20\u53c2\uff1b\u53e6\u5916 PreparedStatement \u5185\u90e8\u5b58\u50a8\u4e86\u89e3\u6790\u7684 sql\uff0c\u53ef\u4ee5\u591a\u6b21\u6267\u884c\u800c\u65e0\u9700\u91cd\u590d\u89e3\u6790\u3002PreparedStatement \u7ee7\u627f\u81ea Statement\uff0cCallableStatement \u7ee7\u627f\u81ea PreparedStatement\uff0c\u6545\u800c\u4e09\u8005\u6267\u884c SQL \u8bed\u53e5\u7684\u65b9\u5f0f\u53ef\u901a\u7528\u3002 6.5.1 \u901a\u8fc7Statement\u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c \u901a\u8fc7 Statement \u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c\u9700\u8981\u6ce8\u610f\u7684\u4e8b\u9879\uff1a - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u524d\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u8bbe\u7f6e\u4e3a FALSE\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\uff0c\u5e76\u8fdb\u884c\u624b\u52a8\u63d0\u4ea4\uff08commit\uff09\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u540e\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u6062\u590d\u4e3a TRUE\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u5f02\u5e38\u53d1\u751f\u65f6\uff0c\u8fdb\u884c rollback(\u56de\u6eda)\u3002 \u793a\u4f8b\uff1a\u901a\u8fc7 Statement \u6279\u91cf\u64cd\u4f5c\u6570\u636e try { //\u521b\u5efaStatement\u5bf9\u8c61 stm = con.createStatement(); //\u8bbe\u7f6e\u4e8b\u52a1\u975e\u81ea\u52a8\u63d0\u4ea4 con.setAutoCommit(false); // \u6dfb\u52a0\u591a\u6761SQL\u8bed\u53e5\u5230\u6279\u5904\u7406\u4e2d stm.addBatch(\"insert into student values(23,'tangbao','\u9ad8\u6570',100)\"); stm.addBatch(\"insert into student values(24,'\u738b\u5b9a','c#',98)\"); stm.addBatch(\"insert into student values(25,'\u738b\u56fd\u4e91','java',90)\"); //\u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c stm.executeBatch(); System.out.println(\"\u63d2\u5165\u6210\u529f!\"); //\u6267\u884c\u6210\u529f\u540e\u8fdb\u884c\u6570\u636e\u63d0\u4ea4 con.commit(); System.out.println(\"\u63d0\u4ea4\u6210\u529f!\"); //\u5173\u95ed\u975e\u81ea\u52a8\u63d0\u4ea4 con.setAutoCommit(true); } catch (SQLException e) { if (!con.isClosed()) { con.rollback(); //\u51fa\u73b0\u5f02\u5e38\uff0c\u56de\u6eda\u4e8b\u52a1 System.out.println(\"\u63d0\u4ea4\u5931\u8d25\uff0c\u56de\u6eda\uff01\"); con.setAutoCommit(true); //\u5173\u95ed\u975e\u81ea\u52a8\u63d0\u4ea4 } } finally { if (stmt != null) { //\u5173\u95ed\u64cd\u4f5c\u5bf9\u8c61 stmt.close(); } } 6.5.2 \u901a\u8fc7PreparedStatement\u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c \u901a\u8fc7 PreparedStatement \u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c\u9700\u8981\u6ce8\u610f\u7684\u4e8b\u9879\uff1a - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u524d\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u8bbe\u7f6e\u4e3a FALSE\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\uff0c\u5e76\u8fdb\u884c\u624b\u52a8\u63d0\u4ea4\uff08commit\uff09\uff0c\u6570\u636e\u91cf\u5927\u65f6\uff0c\u8bbe\u7f6e\u624b\u52a8\u63d0\u4ea4\u95f4\u9694\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u540e\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u6062\u590d\u4e3a TRUE\uff1b \u2022 \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u5f02\u5e38\u53d1\u751f\u65f6\uff0c\u8fdb\u884c rollback(\u56de\u6eda)\uff1b - PreparedStatement \u6267\u884c\u8bed\u53e5\u4e0d\u80fd\u4e3a DDL \u8bed\u53e5\u3002 \u793a\u4f8b\uff1a\u5c06 10000 \u6761\u8bb0\u5f55\u63d2\u5165\u6570\u636e\u5e93\u4e2d\uff0c\u6bcf 100 \u6761\u6267\u884c\u4e00\u6b21\u63d0\u4ea4\u64cd\u4f5c try{ conn.setAutoCommit(false); //\u8bbe\u7f6e\u975e\u81ea\u52a8\u63d0\u4ea4 //\u521b\u5efaPreparedStatement\u5bf9\u8c61 ps = conn.prepareStatement(\"insert into testtab values (?, ?, ?)\"); //\u5faa\u73af\u6dfb\u52a0\u6279\u5904\u7406\u6570\u636e for(int i = 0;i<list.size();i++){ HashMap map = list.get(i);//list\u4e3a\u6570\u636e\u5c01\u88c5\uff0c\u6b64\u5904\u7565 ps.setString(1, map.get(\"id\").toString()); ps.setString(2, map.get(\"name\").toString()); ps.setString(3, map.get(\"age\").toString()); ps.addBatch(); if(mod(i,100)==0){//\u6bcf100\u6761\u6267\u884c\u4e00\u6b21\u6267\u884c\u64cd\u4f5c ps.executeBatch();//\u6267\u884c\u6279\u91cf\u63d2\u5165 conn.commit();//\u6267\u884c\u4e8b\u52a1\u63d0\u4ea4 } } ps.executeBatch();//\u6267\u884c\u6279\u91cf\u63d2\u5165 conn.commit(); //\u63d0\u4ea4\u4e8b\u52a1 }catch(Exception e){ if (!conn.isClosed()) { conn.rollback(); //\u51fa\u73b0\u5f02\u5e38\uff0c\u56de\u6eda\u4e8b\u52a1 System.out.println(\"\u63d0\u4ea4\u5931\u8d25\uff0c\u56de\u6eda\uff01\"); conn.setAutoCommit(true); //\u5173\u95ed\u975e\u81ea\u52a8\u63d0\u4ea4 } } finally { if (ps!= null) { ps.close();//\u5173\u95ed\u64cd\u4f5c\u5bf9\u8c61 } } 6.5.3 CallableStatement\u7ed1\u5b9a\u53c2\u6570 CallableStatement \u5b58\u5728\u4e09\u79cd\u7c7b\u578b\u7684\u53c2\u6570 IN\u3001OUT \u548c INOUT\u3002 - IN\uff1a\u521b\u5efa SQL \u8bed\u53e5\u65f6\u5176\u53c2\u6570\u503c\u672a\u77e5\u3002\u4f7f\u7528 setXXX() \u65b9\u6cd5\u5c06\u503c\u7ed1\u5b9a\u5230 IN \u53c2\u6570\u3002 - OUT\uff1a\u7531 SQL \u8bed\u53e5\u8fd4\u56de\u7684\u53c2\u6570\u503c\u3002\u53ef\u4ee5\u4f7f\u7528 getXXX() \u65b9\u6cd5\u4ece OUT \u53c2\u6570\u4e2d\u68c0\u7d22\u503c\u3002 - INOUT\uff1a\u63d0\u4f9b\u8f93\u5165\u548c\u8f93\u51fa\u503c\u7684\u53c2\u6570\u3002\u4f7f\u7528 setXXX() \u65b9\u6cd5\u7ed1\u5b9a\u53d8\u91cf\u5e76\u4f7f\u7528getXXX() \u65b9\u6cd5\u68c0\u7d22\u503c\u3002 \u793a\u4f8b 1\uff1a\u901a\u8fc7\u53c2\u6570\u4e0b\u6807\u7ed1\u5b9a\u53c2\u6570 //\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\u8bed\u53e5 String sql =\"{call pro_2(?,?,?)}\"; //\u521b\u5efaCallableStatement\u5bf9\u8c61 CallableStatement cstm = conn.prepareCall(sql); //\u901a\u8fc7\u53c2\u6570\u4e0b\u6807\u8bbe\u7f6e\u53c2\u6570(IN\u53c2\u6570) cstm.setInt(1, 20490); //\u6ce8\u518cOUT\u53c2\u6570\u6570\u636e\u7c7b\u578b cstm.registerOutParameter(2, com.xugu.cloudjdbc.Types.VARCHAR); cstm.registerOutParameter(3, com.xugu.cloudjdbc.Types.VARCHAR); //\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528 cstm.execute(); //\u83b7\u53d6\u5b58\u50a8\u8fc7\u7a0b\u8f93\u51fa\u53c2\u6570 String name = (String)cstm.getObject(2); String address = (String)cstm.getObject(3); \u793a\u4f8b 2\uff1a\u901a\u8fc7\u53c2\u6570\u540d\u7ed1\u5b9a\u53c2\u6570 //\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\u8bed\u53e5 CallableStatement pstm = conn.prepareCall(\"insert into tt1 values(:id,:name)\"); //\u901a\u8fc7\u53c2\u6570\u540d\u8bbe\u7f6e\u53c2\u6570(IN\u53c2\u6570) pstm.setInt(\"id\", 1); pstm.setString(\"name\", \"cloud\"); //\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528 pstm.execute(); 6.6 \u5904\u7406\u6267\u884c\u7ed3\u679c ResultSet \u7c7b\u662f\u901a\u8fc7 Statement \u53ca\u5176\u5b50\u7c7b\u6267\u884c SQL \u67e5\u8be2\u8bed\u53e5\u5f97\u5230\u7684\u7ed3\u679c\u96c6\u3002ResultSet \u7c7b\u5305\u542b\u4e09\u4e2a\u91cd\u8981\u5c5e\u6027\uff1aResultSet \u5bf9\u8c61\u5e76\u53d1\u6a21\u5f0f\u3001ResultSet \u5bf9\u8c61\u5149\u6807\u5904\u7406\u65b9\u5411\u3001ResultSet \u5bf9\u8c61\u5149\u6807\u7c7b\u578b\u3002ResultSet \u7c7b\u5177\u6709\u6307\u5411\u5f53\u524d\u7ed3\u679c\u96c6\u6570\u636e\u884c\u4f4d\u7f6e\u5149\u6807\uff0c\u5149\u6807\u4f4d\u7f6e\u521d\u59cb\u88ab\u7f6e\u4e8e\u7b2c\u4e00\u884c\u4e4b\u524d\uff0c\u901a\u8fc7 ResultSet \u7c7b\u5c01\u88c5\u7684\u5149\u6807\u79fb\u52a8\u65b9\u6cd5\u5b9e\u73b0\u5bf9\u5149\u6807\u4f4d\u7f6e\u7684\u63a7\u5236\uff0c\u5f53 ResultSet \u5bf9\u8c61\u7684\u5149\u6807\u79fb\u81f3\u6570\u636e\u7ed3\u679c\u96c6\u672b\u5c3e\u65f6 (\u4e0b\u4e00\u884c\u65e0\u6570\u636e)\uff0c\u8fd4\u56de FALSE\u3002 \u5728\u865a\u8c37 JDBC \u4e2d\uff0cResultSet \u7c7b\u5206\u4e3a\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u548c\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\uff08\u901a\u8fc7 URL \u8fde\u63a5\u4e32\u53c2\u6570 recv_mode \u914d\u7f6e\uff09\u3002\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u9ed8\u8ba4\u5c5e\u6027\u4e3a\u4e0d\u53ef\u66f4\u65b0\u3001\u5411\u524d\u79fb\u52a8\u3001\u53ef\u4ee5\u6eda\u52a8\uff1b\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u9ed8\u8ba4\u5c5e\u6027\u4e3a\u4e0d\u53ef\u66f4\u65b0\u3001\u53ea\u5411\u524d\u79fb\u52a8\u3001\u4e0d\u53ef\u6eda\u52a8\u3002 Statement \u5bf9\u8c61\u6267\u884c SQL \u8bed\u53e5\u8fd4\u56de\u7ed3\u679c\u96c6\u4ec5\u80fd\u662f\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\uff0c\u800c PreparedStatement \u5bf9\u8c61\u6267\u884c SQL \u8bed\u53e5\u8fd4\u56de\u7ed3\u679c\u96c6\u53ef\u4e3a\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u6216\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u3002 \u5f53\u6267\u884c SQL \u8fd4\u56de\u6570\u636e\u7ed3\u679c\u96c6\u8f83\u5927\u65f6\uff0c\u5efa\u8bae\u4f7f\u7528\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\uff0c\u907f\u514d JVM \u7684\u6ea2\u51fa\u3002 {.is-info} 6.6.1 \u66f4\u65b0ResultSet\u7ed3\u679c\u96c6 \u521b\u5efa Statement \u5bf9\u8c61\u65f6\uff0c\u8bbe\u7f6e Statement \u5c5e\u6027 RresultSetConcurrency \u4e3a ResultSet.CONCUR_UPDATABLE\uff0c\u5e76\u4e14\u6570\u636e\u5e93 URL \u8fde\u63a5\u4e32\u5c5e\u6027 return_rowid \u8bbe\u7f6e\u4e3a TRUE\u65f6\uff0cStatement \u5bf9\u8c61\u6267\u884c SQL \u8bed\u53e5\u8fd4\u56de\u7684 ResultSet \u7ed3\u679c\u96c6\u624d\u80fd\u88ab\u66f4\u65b0\u3002\u5f53 ResultSet \u5bf9\u8c61\u4e3a\u53ef\u66f4\u65b0\u7ed3\u679c\u96c6\u65f6\uff0c\u5c06\u5149\u6807\u79fb\u81f3\u63d2\u5165\u4f4d\u7f6e\uff0c\u53ef\u8c03\u7528 ResultSet \u7c7b\u5bf9\u5e94\u7684 update \u65b9\u6cd5\u4fee\u6539\u7ed3\u679c\u96c6\u4e2d\u884c\u6570\u636e\uff0c\u5e76\u901a\u8fc7 updateRow \u65b9\u6cd5\u5c06\u66f4\u6539\u6570\u636e\u66f4\u65b0\u5230\u6570\u636e\u5e93\u4e2d\u3002 \u793a\u4f8b\uff1a\u901a\u8fc7\u4fee\u6539\u7ed3\u679c\u96c6\u4e2d\u6570\u636e\u503c\u66f4\u6539\u6570\u636e\u5e93\u4e2d\u5bf9\u5e94\u8bb0\u5f55 //\u521b\u5efaStatement\u5bf9\u8c61\u5e76\u8bbe\u7f6e\u7ed3\u679c\u96c6\u5c5e\u6027\u4e3a\u53ef\u66f4\u65b0 Statement stm = conn.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_UPDATABLE); //\u6267\u884cSQL\u8bed\u53e5 ResultSet rs = stm.executeQuery(sql); //\u7ed3\u679c\u96c6\u904d\u5386 while(rs.next()) { //\u66f4\u65b0\u7ed3\u679c\u96c6\u4e2d\u6307\u5b9a\u5217\u6570\u636e rs.updateLong(1, 5); //\u66f4\u65b0\u7ed3\u679c\u96c6\u4e2d\u6307\u5b9a\u5217\u6570\u636e rs.updateFloat(3, 12.3f); //\u7ed3\u679c\u96c6\u53d8\u66f4\u56de\u5199\u5165\u6570\u636e\u5e93 rs.updateRow(); } \u901a\u8fc7\u8c03\u7528 ResultSet \u7c7b\u7684 next()\u3001previous()\u3001absolute(int) \u65b9\u6cd5\u79fb\u52a8\u5149\u6807\u4f4d\u7f6e\uff0c\u5c06\u5149\u6807\u4f4d\u7f6e\u79fb\u52a8\u5230\u6307\u5b9a\u6570\u636e\u884c\uff0c\u901a\u8fc7 ResultSet \u7c7b\u5bf9\u5e94\u7684 get \u65b9\u6cd5\u83b7\u53d6\u884c\u6570\u636e\u3002 \u5982\u4f7f\u7528\u7ed3\u679c\u96c6\u66f4\u65b0\u6570\u636e\u5e93\u6570\u636e\uff0c\u9700\u5728\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65f6\uff0c\u8bbe\u7f6e\u8fde\u63a5\u5c5e\u6027 return_rowid \u4e3aTRUE\uff0c\u4e14\u5728\u751f\u6210\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61\u65f6\uff0c\u5e76\u53d1\u5c5e\u6027\u6307\u5b9a\u4e3a ResultSet.CONCUR_UPDATABLE\u3002 {.is-info} 6.6.2 \u901a\u8fc7\u79fb\u52a8\u5149\u6807\u83b7\u53d6\u7ed3\u679c\u96c6\u6761\u6570 \u793a\u4f8b 1\uff1a \u7edf\u8ba1\u7ed3\u679c\u96c6\u603b\u6761\u6570 //\u521b\u5efaStatement\u5bf9\u8c61 Statement stm= conn.createStatement(); stm.execute(\"create table test(id int identity(1,1));insert into test values(default)\"); //\u6267\u884c\u7ed3\u679c\u96c6\u67e5\u8be2 ResultSet rs = stm.executeQuery(\"select * from test\") //\u79fb\u52a8\u5149\u6807\u81f3\u7ed3\u679c\u96c6\u672b\u5c3e rs.last(); //\u83b7\u53d6\u7ed3\u679c\u96c6\u884c\u6570 int rsCounts = rs.getRow(); 6.6.3 \u591a\u7ed3\u679c\u96c6\u5904\u7406 \u865a\u8c37 JDBC \u652f\u6301\u591a\u7ed3\u679c\u96c6\u5904\u7406\uff0c\u5141\u8bb8 Statement \u63a5\u53e3\u652f\u6301\u591a\u91cd\u6253\u5f00\u7684 ResultSet \u5bf9\u8c61\u3002\u6267\u884c\u8bed\u53e5\u53ef\u4ee5\u662f\u591a\u6761 SQL \u8bed\u53e5\u7684\u96c6\u5408\uff0c\u5373\u4e00\u6b21\u6027\u5411\u865a\u8c37\u670d\u52a1\u5668\u53d1\u9001\u591a\u6761 SQL \u8bed\u53e5\uff0c\u865a\u8c37\u670d\u52a1\u5668\u6267\u884c\u5b8c SQL \u8bed\u53e5\u540e\u8fd4\u56de\u591a\u4e2a\u6267\u884c\u7ed3\u679c\uff1b\u4ea6\u6216\u5b58\u50a8\u8fc7\u7a0b\u5b9a\u4e49\u6709\u591a\u4e2a\u8fd4\u56de\u7ed3\u679c\u96c6\u3002\u865a\u8c37 JDBC \u7684 Statement \u91cd\u8f7d\u4e86 Statement \u63a5\u53e3\u4e2d\u7684 getMoreResults() \u65b9\u6cd5\u3002 \u793a\u4f8b\uff1a\u591a\u7ed3\u679c\u96c6\u5904\u7406 //SQL\u8bed\u53e5\u5305\u542b\u591a\u6761\u67e5\u8be2\u547d\u4ee4 String sql=\" SELECT * FROM A1 WHERE D2=(SELECT AVG(D2) FROM A1 GROUP BY D1);SELECT * FROM A1 WHERE D2>(SELECT MIN(D2) FROM A1 GROUP BY D1)\"; //\u521b\u5efaStatement\u5bf9\u8c61 Statement stm = conn.createStatement(); //\u6267\u884cSQL\u8bed\u53e5 boolean f = stm.execute(sql); //\u5224\u65ad\u662f\u5426\u6709ResultSet\u5bf9\u8c61\u4ea7\u751f if(f == true){ //\u83b7\u53d6\u7ed3\u679c\u96c6\u5bf9\u8c61 ResultSet rs1 = stm.getResultSet(); ... ... ... ... } while(true) { //\u5224\u65adStatement\u662f\u5426\u8fd4\u56de\u4e86\u591a\u4e2aResultSet\u5bf9\u8c61 if(!stm.getMoreResults(Statement.CLOSE_CURRENT_RESULT)){ break; } else if((rs2 = cstm.getResultSet())!=null) { ... ... ... ...//\u6570\u636e\u5904\u7406\u90e8\u5206\u7701\u7565 } } 6.6.4 \u670d\u52a1\u5668\u7aef\u6e38\u6807\u4f7f\u7528 \u865a\u8c37JDBC\u4e2d\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u751f\u6210\u9700\u6ee1\u8db3\u4e24\u4e2a\u6761\u4ef6\uff1aURL\u8fde\u63a5\u4e32\u5c5e\u6027recv_mode\u503c\u4e3a2\uff0cStatement\u5bf9\u8c61\u6267\u884cSQL\u8bed\u53e5\u4e3a\u5355\u6761SELECT\u8bed\u53e5\u3002 \u5e94\u7528\u7a0b\u5e8f\u7aef\u901a\u8fc7Statement\u7c7b\u7684setFetchSize(int)\u65b9\u6cd5\u6216ResultSet\u7c7b\u7684setFetchSize(int)\u65b9\u6cd5\u8bbe\u7f6e\u6bcf\u6b21\u4ece\u670d\u52a1\u5668\u7aef\u83b7\u53d6\u591a\u5c11\u6761\u6570\u636e\u3002 \u4f7f\u7528\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7684 ResultSet \u5bf9\u8c61\uff0c\u5149\u6807\u53ea\u80fd\u5355\u5411\u5411\u524d\u6b63\u5411\u79fb\u52a8\uff0c\u4e0d\u80fd\u5411\u540e\u79fb\u52a8\u6216\u6765\u56de\u6eda\u52a8\u3002 {.is-info} \u793a\u4f8b\uff1a\u865a\u8c37\u6570\u636e\u5e93\u670d\u52a1\u5668\u7aef\u6e38\u6807\u4f7f\u7528 //\u521b\u5efa\u865a\u8c37JDBC\u7279\u6709Statement\u5bf9\u8c61 Statement stm = (com.xugu.cloudjdbc.Statement)conn.createStatement(); //\u5f00\u542f\u670d\u52a1\u5668\u7aef\u6e38\u6807 stm.setServerCursor(true); //\u8bbe\u7f6e\u670d\u52a1\u5668\u7aef\u6e38\u6807\u5355\u6b21\u8fd4\u56de\u6570\u636e\u6761\u6570 stm.setFetchSize(1000); //\u6267\u884cSQL\u8bed\u53e5 ResultSet rs = stm.executeQuery(\"select * from t1\"); //\u904d\u5386\u6570\u636e while\uff08rs.next()\uff09 { ... ... ... ... } //\u5173\u95ed\u670d\u52a1\u5668\u7aef\u6e38\u6807 stm.setServerCursor(false); 6.6.5 \u68c0\u7d22\u81ea\u52a8\u4ea7\u751f\u7684\u5173\u952e\u5b57GeneratedKeys JDBC 3.0 \u89c4\u8303\u4e2d\u5bf9\u4e8e\u81ea\u52a8\u4ea7\u751f\u7684\u5173\u952e\u5b57\u6570\u503c\uff0c\u5b9a\u4e49\u4e86\u63a5\u53e3\u89c4\u8303\uff0c\u5373\uff1agetGeneratedKeys() \u65b9\u6cd5\u3002 \u4e3a\u4e86\u89e3\u51b3\u5bf9\u83b7\u53d6\u81ea\u52a8\u4ea7\u751f\u7684\u6216\u81ea\u52a8\u589e\u52a0\u7684\u5173\u952e\u5b57\u7684\u503c\u7684\u9700\u6c42\uff0c\u865a\u8c37 JDBC \u6839\u636e JDBC3.0 \u89c4\u8303\u63d0\u4f9b\u4e86\u83b7\u5f97\u5173\u952e\u5b57\u503c\u7684\u65b9\u6cd5\u3002\u83b7\u53d6\u5173\u952e\u5b57\u7684\u503c\uff0c\u9700\u8981\u5728\u6267\u884c\u65b9\u6cd5\u4e2d\u6307\u5b9a\u81ea\u589e\u5173\u952e\u5b57\u6807\u8bb0\u3002SQL \u8bed\u53e5\u6267\u884c\u5b8c\u540e\uff0c\u8c03\u7528 Statement \u5bf9\u8c61\u7684 getGeneratedKeys() \u65b9\u6cd5\uff0c\u83b7\u5f97\u5305\u542b\u81ea\u589e\u957f\u503c\u7684 ResultSet \u5bf9\u8c61\u3002 \u793a\u4f8b\uff1a\u83b7\u53d6\u6570\u636e\u5e93\u81ea\u589e\u957f\u5173\u952e\u5b57\u7684\u503c //\u521b\u5efaStatement\u5bf9\u8c61 Statement stmt = conn.createStatement(); //\u6307\u5b9a\u81ea\u589e\u957f\u5173\u952e\u5b57\u7684\u6807\u8bc6 String[] colN = {\"id\"}; //\u5728\u6267\u884c\u65b9\u6cd5\u4e2d\u5f15\u5165\u81ea\u589e\u957f\u5173\u952e\u5b57\u6807\u8bc6 stmt.executeUpdate(\"INSERT INTO authors(first_name, last_name) VALUES (\u2018Ghq\u2019, \u2018Wxl\u2019)\",colN); //\u83b7\u53d6\u7ed3\u679c\u96c6 ResultSet rs = stmt.getGeneratedKeys(); if ( rs.next() ) { //\u83b7\u53d6\u7ed3\u679c\u96c6\u4e2d\u7684\u81ea\u589e\u957f\u503c \u3000\u3000 int key = rs.getInt(); } 6.7 \u91ca\u653e\u8d44\u6e90 \u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u56e0\u5904\u7406\u9700\u8981\u6240\u5efa\u7acb\u7684 ResultSet\u3001Statement\u3001PreparedStatement \u7b49\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61\uff0c\u5728\u4f7f\u7528\u5b8c\u540e\u5fc5\u987b\u5173\u95ed\u3002\u5173\u95ed\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61\uff0c\u76f4\u63a5\u8c03\u7528\u5bf9\u5e94\u7684\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61 close() \u65b9\u6cd5\u5373\u53ef\u3002 \u5f53\u4e0d\u518d\u9700\u8981\u548c\u865a\u8c37\u6570\u636e\u5e93\u8fdb\u884c\u4ea4\u4e92\u65f6\uff0c\u9700\u65ad\u5f00\u6570\u636e\u5e93\u8fde\u63a5\u3002\u8c03\u7528 Connection \u7c7b\u7684 close() \u65b9\u6cd5\u5373\u4f1a\u5173\u95ed\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u540c\u65f6\u91ca\u653e\u8fde\u63a5\u4e0a\u6240\u6301\u6709\u7684\u6240\u6709\u6570\u636e\u5e93\u8d44\u6e90\u3002 \u6570\u636e\u5e93\u8fde\u63a5\u4e3a\u975e\u81ea\u52a8\u63d0\u4ea4\u65f6\uff0c\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61\u5728\u4f7f\u7528\u5b8c\u540e\uff0c\u82e5\u672a\u53ca\u65f6\u5173\u95ed\uff0c\u6b64\u65f6\u8fdb\u884c DDL \u64cd\u4f5c\u5c06\u4f1a\u5bfc\u81f4\u865a\u8c37\u6570\u636e\u5e93\u52a0\u9501\u8d85\u65f6\u6216\u5931\u8d25\u3002 {.is-info} \u4e03. \u5927\u5bf9\u8c61\u7c7b\u578b\u5904\u7406 JDBC 3.0 \u89c4\u8303\u5b9a\u4e49\u6709 java.sql.Blob \u4e0e java.sql.Clob \u63a5\u53e3\uff0c\u6b64\u4e24\u7c7b\u63a5\u53e3\u4e3a\u6570\u636e\u5e93\u5927\u5bf9\u8c61\u6570\u636e\u5904\u7406\u63a5\u53e3\u3002\u865a\u8c37\u6570\u636e\u5e93\u5927\u5bf9\u8c61\u5b57\u6bb5\u7c7b\u578b\u5305\u542b\uff1ablob\u3001clob\u3001binary\u3002 \u5728\u865a\u8c37 JDBC \u4e2d\uff0c\u83b7\u53d6\u5927\u5bf9\u8c61\u6570\u636e\u6709\u4e24\u79cd\u8fd4\u56de\u65b9\u5f0f\uff1a\u4e00\u79cd\u662f\u6570\u636e\u76f4\u63a5\u8fd4\u56de\uff1b\u53e6\u4e00\u79cd\u662f\u8fd4\u56de\u63cf\u8ff0\u7b26\u65b9\u5f0f\u3002\u5f53\u8fd4\u56de\u6570\u636e\u4e2d\u5927\u5bf9\u8c61\u6570\u636e\u8f83\u591a\u65f6\uff0c\u5efa\u8bae\u4f7f\u7528\u8fd4\u56de\u63cf\u8ff0\u7b26\u65b9\u5f0f\uff0c\u4ece\u800c\u907f\u514d\u56e0\u6570\u636e\u8fc7\u591a\u8fc7\u5927\u9020\u6210\u7684 JVM \u5185\u5b58\u6ea2\u51fa\u3002\u865a\u8c37 JDBC \u9a71\u52a8\u542f\u7528\u5927\u5bf9\u8c61\u8fd4\u56de\u63cf\u8ff0\u7b26\u65b9\u5f0f\uff0c\u9700\u5728\u8fde\u63a5 URL \u4e32\u4e0a\u914d\u7f6e\u5c5e\u6027 lob_ret \u4e3a descriptor \u3002 7.1 \u5411\u8868\u4e2d\u63d2\u5165\u5927\u5bf9\u8c61 LOB \u5bf9\u8c61\u7684\u63d2\u5165\u5fc5\u987b\u901a\u8fc7 PreparedStatement\u3001CallableStatement \u7c7b\u7684 setXXX() \u65b9\u6cd5\u65b9\u5f0f\u5b9e\u73b0\u3002\u865a\u8c37 JDBC \u4e2d PreparedStatement \u63d0\u4f9b\u591a\u79cd\u65b9\u6cd5\u8bbe\u7f6e\u5927\u5bf9\u8c61\u53c2\u6570\u503c\uff0c\u5982\u4e0b\u5217\u65b9\u6cd5\uff1a setBinaryStream(int parameterIndex,InputStream x) setBlob(int parameterIndex, Blob x) setBlob(int parameterIndex, InputStream x) setBytes(int parameterIndex,byte[] x) setCharacterStream(int parameterIndex, Reader reader) setClob(int parameterIndex, Clob x) setClob(int parameterIndex, Reader reader) setString(int parameterIndex, String x) \u793a\u4f8b\uff1a\u5e94\u7528\u7a0b\u5e8f\u63d2\u5165\u5927\u5bf9\u8c61\u6570\u636e\uff0c\u5176\u4e2d\u8868 b1 \u5b57\u6bb5 photo \u4e3a blob \u7c7b\u578b\uff0c\u5b57\u6bb5 text \u4e3a clob \u7c7b\u578b PreparedStatement ps = conn.prepareStatement(\"INSERT INTO b1 VALUES (?, ?)\")\u037e // blobBytes is a byte[] type ps.setBlob(1, new com.xugu.cloudjdbc.Blob(blobBytes))\u037e // clobString is a String type ps.setClob(2, new com.xugu.cloudjdbc.Clob(clobString))\u037e ps.execute()\uff1b 7.2 \u67e5\u8be2\u5927\u5bf9\u8c61\u6570\u636e \u901a\u8fc7\u865a\u8c37 JDBC \u83b7\u53d6\u5927\u5bf9\u8c61\u503c\uff0c\u6570\u636e\u5e93 CLOB \u5bf9\u8c61\u53ef\u901a\u8fc7\u5b57\u7b26\u4e32\u5f62\u5f0f\u6216\u6d41\u5f0f\u6570\u636e\u5f62\u5f0f\u83b7\u53d6\uff0c\u6570\u636e\u5e93 BLOB \u5bf9\u8c61\u53ea\u901a\u8fc7\u6d41\u5f0f\u6570\u636e\u5f62\u5f0f\u83b7\u53d6\u3002 \u793a\u4f8b 1\uff1a\u6d41\u5f0f\u83b7\u53d6 CLOB \u5bf9\u8c61 Statement stm = xgConn.createStatement(); String sql=\u201dselect remark from t_clob where id=101\u201d; ResultSet rs = stm.executeQuery(sql); while(rs.next) { Clob data = rs.getClob(\"remark \"); //\u4ee5\u5b57\u7b26\u6d41\u65b9\u5f0f\u83b7\u53d6\u6570\u636e Reader rd = data.getCharacterStream(); char[] sc = new char[1000]; StringBuffer sb = new StringBuffer(); int len = 0; while((len=rd.read(sc)) !=-1) { sb.append(new String(sc,0,len)); } System.out.println(sb.toString()); } \u793a\u4f8b 2\uff1a\u865a\u8c37 JDBC \u5141\u8bb8\u4ee5\u5b57\u7b26\u4e32\u7684\u5f62\u5f0f\u8bfb\u53d6 CLOB \u5bf9\u8c61 String sql=\"select text from t_clob\"\u037e Statement stm=conn.createStatement()\u037e ResultSet rs=stm.executeQuery(sql)\u037e while(rs.next()) { String clobStr =rs.getString(\"text\")\u037e } \u516b. \u865a\u8c37\u6570\u636e\u5e93\u8d1f\u8f7d\u5747\u8861 \u865a\u8c37\u6570\u636e\u5e93\u662f\u4e00\u6b3e\u5177\u5907\u9ad8\u5b89\u5168\u3001\u9ad8\u6027\u80fd\u3001\u9ad8\u6269\u5c55\u7b49\u7279\u6027\u7684\u3001\u57fa\u4e8e\u5206\u5e03\u5f0f\u67b6\u6784\u7684\u5206\u5e03\u5f0f\u4e8b\u52a1\u578b\u6570\u636e\u5e93\u3002\u90e8\u7f72\u6570\u636e\u5e93\u96c6\u7fa4\u65f6\uff0c\u591a\u53f0\u670d\u52a1\u5668\u4f5c\u4e3a\u4e00\u4e2a\u6574\u4f53\u5bf9\u5916\u63d0\u4f9b\u6570\u636e\u670d\u52a1\u3002\u5728\u591a\u673a\u73af\u5883\u4e0b\uff0c\u4e3a\u4f7f\u6570\u636e\u5e93\u8fde\u63a5\u5747\u5300\u5206\u5e03\u4e8e\u5404\u53f0\u670d\u52a1\uff0c\u865a\u8c37 JDBC \u5728\u63a5\u53e3\u5c42\u5b9e\u73b0\u4e86\u57fa\u4e8e\u8f6f\u8d1f\u8f7d\u5747\u8861\u6280\u672f\u7684\u6570\u636e\u5e93\u8fde\u63a5\u5efa\u7acb\u65b9\u5f0f\u3002 \u865a\u8c37\u6570\u636e\u5e93\u8d1f\u8f7d\u5747\u8861\u5206\u914d\u6570\u636e\u5e93\u8fde\u63a5\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a\u987a\u5e8f\u5206\u914d\u3001\u968f\u673a\u5206\u914d\u3002\u901a\u8fc7\u5728\u6570\u636e\u5e93 URL \u8fde\u63a5\u4e32\u4e0a\u8bbe\u7f6e\u53c2\u6570 conn_type(conn_type:1, \u968f\u673a\u5206\u914d\uff1b2, \u987a\u5e8f\u5206\u914d) \u7c7b\u578b\uff0c\u5b9e\u73b0\u6570\u636e\u5e93\u8fde\u63a5\u5728\u591a\u96c6\u7fa4\u73af\u5883\u4e0b\u7684\u8d1f\u8f7d\u5747\u8861\u3002\u9ed8\u8ba4\u8d1f\u8f7d\u5747\u8861\u5206\u914d\u65b9\u5f0f\uff1a\u987a\u5e8f\u5206\u914d\u3002 \u865a\u8c37 JDBC \u63d0\u4f9b\u4e09\u79cd\u914d\u7f6e\u8d1f\u8f7d\u5747\u8861\u7684\u65b9\u5f0f\uff1a\u6570\u636e\u5e93 URL \u8fde\u63a5\u4e32\u914d\u7f6e\u3001\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u6027\u6587\u4ef6 Properties \u914d\u7f6e\u3001\u6570\u636e\u5e93\u8fde\u63a5 XML \u6587\u4ef6\u914d\u7f6e\u3002 1. URL \u8fde\u63a5\u4e32\u914d\u7f6e Class.forName(\"com.xugu.cloudjdbc.Driver\"); //URL\u8fde\u63a5\u4e32\u4e2d\u4f7f\u7528ips\u5c5e\u6027\u914d\u7f6e\u591aIP\u8d1f\u8f7d\u5747\u8861 Connection conn = DriverManager.getConnection(\"jdbc:xugu://192.168.0.201:5138/SYSTEM?user=SYSDBA&password=SYSDBA&conn_type=1&ips=192.168.0.205,192.168.0.204,192.168.1.206\") \u8fde\u63a5\u5c5e\u6027\u6587\u4ef6 Properties \u914d\u7f6e (Vector \u6216\u5b57\u7b26\u4e32\u6570\u7ec4) Properties info=new Properties(); Class.forName(\"com.xugu.cloudjdbc.Driver\"); //Vector\u7ed3\u6784\u5b58\u653e\u8d1f\u8f7d\u5747\u8861\u591aIP\u5730\u5740\u65b9\u5f0f Vector<String> ipsVector=new Vector<String>(); ipsVector.add(\"192.168.1.201\"); ipsVector.add(\"192.168.1.204\"); ipsVector.add(\"192.168.1.205\"); ipsVector.add(\"192.168.1.206\"); info.put(\"ips\", ipsVector); //\u6570\u7ec4\u5b58\u653e\u8d1f\u8f7d\u5747\u8861\u591aIP\u5730\u5740\u65b9\u5f0f String[] ips={\"192.168.1.205\",\"192.168.1.204\",\"192.168.1.206\"}; info.put(\"ips\", ips); Connection conn = DriverManager.getConnection(\"jdbc:xugu://192.168.1.201:5138/SYSTEM?user=SYSDBA&password=SYSDBA&conn_type=2\",info); \u8fde\u63a5\u5c5e\u6027 XML \u6587\u4ef6\u914d\u7f6e <?xml version=\"1.0\" encoding=\"utf-8\"?> <listeners> <listener> <ip>192.168.1.206</ip> </listener> <listener> <ip>192.168.1.204</ip> </listener> <listener> <ip>192.168.1.205</ip> </listener> </listeners> Class.forName(\"com.xugu.cloudjdbc.Driver\"); Connection conn = DriverManager.getConnection(\"jdbc:xugu:file://xuguClouldListener.xml:5138/SYSTEM?user=SYSDBA&password=SYSDBA&conn_type=1\");","title":"JDBC3"},{"location":"JDBC3/#jdbc","text":"Java \u6570\u636e\u5e93\u8fde\u63a5\uff08Java Database Connectivity\uff0c\u7b80\u79f0 JDBC\uff09\u662f Java \u8bed\u8a00\u4e2d\u7528\u6765\u89c4\u8303\u5ba2\u6237\u7aef\u7a0b\u5e8f\u5982\u4f55\u8bbf\u95ee\u6570\u636e\u5e93\u7684\u5e94\u7528\u7a0b\u5e8f\u63a5\u53e3\uff0c\u63d0\u4f9b\u4e86\u8bf8\u5982\u67e5\u8be2\u548c\u66f4\u65b0\u6570\u636e\u5e93\u4e2d\u6570\u636e\u7684\u65b9\u6cd5\uff0c\u53ef\u4ee5\u4e3a\u591a\u79cd\u5173\u7cfb\u6570\u636e\u5e93\u63d0\u4f9b\u7edf\u4e00\u8bbf\u95ee\u3002JDBC \u63d0\u4f9b\u4e86\u4e00\u79cd\u57fa\u51c6\uff0c\u901a\u8fc7\u6b64\u57fa\u51c6\u6570\u636e\u5e93\u5f00\u53d1\u4eba\u5458\u53ef\u6784\u5efa\u66f4\u9ad8\u7ea7\u7684\u5de5\u5177\u548c\u63a5\u53e3\uff0c\u4e5f\u53ef\u901a\u8fc7\u6b64\u57fa\u51c6\u7f16\u5199\u6570\u636e\u5e93\u5e94\u7528\u7a0b\u5e8f\u3002 \u865a\u8c37\u6570\u636e\u5e93\u7684 JDBC \u9a71\u52a8\u7a0b\u5e8f\uff08\u4ee5\u4e0b\u7b80\u79f0\uff1a\u865a\u8c37 JDBC\uff09\u5b9e\u73b0\u4e86 Java \u7a0b\u5e8f\u548c\u865a\u8c37\u6570\u636e\u5e93\u901a\u4fe1\uff0c\u652f\u6301 SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u7684\u8bbf\u95ee\uff0c\u540c\u65f6\u4e5f\u662f\u6784\u9020\u9ad8\u7ea7 API \u548c\u6570\u636e\u5e93\u5f00\u53d1\u5de5\u5177\u7684\u57fa\u7840\u3002 \u7528\u6237\u60f3\u8981\u5b9e\u73b0\u5bf9\u6570\u636e\u5e93\u7684\u8bbf\u95ee\uff0c\u4e00\u822c\u8981\u7ecf\u8fc7\u5982\u4e0b\u7684\u6b65\u9aa4\uff1a 1. \u901a\u8fc7\u9a71\u52a8\u5668\u7ba1\u7406\u5668\u83b7\u53d6\u8fde\u63a5\u63a5\u53e3\uff1b 2. \u83b7\u5f97 Statement \u6216 Statement \u5b50\u7c7b\uff1b 3. \u901a\u8fc7 Statement \u6267\u884c SQL \u547d\u4ee4\uff1b 4. \u5904\u7406\u6267\u884c\u7ed3\u679c\uff1b 5. \u5173\u95ed Statement\uff1b 6. \u5173\u95ed\u8fde\u63a5\u3002 JDBC \u7ed3\u6784\u56fe, \u5982\u56fe1.1\u6240\u793a\u3002 \u56fe1.1 JDBC\u7ed3\u6784\u56fe \u4f7f\u7528\u865a\u8c37 JDBC \u5b9e\u73b0\u5e94\u7528\u7a0b\u5e8f\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u4e4b\u95f4\u7684\u8fde\u63a5\u670d\u52a1\uff0c\u5e94\u7528\u7a0b\u5e8f\u6240\u5728\u8ba1\u7b97\u673a\u9700\u5df2\u5b89\u88c5 Java \u8fd0\u884c\u73af\u5883\uff08Java Runtime Environment, \u7b80\u79f0 JRE\uff09\u3002\u865a\u8c37 JDBC \u53c2\u7167 JDBC API \u5b9e\u73b0\uff0c\u652f\u6301 JDBC 3.0 \u529f\u80fd\uff0cJava \u5e94\u7528\u7a0b\u5e8f\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u4e4b\u95f4\u7684\u6240\u6709\u64cd\u4f5c\u5747\u9700\u901a\u8fc7\u865a\u8c37 JDBC \u6765\u5b8c\u6210\u3002 \u4f7f\u7528\u865a\u8c37 JDBC \u9700\u8981 JRE 1.6 \u7248\u6216\u66f4\u9ad8\u7248\u672c\u7684 Java \u8fd0\u884c\u65f6\u73af\u5883 (JRE)\u3002 {.is-info}","title":"\u4e00. \u865a\u8c37\u6570\u636e\u5e93\u7684JDBC\u9a71\u52a8\u7a0b\u5e8f\u6982\u8ff0"},{"location":"JDBC3/#jdbc_1","text":"JDBC 3.0 \u89c4\u8303\u7531 JDBC 1.0\u3001JDBC 2.0 \u884d\u751f\u800c\u6765\uff0c\u4e3b\u8981\u5305\u542b java.sql \u5305\u4ee5\u53ca javax.sql \u5305\uff0c\u6570\u636e\u5e93 JDBC \u9a71\u52a8\u5b9e\u73b0 JDBC 3.0 \u89c4\u8303\u6240\u5b9a\u4e49\u7684\u7279\u6027\u63a5\u53e3\uff0c\u5373\u53ef\u8fbe\u5230\u5bf9\u6807\u51c6 JDBC 3.0 \u89c4\u8303\u7684\u652f\u6301\u3002 \u865a\u8c37 JDBC \u57fa\u4e8e JDBC 3.0 \u89c4\u8303\u5b9e\u73b0\uff0c\u5b9e\u73b0\u63a5\u53e3\u7c7b\u6620\u5c04\uff0c\u5982\u88682.1\u6240\u793a\u3002 \u88682.1 \u865a\u8c37JDBC\u5b9e\u73b0\u63a5\u53e3\u7c7b | \u63a5\u53e3 | \u865a\u8c37JDBC\u5b9e\u73b0\u7c7b | | ---------------------------------- | ---------------------------------------- | | java.sql.Driver | com.xugu.cloudjdbc.Driver | | java.sql.Connection | com.xugu.cloudjdbc.Connection | | java.sql.Statement | com.xugu.cloudjdbc.Statement | | java.sql.PreparedStatement | com.xugu.cloudjdbc.PreparedStatement | | java.sql.CallableStatement | com.xugu.cloudjdbc.CallableStatement | | java.sql.ResultSet | com.xugu.cloudjdbc.ResultSet | | java.sql.ResultSetMetaData | com.xugu.cloudjdbc.ResultSetMetaData | | java.sql.DatabaseMetaData | com.xugu.cloudjdbc.DatabaseMetaData | | java.sql.PrameterMetaData | com.xugu.cloudjdbc.PrameterMetaData | | java.sql.Types | com.xugu.cloudjdbc.Types | | java.sql.Blob | com.xugu.cloudjdbc.Blob | | java.sql.Clob | com.xugu.cloudjdbc.Clob | | java.sql.Savepoint | com.xugu.cloudjdbc.Savepoint | | javax.sql.DataSource | com.xugu.pool.XgDataSource | | javax.sql.ConnectionPoolDataSource | com.xugu.pool.XgConnectionPoolDataSource | | javx.sql.PooledConnection | com.xugu.pool.XgPooledConnection | \u9664\u4e86\u4ee5\u4e0a\u6807\u51c6\u7c7b\u63a5\u53e3\u5916\uff0c\u865a\u8c37 JDBC \u8fd8\u6269\u5c55\u5b9e\u73b0\u4e86\u4ee5\u4e0b\u7c7b\uff1a - com.xugu.cloudjdbc.ClientInfo - com.xugu.cloudjdbc.OutParameter - com.xugu.cloudjdbc.Rowid - com.xugu.cloudjdbc.SQLXml - com.xugu.cloudjdbc.SSL - com.xugu.pool.StatementWrapper - com.xugu.pool.PreparedStatementWrapper","title":"\u4e8c. \u865a\u8c37\u6570\u636e\u5e93\u7684JDBC\u63a5\u53e3\u548c\u5bf9\u8c61\u7c7b"},{"location":"JDBC3/#_1","text":"","title":"\u4e09. \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b"},{"location":"JDBC3/#31","text":"\u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b\u3001\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u3001Java \u6570\u636e\u7c7b\u578b\u4e09\u8005\u6620\u5c04\u5173\u7cfb\uff0c\u5982\u88683.1\u6240\u793a\u3002 \u88683.1 \u6570\u636e\u7c7b\u578b\u6620\u5c04\u5173\u7cfb \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b \u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b Java \u6570\u636e\u7c7b\u578b BOOLEAN BOOLEAN boolean SMALLINT SMALLINT short TINYINT TINYINT byte INTEGER INTEGER int BIGINT BIGINT long FLOAT FLOAT float DOUBLE DOUBLE double NUMERIC NUMERIC BigDecimal DECIMAL BigDecimal CHAR CHAR String NCHAR NCHAR String VARCHAR VARCHAR String VARCHAR2 VARCHAR String NVARCHAR2 VARCHAR String BLOB BLOB Blob CLOB CLOB Clob NCLOB BINARY BINARY byte[] VARBINARY LONG VARBINARY DATE DATE Date TIME TIME Time TIMESTAMP TIMESTAMP Timestamp","title":"3.1 \u57fa\u672c\u6570\u636e\u7c7b\u578b"},{"location":"JDBC3/#32","text":"\u865a\u8c37 JDBC \u9664\u4e86\u5b9e\u73b0\u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b\uff0c\u8fd8\u6839\u636e\u865a\u8c37\u6570\u636e\u5e93\u81ea\u6709\u7c7b\u578b\u6269\u5c55\u4e86\u90e8\u5206\u6570\u636e\u7c7b\u578b\uff08\u88683.2\u6240\u793a\uff09\uff0c\u5305\u62ec\u4ee5\u4e0b\u6570\u636e\u7c7b\u578b\u3002 1. \u65f6\u95f4\u6570\u636e\u7c7b\u578b DATETIME\u2014\u2014\u2014 \u65e5\u671f\u65f6\u95f4\u7c7b\u578b DATETIME WITH TIME ZONE \u2014\u2014\u2014 \u5e26\u65f6\u533a\u7684\u65e5\u671f\u65f6\u95f4\u7c7b\u578b TIME WITH TIME ZONE \u2014\u2014\u2014 \u5e26\u65f6\u533a\u7684\u65f6\u95f4\u7c7b\u578b INTERVAL YEAR \u2014\u2014\u2014 \u5e74\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL MONTH \u2014\u2014\u2014 \u6708\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY\u2014\u2014\u2014 \u65e5\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL HOUR \u2014\u2014\u2014 \u5c0f\u65f6\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL MINUTE \u2014\u2014\u2014 \u5206\u949f\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL SECOND \u2014\u2014\u2014 \u79d2\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL YEAR TO MONTH \u2014\u2014\u2014 \u5e74\u5230\u6708\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY TO HOUR \u2014\u2014\u2014 \u65e5\u5230\u5c0f\u65f6\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY TO MINUTE \u2014\u2014\u2014 \u65e5\u5230\u5206\u949f\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY TO SECOND \u2014\u2014\u2014 \u65e5\u5230\u79d2\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL HOUR TO MINUTE \u2014\u2014\u2014 \u5c0f\u65f6\u5230\u5206\u949f\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL HOUR TO SECOND \u2014\u2014\u2014 \u5c0f\u65f6\u5230\u79d2\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL MINUTE TO SECOND \u2014\u2014\u2014 \u5206\u949f\u5230\u79d2\u7684\u65f6\u95f4\u95f4\u9694 2. \u6e38\u6807\u6570\u636e\u7c7b\u578b\uff08\u53ea\u5728\u5b58\u50a8\u8fc7\u7a0b\u3001\u51fd\u6570\u3001\u5305\u4e2d\u4f7f\u7528\uff09 CURSOR \u2014\u2014\u2014 \u6e38\u6807\u6570\u636e\u7c7b\u578b SYS_REFCURSOR \u2014\u2014\u2014 \u8fd4\u56de\u6e38\u6807\u6570\u636e\u7c7b\u578b 3. \u5176\u4ed6\u6570\u636e\u7c7b\u578b GUID \u2014\u2014\u2014 \u5168\u5c40\u552f\u4e00\u6807\u8bc6\u7b26 \u88683.2 \u6269\u5c55\u6570\u636e\u7c7b\u578b\u5bf9\u5e94\u8868 \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b \u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b Java \u6570\u636e\u7c7b\u578b DATETIME DATETIME Timestamp DATETIME WITH TIME ZONE DATETIME_TZ String TIME WITH TIME ZONE TIME_TZ String INTERVAL YEAR INTERVAL_Y String INTERVAL MONTH INTERVAL_M INTERVAL DAY INTERVAL_D INTERVAL HOUR INTERVAL_H INTERVAL MINUTE INTERVAL_MI INTERVAL SECOND INTERVAL_S String INTERVAL YEAR TO MONTH INTERVAL_Y2M INTERVAL DAY TO HOUR INTERVAL_D2H INTERVAL DAY TO MINUTE INTERVAL_D2M INTERVAL DAY TO SECOND INTERVAL_D2S INTERVAL HOUR TO MINUTE INTERVAL_H2M INTERVAL HOUR TO SECOND INTERVAL_H2S INTERVAL MINUTE TO SECOND INTERVAL_M2S CURSOR CURSOR \u65e0\u5bf9\u5e94\u7c7b\u578b SYS_REFCURSOR REFCUR GUID GUID String \u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528 ResultSet \u5bf9\u8c61\u6765\u5bf9\u5e94\u83b7\u53d6\u6e38\u6807\u6240\u8fd4\u56de\u6570\u636e\u3002 {.is-info}","title":"3.2 \u6269\u5c55\u6570\u636e\u7c7b\u578b"},{"location":"JDBC3/#33","text":"\u5728\u8c03\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u4e2d\u7684\u67d0\u4e9b\u65b9\u6cd5\u65f6\uff0c\u9700\u8fdb\u884c Java \u6570\u636e\u7c7b\u578b\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u7684\u8f6c\u6362\uff0c\u8fd9\u4e9b\u65b9\u6cd5\u5305\u62ec\uff1a - ResultSet \u7c7b get\\<Type> \u65b9\u6cd5\uff1b - ResultSet \u7c7b update\\<Type> \u65b9\u6cd5\uff1b - CallableStatement \u7c7b get\\<Type> \u65b9\u6cd5\uff1b - PreparedStatement \u7c7b set\\<Type> \u65b9\u6cd5\u3002 \u6570\u636e\u7c7b\u578b\u4e4b\u95f4\u7684\u8f6c\u6362\uff0c\u9700\u9075\u4ece Java \u6570\u636e\u7c7b\u578b\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u6620\u5c04\u5173\u7cfb\u89c4\u5219\uff0c\u5426\u5219\u53ef\u80fd\u8f6c\u6362\u5931\u8d25\u3002 1. com.xugu.cloudjdbc.ResultSet \u7c7b\u4e2d get\\<Type> \u65b9\u6cd5\u7684\u7c7b\u578b\u8f6c\u6362\uff0c\u5982\u88683.3\u6240\u793a\u3002 2. com.xugu.cloudjdbc.PreparedStatement \u7c7b\u4e2d set\\<Type> \u65b9\u6cd5\u7684\u7c7b\u578b\u8f6c\u6362\uff0c\u5982\u88683.4\u6240\u793a\u3002 X\uff08\u65e0\u4e22\u5931\u8f6c\u6362\uff09\uff1a\u6307\u4ee5\u957f\u7cbe\u5ea6\u7c7b\u578b\u7684 get\\<Type> \u65b9\u6cd5\u83b7\u53d6\u77ed\u7cbe\u5ea6\u6570\u636e\u7c7b\u578b\u5217\u503c\u65e0\u4e22\u5931\u3002 \u5982\uff1a\u4f7f\u7528 getInt() \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u4e3a smallint \u7684\u5217\u6570\u636e\uff0c\u83b7\u53d6\u6570\u636e\u5b8c\u6574\u3002 Z\uff08\u4f9d\u8d56\u8f6c\u6362\uff09\uff1a\u6307 get\\<Type> \u65b9\u6cd5\u4e2d\u7684 Type \u7c7b\u578b\u4e0e\u83b7\u53d6\u6570\u636e\u5e93\u4e2d\u5217\u7684\u6570\u636e\u7c7b\u578b\u4e0d\u4e00\u81f4\uff0c\u6b64\u65f6\u9700\u8981\u901a\u8fc7\u5176\u4ed6\u6570\u636e\u7c7b\u578b\u8f6c\u6362\u4e3a Type \u6570\u636e\u7c7b\u578b\uff0c\u6b64\u8f6c\u6362\u8fc7\u7a0b\u503c\u53ef\u80fd\u4e22\u5931\u90e8\u5206\u6570\u636e\u3002 \u5982\uff1a\u4f7f\u7528 getInt() \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u4e3a float \u7684\u5217\u6570\u636e\uff0c\u53ef\u83b7\u53d6 float \u5217\u6570\u636e\u7684\u6574\u6570\u503c\uff0c\u800c\u5c0f\u6570\u7cbe\u5ea6\u503c\u5c06\u4e22\u5931\u3002 Y\uff08\u76f4\u63a5\u8f6c\u6362\uff09\uff1a\u6307 get\\<Type> \u65b9\u6cd5\u4e2d\u7684 Type \u7c7b\u578b\u4e0e\u83b7\u53d6\u6570\u636e\u5e93\u4e2d\u5217\u7684\u6570\u636e\u7c7b\u578b\u4e00\u81f4\u3002 \u5982\uff1a\u4f7f\u7528 getInt() \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u4e3a integer \u7684\u5217\u6570\u636e\uff0c\u76f4\u63a5\u83b7\u53d6\u5b8c\u6574\u6570\u636e\u3002 {.is-info} P\uff08\u5141\u8bb8\u63d2\u5165\uff09\uff1a\u6307 set\\<Type> \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u5e93\u4e2d\u5217\u6570\u636e\u65f6\uff0c\u6570\u636e\u65e0\u635f\u5931\u5b58\u5165\u6570\u636e\u5e93\u4e2d\u3002 \u5982\uff1a\u4f7f\u7528 setInt() \u65b9\u6cd5\u8bbe\u7f6e\u5217\u6570\u636e\u7c7b\u578b\u4e3a bigint \u7684\u6570\u636e\u65f6\uff0c\u6570\u636e\u53ef\u6b63\u786e\u5b58\u5165\u3002 Z\uff08\u90e8\u5206\u63d2\u5165\uff09\uff1a\u6307 set\\<Type> \u65b9\u6cd5\u4e2d\u7684 Type \u7c7b\u578b\u548c\u6570\u636e\u5e93\u4e2d\u5217\u6570\u636e\u7c7b\u578b\u4e0d\u4e00\u81f4\uff0c\u6570\u636e\u4ec5\u80fd\u90e8\u5206\u6b63\u786e\u5b58\u5165\u3002 \u5982\uff1a\u4f7f\u7528 setInt() \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u5e93\u5217\u7c7b\u578b\u4e3a tinyint \u7684\u6570\u636e\uff0c\u56e0 tinyint \u8868\u793a\u8303\u56f4\u4e3a-128\uff5e127 \u7684\u6574\u6570\u503c\uff0c\u6545\u800c tinyint\u8868\u793a\u8303\u56f4\u5185\u6570\u636e\u53ef\u6b63\u786e\u5b58\u5165\uff0c\u8303\u56f4\u5916\u6570\u636e\u5c06\u63d2\u5165\u5931\u8d25\u3002 {.is-info}","title":"3.3 \u6570\u636e\u7c7b\u578b\u8f6c\u6362"},{"location":"JDBC3/#_2","text":"","title":"\u56db. \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5"},{"location":"JDBC3/#41-jdbc","text":"\u901a\u8fc7\u865a\u8c37 JDBC \u9a71\u52a8\u8bbf\u95ee\u865a\u8c37\u6570\u636e\u5e93\uff0c\u9996\u5148\u5e94\u4fdd\u8bc1\u5e94\u7528\u7a0b\u5e8f\u6b63\u786e\u5f15\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u5305 (cloudjdbc-*.*.*.jar)\uff0c\u5373\u5c06\u9a71\u52a8\u5305\u62f7\u8d1d\u81f3\u5e94\u7528\u7a0b\u5e8f\u5e76\u6dfb\u52a0\u5f15\u7528\u3002","title":"4.1 \u90e8\u7f72JDBC\u9a71\u52a8\u7a0b\u5e8f"},{"location":"JDBC3/#42-jdbc","text":"\u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u8fdb\u884c\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u8c03\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u7a0b\u5e8f\uff0c\u9996\u5148\u8981\u5c06\u865a\u8c37 JDBC \u9a71\u52a8\u52a0\u8f7d\u5230\u7cfb\u7edf\u5185\u5b58\u4e2d\uff0c\u7136\u540e\u4f9b\u7cfb\u7edf\u4f7f\u7528\u3002\u865a\u8c37 JDBC \u7684\u9a71\u52a8\u5b9e\u73b0\u7c7b\u4e3acom.xugu.cloudjdbc.Driver\uff0c\u4ee5\u4e0b\u662f\u5c06\u865a\u8c37 JDBC \u9a71\u52a8\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\u7684\u4ee3\u7801\uff1a //\u663e\u793a\u6ce8\u518c DriverManager.registerDriver(new com.xugu.cloudjdbc.Driver())\u037e //\u9690\u5f0f\u6ce8\u518c Class.forName(\u201ccom.xugu.cloudjdbc.Driver\u201d)\u037e \u9690\u5f0f\u6ce8\u518c\u5373\u901a\u8fc7 Class.forName() \u5c06\u5bf9\u5e94\u7684\u9a71\u52a8\u7c7b\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\uff0c\u5c06\u6267\u884c\u5185\u5b58\u4e2d\u7684 static \u9759\u6001\u4ee3\u7801\u6bb5\uff0c\u6b64\u4ee3\u7801\u6bb5\u4f1a\u521b\u5efa\u4e00\u4e2a\u865a\u8c37 JDBC \u9a71\u52a8\u7684\u5b9e\u4f8b\uff0c\u5e76\u653e\u5165 DriverManager \u4e2d\uff0c\u4f9b DriverManager \u4f7f\u7528\u3002 {.is-info}","title":"4.2 \u52a0\u8f7dJDBC\u9a71\u52a8\u7a0b\u5e8f"},{"location":"JDBC3/#43","text":"\u865a\u8c37 JDBC \u9a71\u52a8\u8fde\u63a5 URL \u4e32\u683c\u5f0f\uff1a jdbc:xugu://serverIP:portNumber/databaseName[?property=value[&property=value]] \u865a\u8c37 JDBC \u9a71\u52a8\u8fde\u63a5 URL \u4e32\u683c\u5f0f\uff1a 1). jdbc:xugu:// \uff1a\uff08\u5fc5\u9700\uff09\u865a\u8c37\u6570\u636e\u5e93\u7279\u5b9a\u534f\u8bae\u3002 2). serverIP \uff1a\uff08\u5fc5\u9700\uff09\u865a\u8c37\u6570\u636e\u5e93\u6240\u5728\u670d\u52a1\u5668\u7684 IP \u5730\u5740\u3002 3). portNumber\uff1a\uff08\u5fc5\u9700\uff09\u662f\u865a\u8c37\u6570\u636e\u5e93\u670d\u52a1 TCP \u8bbf\u95ee\u7aef\u53e3\uff0c\u9ed8\u8ba4 5138\u3002 4). databaseName\uff1a\uff08\u5fc5\u9700\uff09\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u5e93\u540d\u79f0\u3002 5). property\uff1a\uff08\u53ef\u9009\uff09\u865a\u8c37\u6570\u636e\u5e93\u7684 URL \u8fde\u63a5\u5c5e\u6027\u3002\u591a\u4e2a\u8fde\u63a5\u5c5e\u6027\u4e4b\u95f4\u4f7f\u7528\u201c&\u201d\u5206\u9694\uff0c\u4e0d\u53ef\u91cd\u590d\u3002 \u865a\u8c37 JDBC \u9a71\u52a8 URL \u4e32\u793a\u4f8b\u5982\u4e0b\uff1a String url = jdbc:xugu://localhost:5138/System?user=GUEST&password=GUEST\u037e property \u8bbe\u7f6e\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u6027\uff0c\u5e38\u7528\u8fde\u63a5\u5c5e\u6027\u89c1\u88684.1\u3002 \u88684.1 \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u6027 table th:first-of-type { width: 20%; } table th:nth-of-type(2) { width: 10%; } table th:nth-of-type(3) { width: 10%; } table th:nth-of-type(4) { width: 50%; } \u5c5e\u6027\u540d\u79f0 \u5fc5\u9009\u9879 \u53d6\u503c \u8bf4\u660e database \u221a \u5b57\u7b26\u4e32 \u6570\u636e\u5e93\u540d\u79f0 user \u221a \u5b57\u7b26\u4e32 \u7528\u6237\u540d\u79f0 password \u221a \u5b57\u7b26\u4e32 \u7528\u6237\u5bc6\u7801 encryptor \u00d7 \u5b57\u7b26\u4e32 \u7528\u4e8e\u542f\u52a8\u52a0\u5bc6\u6570\u636e\u5e93\uff0c\u82e5\u5e93\u672a\u52a0\u5bc6\uff0c\u5219\u53ef\u4e0d\u8981\uff0c\u4f46\u5e26\u4e0a\u6b64\u53c2\u6570\u4e0d\u4f1a\u5f71\u54cd\u8fde\u63a5 char_set \u00d7 \u5b57\u7b26\u4e32 \u8fde\u63a5\u5b57\u7b26\u96c6\u3002'GB2312'\u3001'GBK'\u3001'UTF8' \u7b49\uff0c\u9ed8\u8ba4\uff1aGBK time_zone \u00d7 \u5b57\u7b26\u4e32 \u5ba2\u6237\u7aef\u65f6\u533a\u3002\u9ed8\u8ba4\uff1a\u865a\u8c37\u6570\u636e\u5e93\u914d\u7f6e\u53c2\u6570 def_timezone \u6240\u8bbe\u7f6e\u65f6\u533a\uff08\u53ea\u5bf9\u7cfb\u7edf\u65f6\u95f4\u51fd\u6570\u751f\u6548\uff09 iso_level \u00d7 \u5b57\u7b26\u4e32 'READ COMMITED'\uff1a\u8bfb\u5df2\u63d0\u4ea4\uff1b 'REPEATIABLE READ'\uff1a\u53ef\u91cd\u590d\u8bfb\uff1b'SERIALIZABLE'\uff1a\u5e8f\u5217\u5316 lock_time \u00d7 \u6570\u503c \u5355\u4f4d\uff1a\u6beb\u79d2\uff0c\u9ed8\u8ba4\u503c\uff1a0\uff0c\u8868\u793a\u8fde\u63a5\u4e2d\u7684\u4e8b\u52a1\u9501\u5f81\u7528\u65f6\uff0c\u6700\u5927\u7b49\u5019\u65f6\u95f4\uff0c\u82e5\u5728\u8bbe\u7f6e\u65f6\u95f4\u5185\u52a0\u9501\u5931\u8d25\uff0c\u56de\u6eda\u4e8b\u52a1\u5e76\u62a5\u9519 lob_ret \u00d7 \u5b57\u7b26\u4e32 \u5927\u5bf9\u8c61\uff08Blob\u3001Clob\uff09\u6570\u636e\u8fd4\u56de\u65b9\u5f0f\u3002\u5c5e\u6027\u4e3a descriptor \u65f6\uff0c\u4ee5\u63cf\u8ff0\u7b26\u65b9\u5f0f\u8fd4\u56de\uff1b\u5176\u4ed6\u4ee5\u6570\u636e\u6d41\u65b9\u5f0f\u8fd4\u56de\u3002\u9ed8\u8ba4\uff1a\u4ee5\u6570\u636e\u6d41\u65b9\u5f0f\u8fd4\u56de return_rowid \u00d7 \u5e03\u5c14\u503c \u662f\u5426\u8fd4\u56de\u8bb0\u5f55 rowid \u503c\u3002\u5c5e\u6027\u4e3a TRUE \u65f6\uff0c\u8fd4\u56de rowid\uff1b\u5176\u4ed6\u8fd4\u56de FALSE\u3002\u9ed8\u8ba4\uff1aFALSE auto_commit \u00d7 on/off \u4e8b\u52a1\u662f\u5426\u81ea\u52a8\u63d0\u4ea4\u3002\u5c5e\u6027\u4e3a ON \u65f6\uff0c\u8fde\u63a5\u81ea\u52a8\u63d0\u4ea4\uff1b\u5c5e\u6027\u4e3a OFF\u65f6\uff0c\u8fde\u63a5\u975e\u81ea\u52a8\u63d0\u4ea4\u3002\u9ed8\u8ba4\uff1aON conn_type \u00d7 \u6570\u503c \u8d1f\u8f7d\u5747\u8861\u5206\u914d\u65b9\u5f0f\u3002\u5c5e\u6027\u4e3a 1 \u65f6\uff0c\u968f\u673a\u5206\u914d\uff1b\u5c5e\u6027\u4e3a 2 \u65f6\uff0c\u987a\u5e8f\u5206\u914d\u3002\u9ed8\u8ba4\uff1a2 ips \u00d7 \u5b57\u7b26\u4e32 \u8d1f\u8f7d\u5747\u8861\u8fde\u63a5 IP \u5730\u5740\uff0c\u591a\u4e2a IP \u5730\u5740\u4ee5\u9017\u53f7\u5206\u9694\uff08\u8be6\u7ec6\u89c1\u8d1f\u8f7d\u5747\u8861\uff09 CompatibleOracle \u00d7 \u5e03\u5c14\u503c \u517c\u5bb9 Oracle \u9009\u9879\u3002\u5c5e\u6027\u4e3a true\uff0c\u517c\u5bb9 Oracle\u037e \u5c5e\u6027\u4e3a FALSE\uff0c\u865a\u8c37 JDBC \u81ea\u6709\u5b9e\u73b0 recv_mode \u00d7 \u6570\u503c \u63a5\u6536\u6a21\u5f0f\u9009\u9879\u3002\u5c5e\u6027\u503c\u4e3a 0 \u65f6\uff0c\u672c\u5730\u5168\u63a5\u6536\u6a21\u5f0f\uff1b\u5c5e\u6027\u503c\u4e3a 1 \u65f6\uff0c\u7f51\u7edc\u63a5\u6536\u6a21\u5f0f\uff1b\u5c5e\u6027\u503c\u4e3a 2 \u65f6\uff0c\u670d\u52a1\u5668\u7aef\u6e38\u6807\u63a5\u6536\u6a21\u5f0f\u3002\u9ed8\u8ba4\uff1a0 emptyStringAsNull \u00d7 \u5e03\u5c14\u503c \u7a7a\u5b57\u4e32\u5904\u7406\u3002\u5c5e\u6027\u4e3a FALSE \u65f6\uff0c\u7a7a\u5b57\u7b26\u4e32\u8ba4\u5b9a\u4e3a NULL\uff1b\u5c5e\u6027\u4e3a TRUE \u65f6\uff0c\u7a7a\u5b57\u7b26\u4e32\u4fdd\u7559\u3002\u9ed8\u8ba4\uff1a\u7a7a\u5b57\u4e32\u4fdd\u7559 xgversion \u00d7 201/301 \u5ba2\u6237\u7aef\u534f\u8bae\u7248\u672c\uff0c\u865a\u8c37\u6570\u636e\u5e93V12\u7248\u672c\u5347\u7ea7\u652f\u6301301\u534f\u8bae\uff0c\u540c\u65f6\u517c\u5bb9201\u534f\u8bae SSL \u00d7 SSL \u8fde\u63a5\u52a0\u5bc6\u53c2\u6570\u3002\u5c5e\u6027\u503c\u3010SSL\uff1a\u542f\u7528SSL\u52a0\u5bc6\u4f20\u8f93\uff1bNSSL\uff1a\u7981\u7528SSL\u52a0\u5bc6\u4f20\u8f93\u3011 slowsqltime \u00d7 \u6570\u503c \u8bbe\u7f6e\u6162SQL\u6267\u884c\u65f6\u95f4\u3002SQL\u8bed\u53e5\u6267\u884c\u65f6\u95f4\u8d85\u8fc7\u8be5\u6570\u503c\uff0c\u65e5\u5fd7\u5219\u4f1a\u8f93\u51fa\u6267\u884cSQL batch_mode \u00d7 \u5e03\u5c14\u503c PreparedStatement\u662f\u5426\u4f7f\u7528\u6279\u91cf\u5904\u7406\u3002\u5c5e\u6027\u4e3a TRUE \u65f6\uff0cexecuteBatch\u91c7\u7528\u6279\u91cf\u6a21\u578b\uff1bFALSE\u5219\u91c7\u7528\u5355\u6761\u5904\u7406\u6a21\u578b\u3002\u9ed8\u8ba4\uff1aFALSE \u8fde\u63a5\u53c2\u6570\u4f7f\u7528SSL\u5c5e\u6027\u65f6\uff0c\u4f9d\u8d56\u7a0b\u5e8f\u5305\u4e2d\u63d0\u4f9b\u7684\u52a8\u6001\u94fe\u63a5\u5e93\uff0c\u4f7f\u7528\u524d\u9700\u5c06\u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u5230\u64cd\u4f5c\u7cfb\u7edf\u6307\u5b9a\u4f4d\u7f6e\u65b9\u53ef\u6b63\u5e38\u4f7f\u7528SSL\u52a0\u5bc6\u529f\u80fd\u3002 Windows 32\u4f4d\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u7528SSL\u5c5e\u6027\u524d\uff0c\u9700\u5c06\u7a0b\u5e8f\u5305 ssl/win32 \u4e0b xgssl.dll \u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u62f7\u8d1d\u5230\u7cfb\u7edf\u76ee\u5f55 C:/windows/system32 \u76ee\u5f55\u4f4d\u7f6e\u3002 Windows 64\u4f4d\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u7528SSL\u5c5e\u6027\u524d\uff0c\u9700\u5c06\u7a0b\u5e8f\u5305 ssl/win64 \u4e0b xgssl.dll \u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u62f7\u8d1d\u5230\u7cfb\u7edf\u76ee\u5f55 C:/windows/system32 \u76ee\u5f55\u4e0b\u3002 Linux X64\u4f4d\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u7528SSL\u5c5e\u6027\u524d\uff0c\u9700\u5c06\u7a0b\u5e8f\u5305 ssl/linux64 \u4e0b libxgssl.so \u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u62f7\u8d1d\u5230\u7cfb\u7edf\u76ee\u5f55 /usr/lib\u6216\u8005/usr/lib4 \u76ee\u5f55\u4e0b\u3002 \u865a\u8c37 JDBC \u8bbe\u7f6e\u8fde\u63a5\u5c5e\u6027\u793a\u4f8b\u5982\u4e0b (\u7248\u672c\u53f7\u3001\u5927\u5bf9\u8c61\u63cf\u8ff0\u7b26\u3001\u65f6\u533a\u3001\u5173\u95ed\u8fde\u63a5\u81ea\u52a8\u63d0\u4ea4)\uff1a String url=jdbc:xugu://localhost:5138/System?user=GUEST&password=GUEST&version=110&auto_commit=false&lob_ret=descriptor&time_zone=GMT-8:00\u037e","title":"4.3 \u8fde\u63a5\u5b57\u4e32\u53ca\u53c2\u6570\u8bbe\u7f6e"},{"location":"JDBC3/#44","text":"\u5728\u5e94\u7528\u7a0b\u5e8f\u5c06\u865a\u8c37 JDBC \u9a71\u52a8\u52a0\u8f7d\u5230\u7cfb\u7edf\u5185\u5b58\u4e2d\u540e\uff0c\u53ef\u901a\u8fc7 DriverManager \u7c7b\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u65b9\u6cd5\u5982\u4e0b\uff1a DriverManager.getConnection(String url)\u037e DriverManager.getConnection(String url,Properties)\u037e DriverManager.getConnection(String url,String user,String password)\u037e","title":"4.4 \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5"},{"location":"JDBC3/#_3","text":"\u901a\u8fc7 DriverManager \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u4ee5\u5916\uff0c\u8fd8\u53ef\u4ee5\u4f7f\u7528\u6570\u636e\u6e90\u6216\u8fde\u63a5\u6c60\u65b9\u5f0f\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u3002\u901a\u8fc7\u6570\u636e\u6e90\u65b9\u5f0f\u6216\u8fde\u63a5\u6c60\u65b9\u5f0f\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u6709\u4ee5\u4e0b\u4f18\u70b9\uff1a - \u8d44\u6e90\u91cd\u7528 \u7531\u4e8e\u6570\u636e\u5e93\u8fde\u63a5\u5f97\u5230\u91cd\u7528\uff0c\u907f\u514d\u4e86\u9891\u7e41\u521b\u5efa\u3001\u91ca\u653e\u8fde\u63a5\u5f15\u8d77\u7684\u5927\u91cf\u6027\u80fd\u5f00\u9500\u3002\u5728\u51cf\u5c11\u7cfb\u7edf\u6d88\u8017\u7684\u57fa\u7840\u4e0a\uff0c\u53e6\u4e00\u65b9\u9762\u4e5f\u589e\u8fdb\u4e86\u7cfb\u7edf\u8fd0\u884c\u73af\u5883\u7684\u5e73\u7a33\u6027\uff08\u51cf\u5c11\u5185\u5b58\u788e\u7247\u4ee5\u53ca\u6570\u636e\u5e93\u4e34\u65f6\u8fdb\u7a0b/\u7ebf\u7a0b\u7684\u6570\u91cf\uff09\u3002 - \u66f4\u5feb\u7684\u7cfb\u7edf\u54cd\u5e94 \u6570\u636e\u5e93\u8fde\u63a5\u6c60\u5728\u521d\u59cb\u5316\u8fc7\u7a0b\u4e2d\uff0c\u5f80\u5f80\u5df2\u7ecf\u521b\u5efa\u4e86\u82e5\u5e72\u6570\u636e\u5e93\u8fde\u63a5\u7f6e\u4e8e\u6c60\u4e2d\u5907\u7528\u3002\u6b64\u65f6\u8fde\u63a5\u7684\u521d\u59cb\u5316\u5de5\u4f5c\u5747\u5df2\u5b8c\u6210\u3002\u5bf9\u4e8e\u4e1a\u52a1\u8bf7\u6c42\u5904\u7406\u800c\u8a00\uff0c\u76f4\u63a5\u5229\u7528\u73b0\u6709\u53ef\u7528\u8fde\u63a5\uff0c\u907f\u514d\u4e86\u6570\u636e\u5e93\u8fde\u63a5\u521d\u59cb\u5316\u548c\u91ca\u653e\u8fc7\u7a0b\u7684\u65f6\u95f4\u5f00\u9500\uff0c\u4ece\u800c\u7f29\u51cf\u4e86\u7cfb\u7edf\u6574\u4f53\u54cd\u5e94\u65f6\u95f4\u3002 - \u65b0\u7684\u8d44\u6e90\u5206\u914d\u624b\u6bb5 \u5bf9\u4e8e\u591a\u5e94\u7528\u5171\u4eab\u540c\u4e00\u6570\u636e\u5e93\u7684\u7cfb\u7edf\u800c\u8a00\uff0c\u53ef\u5728\u5e94\u7528\u5c42\u901a\u8fc7\u6570\u636e\u5e93\u8fde\u63a5\u7684\u914d\u7f6e\uff0c\u9650\u5236\u5355\u4e00\u5e94\u7528\u7533\u8bf7\u6570\u636e\u5e93\u8fde\u63a5\u6570\uff0c\u4ece\u800c\u907f\u514d\u5355\u4e00\u5e94\u7528\u72ec\u5360\u6240\u6709\u6570\u636e\u5e93\u8d44\u6e90\u3002 \u865a\u8c37 JDBC \u4e2d\u6570\u636e\u6e90\u5b9e\u73b0\u7c7b\u4e3a com.xugu.pool.XgDataSource\uff0c\u8fde\u63a5\u6c60\u5b9e\u73b0\u7c7b\u4e3acom.xugu.pool \u5305\u4e2d\u7684 XgDataSource\u3001XgPooledConnection\u3001XgConnectionPoolDataSource\u3001XgConnectionEventListener\u3001XgConnectionEvent\u3002","title":"\u4e94. \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u6e90\u548c\u8fde\u63a5\u6c60"},{"location":"JDBC3/#51","text":"XgDataSource \u63d0\u4f9b set \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u6e90\u8fde\u63a5\u5c5e\u6027\uff1a \u793a\u4f8b\uff1a\u901a\u8fc7 XgDataSource \u4e0e\u865a\u8c37\u6570\u636e\u5e93\u5efa\u7acb\u8fde\u63a5 com.xugu.pool.XgDataSource ds = new com.xugu.pool.XgDataSource()\u037e ds.setUrl(\"jdbc:xugu://127.0.0.1:5138/db\")\u037e ds.setUser(\"SYSDBA\")\u037e ds.setPassword(\"SYSDBA\")\u037e Properties pro = new Properties()\u037e pro.setProperty(\"return_rowid\", \"true\")\u037e pro.setProperty(\"auto_commit\", \"off\")\u037e ds.setPro(pro)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u767b\u5f55\u4e32\u3002url\u4e3a\u6570\u636e\u5e93\u767b\u5f55\u4e32 setUrl(String url)\uff1b //\u6307\u5b9a\u6570\u636e\u5e93\u670d\u52a1\u5668\u3002host\u4e3a\u670d\u52a1\u5668\u5730\u5740 setHostName(String host)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u540d\u3002dbName\u4e3a\u6570\u636e\u5e93\u540d setDatabaseName(String dbName)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u7aef\u53e3\u53f7\u3002port\u4e3a\u6570\u636e\u5e93\u7aef\u53e3\u53f7 setPort(int port)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u7528\u6237\u3002userName\u4e3a\u6570\u636e\u5e93\u767b\u5f55\u7528\u6237\u540d setUser(String userName)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u767b\u5f55\u5bc6\u7801\u3002passWord\u4e3a\u6570\u636e\u5e93\u767b\u5f55\u5bc6\u7801 setPassword(Stirng passWord)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u767b\u5f55\u53c2\u6570\u3002ds_pro\u4e3a\u6570\u636e\u5e93\u8fde\u63a5\u53c2\u6570 setPro(Properties ds_pro)\uff1b // \u901a\u8fc7\u6570\u636e\u6e90\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5 Connection conn = ds.getConnection()\u037e \u5728 com.xugu.pool.XgDataSource \u7c7b\u4e2d\u901a\u8fc7 setXX() \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u6e90\u7684\u8fde\u63a5\u5c5e\u6027\uff0c\u82e5\u672a\u6307\u5b9a\u5219\u4f7f\u7528\u9ed8\u8ba4\u5c5e\u6027\u503c\uff1a\u6570\u636e\u5e93\u670d\u52a1\u5668\u5730\u5740\u9ed8\u8ba4\u4e3a\u201clocalhost\u201d \uff0c\u8fde\u63a5\u6570\u636e\u5e93\u9ed8\u8ba4\u4e3a\u201cSYSTEM\u201d \uff0c\u8bbf\u95ee\u7aef\u53e3\u53f7\u9ed8\u8ba4\u4e3a\u201c5138\u201d \uff0c\u8bbf\u95ee\u7528\u6237\u540d\u9ed8\u8ba4\u4e3a\u201cGUEST\u201d \uff0c\u7528\u6237\u5bc6\u7801\u9ed8\u8ba4\u4e3a\u201cGUEST\u201d \u3002URL \u9ed8\u8ba4\u8fde\u63a5\u4e32\u4e3a\u201cjdbc:xugu://127.0.0.1:5138/SYSTEM?user=GUEST&password=GUEST&version=110\u201d\u3002\u6570\u636e\u6e90\u5efa\u7acb\u540e\uff0c\u53ef\u901a\u8fc7\u8c03\u7528 XgDataSource \u7c7b\u4e2d\u7684 getConnection() \u548c getConnection(String username,String password) \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u3002","title":"5.1 \u4f7f\u7528\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u6e90\u521b\u5efa\u8fde\u63a5"},{"location":"JDBC3/#52","text":"\u8fde\u63a5\u6c60\u6280\u672f\u7684\u6838\u5fc3\u601d\u60f3\u662f\uff1a\u8fde\u63a5\u590d\u7528\uff0c\u901a\u8fc7\u5efa\u7acb\u4e00\u4e2a\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u4ee5\u53ca\u4e00\u5957\u8fde\u63a5\u4f7f\u7528\u3001\u5206\u914d\u3001\u7ba1\u7406\u7b56\u7565\uff0c\u8be5\u8fde\u63a5\u6c60\u4e2d\u7684\u8fde\u63a5\u53ef\u4ee5\u5f97\u5230\u9ad8\u6548\u3001\u5b89\u5168\u7684\u590d\u7528\uff0c\u907f\u514d\u4e86\u6570\u636e\u5e93\u8fde\u63a5\u9891\u7e41\u5efa\u7acb\u3001\u5173\u95ed\u7684\u5f00\u9500\u3002 \u865a\u8c37 JDBC \u8fde\u63a5\u6c60\u5b9e\u73b0\u7c7b\u5bf9\u865a\u8c37\u6570\u636e\u5e93\u539f\u59cb\u8fde\u63a5\u8fdb\u884c\u4e86\u5c01\u88c5\uff0c\u4ece\u800c\u65b9\u4fbf\u4e86\u6570\u636e\u5e93\u5e94\u7528\u5bf9\u4e8e\u8fde\u63a5\u7684\u4f7f\u7528\uff08\u7279\u522b\u662f\u5bf9\u4e8e\u4e8b\u52a1\u5904\u7406\uff09\uff0c\u63d0\u9ad8\u4e86\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u6548\u7387\uff0c\u4e5f\u6b63\u662f\u56e0\u4e3a\u8fd9\u4e2a\u5c01\u88c5\u5c42\u7684\u5b58\u5728\uff0c\u9694\u79bb\u4e86\u5e94\u7528\u7684\u672c\u8eab\u7684\u5904\u7406\u903b\u8f91\u548c\u5177\u4f53\u6570\u636e\u5e93\u8bbf\u95ee\u903b\u8f91\uff0c\u4f7f\u5e94\u7528\u672c\u8eab\u7684\u590d\u7528\u6210\u4e3a\u53ef\u80fd\u3002\u8fde\u63a5\u6c60\u4e3b\u8981\u7531\u4e09\u90e8\u5206\u7ec4\u6210\uff1a\u8fde\u63a5\u6c60\u7684\u5efa\u7acb\u3001\u8fde\u63a5\u6c60\u4e2d\u8fde\u63a5\u7684\u4f7f\u7528\u7ba1\u7406\u3001\u8fde\u63a5\u6c60\u7684\u5173\u95ed\u3002 \u865a\u8c37 JDBC \u8fde\u63a5\u6c60\u7684\u57fa\u672c\u601d\u60f3\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u5efa\u7acb\u4e00\u4e2a\u201c\u7f13\u51b2\u6c60\u201d\u3002\u9884\u5148\u5728\u201c\u7f13\u51b2\u6c60\u201d\u4e2d\u653e\u5165\u4e00\u5b9a\u6570\u91cf\u7684\u8fde\u63a5\uff0c\u5f53\u9700\u8981\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65f6\uff0c\u53ea\u9700\u4ece\u201c\u7f13\u51b2\u6c60\u201d\u4e2d\u53d6\u51fa\u4e00\u4e2a\uff0c\u4f7f\u7528\u5b8c\u6bd5\u4e4b\u540e\u518d\u653e\u56de\u53bb\u3002\u901a\u8fc7\u8bbe\u5b9a\u8fde\u63a5\u6c60\u6700\u5927\u8fde\u63a5\u6570\u6765\u9632\u6b62\u7cfb\u7edf\u65e0\u5c3d\u7684\u4e0e\u6570\u636e\u5e93\u8fde\u63a5\u3002\u4ea6\u53ef\u901a\u8fc7\u8fde\u63a5\u6c60\u7684\u7ba1\u7406\u673a\u5236\u76d1\u89c6\u6570\u636e\u5e93\u7684\u8fde\u63a5\u6570\u91cf\u3001\u4f7f\u7528\u60c5\u51b5\uff0c\u4e3a\u7cfb\u7edf\u5f00\u53d1\u3001\u6d4b\u8bd5\u53ca\u6027\u80fd\u8c03\u6574\u63d0\u4f9b\u4f9d\u636e\u3002 \u5f53\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u5b8c\u6570\u636e\u5e93\u8fde\u63a5\u8c03\u7528\u8fde\u63a5\u5173\u95ed\u65b9\u6cd5\u65f6\uff0c\u8be5\u8fde\u63a5\u5e76\u672a\u9500\u6bc1\uff0c\u800c\u662f\u88ab\u5f52\u8fd8\u7ed9\u8fde\u63a5\u6c60\u7b49\u5f85\u4e0b\u6b21\u7ee7\u7eed\u8c03\u7528\u3002 {.is-info} \u865a\u8c37 JDBC \u5b9e\u73b0\u8fde\u63a5\u6c60\u670d\u52a1\u6240\u63d0\u4f9b\u7684\u63a5\u53e3\u7c7b\u5982\u4e0b\uff1a - XgDataSource \u5b9e\u73b0 javax.sql.DataSource \u63a5\u53e3\uff1b - XgPooledConnection \u5b9e\u73b0 javax.sql.PooledConnection \u63a5\u53e3\uff1b - XgConnectionPoolDataSource \u5b9e\u73b0 javax.sql.ConnectionPoolDataSource \u63a5\u53e3\uff1b - XgConnectionEventListener \u5b9e\u73b0 javax.sql.ConnectionEventListener \u63a5\u53e3\uff1b - XgConnectionEvent \u7ee7\u627f\u81ea javax.sql.ConnectionEvent \u7c7b\u3002 \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u4e2d\u7684\u8fde\u63a5\u5747\u662f\u901a\u8fc7\u6570\u636e\u6e90\u5efa\u7acb\u7684\uff0c\u6545\u800c XgConnectionPoolDataSource \u7ee7\u627f\u4e86 com.xugu.pool.XgDataSource \u7c7b\u3002\u7528\u6237\u4ea6\u53ef\u901a\u8fc7 XgConnectionPoolDataSource \u5bf9\u8c61\u8bbe\u7f6e\u6570\u636e\u6e90\u5c5e\u6027\u548c\u8fde\u63a5\u6c60\u5c5e\u6027\uff1a //\u6700\u5c0f\u8fde\u63a5\u6570 setMinIdle(int min) //\u6700\u5927\u8fde\u63a5\u6570 setMaxActive(int max) //\u767b\u5f55\u7a7a\u95f2\u65f6\u95f4 setLoginTimeout(int time) //\u6700\u5927\u7b49\u5f85\u8fde\u63a5\u8d85\u65f6 setMaxWaitTime(long waitTime) \u5176\u4e2d\uff1asetLoginTimeout() \u548c setMaxWaitTime() \u65b9\u6cd5\u4e2d\u53c2\u6570\u5355\u4f4d\u4e3a\u6beb\u79d2\uff0c\u5176\u4ed6\u65b9\u6cd5\u4e2d\u53c2\u6570\u5355\u4f4d\u4e3a\u79d2\u3002 \u793a\u4f8b\uff1a\u521b\u5efa\u4e00\u4e2a\u865a\u8c37 JDBC \u8fde\u63a5\u6c60\uff0c\u5e76\u901a\u8fc7\u8fde\u63a5\u6c60\u83b7\u53d6\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u3002 XgConnectionPoolDataSource CPDSource = new XgConnectionPoolDataSource()\u037e CPDSource.setHostName(\u201clocalhost\u201d)\u037e CPDSource.setPort(5138)\u037e CPDSource.setDatabaseName(\u201cxuguNew\u201d)\u037e CPDSource.setUser(\u201cSYSDBA\u201d)\u037e CPDSource.setPassword(\u201cSYSDBA\u201d)\u037e CPDSource.setUrl(\"jdbc:xugu://localhost:5138/xuguNew)\u037e CPDSource.setMaxActive(50)\u037e CPDSource.setMinIdle(5)\u037e CPDSource.setLoginTimeout(3000)\u037e CPDSource.setMaxWaitTime(3000)\u037e XgPooledConnection Pconn = (XgPooledConnection)CPDSource.getPooledConnection()\u037e Connection conn = Pconn.getConnection()\u037e","title":"5.2 \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u6c60"},{"location":"JDBC3/#jdbc_2","text":"\u4f7f\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u5b9e\u73b0\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u4ea4\u4e92\u7684\u4e00\u822c\u4f7f\u7528\u6b65\u9aa4\uff1a\u5bfc\u5165\u865a\u8c37 JDBC \u9a71\u52a8\u5305 \u2192 \u52a0\u8f7d\u865a\u8c37 JDBC \u9a71\u52a8\u7a0b\u5e8f \u2192 \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5 Connection \u2192 \u521b\u5efa\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61 Statement \u2192 \u6267\u884c SQL \u8bed\u53e5 \u2192 \u5904\u7406\u6267\u884c\u7ed3\u679c ResultSet \u2192 \u91ca\u653e\u8d44\u6e90\u3002 - \u7b2c 1 \u6b65\uff1a\u5bfc\u5165\u865a\u8c37 JDBC \u9a71\u52a8\u5305 - \u7b2c 2 \u6b65\uff1a\u6ce8\u518a\u9a71\u52a8 (\u4ec5\u505a\u4e00\u6b21) - \u7b2c 3 \u6b65\uff1a\u5efa\u7acb\u8fde\u63a5 (Connection) - \u7b2c 4 \u6b65\uff1a\u521b\u5efa\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61 (Statement) - \u7b2c 5 \u6b65\uff1a\u6267\u884c SQL \u8bed\u53e5 - \u7b2c 6 \u6b65\uff1a\u5904\u7406\u6267\u884c\u7ed3\u679c (ResultSet) - \u7b2c 7 \u6b65\uff1a\u91ca\u653e\u8d44\u6e90","title":"\u516d. \u865a\u8c37\u6570\u636e\u5e93\u7684JDBC\u4ea4\u4e92\u6d41\u7a0b"},{"location":"JDBC3/#61-jdbc","text":"\u4e0b\u8f7d\u865a\u8c37\u6570\u636e\u5e93\u4e13\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u5305 (cloudjdbc-*.*.*.jar)\uff0c\u5e76\u5bfc\u5165\u5230\u5e94\u7528\u7a0b\u5e8f\u4e2d\u3002","title":"6.1 \u5bfc\u5165\u865a\u8c37JDBC\u9a71\u52a8\u5305"},{"location":"JDBC3/#62-jdbc","text":"\u865a\u8c37 JDBC \u9a71\u52a8\u7a0b\u5e8f\u4e2d Driver \u63a5\u53e3\u5b9e\u73b0\u7c7b\u4e3a com.xugu.cloudjdbc.Driver\u3002\u52a0\u8f7d\u9a71\u52a8\u65b9\u5f0f\u4e3a DriverManager.registerDriver(new com.xugu.cloudjdbc.Driver()) \u6216Class.forName(\u201ccom.xugu.cloudjdbc.Driver\u201d)\u3002","title":"6.2 \u52a0\u8f7d\u865a\u8c37JDBC\u9a71\u52a8"},{"location":"JDBC3/#63","text":"\u5efa\u7acb\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u7684\u65b9\u5f0f\u6709\u591a\u79cd\uff0c\u53ef\u6839\u636e\u5e94\u7528\u7a0b\u5e8f\u5b9e\u9645\u4f7f\u7528\u573a\u666f\u9009\u62e9\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65b9\u5f0f\u3002\u5e38\u89c1\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65b9\u5f0f\u5982\u4e0b\uff1a - \u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u4f7f\u7528 DriverManager \u83b7\u5f97\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\uff1b - \u4f7f\u7528\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u6e90/\u8fde\u63a5\u6c60\u7684\u65b9\u5f0f\u83b7\u53d6\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\uff1b - \u4f7f\u7528\u7b2c\u4e09\u65b9\u901a\u7528\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u65b9\u5f0f\u83b7\u53d6\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u3002 \u5982\uff1adruid\u3001c3p0\u3001dbcp\u3001JNDI \u7b49\u3002","title":"6.3 \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5"},{"location":"JDBC3/#631","text":"\u6253\u5f00\u6570\u636e\u5e93\u8fde\u63a5\u5373\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u5bf9\u8c61 Connection \u7c7b\u3002 \u5982\uff1aDriverManager \u901a\u8fc7 getConnection() \u65b9\u6cd5\u83b7\u53d6 Connection \u7c7b\u5bf9\u8c61\u3002DriverManager \u7684 getConnection() \u65b9\u6cd5\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\u7684\u65b9\u5f0f\u4ea6\u6709\u591a\u79cd\u3002\u4ee5\u4e0b\u4e3a\u5e38\u89c1\u65b9\u5f0f\uff1a - getConnection(String url) \u53c2\u6570\u8bf4\u660e\uff1a - url\uff1a\u8bbf\u95ee\u6570\u636e\u5e93\u7684 URL \u8def\u5f84\u3002 \u793a\u4f8b\uff1a \u4e0b\u9762\u7684\u4ee3\u7801\u5229\u7528 getConnection \u65b9\u6cd5\u521b\u5efa\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u3002 ``` public Connection getConnection(){ Connection con=null\u037e try{ //\u6ce8\u518c\u6570\u636e\u5e93\u9a71\u52a8 Class.forName(\"com.xugu.cloudjdbc.Driver\")\u037e //\u5b9a\u4e49\u8fde\u63a5\u6570\u636e\u5e93\u7684url String url = \"jdbc:xugu://localhost:5138/db?user=user1\uff06password=pwd\"\u037e //\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5 con = DriverManager.getConnection(url)\u037e System.out.println(\"\u6570\u636e\u5e93\u8fde\u63a5\u6210\u529f\uff01\")\u037e }catch(Exception e){ e.printStackTrace()\u037e } //\u8fd4\u56de\u4e00\u4e2a\u8fde\u63a5 return con\u037e } ``` getConnection(String url,String user,String password) \u53c2\u6570\u8bf4\u660e\uff1a url\uff1a\u8bbf\u95ee\u6570\u636e\u5e93\u7684 URL \u8def\u5f84\u3002 user\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u7528\u6237\u540d\u3002 password\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u7528\u6237\u5bc6\u7801\u3002 \u793a\u4f8b\uff1a \u4e0b\u9762\u7684\u4ee3\u7801\u5229\u7528 getConnection \u65b9\u6cd5\u521b\u5efa\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u3002 private Connection con; private String user = \"user1\"; //\u5b9a\u4e49\u8fde\u63a5\u6570\u636e\u5e93\u7684\u7528\u6237\u540d private String password = \"pwd\"; //\u5b9a\u4e49\u8fde\u63a5\u6570\u636e\u5e93\u7684\u5bc6\u7801 private String className = \"com.xugu.cloudjdbc.Driver\";//\u5b9a\u4e49\u865a\u8c37JDBC\u9a71\u52a8 private String url = \"jdbc:xugu://localhost:5138/db\"; /\\*\\*\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\\*/ public Connection getConnection(){ try{ Class.forName(className);//\u52a0\u8f7d\u6570\u636e\u5e93\u9a71\u52a8 System.out.println(\"\u6570\u636e\u5e93\u9a71\u52a8\u52a0\u8f7d\u6210\u529f\uff01\"); con = DriverManager.getConnection(url,user,password); //\u8fde\u63a5\u6570\u636e\u5e93 System.out.println(\"\u6210\u529f\u5730\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\uff01\"); }catch(Exception e){ System.out.println(\"\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\u5931\u8d25\uff01\"); con = null; e.printStackTrace(); } finally { If(conn != null){ //\u91ca\u653e\u8fde\u63a5\u8d44\u6e90 conn.close(); } } return con; } getConnection(String url,Properties info) \u53c2\u6570\u8bf4\u660e\uff1a url\uff1a\u8bbf\u95ee\u6570\u636e\u5e93\u7684 URL \u8def\u5f84\u3002 info\uff1a\u4e00\u4e2a\u6301\u4e45\u7684\u5c5e\u6027\u96c6\u5bf9\u8c61\uff0c\u5305\u62ec user \u548c password \u7b49\u5c5e\u6027\u3002 \u793a\u4f8b\uff1a \u4e0b\u9762\u7684\u4ee3\u7801\u5229\u7528 getConnection \u65b9\u6cd5\u521b\u5efa\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u3002 public Connection getConnection(){ Connection con = null; //\u5b9a\u4e49\u6570\u636e\u5e93\u8fde\u63a5\u5bf9\u8c61 Properties info = new Properties(); //\u5b9a\u4e49Properties\u5bf9\u8c61 info.setProperty(\"user\",\"user1\"); //\u8bbe\u7f6eProperties\u5bf9\u8c61\u5c5e\u6027 info.setProperty(\"password\",\"pwd\"); try{ //\u6ce8\u518c\u6570\u636e\u5e93\u9a71\u52a8 Class.forName(\"com.xugu.cloudjdbc.Driver\"); //test\u4e3a\u6570\u636e\u5e93\u540d\u79f0 String url = \"jdbc:xugu://localhost:5138/db\"; //\u83b7\u53d6\u8fde\u63a5\u6570\u636e\u5e93\u7684Connection\u5bf9\u8c61 con = DriverManager.getConnection(url,info); System.out.println(\"\u6570\u636e\u5e93\u8fde\u63a5\u6210\u529f\uff01\"); }catch(Exception e){ e.printStackTrace(); } //\u8fd4\u56de\u4e00\u4e2a\u8fde\u63a5 return con; }","title":"6.3.1 \u6253\u5f00\u6570\u636e\u5e93\u8fde\u63a5"},{"location":"JDBC3/#632","text":"\u6570\u636e\u5e93\u4e8b\u52a1 (transaction) \u662f\u8bbf\u95ee\u5e76\u53ef\u80fd\u64cd\u4f5c\u5404\u79cd\u6570\u636e\u9879\u7684\u4e00\u4e2a\u6570\u636e\u5e93\u64cd\u4f5c\u5e8f\u5217\uff0c\u8fd9\u4e9b\u64cd\u4f5c\u8981\u4e48\u5168\u90e8\u6267\u884c, \u8981\u4e48\u5168\u90e8\u4e0d\u6267\u884c\uff0c\u662f\u4e00\u4e2a\u4e0d\u53ef\u5206\u5272\u7684\u5de5\u4f5c\u5355\u4f4d\u3002\u4e8b\u52a1\u7531\u4e8b\u52a1\u5f00\u59cb\u5230\u4e8b\u52a1\u7ed3\u675f\u4e4b\u95f4\u6267\u884c\u7684\u5168\u90e8\u6570\u636e\u5e93\u64cd\u4f5c\u7ec4\u6210\u3002 \u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\uff0c\u5373\u5f53\u4e00\u6761 SQL \u8bed\u53e5\u6267\u884c\u5b8c\u6210\u540e\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u5c06\u81ea\u52a8\u63d0\u4ea4\u8be5\u8bed\u53e5\u6240\u5728\u4e8b\u52a1\u3002\u5728\u865a\u8c37 JDBC \u9a71\u52a8\u4e2d\u63a7\u5236\u4e8b\u52a1\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a - \u901a\u8fc7\u6570\u636e\u5e93\u8fde\u63a5 URL \u4e32\u7684 auto_commit \u5c5e\u6027\uff0c\u63a7\u5236\u4e8b\u52a1\u7684\u5f00\u542f\u4e0e\u5173\u95ed\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b auto_commit \u5c5e\u6027\u4e3a on\uff0c\u5373\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u3002 - \u901a\u8fc7 Connection \u7c7b\u7684 setAutoCommit(boolean commit) \u65b9\u6cd5\u63a7\u5236\u4e8b\u52a1\u7684\u5f00\u542f\u4e0e\u5173\u95ed\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b commit \u5c5e\u6027\u4e3a TRUE\uff0c\u5373\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u3002 \u5728\u7981\u7528\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u4e0b\uff0c\u4f7f\u7528 Connection \u7c7b\u7684 commit() \u65b9\u6cd5\u63d0\u4ea4 SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u505a\u7684\u66f4\u6539\uff0c\u800c Connection \u7c7b\u7684 rollback() \u65b9\u6cd5\u5c06\u56de\u6eda SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u7684\u66f4\u6539\uff0c\u4e0a\u8ff0\u4e24\u79cd\u65b9\u6cd5\u6267\u884c\u5b8c\u6210\u540e\u5747\u5c06\u91ca\u653e\u4e8b\u52a1\u6301\u6709\u7684\u5168\u90e8\u9501\u8d44\u6e90\u3002 \u4e8b\u52a1\u4ec5\u5bf9\u6570\u636e\u5e93 DML \u64cd\u4f5c\u6709\u6548\u3002 {.is-info} \u4ee5\u4e0b\u4e3a\u4f7f\u7528 setAutoCommit() \u65b9\u6cd5\u63a7\u5236\u4e8b\u52a1\u63d0\u4ea4\u7684\u793a\u4f8b\u4ee3\u7801\uff1a //\u8bbe\u7f6e\u4e8b\u52a1\u4e3a\u975e\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f conn.setAutoCommit(false)\u037e //\u521b\u5efa\u6570\u636e\u5e93Statement\u5bf9\u8c61 Statement stm = conn.createStatement()\u037e //\u6570\u636e\u5e93\u4e8b\u52a1\u6267\u884cSQL\u8bed\u53e5 String sql = \"insert into test (comp_id,comp_name) values(1,'comp')\"\u037e //\u6267\u884c\u9759\u6001SQL\u8bed\u53e5 stm.execute(sql)\u037e //\u6570\u636e\u5e93\u9884\u5904\u7406SQL\u8bed\u53e5 PreparedStatement pstm = conn. prepareStatement(\u201cupdate test set id=? where comp_name=?\u201d) //\u9884\u5904\u7406SQL\u8bed\u53e5\u7b2c\u4e00\u4e2a\u53c2\u6570\u8d4b\u503c pstm.setInt(1,15)\u037e //\u9884\u5904\u7406SQL\u8bed\u53e5\u7b2c\u4e8c\u4e2a\u53c2\u6570\u8d4b\u503c pstm.setString(2,'DBMS')\u037e //\u6267\u884c\u9884\u5904\u7406SQL\u8bed\u53e5 pstm.execute()\u037e //\u63d0\u4ea4\u4e8b\u52a1 conn.commit()\u037e //\u5220\u9664\u8868\u4e2d\u6307\u5b9a\u884c\u6570\u636e stm.execute(\u201cdelete from test where id=15\u201d)\u037e //\u4e8b\u52a1\u56de\u6eda\u65b9\u6cd5 conn.rollback()\u037e \u4e0a\u9762\u4ee3\u7801\u4e2d\u6267\u884c\u63d0\u4ea4\u4e8b\u52a1\u64cd\u4f5c\uff0c\u6267\u884c\u9759\u6001 SQL \u8bed\u53e5\u4e0e\u6267\u884c\u9884\u5904\u7406 SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u7684\u66f4\u6539\u5c06\u6c38\u4e45\u751f\u6548\uff1b\u800c\u540e\u6267\u884c\u7684\u5220\u9664\u8868\u4e2d\u6307\u5b9a\u884c\u6570\u636e\u64cd\u4f5c\uff0c\u56e0\u5176\u540e\u8c03\u7528\u7684 rollback() \u65b9\u6cd5\uff0cdelete \u547d\u4ee4\u5bf9\u6570\u636e\u5e93\u7684\u6570\u636e\u66f4\u6539\u5c06\u88ab\u56de\u6eda\u6389\uff0c\u6545\u800c\u5bf9\u6570\u636e\u5e93\u7684\u5220\u9664\u64cd\u4f5c\u4e0d\u4f1a\u751f\u6548\u3002","title":"6.3.2 \u8fde\u63a5\u4e8b\u52a1\u7ba1\u7406"},{"location":"JDBC3/#633-savepoint","text":"JDBC \u89c4\u8303 3.0 \u4e2d\u4e3a\u4e86\u589e\u52a0\u5bf9\u4e8b\u52a1\u7684\u63a7\u5236\uff0c\u65b0\u589e Savepoint \u63a5\u53e3\uff0c\u5176\u4ee3\u8868\u4e8b\u52a1\u4e2d\u7684\u4e00\u4e2a\u903b\u8f91\u4e8b\u52a1\u70b9\u3002\u5728\u975e\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u4e0b\uff0c\u4e00\u4e2a\u4e8b\u52a1\u4e2d\u53ef\u4ee5\u8bbe\u7f6e\u591a\u4e2a Savepoint\uff0c\u5728\u4ee3\u7801\u4e2d\u8fdb\u884c\u4e8b\u52a1\u56de\u6eda\u64cd\u4f5c\u65f6\uff0c\u53ef\u4ee5\u6307\u5b9a\u4e8b\u52a1\u56de\u6eda\u5230\u6307\u5b9a Savepoint \u4f4d\u7f6e\uff0c\u6307\u5b9a\u56de\u6eda\u4f4d\u7f6e\u524d\u7684\u4e8b\u52a1\u64cd\u4f5c\u4ecd\u7136\u4fdd\u7559\u3002\u6b64\u63a5\u53e3\u5927\u5927\u63d0\u9ad8\u4e86\u4e8b\u52a1\u5904\u7406\u7684\u7c92\u5ea6\uff0c\u65b9\u4fbf\u5e94\u7528\u7a0b\u5e8f\u63a7\u5236\u4e8b\u52a1\u5904\u7406\u903b\u8f91\u3002 \u793a\u4f8b\uff1a\u8fde\u63a5\u4e8b\u52a1\u63a7\u5236\u63a5\u53e3 Savepoint \u4f7f\u7528 //\u8bbe\u7f6e\u975e\u81ea\u52a8\u63d0\u4ea4 conn.setAutoCommit(false); //\u521b\u5efaStatement\u5bf9\u8c61 Statement stm = conn.createStatement(); //\u6267\u884cSQL\u547d\u4ee4 stm.execute(sql1); stm.execute(sql2); //\u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\u70b9save1 java.sql.Savepoint save1 =conn.setSavepoint(\"save_1\"); stm.execute(sql3); //\u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\u70b9save2 java.sql.Savepoint save2 =conn.setSavepoint(\"save_2\"); stm.execute(sql4); //\u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\u70b9save3 java.sql.Savepoint save3 =conn.setSavepoint(\"save_3\"); stm.execute(sql5); //\u56de\u6eda\u4e8b\u52a1\u5230\u56de\u6eda\u70b9save3 conn.rollback(save3); conn.commit(); \u4ee5\u4e0a\u4ee3\u7801\u6bb5\u4e2d\uff0c\u4e8b\u52a1\u6267\u884c\u8bed\u53e5 sql5 \u5c06\u88ab\u56de\u6eda\u6389\u3002","title":"6.3.3 \u8fde\u63a5\u4e8b\u52a1\u63a7\u5236\uff0cSavepoint\u63a5\u53e3"},{"location":"JDBC3/#64-sql","text":"\u5728\u6570\u636e\u5e93\u6807\u51c6\u4e2d\uff0c\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61\u5206\u4e3a\u4e09\u7c7b\uff1a\u6267\u884c\u9759\u6001 SQL \u8bed\u53e5\u7684 Statement \u5bf9\u8c61\u3001\u6267\u884c\u9884\u7f16\u8bd1 SQL \u8bed\u53e5\u7684 PreparedStatement \u5bf9\u8c61\u4ee5\u53ca\u6267\u884c\u6570\u636e\u5e93\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\u7684 CallableStatement \u5bf9\u8c61\u3002","title":"6.4 \u521b\u5efa\u6267\u884cSQL\u8bed\u53e5\u5bf9\u8c61"},{"location":"JDBC3/#641-sqlstatement","text":"Statement \u5bf9\u8c61\u7528\u4e8e\u6267\u884c\u9759\u6001 SQL \u8bed\u53e5\u548c\u83b7\u5f97 SQL \u4ea7\u751f\u7684\u7ed3\u679c\u3002\u5728\u865a\u8c37 JDBC \u9a71\u52a8\u4e2d\uff0c\u865a\u8c37\u6570\u636e\u5e93 DDL \u64cd\u4f5c\u5747\u901a\u8fc7 Statement \u5bf9\u8c61\u6765\u6267\u884c\u3002 Statement \u5bf9\u8c61\u901a\u8fc7 Connection \u7c7b\u7684 createStatement() \u65b9\u6cd5\u521b\u5efa\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a //\u521b\u5efa\u6267\u884cSQL\u8bed\u53e5\u5bf9\u8c61Statement Statement stm = conn.createStatement()\u037e","title":"6.4.1 \u6267\u884cSQL\u5bf9\u8c61Statement"},{"location":"JDBC3/#642-sqlpreparedstatement","text":"PreparedStatement \u5bf9\u8c61\u4f7f\u7528\u65f6\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u5bf9\u6267\u884c SQL \u8bed\u53e5\u8fdb\u884c\u9884\u7f16\u8bd1\u5904\u7406\uff0c\u9884\u7f16\u8bd1 SQL \u8bed\u53e5\u5c06\u5728\u672a\u6765\u7684\u4f7f\u7528\u4e2d\u88ab\u91cd\u7528\u3002\u4e0e Statement \u5bf9\u8c61\u76f8\u6bd4\uff0cPreparedStatement \u5bf9\u8c61\u64cd\u4f5c\u591a\u6761 SQL \u8bed\u53e5\u7684\u6548\u7387\u66f4\u9ad8\u3002 \u7ecf\u8fc7\u9884\u7f16\u8bd1\u5e76\u5b58\u50a8\u5728 PreparedStatement \u5bf9\u8c61\u4e2d\u7684 SQL \u8bed\u53e5\uff0c\u901a\u8fc7 Connection \u7c7b\u7684 prepareStatement() \u65b9\u6cd5\u521b\u5efa\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a //\u521b\u5efa\u6267\u884c\u9884\u7f16\u8bd1SQL\u8bed\u53e5\u5bf9\u8c61PreparedStatement PreparedStatement preStatement = conn.prepareStatement(\u201c\u9884\u7f16\u8bd1SQL\u8bed\u53e5\u201d); \u9884\u5904\u7406 PreparedStatement \u5bf9\u8c61\u76f8\u5bf9\u4e8e\u9759\u6001 Statement \u5bf9\u8c61\u7684\u4f18\u52bf\uff1a - PreparedStatement \u53ef\u4ee5\u52a8\u6001\u4f20\u5165\u53c2\u6570\u503c\uff1b - PreparedStatement \u6bd4 Statement \u66f4\u5feb\uff1b PreparedStatement \u4f1a\u5c06 SQL \u8bed\u53e5\u9884\u7f16\u8bd1\u5728\u6570\u636e\u5e93\u7cfb\u7edf\u4e2d\uff0c\u6267\u884c\u8ba1\u5212\u540c\u6837\u4f1a\u88ab\u7f13\u5b58\u8d77\u6765\uff0c\u5b83\u5141\u8bb8\u6570\u636e\u5e93\u505a\u53c2\u6570\u5316\u67e5\u8be2\u3002\u4f7f\u7528\u9884\u5904\u7406\u8bed\u53e5\u6bd4\u666e\u901a\u7684 Statement \u67e5\u8be2\u66f4\u5feb\uff0c\u56e0\u505a\u7684\u5de5\u4f5c\u66f4\u5c11 (\u6570\u636e\u5e93\u5bf9 SQL \u8bed\u53e5\u7684\u5206\u6790\u3001\u7f16\u8bd1\u3001\u4f18\u5316\u5df2\u7ecf\u5728\u7b2c\u4e00\u6b21\u67e5\u8be2\u524d\u5b8c\u6210\u4e86)\u037e - PreparedStatement \u53ef\u4ee5\u9632\u6b62 SQL \u6ce8\u5165\u5f0f\u653b\u51fb\u3002 PreparedStatement \u5728\u4f7f\u7528\u53c2\u6570\u5316\u67e5\u8be2\u7684\u60c5\u51b5\u4e0b\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u4e0d\u4f1a\u5c06\u53c2\u6570\u7684\u5185\u5bb9\u89c6\u4e3a SQL \u6307\u4ee4\u7684\u4e00\u90e8\u5206\u6765\u5904\u7406\uff0c\u800c\u662f\u5728\u6570\u636e\u5e93\u5b8c\u6210 SQL \u6307\u4ee4\u7684\u7f16\u8bd1\u540e\uff0c\u624d\u5957\u7528\u53c2\u6570\u8fd0\u884c\uff0c\u56e0\u6b64\u5c31\u7b97\u53c2\u6570\u4e2d\u542b\u6709\u7834\u574f\u6027\u7684\u6307\u4ee4\uff0c\u4e5f\u4e0d\u4f1a\u88ab\u6570\u636e\u5e93\u6240\u8fd0\u884c\u3002","title":"6.4.2 \u6267\u884cSQL\u5bf9\u8c61PreparedStatement"},{"location":"JDBC3/#643-callablestatement","text":"CallableStatement \u5bf9\u8c61\u5b9e\u73b0\u4e86\u4ece Java \u5e94\u7528\u7a0b\u5e8f\u4e2d\u8c03\u7528\u6570\u636e\u5e93\u5b58\u50a8\u8fc7\u7a0b\u3002\u4f46\u6b64\u8c03\u7528\u8fc7\u7a0b\u5e76\u4e0d\u5305\u542b\u5b58\u50a8\u8fc7\u7a0b\u672c\u8eab\uff0c\u56e0\u5b58\u50a8\u8fc7\u7a0b\u5b58\u50a8\u5728\u6570\u636e\u5e93\u4e2d\u3002 CallableStatement \u5bf9\u8c61\u4e3a\u6240\u6709\u7684\u6570\u636e\u5e93\u63d0\u4f9b\u4e86\u4e00\u79cd\u4ee5\u6807\u51c6\u5f62\u5f0f\u8c03\u7528\u5b58\u50a8\u8fc7\u7a0b\u7684\u65b9\u6cd5\uff0c\u901a\u8fc7 Connection \u7c7b\u7684 prepareCall() \u65b9\u6cd5\u521b\u5efa\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a //\u521b\u5efa\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u5bf9\u8c61CallableStatement CallableStatement cstmt= conn.prepareCall(\u201c{call \u5b58\u50a8\u8fc7\u7a0b\u540d(\u53c2\u6570\u8868\u5217)}\u201d);","title":"6.4.3 \u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u5bf9\u8c61CallableStatement"},{"location":"JDBC3/#644-sql","text":"\u5728\u521b\u5efa\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61\u65f6\uff0c\u53ef\u901a\u8fc7\u6784\u9020\u65b9\u6cd5\u7684\u4e0d\u540c\u53c2\u6570\u8bbe\u7f6e ResultSet \u5bf9\u8c61\u5c5e\u6027\uff0c\u5c5e\u6027\u5305\u62ec\u7ed3\u679c\u7c7b\u578b ResultSetType\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b ResultSetConcurrency\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b ResultSetHoldability\u3002 ResultSetType \u9ed8\u8ba4\u4e3a ResultSet.TYPE_SCROLL_INSENSITIVE\uff1a\u652f\u6301\u7ed3\u679c\u96c6 backforward\u3001last\u3001first \u7b49\u64cd\u4f5c\uff0c\u5bf9\u6570\u636e\u5e93\u4e2d\u5176\u5b83 session \u8fdb\u884c\u7684\u6570\u636e\u66f4\u6539\u4e0d\u654f\u611f\uff1b ResultSetConcurrency \u9ed8\u8ba4\u4e3a ResultSet.CONCUR_READ_ONLY: \u4e0d\u53ef\u66f4\u65b0\u7ed3\u679c\u96c6\uff1b\u8be5\u5c5e\u6027\u4ea6\u53ef\u66f4\u6539\u4e3a ResultSet.CONCUR_UPDATABLE\uff0c\u652f\u6301\u5728 ResultSet \u4e2d\u5bf9\u8bb0\u5f55\u8fdb\u884c\u4fee\u6539\uff0c\u4fee\u6539\u540e\u8bb0\u5f55\u66f4\u65b0\u5230\u6570\u636e\u5e93\uff0c\u4fee\u6539\u64cd\u4f5c\u53ef\u5305\u542b\u63d2\u5165\u3001\u5220\u9664\u6216\u66f4\u65b0\uff1b ResultSetHoldability \u9ed8\u8ba4\u4e3a ResultSet.HOLD_CURSORS_OVER_COMMIT: \u5728\u4e8b\u52a1 commit \u6216 rollback \u540e\uff0cResultSet \u4ecd\u7136\u53ef\u7528\u3002 Connection \u7c7b\u521b\u5efa Statement \u5bf9\u8c61\u6784\u9020\u65b9\u6cd5\uff1a //Statement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 createStatement(int resultSetType,int resultSetConcurrency)\uff1b //Statement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 createStatement(int resultSetType,int resultSetConcurrency, int resultSetHoldability)\uff1b Connection \u7c7b\u521b\u5efa PreparedStatement \u5bf9\u8c61\u6784\u9020\u65b9\u6cd5\uff1a //PreparedStatement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareStatement(String sql, int resultSetType,int resultSetConcurrency) //PrepareStatment\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareStatement(String sql, int resultSetType,int resultSetConcurrency, int resultSetHoldability) Connection \u7c7b\u521b\u5efa CallableStatement \u5bf9\u8c61\u6784\u9020\u65b9\u6cd5\uff1a //CallableStatement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareCall(String sql, int resultSetType,int resultSetConcurrency) //CallableStatement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareCall(String sql, int resultSetType,int resultSetConcurrency, int resultSetHoldability)","title":"6.4.4 \u6267\u884cSQL\u8bed\u53e5\u5bf9\u8c61\u5c5e\u6027\u6269\u5145"},{"location":"JDBC3/#65-sql","text":"Statement \u5bf9\u8c61\u5b9a\u4e49\u4e86\u591a\u79cd\u6267\u884c SQL \u8bed\u53e5\u7684\u65b9\u6cd5\uff0c\u7528\u6765\u5904\u7406\u8fd4\u56de\u4e0d\u540c\u7ed3\u679c\u7684 SQL \u547d\u4ee4\uff1a - execute(String sql)\uff1a\u6267\u884c\u53ef\u4ee5\u8fd4\u56de\u591a\u4e2a\u7ed3\u679c\u96c6\u7684 SQL \u8bed\u53e5\u8fd4\u56de\u7c7b\u578b\u4e3a boolean\uff0c\u5982\u679c\u8fd4\u56de\u7684\u662f\u66f4\u65b0\u7684\u6570\u76ee\uff0c\u5219\u8fd4\u56de false\uff1b\u5982\u679c\u8fd4\u56de\u7684\u662f ResultSet \u5bf9\u8c61\uff0c\u5219\u8fd4\u56detrue\u3002 - executeQuery(String sql)\uff1a\u6267\u884c\u8fd4\u56de\u5355\u4e2a ResultSet \u7684 SQL \u8bed\u53e5\u8fd4\u56de\u7c7b\u578b\u4e3a ResultSet \u5bf9\u8c61\u3002 - executeUpdate()\uff1a\u6267\u884c SQL INSERT\u3001UPDATE \u6216 DELETE \u8bed\u53e5\u8fd4\u56de\u503c\u4e3a int \u578b\uff0c\u6570\u636e\u5e93\u53d7\u5f71\u54cd\u7684\u884c\u8ba1\u6570\u3002 - \u6279\u5904\u7406\u65b9\u6cd5\uff1a\u6279\u91cf\u6267\u884c SQL \u8bed\u53e5 clearBatch()\uff1a\u6e05\u7a7a\u5386\u53f2 batch \u547d\u4ee4\uff1b addBatch(String sql)\uff1a\u6dfb\u52a0\u8981\u6267\u884c\u7684 sql\uff1b executeBatch()\uff1a\u6279\u91cf\u6267\u884c sql\u3002 PreparedStatement \u7ee7\u627f\u81ea Statement\uff0c\u5b9a\u4e49\u4e86\u5927\u91cf\u7684 setter \u65b9\u6cd5\u7528\u4e8e\u8bbe\u7f6e\u52a8\u6001 sql\u7684\u53c2\u6570\uff0c\u56e0\u6b64 PreparedStatement \u652f\u6301\u52a8\u6001\u4f20\u53c2\uff1b\u53e6\u5916 PreparedStatement \u5185\u90e8\u5b58\u50a8\u4e86\u89e3\u6790\u7684 sql\uff0c\u53ef\u4ee5\u591a\u6b21\u6267\u884c\u800c\u65e0\u9700\u91cd\u590d\u89e3\u6790\u3002PreparedStatement \u7ee7\u627f\u81ea Statement\uff0cCallableStatement \u7ee7\u627f\u81ea PreparedStatement\uff0c\u6545\u800c\u4e09\u8005\u6267\u884c SQL \u8bed\u53e5\u7684\u65b9\u5f0f\u53ef\u901a\u7528\u3002","title":"6.5 \u6267\u884cSQL\u8bed\u53e5"},{"location":"JDBC3/#651-statement","text":"\u901a\u8fc7 Statement \u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c\u9700\u8981\u6ce8\u610f\u7684\u4e8b\u9879\uff1a - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u524d\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u8bbe\u7f6e\u4e3a FALSE\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\uff0c\u5e76\u8fdb\u884c\u624b\u52a8\u63d0\u4ea4\uff08commit\uff09\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u540e\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u6062\u590d\u4e3a TRUE\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u5f02\u5e38\u53d1\u751f\u65f6\uff0c\u8fdb\u884c rollback(\u56de\u6eda)\u3002 \u793a\u4f8b\uff1a\u901a\u8fc7 Statement \u6279\u91cf\u64cd\u4f5c\u6570\u636e try { //\u521b\u5efaStatement\u5bf9\u8c61 stm = con.createStatement(); //\u8bbe\u7f6e\u4e8b\u52a1\u975e\u81ea\u52a8\u63d0\u4ea4 con.setAutoCommit(false); // \u6dfb\u52a0\u591a\u6761SQL\u8bed\u53e5\u5230\u6279\u5904\u7406\u4e2d stm.addBatch(\"insert into student values(23,'tangbao','\u9ad8\u6570',100)\"); stm.addBatch(\"insert into student values(24,'\u738b\u5b9a','c#',98)\"); stm.addBatch(\"insert into student values(25,'\u738b\u56fd\u4e91','java',90)\"); //\u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c stm.executeBatch(); System.out.println(\"\u63d2\u5165\u6210\u529f!\"); //\u6267\u884c\u6210\u529f\u540e\u8fdb\u884c\u6570\u636e\u63d0\u4ea4 con.commit(); System.out.println(\"\u63d0\u4ea4\u6210\u529f!\"); //\u5173\u95ed\u975e\u81ea\u52a8\u63d0\u4ea4 con.setAutoCommit(true); } catch (SQLException e) { if (!con.isClosed()) { con.rollback(); //\u51fa\u73b0\u5f02\u5e38\uff0c\u56de\u6eda\u4e8b\u52a1 System.out.println(\"\u63d0\u4ea4\u5931\u8d25\uff0c\u56de\u6eda\uff01\"); con.setAutoCommit(true); //\u5173\u95ed\u975e\u81ea\u52a8\u63d0\u4ea4 } } finally { if (stmt != null) { //\u5173\u95ed\u64cd\u4f5c\u5bf9\u8c61 stmt.close(); } }","title":"6.5.1 \u901a\u8fc7Statement\u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c"},{"location":"JDBC3/#652-preparedstatement","text":"\u901a\u8fc7 PreparedStatement \u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c\u9700\u8981\u6ce8\u610f\u7684\u4e8b\u9879\uff1a - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u524d\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u8bbe\u7f6e\u4e3a FALSE\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\uff0c\u5e76\u8fdb\u884c\u624b\u52a8\u63d0\u4ea4\uff08commit\uff09\uff0c\u6570\u636e\u91cf\u5927\u65f6\uff0c\u8bbe\u7f6e\u624b\u52a8\u63d0\u4ea4\u95f4\u9694\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u540e\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u6062\u590d\u4e3a TRUE\uff1b \u2022 \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u5f02\u5e38\u53d1\u751f\u65f6\uff0c\u8fdb\u884c rollback(\u56de\u6eda)\uff1b - PreparedStatement \u6267\u884c\u8bed\u53e5\u4e0d\u80fd\u4e3a DDL \u8bed\u53e5\u3002 \u793a\u4f8b\uff1a\u5c06 10000 \u6761\u8bb0\u5f55\u63d2\u5165\u6570\u636e\u5e93\u4e2d\uff0c\u6bcf 100 \u6761\u6267\u884c\u4e00\u6b21\u63d0\u4ea4\u64cd\u4f5c try{ conn.setAutoCommit(false); //\u8bbe\u7f6e\u975e\u81ea\u52a8\u63d0\u4ea4 //\u521b\u5efaPreparedStatement\u5bf9\u8c61 ps = conn.prepareStatement(\"insert into testtab values (?, ?, ?)\"); //\u5faa\u73af\u6dfb\u52a0\u6279\u5904\u7406\u6570\u636e for(int i = 0;i<list.size();i++){ HashMap map = list.get(i);//list\u4e3a\u6570\u636e\u5c01\u88c5\uff0c\u6b64\u5904\u7565 ps.setString(1, map.get(\"id\").toString()); ps.setString(2, map.get(\"name\").toString()); ps.setString(3, map.get(\"age\").toString()); ps.addBatch(); if(mod(i,100)==0){//\u6bcf100\u6761\u6267\u884c\u4e00\u6b21\u6267\u884c\u64cd\u4f5c ps.executeBatch();//\u6267\u884c\u6279\u91cf\u63d2\u5165 conn.commit();//\u6267\u884c\u4e8b\u52a1\u63d0\u4ea4 } } ps.executeBatch();//\u6267\u884c\u6279\u91cf\u63d2\u5165 conn.commit(); //\u63d0\u4ea4\u4e8b\u52a1 }catch(Exception e){ if (!conn.isClosed()) { conn.rollback(); //\u51fa\u73b0\u5f02\u5e38\uff0c\u56de\u6eda\u4e8b\u52a1 System.out.println(\"\u63d0\u4ea4\u5931\u8d25\uff0c\u56de\u6eda\uff01\"); conn.setAutoCommit(true); //\u5173\u95ed\u975e\u81ea\u52a8\u63d0\u4ea4 } } finally { if (ps!= null) { ps.close();//\u5173\u95ed\u64cd\u4f5c\u5bf9\u8c61 } }","title":"6.5.2 \u901a\u8fc7PreparedStatement\u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c"},{"location":"JDBC3/#653-callablestatement","text":"CallableStatement \u5b58\u5728\u4e09\u79cd\u7c7b\u578b\u7684\u53c2\u6570 IN\u3001OUT \u548c INOUT\u3002 - IN\uff1a\u521b\u5efa SQL \u8bed\u53e5\u65f6\u5176\u53c2\u6570\u503c\u672a\u77e5\u3002\u4f7f\u7528 setXXX() \u65b9\u6cd5\u5c06\u503c\u7ed1\u5b9a\u5230 IN \u53c2\u6570\u3002 - OUT\uff1a\u7531 SQL \u8bed\u53e5\u8fd4\u56de\u7684\u53c2\u6570\u503c\u3002\u53ef\u4ee5\u4f7f\u7528 getXXX() \u65b9\u6cd5\u4ece OUT \u53c2\u6570\u4e2d\u68c0\u7d22\u503c\u3002 - INOUT\uff1a\u63d0\u4f9b\u8f93\u5165\u548c\u8f93\u51fa\u503c\u7684\u53c2\u6570\u3002\u4f7f\u7528 setXXX() \u65b9\u6cd5\u7ed1\u5b9a\u53d8\u91cf\u5e76\u4f7f\u7528getXXX() \u65b9\u6cd5\u68c0\u7d22\u503c\u3002 \u793a\u4f8b 1\uff1a\u901a\u8fc7\u53c2\u6570\u4e0b\u6807\u7ed1\u5b9a\u53c2\u6570 //\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\u8bed\u53e5 String sql =\"{call pro_2(?,?,?)}\"; //\u521b\u5efaCallableStatement\u5bf9\u8c61 CallableStatement cstm = conn.prepareCall(sql); //\u901a\u8fc7\u53c2\u6570\u4e0b\u6807\u8bbe\u7f6e\u53c2\u6570(IN\u53c2\u6570) cstm.setInt(1, 20490); //\u6ce8\u518cOUT\u53c2\u6570\u6570\u636e\u7c7b\u578b cstm.registerOutParameter(2, com.xugu.cloudjdbc.Types.VARCHAR); cstm.registerOutParameter(3, com.xugu.cloudjdbc.Types.VARCHAR); //\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528 cstm.execute(); //\u83b7\u53d6\u5b58\u50a8\u8fc7\u7a0b\u8f93\u51fa\u53c2\u6570 String name = (String)cstm.getObject(2); String address = (String)cstm.getObject(3); \u793a\u4f8b 2\uff1a\u901a\u8fc7\u53c2\u6570\u540d\u7ed1\u5b9a\u53c2\u6570 //\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\u8bed\u53e5 CallableStatement pstm = conn.prepareCall(\"insert into tt1 values(:id,:name)\"); //\u901a\u8fc7\u53c2\u6570\u540d\u8bbe\u7f6e\u53c2\u6570(IN\u53c2\u6570) pstm.setInt(\"id\", 1); pstm.setString(\"name\", \"cloud\"); //\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528 pstm.execute();","title":"6.5.3 CallableStatement\u7ed1\u5b9a\u53c2\u6570"},{"location":"JDBC3/#66","text":"ResultSet \u7c7b\u662f\u901a\u8fc7 Statement \u53ca\u5176\u5b50\u7c7b\u6267\u884c SQL \u67e5\u8be2\u8bed\u53e5\u5f97\u5230\u7684\u7ed3\u679c\u96c6\u3002ResultSet \u7c7b\u5305\u542b\u4e09\u4e2a\u91cd\u8981\u5c5e\u6027\uff1aResultSet \u5bf9\u8c61\u5e76\u53d1\u6a21\u5f0f\u3001ResultSet \u5bf9\u8c61\u5149\u6807\u5904\u7406\u65b9\u5411\u3001ResultSet \u5bf9\u8c61\u5149\u6807\u7c7b\u578b\u3002ResultSet \u7c7b\u5177\u6709\u6307\u5411\u5f53\u524d\u7ed3\u679c\u96c6\u6570\u636e\u884c\u4f4d\u7f6e\u5149\u6807\uff0c\u5149\u6807\u4f4d\u7f6e\u521d\u59cb\u88ab\u7f6e\u4e8e\u7b2c\u4e00\u884c\u4e4b\u524d\uff0c\u901a\u8fc7 ResultSet \u7c7b\u5c01\u88c5\u7684\u5149\u6807\u79fb\u52a8\u65b9\u6cd5\u5b9e\u73b0\u5bf9\u5149\u6807\u4f4d\u7f6e\u7684\u63a7\u5236\uff0c\u5f53 ResultSet \u5bf9\u8c61\u7684\u5149\u6807\u79fb\u81f3\u6570\u636e\u7ed3\u679c\u96c6\u672b\u5c3e\u65f6 (\u4e0b\u4e00\u884c\u65e0\u6570\u636e)\uff0c\u8fd4\u56de FALSE\u3002 \u5728\u865a\u8c37 JDBC \u4e2d\uff0cResultSet \u7c7b\u5206\u4e3a\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u548c\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\uff08\u901a\u8fc7 URL \u8fde\u63a5\u4e32\u53c2\u6570 recv_mode \u914d\u7f6e\uff09\u3002\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u9ed8\u8ba4\u5c5e\u6027\u4e3a\u4e0d\u53ef\u66f4\u65b0\u3001\u5411\u524d\u79fb\u52a8\u3001\u53ef\u4ee5\u6eda\u52a8\uff1b\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u9ed8\u8ba4\u5c5e\u6027\u4e3a\u4e0d\u53ef\u66f4\u65b0\u3001\u53ea\u5411\u524d\u79fb\u52a8\u3001\u4e0d\u53ef\u6eda\u52a8\u3002 Statement \u5bf9\u8c61\u6267\u884c SQL \u8bed\u53e5\u8fd4\u56de\u7ed3\u679c\u96c6\u4ec5\u80fd\u662f\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\uff0c\u800c PreparedStatement \u5bf9\u8c61\u6267\u884c SQL \u8bed\u53e5\u8fd4\u56de\u7ed3\u679c\u96c6\u53ef\u4e3a\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u6216\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u3002 \u5f53\u6267\u884c SQL \u8fd4\u56de\u6570\u636e\u7ed3\u679c\u96c6\u8f83\u5927\u65f6\uff0c\u5efa\u8bae\u4f7f\u7528\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\uff0c\u907f\u514d JVM \u7684\u6ea2\u51fa\u3002 {.is-info}","title":"6.6 \u5904\u7406\u6267\u884c\u7ed3\u679c"},{"location":"JDBC3/#661-resultset","text":"\u521b\u5efa Statement \u5bf9\u8c61\u65f6\uff0c\u8bbe\u7f6e Statement \u5c5e\u6027 RresultSetConcurrency \u4e3a ResultSet.CONCUR_UPDATABLE\uff0c\u5e76\u4e14\u6570\u636e\u5e93 URL \u8fde\u63a5\u4e32\u5c5e\u6027 return_rowid \u8bbe\u7f6e\u4e3a TRUE\u65f6\uff0cStatement \u5bf9\u8c61\u6267\u884c SQL \u8bed\u53e5\u8fd4\u56de\u7684 ResultSet \u7ed3\u679c\u96c6\u624d\u80fd\u88ab\u66f4\u65b0\u3002\u5f53 ResultSet \u5bf9\u8c61\u4e3a\u53ef\u66f4\u65b0\u7ed3\u679c\u96c6\u65f6\uff0c\u5c06\u5149\u6807\u79fb\u81f3\u63d2\u5165\u4f4d\u7f6e\uff0c\u53ef\u8c03\u7528 ResultSet \u7c7b\u5bf9\u5e94\u7684 update \u65b9\u6cd5\u4fee\u6539\u7ed3\u679c\u96c6\u4e2d\u884c\u6570\u636e\uff0c\u5e76\u901a\u8fc7 updateRow \u65b9\u6cd5\u5c06\u66f4\u6539\u6570\u636e\u66f4\u65b0\u5230\u6570\u636e\u5e93\u4e2d\u3002 \u793a\u4f8b\uff1a\u901a\u8fc7\u4fee\u6539\u7ed3\u679c\u96c6\u4e2d\u6570\u636e\u503c\u66f4\u6539\u6570\u636e\u5e93\u4e2d\u5bf9\u5e94\u8bb0\u5f55 //\u521b\u5efaStatement\u5bf9\u8c61\u5e76\u8bbe\u7f6e\u7ed3\u679c\u96c6\u5c5e\u6027\u4e3a\u53ef\u66f4\u65b0 Statement stm = conn.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_UPDATABLE); //\u6267\u884cSQL\u8bed\u53e5 ResultSet rs = stm.executeQuery(sql); //\u7ed3\u679c\u96c6\u904d\u5386 while(rs.next()) { //\u66f4\u65b0\u7ed3\u679c\u96c6\u4e2d\u6307\u5b9a\u5217\u6570\u636e rs.updateLong(1, 5); //\u66f4\u65b0\u7ed3\u679c\u96c6\u4e2d\u6307\u5b9a\u5217\u6570\u636e rs.updateFloat(3, 12.3f); //\u7ed3\u679c\u96c6\u53d8\u66f4\u56de\u5199\u5165\u6570\u636e\u5e93 rs.updateRow(); } \u901a\u8fc7\u8c03\u7528 ResultSet \u7c7b\u7684 next()\u3001previous()\u3001absolute(int) \u65b9\u6cd5\u79fb\u52a8\u5149\u6807\u4f4d\u7f6e\uff0c\u5c06\u5149\u6807\u4f4d\u7f6e\u79fb\u52a8\u5230\u6307\u5b9a\u6570\u636e\u884c\uff0c\u901a\u8fc7 ResultSet \u7c7b\u5bf9\u5e94\u7684 get \u65b9\u6cd5\u83b7\u53d6\u884c\u6570\u636e\u3002 \u5982\u4f7f\u7528\u7ed3\u679c\u96c6\u66f4\u65b0\u6570\u636e\u5e93\u6570\u636e\uff0c\u9700\u5728\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65f6\uff0c\u8bbe\u7f6e\u8fde\u63a5\u5c5e\u6027 return_rowid \u4e3aTRUE\uff0c\u4e14\u5728\u751f\u6210\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61\u65f6\uff0c\u5e76\u53d1\u5c5e\u6027\u6307\u5b9a\u4e3a ResultSet.CONCUR_UPDATABLE\u3002 {.is-info}","title":"6.6.1 \u66f4\u65b0ResultSet\u7ed3\u679c\u96c6"},{"location":"JDBC3/#662","text":"\u793a\u4f8b 1\uff1a \u7edf\u8ba1\u7ed3\u679c\u96c6\u603b\u6761\u6570 //\u521b\u5efaStatement\u5bf9\u8c61 Statement stm= conn.createStatement(); stm.execute(\"create table test(id int identity(1,1));insert into test values(default)\"); //\u6267\u884c\u7ed3\u679c\u96c6\u67e5\u8be2 ResultSet rs = stm.executeQuery(\"select * from test\") //\u79fb\u52a8\u5149\u6807\u81f3\u7ed3\u679c\u96c6\u672b\u5c3e rs.last(); //\u83b7\u53d6\u7ed3\u679c\u96c6\u884c\u6570 int rsCounts = rs.getRow();","title":"6.6.2 \u901a\u8fc7\u79fb\u52a8\u5149\u6807\u83b7\u53d6\u7ed3\u679c\u96c6\u6761\u6570"},{"location":"JDBC3/#663","text":"\u865a\u8c37 JDBC \u652f\u6301\u591a\u7ed3\u679c\u96c6\u5904\u7406\uff0c\u5141\u8bb8 Statement \u63a5\u53e3\u652f\u6301\u591a\u91cd\u6253\u5f00\u7684 ResultSet \u5bf9\u8c61\u3002\u6267\u884c\u8bed\u53e5\u53ef\u4ee5\u662f\u591a\u6761 SQL \u8bed\u53e5\u7684\u96c6\u5408\uff0c\u5373\u4e00\u6b21\u6027\u5411\u865a\u8c37\u670d\u52a1\u5668\u53d1\u9001\u591a\u6761 SQL \u8bed\u53e5\uff0c\u865a\u8c37\u670d\u52a1\u5668\u6267\u884c\u5b8c SQL \u8bed\u53e5\u540e\u8fd4\u56de\u591a\u4e2a\u6267\u884c\u7ed3\u679c\uff1b\u4ea6\u6216\u5b58\u50a8\u8fc7\u7a0b\u5b9a\u4e49\u6709\u591a\u4e2a\u8fd4\u56de\u7ed3\u679c\u96c6\u3002\u865a\u8c37 JDBC \u7684 Statement \u91cd\u8f7d\u4e86 Statement \u63a5\u53e3\u4e2d\u7684 getMoreResults() \u65b9\u6cd5\u3002 \u793a\u4f8b\uff1a\u591a\u7ed3\u679c\u96c6\u5904\u7406 //SQL\u8bed\u53e5\u5305\u542b\u591a\u6761\u67e5\u8be2\u547d\u4ee4 String sql=\" SELECT * FROM A1 WHERE D2=(SELECT AVG(D2) FROM A1 GROUP BY D1);SELECT * FROM A1 WHERE D2>(SELECT MIN(D2) FROM A1 GROUP BY D1)\"; //\u521b\u5efaStatement\u5bf9\u8c61 Statement stm = conn.createStatement(); //\u6267\u884cSQL\u8bed\u53e5 boolean f = stm.execute(sql); //\u5224\u65ad\u662f\u5426\u6709ResultSet\u5bf9\u8c61\u4ea7\u751f if(f == true){ //\u83b7\u53d6\u7ed3\u679c\u96c6\u5bf9\u8c61 ResultSet rs1 = stm.getResultSet(); ... ... ... ... } while(true) { //\u5224\u65adStatement\u662f\u5426\u8fd4\u56de\u4e86\u591a\u4e2aResultSet\u5bf9\u8c61 if(!stm.getMoreResults(Statement.CLOSE_CURRENT_RESULT)){ break; } else if((rs2 = cstm.getResultSet())!=null) { ... ... ... ...//\u6570\u636e\u5904\u7406\u90e8\u5206\u7701\u7565 } }","title":"6.6.3 \u591a\u7ed3\u679c\u96c6\u5904\u7406"},{"location":"JDBC3/#664","text":"\u865a\u8c37JDBC\u4e2d\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u751f\u6210\u9700\u6ee1\u8db3\u4e24\u4e2a\u6761\u4ef6\uff1aURL\u8fde\u63a5\u4e32\u5c5e\u6027recv_mode\u503c\u4e3a2\uff0cStatement\u5bf9\u8c61\u6267\u884cSQL\u8bed\u53e5\u4e3a\u5355\u6761SELECT\u8bed\u53e5\u3002 \u5e94\u7528\u7a0b\u5e8f\u7aef\u901a\u8fc7Statement\u7c7b\u7684setFetchSize(int)\u65b9\u6cd5\u6216ResultSet\u7c7b\u7684setFetchSize(int)\u65b9\u6cd5\u8bbe\u7f6e\u6bcf\u6b21\u4ece\u670d\u52a1\u5668\u7aef\u83b7\u53d6\u591a\u5c11\u6761\u6570\u636e\u3002 \u4f7f\u7528\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7684 ResultSet \u5bf9\u8c61\uff0c\u5149\u6807\u53ea\u80fd\u5355\u5411\u5411\u524d\u6b63\u5411\u79fb\u52a8\uff0c\u4e0d\u80fd\u5411\u540e\u79fb\u52a8\u6216\u6765\u56de\u6eda\u52a8\u3002 {.is-info} \u793a\u4f8b\uff1a\u865a\u8c37\u6570\u636e\u5e93\u670d\u52a1\u5668\u7aef\u6e38\u6807\u4f7f\u7528 //\u521b\u5efa\u865a\u8c37JDBC\u7279\u6709Statement\u5bf9\u8c61 Statement stm = (com.xugu.cloudjdbc.Statement)conn.createStatement(); //\u5f00\u542f\u670d\u52a1\u5668\u7aef\u6e38\u6807 stm.setServerCursor(true); //\u8bbe\u7f6e\u670d\u52a1\u5668\u7aef\u6e38\u6807\u5355\u6b21\u8fd4\u56de\u6570\u636e\u6761\u6570 stm.setFetchSize(1000); //\u6267\u884cSQL\u8bed\u53e5 ResultSet rs = stm.executeQuery(\"select * from t1\"); //\u904d\u5386\u6570\u636e while\uff08rs.next()\uff09 { ... ... ... ... } //\u5173\u95ed\u670d\u52a1\u5668\u7aef\u6e38\u6807 stm.setServerCursor(false);","title":"6.6.4 \u670d\u52a1\u5668\u7aef\u6e38\u6807\u4f7f\u7528"},{"location":"JDBC3/#665-generatedkeys","text":"JDBC 3.0 \u89c4\u8303\u4e2d\u5bf9\u4e8e\u81ea\u52a8\u4ea7\u751f\u7684\u5173\u952e\u5b57\u6570\u503c\uff0c\u5b9a\u4e49\u4e86\u63a5\u53e3\u89c4\u8303\uff0c\u5373\uff1agetGeneratedKeys() \u65b9\u6cd5\u3002 \u4e3a\u4e86\u89e3\u51b3\u5bf9\u83b7\u53d6\u81ea\u52a8\u4ea7\u751f\u7684\u6216\u81ea\u52a8\u589e\u52a0\u7684\u5173\u952e\u5b57\u7684\u503c\u7684\u9700\u6c42\uff0c\u865a\u8c37 JDBC \u6839\u636e JDBC3.0 \u89c4\u8303\u63d0\u4f9b\u4e86\u83b7\u5f97\u5173\u952e\u5b57\u503c\u7684\u65b9\u6cd5\u3002\u83b7\u53d6\u5173\u952e\u5b57\u7684\u503c\uff0c\u9700\u8981\u5728\u6267\u884c\u65b9\u6cd5\u4e2d\u6307\u5b9a\u81ea\u589e\u5173\u952e\u5b57\u6807\u8bb0\u3002SQL \u8bed\u53e5\u6267\u884c\u5b8c\u540e\uff0c\u8c03\u7528 Statement \u5bf9\u8c61\u7684 getGeneratedKeys() \u65b9\u6cd5\uff0c\u83b7\u5f97\u5305\u542b\u81ea\u589e\u957f\u503c\u7684 ResultSet \u5bf9\u8c61\u3002 \u793a\u4f8b\uff1a\u83b7\u53d6\u6570\u636e\u5e93\u81ea\u589e\u957f\u5173\u952e\u5b57\u7684\u503c //\u521b\u5efaStatement\u5bf9\u8c61 Statement stmt = conn.createStatement(); //\u6307\u5b9a\u81ea\u589e\u957f\u5173\u952e\u5b57\u7684\u6807\u8bc6 String[] colN = {\"id\"}; //\u5728\u6267\u884c\u65b9\u6cd5\u4e2d\u5f15\u5165\u81ea\u589e\u957f\u5173\u952e\u5b57\u6807\u8bc6 stmt.executeUpdate(\"INSERT INTO authors(first_name, last_name) VALUES (\u2018Ghq\u2019, \u2018Wxl\u2019)\",colN); //\u83b7\u53d6\u7ed3\u679c\u96c6 ResultSet rs = stmt.getGeneratedKeys(); if ( rs.next() ) { //\u83b7\u53d6\u7ed3\u679c\u96c6\u4e2d\u7684\u81ea\u589e\u957f\u503c \u3000\u3000 int key = rs.getInt(); }","title":"6.6.5 \u68c0\u7d22\u81ea\u52a8\u4ea7\u751f\u7684\u5173\u952e\u5b57GeneratedKeys"},{"location":"JDBC3/#67","text":"\u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u56e0\u5904\u7406\u9700\u8981\u6240\u5efa\u7acb\u7684 ResultSet\u3001Statement\u3001PreparedStatement \u7b49\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61\uff0c\u5728\u4f7f\u7528\u5b8c\u540e\u5fc5\u987b\u5173\u95ed\u3002\u5173\u95ed\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61\uff0c\u76f4\u63a5\u8c03\u7528\u5bf9\u5e94\u7684\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61 close() \u65b9\u6cd5\u5373\u53ef\u3002 \u5f53\u4e0d\u518d\u9700\u8981\u548c\u865a\u8c37\u6570\u636e\u5e93\u8fdb\u884c\u4ea4\u4e92\u65f6\uff0c\u9700\u65ad\u5f00\u6570\u636e\u5e93\u8fde\u63a5\u3002\u8c03\u7528 Connection \u7c7b\u7684 close() \u65b9\u6cd5\u5373\u4f1a\u5173\u95ed\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u540c\u65f6\u91ca\u653e\u8fde\u63a5\u4e0a\u6240\u6301\u6709\u7684\u6240\u6709\u6570\u636e\u5e93\u8d44\u6e90\u3002 \u6570\u636e\u5e93\u8fde\u63a5\u4e3a\u975e\u81ea\u52a8\u63d0\u4ea4\u65f6\uff0c\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61\u5728\u4f7f\u7528\u5b8c\u540e\uff0c\u82e5\u672a\u53ca\u65f6\u5173\u95ed\uff0c\u6b64\u65f6\u8fdb\u884c DDL \u64cd\u4f5c\u5c06\u4f1a\u5bfc\u81f4\u865a\u8c37\u6570\u636e\u5e93\u52a0\u9501\u8d85\u65f6\u6216\u5931\u8d25\u3002 {.is-info}","title":"6.7 \u91ca\u653e\u8d44\u6e90"},{"location":"JDBC3/#_4","text":"JDBC 3.0 \u89c4\u8303\u5b9a\u4e49\u6709 java.sql.Blob \u4e0e java.sql.Clob \u63a5\u53e3\uff0c\u6b64\u4e24\u7c7b\u63a5\u53e3\u4e3a\u6570\u636e\u5e93\u5927\u5bf9\u8c61\u6570\u636e\u5904\u7406\u63a5\u53e3\u3002\u865a\u8c37\u6570\u636e\u5e93\u5927\u5bf9\u8c61\u5b57\u6bb5\u7c7b\u578b\u5305\u542b\uff1ablob\u3001clob\u3001binary\u3002 \u5728\u865a\u8c37 JDBC \u4e2d\uff0c\u83b7\u53d6\u5927\u5bf9\u8c61\u6570\u636e\u6709\u4e24\u79cd\u8fd4\u56de\u65b9\u5f0f\uff1a\u4e00\u79cd\u662f\u6570\u636e\u76f4\u63a5\u8fd4\u56de\uff1b\u53e6\u4e00\u79cd\u662f\u8fd4\u56de\u63cf\u8ff0\u7b26\u65b9\u5f0f\u3002\u5f53\u8fd4\u56de\u6570\u636e\u4e2d\u5927\u5bf9\u8c61\u6570\u636e\u8f83\u591a\u65f6\uff0c\u5efa\u8bae\u4f7f\u7528\u8fd4\u56de\u63cf\u8ff0\u7b26\u65b9\u5f0f\uff0c\u4ece\u800c\u907f\u514d\u56e0\u6570\u636e\u8fc7\u591a\u8fc7\u5927\u9020\u6210\u7684 JVM \u5185\u5b58\u6ea2\u51fa\u3002\u865a\u8c37 JDBC \u9a71\u52a8\u542f\u7528\u5927\u5bf9\u8c61\u8fd4\u56de\u63cf\u8ff0\u7b26\u65b9\u5f0f\uff0c\u9700\u5728\u8fde\u63a5 URL \u4e32\u4e0a\u914d\u7f6e\u5c5e\u6027 lob_ret \u4e3a descriptor \u3002","title":"\u4e03. \u5927\u5bf9\u8c61\u7c7b\u578b\u5904\u7406"},{"location":"JDBC3/#71","text":"LOB \u5bf9\u8c61\u7684\u63d2\u5165\u5fc5\u987b\u901a\u8fc7 PreparedStatement\u3001CallableStatement \u7c7b\u7684 setXXX() \u65b9\u6cd5\u65b9\u5f0f\u5b9e\u73b0\u3002\u865a\u8c37 JDBC \u4e2d PreparedStatement \u63d0\u4f9b\u591a\u79cd\u65b9\u6cd5\u8bbe\u7f6e\u5927\u5bf9\u8c61\u53c2\u6570\u503c\uff0c\u5982\u4e0b\u5217\u65b9\u6cd5\uff1a setBinaryStream(int parameterIndex,InputStream x) setBlob(int parameterIndex, Blob x) setBlob(int parameterIndex, InputStream x) setBytes(int parameterIndex,byte[] x) setCharacterStream(int parameterIndex, Reader reader) setClob(int parameterIndex, Clob x) setClob(int parameterIndex, Reader reader) setString(int parameterIndex, String x) \u793a\u4f8b\uff1a\u5e94\u7528\u7a0b\u5e8f\u63d2\u5165\u5927\u5bf9\u8c61\u6570\u636e\uff0c\u5176\u4e2d\u8868 b1 \u5b57\u6bb5 photo \u4e3a blob \u7c7b\u578b\uff0c\u5b57\u6bb5 text \u4e3a clob \u7c7b\u578b PreparedStatement ps = conn.prepareStatement(\"INSERT INTO b1 VALUES (?, ?)\")\u037e // blobBytes is a byte[] type ps.setBlob(1, new com.xugu.cloudjdbc.Blob(blobBytes))\u037e // clobString is a String type ps.setClob(2, new com.xugu.cloudjdbc.Clob(clobString))\u037e ps.execute()\uff1b","title":"7.1 \u5411\u8868\u4e2d\u63d2\u5165\u5927\u5bf9\u8c61"},{"location":"JDBC3/#72","text":"\u901a\u8fc7\u865a\u8c37 JDBC \u83b7\u53d6\u5927\u5bf9\u8c61\u503c\uff0c\u6570\u636e\u5e93 CLOB \u5bf9\u8c61\u53ef\u901a\u8fc7\u5b57\u7b26\u4e32\u5f62\u5f0f\u6216\u6d41\u5f0f\u6570\u636e\u5f62\u5f0f\u83b7\u53d6\uff0c\u6570\u636e\u5e93 BLOB \u5bf9\u8c61\u53ea\u901a\u8fc7\u6d41\u5f0f\u6570\u636e\u5f62\u5f0f\u83b7\u53d6\u3002 \u793a\u4f8b 1\uff1a\u6d41\u5f0f\u83b7\u53d6 CLOB \u5bf9\u8c61 Statement stm = xgConn.createStatement(); String sql=\u201dselect remark from t_clob where id=101\u201d; ResultSet rs = stm.executeQuery(sql); while(rs.next) { Clob data = rs.getClob(\"remark \"); //\u4ee5\u5b57\u7b26\u6d41\u65b9\u5f0f\u83b7\u53d6\u6570\u636e Reader rd = data.getCharacterStream(); char[] sc = new char[1000]; StringBuffer sb = new StringBuffer(); int len = 0; while((len=rd.read(sc)) !=-1) { sb.append(new String(sc,0,len)); } System.out.println(sb.toString()); } \u793a\u4f8b 2\uff1a\u865a\u8c37 JDBC \u5141\u8bb8\u4ee5\u5b57\u7b26\u4e32\u7684\u5f62\u5f0f\u8bfb\u53d6 CLOB \u5bf9\u8c61 String sql=\"select text from t_clob\"\u037e Statement stm=conn.createStatement()\u037e ResultSet rs=stm.executeQuery(sql)\u037e while(rs.next()) { String clobStr =rs.getString(\"text\")\u037e }","title":"7.2 \u67e5\u8be2\u5927\u5bf9\u8c61\u6570\u636e"},{"location":"JDBC3/#_5","text":"\u865a\u8c37\u6570\u636e\u5e93\u662f\u4e00\u6b3e\u5177\u5907\u9ad8\u5b89\u5168\u3001\u9ad8\u6027\u80fd\u3001\u9ad8\u6269\u5c55\u7b49\u7279\u6027\u7684\u3001\u57fa\u4e8e\u5206\u5e03\u5f0f\u67b6\u6784\u7684\u5206\u5e03\u5f0f\u4e8b\u52a1\u578b\u6570\u636e\u5e93\u3002\u90e8\u7f72\u6570\u636e\u5e93\u96c6\u7fa4\u65f6\uff0c\u591a\u53f0\u670d\u52a1\u5668\u4f5c\u4e3a\u4e00\u4e2a\u6574\u4f53\u5bf9\u5916\u63d0\u4f9b\u6570\u636e\u670d\u52a1\u3002\u5728\u591a\u673a\u73af\u5883\u4e0b\uff0c\u4e3a\u4f7f\u6570\u636e\u5e93\u8fde\u63a5\u5747\u5300\u5206\u5e03\u4e8e\u5404\u53f0\u670d\u52a1\uff0c\u865a\u8c37 JDBC \u5728\u63a5\u53e3\u5c42\u5b9e\u73b0\u4e86\u57fa\u4e8e\u8f6f\u8d1f\u8f7d\u5747\u8861\u6280\u672f\u7684\u6570\u636e\u5e93\u8fde\u63a5\u5efa\u7acb\u65b9\u5f0f\u3002 \u865a\u8c37\u6570\u636e\u5e93\u8d1f\u8f7d\u5747\u8861\u5206\u914d\u6570\u636e\u5e93\u8fde\u63a5\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a\u987a\u5e8f\u5206\u914d\u3001\u968f\u673a\u5206\u914d\u3002\u901a\u8fc7\u5728\u6570\u636e\u5e93 URL \u8fde\u63a5\u4e32\u4e0a\u8bbe\u7f6e\u53c2\u6570 conn_type(conn_type:1, \u968f\u673a\u5206\u914d\uff1b2, \u987a\u5e8f\u5206\u914d) \u7c7b\u578b\uff0c\u5b9e\u73b0\u6570\u636e\u5e93\u8fde\u63a5\u5728\u591a\u96c6\u7fa4\u73af\u5883\u4e0b\u7684\u8d1f\u8f7d\u5747\u8861\u3002\u9ed8\u8ba4\u8d1f\u8f7d\u5747\u8861\u5206\u914d\u65b9\u5f0f\uff1a\u987a\u5e8f\u5206\u914d\u3002 \u865a\u8c37 JDBC \u63d0\u4f9b\u4e09\u79cd\u914d\u7f6e\u8d1f\u8f7d\u5747\u8861\u7684\u65b9\u5f0f\uff1a\u6570\u636e\u5e93 URL \u8fde\u63a5\u4e32\u914d\u7f6e\u3001\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u6027\u6587\u4ef6 Properties \u914d\u7f6e\u3001\u6570\u636e\u5e93\u8fde\u63a5 XML \u6587\u4ef6\u914d\u7f6e\u3002 1. URL \u8fde\u63a5\u4e32\u914d\u7f6e Class.forName(\"com.xugu.cloudjdbc.Driver\"); //URL\u8fde\u63a5\u4e32\u4e2d\u4f7f\u7528ips\u5c5e\u6027\u914d\u7f6e\u591aIP\u8d1f\u8f7d\u5747\u8861 Connection conn = DriverManager.getConnection(\"jdbc:xugu://192.168.0.201:5138/SYSTEM?user=SYSDBA&password=SYSDBA&conn_type=1&ips=192.168.0.205,192.168.0.204,192.168.1.206\") \u8fde\u63a5\u5c5e\u6027\u6587\u4ef6 Properties \u914d\u7f6e (Vector \u6216\u5b57\u7b26\u4e32\u6570\u7ec4) Properties info=new Properties(); Class.forName(\"com.xugu.cloudjdbc.Driver\"); //Vector\u7ed3\u6784\u5b58\u653e\u8d1f\u8f7d\u5747\u8861\u591aIP\u5730\u5740\u65b9\u5f0f Vector<String> ipsVector=new Vector<String>(); ipsVector.add(\"192.168.1.201\"); ipsVector.add(\"192.168.1.204\"); ipsVector.add(\"192.168.1.205\"); ipsVector.add(\"192.168.1.206\"); info.put(\"ips\", ipsVector); //\u6570\u7ec4\u5b58\u653e\u8d1f\u8f7d\u5747\u8861\u591aIP\u5730\u5740\u65b9\u5f0f String[] ips={\"192.168.1.205\",\"192.168.1.204\",\"192.168.1.206\"}; info.put(\"ips\", ips); Connection conn = DriverManager.getConnection(\"jdbc:xugu://192.168.1.201:5138/SYSTEM?user=SYSDBA&password=SYSDBA&conn_type=2\",info); \u8fde\u63a5\u5c5e\u6027 XML \u6587\u4ef6\u914d\u7f6e <?xml version=\"1.0\" encoding=\"utf-8\"?> <listeners> <listener> <ip>192.168.1.206</ip> </listener> <listener> <ip>192.168.1.204</ip> </listener> <listener> <ip>192.168.1.205</ip> </listener> </listeners> Class.forName(\"com.xugu.cloudjdbc.Driver\"); Connection conn = DriverManager.getConnection(\"jdbc:xugu:file://xuguClouldListener.xml:5138/SYSTEM?user=SYSDBA&password=SYSDBA&conn_type=1\");","title":"\u516b. \u865a\u8c37\u6570\u636e\u5e93\u8d1f\u8f7d\u5747\u8861"},{"location":"JDBC4/","text":"\u6587\u6863\u5bc6\u7ea7\uff1a\u3010 - \u3011 \u8bf4\u660e\uff1a\u516c\u5f00 \u6587\u6863\u4fee\u8ba2\u5386\u53f2 \u5e8f\u53f7 \u6587\u6863\u7248\u672c \u7a0b\u5e8f\u7248\u672c \u7f16\u64b0\u4eba A-\u589e\u52a0 M-\u66f4\u65b0 D-\u5220\u51cf \u53d8\u66f4\u8bf4\u660e \u5b8c\u6210\u65e5\u671f \u8bc4\u5ba1\u4eba \u8bc4\u5ba1\u65e5\u671f \u8bc4\u5ba1\u7ed3\u679c [\u901a\u8fc7/\u62d2\u7edd] 1 1.0 11.0 \u5468\u5f66\u5f64 A \u6574\u7248\u7f16\u5199 2021-7-12 \u5434\u751f\u52c7 2021-7-12 \u901a\u8fc7 2 2.0 12.0 \u66f9\u831c M \u4fee\u6539\u7b2c\u4e8c\u7ae0\u7c7b\u6269\u5c55\u30014.3\u8fde\u63a5\u53c2\u6570 2022-5-14 \u5468\u5f66\u5f64 2022-5-14 \u901a\u8fc7 3 2.1 12.0 \u66f9\u831c M \u4fee\u6539\u7b2c3.1\u57fa\u672c\u6570\u636e\u7c7b\u578b 2022-6-20 \u5468\u5f66\u5f64 2022-6-20 \u901a\u8fc7 \u4e00. \u865a\u8c37\u6570\u636e\u5e93\u7684JDBC\u9a71\u52a8\u7a0b\u5e8f\u6982\u8ff0 Java \u6570\u636e\u5e93\u8fde\u63a5\uff08Java Database Connectivity\uff0c\u7b80\u79f0 JDBC\uff09\u662f Java \u8bed\u8a00\u4e2d\u7528\u6765\u89c4\u8303\u5ba2\u6237\u7aef\u7a0b\u5e8f\u5982\u4f55\u8bbf\u95ee\u6570\u636e\u5e93\u7684\u5e94\u7528\u7a0b\u5e8f\u63a5\u53e3\uff0c\u63d0\u4f9b\u4e86\u8bf8\u5982\u67e5\u8be2\u548c\u66f4\u65b0\u6570\u636e\u5e93\u4e2d\u6570\u636e\u7684\u65b9\u6cd5\uff0c\u53ef\u4ee5\u4e3a\u591a\u79cd\u5173\u7cfb\u6570\u636e\u5e93\u63d0\u4f9b\u7edf\u4e00\u8bbf\u95ee\u3002JDBC \u63d0\u4f9b\u4e86\u4e00\u79cd\u57fa\u51c6\uff0c\u901a\u8fc7\u6b64\u57fa\u51c6\u6570\u636e\u5e93\u5f00\u53d1\u4eba\u5458\u53ef\u6784\u5efa\u66f4\u9ad8\u7ea7\u7684\u5de5\u5177\u548c\u63a5\u53e3\uff0c\u4e5f\u53ef\u901a\u8fc7\u6b64\u57fa\u51c6\u7f16\u5199\u6570\u636e\u5e93\u5e94\u7528\u7a0b\u5e8f\u3002 \u865a\u8c37\u6570\u636e\u5e93\u7684 JDBC \u9a71\u52a8\u7a0b\u5e8f\uff08\u4ee5\u4e0b\u7b80\u79f0\uff1a\u865a\u8c37 JDBC\uff09\u5b9e\u73b0\u4e86 Java \u7a0b\u5e8f\u548c\u865a\u8c37\u6570\u636e\u5e93\u901a\u4fe1\uff0c\u652f\u6301 SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u7684\u8bbf\u95ee\uff0c\u540c\u65f6\u4e5f\u662f\u6784\u9020\u9ad8\u7ea7 API \u548c\u6570\u636e\u5e93\u5f00\u53d1\u5de5\u5177\u7684\u57fa\u7840\u3002 \u7528\u6237\u60f3\u8981\u5b9e\u73b0\u5bf9\u6570\u636e\u5e93\u7684\u8bbf\u95ee\uff0c\u4e00\u822c\u8981\u7ecf\u8fc7\u5982\u4e0b\u7684\u6b65\u9aa4\uff1a 1. \u901a\u8fc7\u9a71\u52a8\u5668\u7ba1\u7406\u5668\u83b7\u53d6\u8fde\u63a5\u63a5\u53e3\uff1b 2. \u83b7\u5f97 Statement \u6216 Statement \u5b50\u7c7b\uff1b 3. \u901a\u8fc7 Statement \u6267\u884c SQL \u547d\u4ee4\uff1b 4. \u5904\u7406\u6267\u884c\u7ed3\u679c\uff1b 5. \u5173\u95ed Statement\uff1b 6. \u5173\u95ed\u8fde\u63a5\u3002 JDBC \u7ed3\u6784\u56fe, \u5982\u56fe1.1\u6240\u793a\u3002 \u56fe1.1 JDBC\u7ed3\u6784\u56fe \u4f7f\u7528\u865a\u8c37 JDBC \u5b9e\u73b0\u5e94\u7528\u7a0b\u5e8f\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u4e4b\u95f4\u7684\u8fde\u63a5\u670d\u52a1\uff0c\u5e94\u7528\u7a0b\u5e8f\u6240\u5728\u8ba1\u7b97\u673a\u9700\u5df2\u5b89\u88c5 Java \u8fd0\u884c\u73af\u5883\uff08Java Runtime Environment, \u7b80\u79f0 JRE\uff09\u3002\u865a\u8c37 JDBC \u53c2\u7167 JDBC API \u5b9e\u73b0\uff0c\u652f\u6301 JDBC 3.0 \u529f\u80fd\uff0cJava \u5e94\u7528\u7a0b\u5e8f\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u4e4b\u95f4\u7684\u6240\u6709\u64cd\u4f5c\u5747\u9700\u901a\u8fc7\u865a\u8c37 JDBC \u6765\u5b8c\u6210\u3002 \u4f7f\u7528\u865a\u8c37 JDBC \u9700\u8981 JRE 1.6 \u7248\u6216\u66f4\u9ad8\u7248\u672c\u7684 Java \u8fd0\u884c\u65f6\u73af\u5883 (JRE)\u3002 {.is-info} \u4e8c. \u865a\u8c37\u6570\u636e\u5e93\u7684JDBC\u63a5\u53e3\u548c\u5bf9\u8c61\u7c7b JDBC 3.0 \u89c4\u8303\u7531 JDBC 1.0\u3001JDBC 2.0 \u884d\u751f\u800c\u6765\uff0c\u4e3b\u8981\u5305\u542b java.sql \u5305\u4ee5\u53ca javax.sql \u5305\uff0c\u6570\u636e\u5e93 JDBC \u9a71\u52a8\u5b9e\u73b0 JDBC 3.0 \u89c4\u8303\u6240\u5b9a\u4e49\u7684\u7279\u6027\u63a5\u53e3\uff0c\u5373\u53ef\u8fbe\u5230\u5bf9\u6807\u51c6 JDBC 3.0 \u89c4\u8303\u7684\u652f\u6301\u3002 \u865a\u8c37 JDBC \u57fa\u4e8e JDBC 3.0 \u89c4\u8303\u5b9e\u73b0\uff0c\u5b9e\u73b0\u63a5\u53e3\u7c7b\u6620\u5c04\uff0c\u5982\u88682.1\u6240\u793a\u3002 \u88682.1 \u865a\u8c37JDBC\u5b9e\u73b0\u63a5\u53e3\u7c7b | \u63a5\u53e3 | \u865a\u8c37JDBC\u5b9e\u73b0\u7c7b | | ---------------------------------- | ---------------------------------------- | | java.sql.Driver | com.xugu.cloudjdbc.Driver | | java.sql.Connection | com.xugu.cloudjdbc.Connection | | java.sql.Statement | com.xugu.cloudjdbc.Statement | | java.sql.PreparedStatement | com.xugu.cloudjdbc.PreparedStatement | | java.sql.CallableStatement | com.xugu.cloudjdbc.CallableStatement | | java.sql.ResultSet | com.xugu.cloudjdbc.ResultSet | | java.sql.ResultSetMetaData | com.xugu.cloudjdbc.ResultSetMetaData | | java.sql.DatabaseMetaData | com.xugu.cloudjdbc.DatabaseMetaData | | java.sql.PrameterMetaData | com.xugu.cloudjdbc.PrameterMetaData | | java.sql.Types | com.xugu.cloudjdbc.Types | | java.sql.Blob | com.xugu.cloudjdbc.Blob | | java.sql.Clob | com.xugu.cloudjdbc.Clob | | java.sql.Savepoint | com.xugu.cloudjdbc.Savepoint | | javax.sql.DataSource | com.xugu.pool.XgDataSource | | javax.sql.ConnectionPoolDataSource | com.xugu.pool.XgConnectionPoolDataSource | | javx.sql.PooledConnection | com.xugu.pool.XgPooledConnection | \u9664\u4e86\u4ee5\u4e0a\u6807\u51c6\u7c7b\u63a5\u53e3\u5916\uff0c\u865a\u8c37 JDBC \u8fd8\u6269\u5c55\u5b9e\u73b0\u4e86\u4ee5\u4e0b\u7c7b\uff1a - com.xugu.cloudjdbc.ClientInfo - com.xugu.cloudjdbc.OutParameter - com.xugu.cloudjdbc.Rowid - com.xugu.cloudjdbc.SQLXml - com.xugu.cloudjdbc.SSL - com.xugu.pool.StatementWrapper - com.xugu.pool.PreparedStatementWrapper \u4e09. \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b 3.1 \u57fa\u672c\u6570\u636e\u7c7b\u578b \u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b\u3001\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u3001Java \u6570\u636e\u7c7b\u578b\u4e09\u8005\u6620\u5c04\u5173\u7cfb\uff0c\u5982\u88683.1\u6240\u793a\u3002 \u88683.1 \u6570\u636e\u7c7b\u578b\u6620\u5c04\u5173\u7cfb \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b \u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b Java \u6570\u636e\u7c7b\u578b BOOLEAN BOOLEAN boolean SMALLINT SMALLINT short TINYINT TINYINT byte INTEGER INTEGER int BIGINT BIGINT long FLOAT FLOAT float DOUBLE DOUBLE double NUMERIC NUMERIC BigDecimal DECIMAL BigDecimal CHAR CHAR String NCHAR NCHAR String VARCHAR VARCHAR String VARCHAR2 VARCHAR String NVARCHAR2 VARCHAR String BLOB BLOB Blob CLOB CLOB Clob NCLOB BINARY BINARY byte[] VARBINARY LONG VARBINARY DATE DATE Date TIME TIME Time TIMESTAMP TIMESTAMP Timestamp 3.2 \u6269\u5c55\u6570\u636e\u7c7b\u578b \u865a\u8c37 JDBC \u9664\u4e86\u5b9e\u73b0\u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b\uff0c\u8fd8\u6839\u636e\u865a\u8c37\u6570\u636e\u5e93\u81ea\u6709\u7c7b\u578b\u6269\u5c55\u4e86\u90e8\u5206\u6570\u636e\u7c7b\u578b\uff08\u88683.2\u6240\u793a\uff09\uff0c\u5305\u62ec\u4ee5\u4e0b\u6570\u636e\u7c7b\u578b\u3002 1. \u65f6\u95f4\u6570\u636e\u7c7b\u578b DATETIME\u2014\u2014\u2014 \u65e5\u671f\u65f6\u95f4\u7c7b\u578b DATETIME WITH TIME ZONE \u2014\u2014\u2014 \u5e26\u65f6\u533a\u7684\u65e5\u671f\u65f6\u95f4\u7c7b\u578b TIME WITH TIME ZONE \u2014\u2014\u2014 \u5e26\u65f6\u533a\u7684\u65f6\u95f4\u7c7b\u578b INTERVAL YEAR \u2014\u2014\u2014 \u5e74\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL MONTH \u2014\u2014\u2014 \u6708\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY\u2014\u2014\u2014 \u65e5\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL HOUR \u2014\u2014\u2014 \u5c0f\u65f6\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL MINUTE \u2014\u2014\u2014 \u5206\u949f\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL SECOND \u2014\u2014\u2014 \u79d2\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL YEAR TO MONTH \u2014\u2014\u2014 \u5e74\u5230\u6708\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY TO HOUR \u2014\u2014\u2014 \u65e5\u5230\u5c0f\u65f6\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY TO MINUTE \u2014\u2014\u2014 \u65e5\u5230\u5206\u949f\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY TO SECOND \u2014\u2014\u2014 \u65e5\u5230\u79d2\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL HOUR TO MINUTE \u2014\u2014\u2014 \u5c0f\u65f6\u5230\u5206\u949f\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL HOUR TO SECOND \u2014\u2014\u2014 \u5c0f\u65f6\u5230\u79d2\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL MINUTE TO SECOND \u2014\u2014\u2014 \u5206\u949f\u5230\u79d2\u7684\u65f6\u95f4\u95f4\u9694 2. \u6e38\u6807\u6570\u636e\u7c7b\u578b\uff08\u53ea\u5728\u5b58\u50a8\u8fc7\u7a0b\u3001\u51fd\u6570\u3001\u5305\u4e2d\u4f7f\u7528\uff09 CURSOR \u2014\u2014\u2014 \u6e38\u6807\u6570\u636e\u7c7b\u578b SYS_REFCURSOR \u2014\u2014\u2014 \u8fd4\u56de\u6e38\u6807\u6570\u636e\u7c7b\u578b 3. \u5176\u4ed6\u6570\u636e\u7c7b\u578b GUID \u2014\u2014\u2014 \u5168\u5c40\u552f\u4e00\u6807\u8bc6\u7b26 \u88683.2 \u6269\u5c55\u6570\u636e\u7c7b\u578b\u5bf9\u5e94\u8868 \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b \u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b Java \u6570\u636e\u7c7b\u578b DATETIME DATETIME Timestamp DATETIME WITH TIME ZONE DATETIME_TZ String TIME WITH TIME ZONE TIME_TZ String INTERVAL YEAR INTERVAL_Y String INTERVAL MONTH INTERVAL_M INTERVAL DAY INTERVAL_D INTERVAL HOUR INTERVAL_H INTERVAL MINUTE INTERVAL_MI INTERVAL SECOND INTERVAL_S String INTERVAL YEAR TO MONTH INTERVAL_Y2M INTERVAL DAY TO HOUR INTERVAL_D2H INTERVAL DAY TO MINUTE INTERVAL_D2M INTERVAL DAY TO SECOND INTERVAL_D2S INTERVAL HOUR TO MINUTE INTERVAL_H2M INTERVAL HOUR TO SECOND INTERVAL_H2S INTERVAL MINUTE TO SECOND INTERVAL_M2S CURSOR CURSOR \u65e0\u5bf9\u5e94\u7c7b\u578b SYS_REFCURSOR REFCUR GUID GUID String \u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528 ResultSet \u5bf9\u8c61\u6765\u5bf9\u5e94\u83b7\u53d6\u6e38\u6807\u6240\u8fd4\u56de\u6570\u636e\u3002 {.is-info} 3.3 \u6570\u636e\u7c7b\u578b\u8f6c\u6362 \u5728\u8c03\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u4e2d\u7684\u67d0\u4e9b\u65b9\u6cd5\u65f6\uff0c\u9700\u8fdb\u884c Java \u6570\u636e\u7c7b\u578b\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u7684\u8f6c\u6362\uff0c\u8fd9\u4e9b\u65b9\u6cd5\u5305\u62ec\uff1a - ResultSet \u7c7b get\\<Type> \u65b9\u6cd5\uff1b - ResultSet \u7c7b update\\<Type> \u65b9\u6cd5\uff1b - CallableStatement \u7c7b get\\<Type> \u65b9\u6cd5\uff1b - PreparedStatement \u7c7b set\\<Type> \u65b9\u6cd5\u3002 \u6570\u636e\u7c7b\u578b\u4e4b\u95f4\u7684\u8f6c\u6362\uff0c\u9700\u9075\u4ece Java \u6570\u636e\u7c7b\u578b\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u6620\u5c04\u5173\u7cfb\u89c4\u5219\uff0c\u5426\u5219\u53ef\u80fd\u8f6c\u6362\u5931\u8d25\u3002 1. com.xugu.cloudjdbc.ResultSet \u7c7b\u4e2d get\\<Type> \u65b9\u6cd5\u7684\u7c7b\u578b\u8f6c\u6362\uff0c\u5982\u88683.3\u6240\u793a\u3002 2. com.xugu.cloudjdbc.PreparedStatement \u7c7b\u4e2d set\\<Type> \u65b9\u6cd5\u7684\u7c7b\u578b\u8f6c\u6362\uff0c\u5982\u88683.4\u6240\u793a\u3002 X\uff08\u65e0\u4e22\u5931\u8f6c\u6362\uff09\uff1a\u6307\u4ee5\u957f\u7cbe\u5ea6\u7c7b\u578b\u7684 get\\<Type> \u65b9\u6cd5\u83b7\u53d6\u77ed\u7cbe\u5ea6\u6570\u636e\u7c7b\u578b\u5217\u503c\u65e0\u4e22\u5931\u3002 \u5982\uff1a\u4f7f\u7528 getInt() \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u4e3a smallint \u7684\u5217\u6570\u636e\uff0c\u83b7\u53d6\u6570\u636e\u5b8c\u6574\u3002 Z\uff08\u4f9d\u8d56\u8f6c\u6362\uff09\uff1a\u6307 get\\<Type> \u65b9\u6cd5\u4e2d\u7684 Type \u7c7b\u578b\u4e0e\u83b7\u53d6\u6570\u636e\u5e93\u4e2d\u5217\u7684\u6570\u636e\u7c7b\u578b\u4e0d\u4e00\u81f4\uff0c\u6b64\u65f6\u9700\u8981\u901a\u8fc7\u5176\u4ed6\u6570\u636e\u7c7b\u578b\u8f6c\u6362\u4e3a Type \u6570\u636e\u7c7b\u578b\uff0c\u6b64\u8f6c\u6362\u8fc7\u7a0b\u503c\u53ef\u80fd\u4e22\u5931\u90e8\u5206\u6570\u636e\u3002 \u5982\uff1a\u4f7f\u7528 getInt() \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u4e3a float \u7684\u5217\u6570\u636e\uff0c\u53ef\u83b7\u53d6 float \u5217\u6570\u636e\u7684\u6574\u6570\u503c\uff0c\u800c\u5c0f\u6570\u7cbe\u5ea6\u503c\u5c06\u4e22\u5931\u3002 Y\uff08\u76f4\u63a5\u8f6c\u6362\uff09\uff1a\u6307 get\\<Type> \u65b9\u6cd5\u4e2d\u7684 Type \u7c7b\u578b\u4e0e\u83b7\u53d6\u6570\u636e\u5e93\u4e2d\u5217\u7684\u6570\u636e\u7c7b\u578b\u4e00\u81f4\u3002 \u5982\uff1a\u4f7f\u7528 getInt() \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u4e3a integer \u7684\u5217\u6570\u636e\uff0c\u76f4\u63a5\u83b7\u53d6\u5b8c\u6574\u6570\u636e\u3002 {.is-info} P\uff08\u5141\u8bb8\u63d2\u5165\uff09\uff1a\u6307 set\\<Type> \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u5e93\u4e2d\u5217\u6570\u636e\u65f6\uff0c\u6570\u636e\u65e0\u635f\u5931\u5b58\u5165\u6570\u636e\u5e93\u4e2d\u3002 \u5982\uff1a\u4f7f\u7528 setInt() \u65b9\u6cd5\u8bbe\u7f6e\u5217\u6570\u636e\u7c7b\u578b\u4e3a bigint \u7684\u6570\u636e\u65f6\uff0c\u6570\u636e\u53ef\u6b63\u786e\u5b58\u5165\u3002 Z\uff08\u90e8\u5206\u63d2\u5165\uff09\uff1a\u6307 set\\<Type> \u65b9\u6cd5\u4e2d\u7684 Type \u7c7b\u578b\u548c\u6570\u636e\u5e93\u4e2d\u5217\u6570\u636e\u7c7b\u578b\u4e0d\u4e00\u81f4\uff0c\u6570\u636e\u4ec5\u80fd\u90e8\u5206\u6b63\u786e\u5b58\u5165\u3002 \u5982\uff1a\u4f7f\u7528 setInt() \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u5e93\u5217\u7c7b\u578b\u4e3a tinyint \u7684\u6570\u636e\uff0c\u56e0 tinyint \u8868\u793a\u8303\u56f4\u4e3a-128\uff5e127 \u7684\u6574\u6570\u503c\uff0c\u6545\u800c tinyint\u8868\u793a\u8303\u56f4\u5185\u6570\u636e\u53ef\u6b63\u786e\u5b58\u5165\uff0c\u8303\u56f4\u5916\u6570\u636e\u5c06\u63d2\u5165\u5931\u8d25\u3002 {.is-info} \u56db. \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5 4.1 \u90e8\u7f72JDBC\u9a71\u52a8\u7a0b\u5e8f \u901a\u8fc7\u865a\u8c37 JDBC \u9a71\u52a8\u8bbf\u95ee\u865a\u8c37\u6570\u636e\u5e93\uff0c\u9996\u5148\u5e94\u4fdd\u8bc1\u5e94\u7528\u7a0b\u5e8f\u6b63\u786e\u5f15\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u5305 (cloudjdbc-*.*.*.jar)\uff0c\u5373\u5c06\u9a71\u52a8\u5305\u62f7\u8d1d\u81f3\u5e94\u7528\u7a0b\u5e8f\u5e76\u6dfb\u52a0\u5f15\u7528\u3002 4.2 \u52a0\u8f7dJDBC\u9a71\u52a8\u7a0b\u5e8f \u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u8fdb\u884c\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u8c03\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u7a0b\u5e8f\uff0c\u9996\u5148\u8981\u5c06\u865a\u8c37 JDBC \u9a71\u52a8\u52a0\u8f7d\u5230\u7cfb\u7edf\u5185\u5b58\u4e2d\uff0c\u7136\u540e\u4f9b\u7cfb\u7edf\u4f7f\u7528\u3002\u865a\u8c37 JDBC \u7684\u9a71\u52a8\u5b9e\u73b0\u7c7b\u4e3acom.xugu.cloudjdbc.Driver\uff0c\u4ee5\u4e0b\u662f\u5c06\u865a\u8c37 JDBC \u9a71\u52a8\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\u7684\u4ee3\u7801\uff1a //\u663e\u793a\u6ce8\u518c DriverManager.registerDriver(new com.xugu.cloudjdbc.Driver())\u037e //\u9690\u5f0f\u6ce8\u518c Class.forName(\u201ccom.xugu.cloudjdbc.Driver\u201d)\u037e \u9690\u5f0f\u6ce8\u518c\u5373\u901a\u8fc7 Class.forName() \u5c06\u5bf9\u5e94\u7684\u9a71\u52a8\u7c7b\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\uff0c\u5c06\u6267\u884c\u5185\u5b58\u4e2d\u7684 static \u9759\u6001\u4ee3\u7801\u6bb5\uff0c\u6b64\u4ee3\u7801\u6bb5\u4f1a\u521b\u5efa\u4e00\u4e2a\u865a\u8c37 JDBC \u9a71\u52a8\u7684\u5b9e\u4f8b\uff0c\u5e76\u653e\u5165 DriverManager \u4e2d\uff0c\u4f9b DriverManager \u4f7f\u7528\u3002 {.is-info} 4.3 \u8fde\u63a5\u5b57\u4e32\u53ca\u53c2\u6570\u8bbe\u7f6e \u865a\u8c37 JDBC \u9a71\u52a8\u8fde\u63a5 URL \u4e32\u683c\u5f0f\uff1a jdbc:xugu://serverIP:portNumber/databaseName[?property=value[&property=value]] \u865a\u8c37 JDBC \u9a71\u52a8\u8fde\u63a5 URL \u4e32\u683c\u5f0f\uff1a 1). jdbc:xugu:// \uff1a\uff08\u5fc5\u9700\uff09\u865a\u8c37\u6570\u636e\u5e93\u7279\u5b9a\u534f\u8bae\u3002 2). serverIP \uff1a\uff08\u5fc5\u9700\uff09\u865a\u8c37\u6570\u636e\u5e93\u6240\u5728\u670d\u52a1\u5668\u7684 IP \u5730\u5740\u3002 3). portNumber\uff1a\uff08\u5fc5\u9700\uff09\u662f\u865a\u8c37\u6570\u636e\u5e93\u670d\u52a1 TCP \u8bbf\u95ee\u7aef\u53e3\uff0c\u9ed8\u8ba4 5138\u3002 4). databaseName\uff1a\uff08\u5fc5\u9700\uff09\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u5e93\u540d\u79f0\u3002 5). property\uff1a\uff08\u53ef\u9009\uff09\u865a\u8c37\u6570\u636e\u5e93\u7684 URL \u8fde\u63a5\u5c5e\u6027\u3002\u591a\u4e2a\u8fde\u63a5\u5c5e\u6027\u4e4b\u95f4\u4f7f\u7528\u201c&\u201d\u5206\u9694\uff0c\u4e0d\u53ef\u91cd\u590d\u3002 \u865a\u8c37 JDBC \u9a71\u52a8 URL \u4e32\u793a\u4f8b\u5982\u4e0b\uff1a String url = jdbc:xugu://localhost:5138/System?user=GUEST&password=GUEST\u037e property \u8bbe\u7f6e\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u6027\uff0c\u5e38\u7528\u8fde\u63a5\u5c5e\u6027\u89c1\u88684.1\u3002 \u88684.1 \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u6027 table th:first-of-type { width: 20%; } table th:nth-of-type(2) { width: 10%; } table th:nth-of-type(3) { width: 10%; } table th:nth-of-type(4) { width: 50%; } \u5c5e\u6027\u540d\u79f0 \u5fc5\u9009\u9879 \u53d6\u503c \u8bf4\u660e database \u221a \u5b57\u7b26\u4e32 \u6570\u636e\u5e93\u540d\u79f0 user \u221a \u5b57\u7b26\u4e32 \u7528\u6237\u540d\u79f0 password \u221a \u5b57\u7b26\u4e32 \u7528\u6237\u5bc6\u7801 encryptor \u00d7 \u5b57\u7b26\u4e32 \u7528\u4e8e\u542f\u52a8\u52a0\u5bc6\u6570\u636e\u5e93\uff0c\u82e5\u5e93\u672a\u52a0\u5bc6\uff0c\u5219\u53ef\u4e0d\u8981\uff0c\u4f46\u5e26\u4e0a\u6b64\u53c2\u6570\u4e0d\u4f1a\u5f71\u54cd\u8fde\u63a5 char_set \u00d7 \u5b57\u7b26\u4e32 \u8fde\u63a5\u5b57\u7b26\u96c6\u3002'GB2312'\u3001'GBK'\u3001'UTF8' \u7b49\uff0c\u9ed8\u8ba4\uff1aGBK time_zone \u00d7 \u5b57\u7b26\u4e32 \u5ba2\u6237\u7aef\u65f6\u533a\u3002\u9ed8\u8ba4\uff1a\u865a\u8c37\u6570\u636e\u5e93\u914d\u7f6e\u53c2\u6570 def_timezone \u6240\u8bbe\u7f6e\u65f6\u533a\uff08\u53ea\u5bf9\u7cfb\u7edf\u65f6\u95f4\u51fd\u6570\u751f\u6548\uff09 iso_level \u00d7 \u5b57\u7b26\u4e32 'READ COMMITED'\uff1a\u8bfb\u5df2\u63d0\u4ea4\uff1b 'REPEATIABLE READ'\uff1a\u53ef\u91cd\u590d\u8bfb\uff1b'SERIALIZABLE'\uff1a\u5e8f\u5217\u5316 lock_time \u00d7 \u6570\u503c \u5355\u4f4d\uff1a\u6beb\u79d2\uff0c\u9ed8\u8ba4\u503c\uff1a0\uff0c\u8868\u793a\u8fde\u63a5\u4e2d\u7684\u4e8b\u52a1\u9501\u5f81\u7528\u65f6\uff0c\u6700\u5927\u7b49\u5019\u65f6\u95f4\uff0c\u82e5\u5728\u8bbe\u7f6e\u65f6\u95f4\u5185\u52a0\u9501\u5931\u8d25\uff0c\u56de\u6eda\u4e8b\u52a1\u5e76\u62a5\u9519 lob_ret \u00d7 \u5b57\u7b26\u4e32 \u5927\u5bf9\u8c61\uff08Blob\u3001Clob\uff09\u6570\u636e\u8fd4\u56de\u65b9\u5f0f\u3002\u5c5e\u6027\u4e3a descriptor \u65f6\uff0c\u4ee5\u63cf\u8ff0\u7b26\u65b9\u5f0f\u8fd4\u56de\uff1b\u5176\u4ed6\u4ee5\u6570\u636e\u6d41\u65b9\u5f0f\u8fd4\u56de\u3002\u9ed8\u8ba4\uff1a\u4ee5\u6570\u636e\u6d41\u65b9\u5f0f\u8fd4\u56de return_rowid \u00d7 \u5e03\u5c14\u503c \u662f\u5426\u8fd4\u56de\u8bb0\u5f55 rowid \u503c\u3002\u5c5e\u6027\u4e3a TRUE \u65f6\uff0c\u8fd4\u56de rowid\uff1b\u5176\u4ed6\u8fd4\u56de FALSE\u3002\u9ed8\u8ba4\uff1aFALSE auto_commit \u00d7 on/off \u4e8b\u52a1\u662f\u5426\u81ea\u52a8\u63d0\u4ea4\u3002\u5c5e\u6027\u4e3a ON \u65f6\uff0c\u8fde\u63a5\u81ea\u52a8\u63d0\u4ea4\uff1b\u5c5e\u6027\u4e3a OFF\u65f6\uff0c\u8fde\u63a5\u975e\u81ea\u52a8\u63d0\u4ea4\u3002\u9ed8\u8ba4\uff1aON conn_type \u00d7 \u6570\u503c \u8d1f\u8f7d\u5747\u8861\u5206\u914d\u65b9\u5f0f\u3002\u5c5e\u6027\u4e3a 1 \u65f6\uff0c\u968f\u673a\u5206\u914d\uff1b\u5c5e\u6027\u4e3a 2 \u65f6\uff0c\u987a\u5e8f\u5206\u914d\u3002\u9ed8\u8ba4\uff1a2 ips \u00d7 \u5b57\u7b26\u4e32 \u8d1f\u8f7d\u5747\u8861\u8fde\u63a5 IP \u5730\u5740\uff0c\u591a\u4e2a IP \u5730\u5740\u4ee5\u9017\u53f7\u5206\u9694\uff08\u8be6\u7ec6\u89c1\u8d1f\u8f7d\u5747\u8861\uff09 CompatibleOracle \u00d7 \u5e03\u5c14\u503c \u517c\u5bb9 Oracle \u9009\u9879\u3002\u5c5e\u6027\u4e3a true\uff0c\u517c\u5bb9 Oracle\u037e \u5c5e\u6027\u4e3a FALSE\uff0c\u865a\u8c37 JDBC \u81ea\u6709\u5b9e\u73b0 recv_mode \u00d7 \u6570\u503c \u63a5\u6536\u6a21\u5f0f\u9009\u9879\u3002\u5c5e\u6027\u503c\u4e3a 0 \u65f6\uff0c\u672c\u5730\u5168\u63a5\u6536\u6a21\u5f0f\uff1b\u5c5e\u6027\u503c\u4e3a 1 \u65f6\uff0c\u7f51\u7edc\u63a5\u6536\u6a21\u5f0f\uff1b\u5c5e\u6027\u503c\u4e3a 2 \u65f6\uff0c\u670d\u52a1\u5668\u7aef\u6e38\u6807\u63a5\u6536\u6a21\u5f0f\u3002\u9ed8\u8ba4\uff1a0 emptyStringAsNull \u00d7 \u5e03\u5c14\u503c \u7a7a\u5b57\u4e32\u5904\u7406\u3002\u5c5e\u6027\u4e3a FALSE \u65f6\uff0c\u7a7a\u5b57\u7b26\u4e32\u8ba4\u5b9a\u4e3a NULL\uff1b\u5c5e\u6027\u4e3a TRUE \u65f6\uff0c\u7a7a\u5b57\u7b26\u4e32\u4fdd\u7559\u3002\u9ed8\u8ba4\uff1a\u7a7a\u5b57\u4e32\u4fdd\u7559 xgversion \u00d7 201/301 \u5ba2\u6237\u7aef\u534f\u8bae\u7248\u672c\uff0c\u865a\u8c37\u6570\u636e\u5e93V12\u7248\u672c\u5347\u7ea7\u652f\u6301301\u534f\u8bae\uff0c\u540c\u65f6\u517c\u5bb9201\u534f\u8bae SSL \u00d7 SSL \u8fde\u63a5\u52a0\u5bc6\u53c2\u6570\u3002\u5c5e\u6027\u503c\u3010SSL\uff1a\u542f\u7528SSL\u52a0\u5bc6\u4f20\u8f93\uff1bNSSL\uff1a\u7981\u7528SSL\u52a0\u5bc6\u4f20\u8f93\u3011 slowsqltime \u00d7 \u6570\u503c \u8bbe\u7f6e\u6162SQL\u6267\u884c\u65f6\u95f4\u3002SQL\u8bed\u53e5\u6267\u884c\u65f6\u95f4\u8d85\u8fc7\u8be5\u6570\u503c\uff0c\u65e5\u5fd7\u5219\u4f1a\u8f93\u51fa\u6267\u884cSQL batch_mode \u00d7 \u5e03\u5c14\u503c PreparedStatement\u662f\u5426\u4f7f\u7528\u6279\u91cf\u5904\u7406\u3002\u5c5e\u6027\u4e3a TRUE \u65f6\uff0cexecuteBatch\u91c7\u7528\u6279\u91cf\u6a21\u578b\uff1bFALSE\u5219\u91c7\u7528\u5355\u6761\u5904\u7406\u6a21\u578b\u3002\u9ed8\u8ba4\uff1aFALSE \u8fde\u63a5\u53c2\u6570\u4f7f\u7528SSL\u5c5e\u6027\u65f6\uff0c\u4f9d\u8d56\u7a0b\u5e8f\u5305\u4e2d\u63d0\u4f9b\u7684\u52a8\u6001\u94fe\u63a5\u5e93\uff0c\u4f7f\u7528\u524d\u9700\u5c06\u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u5230\u64cd\u4f5c\u7cfb\u7edf\u6307\u5b9a\u4f4d\u7f6e\u65b9\u53ef\u6b63\u5e38\u4f7f\u7528SSL\u52a0\u5bc6\u529f\u80fd\u3002 Windows 32\u4f4d\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u7528SSL\u5c5e\u6027\u524d\uff0c\u9700\u5c06\u7a0b\u5e8f\u5305 ssl/win32 \u4e0b xgssl.dll \u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u62f7\u8d1d\u5230\u7cfb\u7edf\u76ee\u5f55 C:/windows/system32 \u76ee\u5f55\u4f4d\u7f6e\u3002 Windows 64\u4f4d\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u7528SSL\u5c5e\u6027\u524d\uff0c\u9700\u5c06\u7a0b\u5e8f\u5305 ssl/win64 \u4e0b xgssl.dll \u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u62f7\u8d1d\u5230\u7cfb\u7edf\u76ee\u5f55 C:/windows/system32 \u76ee\u5f55\u4e0b\u3002 Linux X64\u4f4d\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u7528SSL\u5c5e\u6027\u524d\uff0c\u9700\u5c06\u7a0b\u5e8f\u5305 ssl/linux64 \u4e0b libxgssl.so \u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u62f7\u8d1d\u5230\u7cfb\u7edf\u76ee\u5f55 /usr/lib\u6216\u8005/usr/lib4 \u76ee\u5f55\u4e0b\u3002 \u865a\u8c37 JDBC \u8bbe\u7f6e\u8fde\u63a5\u5c5e\u6027\u793a\u4f8b\u5982\u4e0b (\u7248\u672c\u53f7\u3001\u5927\u5bf9\u8c61\u63cf\u8ff0\u7b26\u3001\u65f6\u533a\u3001\u5173\u95ed\u8fde\u63a5\u81ea\u52a8\u63d0\u4ea4)\uff1a String url=jdbc:xugu://localhost:5138/System?user=GUEST&password=GUEST&version=110&auto_commit=false&lob_ret=descriptor&time_zone=GMT-8:00\u037e 4.4 \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5 \u5728\u5e94\u7528\u7a0b\u5e8f\u5c06\u865a\u8c37 JDBC \u9a71\u52a8\u52a0\u8f7d\u5230\u7cfb\u7edf\u5185\u5b58\u4e2d\u540e\uff0c\u53ef\u901a\u8fc7 DriverManager \u7c7b\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u65b9\u6cd5\u5982\u4e0b\uff1a DriverManager.getConnection(String url)\u037e DriverManager.getConnection(String url,Properties)\u037e DriverManager.getConnection(String url,String user,String password)\u037e \u4e94. \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u6e90\u548c\u8fde\u63a5\u6c60 \u901a\u8fc7 DriverManager \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u4ee5\u5916\uff0c\u8fd8\u53ef\u4ee5\u4f7f\u7528\u6570\u636e\u6e90\u6216\u8fde\u63a5\u6c60\u65b9\u5f0f\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u3002\u901a\u8fc7\u6570\u636e\u6e90\u65b9\u5f0f\u6216\u8fde\u63a5\u6c60\u65b9\u5f0f\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u6709\u4ee5\u4e0b\u4f18\u70b9\uff1a - \u8d44\u6e90\u91cd\u7528 \u7531\u4e8e\u6570\u636e\u5e93\u8fde\u63a5\u5f97\u5230\u91cd\u7528\uff0c\u907f\u514d\u4e86\u9891\u7e41\u521b\u5efa\u3001\u91ca\u653e\u8fde\u63a5\u5f15\u8d77\u7684\u5927\u91cf\u6027\u80fd\u5f00\u9500\u3002\u5728\u51cf\u5c11\u7cfb\u7edf\u6d88\u8017\u7684\u57fa\u7840\u4e0a\uff0c\u53e6\u4e00\u65b9\u9762\u4e5f\u589e\u8fdb\u4e86\u7cfb\u7edf\u8fd0\u884c\u73af\u5883\u7684\u5e73\u7a33\u6027\uff08\u51cf\u5c11\u5185\u5b58\u788e\u7247\u4ee5\u53ca\u6570\u636e\u5e93\u4e34\u65f6\u8fdb\u7a0b/\u7ebf\u7a0b\u7684\u6570\u91cf\uff09\u3002 - \u66f4\u5feb\u7684\u7cfb\u7edf\u54cd\u5e94 \u6570\u636e\u5e93\u8fde\u63a5\u6c60\u5728\u521d\u59cb\u5316\u8fc7\u7a0b\u4e2d\uff0c\u5f80\u5f80\u5df2\u7ecf\u521b\u5efa\u4e86\u82e5\u5e72\u6570\u636e\u5e93\u8fde\u63a5\u7f6e\u4e8e\u6c60\u4e2d\u5907\u7528\u3002\u6b64\u65f6\u8fde\u63a5\u7684\u521d\u59cb\u5316\u5de5\u4f5c\u5747\u5df2\u5b8c\u6210\u3002\u5bf9\u4e8e\u4e1a\u52a1\u8bf7\u6c42\u5904\u7406\u800c\u8a00\uff0c\u76f4\u63a5\u5229\u7528\u73b0\u6709\u53ef\u7528\u8fde\u63a5\uff0c\u907f\u514d\u4e86\u6570\u636e\u5e93\u8fde\u63a5\u521d\u59cb\u5316\u548c\u91ca\u653e\u8fc7\u7a0b\u7684\u65f6\u95f4\u5f00\u9500\uff0c\u4ece\u800c\u7f29\u51cf\u4e86\u7cfb\u7edf\u6574\u4f53\u54cd\u5e94\u65f6\u95f4\u3002 - \u65b0\u7684\u8d44\u6e90\u5206\u914d\u624b\u6bb5 \u5bf9\u4e8e\u591a\u5e94\u7528\u5171\u4eab\u540c\u4e00\u6570\u636e\u5e93\u7684\u7cfb\u7edf\u800c\u8a00\uff0c\u53ef\u5728\u5e94\u7528\u5c42\u901a\u8fc7\u6570\u636e\u5e93\u8fde\u63a5\u7684\u914d\u7f6e\uff0c\u9650\u5236\u5355\u4e00\u5e94\u7528\u7533\u8bf7\u6570\u636e\u5e93\u8fde\u63a5\u6570\uff0c\u4ece\u800c\u907f\u514d\u5355\u4e00\u5e94\u7528\u72ec\u5360\u6240\u6709\u6570\u636e\u5e93\u8d44\u6e90\u3002 \u865a\u8c37 JDBC \u4e2d\u6570\u636e\u6e90\u5b9e\u73b0\u7c7b\u4e3a com.xugu.pool.XgDataSource\uff0c\u8fde\u63a5\u6c60\u5b9e\u73b0\u7c7b\u4e3acom.xugu.pool \u5305\u4e2d\u7684 XgDataSource\u3001XgPooledConnection\u3001XgConnectionPoolDataSource\u3001XgConnectionEventListener\u3001XgConnectionEvent\u3002 5.1 \u4f7f\u7528\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u6e90\u521b\u5efa\u8fde\u63a5 XgDataSource \u63d0\u4f9b set \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u6e90\u8fde\u63a5\u5c5e\u6027\uff1a \u793a\u4f8b\uff1a\u901a\u8fc7 XgDataSource \u4e0e\u865a\u8c37\u6570\u636e\u5e93\u5efa\u7acb\u8fde\u63a5 com.xugu.pool.XgDataSource ds = new com.xugu.pool.XgDataSource()\u037e ds.setUrl(\"jdbc:xugu://127.0.0.1:5138/db\")\u037e ds.setUser(\"SYSDBA\")\u037e ds.setPassword(\"SYSDBA\")\u037e Properties pro = new Properties()\u037e pro.setProperty(\"return_rowid\", \"true\")\u037e pro.setProperty(\"auto_commit\", \"off\")\u037e ds.setPro(pro)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u767b\u5f55\u4e32\u3002url\u4e3a\u6570\u636e\u5e93\u767b\u5f55\u4e32 setUrl(String url)\uff1b //\u6307\u5b9a\u6570\u636e\u5e93\u670d\u52a1\u5668\u3002host\u4e3a\u670d\u52a1\u5668\u5730\u5740 setHostName(String host)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u540d\u3002dbName\u4e3a\u6570\u636e\u5e93\u540d setDatabaseName(String dbName)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u7aef\u53e3\u53f7\u3002port\u4e3a\u6570\u636e\u5e93\u7aef\u53e3\u53f7 setPort(int port)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u7528\u6237\u3002userName\u4e3a\u6570\u636e\u5e93\u767b\u5f55\u7528\u6237\u540d setUser(String userName)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u767b\u5f55\u5bc6\u7801\u3002passWord\u4e3a\u6570\u636e\u5e93\u767b\u5f55\u5bc6\u7801 setPassword(Stirng passWord)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u767b\u5f55\u53c2\u6570\u3002ds_pro\u4e3a\u6570\u636e\u5e93\u8fde\u63a5\u53c2\u6570 setPro(Properties ds_pro)\uff1b // \u901a\u8fc7\u6570\u636e\u6e90\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5 Connection conn = ds.getConnection()\u037e \u5728 com.xugu.pool.XgDataSource \u7c7b\u4e2d\u901a\u8fc7 setXX() \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u6e90\u7684\u8fde\u63a5\u5c5e\u6027\uff0c\u82e5\u672a\u6307\u5b9a\u5219\u4f7f\u7528\u9ed8\u8ba4\u5c5e\u6027\u503c\uff1a\u6570\u636e\u5e93\u670d\u52a1\u5668\u5730\u5740\u9ed8\u8ba4\u4e3a\u201clocalhost\u201d \uff0c\u8fde\u63a5\u6570\u636e\u5e93\u9ed8\u8ba4\u4e3a\u201cSYSTEM\u201d \uff0c\u8bbf\u95ee\u7aef\u53e3\u53f7\u9ed8\u8ba4\u4e3a\u201c5138\u201d \uff0c\u8bbf\u95ee\u7528\u6237\u540d\u9ed8\u8ba4\u4e3a\u201cGUEST\u201d \uff0c\u7528\u6237\u5bc6\u7801\u9ed8\u8ba4\u4e3a\u201cGUEST\u201d \u3002URL \u9ed8\u8ba4\u8fde\u63a5\u4e32\u4e3a\u201cjdbc:xugu://127.0.0.1:5138/SYSTEM?user=GUEST&password=GUEST&version=110\u201d\u3002\u6570\u636e\u6e90\u5efa\u7acb\u540e\uff0c\u53ef\u901a\u8fc7\u8c03\u7528 XgDataSource \u7c7b\u4e2d\u7684 getConnection() \u548c getConnection(String username,String password) \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u3002 5.2 \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u6c60 \u8fde\u63a5\u6c60\u6280\u672f\u7684\u6838\u5fc3\u601d\u60f3\u662f\uff1a\u8fde\u63a5\u590d\u7528\uff0c\u901a\u8fc7\u5efa\u7acb\u4e00\u4e2a\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u4ee5\u53ca\u4e00\u5957\u8fde\u63a5\u4f7f\u7528\u3001\u5206\u914d\u3001\u7ba1\u7406\u7b56\u7565\uff0c\u8be5\u8fde\u63a5\u6c60\u4e2d\u7684\u8fde\u63a5\u53ef\u4ee5\u5f97\u5230\u9ad8\u6548\u3001\u5b89\u5168\u7684\u590d\u7528\uff0c\u907f\u514d\u4e86\u6570\u636e\u5e93\u8fde\u63a5\u9891\u7e41\u5efa\u7acb\u3001\u5173\u95ed\u7684\u5f00\u9500\u3002 \u865a\u8c37 JDBC \u8fde\u63a5\u6c60\u5b9e\u73b0\u7c7b\u5bf9\u865a\u8c37\u6570\u636e\u5e93\u539f\u59cb\u8fde\u63a5\u8fdb\u884c\u4e86\u5c01\u88c5\uff0c\u4ece\u800c\u65b9\u4fbf\u4e86\u6570\u636e\u5e93\u5e94\u7528\u5bf9\u4e8e\u8fde\u63a5\u7684\u4f7f\u7528\uff08\u7279\u522b\u662f\u5bf9\u4e8e\u4e8b\u52a1\u5904\u7406\uff09\uff0c\u63d0\u9ad8\u4e86\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u6548\u7387\uff0c\u4e5f\u6b63\u662f\u56e0\u4e3a\u8fd9\u4e2a\u5c01\u88c5\u5c42\u7684\u5b58\u5728\uff0c\u9694\u79bb\u4e86\u5e94\u7528\u7684\u672c\u8eab\u7684\u5904\u7406\u903b\u8f91\u548c\u5177\u4f53\u6570\u636e\u5e93\u8bbf\u95ee\u903b\u8f91\uff0c\u4f7f\u5e94\u7528\u672c\u8eab\u7684\u590d\u7528\u6210\u4e3a\u53ef\u80fd\u3002\u8fde\u63a5\u6c60\u4e3b\u8981\u7531\u4e09\u90e8\u5206\u7ec4\u6210\uff1a\u8fde\u63a5\u6c60\u7684\u5efa\u7acb\u3001\u8fde\u63a5\u6c60\u4e2d\u8fde\u63a5\u7684\u4f7f\u7528\u7ba1\u7406\u3001\u8fde\u63a5\u6c60\u7684\u5173\u95ed\u3002 \u865a\u8c37 JDBC \u8fde\u63a5\u6c60\u7684\u57fa\u672c\u601d\u60f3\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u5efa\u7acb\u4e00\u4e2a\u201c\u7f13\u51b2\u6c60\u201d\u3002\u9884\u5148\u5728\u201c\u7f13\u51b2\u6c60\u201d\u4e2d\u653e\u5165\u4e00\u5b9a\u6570\u91cf\u7684\u8fde\u63a5\uff0c\u5f53\u9700\u8981\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65f6\uff0c\u53ea\u9700\u4ece\u201c\u7f13\u51b2\u6c60\u201d\u4e2d\u53d6\u51fa\u4e00\u4e2a\uff0c\u4f7f\u7528\u5b8c\u6bd5\u4e4b\u540e\u518d\u653e\u56de\u53bb\u3002\u901a\u8fc7\u8bbe\u5b9a\u8fde\u63a5\u6c60\u6700\u5927\u8fde\u63a5\u6570\u6765\u9632\u6b62\u7cfb\u7edf\u65e0\u5c3d\u7684\u4e0e\u6570\u636e\u5e93\u8fde\u63a5\u3002\u4ea6\u53ef\u901a\u8fc7\u8fde\u63a5\u6c60\u7684\u7ba1\u7406\u673a\u5236\u76d1\u89c6\u6570\u636e\u5e93\u7684\u8fde\u63a5\u6570\u91cf\u3001\u4f7f\u7528\u60c5\u51b5\uff0c\u4e3a\u7cfb\u7edf\u5f00\u53d1\u3001\u6d4b\u8bd5\u53ca\u6027\u80fd\u8c03\u6574\u63d0\u4f9b\u4f9d\u636e\u3002 \u5f53\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u5b8c\u6570\u636e\u5e93\u8fde\u63a5\u8c03\u7528\u8fde\u63a5\u5173\u95ed\u65b9\u6cd5\u65f6\uff0c\u8be5\u8fde\u63a5\u5e76\u672a\u9500\u6bc1\uff0c\u800c\u662f\u88ab\u5f52\u8fd8\u7ed9\u8fde\u63a5\u6c60\u7b49\u5f85\u4e0b\u6b21\u7ee7\u7eed\u8c03\u7528\u3002 {.is-info} \u865a\u8c37 JDBC \u5b9e\u73b0\u8fde\u63a5\u6c60\u670d\u52a1\u6240\u63d0\u4f9b\u7684\u63a5\u53e3\u7c7b\u5982\u4e0b\uff1a - XgDataSource \u5b9e\u73b0 javax.sql.DataSource \u63a5\u53e3\uff1b - XgPooledConnection \u5b9e\u73b0 javax.sql.PooledConnection \u63a5\u53e3\uff1b - XgConnectionPoolDataSource \u5b9e\u73b0 javax.sql.ConnectionPoolDataSource \u63a5\u53e3\uff1b - XgConnectionEventListener \u5b9e\u73b0 javax.sql.ConnectionEventListener \u63a5\u53e3\uff1b - XgConnectionEvent \u7ee7\u627f\u81ea javax.sql.ConnectionEvent \u7c7b\u3002 \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u4e2d\u7684\u8fde\u63a5\u5747\u662f\u901a\u8fc7\u6570\u636e\u6e90\u5efa\u7acb\u7684\uff0c\u6545\u800c XgConnectionPoolDataSource \u7ee7\u627f\u4e86 com.xugu.pool.XgDataSource \u7c7b\u3002\u7528\u6237\u4ea6\u53ef\u901a\u8fc7 XgConnectionPoolDataSource \u5bf9\u8c61\u8bbe\u7f6e\u6570\u636e\u6e90\u5c5e\u6027\u548c\u8fde\u63a5\u6c60\u5c5e\u6027\uff1a //\u6700\u5c0f\u8fde\u63a5\u6570 setMinIdle(int min) //\u6700\u5927\u8fde\u63a5\u6570 setMaxActive(int max) //\u767b\u5f55\u7a7a\u95f2\u65f6\u95f4 setLoginTimeout(int time) //\u6700\u5927\u7b49\u5f85\u8fde\u63a5\u8d85\u65f6 setMaxWaitTime(long waitTime) \u5176\u4e2d\uff1asetLoginTimeout() \u548c setMaxWaitTime() \u65b9\u6cd5\u4e2d\u53c2\u6570\u5355\u4f4d\u4e3a\u6beb\u79d2\uff0c\u5176\u4ed6\u65b9\u6cd5\u4e2d\u53c2\u6570\u5355\u4f4d\u4e3a\u79d2\u3002 \u793a\u4f8b\uff1a\u521b\u5efa\u4e00\u4e2a\u865a\u8c37 JDBC \u8fde\u63a5\u6c60\uff0c\u5e76\u901a\u8fc7\u8fde\u63a5\u6c60\u83b7\u53d6\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u3002 XgConnectionPoolDataSource CPDSource = new XgConnectionPoolDataSource()\u037e CPDSource.setHostName(\u201clocalhost\u201d)\u037e CPDSource.setPort(5138)\u037e CPDSource.setDatabaseName(\u201cxuguNew\u201d)\u037e CPDSource.setUser(\u201cSYSDBA\u201d)\u037e CPDSource.setPassword(\u201cSYSDBA\u201d)\u037e CPDSource.setUrl(\"jdbc:xugu://localhost:5138/xuguNew)\u037e CPDSource.setMaxActive(50)\u037e CPDSource.setMinIdle(5)\u037e CPDSource.setLoginTimeout(3000)\u037e CPDSource.setMaxWaitTime(3000)\u037e XgPooledConnection Pconn = (XgPooledConnection)CPDSource.getPooledConnection()\u037e Connection conn = Pconn.getConnection()\u037e \u516d. \u865a\u8c37\u6570\u636e\u5e93\u7684JDBC\u4ea4\u4e92\u6d41\u7a0b \u4f7f\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u5b9e\u73b0\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u4ea4\u4e92\u7684\u4e00\u822c\u4f7f\u7528\u6b65\u9aa4\uff1a\u5bfc\u5165\u865a\u8c37 JDBC \u9a71\u52a8\u5305 \u2192 \u52a0\u8f7d\u865a\u8c37 JDBC \u9a71\u52a8\u7a0b\u5e8f \u2192 \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5 Connection \u2192 \u521b\u5efa\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61 Statement \u2192 \u6267\u884c SQL \u8bed\u53e5 \u2192 \u5904\u7406\u6267\u884c\u7ed3\u679c ResultSet \u2192 \u91ca\u653e\u8d44\u6e90\u3002 - \u7b2c 1 \u6b65\uff1a\u5bfc\u5165\u865a\u8c37 JDBC \u9a71\u52a8\u5305 - \u7b2c 2 \u6b65\uff1a\u6ce8\u518a\u9a71\u52a8 (\u4ec5\u505a\u4e00\u6b21) - \u7b2c 3 \u6b65\uff1a\u5efa\u7acb\u8fde\u63a5 (Connection) - \u7b2c 4 \u6b65\uff1a\u521b\u5efa\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61 (Statement) - \u7b2c 5 \u6b65\uff1a\u6267\u884c SQL \u8bed\u53e5 - \u7b2c 6 \u6b65\uff1a\u5904\u7406\u6267\u884c\u7ed3\u679c (ResultSet) - \u7b2c 7 \u6b65\uff1a\u91ca\u653e\u8d44\u6e90 6.1 \u5bfc\u5165\u865a\u8c37JDBC\u9a71\u52a8\u5305 \u4e0b\u8f7d\u865a\u8c37\u6570\u636e\u5e93\u4e13\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u5305 (cloudjdbc-*.*.*.jar)\uff0c\u5e76\u5bfc\u5165\u5230\u5e94\u7528\u7a0b\u5e8f\u4e2d\u3002 6.2 \u52a0\u8f7d\u865a\u8c37JDBC\u9a71\u52a8 \u865a\u8c37 JDBC \u9a71\u52a8\u7a0b\u5e8f\u4e2d Driver \u63a5\u53e3\u5b9e\u73b0\u7c7b\u4e3a com.xugu.cloudjdbc.Driver\u3002\u52a0\u8f7d\u9a71\u52a8\u65b9\u5f0f\u4e3a DriverManager.registerDriver(new com.xugu.cloudjdbc.Driver()) \u6216Class.forName(\u201ccom.xugu.cloudjdbc.Driver\u201d)\u3002 6.3 \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5 \u5efa\u7acb\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u7684\u65b9\u5f0f\u6709\u591a\u79cd\uff0c\u53ef\u6839\u636e\u5e94\u7528\u7a0b\u5e8f\u5b9e\u9645\u4f7f\u7528\u573a\u666f\u9009\u62e9\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65b9\u5f0f\u3002\u5e38\u89c1\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65b9\u5f0f\u5982\u4e0b\uff1a - \u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u4f7f\u7528 DriverManager \u83b7\u5f97\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\uff1b - \u4f7f\u7528\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u6e90/\u8fde\u63a5\u6c60\u7684\u65b9\u5f0f\u83b7\u53d6\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\uff1b - \u4f7f\u7528\u7b2c\u4e09\u65b9\u901a\u7528\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u65b9\u5f0f\u83b7\u53d6\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u3002 \u5982\uff1adruid\u3001c3p0\u3001dbcp\u3001JNDI \u7b49\u3002 6.3.1 \u6253\u5f00\u6570\u636e\u5e93\u8fde\u63a5 \u6253\u5f00\u6570\u636e\u5e93\u8fde\u63a5\u5373\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u5bf9\u8c61 Connection \u7c7b\u3002 \u5982\uff1aDriverManager \u901a\u8fc7 getConnection() \u65b9\u6cd5\u83b7\u53d6 Connection \u7c7b\u5bf9\u8c61\u3002DriverManager \u7684 getConnection() \u65b9\u6cd5\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\u7684\u65b9\u5f0f\u4ea6\u6709\u591a\u79cd\u3002\u4ee5\u4e0b\u4e3a\u5e38\u89c1\u65b9\u5f0f\uff1a - getConnection(String url) \u53c2\u6570\u8bf4\u660e\uff1a - url\uff1a\u8bbf\u95ee\u6570\u636e\u5e93\u7684 URL \u8def\u5f84\u3002 \u793a\u4f8b\uff1a \u4e0b\u9762\u7684\u4ee3\u7801\u5229\u7528 getConnection \u65b9\u6cd5\u521b\u5efa\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u3002 ``` public Connection getConnection(){ Connection con=null\u037e try{ //\u6ce8\u518c\u6570\u636e\u5e93\u9a71\u52a8 Class.forName(\"com.xugu.cloudjdbc.Driver\")\u037e //\u5b9a\u4e49\u8fde\u63a5\u6570\u636e\u5e93\u7684url String url = \"jdbc:xugu://localhost:5138/db?user=user1\uff06password=pwd\"\u037e //\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5 con = DriverManager.getConnection(url)\u037e System.out.println(\"\u6570\u636e\u5e93\u8fde\u63a5\u6210\u529f\uff01\")\u037e }catch(Exception e){ e.printStackTrace()\u037e } //\u8fd4\u56de\u4e00\u4e2a\u8fde\u63a5 return con\u037e } ``` getConnection(String url,String user,String password) \u53c2\u6570\u8bf4\u660e\uff1a url\uff1a\u8bbf\u95ee\u6570\u636e\u5e93\u7684 URL \u8def\u5f84\u3002 user\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u7528\u6237\u540d\u3002 password\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u7528\u6237\u5bc6\u7801\u3002 \u793a\u4f8b\uff1a \u4e0b\u9762\u7684\u4ee3\u7801\u5229\u7528 getConnection \u65b9\u6cd5\u521b\u5efa\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u3002 private Connection con; private String user = \"user1\"; //\u5b9a\u4e49\u8fde\u63a5\u6570\u636e\u5e93\u7684\u7528\u6237\u540d private String password = \"pwd\"; //\u5b9a\u4e49\u8fde\u63a5\u6570\u636e\u5e93\u7684\u5bc6\u7801 private String className = \"com.xugu.cloudjdbc.Driver\";//\u5b9a\u4e49\u865a\u8c37JDBC\u9a71\u52a8 private String url = \"jdbc:xugu://localhost:5138/db\"; /\\*\\*\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\\*/ public Connection getConnection(){ try{ Class.forName(className);//\u52a0\u8f7d\u6570\u636e\u5e93\u9a71\u52a8 System.out.println(\"\u6570\u636e\u5e93\u9a71\u52a8\u52a0\u8f7d\u6210\u529f\uff01\"); con = DriverManager.getConnection(url,user,password); //\u8fde\u63a5\u6570\u636e\u5e93 System.out.println(\"\u6210\u529f\u5730\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\uff01\"); }catch(Exception e){ System.out.println(\"\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\u5931\u8d25\uff01\"); con = null; e.printStackTrace(); } finally { If(conn != null){ //\u91ca\u653e\u8fde\u63a5\u8d44\u6e90 conn.close(); } } return con; } getConnection(String url,Properties info) \u53c2\u6570\u8bf4\u660e\uff1a url\uff1a\u8bbf\u95ee\u6570\u636e\u5e93\u7684 URL \u8def\u5f84\u3002 info\uff1a\u4e00\u4e2a\u6301\u4e45\u7684\u5c5e\u6027\u96c6\u5bf9\u8c61\uff0c\u5305\u62ec user \u548c password \u7b49\u5c5e\u6027\u3002 \u793a\u4f8b\uff1a \u4e0b\u9762\u7684\u4ee3\u7801\u5229\u7528 getConnection \u65b9\u6cd5\u521b\u5efa\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u3002 public Connection getConnection(){ Connection con = null; //\u5b9a\u4e49\u6570\u636e\u5e93\u8fde\u63a5\u5bf9\u8c61 Properties info = new Properties(); //\u5b9a\u4e49Properties\u5bf9\u8c61 info.setProperty(\"user\",\"user1\"); //\u8bbe\u7f6eProperties\u5bf9\u8c61\u5c5e\u6027 info.setProperty(\"password\",\"pwd\"); try{ //\u6ce8\u518c\u6570\u636e\u5e93\u9a71\u52a8 Class.forName(\"com.xugu.cloudjdbc.Driver\"); //test\u4e3a\u6570\u636e\u5e93\u540d\u79f0 String url = \"jdbc:xugu://localhost:5138/db\"; //\u83b7\u53d6\u8fde\u63a5\u6570\u636e\u5e93\u7684Connection\u5bf9\u8c61 con = DriverManager.getConnection(url,info); System.out.println(\"\u6570\u636e\u5e93\u8fde\u63a5\u6210\u529f\uff01\"); }catch(Exception e){ e.printStackTrace(); } //\u8fd4\u56de\u4e00\u4e2a\u8fde\u63a5 return con; } 6.3.2 \u8fde\u63a5\u4e8b\u52a1\u7ba1\u7406 \u6570\u636e\u5e93\u4e8b\u52a1 (transaction) \u662f\u8bbf\u95ee\u5e76\u53ef\u80fd\u64cd\u4f5c\u5404\u79cd\u6570\u636e\u9879\u7684\u4e00\u4e2a\u6570\u636e\u5e93\u64cd\u4f5c\u5e8f\u5217\uff0c\u8fd9\u4e9b\u64cd\u4f5c\u8981\u4e48\u5168\u90e8\u6267\u884c, \u8981\u4e48\u5168\u90e8\u4e0d\u6267\u884c\uff0c\u662f\u4e00\u4e2a\u4e0d\u53ef\u5206\u5272\u7684\u5de5\u4f5c\u5355\u4f4d\u3002\u4e8b\u52a1\u7531\u4e8b\u52a1\u5f00\u59cb\u5230\u4e8b\u52a1\u7ed3\u675f\u4e4b\u95f4\u6267\u884c\u7684\u5168\u90e8\u6570\u636e\u5e93\u64cd\u4f5c\u7ec4\u6210\u3002 \u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\uff0c\u5373\u5f53\u4e00\u6761 SQL \u8bed\u53e5\u6267\u884c\u5b8c\u6210\u540e\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u5c06\u81ea\u52a8\u63d0\u4ea4\u8be5\u8bed\u53e5\u6240\u5728\u4e8b\u52a1\u3002\u5728\u865a\u8c37 JDBC \u9a71\u52a8\u4e2d\u63a7\u5236\u4e8b\u52a1\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a - \u901a\u8fc7\u6570\u636e\u5e93\u8fde\u63a5 URL \u4e32\u7684 auto_commit \u5c5e\u6027\uff0c\u63a7\u5236\u4e8b\u52a1\u7684\u5f00\u542f\u4e0e\u5173\u95ed\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b auto_commit \u5c5e\u6027\u4e3a on\uff0c\u5373\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u3002 - \u901a\u8fc7 Connection \u7c7b\u7684 setAutoCommit(boolean commit) \u65b9\u6cd5\u63a7\u5236\u4e8b\u52a1\u7684\u5f00\u542f\u4e0e\u5173\u95ed\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b commit \u5c5e\u6027\u4e3a TRUE\uff0c\u5373\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u3002 \u5728\u7981\u7528\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u4e0b\uff0c\u4f7f\u7528 Connection \u7c7b\u7684 commit() \u65b9\u6cd5\u63d0\u4ea4 SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u505a\u7684\u66f4\u6539\uff0c\u800c Connection \u7c7b\u7684 rollback() \u65b9\u6cd5\u5c06\u56de\u6eda SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u7684\u66f4\u6539\uff0c\u4e0a\u8ff0\u4e24\u79cd\u65b9\u6cd5\u6267\u884c\u5b8c\u6210\u540e\u5747\u5c06\u91ca\u653e\u4e8b\u52a1\u6301\u6709\u7684\u5168\u90e8\u9501\u8d44\u6e90\u3002 \u4e8b\u52a1\u4ec5\u5bf9\u6570\u636e\u5e93 DML \u64cd\u4f5c\u6709\u6548\u3002 {.is-info} \u4ee5\u4e0b\u4e3a\u4f7f\u7528 setAutoCommit() \u65b9\u6cd5\u63a7\u5236\u4e8b\u52a1\u63d0\u4ea4\u7684\u793a\u4f8b\u4ee3\u7801\uff1a //\u8bbe\u7f6e\u4e8b\u52a1\u4e3a\u975e\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f conn.setAutoCommit(false)\u037e //\u521b\u5efa\u6570\u636e\u5e93Statement\u5bf9\u8c61 Statement stm = conn.createStatement()\u037e //\u6570\u636e\u5e93\u4e8b\u52a1\u6267\u884cSQL\u8bed\u53e5 String sql = \"insert into test (comp_id,comp_name) values(1,'comp')\"\u037e //\u6267\u884c\u9759\u6001SQL\u8bed\u53e5 stm.execute(sql)\u037e //\u6570\u636e\u5e93\u9884\u5904\u7406SQL\u8bed\u53e5 PreparedStatement pstm = conn. prepareStatement(\u201cupdate test set id=? where comp_name=?\u201d) //\u9884\u5904\u7406SQL\u8bed\u53e5\u7b2c\u4e00\u4e2a\u53c2\u6570\u8d4b\u503c pstm.setInt(1,15)\u037e //\u9884\u5904\u7406SQL\u8bed\u53e5\u7b2c\u4e8c\u4e2a\u53c2\u6570\u8d4b\u503c pstm.setString(2,'DBMS')\u037e //\u6267\u884c\u9884\u5904\u7406SQL\u8bed\u53e5 pstm.execute()\u037e //\u63d0\u4ea4\u4e8b\u52a1 conn.commit()\u037e //\u5220\u9664\u8868\u4e2d\u6307\u5b9a\u884c\u6570\u636e stm.execute(\u201cdelete from test where id=15\u201d)\u037e //\u4e8b\u52a1\u56de\u6eda\u65b9\u6cd5 conn.rollback()\u037e \u4e0a\u9762\u4ee3\u7801\u4e2d\u6267\u884c\u63d0\u4ea4\u4e8b\u52a1\u64cd\u4f5c\uff0c\u6267\u884c\u9759\u6001 SQL \u8bed\u53e5\u4e0e\u6267\u884c\u9884\u5904\u7406 SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u7684\u66f4\u6539\u5c06\u6c38\u4e45\u751f\u6548\uff1b\u800c\u540e\u6267\u884c\u7684\u5220\u9664\u8868\u4e2d\u6307\u5b9a\u884c\u6570\u636e\u64cd\u4f5c\uff0c\u56e0\u5176\u540e\u8c03\u7528\u7684 rollback() \u65b9\u6cd5\uff0cdelete \u547d\u4ee4\u5bf9\u6570\u636e\u5e93\u7684\u6570\u636e\u66f4\u6539\u5c06\u88ab\u56de\u6eda\u6389\uff0c\u6545\u800c\u5bf9\u6570\u636e\u5e93\u7684\u5220\u9664\u64cd\u4f5c\u4e0d\u4f1a\u751f\u6548\u3002 6.3.3 \u8fde\u63a5\u4e8b\u52a1\u63a7\u5236\uff0cSavepoint\u63a5\u53e3 JDBC \u89c4\u8303 3.0 \u4e2d\u4e3a\u4e86\u589e\u52a0\u5bf9\u4e8b\u52a1\u7684\u63a7\u5236\uff0c\u65b0\u589e Savepoint \u63a5\u53e3\uff0c\u5176\u4ee3\u8868\u4e8b\u52a1\u4e2d\u7684\u4e00\u4e2a\u903b\u8f91\u4e8b\u52a1\u70b9\u3002\u5728\u975e\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u4e0b\uff0c\u4e00\u4e2a\u4e8b\u52a1\u4e2d\u53ef\u4ee5\u8bbe\u7f6e\u591a\u4e2a Savepoint\uff0c\u5728\u4ee3\u7801\u4e2d\u8fdb\u884c\u4e8b\u52a1\u56de\u6eda\u64cd\u4f5c\u65f6\uff0c\u53ef\u4ee5\u6307\u5b9a\u4e8b\u52a1\u56de\u6eda\u5230\u6307\u5b9a Savepoint \u4f4d\u7f6e\uff0c\u6307\u5b9a\u56de\u6eda\u4f4d\u7f6e\u524d\u7684\u4e8b\u52a1\u64cd\u4f5c\u4ecd\u7136\u4fdd\u7559\u3002\u6b64\u63a5\u53e3\u5927\u5927\u63d0\u9ad8\u4e86\u4e8b\u52a1\u5904\u7406\u7684\u7c92\u5ea6\uff0c\u65b9\u4fbf\u5e94\u7528\u7a0b\u5e8f\u63a7\u5236\u4e8b\u52a1\u5904\u7406\u903b\u8f91\u3002 \u793a\u4f8b\uff1a\u8fde\u63a5\u4e8b\u52a1\u63a7\u5236\u63a5\u53e3 Savepoint \u4f7f\u7528 //\u8bbe\u7f6e\u975e\u81ea\u52a8\u63d0\u4ea4 conn.setAutoCommit(false); //\u521b\u5efaStatement\u5bf9\u8c61 Statement stm = conn.createStatement(); //\u6267\u884cSQL\u547d\u4ee4 stm.execute(sql1); stm.execute(sql2); //\u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\u70b9save1 java.sql.Savepoint save1 =conn.setSavepoint(\"save_1\"); stm.execute(sql3); //\u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\u70b9save2 java.sql.Savepoint save2 =conn.setSavepoint(\"save_2\"); stm.execute(sql4); //\u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\u70b9save3 java.sql.Savepoint save3 =conn.setSavepoint(\"save_3\"); stm.execute(sql5); //\u56de\u6eda\u4e8b\u52a1\u5230\u56de\u6eda\u70b9save3 conn.rollback(save3); conn.commit(); \u4ee5\u4e0a\u4ee3\u7801\u6bb5\u4e2d\uff0c\u4e8b\u52a1\u6267\u884c\u8bed\u53e5 sql5 \u5c06\u88ab\u56de\u6eda\u6389\u3002 6.4 \u521b\u5efa\u6267\u884cSQL\u8bed\u53e5\u5bf9\u8c61 \u5728\u6570\u636e\u5e93\u6807\u51c6\u4e2d\uff0c\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61\u5206\u4e3a\u4e09\u7c7b\uff1a\u6267\u884c\u9759\u6001 SQL \u8bed\u53e5\u7684 Statement \u5bf9\u8c61\u3001\u6267\u884c\u9884\u7f16\u8bd1 SQL \u8bed\u53e5\u7684 PreparedStatement \u5bf9\u8c61\u4ee5\u53ca\u6267\u884c\u6570\u636e\u5e93\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\u7684 CallableStatement \u5bf9\u8c61\u3002 6.4.1 \u6267\u884cSQL\u5bf9\u8c61Statement Statement \u5bf9\u8c61\u7528\u4e8e\u6267\u884c\u9759\u6001 SQL \u8bed\u53e5\u548c\u83b7\u5f97 SQL \u4ea7\u751f\u7684\u7ed3\u679c\u3002\u5728\u865a\u8c37 JDBC \u9a71\u52a8\u4e2d\uff0c\u865a\u8c37\u6570\u636e\u5e93 DDL \u64cd\u4f5c\u5747\u901a\u8fc7 Statement \u5bf9\u8c61\u6765\u6267\u884c\u3002 Statement \u5bf9\u8c61\u901a\u8fc7 Connection \u7c7b\u7684 createStatement() \u65b9\u6cd5\u521b\u5efa\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a //\u521b\u5efa\u6267\u884cSQL\u8bed\u53e5\u5bf9\u8c61Statement Statement stm = conn.createStatement()\u037e 6.4.2 \u6267\u884cSQL\u5bf9\u8c61PreparedStatement PreparedStatement \u5bf9\u8c61\u4f7f\u7528\u65f6\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u5bf9\u6267\u884c SQL \u8bed\u53e5\u8fdb\u884c\u9884\u7f16\u8bd1\u5904\u7406\uff0c\u9884\u7f16\u8bd1 SQL \u8bed\u53e5\u5c06\u5728\u672a\u6765\u7684\u4f7f\u7528\u4e2d\u88ab\u91cd\u7528\u3002\u4e0e Statement \u5bf9\u8c61\u76f8\u6bd4\uff0cPreparedStatement \u5bf9\u8c61\u64cd\u4f5c\u591a\u6761 SQL \u8bed\u53e5\u7684\u6548\u7387\u66f4\u9ad8\u3002 \u7ecf\u8fc7\u9884\u7f16\u8bd1\u5e76\u5b58\u50a8\u5728 PreparedStatement \u5bf9\u8c61\u4e2d\u7684 SQL \u8bed\u53e5\uff0c\u901a\u8fc7 Connection \u7c7b\u7684 prepareStatement() \u65b9\u6cd5\u521b\u5efa\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a //\u521b\u5efa\u6267\u884c\u9884\u7f16\u8bd1SQL\u8bed\u53e5\u5bf9\u8c61PreparedStatement PreparedStatement preStatement = conn.prepareStatement(\u201c\u9884\u7f16\u8bd1SQL\u8bed\u53e5\u201d); \u9884\u5904\u7406 PreparedStatement \u5bf9\u8c61\u76f8\u5bf9\u4e8e\u9759\u6001 Statement \u5bf9\u8c61\u7684\u4f18\u52bf\uff1a - PreparedStatement \u53ef\u4ee5\u52a8\u6001\u4f20\u5165\u53c2\u6570\u503c\uff1b - PreparedStatement \u6bd4 Statement \u66f4\u5feb\uff1b PreparedStatement \u4f1a\u5c06 SQL \u8bed\u53e5\u9884\u7f16\u8bd1\u5728\u6570\u636e\u5e93\u7cfb\u7edf\u4e2d\uff0c\u6267\u884c\u8ba1\u5212\u540c\u6837\u4f1a\u88ab\u7f13\u5b58\u8d77\u6765\uff0c\u5b83\u5141\u8bb8\u6570\u636e\u5e93\u505a\u53c2\u6570\u5316\u67e5\u8be2\u3002\u4f7f\u7528\u9884\u5904\u7406\u8bed\u53e5\u6bd4\u666e\u901a\u7684 Statement \u67e5\u8be2\u66f4\u5feb\uff0c\u56e0\u505a\u7684\u5de5\u4f5c\u66f4\u5c11 (\u6570\u636e\u5e93\u5bf9 SQL \u8bed\u53e5\u7684\u5206\u6790\u3001\u7f16\u8bd1\u3001\u4f18\u5316\u5df2\u7ecf\u5728\u7b2c\u4e00\u6b21\u67e5\u8be2\u524d\u5b8c\u6210\u4e86)\u037e - PreparedStatement \u53ef\u4ee5\u9632\u6b62 SQL \u6ce8\u5165\u5f0f\u653b\u51fb\u3002 PreparedStatement \u5728\u4f7f\u7528\u53c2\u6570\u5316\u67e5\u8be2\u7684\u60c5\u51b5\u4e0b\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u4e0d\u4f1a\u5c06\u53c2\u6570\u7684\u5185\u5bb9\u89c6\u4e3a SQL \u6307\u4ee4\u7684\u4e00\u90e8\u5206\u6765\u5904\u7406\uff0c\u800c\u662f\u5728\u6570\u636e\u5e93\u5b8c\u6210 SQL \u6307\u4ee4\u7684\u7f16\u8bd1\u540e\uff0c\u624d\u5957\u7528\u53c2\u6570\u8fd0\u884c\uff0c\u56e0\u6b64\u5c31\u7b97\u53c2\u6570\u4e2d\u542b\u6709\u7834\u574f\u6027\u7684\u6307\u4ee4\uff0c\u4e5f\u4e0d\u4f1a\u88ab\u6570\u636e\u5e93\u6240\u8fd0\u884c\u3002 6.4.3 \u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u5bf9\u8c61CallableStatement CallableStatement \u5bf9\u8c61\u5b9e\u73b0\u4e86\u4ece Java \u5e94\u7528\u7a0b\u5e8f\u4e2d\u8c03\u7528\u6570\u636e\u5e93\u5b58\u50a8\u8fc7\u7a0b\u3002\u4f46\u6b64\u8c03\u7528\u8fc7\u7a0b\u5e76\u4e0d\u5305\u542b\u5b58\u50a8\u8fc7\u7a0b\u672c\u8eab\uff0c\u56e0\u5b58\u50a8\u8fc7\u7a0b\u5b58\u50a8\u5728\u6570\u636e\u5e93\u4e2d\u3002 CallableStatement \u5bf9\u8c61\u4e3a\u6240\u6709\u7684\u6570\u636e\u5e93\u63d0\u4f9b\u4e86\u4e00\u79cd\u4ee5\u6807\u51c6\u5f62\u5f0f\u8c03\u7528\u5b58\u50a8\u8fc7\u7a0b\u7684\u65b9\u6cd5\uff0c\u901a\u8fc7 Connection \u7c7b\u7684 prepareCall() \u65b9\u6cd5\u521b\u5efa\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a //\u521b\u5efa\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u5bf9\u8c61CallableStatement CallableStatement cstmt= conn.prepareCall(\u201c{call \u5b58\u50a8\u8fc7\u7a0b\u540d(\u53c2\u6570\u8868\u5217)}\u201d); 6.4.4 \u6267\u884cSQL\u8bed\u53e5\u5bf9\u8c61\u5c5e\u6027\u6269\u5145 \u5728\u521b\u5efa\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61\u65f6\uff0c\u53ef\u901a\u8fc7\u6784\u9020\u65b9\u6cd5\u7684\u4e0d\u540c\u53c2\u6570\u8bbe\u7f6e ResultSet \u5bf9\u8c61\u5c5e\u6027\uff0c\u5c5e\u6027\u5305\u62ec\u7ed3\u679c\u7c7b\u578b ResultSetType\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b ResultSetConcurrency\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b ResultSetHoldability\u3002 ResultSetType \u9ed8\u8ba4\u4e3a ResultSet.TYPE_SCROLL_INSENSITIVE\uff1a\u652f\u6301\u7ed3\u679c\u96c6 backforward\u3001last\u3001first \u7b49\u64cd\u4f5c\uff0c\u5bf9\u6570\u636e\u5e93\u4e2d\u5176\u5b83 session \u8fdb\u884c\u7684\u6570\u636e\u66f4\u6539\u4e0d\u654f\u611f\uff1b ResultSetConcurrency \u9ed8\u8ba4\u4e3a ResultSet.CONCUR_READ_ONLY: \u4e0d\u53ef\u66f4\u65b0\u7ed3\u679c\u96c6\uff1b\u8be5\u5c5e\u6027\u4ea6\u53ef\u66f4\u6539\u4e3a ResultSet.CONCUR_UPDATABLE\uff0c\u652f\u6301\u5728 ResultSet \u4e2d\u5bf9\u8bb0\u5f55\u8fdb\u884c\u4fee\u6539\uff0c\u4fee\u6539\u540e\u8bb0\u5f55\u66f4\u65b0\u5230\u6570\u636e\u5e93\uff0c\u4fee\u6539\u64cd\u4f5c\u53ef\u5305\u542b\u63d2\u5165\u3001\u5220\u9664\u6216\u66f4\u65b0\uff1b ResultSetHoldability \u9ed8\u8ba4\u4e3a ResultSet.HOLD_CURSORS_OVER_COMMIT: \u5728\u4e8b\u52a1 commit \u6216 rollback \u540e\uff0cResultSet \u4ecd\u7136\u53ef\u7528\u3002 Connection \u7c7b\u521b\u5efa Statement \u5bf9\u8c61\u6784\u9020\u65b9\u6cd5\uff1a //Statement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 createStatement(int resultSetType,int resultSetConcurrency)\uff1b //Statement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 createStatement(int resultSetType,int resultSetConcurrency, int resultSetHoldability)\uff1b Connection \u7c7b\u521b\u5efa PreparedStatement \u5bf9\u8c61\u6784\u9020\u65b9\u6cd5\uff1a //PreparedStatement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareStatement(String sql, int resultSetType,int resultSetConcurrency) //PrepareStatment\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareStatement(String sql, int resultSetType,int resultSetConcurrency, int resultSetHoldability) Connection \u7c7b\u521b\u5efa CallableStatement \u5bf9\u8c61\u6784\u9020\u65b9\u6cd5\uff1a //CallableStatement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareCall(String sql, int resultSetType,int resultSetConcurrency) //CallableStatement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareCall(String sql, int resultSetType,int resultSetConcurrency, int resultSetHoldability) 6.5 \u6267\u884cSQL\u8bed\u53e5 Statement \u5bf9\u8c61\u5b9a\u4e49\u4e86\u591a\u79cd\u6267\u884c SQL \u8bed\u53e5\u7684\u65b9\u6cd5\uff0c\u7528\u6765\u5904\u7406\u8fd4\u56de\u4e0d\u540c\u7ed3\u679c\u7684 SQL \u547d\u4ee4\uff1a - execute(String sql)\uff1a\u6267\u884c\u53ef\u4ee5\u8fd4\u56de\u591a\u4e2a\u7ed3\u679c\u96c6\u7684 SQL \u8bed\u53e5\u8fd4\u56de\u7c7b\u578b\u4e3a boolean\uff0c\u5982\u679c\u8fd4\u56de\u7684\u662f\u66f4\u65b0\u7684\u6570\u76ee\uff0c\u5219\u8fd4\u56de false\uff1b\u5982\u679c\u8fd4\u56de\u7684\u662f ResultSet \u5bf9\u8c61\uff0c\u5219\u8fd4\u56detrue\u3002 - executeQuery(String sql)\uff1a\u6267\u884c\u8fd4\u56de\u5355\u4e2a ResultSet \u7684 SQL \u8bed\u53e5\u8fd4\u56de\u7c7b\u578b\u4e3a ResultSet \u5bf9\u8c61\u3002 - executeUpdate()\uff1a\u6267\u884c SQL INSERT\u3001UPDATE \u6216 DELETE \u8bed\u53e5\u8fd4\u56de\u503c\u4e3a int \u578b\uff0c\u6570\u636e\u5e93\u53d7\u5f71\u54cd\u7684\u884c\u8ba1\u6570\u3002 - \u6279\u5904\u7406\u65b9\u6cd5\uff1a\u6279\u91cf\u6267\u884c SQL \u8bed\u53e5 clearBatch()\uff1a\u6e05\u7a7a\u5386\u53f2 batch \u547d\u4ee4\uff1b addBatch(String sql)\uff1a\u6dfb\u52a0\u8981\u6267\u884c\u7684 sql\uff1b executeBatch()\uff1a\u6279\u91cf\u6267\u884c sql\u3002 PreparedStatement \u7ee7\u627f\u81ea Statement\uff0c\u5b9a\u4e49\u4e86\u5927\u91cf\u7684 setter \u65b9\u6cd5\u7528\u4e8e\u8bbe\u7f6e\u52a8\u6001 sql\u7684\u53c2\u6570\uff0c\u56e0\u6b64 PreparedStatement \u652f\u6301\u52a8\u6001\u4f20\u53c2\uff1b\u53e6\u5916 PreparedStatement \u5185\u90e8\u5b58\u50a8\u4e86\u89e3\u6790\u7684 sql\uff0c\u53ef\u4ee5\u591a\u6b21\u6267\u884c\u800c\u65e0\u9700\u91cd\u590d\u89e3\u6790\u3002PreparedStatement \u7ee7\u627f\u81ea Statement\uff0cCallableStatement \u7ee7\u627f\u81ea PreparedStatement\uff0c\u6545\u800c\u4e09\u8005\u6267\u884c SQL \u8bed\u53e5\u7684\u65b9\u5f0f\u53ef\u901a\u7528\u3002 6.5.1 \u901a\u8fc7Statement\u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c \u901a\u8fc7 Statement \u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c\u9700\u8981\u6ce8\u610f\u7684\u4e8b\u9879\uff1a - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u524d\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u8bbe\u7f6e\u4e3a FALSE\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\uff0c\u5e76\u8fdb\u884c\u624b\u52a8\u63d0\u4ea4\uff08commit\uff09\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u540e\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u6062\u590d\u4e3a TRUE\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u5f02\u5e38\u53d1\u751f\u65f6\uff0c\u8fdb\u884c rollback(\u56de\u6eda)\u3002 \u793a\u4f8b\uff1a\u901a\u8fc7 Statement \u6279\u91cf\u64cd\u4f5c\u6570\u636e try { //\u521b\u5efaStatement\u5bf9\u8c61 stm = con.createStatement(); //\u8bbe\u7f6e\u4e8b\u52a1\u975e\u81ea\u52a8\u63d0\u4ea4 con.setAutoCommit(false); // \u6dfb\u52a0\u591a\u6761SQL\u8bed\u53e5\u5230\u6279\u5904\u7406\u4e2d stm.addBatch(\"insert into student values(23,'tangbao','\u9ad8\u6570',100)\"); stm.addBatch(\"insert into student values(24,'\u738b\u5b9a','c#',98)\"); stm.addBatch(\"insert into student values(25,'\u738b\u56fd\u4e91','java',90)\"); //\u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c stm.executeBatch(); System.out.println(\"\u63d2\u5165\u6210\u529f!\"); //\u6267\u884c\u6210\u529f\u540e\u8fdb\u884c\u6570\u636e\u63d0\u4ea4 con.commit(); System.out.println(\"\u63d0\u4ea4\u6210\u529f!\"); //\u5173\u95ed\u975e\u81ea\u52a8\u63d0\u4ea4 con.setAutoCommit(true); } catch (SQLException e) { if (!con.isClosed()) { con.rollback(); //\u51fa\u73b0\u5f02\u5e38\uff0c\u56de\u6eda\u4e8b\u52a1 System.out.println(\"\u63d0\u4ea4\u5931\u8d25\uff0c\u56de\u6eda\uff01\"); con.setAutoCommit(true); //\u5173\u95ed\u975e\u81ea\u52a8\u63d0\u4ea4 } } finally { if (stmt != null) { //\u5173\u95ed\u64cd\u4f5c\u5bf9\u8c61 stmt.close(); } } 6.5.2 \u901a\u8fc7PreparedStatement\u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c \u901a\u8fc7 PreparedStatement \u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c\u9700\u8981\u6ce8\u610f\u7684\u4e8b\u9879\uff1a - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u524d\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u8bbe\u7f6e\u4e3a FALSE\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\uff0c\u5e76\u8fdb\u884c\u624b\u52a8\u63d0\u4ea4\uff08commit\uff09\uff0c\u6570\u636e\u91cf\u5927\u65f6\uff0c\u8bbe\u7f6e\u624b\u52a8\u63d0\u4ea4\u95f4\u9694\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u540e\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u6062\u590d\u4e3a TRUE\uff1b \u2022 \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u5f02\u5e38\u53d1\u751f\u65f6\uff0c\u8fdb\u884c rollback(\u56de\u6eda)\uff1b - PreparedStatement \u6267\u884c\u8bed\u53e5\u4e0d\u80fd\u4e3a DDL \u8bed\u53e5\u3002 \u793a\u4f8b\uff1a\u5c06 10000 \u6761\u8bb0\u5f55\u63d2\u5165\u6570\u636e\u5e93\u4e2d\uff0c\u6bcf 100 \u6761\u6267\u884c\u4e00\u6b21\u63d0\u4ea4\u64cd\u4f5c try{ conn.setAutoCommit(false); //\u8bbe\u7f6e\u975e\u81ea\u52a8\u63d0\u4ea4 //\u521b\u5efaPreparedStatement\u5bf9\u8c61 ps = conn.prepareStatement(\"insert into testtab values (?, ?, ?)\"); //\u5faa\u73af\u6dfb\u52a0\u6279\u5904\u7406\u6570\u636e for(int i = 0;i<list.size();i++){ HashMap map = list.get(i);//list\u4e3a\u6570\u636e\u5c01\u88c5\uff0c\u6b64\u5904\u7565 ps.setString(1, map.get(\"id\").toString()); ps.setString(2, map.get(\"name\").toString()); ps.setString(3, map.get(\"age\").toString()); ps.addBatch(); if(mod(i,100)==0){//\u6bcf100\u6761\u6267\u884c\u4e00\u6b21\u6267\u884c\u64cd\u4f5c ps.executeBatch();//\u6267\u884c\u6279\u91cf\u63d2\u5165 conn.commit();//\u6267\u884c\u4e8b\u52a1\u63d0\u4ea4 } } ps.executeBatch();//\u6267\u884c\u6279\u91cf\u63d2\u5165 conn.commit(); //\u63d0\u4ea4\u4e8b\u52a1 }catch(Exception e){ if (!conn.isClosed()) { conn.rollback(); //\u51fa\u73b0\u5f02\u5e38\uff0c\u56de\u6eda\u4e8b\u52a1 System.out.println(\"\u63d0\u4ea4\u5931\u8d25\uff0c\u56de\u6eda\uff01\"); conn.setAutoCommit(true); //\u5173\u95ed\u975e\u81ea\u52a8\u63d0\u4ea4 } } finally { if (ps!= null) { ps.close();//\u5173\u95ed\u64cd\u4f5c\u5bf9\u8c61 } } 6.5.3 CallableStatement\u7ed1\u5b9a\u53c2\u6570 CallableStatement \u5b58\u5728\u4e09\u79cd\u7c7b\u578b\u7684\u53c2\u6570 IN\u3001OUT \u548c INOUT\u3002 - IN\uff1a\u521b\u5efa SQL \u8bed\u53e5\u65f6\u5176\u53c2\u6570\u503c\u672a\u77e5\u3002\u4f7f\u7528 setXXX() \u65b9\u6cd5\u5c06\u503c\u7ed1\u5b9a\u5230 IN \u53c2\u6570\u3002 - OUT\uff1a\u7531 SQL \u8bed\u53e5\u8fd4\u56de\u7684\u53c2\u6570\u503c\u3002\u53ef\u4ee5\u4f7f\u7528 getXXX() \u65b9\u6cd5\u4ece OUT \u53c2\u6570\u4e2d\u68c0\u7d22\u503c\u3002 - INOUT\uff1a\u63d0\u4f9b\u8f93\u5165\u548c\u8f93\u51fa\u503c\u7684\u53c2\u6570\u3002\u4f7f\u7528 setXXX() \u65b9\u6cd5\u7ed1\u5b9a\u53d8\u91cf\u5e76\u4f7f\u7528getXXX() \u65b9\u6cd5\u68c0\u7d22\u503c\u3002 \u793a\u4f8b 1\uff1a\u901a\u8fc7\u53c2\u6570\u4e0b\u6807\u7ed1\u5b9a\u53c2\u6570 //\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\u8bed\u53e5 String sql =\"{call pro_2(?,?,?)}\"; //\u521b\u5efaCallableStatement\u5bf9\u8c61 CallableStatement cstm = conn.prepareCall(sql); //\u901a\u8fc7\u53c2\u6570\u4e0b\u6807\u8bbe\u7f6e\u53c2\u6570(IN\u53c2\u6570) cstm.setInt(1, 20490); //\u6ce8\u518cOUT\u53c2\u6570\u6570\u636e\u7c7b\u578b cstm.registerOutParameter(2, com.xugu.cloudjdbc.Types.VARCHAR); cstm.registerOutParameter(3, com.xugu.cloudjdbc.Types.VARCHAR); //\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528 cstm.execute(); //\u83b7\u53d6\u5b58\u50a8\u8fc7\u7a0b\u8f93\u51fa\u53c2\u6570 String name = (String)cstm.getObject(2); String address = (String)cstm.getObject(3); \u793a\u4f8b 2\uff1a\u901a\u8fc7\u53c2\u6570\u540d\u7ed1\u5b9a\u53c2\u6570 //\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\u8bed\u53e5 CallableStatement pstm = conn.prepareCall(\"insert into tt1 values(:id,:name)\"); //\u901a\u8fc7\u53c2\u6570\u540d\u8bbe\u7f6e\u53c2\u6570(IN\u53c2\u6570) pstm.setInt(\"id\", 1); pstm.setString(\"name\", \"cloud\"); //\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528 pstm.execute(); 6.6 \u5904\u7406\u6267\u884c\u7ed3\u679c ResultSet \u7c7b\u662f\u901a\u8fc7 Statement \u53ca\u5176\u5b50\u7c7b\u6267\u884c SQL \u67e5\u8be2\u8bed\u53e5\u5f97\u5230\u7684\u7ed3\u679c\u96c6\u3002ResultSet \u7c7b\u5305\u542b\u4e09\u4e2a\u91cd\u8981\u5c5e\u6027\uff1aResultSet \u5bf9\u8c61\u5e76\u53d1\u6a21\u5f0f\u3001ResultSet \u5bf9\u8c61\u5149\u6807\u5904\u7406\u65b9\u5411\u3001ResultSet \u5bf9\u8c61\u5149\u6807\u7c7b\u578b\u3002ResultSet \u7c7b\u5177\u6709\u6307\u5411\u5f53\u524d\u7ed3\u679c\u96c6\u6570\u636e\u884c\u4f4d\u7f6e\u5149\u6807\uff0c\u5149\u6807\u4f4d\u7f6e\u521d\u59cb\u88ab\u7f6e\u4e8e\u7b2c\u4e00\u884c\u4e4b\u524d\uff0c\u901a\u8fc7 ResultSet \u7c7b\u5c01\u88c5\u7684\u5149\u6807\u79fb\u52a8\u65b9\u6cd5\u5b9e\u73b0\u5bf9\u5149\u6807\u4f4d\u7f6e\u7684\u63a7\u5236\uff0c\u5f53 ResultSet \u5bf9\u8c61\u7684\u5149\u6807\u79fb\u81f3\u6570\u636e\u7ed3\u679c\u96c6\u672b\u5c3e\u65f6 (\u4e0b\u4e00\u884c\u65e0\u6570\u636e)\uff0c\u8fd4\u56de FALSE\u3002 \u5728\u865a\u8c37 JDBC \u4e2d\uff0cResultSet \u7c7b\u5206\u4e3a\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u548c\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\uff08\u901a\u8fc7 URL \u8fde\u63a5\u4e32\u53c2\u6570 recv_mode \u914d\u7f6e\uff09\u3002\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u9ed8\u8ba4\u5c5e\u6027\u4e3a\u4e0d\u53ef\u66f4\u65b0\u3001\u5411\u524d\u79fb\u52a8\u3001\u53ef\u4ee5\u6eda\u52a8\uff1b\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u9ed8\u8ba4\u5c5e\u6027\u4e3a\u4e0d\u53ef\u66f4\u65b0\u3001\u53ea\u5411\u524d\u79fb\u52a8\u3001\u4e0d\u53ef\u6eda\u52a8\u3002 Statement \u5bf9\u8c61\u6267\u884c SQL \u8bed\u53e5\u8fd4\u56de\u7ed3\u679c\u96c6\u4ec5\u80fd\u662f\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\uff0c\u800c PreparedStatement \u5bf9\u8c61\u6267\u884c SQL \u8bed\u53e5\u8fd4\u56de\u7ed3\u679c\u96c6\u53ef\u4e3a\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u6216\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u3002 \u5f53\u6267\u884c SQL \u8fd4\u56de\u6570\u636e\u7ed3\u679c\u96c6\u8f83\u5927\u65f6\uff0c\u5efa\u8bae\u4f7f\u7528\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\uff0c\u907f\u514d JVM \u7684\u6ea2\u51fa\u3002 {.is-info} 6.6.1 \u66f4\u65b0ResultSet\u7ed3\u679c\u96c6 \u521b\u5efa Statement \u5bf9\u8c61\u65f6\uff0c\u8bbe\u7f6e Statement \u5c5e\u6027 RresultSetConcurrency \u4e3a ResultSet.CONCUR_UPDATABLE\uff0c\u5e76\u4e14\u6570\u636e\u5e93 URL \u8fde\u63a5\u4e32\u5c5e\u6027 return_rowid \u8bbe\u7f6e\u4e3a TRUE\u65f6\uff0cStatement \u5bf9\u8c61\u6267\u884c SQL \u8bed\u53e5\u8fd4\u56de\u7684 ResultSet \u7ed3\u679c\u96c6\u624d\u80fd\u88ab\u66f4\u65b0\u3002\u5f53 ResultSet \u5bf9\u8c61\u4e3a\u53ef\u66f4\u65b0\u7ed3\u679c\u96c6\u65f6\uff0c\u5c06\u5149\u6807\u79fb\u81f3\u63d2\u5165\u4f4d\u7f6e\uff0c\u53ef\u8c03\u7528 ResultSet \u7c7b\u5bf9\u5e94\u7684 update \u65b9\u6cd5\u4fee\u6539\u7ed3\u679c\u96c6\u4e2d\u884c\u6570\u636e\uff0c\u5e76\u901a\u8fc7 updateRow \u65b9\u6cd5\u5c06\u66f4\u6539\u6570\u636e\u66f4\u65b0\u5230\u6570\u636e\u5e93\u4e2d\u3002 \u793a\u4f8b\uff1a\u901a\u8fc7\u4fee\u6539\u7ed3\u679c\u96c6\u4e2d\u6570\u636e\u503c\u66f4\u6539\u6570\u636e\u5e93\u4e2d\u5bf9\u5e94\u8bb0\u5f55 //\u521b\u5efaStatement\u5bf9\u8c61\u5e76\u8bbe\u7f6e\u7ed3\u679c\u96c6\u5c5e\u6027\u4e3a\u53ef\u66f4\u65b0 Statement stm = conn.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_UPDATABLE); //\u6267\u884cSQL\u8bed\u53e5 ResultSet rs = stm.executeQuery(sql); //\u7ed3\u679c\u96c6\u904d\u5386 while(rs.next()) { //\u66f4\u65b0\u7ed3\u679c\u96c6\u4e2d\u6307\u5b9a\u5217\u6570\u636e rs.updateLong(1, 5); //\u66f4\u65b0\u7ed3\u679c\u96c6\u4e2d\u6307\u5b9a\u5217\u6570\u636e rs.updateFloat(3, 12.3f); //\u7ed3\u679c\u96c6\u53d8\u66f4\u56de\u5199\u5165\u6570\u636e\u5e93 rs.updateRow(); } \u901a\u8fc7\u8c03\u7528 ResultSet \u7c7b\u7684 next()\u3001previous()\u3001absolute(int) \u65b9\u6cd5\u79fb\u52a8\u5149\u6807\u4f4d\u7f6e\uff0c\u5c06\u5149\u6807\u4f4d\u7f6e\u79fb\u52a8\u5230\u6307\u5b9a\u6570\u636e\u884c\uff0c\u901a\u8fc7 ResultSet \u7c7b\u5bf9\u5e94\u7684 get \u65b9\u6cd5\u83b7\u53d6\u884c\u6570\u636e\u3002 \u5982\u4f7f\u7528\u7ed3\u679c\u96c6\u66f4\u65b0\u6570\u636e\u5e93\u6570\u636e\uff0c\u9700\u5728\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65f6\uff0c\u8bbe\u7f6e\u8fde\u63a5\u5c5e\u6027 return_rowid \u4e3aTRUE\uff0c\u4e14\u5728\u751f\u6210\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61\u65f6\uff0c\u5e76\u53d1\u5c5e\u6027\u6307\u5b9a\u4e3a ResultSet.CONCUR_UPDATABLE\u3002 {.is-info} 6.6.2 \u901a\u8fc7\u79fb\u52a8\u5149\u6807\u83b7\u53d6\u7ed3\u679c\u96c6\u6761\u6570 \u793a\u4f8b 1\uff1a \u7edf\u8ba1\u7ed3\u679c\u96c6\u603b\u6761\u6570 //\u521b\u5efaStatement\u5bf9\u8c61 Statement stm= conn.createStatement(); stm.execute(\"create table test(id int identity(1,1));insert into test values(default)\"); //\u6267\u884c\u7ed3\u679c\u96c6\u67e5\u8be2 ResultSet rs = stm.executeQuery(\"select * from test\") //\u79fb\u52a8\u5149\u6807\u81f3\u7ed3\u679c\u96c6\u672b\u5c3e rs.last(); //\u83b7\u53d6\u7ed3\u679c\u96c6\u884c\u6570 int rsCounts = rs.getRow(); 6.6.3 \u591a\u7ed3\u679c\u96c6\u5904\u7406 \u865a\u8c37 JDBC \u652f\u6301\u591a\u7ed3\u679c\u96c6\u5904\u7406\uff0c\u5141\u8bb8 Statement \u63a5\u53e3\u652f\u6301\u591a\u91cd\u6253\u5f00\u7684 ResultSet \u5bf9\u8c61\u3002\u6267\u884c\u8bed\u53e5\u53ef\u4ee5\u662f\u591a\u6761 SQL \u8bed\u53e5\u7684\u96c6\u5408\uff0c\u5373\u4e00\u6b21\u6027\u5411\u865a\u8c37\u670d\u52a1\u5668\u53d1\u9001\u591a\u6761 SQL \u8bed\u53e5\uff0c\u865a\u8c37\u670d\u52a1\u5668\u6267\u884c\u5b8c SQL \u8bed\u53e5\u540e\u8fd4\u56de\u591a\u4e2a\u6267\u884c\u7ed3\u679c\uff1b\u4ea6\u6216\u5b58\u50a8\u8fc7\u7a0b\u5b9a\u4e49\u6709\u591a\u4e2a\u8fd4\u56de\u7ed3\u679c\u96c6\u3002\u865a\u8c37 JDBC \u7684 Statement \u91cd\u8f7d\u4e86 Statement \u63a5\u53e3\u4e2d\u7684 getMoreResults() \u65b9\u6cd5\u3002 \u793a\u4f8b\uff1a\u591a\u7ed3\u679c\u96c6\u5904\u7406 //SQL\u8bed\u53e5\u5305\u542b\u591a\u6761\u67e5\u8be2\u547d\u4ee4 String sql=\" SELECT * FROM A1 WHERE D2=(SELECT AVG(D2) FROM A1 GROUP BY D1);SELECT * FROM A1 WHERE D2>(SELECT MIN(D2) FROM A1 GROUP BY D1)\"; //\u521b\u5efaStatement\u5bf9\u8c61 Statement stm = conn.createStatement(); //\u6267\u884cSQL\u8bed\u53e5 boolean f = stm.execute(sql); //\u5224\u65ad\u662f\u5426\u6709ResultSet\u5bf9\u8c61\u4ea7\u751f if(f == true){ //\u83b7\u53d6\u7ed3\u679c\u96c6\u5bf9\u8c61 ResultSet rs1 = stm.getResultSet(); ... ... ... ... } while(true) { //\u5224\u65adStatement\u662f\u5426\u8fd4\u56de\u4e86\u591a\u4e2aResultSet\u5bf9\u8c61 if(!stm.getMoreResults(Statement.CLOSE_CURRENT_RESULT)){ break; } else if((rs2 = cstm.getResultSet())!=null) { ... ... ... ...//\u6570\u636e\u5904\u7406\u90e8\u5206\u7701\u7565 } } 6.6.4 \u670d\u52a1\u5668\u7aef\u6e38\u6807\u4f7f\u7528 \u865a\u8c37JDBC\u4e2d\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u751f\u6210\u9700\u6ee1\u8db3\u4e24\u4e2a\u6761\u4ef6\uff1aURL\u8fde\u63a5\u4e32\u5c5e\u6027recv_mode\u503c\u4e3a2\uff0cStatement\u5bf9\u8c61\u6267\u884cSQL\u8bed\u53e5\u4e3a\u5355\u6761SELECT\u8bed\u53e5\u3002 \u5e94\u7528\u7a0b\u5e8f\u7aef\u901a\u8fc7Statement\u7c7b\u7684setFetchSize(int)\u65b9\u6cd5\u6216ResultSet\u7c7b\u7684setFetchSize(int)\u65b9\u6cd5\u8bbe\u7f6e\u6bcf\u6b21\u4ece\u670d\u52a1\u5668\u7aef\u83b7\u53d6\u591a\u5c11\u6761\u6570\u636e\u3002 \u4f7f\u7528\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7684 ResultSet \u5bf9\u8c61\uff0c\u5149\u6807\u53ea\u80fd\u5355\u5411\u5411\u524d\u6b63\u5411\u79fb\u52a8\uff0c\u4e0d\u80fd\u5411\u540e\u79fb\u52a8\u6216\u6765\u56de\u6eda\u52a8\u3002 {.is-info} \u793a\u4f8b\uff1a\u865a\u8c37\u6570\u636e\u5e93\u670d\u52a1\u5668\u7aef\u6e38\u6807\u4f7f\u7528 //\u521b\u5efa\u865a\u8c37JDBC\u7279\u6709Statement\u5bf9\u8c61 Statement stm = (com.xugu.cloudjdbc.Statement)conn.createStatement(); //\u5f00\u542f\u670d\u52a1\u5668\u7aef\u6e38\u6807 stm.setServerCursor(true); //\u8bbe\u7f6e\u670d\u52a1\u5668\u7aef\u6e38\u6807\u5355\u6b21\u8fd4\u56de\u6570\u636e\u6761\u6570 stm.setFetchSize(1000); //\u6267\u884cSQL\u8bed\u53e5 ResultSet rs = stm.executeQuery(\"select * from t1\"); //\u904d\u5386\u6570\u636e while\uff08rs.next()\uff09 { ... ... ... ... } //\u5173\u95ed\u670d\u52a1\u5668\u7aef\u6e38\u6807 stm.setServerCursor(false); 6.6.5 \u68c0\u7d22\u81ea\u52a8\u4ea7\u751f\u7684\u5173\u952e\u5b57GeneratedKeys JDBC 3.0 \u89c4\u8303\u4e2d\u5bf9\u4e8e\u81ea\u52a8\u4ea7\u751f\u7684\u5173\u952e\u5b57\u6570\u503c\uff0c\u5b9a\u4e49\u4e86\u63a5\u53e3\u89c4\u8303\uff0c\u5373\uff1agetGeneratedKeys() \u65b9\u6cd5\u3002 \u4e3a\u4e86\u89e3\u51b3\u5bf9\u83b7\u53d6\u81ea\u52a8\u4ea7\u751f\u7684\u6216\u81ea\u52a8\u589e\u52a0\u7684\u5173\u952e\u5b57\u7684\u503c\u7684\u9700\u6c42\uff0c\u865a\u8c37 JDBC \u6839\u636e JDBC3.0 \u89c4\u8303\u63d0\u4f9b\u4e86\u83b7\u5f97\u5173\u952e\u5b57\u503c\u7684\u65b9\u6cd5\u3002\u83b7\u53d6\u5173\u952e\u5b57\u7684\u503c\uff0c\u9700\u8981\u5728\u6267\u884c\u65b9\u6cd5\u4e2d\u6307\u5b9a\u81ea\u589e\u5173\u952e\u5b57\u6807\u8bb0\u3002SQL \u8bed\u53e5\u6267\u884c\u5b8c\u540e\uff0c\u8c03\u7528 Statement \u5bf9\u8c61\u7684 getGeneratedKeys() \u65b9\u6cd5\uff0c\u83b7\u5f97\u5305\u542b\u81ea\u589e\u957f\u503c\u7684 ResultSet \u5bf9\u8c61\u3002 \u793a\u4f8b\uff1a\u83b7\u53d6\u6570\u636e\u5e93\u81ea\u589e\u957f\u5173\u952e\u5b57\u7684\u503c //\u521b\u5efaStatement\u5bf9\u8c61 Statement stmt = conn.createStatement(); //\u6307\u5b9a\u81ea\u589e\u957f\u5173\u952e\u5b57\u7684\u6807\u8bc6 String[] colN = {\"id\"}; //\u5728\u6267\u884c\u65b9\u6cd5\u4e2d\u5f15\u5165\u81ea\u589e\u957f\u5173\u952e\u5b57\u6807\u8bc6 stmt.executeUpdate(\"INSERT INTO authors(first_name, last_name) VALUES (\u2018Ghq\u2019, \u2018Wxl\u2019)\",colN); //\u83b7\u53d6\u7ed3\u679c\u96c6 ResultSet rs = stmt.getGeneratedKeys(); if ( rs.next() ) { //\u83b7\u53d6\u7ed3\u679c\u96c6\u4e2d\u7684\u81ea\u589e\u957f\u503c \u3000\u3000 int key = rs.getInt(); } 6.7 \u91ca\u653e\u8d44\u6e90 \u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u56e0\u5904\u7406\u9700\u8981\u6240\u5efa\u7acb\u7684 ResultSet\u3001Statement\u3001PreparedStatement \u7b49\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61\uff0c\u5728\u4f7f\u7528\u5b8c\u540e\u5fc5\u987b\u5173\u95ed\u3002\u5173\u95ed\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61\uff0c\u76f4\u63a5\u8c03\u7528\u5bf9\u5e94\u7684\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61 close() \u65b9\u6cd5\u5373\u53ef\u3002 \u5f53\u4e0d\u518d\u9700\u8981\u548c\u865a\u8c37\u6570\u636e\u5e93\u8fdb\u884c\u4ea4\u4e92\u65f6\uff0c\u9700\u65ad\u5f00\u6570\u636e\u5e93\u8fde\u63a5\u3002\u8c03\u7528 Connection \u7c7b\u7684 close() \u65b9\u6cd5\u5373\u4f1a\u5173\u95ed\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u540c\u65f6\u91ca\u653e\u8fde\u63a5\u4e0a\u6240\u6301\u6709\u7684\u6240\u6709\u6570\u636e\u5e93\u8d44\u6e90\u3002 \u6570\u636e\u5e93\u8fde\u63a5\u4e3a\u975e\u81ea\u52a8\u63d0\u4ea4\u65f6\uff0c\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61\u5728\u4f7f\u7528\u5b8c\u540e\uff0c\u82e5\u672a\u53ca\u65f6\u5173\u95ed\uff0c\u6b64\u65f6\u8fdb\u884c DDL \u64cd\u4f5c\u5c06\u4f1a\u5bfc\u81f4\u865a\u8c37\u6570\u636e\u5e93\u52a0\u9501\u8d85\u65f6\u6216\u5931\u8d25\u3002 {.is-info} \u4e03. \u5927\u5bf9\u8c61\u7c7b\u578b\u5904\u7406 JDBC 3.0 \u89c4\u8303\u5b9a\u4e49\u6709 java.sql.Blob \u4e0e java.sql.Clob \u63a5\u53e3\uff0c\u6b64\u4e24\u7c7b\u63a5\u53e3\u4e3a\u6570\u636e\u5e93\u5927\u5bf9\u8c61\u6570\u636e\u5904\u7406\u63a5\u53e3\u3002\u865a\u8c37\u6570\u636e\u5e93\u5927\u5bf9\u8c61\u5b57\u6bb5\u7c7b\u578b\u5305\u542b\uff1ablob\u3001clob\u3001binary\u3002 \u5728\u865a\u8c37 JDBC \u4e2d\uff0c\u83b7\u53d6\u5927\u5bf9\u8c61\u6570\u636e\u6709\u4e24\u79cd\u8fd4\u56de\u65b9\u5f0f\uff1a\u4e00\u79cd\u662f\u6570\u636e\u76f4\u63a5\u8fd4\u56de\uff1b\u53e6\u4e00\u79cd\u662f\u8fd4\u56de\u63cf\u8ff0\u7b26\u65b9\u5f0f\u3002\u5f53\u8fd4\u56de\u6570\u636e\u4e2d\u5927\u5bf9\u8c61\u6570\u636e\u8f83\u591a\u65f6\uff0c\u5efa\u8bae\u4f7f\u7528\u8fd4\u56de\u63cf\u8ff0\u7b26\u65b9\u5f0f\uff0c\u4ece\u800c\u907f\u514d\u56e0\u6570\u636e\u8fc7\u591a\u8fc7\u5927\u9020\u6210\u7684 JVM \u5185\u5b58\u6ea2\u51fa\u3002\u865a\u8c37 JDBC \u9a71\u52a8\u542f\u7528\u5927\u5bf9\u8c61\u8fd4\u56de\u63cf\u8ff0\u7b26\u65b9\u5f0f\uff0c\u9700\u5728\u8fde\u63a5 URL \u4e32\u4e0a\u914d\u7f6e\u5c5e\u6027 lob_ret \u4e3a descriptor \u3002 7.1 \u5411\u8868\u4e2d\u63d2\u5165\u5927\u5bf9\u8c61 LOB \u5bf9\u8c61\u7684\u63d2\u5165\u5fc5\u987b\u901a\u8fc7 PreparedStatement\u3001CallableStatement \u7c7b\u7684 setXXX() \u65b9\u6cd5\u65b9\u5f0f\u5b9e\u73b0\u3002\u865a\u8c37 JDBC \u4e2d PreparedStatement \u63d0\u4f9b\u591a\u79cd\u65b9\u6cd5\u8bbe\u7f6e\u5927\u5bf9\u8c61\u53c2\u6570\u503c\uff0c\u5982\u4e0b\u5217\u65b9\u6cd5\uff1a setBinaryStream(int parameterIndex,InputStream x) setBlob(int parameterIndex, Blob x) setBlob(int parameterIndex, InputStream x) setBytes(int parameterIndex,byte[] x) setCharacterStream(int parameterIndex, Reader reader) setClob(int parameterIndex, Clob x) setClob(int parameterIndex, Reader reader) setString(int parameterIndex, String x) \u793a\u4f8b\uff1a\u5e94\u7528\u7a0b\u5e8f\u63d2\u5165\u5927\u5bf9\u8c61\u6570\u636e\uff0c\u5176\u4e2d\u8868 b1 \u5b57\u6bb5 photo \u4e3a blob \u7c7b\u578b\uff0c\u5b57\u6bb5 text \u4e3a clob \u7c7b\u578b PreparedStatement ps = conn.prepareStatement(\"INSERT INTO b1 VALUES (?, ?)\")\u037e // blobBytes is a byte[] type ps.setBlob(1, new com.xugu.cloudjdbc.Blob(blobBytes))\u037e // clobString is a String type ps.setClob(2, new com.xugu.cloudjdbc.Clob(clobString))\u037e ps.execute()\uff1b 7.2 \u67e5\u8be2\u5927\u5bf9\u8c61\u6570\u636e \u901a\u8fc7\u865a\u8c37 JDBC \u83b7\u53d6\u5927\u5bf9\u8c61\u503c\uff0c\u6570\u636e\u5e93 CLOB \u5bf9\u8c61\u53ef\u901a\u8fc7\u5b57\u7b26\u4e32\u5f62\u5f0f\u6216\u6d41\u5f0f\u6570\u636e\u5f62\u5f0f\u83b7\u53d6\uff0c\u6570\u636e\u5e93 BLOB \u5bf9\u8c61\u53ea\u901a\u8fc7\u6d41\u5f0f\u6570\u636e\u5f62\u5f0f\u83b7\u53d6\u3002 \u793a\u4f8b 1\uff1a\u6d41\u5f0f\u83b7\u53d6 CLOB \u5bf9\u8c61 Statement stm = xgConn.createStatement(); String sql=\u201dselect remark from t_clob where id=101\u201d; ResultSet rs = stm.executeQuery(sql); while(rs.next) { Clob data = rs.getClob(\"remark \"); //\u4ee5\u5b57\u7b26\u6d41\u65b9\u5f0f\u83b7\u53d6\u6570\u636e Reader rd = data.getCharacterStream(); char[] sc = new char[1000]; StringBuffer sb = new StringBuffer(); int len = 0; while((len=rd.read(sc)) !=-1) { sb.append(new String(sc,0,len)); } System.out.println(sb.toString()); } \u793a\u4f8b 2\uff1a\u865a\u8c37 JDBC \u5141\u8bb8\u4ee5\u5b57\u7b26\u4e32\u7684\u5f62\u5f0f\u8bfb\u53d6 CLOB \u5bf9\u8c61 String sql=\"select text from t_clob\"\u037e Statement stm=conn.createStatement()\u037e ResultSet rs=stm.executeQuery(sql)\u037e while(rs.next()) { String clobStr =rs.getString(\"text\")\u037e } \u516b. \u865a\u8c37\u6570\u636e\u5e93\u8d1f\u8f7d\u5747\u8861 \u865a\u8c37\u6570\u636e\u5e93\u662f\u4e00\u6b3e\u5177\u5907\u9ad8\u5b89\u5168\u3001\u9ad8\u6027\u80fd\u3001\u9ad8\u6269\u5c55\u7b49\u7279\u6027\u7684\u3001\u57fa\u4e8e\u5206\u5e03\u5f0f\u67b6\u6784\u7684\u5206\u5e03\u5f0f\u4e8b\u52a1\u578b\u6570\u636e\u5e93\u3002\u90e8\u7f72\u6570\u636e\u5e93\u96c6\u7fa4\u65f6\uff0c\u591a\u53f0\u670d\u52a1\u5668\u4f5c\u4e3a\u4e00\u4e2a\u6574\u4f53\u5bf9\u5916\u63d0\u4f9b\u6570\u636e\u670d\u52a1\u3002\u5728\u591a\u673a\u73af\u5883\u4e0b\uff0c\u4e3a\u4f7f\u6570\u636e\u5e93\u8fde\u63a5\u5747\u5300\u5206\u5e03\u4e8e\u5404\u53f0\u670d\u52a1\uff0c\u865a\u8c37 JDBC \u5728\u63a5\u53e3\u5c42\u5b9e\u73b0\u4e86\u57fa\u4e8e\u8f6f\u8d1f\u8f7d\u5747\u8861\u6280\u672f\u7684\u6570\u636e\u5e93\u8fde\u63a5\u5efa\u7acb\u65b9\u5f0f\u3002 \u865a\u8c37\u6570\u636e\u5e93\u8d1f\u8f7d\u5747\u8861\u5206\u914d\u6570\u636e\u5e93\u8fde\u63a5\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a\u987a\u5e8f\u5206\u914d\u3001\u968f\u673a\u5206\u914d\u3002\u901a\u8fc7\u5728\u6570\u636e\u5e93 URL \u8fde\u63a5\u4e32\u4e0a\u8bbe\u7f6e\u53c2\u6570 conn_type(conn_type:1, \u968f\u673a\u5206\u914d\uff1b2, \u987a\u5e8f\u5206\u914d) \u7c7b\u578b\uff0c\u5b9e\u73b0\u6570\u636e\u5e93\u8fde\u63a5\u5728\u591a\u96c6\u7fa4\u73af\u5883\u4e0b\u7684\u8d1f\u8f7d\u5747\u8861\u3002\u9ed8\u8ba4\u8d1f\u8f7d\u5747\u8861\u5206\u914d\u65b9\u5f0f\uff1a\u987a\u5e8f\u5206\u914d\u3002 \u865a\u8c37 JDBC \u63d0\u4f9b\u4e09\u79cd\u914d\u7f6e\u8d1f\u8f7d\u5747\u8861\u7684\u65b9\u5f0f\uff1a\u6570\u636e\u5e93 URL \u8fde\u63a5\u4e32\u914d\u7f6e\u3001\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u6027\u6587\u4ef6 Properties \u914d\u7f6e\u3001\u6570\u636e\u5e93\u8fde\u63a5 XML \u6587\u4ef6\u914d\u7f6e\u3002 1. URL \u8fde\u63a5\u4e32\u914d\u7f6e Class.forName(\"com.xugu.cloudjdbc.Driver\"); //URL\u8fde\u63a5\u4e32\u4e2d\u4f7f\u7528ips\u5c5e\u6027\u914d\u7f6e\u591aIP\u8d1f\u8f7d\u5747\u8861 Connection conn = DriverManager.getConnection(\"jdbc:xugu://192.168.0.201:5138/SYSTEM?user=SYSDBA&password=SYSDBA&conn_type=1&ips=192.168.0.205,192.168.0.204,192.168.1.206\") \u8fde\u63a5\u5c5e\u6027\u6587\u4ef6 Properties \u914d\u7f6e (Vector \u6216\u5b57\u7b26\u4e32\u6570\u7ec4) Properties info=new Properties(); Class.forName(\"com.xugu.cloudjdbc.Driver\"); //Vector\u7ed3\u6784\u5b58\u653e\u8d1f\u8f7d\u5747\u8861\u591aIP\u5730\u5740\u65b9\u5f0f Vector<String> ipsVector=new Vector<String>(); ipsVector.add(\"192.168.1.201\"); ipsVector.add(\"192.168.1.204\"); ipsVector.add(\"192.168.1.205\"); ipsVector.add(\"192.168.1.206\"); info.put(\"ips\", ipsVector); //\u6570\u7ec4\u5b58\u653e\u8d1f\u8f7d\u5747\u8861\u591aIP\u5730\u5740\u65b9\u5f0f String[] ips={\"192.168.1.205\",\"192.168.1.204\",\"192.168.1.206\"}; info.put(\"ips\", ips); Connection conn = DriverManager.getConnection(\"jdbc:xugu://192.168.1.201:5138/SYSTEM?user=SYSDBA&password=SYSDBA&conn_type=2\",info); \u8fde\u63a5\u5c5e\u6027 XML \u6587\u4ef6\u914d\u7f6e <?xml version=\"1.0\" encoding=\"utf-8\"?> <listeners> <listener> <ip>192.168.1.206</ip> </listener> <listener> <ip>192.168.1.204</ip> </listener> <listener> <ip>192.168.1.205</ip> </listener> </listeners> Class.forName(\"com.xugu.cloudjdbc.Driver\"); Connection conn = DriverManager.getConnection(\"jdbc:xugu:file://xuguClouldListener.xml:5138/SYSTEM?user=SYSDBA&password=SYSDBA&conn_type=1\");","title":"JDBC4"},{"location":"JDBC4/#jdbc","text":"Java \u6570\u636e\u5e93\u8fde\u63a5\uff08Java Database Connectivity\uff0c\u7b80\u79f0 JDBC\uff09\u662f Java \u8bed\u8a00\u4e2d\u7528\u6765\u89c4\u8303\u5ba2\u6237\u7aef\u7a0b\u5e8f\u5982\u4f55\u8bbf\u95ee\u6570\u636e\u5e93\u7684\u5e94\u7528\u7a0b\u5e8f\u63a5\u53e3\uff0c\u63d0\u4f9b\u4e86\u8bf8\u5982\u67e5\u8be2\u548c\u66f4\u65b0\u6570\u636e\u5e93\u4e2d\u6570\u636e\u7684\u65b9\u6cd5\uff0c\u53ef\u4ee5\u4e3a\u591a\u79cd\u5173\u7cfb\u6570\u636e\u5e93\u63d0\u4f9b\u7edf\u4e00\u8bbf\u95ee\u3002JDBC \u63d0\u4f9b\u4e86\u4e00\u79cd\u57fa\u51c6\uff0c\u901a\u8fc7\u6b64\u57fa\u51c6\u6570\u636e\u5e93\u5f00\u53d1\u4eba\u5458\u53ef\u6784\u5efa\u66f4\u9ad8\u7ea7\u7684\u5de5\u5177\u548c\u63a5\u53e3\uff0c\u4e5f\u53ef\u901a\u8fc7\u6b64\u57fa\u51c6\u7f16\u5199\u6570\u636e\u5e93\u5e94\u7528\u7a0b\u5e8f\u3002 \u865a\u8c37\u6570\u636e\u5e93\u7684 JDBC \u9a71\u52a8\u7a0b\u5e8f\uff08\u4ee5\u4e0b\u7b80\u79f0\uff1a\u865a\u8c37 JDBC\uff09\u5b9e\u73b0\u4e86 Java \u7a0b\u5e8f\u548c\u865a\u8c37\u6570\u636e\u5e93\u901a\u4fe1\uff0c\u652f\u6301 SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u7684\u8bbf\u95ee\uff0c\u540c\u65f6\u4e5f\u662f\u6784\u9020\u9ad8\u7ea7 API \u548c\u6570\u636e\u5e93\u5f00\u53d1\u5de5\u5177\u7684\u57fa\u7840\u3002 \u7528\u6237\u60f3\u8981\u5b9e\u73b0\u5bf9\u6570\u636e\u5e93\u7684\u8bbf\u95ee\uff0c\u4e00\u822c\u8981\u7ecf\u8fc7\u5982\u4e0b\u7684\u6b65\u9aa4\uff1a 1. \u901a\u8fc7\u9a71\u52a8\u5668\u7ba1\u7406\u5668\u83b7\u53d6\u8fde\u63a5\u63a5\u53e3\uff1b 2. \u83b7\u5f97 Statement \u6216 Statement \u5b50\u7c7b\uff1b 3. \u901a\u8fc7 Statement \u6267\u884c SQL \u547d\u4ee4\uff1b 4. \u5904\u7406\u6267\u884c\u7ed3\u679c\uff1b 5. \u5173\u95ed Statement\uff1b 6. \u5173\u95ed\u8fde\u63a5\u3002 JDBC \u7ed3\u6784\u56fe, \u5982\u56fe1.1\u6240\u793a\u3002 \u56fe1.1 JDBC\u7ed3\u6784\u56fe \u4f7f\u7528\u865a\u8c37 JDBC \u5b9e\u73b0\u5e94\u7528\u7a0b\u5e8f\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u4e4b\u95f4\u7684\u8fde\u63a5\u670d\u52a1\uff0c\u5e94\u7528\u7a0b\u5e8f\u6240\u5728\u8ba1\u7b97\u673a\u9700\u5df2\u5b89\u88c5 Java \u8fd0\u884c\u73af\u5883\uff08Java Runtime Environment, \u7b80\u79f0 JRE\uff09\u3002\u865a\u8c37 JDBC \u53c2\u7167 JDBC API \u5b9e\u73b0\uff0c\u652f\u6301 JDBC 3.0 \u529f\u80fd\uff0cJava \u5e94\u7528\u7a0b\u5e8f\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u4e4b\u95f4\u7684\u6240\u6709\u64cd\u4f5c\u5747\u9700\u901a\u8fc7\u865a\u8c37 JDBC \u6765\u5b8c\u6210\u3002 \u4f7f\u7528\u865a\u8c37 JDBC \u9700\u8981 JRE 1.6 \u7248\u6216\u66f4\u9ad8\u7248\u672c\u7684 Java \u8fd0\u884c\u65f6\u73af\u5883 (JRE)\u3002 {.is-info}","title":"\u4e00. \u865a\u8c37\u6570\u636e\u5e93\u7684JDBC\u9a71\u52a8\u7a0b\u5e8f\u6982\u8ff0"},{"location":"JDBC4/#jdbc_1","text":"JDBC 3.0 \u89c4\u8303\u7531 JDBC 1.0\u3001JDBC 2.0 \u884d\u751f\u800c\u6765\uff0c\u4e3b\u8981\u5305\u542b java.sql \u5305\u4ee5\u53ca javax.sql \u5305\uff0c\u6570\u636e\u5e93 JDBC \u9a71\u52a8\u5b9e\u73b0 JDBC 3.0 \u89c4\u8303\u6240\u5b9a\u4e49\u7684\u7279\u6027\u63a5\u53e3\uff0c\u5373\u53ef\u8fbe\u5230\u5bf9\u6807\u51c6 JDBC 3.0 \u89c4\u8303\u7684\u652f\u6301\u3002 \u865a\u8c37 JDBC \u57fa\u4e8e JDBC 3.0 \u89c4\u8303\u5b9e\u73b0\uff0c\u5b9e\u73b0\u63a5\u53e3\u7c7b\u6620\u5c04\uff0c\u5982\u88682.1\u6240\u793a\u3002 \u88682.1 \u865a\u8c37JDBC\u5b9e\u73b0\u63a5\u53e3\u7c7b | \u63a5\u53e3 | \u865a\u8c37JDBC\u5b9e\u73b0\u7c7b | | ---------------------------------- | ---------------------------------------- | | java.sql.Driver | com.xugu.cloudjdbc.Driver | | java.sql.Connection | com.xugu.cloudjdbc.Connection | | java.sql.Statement | com.xugu.cloudjdbc.Statement | | java.sql.PreparedStatement | com.xugu.cloudjdbc.PreparedStatement | | java.sql.CallableStatement | com.xugu.cloudjdbc.CallableStatement | | java.sql.ResultSet | com.xugu.cloudjdbc.ResultSet | | java.sql.ResultSetMetaData | com.xugu.cloudjdbc.ResultSetMetaData | | java.sql.DatabaseMetaData | com.xugu.cloudjdbc.DatabaseMetaData | | java.sql.PrameterMetaData | com.xugu.cloudjdbc.PrameterMetaData | | java.sql.Types | com.xugu.cloudjdbc.Types | | java.sql.Blob | com.xugu.cloudjdbc.Blob | | java.sql.Clob | com.xugu.cloudjdbc.Clob | | java.sql.Savepoint | com.xugu.cloudjdbc.Savepoint | | javax.sql.DataSource | com.xugu.pool.XgDataSource | | javax.sql.ConnectionPoolDataSource | com.xugu.pool.XgConnectionPoolDataSource | | javx.sql.PooledConnection | com.xugu.pool.XgPooledConnection | \u9664\u4e86\u4ee5\u4e0a\u6807\u51c6\u7c7b\u63a5\u53e3\u5916\uff0c\u865a\u8c37 JDBC \u8fd8\u6269\u5c55\u5b9e\u73b0\u4e86\u4ee5\u4e0b\u7c7b\uff1a - com.xugu.cloudjdbc.ClientInfo - com.xugu.cloudjdbc.OutParameter - com.xugu.cloudjdbc.Rowid - com.xugu.cloudjdbc.SQLXml - com.xugu.cloudjdbc.SSL - com.xugu.pool.StatementWrapper - com.xugu.pool.PreparedStatementWrapper","title":"\u4e8c. \u865a\u8c37\u6570\u636e\u5e93\u7684JDBC\u63a5\u53e3\u548c\u5bf9\u8c61\u7c7b"},{"location":"JDBC4/#_1","text":"","title":"\u4e09. \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b"},{"location":"JDBC4/#31","text":"\u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b\u3001\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u3001Java \u6570\u636e\u7c7b\u578b\u4e09\u8005\u6620\u5c04\u5173\u7cfb\uff0c\u5982\u88683.1\u6240\u793a\u3002 \u88683.1 \u6570\u636e\u7c7b\u578b\u6620\u5c04\u5173\u7cfb \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b \u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b Java \u6570\u636e\u7c7b\u578b BOOLEAN BOOLEAN boolean SMALLINT SMALLINT short TINYINT TINYINT byte INTEGER INTEGER int BIGINT BIGINT long FLOAT FLOAT float DOUBLE DOUBLE double NUMERIC NUMERIC BigDecimal DECIMAL BigDecimal CHAR CHAR String NCHAR NCHAR String VARCHAR VARCHAR String VARCHAR2 VARCHAR String NVARCHAR2 VARCHAR String BLOB BLOB Blob CLOB CLOB Clob NCLOB BINARY BINARY byte[] VARBINARY LONG VARBINARY DATE DATE Date TIME TIME Time TIMESTAMP TIMESTAMP Timestamp","title":"3.1 \u57fa\u672c\u6570\u636e\u7c7b\u578b"},{"location":"JDBC4/#32","text":"\u865a\u8c37 JDBC \u9664\u4e86\u5b9e\u73b0\u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b\uff0c\u8fd8\u6839\u636e\u865a\u8c37\u6570\u636e\u5e93\u81ea\u6709\u7c7b\u578b\u6269\u5c55\u4e86\u90e8\u5206\u6570\u636e\u7c7b\u578b\uff08\u88683.2\u6240\u793a\uff09\uff0c\u5305\u62ec\u4ee5\u4e0b\u6570\u636e\u7c7b\u578b\u3002 1. \u65f6\u95f4\u6570\u636e\u7c7b\u578b DATETIME\u2014\u2014\u2014 \u65e5\u671f\u65f6\u95f4\u7c7b\u578b DATETIME WITH TIME ZONE \u2014\u2014\u2014 \u5e26\u65f6\u533a\u7684\u65e5\u671f\u65f6\u95f4\u7c7b\u578b TIME WITH TIME ZONE \u2014\u2014\u2014 \u5e26\u65f6\u533a\u7684\u65f6\u95f4\u7c7b\u578b INTERVAL YEAR \u2014\u2014\u2014 \u5e74\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL MONTH \u2014\u2014\u2014 \u6708\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY\u2014\u2014\u2014 \u65e5\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL HOUR \u2014\u2014\u2014 \u5c0f\u65f6\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL MINUTE \u2014\u2014\u2014 \u5206\u949f\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL SECOND \u2014\u2014\u2014 \u79d2\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL YEAR TO MONTH \u2014\u2014\u2014 \u5e74\u5230\u6708\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY TO HOUR \u2014\u2014\u2014 \u65e5\u5230\u5c0f\u65f6\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY TO MINUTE \u2014\u2014\u2014 \u65e5\u5230\u5206\u949f\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY TO SECOND \u2014\u2014\u2014 \u65e5\u5230\u79d2\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL HOUR TO MINUTE \u2014\u2014\u2014 \u5c0f\u65f6\u5230\u5206\u949f\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL HOUR TO SECOND \u2014\u2014\u2014 \u5c0f\u65f6\u5230\u79d2\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL MINUTE TO SECOND \u2014\u2014\u2014 \u5206\u949f\u5230\u79d2\u7684\u65f6\u95f4\u95f4\u9694 2. \u6e38\u6807\u6570\u636e\u7c7b\u578b\uff08\u53ea\u5728\u5b58\u50a8\u8fc7\u7a0b\u3001\u51fd\u6570\u3001\u5305\u4e2d\u4f7f\u7528\uff09 CURSOR \u2014\u2014\u2014 \u6e38\u6807\u6570\u636e\u7c7b\u578b SYS_REFCURSOR \u2014\u2014\u2014 \u8fd4\u56de\u6e38\u6807\u6570\u636e\u7c7b\u578b 3. \u5176\u4ed6\u6570\u636e\u7c7b\u578b GUID \u2014\u2014\u2014 \u5168\u5c40\u552f\u4e00\u6807\u8bc6\u7b26 \u88683.2 \u6269\u5c55\u6570\u636e\u7c7b\u578b\u5bf9\u5e94\u8868 \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b \u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b Java \u6570\u636e\u7c7b\u578b DATETIME DATETIME Timestamp DATETIME WITH TIME ZONE DATETIME_TZ String TIME WITH TIME ZONE TIME_TZ String INTERVAL YEAR INTERVAL_Y String INTERVAL MONTH INTERVAL_M INTERVAL DAY INTERVAL_D INTERVAL HOUR INTERVAL_H INTERVAL MINUTE INTERVAL_MI INTERVAL SECOND INTERVAL_S String INTERVAL YEAR TO MONTH INTERVAL_Y2M INTERVAL DAY TO HOUR INTERVAL_D2H INTERVAL DAY TO MINUTE INTERVAL_D2M INTERVAL DAY TO SECOND INTERVAL_D2S INTERVAL HOUR TO MINUTE INTERVAL_H2M INTERVAL HOUR TO SECOND INTERVAL_H2S INTERVAL MINUTE TO SECOND INTERVAL_M2S CURSOR CURSOR \u65e0\u5bf9\u5e94\u7c7b\u578b SYS_REFCURSOR REFCUR GUID GUID String \u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528 ResultSet \u5bf9\u8c61\u6765\u5bf9\u5e94\u83b7\u53d6\u6e38\u6807\u6240\u8fd4\u56de\u6570\u636e\u3002 {.is-info}","title":"3.2 \u6269\u5c55\u6570\u636e\u7c7b\u578b"},{"location":"JDBC4/#33","text":"\u5728\u8c03\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u4e2d\u7684\u67d0\u4e9b\u65b9\u6cd5\u65f6\uff0c\u9700\u8fdb\u884c Java \u6570\u636e\u7c7b\u578b\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u7684\u8f6c\u6362\uff0c\u8fd9\u4e9b\u65b9\u6cd5\u5305\u62ec\uff1a - ResultSet \u7c7b get\\<Type> \u65b9\u6cd5\uff1b - ResultSet \u7c7b update\\<Type> \u65b9\u6cd5\uff1b - CallableStatement \u7c7b get\\<Type> \u65b9\u6cd5\uff1b - PreparedStatement \u7c7b set\\<Type> \u65b9\u6cd5\u3002 \u6570\u636e\u7c7b\u578b\u4e4b\u95f4\u7684\u8f6c\u6362\uff0c\u9700\u9075\u4ece Java \u6570\u636e\u7c7b\u578b\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u6620\u5c04\u5173\u7cfb\u89c4\u5219\uff0c\u5426\u5219\u53ef\u80fd\u8f6c\u6362\u5931\u8d25\u3002 1. com.xugu.cloudjdbc.ResultSet \u7c7b\u4e2d get\\<Type> \u65b9\u6cd5\u7684\u7c7b\u578b\u8f6c\u6362\uff0c\u5982\u88683.3\u6240\u793a\u3002 2. com.xugu.cloudjdbc.PreparedStatement \u7c7b\u4e2d set\\<Type> \u65b9\u6cd5\u7684\u7c7b\u578b\u8f6c\u6362\uff0c\u5982\u88683.4\u6240\u793a\u3002 X\uff08\u65e0\u4e22\u5931\u8f6c\u6362\uff09\uff1a\u6307\u4ee5\u957f\u7cbe\u5ea6\u7c7b\u578b\u7684 get\\<Type> \u65b9\u6cd5\u83b7\u53d6\u77ed\u7cbe\u5ea6\u6570\u636e\u7c7b\u578b\u5217\u503c\u65e0\u4e22\u5931\u3002 \u5982\uff1a\u4f7f\u7528 getInt() \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u4e3a smallint \u7684\u5217\u6570\u636e\uff0c\u83b7\u53d6\u6570\u636e\u5b8c\u6574\u3002 Z\uff08\u4f9d\u8d56\u8f6c\u6362\uff09\uff1a\u6307 get\\<Type> \u65b9\u6cd5\u4e2d\u7684 Type \u7c7b\u578b\u4e0e\u83b7\u53d6\u6570\u636e\u5e93\u4e2d\u5217\u7684\u6570\u636e\u7c7b\u578b\u4e0d\u4e00\u81f4\uff0c\u6b64\u65f6\u9700\u8981\u901a\u8fc7\u5176\u4ed6\u6570\u636e\u7c7b\u578b\u8f6c\u6362\u4e3a Type \u6570\u636e\u7c7b\u578b\uff0c\u6b64\u8f6c\u6362\u8fc7\u7a0b\u503c\u53ef\u80fd\u4e22\u5931\u90e8\u5206\u6570\u636e\u3002 \u5982\uff1a\u4f7f\u7528 getInt() \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u4e3a float \u7684\u5217\u6570\u636e\uff0c\u53ef\u83b7\u53d6 float \u5217\u6570\u636e\u7684\u6574\u6570\u503c\uff0c\u800c\u5c0f\u6570\u7cbe\u5ea6\u503c\u5c06\u4e22\u5931\u3002 Y\uff08\u76f4\u63a5\u8f6c\u6362\uff09\uff1a\u6307 get\\<Type> \u65b9\u6cd5\u4e2d\u7684 Type \u7c7b\u578b\u4e0e\u83b7\u53d6\u6570\u636e\u5e93\u4e2d\u5217\u7684\u6570\u636e\u7c7b\u578b\u4e00\u81f4\u3002 \u5982\uff1a\u4f7f\u7528 getInt() \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u4e3a integer \u7684\u5217\u6570\u636e\uff0c\u76f4\u63a5\u83b7\u53d6\u5b8c\u6574\u6570\u636e\u3002 {.is-info} P\uff08\u5141\u8bb8\u63d2\u5165\uff09\uff1a\u6307 set\\<Type> \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u5e93\u4e2d\u5217\u6570\u636e\u65f6\uff0c\u6570\u636e\u65e0\u635f\u5931\u5b58\u5165\u6570\u636e\u5e93\u4e2d\u3002 \u5982\uff1a\u4f7f\u7528 setInt() \u65b9\u6cd5\u8bbe\u7f6e\u5217\u6570\u636e\u7c7b\u578b\u4e3a bigint \u7684\u6570\u636e\u65f6\uff0c\u6570\u636e\u53ef\u6b63\u786e\u5b58\u5165\u3002 Z\uff08\u90e8\u5206\u63d2\u5165\uff09\uff1a\u6307 set\\<Type> \u65b9\u6cd5\u4e2d\u7684 Type \u7c7b\u578b\u548c\u6570\u636e\u5e93\u4e2d\u5217\u6570\u636e\u7c7b\u578b\u4e0d\u4e00\u81f4\uff0c\u6570\u636e\u4ec5\u80fd\u90e8\u5206\u6b63\u786e\u5b58\u5165\u3002 \u5982\uff1a\u4f7f\u7528 setInt() \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u5e93\u5217\u7c7b\u578b\u4e3a tinyint \u7684\u6570\u636e\uff0c\u56e0 tinyint \u8868\u793a\u8303\u56f4\u4e3a-128\uff5e127 \u7684\u6574\u6570\u503c\uff0c\u6545\u800c tinyint\u8868\u793a\u8303\u56f4\u5185\u6570\u636e\u53ef\u6b63\u786e\u5b58\u5165\uff0c\u8303\u56f4\u5916\u6570\u636e\u5c06\u63d2\u5165\u5931\u8d25\u3002 {.is-info}","title":"3.3 \u6570\u636e\u7c7b\u578b\u8f6c\u6362"},{"location":"JDBC4/#_2","text":"","title":"\u56db. \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5"},{"location":"JDBC4/#41-jdbc","text":"\u901a\u8fc7\u865a\u8c37 JDBC \u9a71\u52a8\u8bbf\u95ee\u865a\u8c37\u6570\u636e\u5e93\uff0c\u9996\u5148\u5e94\u4fdd\u8bc1\u5e94\u7528\u7a0b\u5e8f\u6b63\u786e\u5f15\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u5305 (cloudjdbc-*.*.*.jar)\uff0c\u5373\u5c06\u9a71\u52a8\u5305\u62f7\u8d1d\u81f3\u5e94\u7528\u7a0b\u5e8f\u5e76\u6dfb\u52a0\u5f15\u7528\u3002","title":"4.1 \u90e8\u7f72JDBC\u9a71\u52a8\u7a0b\u5e8f"},{"location":"JDBC4/#42-jdbc","text":"\u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u8fdb\u884c\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u8c03\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u7a0b\u5e8f\uff0c\u9996\u5148\u8981\u5c06\u865a\u8c37 JDBC \u9a71\u52a8\u52a0\u8f7d\u5230\u7cfb\u7edf\u5185\u5b58\u4e2d\uff0c\u7136\u540e\u4f9b\u7cfb\u7edf\u4f7f\u7528\u3002\u865a\u8c37 JDBC \u7684\u9a71\u52a8\u5b9e\u73b0\u7c7b\u4e3acom.xugu.cloudjdbc.Driver\uff0c\u4ee5\u4e0b\u662f\u5c06\u865a\u8c37 JDBC \u9a71\u52a8\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\u7684\u4ee3\u7801\uff1a //\u663e\u793a\u6ce8\u518c DriverManager.registerDriver(new com.xugu.cloudjdbc.Driver())\u037e //\u9690\u5f0f\u6ce8\u518c Class.forName(\u201ccom.xugu.cloudjdbc.Driver\u201d)\u037e \u9690\u5f0f\u6ce8\u518c\u5373\u901a\u8fc7 Class.forName() \u5c06\u5bf9\u5e94\u7684\u9a71\u52a8\u7c7b\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\uff0c\u5c06\u6267\u884c\u5185\u5b58\u4e2d\u7684 static \u9759\u6001\u4ee3\u7801\u6bb5\uff0c\u6b64\u4ee3\u7801\u6bb5\u4f1a\u521b\u5efa\u4e00\u4e2a\u865a\u8c37 JDBC \u9a71\u52a8\u7684\u5b9e\u4f8b\uff0c\u5e76\u653e\u5165 DriverManager \u4e2d\uff0c\u4f9b DriverManager \u4f7f\u7528\u3002 {.is-info}","title":"4.2 \u52a0\u8f7dJDBC\u9a71\u52a8\u7a0b\u5e8f"},{"location":"JDBC4/#43","text":"\u865a\u8c37 JDBC \u9a71\u52a8\u8fde\u63a5 URL \u4e32\u683c\u5f0f\uff1a jdbc:xugu://serverIP:portNumber/databaseName[?property=value[&property=value]] \u865a\u8c37 JDBC \u9a71\u52a8\u8fde\u63a5 URL \u4e32\u683c\u5f0f\uff1a 1). jdbc:xugu:// \uff1a\uff08\u5fc5\u9700\uff09\u865a\u8c37\u6570\u636e\u5e93\u7279\u5b9a\u534f\u8bae\u3002 2). serverIP \uff1a\uff08\u5fc5\u9700\uff09\u865a\u8c37\u6570\u636e\u5e93\u6240\u5728\u670d\u52a1\u5668\u7684 IP \u5730\u5740\u3002 3). portNumber\uff1a\uff08\u5fc5\u9700\uff09\u662f\u865a\u8c37\u6570\u636e\u5e93\u670d\u52a1 TCP \u8bbf\u95ee\u7aef\u53e3\uff0c\u9ed8\u8ba4 5138\u3002 4). databaseName\uff1a\uff08\u5fc5\u9700\uff09\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u5e93\u540d\u79f0\u3002 5). property\uff1a\uff08\u53ef\u9009\uff09\u865a\u8c37\u6570\u636e\u5e93\u7684 URL \u8fde\u63a5\u5c5e\u6027\u3002\u591a\u4e2a\u8fde\u63a5\u5c5e\u6027\u4e4b\u95f4\u4f7f\u7528\u201c&\u201d\u5206\u9694\uff0c\u4e0d\u53ef\u91cd\u590d\u3002 \u865a\u8c37 JDBC \u9a71\u52a8 URL \u4e32\u793a\u4f8b\u5982\u4e0b\uff1a String url = jdbc:xugu://localhost:5138/System?user=GUEST&password=GUEST\u037e property \u8bbe\u7f6e\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u6027\uff0c\u5e38\u7528\u8fde\u63a5\u5c5e\u6027\u89c1\u88684.1\u3002 \u88684.1 \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u6027 table th:first-of-type { width: 20%; } table th:nth-of-type(2) { width: 10%; } table th:nth-of-type(3) { width: 10%; } table th:nth-of-type(4) { width: 50%; } \u5c5e\u6027\u540d\u79f0 \u5fc5\u9009\u9879 \u53d6\u503c \u8bf4\u660e database \u221a \u5b57\u7b26\u4e32 \u6570\u636e\u5e93\u540d\u79f0 user \u221a \u5b57\u7b26\u4e32 \u7528\u6237\u540d\u79f0 password \u221a \u5b57\u7b26\u4e32 \u7528\u6237\u5bc6\u7801 encryptor \u00d7 \u5b57\u7b26\u4e32 \u7528\u4e8e\u542f\u52a8\u52a0\u5bc6\u6570\u636e\u5e93\uff0c\u82e5\u5e93\u672a\u52a0\u5bc6\uff0c\u5219\u53ef\u4e0d\u8981\uff0c\u4f46\u5e26\u4e0a\u6b64\u53c2\u6570\u4e0d\u4f1a\u5f71\u54cd\u8fde\u63a5 char_set \u00d7 \u5b57\u7b26\u4e32 \u8fde\u63a5\u5b57\u7b26\u96c6\u3002'GB2312'\u3001'GBK'\u3001'UTF8' \u7b49\uff0c\u9ed8\u8ba4\uff1aGBK time_zone \u00d7 \u5b57\u7b26\u4e32 \u5ba2\u6237\u7aef\u65f6\u533a\u3002\u9ed8\u8ba4\uff1a\u865a\u8c37\u6570\u636e\u5e93\u914d\u7f6e\u53c2\u6570 def_timezone \u6240\u8bbe\u7f6e\u65f6\u533a\uff08\u53ea\u5bf9\u7cfb\u7edf\u65f6\u95f4\u51fd\u6570\u751f\u6548\uff09 iso_level \u00d7 \u5b57\u7b26\u4e32 'READ COMMITED'\uff1a\u8bfb\u5df2\u63d0\u4ea4\uff1b 'REPEATIABLE READ'\uff1a\u53ef\u91cd\u590d\u8bfb\uff1b'SERIALIZABLE'\uff1a\u5e8f\u5217\u5316 lock_time \u00d7 \u6570\u503c \u5355\u4f4d\uff1a\u6beb\u79d2\uff0c\u9ed8\u8ba4\u503c\uff1a0\uff0c\u8868\u793a\u8fde\u63a5\u4e2d\u7684\u4e8b\u52a1\u9501\u5f81\u7528\u65f6\uff0c\u6700\u5927\u7b49\u5019\u65f6\u95f4\uff0c\u82e5\u5728\u8bbe\u7f6e\u65f6\u95f4\u5185\u52a0\u9501\u5931\u8d25\uff0c\u56de\u6eda\u4e8b\u52a1\u5e76\u62a5\u9519 lob_ret \u00d7 \u5b57\u7b26\u4e32 \u5927\u5bf9\u8c61\uff08Blob\u3001Clob\uff09\u6570\u636e\u8fd4\u56de\u65b9\u5f0f\u3002\u5c5e\u6027\u4e3a descriptor \u65f6\uff0c\u4ee5\u63cf\u8ff0\u7b26\u65b9\u5f0f\u8fd4\u56de\uff1b\u5176\u4ed6\u4ee5\u6570\u636e\u6d41\u65b9\u5f0f\u8fd4\u56de\u3002\u9ed8\u8ba4\uff1a\u4ee5\u6570\u636e\u6d41\u65b9\u5f0f\u8fd4\u56de return_rowid \u00d7 \u5e03\u5c14\u503c \u662f\u5426\u8fd4\u56de\u8bb0\u5f55 rowid \u503c\u3002\u5c5e\u6027\u4e3a TRUE \u65f6\uff0c\u8fd4\u56de rowid\uff1b\u5176\u4ed6\u8fd4\u56de FALSE\u3002\u9ed8\u8ba4\uff1aFALSE auto_commit \u00d7 on/off \u4e8b\u52a1\u662f\u5426\u81ea\u52a8\u63d0\u4ea4\u3002\u5c5e\u6027\u4e3a ON \u65f6\uff0c\u8fde\u63a5\u81ea\u52a8\u63d0\u4ea4\uff1b\u5c5e\u6027\u4e3a OFF\u65f6\uff0c\u8fde\u63a5\u975e\u81ea\u52a8\u63d0\u4ea4\u3002\u9ed8\u8ba4\uff1aON conn_type \u00d7 \u6570\u503c \u8d1f\u8f7d\u5747\u8861\u5206\u914d\u65b9\u5f0f\u3002\u5c5e\u6027\u4e3a 1 \u65f6\uff0c\u968f\u673a\u5206\u914d\uff1b\u5c5e\u6027\u4e3a 2 \u65f6\uff0c\u987a\u5e8f\u5206\u914d\u3002\u9ed8\u8ba4\uff1a2 ips \u00d7 \u5b57\u7b26\u4e32 \u8d1f\u8f7d\u5747\u8861\u8fde\u63a5 IP \u5730\u5740\uff0c\u591a\u4e2a IP \u5730\u5740\u4ee5\u9017\u53f7\u5206\u9694\uff08\u8be6\u7ec6\u89c1\u8d1f\u8f7d\u5747\u8861\uff09 CompatibleOracle \u00d7 \u5e03\u5c14\u503c \u517c\u5bb9 Oracle \u9009\u9879\u3002\u5c5e\u6027\u4e3a true\uff0c\u517c\u5bb9 Oracle\u037e \u5c5e\u6027\u4e3a FALSE\uff0c\u865a\u8c37 JDBC \u81ea\u6709\u5b9e\u73b0 recv_mode \u00d7 \u6570\u503c \u63a5\u6536\u6a21\u5f0f\u9009\u9879\u3002\u5c5e\u6027\u503c\u4e3a 0 \u65f6\uff0c\u672c\u5730\u5168\u63a5\u6536\u6a21\u5f0f\uff1b\u5c5e\u6027\u503c\u4e3a 1 \u65f6\uff0c\u7f51\u7edc\u63a5\u6536\u6a21\u5f0f\uff1b\u5c5e\u6027\u503c\u4e3a 2 \u65f6\uff0c\u670d\u52a1\u5668\u7aef\u6e38\u6807\u63a5\u6536\u6a21\u5f0f\u3002\u9ed8\u8ba4\uff1a0 emptyStringAsNull \u00d7 \u5e03\u5c14\u503c \u7a7a\u5b57\u4e32\u5904\u7406\u3002\u5c5e\u6027\u4e3a FALSE \u65f6\uff0c\u7a7a\u5b57\u7b26\u4e32\u8ba4\u5b9a\u4e3a NULL\uff1b\u5c5e\u6027\u4e3a TRUE \u65f6\uff0c\u7a7a\u5b57\u7b26\u4e32\u4fdd\u7559\u3002\u9ed8\u8ba4\uff1a\u7a7a\u5b57\u4e32\u4fdd\u7559 xgversion \u00d7 201/301 \u5ba2\u6237\u7aef\u534f\u8bae\u7248\u672c\uff0c\u865a\u8c37\u6570\u636e\u5e93V12\u7248\u672c\u5347\u7ea7\u652f\u6301301\u534f\u8bae\uff0c\u540c\u65f6\u517c\u5bb9201\u534f\u8bae SSL \u00d7 SSL \u8fde\u63a5\u52a0\u5bc6\u53c2\u6570\u3002\u5c5e\u6027\u503c\u3010SSL\uff1a\u542f\u7528SSL\u52a0\u5bc6\u4f20\u8f93\uff1bNSSL\uff1a\u7981\u7528SSL\u52a0\u5bc6\u4f20\u8f93\u3011 slowsqltime \u00d7 \u6570\u503c \u8bbe\u7f6e\u6162SQL\u6267\u884c\u65f6\u95f4\u3002SQL\u8bed\u53e5\u6267\u884c\u65f6\u95f4\u8d85\u8fc7\u8be5\u6570\u503c\uff0c\u65e5\u5fd7\u5219\u4f1a\u8f93\u51fa\u6267\u884cSQL batch_mode \u00d7 \u5e03\u5c14\u503c PreparedStatement\u662f\u5426\u4f7f\u7528\u6279\u91cf\u5904\u7406\u3002\u5c5e\u6027\u4e3a TRUE \u65f6\uff0cexecuteBatch\u91c7\u7528\u6279\u91cf\u6a21\u578b\uff1bFALSE\u5219\u91c7\u7528\u5355\u6761\u5904\u7406\u6a21\u578b\u3002\u9ed8\u8ba4\uff1aFALSE \u8fde\u63a5\u53c2\u6570\u4f7f\u7528SSL\u5c5e\u6027\u65f6\uff0c\u4f9d\u8d56\u7a0b\u5e8f\u5305\u4e2d\u63d0\u4f9b\u7684\u52a8\u6001\u94fe\u63a5\u5e93\uff0c\u4f7f\u7528\u524d\u9700\u5c06\u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u5230\u64cd\u4f5c\u7cfb\u7edf\u6307\u5b9a\u4f4d\u7f6e\u65b9\u53ef\u6b63\u5e38\u4f7f\u7528SSL\u52a0\u5bc6\u529f\u80fd\u3002 Windows 32\u4f4d\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u7528SSL\u5c5e\u6027\u524d\uff0c\u9700\u5c06\u7a0b\u5e8f\u5305 ssl/win32 \u4e0b xgssl.dll \u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u62f7\u8d1d\u5230\u7cfb\u7edf\u76ee\u5f55 C:/windows/system32 \u76ee\u5f55\u4f4d\u7f6e\u3002 Windows 64\u4f4d\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u7528SSL\u5c5e\u6027\u524d\uff0c\u9700\u5c06\u7a0b\u5e8f\u5305 ssl/win64 \u4e0b xgssl.dll \u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u62f7\u8d1d\u5230\u7cfb\u7edf\u76ee\u5f55 C:/windows/system32 \u76ee\u5f55\u4e0b\u3002 Linux X64\u4f4d\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u7528SSL\u5c5e\u6027\u524d\uff0c\u9700\u5c06\u7a0b\u5e8f\u5305 ssl/linux64 \u4e0b libxgssl.so \u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u62f7\u8d1d\u5230\u7cfb\u7edf\u76ee\u5f55 /usr/lib\u6216\u8005/usr/lib4 \u76ee\u5f55\u4e0b\u3002 \u865a\u8c37 JDBC \u8bbe\u7f6e\u8fde\u63a5\u5c5e\u6027\u793a\u4f8b\u5982\u4e0b (\u7248\u672c\u53f7\u3001\u5927\u5bf9\u8c61\u63cf\u8ff0\u7b26\u3001\u65f6\u533a\u3001\u5173\u95ed\u8fde\u63a5\u81ea\u52a8\u63d0\u4ea4)\uff1a String url=jdbc:xugu://localhost:5138/System?user=GUEST&password=GUEST&version=110&auto_commit=false&lob_ret=descriptor&time_zone=GMT-8:00\u037e","title":"4.3 \u8fde\u63a5\u5b57\u4e32\u53ca\u53c2\u6570\u8bbe\u7f6e"},{"location":"JDBC4/#44","text":"\u5728\u5e94\u7528\u7a0b\u5e8f\u5c06\u865a\u8c37 JDBC \u9a71\u52a8\u52a0\u8f7d\u5230\u7cfb\u7edf\u5185\u5b58\u4e2d\u540e\uff0c\u53ef\u901a\u8fc7 DriverManager \u7c7b\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u65b9\u6cd5\u5982\u4e0b\uff1a DriverManager.getConnection(String url)\u037e DriverManager.getConnection(String url,Properties)\u037e DriverManager.getConnection(String url,String user,String password)\u037e","title":"4.4 \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5"},{"location":"JDBC4/#_3","text":"\u901a\u8fc7 DriverManager \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u4ee5\u5916\uff0c\u8fd8\u53ef\u4ee5\u4f7f\u7528\u6570\u636e\u6e90\u6216\u8fde\u63a5\u6c60\u65b9\u5f0f\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u3002\u901a\u8fc7\u6570\u636e\u6e90\u65b9\u5f0f\u6216\u8fde\u63a5\u6c60\u65b9\u5f0f\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u6709\u4ee5\u4e0b\u4f18\u70b9\uff1a - \u8d44\u6e90\u91cd\u7528 \u7531\u4e8e\u6570\u636e\u5e93\u8fde\u63a5\u5f97\u5230\u91cd\u7528\uff0c\u907f\u514d\u4e86\u9891\u7e41\u521b\u5efa\u3001\u91ca\u653e\u8fde\u63a5\u5f15\u8d77\u7684\u5927\u91cf\u6027\u80fd\u5f00\u9500\u3002\u5728\u51cf\u5c11\u7cfb\u7edf\u6d88\u8017\u7684\u57fa\u7840\u4e0a\uff0c\u53e6\u4e00\u65b9\u9762\u4e5f\u589e\u8fdb\u4e86\u7cfb\u7edf\u8fd0\u884c\u73af\u5883\u7684\u5e73\u7a33\u6027\uff08\u51cf\u5c11\u5185\u5b58\u788e\u7247\u4ee5\u53ca\u6570\u636e\u5e93\u4e34\u65f6\u8fdb\u7a0b/\u7ebf\u7a0b\u7684\u6570\u91cf\uff09\u3002 - \u66f4\u5feb\u7684\u7cfb\u7edf\u54cd\u5e94 \u6570\u636e\u5e93\u8fde\u63a5\u6c60\u5728\u521d\u59cb\u5316\u8fc7\u7a0b\u4e2d\uff0c\u5f80\u5f80\u5df2\u7ecf\u521b\u5efa\u4e86\u82e5\u5e72\u6570\u636e\u5e93\u8fde\u63a5\u7f6e\u4e8e\u6c60\u4e2d\u5907\u7528\u3002\u6b64\u65f6\u8fde\u63a5\u7684\u521d\u59cb\u5316\u5de5\u4f5c\u5747\u5df2\u5b8c\u6210\u3002\u5bf9\u4e8e\u4e1a\u52a1\u8bf7\u6c42\u5904\u7406\u800c\u8a00\uff0c\u76f4\u63a5\u5229\u7528\u73b0\u6709\u53ef\u7528\u8fde\u63a5\uff0c\u907f\u514d\u4e86\u6570\u636e\u5e93\u8fde\u63a5\u521d\u59cb\u5316\u548c\u91ca\u653e\u8fc7\u7a0b\u7684\u65f6\u95f4\u5f00\u9500\uff0c\u4ece\u800c\u7f29\u51cf\u4e86\u7cfb\u7edf\u6574\u4f53\u54cd\u5e94\u65f6\u95f4\u3002 - \u65b0\u7684\u8d44\u6e90\u5206\u914d\u624b\u6bb5 \u5bf9\u4e8e\u591a\u5e94\u7528\u5171\u4eab\u540c\u4e00\u6570\u636e\u5e93\u7684\u7cfb\u7edf\u800c\u8a00\uff0c\u53ef\u5728\u5e94\u7528\u5c42\u901a\u8fc7\u6570\u636e\u5e93\u8fde\u63a5\u7684\u914d\u7f6e\uff0c\u9650\u5236\u5355\u4e00\u5e94\u7528\u7533\u8bf7\u6570\u636e\u5e93\u8fde\u63a5\u6570\uff0c\u4ece\u800c\u907f\u514d\u5355\u4e00\u5e94\u7528\u72ec\u5360\u6240\u6709\u6570\u636e\u5e93\u8d44\u6e90\u3002 \u865a\u8c37 JDBC \u4e2d\u6570\u636e\u6e90\u5b9e\u73b0\u7c7b\u4e3a com.xugu.pool.XgDataSource\uff0c\u8fde\u63a5\u6c60\u5b9e\u73b0\u7c7b\u4e3acom.xugu.pool \u5305\u4e2d\u7684 XgDataSource\u3001XgPooledConnection\u3001XgConnectionPoolDataSource\u3001XgConnectionEventListener\u3001XgConnectionEvent\u3002","title":"\u4e94. \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u6e90\u548c\u8fde\u63a5\u6c60"},{"location":"JDBC4/#51","text":"XgDataSource \u63d0\u4f9b set \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u6e90\u8fde\u63a5\u5c5e\u6027\uff1a \u793a\u4f8b\uff1a\u901a\u8fc7 XgDataSource \u4e0e\u865a\u8c37\u6570\u636e\u5e93\u5efa\u7acb\u8fde\u63a5 com.xugu.pool.XgDataSource ds = new com.xugu.pool.XgDataSource()\u037e ds.setUrl(\"jdbc:xugu://127.0.0.1:5138/db\")\u037e ds.setUser(\"SYSDBA\")\u037e ds.setPassword(\"SYSDBA\")\u037e Properties pro = new Properties()\u037e pro.setProperty(\"return_rowid\", \"true\")\u037e pro.setProperty(\"auto_commit\", \"off\")\u037e ds.setPro(pro)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u767b\u5f55\u4e32\u3002url\u4e3a\u6570\u636e\u5e93\u767b\u5f55\u4e32 setUrl(String url)\uff1b //\u6307\u5b9a\u6570\u636e\u5e93\u670d\u52a1\u5668\u3002host\u4e3a\u670d\u52a1\u5668\u5730\u5740 setHostName(String host)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u540d\u3002dbName\u4e3a\u6570\u636e\u5e93\u540d setDatabaseName(String dbName)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u7aef\u53e3\u53f7\u3002port\u4e3a\u6570\u636e\u5e93\u7aef\u53e3\u53f7 setPort(int port)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u7528\u6237\u3002userName\u4e3a\u6570\u636e\u5e93\u767b\u5f55\u7528\u6237\u540d setUser(String userName)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u767b\u5f55\u5bc6\u7801\u3002passWord\u4e3a\u6570\u636e\u5e93\u767b\u5f55\u5bc6\u7801 setPassword(Stirng passWord)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u767b\u5f55\u53c2\u6570\u3002ds_pro\u4e3a\u6570\u636e\u5e93\u8fde\u63a5\u53c2\u6570 setPro(Properties ds_pro)\uff1b // \u901a\u8fc7\u6570\u636e\u6e90\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5 Connection conn = ds.getConnection()\u037e \u5728 com.xugu.pool.XgDataSource \u7c7b\u4e2d\u901a\u8fc7 setXX() \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u6e90\u7684\u8fde\u63a5\u5c5e\u6027\uff0c\u82e5\u672a\u6307\u5b9a\u5219\u4f7f\u7528\u9ed8\u8ba4\u5c5e\u6027\u503c\uff1a\u6570\u636e\u5e93\u670d\u52a1\u5668\u5730\u5740\u9ed8\u8ba4\u4e3a\u201clocalhost\u201d \uff0c\u8fde\u63a5\u6570\u636e\u5e93\u9ed8\u8ba4\u4e3a\u201cSYSTEM\u201d \uff0c\u8bbf\u95ee\u7aef\u53e3\u53f7\u9ed8\u8ba4\u4e3a\u201c5138\u201d \uff0c\u8bbf\u95ee\u7528\u6237\u540d\u9ed8\u8ba4\u4e3a\u201cGUEST\u201d \uff0c\u7528\u6237\u5bc6\u7801\u9ed8\u8ba4\u4e3a\u201cGUEST\u201d \u3002URL \u9ed8\u8ba4\u8fde\u63a5\u4e32\u4e3a\u201cjdbc:xugu://127.0.0.1:5138/SYSTEM?user=GUEST&password=GUEST&version=110\u201d\u3002\u6570\u636e\u6e90\u5efa\u7acb\u540e\uff0c\u53ef\u901a\u8fc7\u8c03\u7528 XgDataSource \u7c7b\u4e2d\u7684 getConnection() \u548c getConnection(String username,String password) \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u3002","title":"5.1 \u4f7f\u7528\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u6e90\u521b\u5efa\u8fde\u63a5"},{"location":"JDBC4/#52","text":"\u8fde\u63a5\u6c60\u6280\u672f\u7684\u6838\u5fc3\u601d\u60f3\u662f\uff1a\u8fde\u63a5\u590d\u7528\uff0c\u901a\u8fc7\u5efa\u7acb\u4e00\u4e2a\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u4ee5\u53ca\u4e00\u5957\u8fde\u63a5\u4f7f\u7528\u3001\u5206\u914d\u3001\u7ba1\u7406\u7b56\u7565\uff0c\u8be5\u8fde\u63a5\u6c60\u4e2d\u7684\u8fde\u63a5\u53ef\u4ee5\u5f97\u5230\u9ad8\u6548\u3001\u5b89\u5168\u7684\u590d\u7528\uff0c\u907f\u514d\u4e86\u6570\u636e\u5e93\u8fde\u63a5\u9891\u7e41\u5efa\u7acb\u3001\u5173\u95ed\u7684\u5f00\u9500\u3002 \u865a\u8c37 JDBC \u8fde\u63a5\u6c60\u5b9e\u73b0\u7c7b\u5bf9\u865a\u8c37\u6570\u636e\u5e93\u539f\u59cb\u8fde\u63a5\u8fdb\u884c\u4e86\u5c01\u88c5\uff0c\u4ece\u800c\u65b9\u4fbf\u4e86\u6570\u636e\u5e93\u5e94\u7528\u5bf9\u4e8e\u8fde\u63a5\u7684\u4f7f\u7528\uff08\u7279\u522b\u662f\u5bf9\u4e8e\u4e8b\u52a1\u5904\u7406\uff09\uff0c\u63d0\u9ad8\u4e86\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u6548\u7387\uff0c\u4e5f\u6b63\u662f\u56e0\u4e3a\u8fd9\u4e2a\u5c01\u88c5\u5c42\u7684\u5b58\u5728\uff0c\u9694\u79bb\u4e86\u5e94\u7528\u7684\u672c\u8eab\u7684\u5904\u7406\u903b\u8f91\u548c\u5177\u4f53\u6570\u636e\u5e93\u8bbf\u95ee\u903b\u8f91\uff0c\u4f7f\u5e94\u7528\u672c\u8eab\u7684\u590d\u7528\u6210\u4e3a\u53ef\u80fd\u3002\u8fde\u63a5\u6c60\u4e3b\u8981\u7531\u4e09\u90e8\u5206\u7ec4\u6210\uff1a\u8fde\u63a5\u6c60\u7684\u5efa\u7acb\u3001\u8fde\u63a5\u6c60\u4e2d\u8fde\u63a5\u7684\u4f7f\u7528\u7ba1\u7406\u3001\u8fde\u63a5\u6c60\u7684\u5173\u95ed\u3002 \u865a\u8c37 JDBC \u8fde\u63a5\u6c60\u7684\u57fa\u672c\u601d\u60f3\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u5efa\u7acb\u4e00\u4e2a\u201c\u7f13\u51b2\u6c60\u201d\u3002\u9884\u5148\u5728\u201c\u7f13\u51b2\u6c60\u201d\u4e2d\u653e\u5165\u4e00\u5b9a\u6570\u91cf\u7684\u8fde\u63a5\uff0c\u5f53\u9700\u8981\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65f6\uff0c\u53ea\u9700\u4ece\u201c\u7f13\u51b2\u6c60\u201d\u4e2d\u53d6\u51fa\u4e00\u4e2a\uff0c\u4f7f\u7528\u5b8c\u6bd5\u4e4b\u540e\u518d\u653e\u56de\u53bb\u3002\u901a\u8fc7\u8bbe\u5b9a\u8fde\u63a5\u6c60\u6700\u5927\u8fde\u63a5\u6570\u6765\u9632\u6b62\u7cfb\u7edf\u65e0\u5c3d\u7684\u4e0e\u6570\u636e\u5e93\u8fde\u63a5\u3002\u4ea6\u53ef\u901a\u8fc7\u8fde\u63a5\u6c60\u7684\u7ba1\u7406\u673a\u5236\u76d1\u89c6\u6570\u636e\u5e93\u7684\u8fde\u63a5\u6570\u91cf\u3001\u4f7f\u7528\u60c5\u51b5\uff0c\u4e3a\u7cfb\u7edf\u5f00\u53d1\u3001\u6d4b\u8bd5\u53ca\u6027\u80fd\u8c03\u6574\u63d0\u4f9b\u4f9d\u636e\u3002 \u5f53\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u5b8c\u6570\u636e\u5e93\u8fde\u63a5\u8c03\u7528\u8fde\u63a5\u5173\u95ed\u65b9\u6cd5\u65f6\uff0c\u8be5\u8fde\u63a5\u5e76\u672a\u9500\u6bc1\uff0c\u800c\u662f\u88ab\u5f52\u8fd8\u7ed9\u8fde\u63a5\u6c60\u7b49\u5f85\u4e0b\u6b21\u7ee7\u7eed\u8c03\u7528\u3002 {.is-info} \u865a\u8c37 JDBC \u5b9e\u73b0\u8fde\u63a5\u6c60\u670d\u52a1\u6240\u63d0\u4f9b\u7684\u63a5\u53e3\u7c7b\u5982\u4e0b\uff1a - XgDataSource \u5b9e\u73b0 javax.sql.DataSource \u63a5\u53e3\uff1b - XgPooledConnection \u5b9e\u73b0 javax.sql.PooledConnection \u63a5\u53e3\uff1b - XgConnectionPoolDataSource \u5b9e\u73b0 javax.sql.ConnectionPoolDataSource \u63a5\u53e3\uff1b - XgConnectionEventListener \u5b9e\u73b0 javax.sql.ConnectionEventListener \u63a5\u53e3\uff1b - XgConnectionEvent \u7ee7\u627f\u81ea javax.sql.ConnectionEvent \u7c7b\u3002 \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u4e2d\u7684\u8fde\u63a5\u5747\u662f\u901a\u8fc7\u6570\u636e\u6e90\u5efa\u7acb\u7684\uff0c\u6545\u800c XgConnectionPoolDataSource \u7ee7\u627f\u4e86 com.xugu.pool.XgDataSource \u7c7b\u3002\u7528\u6237\u4ea6\u53ef\u901a\u8fc7 XgConnectionPoolDataSource \u5bf9\u8c61\u8bbe\u7f6e\u6570\u636e\u6e90\u5c5e\u6027\u548c\u8fde\u63a5\u6c60\u5c5e\u6027\uff1a //\u6700\u5c0f\u8fde\u63a5\u6570 setMinIdle(int min) //\u6700\u5927\u8fde\u63a5\u6570 setMaxActive(int max) //\u767b\u5f55\u7a7a\u95f2\u65f6\u95f4 setLoginTimeout(int time) //\u6700\u5927\u7b49\u5f85\u8fde\u63a5\u8d85\u65f6 setMaxWaitTime(long waitTime) \u5176\u4e2d\uff1asetLoginTimeout() \u548c setMaxWaitTime() \u65b9\u6cd5\u4e2d\u53c2\u6570\u5355\u4f4d\u4e3a\u6beb\u79d2\uff0c\u5176\u4ed6\u65b9\u6cd5\u4e2d\u53c2\u6570\u5355\u4f4d\u4e3a\u79d2\u3002 \u793a\u4f8b\uff1a\u521b\u5efa\u4e00\u4e2a\u865a\u8c37 JDBC \u8fde\u63a5\u6c60\uff0c\u5e76\u901a\u8fc7\u8fde\u63a5\u6c60\u83b7\u53d6\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u3002 XgConnectionPoolDataSource CPDSource = new XgConnectionPoolDataSource()\u037e CPDSource.setHostName(\u201clocalhost\u201d)\u037e CPDSource.setPort(5138)\u037e CPDSource.setDatabaseName(\u201cxuguNew\u201d)\u037e CPDSource.setUser(\u201cSYSDBA\u201d)\u037e CPDSource.setPassword(\u201cSYSDBA\u201d)\u037e CPDSource.setUrl(\"jdbc:xugu://localhost:5138/xuguNew)\u037e CPDSource.setMaxActive(50)\u037e CPDSource.setMinIdle(5)\u037e CPDSource.setLoginTimeout(3000)\u037e CPDSource.setMaxWaitTime(3000)\u037e XgPooledConnection Pconn = (XgPooledConnection)CPDSource.getPooledConnection()\u037e Connection conn = Pconn.getConnection()\u037e","title":"5.2 \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u6c60"},{"location":"JDBC4/#jdbc_2","text":"\u4f7f\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u5b9e\u73b0\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u4ea4\u4e92\u7684\u4e00\u822c\u4f7f\u7528\u6b65\u9aa4\uff1a\u5bfc\u5165\u865a\u8c37 JDBC \u9a71\u52a8\u5305 \u2192 \u52a0\u8f7d\u865a\u8c37 JDBC \u9a71\u52a8\u7a0b\u5e8f \u2192 \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5 Connection \u2192 \u521b\u5efa\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61 Statement \u2192 \u6267\u884c SQL \u8bed\u53e5 \u2192 \u5904\u7406\u6267\u884c\u7ed3\u679c ResultSet \u2192 \u91ca\u653e\u8d44\u6e90\u3002 - \u7b2c 1 \u6b65\uff1a\u5bfc\u5165\u865a\u8c37 JDBC \u9a71\u52a8\u5305 - \u7b2c 2 \u6b65\uff1a\u6ce8\u518a\u9a71\u52a8 (\u4ec5\u505a\u4e00\u6b21) - \u7b2c 3 \u6b65\uff1a\u5efa\u7acb\u8fde\u63a5 (Connection) - \u7b2c 4 \u6b65\uff1a\u521b\u5efa\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61 (Statement) - \u7b2c 5 \u6b65\uff1a\u6267\u884c SQL \u8bed\u53e5 - \u7b2c 6 \u6b65\uff1a\u5904\u7406\u6267\u884c\u7ed3\u679c (ResultSet) - \u7b2c 7 \u6b65\uff1a\u91ca\u653e\u8d44\u6e90","title":"\u516d. \u865a\u8c37\u6570\u636e\u5e93\u7684JDBC\u4ea4\u4e92\u6d41\u7a0b"},{"location":"JDBC4/#61-jdbc","text":"\u4e0b\u8f7d\u865a\u8c37\u6570\u636e\u5e93\u4e13\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u5305 (cloudjdbc-*.*.*.jar)\uff0c\u5e76\u5bfc\u5165\u5230\u5e94\u7528\u7a0b\u5e8f\u4e2d\u3002","title":"6.1 \u5bfc\u5165\u865a\u8c37JDBC\u9a71\u52a8\u5305"},{"location":"JDBC4/#62-jdbc","text":"\u865a\u8c37 JDBC \u9a71\u52a8\u7a0b\u5e8f\u4e2d Driver \u63a5\u53e3\u5b9e\u73b0\u7c7b\u4e3a com.xugu.cloudjdbc.Driver\u3002\u52a0\u8f7d\u9a71\u52a8\u65b9\u5f0f\u4e3a DriverManager.registerDriver(new com.xugu.cloudjdbc.Driver()) \u6216Class.forName(\u201ccom.xugu.cloudjdbc.Driver\u201d)\u3002","title":"6.2 \u52a0\u8f7d\u865a\u8c37JDBC\u9a71\u52a8"},{"location":"JDBC4/#63","text":"\u5efa\u7acb\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u7684\u65b9\u5f0f\u6709\u591a\u79cd\uff0c\u53ef\u6839\u636e\u5e94\u7528\u7a0b\u5e8f\u5b9e\u9645\u4f7f\u7528\u573a\u666f\u9009\u62e9\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65b9\u5f0f\u3002\u5e38\u89c1\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65b9\u5f0f\u5982\u4e0b\uff1a - \u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u4f7f\u7528 DriverManager \u83b7\u5f97\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\uff1b - \u4f7f\u7528\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u6e90/\u8fde\u63a5\u6c60\u7684\u65b9\u5f0f\u83b7\u53d6\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\uff1b - \u4f7f\u7528\u7b2c\u4e09\u65b9\u901a\u7528\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u65b9\u5f0f\u83b7\u53d6\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u3002 \u5982\uff1adruid\u3001c3p0\u3001dbcp\u3001JNDI \u7b49\u3002","title":"6.3 \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5"},{"location":"JDBC4/#631","text":"\u6253\u5f00\u6570\u636e\u5e93\u8fde\u63a5\u5373\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u5bf9\u8c61 Connection \u7c7b\u3002 \u5982\uff1aDriverManager \u901a\u8fc7 getConnection() \u65b9\u6cd5\u83b7\u53d6 Connection \u7c7b\u5bf9\u8c61\u3002DriverManager \u7684 getConnection() \u65b9\u6cd5\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\u7684\u65b9\u5f0f\u4ea6\u6709\u591a\u79cd\u3002\u4ee5\u4e0b\u4e3a\u5e38\u89c1\u65b9\u5f0f\uff1a - getConnection(String url) \u53c2\u6570\u8bf4\u660e\uff1a - url\uff1a\u8bbf\u95ee\u6570\u636e\u5e93\u7684 URL \u8def\u5f84\u3002 \u793a\u4f8b\uff1a \u4e0b\u9762\u7684\u4ee3\u7801\u5229\u7528 getConnection \u65b9\u6cd5\u521b\u5efa\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u3002 ``` public Connection getConnection(){ Connection con=null\u037e try{ //\u6ce8\u518c\u6570\u636e\u5e93\u9a71\u52a8 Class.forName(\"com.xugu.cloudjdbc.Driver\")\u037e //\u5b9a\u4e49\u8fde\u63a5\u6570\u636e\u5e93\u7684url String url = \"jdbc:xugu://localhost:5138/db?user=user1\uff06password=pwd\"\u037e //\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5 con = DriverManager.getConnection(url)\u037e System.out.println(\"\u6570\u636e\u5e93\u8fde\u63a5\u6210\u529f\uff01\")\u037e }catch(Exception e){ e.printStackTrace()\u037e } //\u8fd4\u56de\u4e00\u4e2a\u8fde\u63a5 return con\u037e } ``` getConnection(String url,String user,String password) \u53c2\u6570\u8bf4\u660e\uff1a url\uff1a\u8bbf\u95ee\u6570\u636e\u5e93\u7684 URL \u8def\u5f84\u3002 user\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u7528\u6237\u540d\u3002 password\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u7528\u6237\u5bc6\u7801\u3002 \u793a\u4f8b\uff1a \u4e0b\u9762\u7684\u4ee3\u7801\u5229\u7528 getConnection \u65b9\u6cd5\u521b\u5efa\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u3002 private Connection con; private String user = \"user1\"; //\u5b9a\u4e49\u8fde\u63a5\u6570\u636e\u5e93\u7684\u7528\u6237\u540d private String password = \"pwd\"; //\u5b9a\u4e49\u8fde\u63a5\u6570\u636e\u5e93\u7684\u5bc6\u7801 private String className = \"com.xugu.cloudjdbc.Driver\";//\u5b9a\u4e49\u865a\u8c37JDBC\u9a71\u52a8 private String url = \"jdbc:xugu://localhost:5138/db\"; /\\*\\*\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\\*/ public Connection getConnection(){ try{ Class.forName(className);//\u52a0\u8f7d\u6570\u636e\u5e93\u9a71\u52a8 System.out.println(\"\u6570\u636e\u5e93\u9a71\u52a8\u52a0\u8f7d\u6210\u529f\uff01\"); con = DriverManager.getConnection(url,user,password); //\u8fde\u63a5\u6570\u636e\u5e93 System.out.println(\"\u6210\u529f\u5730\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\uff01\"); }catch(Exception e){ System.out.println(\"\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\u5931\u8d25\uff01\"); con = null; e.printStackTrace(); } finally { If(conn != null){ //\u91ca\u653e\u8fde\u63a5\u8d44\u6e90 conn.close(); } } return con; } getConnection(String url,Properties info) \u53c2\u6570\u8bf4\u660e\uff1a url\uff1a\u8bbf\u95ee\u6570\u636e\u5e93\u7684 URL \u8def\u5f84\u3002 info\uff1a\u4e00\u4e2a\u6301\u4e45\u7684\u5c5e\u6027\u96c6\u5bf9\u8c61\uff0c\u5305\u62ec user \u548c password \u7b49\u5c5e\u6027\u3002 \u793a\u4f8b\uff1a \u4e0b\u9762\u7684\u4ee3\u7801\u5229\u7528 getConnection \u65b9\u6cd5\u521b\u5efa\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u3002 public Connection getConnection(){ Connection con = null; //\u5b9a\u4e49\u6570\u636e\u5e93\u8fde\u63a5\u5bf9\u8c61 Properties info = new Properties(); //\u5b9a\u4e49Properties\u5bf9\u8c61 info.setProperty(\"user\",\"user1\"); //\u8bbe\u7f6eProperties\u5bf9\u8c61\u5c5e\u6027 info.setProperty(\"password\",\"pwd\"); try{ //\u6ce8\u518c\u6570\u636e\u5e93\u9a71\u52a8 Class.forName(\"com.xugu.cloudjdbc.Driver\"); //test\u4e3a\u6570\u636e\u5e93\u540d\u79f0 String url = \"jdbc:xugu://localhost:5138/db\"; //\u83b7\u53d6\u8fde\u63a5\u6570\u636e\u5e93\u7684Connection\u5bf9\u8c61 con = DriverManager.getConnection(url,info); System.out.println(\"\u6570\u636e\u5e93\u8fde\u63a5\u6210\u529f\uff01\"); }catch(Exception e){ e.printStackTrace(); } //\u8fd4\u56de\u4e00\u4e2a\u8fde\u63a5 return con; }","title":"6.3.1 \u6253\u5f00\u6570\u636e\u5e93\u8fde\u63a5"},{"location":"JDBC4/#632","text":"\u6570\u636e\u5e93\u4e8b\u52a1 (transaction) \u662f\u8bbf\u95ee\u5e76\u53ef\u80fd\u64cd\u4f5c\u5404\u79cd\u6570\u636e\u9879\u7684\u4e00\u4e2a\u6570\u636e\u5e93\u64cd\u4f5c\u5e8f\u5217\uff0c\u8fd9\u4e9b\u64cd\u4f5c\u8981\u4e48\u5168\u90e8\u6267\u884c, \u8981\u4e48\u5168\u90e8\u4e0d\u6267\u884c\uff0c\u662f\u4e00\u4e2a\u4e0d\u53ef\u5206\u5272\u7684\u5de5\u4f5c\u5355\u4f4d\u3002\u4e8b\u52a1\u7531\u4e8b\u52a1\u5f00\u59cb\u5230\u4e8b\u52a1\u7ed3\u675f\u4e4b\u95f4\u6267\u884c\u7684\u5168\u90e8\u6570\u636e\u5e93\u64cd\u4f5c\u7ec4\u6210\u3002 \u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\uff0c\u5373\u5f53\u4e00\u6761 SQL \u8bed\u53e5\u6267\u884c\u5b8c\u6210\u540e\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u5c06\u81ea\u52a8\u63d0\u4ea4\u8be5\u8bed\u53e5\u6240\u5728\u4e8b\u52a1\u3002\u5728\u865a\u8c37 JDBC \u9a71\u52a8\u4e2d\u63a7\u5236\u4e8b\u52a1\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a - \u901a\u8fc7\u6570\u636e\u5e93\u8fde\u63a5 URL \u4e32\u7684 auto_commit \u5c5e\u6027\uff0c\u63a7\u5236\u4e8b\u52a1\u7684\u5f00\u542f\u4e0e\u5173\u95ed\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b auto_commit \u5c5e\u6027\u4e3a on\uff0c\u5373\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u3002 - \u901a\u8fc7 Connection \u7c7b\u7684 setAutoCommit(boolean commit) \u65b9\u6cd5\u63a7\u5236\u4e8b\u52a1\u7684\u5f00\u542f\u4e0e\u5173\u95ed\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b commit \u5c5e\u6027\u4e3a TRUE\uff0c\u5373\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u3002 \u5728\u7981\u7528\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u4e0b\uff0c\u4f7f\u7528 Connection \u7c7b\u7684 commit() \u65b9\u6cd5\u63d0\u4ea4 SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u505a\u7684\u66f4\u6539\uff0c\u800c Connection \u7c7b\u7684 rollback() \u65b9\u6cd5\u5c06\u56de\u6eda SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u7684\u66f4\u6539\uff0c\u4e0a\u8ff0\u4e24\u79cd\u65b9\u6cd5\u6267\u884c\u5b8c\u6210\u540e\u5747\u5c06\u91ca\u653e\u4e8b\u52a1\u6301\u6709\u7684\u5168\u90e8\u9501\u8d44\u6e90\u3002 \u4e8b\u52a1\u4ec5\u5bf9\u6570\u636e\u5e93 DML \u64cd\u4f5c\u6709\u6548\u3002 {.is-info} \u4ee5\u4e0b\u4e3a\u4f7f\u7528 setAutoCommit() \u65b9\u6cd5\u63a7\u5236\u4e8b\u52a1\u63d0\u4ea4\u7684\u793a\u4f8b\u4ee3\u7801\uff1a //\u8bbe\u7f6e\u4e8b\u52a1\u4e3a\u975e\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f conn.setAutoCommit(false)\u037e //\u521b\u5efa\u6570\u636e\u5e93Statement\u5bf9\u8c61 Statement stm = conn.createStatement()\u037e //\u6570\u636e\u5e93\u4e8b\u52a1\u6267\u884cSQL\u8bed\u53e5 String sql = \"insert into test (comp_id,comp_name) values(1,'comp')\"\u037e //\u6267\u884c\u9759\u6001SQL\u8bed\u53e5 stm.execute(sql)\u037e //\u6570\u636e\u5e93\u9884\u5904\u7406SQL\u8bed\u53e5 PreparedStatement pstm = conn. prepareStatement(\u201cupdate test set id=? where comp_name=?\u201d) //\u9884\u5904\u7406SQL\u8bed\u53e5\u7b2c\u4e00\u4e2a\u53c2\u6570\u8d4b\u503c pstm.setInt(1,15)\u037e //\u9884\u5904\u7406SQL\u8bed\u53e5\u7b2c\u4e8c\u4e2a\u53c2\u6570\u8d4b\u503c pstm.setString(2,'DBMS')\u037e //\u6267\u884c\u9884\u5904\u7406SQL\u8bed\u53e5 pstm.execute()\u037e //\u63d0\u4ea4\u4e8b\u52a1 conn.commit()\u037e //\u5220\u9664\u8868\u4e2d\u6307\u5b9a\u884c\u6570\u636e stm.execute(\u201cdelete from test where id=15\u201d)\u037e //\u4e8b\u52a1\u56de\u6eda\u65b9\u6cd5 conn.rollback()\u037e \u4e0a\u9762\u4ee3\u7801\u4e2d\u6267\u884c\u63d0\u4ea4\u4e8b\u52a1\u64cd\u4f5c\uff0c\u6267\u884c\u9759\u6001 SQL \u8bed\u53e5\u4e0e\u6267\u884c\u9884\u5904\u7406 SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u7684\u66f4\u6539\u5c06\u6c38\u4e45\u751f\u6548\uff1b\u800c\u540e\u6267\u884c\u7684\u5220\u9664\u8868\u4e2d\u6307\u5b9a\u884c\u6570\u636e\u64cd\u4f5c\uff0c\u56e0\u5176\u540e\u8c03\u7528\u7684 rollback() \u65b9\u6cd5\uff0cdelete \u547d\u4ee4\u5bf9\u6570\u636e\u5e93\u7684\u6570\u636e\u66f4\u6539\u5c06\u88ab\u56de\u6eda\u6389\uff0c\u6545\u800c\u5bf9\u6570\u636e\u5e93\u7684\u5220\u9664\u64cd\u4f5c\u4e0d\u4f1a\u751f\u6548\u3002","title":"6.3.2 \u8fde\u63a5\u4e8b\u52a1\u7ba1\u7406"},{"location":"JDBC4/#633-savepoint","text":"JDBC \u89c4\u8303 3.0 \u4e2d\u4e3a\u4e86\u589e\u52a0\u5bf9\u4e8b\u52a1\u7684\u63a7\u5236\uff0c\u65b0\u589e Savepoint \u63a5\u53e3\uff0c\u5176\u4ee3\u8868\u4e8b\u52a1\u4e2d\u7684\u4e00\u4e2a\u903b\u8f91\u4e8b\u52a1\u70b9\u3002\u5728\u975e\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u4e0b\uff0c\u4e00\u4e2a\u4e8b\u52a1\u4e2d\u53ef\u4ee5\u8bbe\u7f6e\u591a\u4e2a Savepoint\uff0c\u5728\u4ee3\u7801\u4e2d\u8fdb\u884c\u4e8b\u52a1\u56de\u6eda\u64cd\u4f5c\u65f6\uff0c\u53ef\u4ee5\u6307\u5b9a\u4e8b\u52a1\u56de\u6eda\u5230\u6307\u5b9a Savepoint \u4f4d\u7f6e\uff0c\u6307\u5b9a\u56de\u6eda\u4f4d\u7f6e\u524d\u7684\u4e8b\u52a1\u64cd\u4f5c\u4ecd\u7136\u4fdd\u7559\u3002\u6b64\u63a5\u53e3\u5927\u5927\u63d0\u9ad8\u4e86\u4e8b\u52a1\u5904\u7406\u7684\u7c92\u5ea6\uff0c\u65b9\u4fbf\u5e94\u7528\u7a0b\u5e8f\u63a7\u5236\u4e8b\u52a1\u5904\u7406\u903b\u8f91\u3002 \u793a\u4f8b\uff1a\u8fde\u63a5\u4e8b\u52a1\u63a7\u5236\u63a5\u53e3 Savepoint \u4f7f\u7528 //\u8bbe\u7f6e\u975e\u81ea\u52a8\u63d0\u4ea4 conn.setAutoCommit(false); //\u521b\u5efaStatement\u5bf9\u8c61 Statement stm = conn.createStatement(); //\u6267\u884cSQL\u547d\u4ee4 stm.execute(sql1); stm.execute(sql2); //\u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\u70b9save1 java.sql.Savepoint save1 =conn.setSavepoint(\"save_1\"); stm.execute(sql3); //\u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\u70b9save2 java.sql.Savepoint save2 =conn.setSavepoint(\"save_2\"); stm.execute(sql4); //\u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\u70b9save3 java.sql.Savepoint save3 =conn.setSavepoint(\"save_3\"); stm.execute(sql5); //\u56de\u6eda\u4e8b\u52a1\u5230\u56de\u6eda\u70b9save3 conn.rollback(save3); conn.commit(); \u4ee5\u4e0a\u4ee3\u7801\u6bb5\u4e2d\uff0c\u4e8b\u52a1\u6267\u884c\u8bed\u53e5 sql5 \u5c06\u88ab\u56de\u6eda\u6389\u3002","title":"6.3.3 \u8fde\u63a5\u4e8b\u52a1\u63a7\u5236\uff0cSavepoint\u63a5\u53e3"},{"location":"JDBC4/#64-sql","text":"\u5728\u6570\u636e\u5e93\u6807\u51c6\u4e2d\uff0c\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61\u5206\u4e3a\u4e09\u7c7b\uff1a\u6267\u884c\u9759\u6001 SQL \u8bed\u53e5\u7684 Statement \u5bf9\u8c61\u3001\u6267\u884c\u9884\u7f16\u8bd1 SQL \u8bed\u53e5\u7684 PreparedStatement \u5bf9\u8c61\u4ee5\u53ca\u6267\u884c\u6570\u636e\u5e93\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\u7684 CallableStatement \u5bf9\u8c61\u3002","title":"6.4 \u521b\u5efa\u6267\u884cSQL\u8bed\u53e5\u5bf9\u8c61"},{"location":"JDBC4/#641-sqlstatement","text":"Statement \u5bf9\u8c61\u7528\u4e8e\u6267\u884c\u9759\u6001 SQL \u8bed\u53e5\u548c\u83b7\u5f97 SQL \u4ea7\u751f\u7684\u7ed3\u679c\u3002\u5728\u865a\u8c37 JDBC \u9a71\u52a8\u4e2d\uff0c\u865a\u8c37\u6570\u636e\u5e93 DDL \u64cd\u4f5c\u5747\u901a\u8fc7 Statement \u5bf9\u8c61\u6765\u6267\u884c\u3002 Statement \u5bf9\u8c61\u901a\u8fc7 Connection \u7c7b\u7684 createStatement() \u65b9\u6cd5\u521b\u5efa\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a //\u521b\u5efa\u6267\u884cSQL\u8bed\u53e5\u5bf9\u8c61Statement Statement stm = conn.createStatement()\u037e","title":"6.4.1 \u6267\u884cSQL\u5bf9\u8c61Statement"},{"location":"JDBC4/#642-sqlpreparedstatement","text":"PreparedStatement \u5bf9\u8c61\u4f7f\u7528\u65f6\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u5bf9\u6267\u884c SQL \u8bed\u53e5\u8fdb\u884c\u9884\u7f16\u8bd1\u5904\u7406\uff0c\u9884\u7f16\u8bd1 SQL \u8bed\u53e5\u5c06\u5728\u672a\u6765\u7684\u4f7f\u7528\u4e2d\u88ab\u91cd\u7528\u3002\u4e0e Statement \u5bf9\u8c61\u76f8\u6bd4\uff0cPreparedStatement \u5bf9\u8c61\u64cd\u4f5c\u591a\u6761 SQL \u8bed\u53e5\u7684\u6548\u7387\u66f4\u9ad8\u3002 \u7ecf\u8fc7\u9884\u7f16\u8bd1\u5e76\u5b58\u50a8\u5728 PreparedStatement \u5bf9\u8c61\u4e2d\u7684 SQL \u8bed\u53e5\uff0c\u901a\u8fc7 Connection \u7c7b\u7684 prepareStatement() \u65b9\u6cd5\u521b\u5efa\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a //\u521b\u5efa\u6267\u884c\u9884\u7f16\u8bd1SQL\u8bed\u53e5\u5bf9\u8c61PreparedStatement PreparedStatement preStatement = conn.prepareStatement(\u201c\u9884\u7f16\u8bd1SQL\u8bed\u53e5\u201d); \u9884\u5904\u7406 PreparedStatement \u5bf9\u8c61\u76f8\u5bf9\u4e8e\u9759\u6001 Statement \u5bf9\u8c61\u7684\u4f18\u52bf\uff1a - PreparedStatement \u53ef\u4ee5\u52a8\u6001\u4f20\u5165\u53c2\u6570\u503c\uff1b - PreparedStatement \u6bd4 Statement \u66f4\u5feb\uff1b PreparedStatement \u4f1a\u5c06 SQL \u8bed\u53e5\u9884\u7f16\u8bd1\u5728\u6570\u636e\u5e93\u7cfb\u7edf\u4e2d\uff0c\u6267\u884c\u8ba1\u5212\u540c\u6837\u4f1a\u88ab\u7f13\u5b58\u8d77\u6765\uff0c\u5b83\u5141\u8bb8\u6570\u636e\u5e93\u505a\u53c2\u6570\u5316\u67e5\u8be2\u3002\u4f7f\u7528\u9884\u5904\u7406\u8bed\u53e5\u6bd4\u666e\u901a\u7684 Statement \u67e5\u8be2\u66f4\u5feb\uff0c\u56e0\u505a\u7684\u5de5\u4f5c\u66f4\u5c11 (\u6570\u636e\u5e93\u5bf9 SQL \u8bed\u53e5\u7684\u5206\u6790\u3001\u7f16\u8bd1\u3001\u4f18\u5316\u5df2\u7ecf\u5728\u7b2c\u4e00\u6b21\u67e5\u8be2\u524d\u5b8c\u6210\u4e86)\u037e - PreparedStatement \u53ef\u4ee5\u9632\u6b62 SQL \u6ce8\u5165\u5f0f\u653b\u51fb\u3002 PreparedStatement \u5728\u4f7f\u7528\u53c2\u6570\u5316\u67e5\u8be2\u7684\u60c5\u51b5\u4e0b\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u4e0d\u4f1a\u5c06\u53c2\u6570\u7684\u5185\u5bb9\u89c6\u4e3a SQL \u6307\u4ee4\u7684\u4e00\u90e8\u5206\u6765\u5904\u7406\uff0c\u800c\u662f\u5728\u6570\u636e\u5e93\u5b8c\u6210 SQL \u6307\u4ee4\u7684\u7f16\u8bd1\u540e\uff0c\u624d\u5957\u7528\u53c2\u6570\u8fd0\u884c\uff0c\u56e0\u6b64\u5c31\u7b97\u53c2\u6570\u4e2d\u542b\u6709\u7834\u574f\u6027\u7684\u6307\u4ee4\uff0c\u4e5f\u4e0d\u4f1a\u88ab\u6570\u636e\u5e93\u6240\u8fd0\u884c\u3002","title":"6.4.2 \u6267\u884cSQL\u5bf9\u8c61PreparedStatement"},{"location":"JDBC4/#643-callablestatement","text":"CallableStatement \u5bf9\u8c61\u5b9e\u73b0\u4e86\u4ece Java \u5e94\u7528\u7a0b\u5e8f\u4e2d\u8c03\u7528\u6570\u636e\u5e93\u5b58\u50a8\u8fc7\u7a0b\u3002\u4f46\u6b64\u8c03\u7528\u8fc7\u7a0b\u5e76\u4e0d\u5305\u542b\u5b58\u50a8\u8fc7\u7a0b\u672c\u8eab\uff0c\u56e0\u5b58\u50a8\u8fc7\u7a0b\u5b58\u50a8\u5728\u6570\u636e\u5e93\u4e2d\u3002 CallableStatement \u5bf9\u8c61\u4e3a\u6240\u6709\u7684\u6570\u636e\u5e93\u63d0\u4f9b\u4e86\u4e00\u79cd\u4ee5\u6807\u51c6\u5f62\u5f0f\u8c03\u7528\u5b58\u50a8\u8fc7\u7a0b\u7684\u65b9\u6cd5\uff0c\u901a\u8fc7 Connection \u7c7b\u7684 prepareCall() \u65b9\u6cd5\u521b\u5efa\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a //\u521b\u5efa\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u5bf9\u8c61CallableStatement CallableStatement cstmt= conn.prepareCall(\u201c{call \u5b58\u50a8\u8fc7\u7a0b\u540d(\u53c2\u6570\u8868\u5217)}\u201d);","title":"6.4.3 \u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u5bf9\u8c61CallableStatement"},{"location":"JDBC4/#644-sql","text":"\u5728\u521b\u5efa\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61\u65f6\uff0c\u53ef\u901a\u8fc7\u6784\u9020\u65b9\u6cd5\u7684\u4e0d\u540c\u53c2\u6570\u8bbe\u7f6e ResultSet \u5bf9\u8c61\u5c5e\u6027\uff0c\u5c5e\u6027\u5305\u62ec\u7ed3\u679c\u7c7b\u578b ResultSetType\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b ResultSetConcurrency\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b ResultSetHoldability\u3002 ResultSetType \u9ed8\u8ba4\u4e3a ResultSet.TYPE_SCROLL_INSENSITIVE\uff1a\u652f\u6301\u7ed3\u679c\u96c6 backforward\u3001last\u3001first \u7b49\u64cd\u4f5c\uff0c\u5bf9\u6570\u636e\u5e93\u4e2d\u5176\u5b83 session \u8fdb\u884c\u7684\u6570\u636e\u66f4\u6539\u4e0d\u654f\u611f\uff1b ResultSetConcurrency \u9ed8\u8ba4\u4e3a ResultSet.CONCUR_READ_ONLY: \u4e0d\u53ef\u66f4\u65b0\u7ed3\u679c\u96c6\uff1b\u8be5\u5c5e\u6027\u4ea6\u53ef\u66f4\u6539\u4e3a ResultSet.CONCUR_UPDATABLE\uff0c\u652f\u6301\u5728 ResultSet \u4e2d\u5bf9\u8bb0\u5f55\u8fdb\u884c\u4fee\u6539\uff0c\u4fee\u6539\u540e\u8bb0\u5f55\u66f4\u65b0\u5230\u6570\u636e\u5e93\uff0c\u4fee\u6539\u64cd\u4f5c\u53ef\u5305\u542b\u63d2\u5165\u3001\u5220\u9664\u6216\u66f4\u65b0\uff1b ResultSetHoldability \u9ed8\u8ba4\u4e3a ResultSet.HOLD_CURSORS_OVER_COMMIT: \u5728\u4e8b\u52a1 commit \u6216 rollback \u540e\uff0cResultSet \u4ecd\u7136\u53ef\u7528\u3002 Connection \u7c7b\u521b\u5efa Statement \u5bf9\u8c61\u6784\u9020\u65b9\u6cd5\uff1a //Statement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 createStatement(int resultSetType,int resultSetConcurrency)\uff1b //Statement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 createStatement(int resultSetType,int resultSetConcurrency, int resultSetHoldability)\uff1b Connection \u7c7b\u521b\u5efa PreparedStatement \u5bf9\u8c61\u6784\u9020\u65b9\u6cd5\uff1a //PreparedStatement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareStatement(String sql, int resultSetType,int resultSetConcurrency) //PrepareStatment\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareStatement(String sql, int resultSetType,int resultSetConcurrency, int resultSetHoldability) Connection \u7c7b\u521b\u5efa CallableStatement \u5bf9\u8c61\u6784\u9020\u65b9\u6cd5\uff1a //CallableStatement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareCall(String sql, int resultSetType,int resultSetConcurrency) //CallableStatement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareCall(String sql, int resultSetType,int resultSetConcurrency, int resultSetHoldability)","title":"6.4.4 \u6267\u884cSQL\u8bed\u53e5\u5bf9\u8c61\u5c5e\u6027\u6269\u5145"},{"location":"JDBC4/#65-sql","text":"Statement \u5bf9\u8c61\u5b9a\u4e49\u4e86\u591a\u79cd\u6267\u884c SQL \u8bed\u53e5\u7684\u65b9\u6cd5\uff0c\u7528\u6765\u5904\u7406\u8fd4\u56de\u4e0d\u540c\u7ed3\u679c\u7684 SQL \u547d\u4ee4\uff1a - execute(String sql)\uff1a\u6267\u884c\u53ef\u4ee5\u8fd4\u56de\u591a\u4e2a\u7ed3\u679c\u96c6\u7684 SQL \u8bed\u53e5\u8fd4\u56de\u7c7b\u578b\u4e3a boolean\uff0c\u5982\u679c\u8fd4\u56de\u7684\u662f\u66f4\u65b0\u7684\u6570\u76ee\uff0c\u5219\u8fd4\u56de false\uff1b\u5982\u679c\u8fd4\u56de\u7684\u662f ResultSet \u5bf9\u8c61\uff0c\u5219\u8fd4\u56detrue\u3002 - executeQuery(String sql)\uff1a\u6267\u884c\u8fd4\u56de\u5355\u4e2a ResultSet \u7684 SQL \u8bed\u53e5\u8fd4\u56de\u7c7b\u578b\u4e3a ResultSet \u5bf9\u8c61\u3002 - executeUpdate()\uff1a\u6267\u884c SQL INSERT\u3001UPDATE \u6216 DELETE \u8bed\u53e5\u8fd4\u56de\u503c\u4e3a int \u578b\uff0c\u6570\u636e\u5e93\u53d7\u5f71\u54cd\u7684\u884c\u8ba1\u6570\u3002 - \u6279\u5904\u7406\u65b9\u6cd5\uff1a\u6279\u91cf\u6267\u884c SQL \u8bed\u53e5 clearBatch()\uff1a\u6e05\u7a7a\u5386\u53f2 batch \u547d\u4ee4\uff1b addBatch(String sql)\uff1a\u6dfb\u52a0\u8981\u6267\u884c\u7684 sql\uff1b executeBatch()\uff1a\u6279\u91cf\u6267\u884c sql\u3002 PreparedStatement \u7ee7\u627f\u81ea Statement\uff0c\u5b9a\u4e49\u4e86\u5927\u91cf\u7684 setter \u65b9\u6cd5\u7528\u4e8e\u8bbe\u7f6e\u52a8\u6001 sql\u7684\u53c2\u6570\uff0c\u56e0\u6b64 PreparedStatement \u652f\u6301\u52a8\u6001\u4f20\u53c2\uff1b\u53e6\u5916 PreparedStatement \u5185\u90e8\u5b58\u50a8\u4e86\u89e3\u6790\u7684 sql\uff0c\u53ef\u4ee5\u591a\u6b21\u6267\u884c\u800c\u65e0\u9700\u91cd\u590d\u89e3\u6790\u3002PreparedStatement \u7ee7\u627f\u81ea Statement\uff0cCallableStatement \u7ee7\u627f\u81ea PreparedStatement\uff0c\u6545\u800c\u4e09\u8005\u6267\u884c SQL \u8bed\u53e5\u7684\u65b9\u5f0f\u53ef\u901a\u7528\u3002","title":"6.5 \u6267\u884cSQL\u8bed\u53e5"},{"location":"JDBC4/#651-statement","text":"\u901a\u8fc7 Statement \u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c\u9700\u8981\u6ce8\u610f\u7684\u4e8b\u9879\uff1a - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u524d\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u8bbe\u7f6e\u4e3a FALSE\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\uff0c\u5e76\u8fdb\u884c\u624b\u52a8\u63d0\u4ea4\uff08commit\uff09\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u540e\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u6062\u590d\u4e3a TRUE\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u5f02\u5e38\u53d1\u751f\u65f6\uff0c\u8fdb\u884c rollback(\u56de\u6eda)\u3002 \u793a\u4f8b\uff1a\u901a\u8fc7 Statement \u6279\u91cf\u64cd\u4f5c\u6570\u636e try { //\u521b\u5efaStatement\u5bf9\u8c61 stm = con.createStatement(); //\u8bbe\u7f6e\u4e8b\u52a1\u975e\u81ea\u52a8\u63d0\u4ea4 con.setAutoCommit(false); // \u6dfb\u52a0\u591a\u6761SQL\u8bed\u53e5\u5230\u6279\u5904\u7406\u4e2d stm.addBatch(\"insert into student values(23,'tangbao','\u9ad8\u6570',100)\"); stm.addBatch(\"insert into student values(24,'\u738b\u5b9a','c#',98)\"); stm.addBatch(\"insert into student values(25,'\u738b\u56fd\u4e91','java',90)\"); //\u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c stm.executeBatch(); System.out.println(\"\u63d2\u5165\u6210\u529f!\"); //\u6267\u884c\u6210\u529f\u540e\u8fdb\u884c\u6570\u636e\u63d0\u4ea4 con.commit(); System.out.println(\"\u63d0\u4ea4\u6210\u529f!\"); //\u5173\u95ed\u975e\u81ea\u52a8\u63d0\u4ea4 con.setAutoCommit(true); } catch (SQLException e) { if (!con.isClosed()) { con.rollback(); //\u51fa\u73b0\u5f02\u5e38\uff0c\u56de\u6eda\u4e8b\u52a1 System.out.println(\"\u63d0\u4ea4\u5931\u8d25\uff0c\u56de\u6eda\uff01\"); con.setAutoCommit(true); //\u5173\u95ed\u975e\u81ea\u52a8\u63d0\u4ea4 } } finally { if (stmt != null) { //\u5173\u95ed\u64cd\u4f5c\u5bf9\u8c61 stmt.close(); } }","title":"6.5.1 \u901a\u8fc7Statement\u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c"},{"location":"JDBC4/#652-preparedstatement","text":"\u901a\u8fc7 PreparedStatement \u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c\u9700\u8981\u6ce8\u610f\u7684\u4e8b\u9879\uff1a - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u524d\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u8bbe\u7f6e\u4e3a FALSE\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\uff0c\u5e76\u8fdb\u884c\u624b\u52a8\u63d0\u4ea4\uff08commit\uff09\uff0c\u6570\u636e\u91cf\u5927\u65f6\uff0c\u8bbe\u7f6e\u624b\u52a8\u63d0\u4ea4\u95f4\u9694\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u540e\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u6062\u590d\u4e3a TRUE\uff1b \u2022 \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u5f02\u5e38\u53d1\u751f\u65f6\uff0c\u8fdb\u884c rollback(\u56de\u6eda)\uff1b - PreparedStatement \u6267\u884c\u8bed\u53e5\u4e0d\u80fd\u4e3a DDL \u8bed\u53e5\u3002 \u793a\u4f8b\uff1a\u5c06 10000 \u6761\u8bb0\u5f55\u63d2\u5165\u6570\u636e\u5e93\u4e2d\uff0c\u6bcf 100 \u6761\u6267\u884c\u4e00\u6b21\u63d0\u4ea4\u64cd\u4f5c try{ conn.setAutoCommit(false); //\u8bbe\u7f6e\u975e\u81ea\u52a8\u63d0\u4ea4 //\u521b\u5efaPreparedStatement\u5bf9\u8c61 ps = conn.prepareStatement(\"insert into testtab values (?, ?, ?)\"); //\u5faa\u73af\u6dfb\u52a0\u6279\u5904\u7406\u6570\u636e for(int i = 0;i<list.size();i++){ HashMap map = list.get(i);//list\u4e3a\u6570\u636e\u5c01\u88c5\uff0c\u6b64\u5904\u7565 ps.setString(1, map.get(\"id\").toString()); ps.setString(2, map.get(\"name\").toString()); ps.setString(3, map.get(\"age\").toString()); ps.addBatch(); if(mod(i,100)==0){//\u6bcf100\u6761\u6267\u884c\u4e00\u6b21\u6267\u884c\u64cd\u4f5c ps.executeBatch();//\u6267\u884c\u6279\u91cf\u63d2\u5165 conn.commit();//\u6267\u884c\u4e8b\u52a1\u63d0\u4ea4 } } ps.executeBatch();//\u6267\u884c\u6279\u91cf\u63d2\u5165 conn.commit(); //\u63d0\u4ea4\u4e8b\u52a1 }catch(Exception e){ if (!conn.isClosed()) { conn.rollback(); //\u51fa\u73b0\u5f02\u5e38\uff0c\u56de\u6eda\u4e8b\u52a1 System.out.println(\"\u63d0\u4ea4\u5931\u8d25\uff0c\u56de\u6eda\uff01\"); conn.setAutoCommit(true); //\u5173\u95ed\u975e\u81ea\u52a8\u63d0\u4ea4 } } finally { if (ps!= null) { ps.close();//\u5173\u95ed\u64cd\u4f5c\u5bf9\u8c61 } }","title":"6.5.2 \u901a\u8fc7PreparedStatement\u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c"},{"location":"JDBC4/#653-callablestatement","text":"CallableStatement \u5b58\u5728\u4e09\u79cd\u7c7b\u578b\u7684\u53c2\u6570 IN\u3001OUT \u548c INOUT\u3002 - IN\uff1a\u521b\u5efa SQL \u8bed\u53e5\u65f6\u5176\u53c2\u6570\u503c\u672a\u77e5\u3002\u4f7f\u7528 setXXX() \u65b9\u6cd5\u5c06\u503c\u7ed1\u5b9a\u5230 IN \u53c2\u6570\u3002 - OUT\uff1a\u7531 SQL \u8bed\u53e5\u8fd4\u56de\u7684\u53c2\u6570\u503c\u3002\u53ef\u4ee5\u4f7f\u7528 getXXX() \u65b9\u6cd5\u4ece OUT \u53c2\u6570\u4e2d\u68c0\u7d22\u503c\u3002 - INOUT\uff1a\u63d0\u4f9b\u8f93\u5165\u548c\u8f93\u51fa\u503c\u7684\u53c2\u6570\u3002\u4f7f\u7528 setXXX() \u65b9\u6cd5\u7ed1\u5b9a\u53d8\u91cf\u5e76\u4f7f\u7528getXXX() \u65b9\u6cd5\u68c0\u7d22\u503c\u3002 \u793a\u4f8b 1\uff1a\u901a\u8fc7\u53c2\u6570\u4e0b\u6807\u7ed1\u5b9a\u53c2\u6570 //\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\u8bed\u53e5 String sql =\"{call pro_2(?,?,?)}\"; //\u521b\u5efaCallableStatement\u5bf9\u8c61 CallableStatement cstm = conn.prepareCall(sql); //\u901a\u8fc7\u53c2\u6570\u4e0b\u6807\u8bbe\u7f6e\u53c2\u6570(IN\u53c2\u6570) cstm.setInt(1, 20490); //\u6ce8\u518cOUT\u53c2\u6570\u6570\u636e\u7c7b\u578b cstm.registerOutParameter(2, com.xugu.cloudjdbc.Types.VARCHAR); cstm.registerOutParameter(3, com.xugu.cloudjdbc.Types.VARCHAR); //\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528 cstm.execute(); //\u83b7\u53d6\u5b58\u50a8\u8fc7\u7a0b\u8f93\u51fa\u53c2\u6570 String name = (String)cstm.getObject(2); String address = (String)cstm.getObject(3); \u793a\u4f8b 2\uff1a\u901a\u8fc7\u53c2\u6570\u540d\u7ed1\u5b9a\u53c2\u6570 //\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\u8bed\u53e5 CallableStatement pstm = conn.prepareCall(\"insert into tt1 values(:id,:name)\"); //\u901a\u8fc7\u53c2\u6570\u540d\u8bbe\u7f6e\u53c2\u6570(IN\u53c2\u6570) pstm.setInt(\"id\", 1); pstm.setString(\"name\", \"cloud\"); //\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528 pstm.execute();","title":"6.5.3 CallableStatement\u7ed1\u5b9a\u53c2\u6570"},{"location":"JDBC4/#66","text":"ResultSet \u7c7b\u662f\u901a\u8fc7 Statement \u53ca\u5176\u5b50\u7c7b\u6267\u884c SQL \u67e5\u8be2\u8bed\u53e5\u5f97\u5230\u7684\u7ed3\u679c\u96c6\u3002ResultSet \u7c7b\u5305\u542b\u4e09\u4e2a\u91cd\u8981\u5c5e\u6027\uff1aResultSet \u5bf9\u8c61\u5e76\u53d1\u6a21\u5f0f\u3001ResultSet \u5bf9\u8c61\u5149\u6807\u5904\u7406\u65b9\u5411\u3001ResultSet \u5bf9\u8c61\u5149\u6807\u7c7b\u578b\u3002ResultSet \u7c7b\u5177\u6709\u6307\u5411\u5f53\u524d\u7ed3\u679c\u96c6\u6570\u636e\u884c\u4f4d\u7f6e\u5149\u6807\uff0c\u5149\u6807\u4f4d\u7f6e\u521d\u59cb\u88ab\u7f6e\u4e8e\u7b2c\u4e00\u884c\u4e4b\u524d\uff0c\u901a\u8fc7 ResultSet \u7c7b\u5c01\u88c5\u7684\u5149\u6807\u79fb\u52a8\u65b9\u6cd5\u5b9e\u73b0\u5bf9\u5149\u6807\u4f4d\u7f6e\u7684\u63a7\u5236\uff0c\u5f53 ResultSet \u5bf9\u8c61\u7684\u5149\u6807\u79fb\u81f3\u6570\u636e\u7ed3\u679c\u96c6\u672b\u5c3e\u65f6 (\u4e0b\u4e00\u884c\u65e0\u6570\u636e)\uff0c\u8fd4\u56de FALSE\u3002 \u5728\u865a\u8c37 JDBC \u4e2d\uff0cResultSet \u7c7b\u5206\u4e3a\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u548c\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\uff08\u901a\u8fc7 URL \u8fde\u63a5\u4e32\u53c2\u6570 recv_mode \u914d\u7f6e\uff09\u3002\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u9ed8\u8ba4\u5c5e\u6027\u4e3a\u4e0d\u53ef\u66f4\u65b0\u3001\u5411\u524d\u79fb\u52a8\u3001\u53ef\u4ee5\u6eda\u52a8\uff1b\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u9ed8\u8ba4\u5c5e\u6027\u4e3a\u4e0d\u53ef\u66f4\u65b0\u3001\u53ea\u5411\u524d\u79fb\u52a8\u3001\u4e0d\u53ef\u6eda\u52a8\u3002 Statement \u5bf9\u8c61\u6267\u884c SQL \u8bed\u53e5\u8fd4\u56de\u7ed3\u679c\u96c6\u4ec5\u80fd\u662f\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\uff0c\u800c PreparedStatement \u5bf9\u8c61\u6267\u884c SQL \u8bed\u53e5\u8fd4\u56de\u7ed3\u679c\u96c6\u53ef\u4e3a\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u6216\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u3002 \u5f53\u6267\u884c SQL \u8fd4\u56de\u6570\u636e\u7ed3\u679c\u96c6\u8f83\u5927\u65f6\uff0c\u5efa\u8bae\u4f7f\u7528\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\uff0c\u907f\u514d JVM \u7684\u6ea2\u51fa\u3002 {.is-info}","title":"6.6 \u5904\u7406\u6267\u884c\u7ed3\u679c"},{"location":"JDBC4/#661-resultset","text":"\u521b\u5efa Statement \u5bf9\u8c61\u65f6\uff0c\u8bbe\u7f6e Statement \u5c5e\u6027 RresultSetConcurrency \u4e3a ResultSet.CONCUR_UPDATABLE\uff0c\u5e76\u4e14\u6570\u636e\u5e93 URL \u8fde\u63a5\u4e32\u5c5e\u6027 return_rowid \u8bbe\u7f6e\u4e3a TRUE\u65f6\uff0cStatement \u5bf9\u8c61\u6267\u884c SQL \u8bed\u53e5\u8fd4\u56de\u7684 ResultSet \u7ed3\u679c\u96c6\u624d\u80fd\u88ab\u66f4\u65b0\u3002\u5f53 ResultSet \u5bf9\u8c61\u4e3a\u53ef\u66f4\u65b0\u7ed3\u679c\u96c6\u65f6\uff0c\u5c06\u5149\u6807\u79fb\u81f3\u63d2\u5165\u4f4d\u7f6e\uff0c\u53ef\u8c03\u7528 ResultSet \u7c7b\u5bf9\u5e94\u7684 update \u65b9\u6cd5\u4fee\u6539\u7ed3\u679c\u96c6\u4e2d\u884c\u6570\u636e\uff0c\u5e76\u901a\u8fc7 updateRow \u65b9\u6cd5\u5c06\u66f4\u6539\u6570\u636e\u66f4\u65b0\u5230\u6570\u636e\u5e93\u4e2d\u3002 \u793a\u4f8b\uff1a\u901a\u8fc7\u4fee\u6539\u7ed3\u679c\u96c6\u4e2d\u6570\u636e\u503c\u66f4\u6539\u6570\u636e\u5e93\u4e2d\u5bf9\u5e94\u8bb0\u5f55 //\u521b\u5efaStatement\u5bf9\u8c61\u5e76\u8bbe\u7f6e\u7ed3\u679c\u96c6\u5c5e\u6027\u4e3a\u53ef\u66f4\u65b0 Statement stm = conn.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_UPDATABLE); //\u6267\u884cSQL\u8bed\u53e5 ResultSet rs = stm.executeQuery(sql); //\u7ed3\u679c\u96c6\u904d\u5386 while(rs.next()) { //\u66f4\u65b0\u7ed3\u679c\u96c6\u4e2d\u6307\u5b9a\u5217\u6570\u636e rs.updateLong(1, 5); //\u66f4\u65b0\u7ed3\u679c\u96c6\u4e2d\u6307\u5b9a\u5217\u6570\u636e rs.updateFloat(3, 12.3f); //\u7ed3\u679c\u96c6\u53d8\u66f4\u56de\u5199\u5165\u6570\u636e\u5e93 rs.updateRow(); } \u901a\u8fc7\u8c03\u7528 ResultSet \u7c7b\u7684 next()\u3001previous()\u3001absolute(int) \u65b9\u6cd5\u79fb\u52a8\u5149\u6807\u4f4d\u7f6e\uff0c\u5c06\u5149\u6807\u4f4d\u7f6e\u79fb\u52a8\u5230\u6307\u5b9a\u6570\u636e\u884c\uff0c\u901a\u8fc7 ResultSet \u7c7b\u5bf9\u5e94\u7684 get \u65b9\u6cd5\u83b7\u53d6\u884c\u6570\u636e\u3002 \u5982\u4f7f\u7528\u7ed3\u679c\u96c6\u66f4\u65b0\u6570\u636e\u5e93\u6570\u636e\uff0c\u9700\u5728\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65f6\uff0c\u8bbe\u7f6e\u8fde\u63a5\u5c5e\u6027 return_rowid \u4e3aTRUE\uff0c\u4e14\u5728\u751f\u6210\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61\u65f6\uff0c\u5e76\u53d1\u5c5e\u6027\u6307\u5b9a\u4e3a ResultSet.CONCUR_UPDATABLE\u3002 {.is-info}","title":"6.6.1 \u66f4\u65b0ResultSet\u7ed3\u679c\u96c6"},{"location":"JDBC4/#662","text":"\u793a\u4f8b 1\uff1a \u7edf\u8ba1\u7ed3\u679c\u96c6\u603b\u6761\u6570 //\u521b\u5efaStatement\u5bf9\u8c61 Statement stm= conn.createStatement(); stm.execute(\"create table test(id int identity(1,1));insert into test values(default)\"); //\u6267\u884c\u7ed3\u679c\u96c6\u67e5\u8be2 ResultSet rs = stm.executeQuery(\"select * from test\") //\u79fb\u52a8\u5149\u6807\u81f3\u7ed3\u679c\u96c6\u672b\u5c3e rs.last(); //\u83b7\u53d6\u7ed3\u679c\u96c6\u884c\u6570 int rsCounts = rs.getRow();","title":"6.6.2 \u901a\u8fc7\u79fb\u52a8\u5149\u6807\u83b7\u53d6\u7ed3\u679c\u96c6\u6761\u6570"},{"location":"JDBC4/#663","text":"\u865a\u8c37 JDBC \u652f\u6301\u591a\u7ed3\u679c\u96c6\u5904\u7406\uff0c\u5141\u8bb8 Statement \u63a5\u53e3\u652f\u6301\u591a\u91cd\u6253\u5f00\u7684 ResultSet \u5bf9\u8c61\u3002\u6267\u884c\u8bed\u53e5\u53ef\u4ee5\u662f\u591a\u6761 SQL \u8bed\u53e5\u7684\u96c6\u5408\uff0c\u5373\u4e00\u6b21\u6027\u5411\u865a\u8c37\u670d\u52a1\u5668\u53d1\u9001\u591a\u6761 SQL \u8bed\u53e5\uff0c\u865a\u8c37\u670d\u52a1\u5668\u6267\u884c\u5b8c SQL \u8bed\u53e5\u540e\u8fd4\u56de\u591a\u4e2a\u6267\u884c\u7ed3\u679c\uff1b\u4ea6\u6216\u5b58\u50a8\u8fc7\u7a0b\u5b9a\u4e49\u6709\u591a\u4e2a\u8fd4\u56de\u7ed3\u679c\u96c6\u3002\u865a\u8c37 JDBC \u7684 Statement \u91cd\u8f7d\u4e86 Statement \u63a5\u53e3\u4e2d\u7684 getMoreResults() \u65b9\u6cd5\u3002 \u793a\u4f8b\uff1a\u591a\u7ed3\u679c\u96c6\u5904\u7406 //SQL\u8bed\u53e5\u5305\u542b\u591a\u6761\u67e5\u8be2\u547d\u4ee4 String sql=\" SELECT * FROM A1 WHERE D2=(SELECT AVG(D2) FROM A1 GROUP BY D1);SELECT * FROM A1 WHERE D2>(SELECT MIN(D2) FROM A1 GROUP BY D1)\"; //\u521b\u5efaStatement\u5bf9\u8c61 Statement stm = conn.createStatement(); //\u6267\u884cSQL\u8bed\u53e5 boolean f = stm.execute(sql); //\u5224\u65ad\u662f\u5426\u6709ResultSet\u5bf9\u8c61\u4ea7\u751f if(f == true){ //\u83b7\u53d6\u7ed3\u679c\u96c6\u5bf9\u8c61 ResultSet rs1 = stm.getResultSet(); ... ... ... ... } while(true) { //\u5224\u65adStatement\u662f\u5426\u8fd4\u56de\u4e86\u591a\u4e2aResultSet\u5bf9\u8c61 if(!stm.getMoreResults(Statement.CLOSE_CURRENT_RESULT)){ break; } else if((rs2 = cstm.getResultSet())!=null) { ... ... ... ...//\u6570\u636e\u5904\u7406\u90e8\u5206\u7701\u7565 } }","title":"6.6.3 \u591a\u7ed3\u679c\u96c6\u5904\u7406"},{"location":"JDBC4/#664","text":"\u865a\u8c37JDBC\u4e2d\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u751f\u6210\u9700\u6ee1\u8db3\u4e24\u4e2a\u6761\u4ef6\uff1aURL\u8fde\u63a5\u4e32\u5c5e\u6027recv_mode\u503c\u4e3a2\uff0cStatement\u5bf9\u8c61\u6267\u884cSQL\u8bed\u53e5\u4e3a\u5355\u6761SELECT\u8bed\u53e5\u3002 \u5e94\u7528\u7a0b\u5e8f\u7aef\u901a\u8fc7Statement\u7c7b\u7684setFetchSize(int)\u65b9\u6cd5\u6216ResultSet\u7c7b\u7684setFetchSize(int)\u65b9\u6cd5\u8bbe\u7f6e\u6bcf\u6b21\u4ece\u670d\u52a1\u5668\u7aef\u83b7\u53d6\u591a\u5c11\u6761\u6570\u636e\u3002 \u4f7f\u7528\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7684 ResultSet \u5bf9\u8c61\uff0c\u5149\u6807\u53ea\u80fd\u5355\u5411\u5411\u524d\u6b63\u5411\u79fb\u52a8\uff0c\u4e0d\u80fd\u5411\u540e\u79fb\u52a8\u6216\u6765\u56de\u6eda\u52a8\u3002 {.is-info} \u793a\u4f8b\uff1a\u865a\u8c37\u6570\u636e\u5e93\u670d\u52a1\u5668\u7aef\u6e38\u6807\u4f7f\u7528 //\u521b\u5efa\u865a\u8c37JDBC\u7279\u6709Statement\u5bf9\u8c61 Statement stm = (com.xugu.cloudjdbc.Statement)conn.createStatement(); //\u5f00\u542f\u670d\u52a1\u5668\u7aef\u6e38\u6807 stm.setServerCursor(true); //\u8bbe\u7f6e\u670d\u52a1\u5668\u7aef\u6e38\u6807\u5355\u6b21\u8fd4\u56de\u6570\u636e\u6761\u6570 stm.setFetchSize(1000); //\u6267\u884cSQL\u8bed\u53e5 ResultSet rs = stm.executeQuery(\"select * from t1\"); //\u904d\u5386\u6570\u636e while\uff08rs.next()\uff09 { ... ... ... ... } //\u5173\u95ed\u670d\u52a1\u5668\u7aef\u6e38\u6807 stm.setServerCursor(false);","title":"6.6.4 \u670d\u52a1\u5668\u7aef\u6e38\u6807\u4f7f\u7528"},{"location":"JDBC4/#665-generatedkeys","text":"JDBC 3.0 \u89c4\u8303\u4e2d\u5bf9\u4e8e\u81ea\u52a8\u4ea7\u751f\u7684\u5173\u952e\u5b57\u6570\u503c\uff0c\u5b9a\u4e49\u4e86\u63a5\u53e3\u89c4\u8303\uff0c\u5373\uff1agetGeneratedKeys() \u65b9\u6cd5\u3002 \u4e3a\u4e86\u89e3\u51b3\u5bf9\u83b7\u53d6\u81ea\u52a8\u4ea7\u751f\u7684\u6216\u81ea\u52a8\u589e\u52a0\u7684\u5173\u952e\u5b57\u7684\u503c\u7684\u9700\u6c42\uff0c\u865a\u8c37 JDBC \u6839\u636e JDBC3.0 \u89c4\u8303\u63d0\u4f9b\u4e86\u83b7\u5f97\u5173\u952e\u5b57\u503c\u7684\u65b9\u6cd5\u3002\u83b7\u53d6\u5173\u952e\u5b57\u7684\u503c\uff0c\u9700\u8981\u5728\u6267\u884c\u65b9\u6cd5\u4e2d\u6307\u5b9a\u81ea\u589e\u5173\u952e\u5b57\u6807\u8bb0\u3002SQL \u8bed\u53e5\u6267\u884c\u5b8c\u540e\uff0c\u8c03\u7528 Statement \u5bf9\u8c61\u7684 getGeneratedKeys() \u65b9\u6cd5\uff0c\u83b7\u5f97\u5305\u542b\u81ea\u589e\u957f\u503c\u7684 ResultSet \u5bf9\u8c61\u3002 \u793a\u4f8b\uff1a\u83b7\u53d6\u6570\u636e\u5e93\u81ea\u589e\u957f\u5173\u952e\u5b57\u7684\u503c //\u521b\u5efaStatement\u5bf9\u8c61 Statement stmt = conn.createStatement(); //\u6307\u5b9a\u81ea\u589e\u957f\u5173\u952e\u5b57\u7684\u6807\u8bc6 String[] colN = {\"id\"}; //\u5728\u6267\u884c\u65b9\u6cd5\u4e2d\u5f15\u5165\u81ea\u589e\u957f\u5173\u952e\u5b57\u6807\u8bc6 stmt.executeUpdate(\"INSERT INTO authors(first_name, last_name) VALUES (\u2018Ghq\u2019, \u2018Wxl\u2019)\",colN); //\u83b7\u53d6\u7ed3\u679c\u96c6 ResultSet rs = stmt.getGeneratedKeys(); if ( rs.next() ) { //\u83b7\u53d6\u7ed3\u679c\u96c6\u4e2d\u7684\u81ea\u589e\u957f\u503c \u3000\u3000 int key = rs.getInt(); }","title":"6.6.5 \u68c0\u7d22\u81ea\u52a8\u4ea7\u751f\u7684\u5173\u952e\u5b57GeneratedKeys"},{"location":"JDBC4/#67","text":"\u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u56e0\u5904\u7406\u9700\u8981\u6240\u5efa\u7acb\u7684 ResultSet\u3001Statement\u3001PreparedStatement \u7b49\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61\uff0c\u5728\u4f7f\u7528\u5b8c\u540e\u5fc5\u987b\u5173\u95ed\u3002\u5173\u95ed\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61\uff0c\u76f4\u63a5\u8c03\u7528\u5bf9\u5e94\u7684\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61 close() \u65b9\u6cd5\u5373\u53ef\u3002 \u5f53\u4e0d\u518d\u9700\u8981\u548c\u865a\u8c37\u6570\u636e\u5e93\u8fdb\u884c\u4ea4\u4e92\u65f6\uff0c\u9700\u65ad\u5f00\u6570\u636e\u5e93\u8fde\u63a5\u3002\u8c03\u7528 Connection \u7c7b\u7684 close() \u65b9\u6cd5\u5373\u4f1a\u5173\u95ed\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u540c\u65f6\u91ca\u653e\u8fde\u63a5\u4e0a\u6240\u6301\u6709\u7684\u6240\u6709\u6570\u636e\u5e93\u8d44\u6e90\u3002 \u6570\u636e\u5e93\u8fde\u63a5\u4e3a\u975e\u81ea\u52a8\u63d0\u4ea4\u65f6\uff0c\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61\u5728\u4f7f\u7528\u5b8c\u540e\uff0c\u82e5\u672a\u53ca\u65f6\u5173\u95ed\uff0c\u6b64\u65f6\u8fdb\u884c DDL \u64cd\u4f5c\u5c06\u4f1a\u5bfc\u81f4\u865a\u8c37\u6570\u636e\u5e93\u52a0\u9501\u8d85\u65f6\u6216\u5931\u8d25\u3002 {.is-info}","title":"6.7 \u91ca\u653e\u8d44\u6e90"},{"location":"JDBC4/#_4","text":"JDBC 3.0 \u89c4\u8303\u5b9a\u4e49\u6709 java.sql.Blob \u4e0e java.sql.Clob \u63a5\u53e3\uff0c\u6b64\u4e24\u7c7b\u63a5\u53e3\u4e3a\u6570\u636e\u5e93\u5927\u5bf9\u8c61\u6570\u636e\u5904\u7406\u63a5\u53e3\u3002\u865a\u8c37\u6570\u636e\u5e93\u5927\u5bf9\u8c61\u5b57\u6bb5\u7c7b\u578b\u5305\u542b\uff1ablob\u3001clob\u3001binary\u3002 \u5728\u865a\u8c37 JDBC \u4e2d\uff0c\u83b7\u53d6\u5927\u5bf9\u8c61\u6570\u636e\u6709\u4e24\u79cd\u8fd4\u56de\u65b9\u5f0f\uff1a\u4e00\u79cd\u662f\u6570\u636e\u76f4\u63a5\u8fd4\u56de\uff1b\u53e6\u4e00\u79cd\u662f\u8fd4\u56de\u63cf\u8ff0\u7b26\u65b9\u5f0f\u3002\u5f53\u8fd4\u56de\u6570\u636e\u4e2d\u5927\u5bf9\u8c61\u6570\u636e\u8f83\u591a\u65f6\uff0c\u5efa\u8bae\u4f7f\u7528\u8fd4\u56de\u63cf\u8ff0\u7b26\u65b9\u5f0f\uff0c\u4ece\u800c\u907f\u514d\u56e0\u6570\u636e\u8fc7\u591a\u8fc7\u5927\u9020\u6210\u7684 JVM \u5185\u5b58\u6ea2\u51fa\u3002\u865a\u8c37 JDBC \u9a71\u52a8\u542f\u7528\u5927\u5bf9\u8c61\u8fd4\u56de\u63cf\u8ff0\u7b26\u65b9\u5f0f\uff0c\u9700\u5728\u8fde\u63a5 URL \u4e32\u4e0a\u914d\u7f6e\u5c5e\u6027 lob_ret \u4e3a descriptor \u3002","title":"\u4e03. \u5927\u5bf9\u8c61\u7c7b\u578b\u5904\u7406"},{"location":"JDBC4/#71","text":"LOB \u5bf9\u8c61\u7684\u63d2\u5165\u5fc5\u987b\u901a\u8fc7 PreparedStatement\u3001CallableStatement \u7c7b\u7684 setXXX() \u65b9\u6cd5\u65b9\u5f0f\u5b9e\u73b0\u3002\u865a\u8c37 JDBC \u4e2d PreparedStatement \u63d0\u4f9b\u591a\u79cd\u65b9\u6cd5\u8bbe\u7f6e\u5927\u5bf9\u8c61\u53c2\u6570\u503c\uff0c\u5982\u4e0b\u5217\u65b9\u6cd5\uff1a setBinaryStream(int parameterIndex,InputStream x) setBlob(int parameterIndex, Blob x) setBlob(int parameterIndex, InputStream x) setBytes(int parameterIndex,byte[] x) setCharacterStream(int parameterIndex, Reader reader) setClob(int parameterIndex, Clob x) setClob(int parameterIndex, Reader reader) setString(int parameterIndex, String x) \u793a\u4f8b\uff1a\u5e94\u7528\u7a0b\u5e8f\u63d2\u5165\u5927\u5bf9\u8c61\u6570\u636e\uff0c\u5176\u4e2d\u8868 b1 \u5b57\u6bb5 photo \u4e3a blob \u7c7b\u578b\uff0c\u5b57\u6bb5 text \u4e3a clob \u7c7b\u578b PreparedStatement ps = conn.prepareStatement(\"INSERT INTO b1 VALUES (?, ?)\")\u037e // blobBytes is a byte[] type ps.setBlob(1, new com.xugu.cloudjdbc.Blob(blobBytes))\u037e // clobString is a String type ps.setClob(2, new com.xugu.cloudjdbc.Clob(clobString))\u037e ps.execute()\uff1b","title":"7.1 \u5411\u8868\u4e2d\u63d2\u5165\u5927\u5bf9\u8c61"},{"location":"JDBC4/#72","text":"\u901a\u8fc7\u865a\u8c37 JDBC \u83b7\u53d6\u5927\u5bf9\u8c61\u503c\uff0c\u6570\u636e\u5e93 CLOB \u5bf9\u8c61\u53ef\u901a\u8fc7\u5b57\u7b26\u4e32\u5f62\u5f0f\u6216\u6d41\u5f0f\u6570\u636e\u5f62\u5f0f\u83b7\u53d6\uff0c\u6570\u636e\u5e93 BLOB \u5bf9\u8c61\u53ea\u901a\u8fc7\u6d41\u5f0f\u6570\u636e\u5f62\u5f0f\u83b7\u53d6\u3002 \u793a\u4f8b 1\uff1a\u6d41\u5f0f\u83b7\u53d6 CLOB \u5bf9\u8c61 Statement stm = xgConn.createStatement(); String sql=\u201dselect remark from t_clob where id=101\u201d; ResultSet rs = stm.executeQuery(sql); while(rs.next) { Clob data = rs.getClob(\"remark \"); //\u4ee5\u5b57\u7b26\u6d41\u65b9\u5f0f\u83b7\u53d6\u6570\u636e Reader rd = data.getCharacterStream(); char[] sc = new char[1000]; StringBuffer sb = new StringBuffer(); int len = 0; while((len=rd.read(sc)) !=-1) { sb.append(new String(sc,0,len)); } System.out.println(sb.toString()); } \u793a\u4f8b 2\uff1a\u865a\u8c37 JDBC \u5141\u8bb8\u4ee5\u5b57\u7b26\u4e32\u7684\u5f62\u5f0f\u8bfb\u53d6 CLOB \u5bf9\u8c61 String sql=\"select text from t_clob\"\u037e Statement stm=conn.createStatement()\u037e ResultSet rs=stm.executeQuery(sql)\u037e while(rs.next()) { String clobStr =rs.getString(\"text\")\u037e }","title":"7.2 \u67e5\u8be2\u5927\u5bf9\u8c61\u6570\u636e"},{"location":"JDBC4/#_5","text":"\u865a\u8c37\u6570\u636e\u5e93\u662f\u4e00\u6b3e\u5177\u5907\u9ad8\u5b89\u5168\u3001\u9ad8\u6027\u80fd\u3001\u9ad8\u6269\u5c55\u7b49\u7279\u6027\u7684\u3001\u57fa\u4e8e\u5206\u5e03\u5f0f\u67b6\u6784\u7684\u5206\u5e03\u5f0f\u4e8b\u52a1\u578b\u6570\u636e\u5e93\u3002\u90e8\u7f72\u6570\u636e\u5e93\u96c6\u7fa4\u65f6\uff0c\u591a\u53f0\u670d\u52a1\u5668\u4f5c\u4e3a\u4e00\u4e2a\u6574\u4f53\u5bf9\u5916\u63d0\u4f9b\u6570\u636e\u670d\u52a1\u3002\u5728\u591a\u673a\u73af\u5883\u4e0b\uff0c\u4e3a\u4f7f\u6570\u636e\u5e93\u8fde\u63a5\u5747\u5300\u5206\u5e03\u4e8e\u5404\u53f0\u670d\u52a1\uff0c\u865a\u8c37 JDBC \u5728\u63a5\u53e3\u5c42\u5b9e\u73b0\u4e86\u57fa\u4e8e\u8f6f\u8d1f\u8f7d\u5747\u8861\u6280\u672f\u7684\u6570\u636e\u5e93\u8fde\u63a5\u5efa\u7acb\u65b9\u5f0f\u3002 \u865a\u8c37\u6570\u636e\u5e93\u8d1f\u8f7d\u5747\u8861\u5206\u914d\u6570\u636e\u5e93\u8fde\u63a5\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a\u987a\u5e8f\u5206\u914d\u3001\u968f\u673a\u5206\u914d\u3002\u901a\u8fc7\u5728\u6570\u636e\u5e93 URL \u8fde\u63a5\u4e32\u4e0a\u8bbe\u7f6e\u53c2\u6570 conn_type(conn_type:1, \u968f\u673a\u5206\u914d\uff1b2, \u987a\u5e8f\u5206\u914d) \u7c7b\u578b\uff0c\u5b9e\u73b0\u6570\u636e\u5e93\u8fde\u63a5\u5728\u591a\u96c6\u7fa4\u73af\u5883\u4e0b\u7684\u8d1f\u8f7d\u5747\u8861\u3002\u9ed8\u8ba4\u8d1f\u8f7d\u5747\u8861\u5206\u914d\u65b9\u5f0f\uff1a\u987a\u5e8f\u5206\u914d\u3002 \u865a\u8c37 JDBC \u63d0\u4f9b\u4e09\u79cd\u914d\u7f6e\u8d1f\u8f7d\u5747\u8861\u7684\u65b9\u5f0f\uff1a\u6570\u636e\u5e93 URL \u8fde\u63a5\u4e32\u914d\u7f6e\u3001\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u6027\u6587\u4ef6 Properties \u914d\u7f6e\u3001\u6570\u636e\u5e93\u8fde\u63a5 XML \u6587\u4ef6\u914d\u7f6e\u3002 1. URL \u8fde\u63a5\u4e32\u914d\u7f6e Class.forName(\"com.xugu.cloudjdbc.Driver\"); //URL\u8fde\u63a5\u4e32\u4e2d\u4f7f\u7528ips\u5c5e\u6027\u914d\u7f6e\u591aIP\u8d1f\u8f7d\u5747\u8861 Connection conn = DriverManager.getConnection(\"jdbc:xugu://192.168.0.201:5138/SYSTEM?user=SYSDBA&password=SYSDBA&conn_type=1&ips=192.168.0.205,192.168.0.204,192.168.1.206\") \u8fde\u63a5\u5c5e\u6027\u6587\u4ef6 Properties \u914d\u7f6e (Vector \u6216\u5b57\u7b26\u4e32\u6570\u7ec4) Properties info=new Properties(); Class.forName(\"com.xugu.cloudjdbc.Driver\"); //Vector\u7ed3\u6784\u5b58\u653e\u8d1f\u8f7d\u5747\u8861\u591aIP\u5730\u5740\u65b9\u5f0f Vector<String> ipsVector=new Vector<String>(); ipsVector.add(\"192.168.1.201\"); ipsVector.add(\"192.168.1.204\"); ipsVector.add(\"192.168.1.205\"); ipsVector.add(\"192.168.1.206\"); info.put(\"ips\", ipsVector); //\u6570\u7ec4\u5b58\u653e\u8d1f\u8f7d\u5747\u8861\u591aIP\u5730\u5740\u65b9\u5f0f String[] ips={\"192.168.1.205\",\"192.168.1.204\",\"192.168.1.206\"}; info.put(\"ips\", ips); Connection conn = DriverManager.getConnection(\"jdbc:xugu://192.168.1.201:5138/SYSTEM?user=SYSDBA&password=SYSDBA&conn_type=2\",info); \u8fde\u63a5\u5c5e\u6027 XML \u6587\u4ef6\u914d\u7f6e <?xml version=\"1.0\" encoding=\"utf-8\"?> <listeners> <listener> <ip>192.168.1.206</ip> </listener> <listener> <ip>192.168.1.204</ip> </listener> <listener> <ip>192.168.1.205</ip> </listener> </listeners> Class.forName(\"com.xugu.cloudjdbc.Driver\"); Connection conn = DriverManager.getConnection(\"jdbc:xugu:file://xuguClouldListener.xml:5138/SYSTEM?user=SYSDBA&password=SYSDBA&conn_type=1\");","title":"\u516b. \u865a\u8c37\u6570\u636e\u5e93\u8d1f\u8f7d\u5747\u8861"},{"location":"JDBC7/","text":"\u6587\u6863\u5bc6\u7ea7\uff1a\u3010 - \u3011 \u8bf4\u660e\uff1a\u516c\u5f00 \u6587\u6863\u4fee\u8ba2\u5386\u53f2 \u5e8f\u53f7 \u6587\u6863\u7248\u672c \u7a0b\u5e8f\u7248\u672c \u7f16\u64b0\u4eba A-\u589e\u52a0 M-\u66f4\u65b0 D-\u5220\u51cf \u53d8\u66f4\u8bf4\u660e \u5b8c\u6210\u65e5\u671f \u8bc4\u5ba1\u4eba \u8bc4\u5ba1\u65e5\u671f \u8bc4\u5ba1\u7ed3\u679c [\u901a\u8fc7/\u62d2\u7edd] 1 1.0 11.0 \u5468\u5f66\u5f64 A \u6574\u7248\u7f16\u5199 2021-7-12 \u5434\u751f\u52c7 2021-7-12 \u901a\u8fc7 2 2.0 12.0 \u66f9\u831c M \u4fee\u6539\u7b2c\u4e8c\u7ae0\u7c7b\u6269\u5c55\u30014.3\u8fde\u63a5\u53c2\u6570 2022-5-14 \u5468\u5f66\u5f64 2022-5-14 \u901a\u8fc7 3 2.1 12.0 \u66f9\u831c M \u4fee\u6539\u7b2c3.1\u57fa\u672c\u6570\u636e\u7c7b\u578b 2022-6-20 \u5468\u5f66\u5f64 2022-6-20 \u901a\u8fc7 \u4e00. \u865a\u8c37\u6570\u636e\u5e93\u7684JDBC\u9a71\u52a8\u7a0b\u5e8f\u6982\u8ff0 Java \u6570\u636e\u5e93\u8fde\u63a5\uff08Java Database Connectivity\uff0c\u7b80\u79f0 JDBC\uff09\u662f Java \u8bed\u8a00\u4e2d\u7528\u6765\u89c4\u8303\u5ba2\u6237\u7aef\u7a0b\u5e8f\u5982\u4f55\u8bbf\u95ee\u6570\u636e\u5e93\u7684\u5e94\u7528\u7a0b\u5e8f\u63a5\u53e3\uff0c\u63d0\u4f9b\u4e86\u8bf8\u5982\u67e5\u8be2\u548c\u66f4\u65b0\u6570\u636e\u5e93\u4e2d\u6570\u636e\u7684\u65b9\u6cd5\uff0c\u53ef\u4ee5\u4e3a\u591a\u79cd\u5173\u7cfb\u6570\u636e\u5e93\u63d0\u4f9b\u7edf\u4e00\u8bbf\u95ee\u3002JDBC \u63d0\u4f9b\u4e86\u4e00\u79cd\u57fa\u51c6\uff0c\u901a\u8fc7\u6b64\u57fa\u51c6\u6570\u636e\u5e93\u5f00\u53d1\u4eba\u5458\u53ef\u6784\u5efa\u66f4\u9ad8\u7ea7\u7684\u5de5\u5177\u548c\u63a5\u53e3\uff0c\u4e5f\u53ef\u901a\u8fc7\u6b64\u57fa\u51c6\u7f16\u5199\u6570\u636e\u5e93\u5e94\u7528\u7a0b\u5e8f\u3002 \u865a\u8c37\u6570\u636e\u5e93\u7684 JDBC \u9a71\u52a8\u7a0b\u5e8f\uff08\u4ee5\u4e0b\u7b80\u79f0\uff1a\u865a\u8c37 JDBC\uff09\u5b9e\u73b0\u4e86 Java \u7a0b\u5e8f\u548c\u865a\u8c37\u6570\u636e\u5e93\u901a\u4fe1\uff0c\u652f\u6301 SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u7684\u8bbf\u95ee\uff0c\u540c\u65f6\u4e5f\u662f\u6784\u9020\u9ad8\u7ea7 API \u548c\u6570\u636e\u5e93\u5f00\u53d1\u5de5\u5177\u7684\u57fa\u7840\u3002 \u7528\u6237\u60f3\u8981\u5b9e\u73b0\u5bf9\u6570\u636e\u5e93\u7684\u8bbf\u95ee\uff0c\u4e00\u822c\u8981\u7ecf\u8fc7\u5982\u4e0b\u7684\u6b65\u9aa4\uff1a 1. \u901a\u8fc7\u9a71\u52a8\u5668\u7ba1\u7406\u5668\u83b7\u53d6\u8fde\u63a5\u63a5\u53e3\uff1b 2. \u83b7\u5f97 Statement \u6216 Statement \u5b50\u7c7b\uff1b 3. \u901a\u8fc7 Statement \u6267\u884c SQL \u547d\u4ee4\uff1b 4. \u5904\u7406\u6267\u884c\u7ed3\u679c\uff1b 5. \u5173\u95ed Statement\uff1b 6. \u5173\u95ed\u8fde\u63a5\u3002 JDBC \u7ed3\u6784\u56fe, \u5982\u56fe1.1\u6240\u793a\u3002 \u56fe1.1 JDBC\u7ed3\u6784\u56fe \u4f7f\u7528\u865a\u8c37 JDBC \u5b9e\u73b0\u5e94\u7528\u7a0b\u5e8f\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u4e4b\u95f4\u7684\u8fde\u63a5\u670d\u52a1\uff0c\u5e94\u7528\u7a0b\u5e8f\u6240\u5728\u8ba1\u7b97\u673a\u9700\u5df2\u5b89\u88c5 Java \u8fd0\u884c\u73af\u5883\uff08Java Runtime Environment, \u7b80\u79f0 JRE\uff09\u3002\u865a\u8c37 JDBC \u53c2\u7167 JDBC API \u5b9e\u73b0\uff0c\u652f\u6301 JDBC 3.0 \u529f\u80fd\uff0cJava \u5e94\u7528\u7a0b\u5e8f\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u4e4b\u95f4\u7684\u6240\u6709\u64cd\u4f5c\u5747\u9700\u901a\u8fc7\u865a\u8c37 JDBC \u6765\u5b8c\u6210\u3002 \u4f7f\u7528\u865a\u8c37 JDBC \u9700\u8981 JRE 1.6 \u7248\u6216\u66f4\u9ad8\u7248\u672c\u7684 Java \u8fd0\u884c\u65f6\u73af\u5883 (JRE)\u3002 {.is-info} \u4e8c. \u865a\u8c37\u6570\u636e\u5e93\u7684JDBC\u63a5\u53e3\u548c\u5bf9\u8c61\u7c7b JDBC 3.0 \u89c4\u8303\u7531 JDBC 1.0\u3001JDBC 2.0 \u884d\u751f\u800c\u6765\uff0c\u4e3b\u8981\u5305\u542b java.sql \u5305\u4ee5\u53ca javax.sql \u5305\uff0c\u6570\u636e\u5e93 JDBC \u9a71\u52a8\u5b9e\u73b0 JDBC 3.0 \u89c4\u8303\u6240\u5b9a\u4e49\u7684\u7279\u6027\u63a5\u53e3\uff0c\u5373\u53ef\u8fbe\u5230\u5bf9\u6807\u51c6 JDBC 3.0 \u89c4\u8303\u7684\u652f\u6301\u3002 \u865a\u8c37 JDBC \u57fa\u4e8e JDBC 3.0 \u89c4\u8303\u5b9e\u73b0\uff0c\u5b9e\u73b0\u63a5\u53e3\u7c7b\u6620\u5c04\uff0c\u5982\u88682.1\u6240\u793a\u3002 \u88682.1 \u865a\u8c37JDBC\u5b9e\u73b0\u63a5\u53e3\u7c7b | \u63a5\u53e3 | \u865a\u8c37JDBC\u5b9e\u73b0\u7c7b | | ---------------------------------- | ---------------------------------------- | | java.sql.Driver | com.xugu.cloudjdbc.Driver | | java.sql.Connection | com.xugu.cloudjdbc.Connection | | java.sql.Statement | com.xugu.cloudjdbc.Statement | | java.sql.PreparedStatement | com.xugu.cloudjdbc.PreparedStatement | | java.sql.CallableStatement | com.xugu.cloudjdbc.CallableStatement | | java.sql.ResultSet | com.xugu.cloudjdbc.ResultSet | | java.sql.ResultSetMetaData | com.xugu.cloudjdbc.ResultSetMetaData | | java.sql.DatabaseMetaData | com.xugu.cloudjdbc.DatabaseMetaData | | java.sql.PrameterMetaData | com.xugu.cloudjdbc.PrameterMetaData | | java.sql.Types | com.xugu.cloudjdbc.Types | | java.sql.Blob | com.xugu.cloudjdbc.Blob | | java.sql.Clob | com.xugu.cloudjdbc.Clob | | java.sql.Savepoint | com.xugu.cloudjdbc.Savepoint | | javax.sql.DataSource | com.xugu.pool.XgDataSource | | javax.sql.ConnectionPoolDataSource | com.xugu.pool.XgConnectionPoolDataSource | | javx.sql.PooledConnection | com.xugu.pool.XgPooledConnection | \u9664\u4e86\u4ee5\u4e0a\u6807\u51c6\u7c7b\u63a5\u53e3\u5916\uff0c\u865a\u8c37 JDBC \u8fd8\u6269\u5c55\u5b9e\u73b0\u4e86\u4ee5\u4e0b\u7c7b\uff1a - com.xugu.cloudjdbc.ClientInfo - com.xugu.cloudjdbc.OutParameter - com.xugu.cloudjdbc.Rowid - com.xugu.cloudjdbc.SQLXml - com.xugu.cloudjdbc.SSL - com.xugu.pool.StatementWrapper - com.xugu.pool.PreparedStatementWrapper \u4e09. \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b 3.1 \u57fa\u672c\u6570\u636e\u7c7b\u578b \u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b\u3001\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u3001Java \u6570\u636e\u7c7b\u578b\u4e09\u8005\u6620\u5c04\u5173\u7cfb\uff0c\u5982\u88683.1\u6240\u793a\u3002 \u88683.1 \u6570\u636e\u7c7b\u578b\u6620\u5c04\u5173\u7cfb \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b \u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b Java \u6570\u636e\u7c7b\u578b BOOLEAN BOOLEAN boolean SMALLINT SMALLINT short TINYINT TINYINT byte INTEGER INTEGER int BIGINT BIGINT long FLOAT FLOAT float DOUBLE DOUBLE double NUMERIC NUMERIC BigDecimal DECIMAL BigDecimal CHAR CHAR String NCHAR NCHAR String VARCHAR VARCHAR String VARCHAR2 VARCHAR String NVARCHAR2 VARCHAR String BLOB BLOB Blob CLOB CLOB Clob NCLOB BINARY BINARY byte[] VARBINARY LONG VARBINARY DATE DATE Date TIME TIME Time TIMESTAMP TIMESTAMP Timestamp 3.2 \u6269\u5c55\u6570\u636e\u7c7b\u578b \u865a\u8c37 JDBC \u9664\u4e86\u5b9e\u73b0\u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b\uff0c\u8fd8\u6839\u636e\u865a\u8c37\u6570\u636e\u5e93\u81ea\u6709\u7c7b\u578b\u6269\u5c55\u4e86\u90e8\u5206\u6570\u636e\u7c7b\u578b\uff08\u88683.2\u6240\u793a\uff09\uff0c\u5305\u62ec\u4ee5\u4e0b\u6570\u636e\u7c7b\u578b\u3002 1. \u65f6\u95f4\u6570\u636e\u7c7b\u578b DATETIME\u2014\u2014\u2014 \u65e5\u671f\u65f6\u95f4\u7c7b\u578b DATETIME WITH TIME ZONE \u2014\u2014\u2014 \u5e26\u65f6\u533a\u7684\u65e5\u671f\u65f6\u95f4\u7c7b\u578b TIME WITH TIME ZONE \u2014\u2014\u2014 \u5e26\u65f6\u533a\u7684\u65f6\u95f4\u7c7b\u578b INTERVAL YEAR \u2014\u2014\u2014 \u5e74\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL MONTH \u2014\u2014\u2014 \u6708\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY\u2014\u2014\u2014 \u65e5\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL HOUR \u2014\u2014\u2014 \u5c0f\u65f6\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL MINUTE \u2014\u2014\u2014 \u5206\u949f\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL SECOND \u2014\u2014\u2014 \u79d2\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL YEAR TO MONTH \u2014\u2014\u2014 \u5e74\u5230\u6708\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY TO HOUR \u2014\u2014\u2014 \u65e5\u5230\u5c0f\u65f6\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY TO MINUTE \u2014\u2014\u2014 \u65e5\u5230\u5206\u949f\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY TO SECOND \u2014\u2014\u2014 \u65e5\u5230\u79d2\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL HOUR TO MINUTE \u2014\u2014\u2014 \u5c0f\u65f6\u5230\u5206\u949f\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL HOUR TO SECOND \u2014\u2014\u2014 \u5c0f\u65f6\u5230\u79d2\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL MINUTE TO SECOND \u2014\u2014\u2014 \u5206\u949f\u5230\u79d2\u7684\u65f6\u95f4\u95f4\u9694 2. \u6e38\u6807\u6570\u636e\u7c7b\u578b\uff08\u53ea\u5728\u5b58\u50a8\u8fc7\u7a0b\u3001\u51fd\u6570\u3001\u5305\u4e2d\u4f7f\u7528\uff09 CURSOR \u2014\u2014\u2014 \u6e38\u6807\u6570\u636e\u7c7b\u578b SYS_REFCURSOR \u2014\u2014\u2014 \u8fd4\u56de\u6e38\u6807\u6570\u636e\u7c7b\u578b 3. \u5176\u4ed6\u6570\u636e\u7c7b\u578b GUID \u2014\u2014\u2014 \u5168\u5c40\u552f\u4e00\u6807\u8bc6\u7b26 \u88683.2 \u6269\u5c55\u6570\u636e\u7c7b\u578b\u5bf9\u5e94\u8868 \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b \u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b Java \u6570\u636e\u7c7b\u578b DATETIME DATETIME Timestamp DATETIME WITH TIME ZONE DATETIME_TZ String TIME WITH TIME ZONE TIME_TZ String INTERVAL YEAR INTERVAL_Y String INTERVAL MONTH INTERVAL_M INTERVAL DAY INTERVAL_D INTERVAL HOUR INTERVAL_H INTERVAL MINUTE INTERVAL_MI INTERVAL SECOND INTERVAL_S String INTERVAL YEAR TO MONTH INTERVAL_Y2M INTERVAL DAY TO HOUR INTERVAL_D2H INTERVAL DAY TO MINUTE INTERVAL_D2M INTERVAL DAY TO SECOND INTERVAL_D2S INTERVAL HOUR TO MINUTE INTERVAL_H2M INTERVAL HOUR TO SECOND INTERVAL_H2S INTERVAL MINUTE TO SECOND INTERVAL_M2S CURSOR CURSOR \u65e0\u5bf9\u5e94\u7c7b\u578b SYS_REFCURSOR REFCUR GUID GUID String \u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528 ResultSet \u5bf9\u8c61\u6765\u5bf9\u5e94\u83b7\u53d6\u6e38\u6807\u6240\u8fd4\u56de\u6570\u636e\u3002 {.is-info} 3.3 \u6570\u636e\u7c7b\u578b\u8f6c\u6362 \u5728\u8c03\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u4e2d\u7684\u67d0\u4e9b\u65b9\u6cd5\u65f6\uff0c\u9700\u8fdb\u884c Java \u6570\u636e\u7c7b\u578b\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u7684\u8f6c\u6362\uff0c\u8fd9\u4e9b\u65b9\u6cd5\u5305\u62ec\uff1a - ResultSet \u7c7b get\\<Type> \u65b9\u6cd5\uff1b - ResultSet \u7c7b update\\<Type> \u65b9\u6cd5\uff1b - CallableStatement \u7c7b get\\<Type> \u65b9\u6cd5\uff1b - PreparedStatement \u7c7b set\\<Type> \u65b9\u6cd5\u3002 \u6570\u636e\u7c7b\u578b\u4e4b\u95f4\u7684\u8f6c\u6362\uff0c\u9700\u9075\u4ece Java \u6570\u636e\u7c7b\u578b\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u6620\u5c04\u5173\u7cfb\u89c4\u5219\uff0c\u5426\u5219\u53ef\u80fd\u8f6c\u6362\u5931\u8d25\u3002 1. com.xugu.cloudjdbc.ResultSet \u7c7b\u4e2d get\\<Type> \u65b9\u6cd5\u7684\u7c7b\u578b\u8f6c\u6362\uff0c\u5982\u88683.3\u6240\u793a\u3002 2. com.xugu.cloudjdbc.PreparedStatement \u7c7b\u4e2d set\\<Type> \u65b9\u6cd5\u7684\u7c7b\u578b\u8f6c\u6362\uff0c\u5982\u88683.4\u6240\u793a\u3002 X\uff08\u65e0\u4e22\u5931\u8f6c\u6362\uff09\uff1a\u6307\u4ee5\u957f\u7cbe\u5ea6\u7c7b\u578b\u7684 get\\<Type> \u65b9\u6cd5\u83b7\u53d6\u77ed\u7cbe\u5ea6\u6570\u636e\u7c7b\u578b\u5217\u503c\u65e0\u4e22\u5931\u3002 \u5982\uff1a\u4f7f\u7528 getInt() \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u4e3a smallint \u7684\u5217\u6570\u636e\uff0c\u83b7\u53d6\u6570\u636e\u5b8c\u6574\u3002 Z\uff08\u4f9d\u8d56\u8f6c\u6362\uff09\uff1a\u6307 get\\<Type> \u65b9\u6cd5\u4e2d\u7684 Type \u7c7b\u578b\u4e0e\u83b7\u53d6\u6570\u636e\u5e93\u4e2d\u5217\u7684\u6570\u636e\u7c7b\u578b\u4e0d\u4e00\u81f4\uff0c\u6b64\u65f6\u9700\u8981\u901a\u8fc7\u5176\u4ed6\u6570\u636e\u7c7b\u578b\u8f6c\u6362\u4e3a Type \u6570\u636e\u7c7b\u578b\uff0c\u6b64\u8f6c\u6362\u8fc7\u7a0b\u503c\u53ef\u80fd\u4e22\u5931\u90e8\u5206\u6570\u636e\u3002 \u5982\uff1a\u4f7f\u7528 getInt() \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u4e3a float \u7684\u5217\u6570\u636e\uff0c\u53ef\u83b7\u53d6 float \u5217\u6570\u636e\u7684\u6574\u6570\u503c\uff0c\u800c\u5c0f\u6570\u7cbe\u5ea6\u503c\u5c06\u4e22\u5931\u3002 Y\uff08\u76f4\u63a5\u8f6c\u6362\uff09\uff1a\u6307 get\\<Type> \u65b9\u6cd5\u4e2d\u7684 Type \u7c7b\u578b\u4e0e\u83b7\u53d6\u6570\u636e\u5e93\u4e2d\u5217\u7684\u6570\u636e\u7c7b\u578b\u4e00\u81f4\u3002 \u5982\uff1a\u4f7f\u7528 getInt() \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u4e3a integer \u7684\u5217\u6570\u636e\uff0c\u76f4\u63a5\u83b7\u53d6\u5b8c\u6574\u6570\u636e\u3002 {.is-info} P\uff08\u5141\u8bb8\u63d2\u5165\uff09\uff1a\u6307 set\\<Type> \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u5e93\u4e2d\u5217\u6570\u636e\u65f6\uff0c\u6570\u636e\u65e0\u635f\u5931\u5b58\u5165\u6570\u636e\u5e93\u4e2d\u3002 \u5982\uff1a\u4f7f\u7528 setInt() \u65b9\u6cd5\u8bbe\u7f6e\u5217\u6570\u636e\u7c7b\u578b\u4e3a bigint \u7684\u6570\u636e\u65f6\uff0c\u6570\u636e\u53ef\u6b63\u786e\u5b58\u5165\u3002 Z\uff08\u90e8\u5206\u63d2\u5165\uff09\uff1a\u6307 set\\<Type> \u65b9\u6cd5\u4e2d\u7684 Type \u7c7b\u578b\u548c\u6570\u636e\u5e93\u4e2d\u5217\u6570\u636e\u7c7b\u578b\u4e0d\u4e00\u81f4\uff0c\u6570\u636e\u4ec5\u80fd\u90e8\u5206\u6b63\u786e\u5b58\u5165\u3002 \u5982\uff1a\u4f7f\u7528 setInt() \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u5e93\u5217\u7c7b\u578b\u4e3a tinyint \u7684\u6570\u636e\uff0c\u56e0 tinyint \u8868\u793a\u8303\u56f4\u4e3a-128\uff5e127 \u7684\u6574\u6570\u503c\uff0c\u6545\u800c tinyint\u8868\u793a\u8303\u56f4\u5185\u6570\u636e\u53ef\u6b63\u786e\u5b58\u5165\uff0c\u8303\u56f4\u5916\u6570\u636e\u5c06\u63d2\u5165\u5931\u8d25\u3002 {.is-info} \u56db. \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5 4.1 \u90e8\u7f72JDBC\u9a71\u52a8\u7a0b\u5e8f \u901a\u8fc7\u865a\u8c37 JDBC \u9a71\u52a8\u8bbf\u95ee\u865a\u8c37\u6570\u636e\u5e93\uff0c\u9996\u5148\u5e94\u4fdd\u8bc1\u5e94\u7528\u7a0b\u5e8f\u6b63\u786e\u5f15\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u5305 (cloudjdbc-*.*.*.jar)\uff0c\u5373\u5c06\u9a71\u52a8\u5305\u62f7\u8d1d\u81f3\u5e94\u7528\u7a0b\u5e8f\u5e76\u6dfb\u52a0\u5f15\u7528\u3002 4.2 \u52a0\u8f7dJDBC\u9a71\u52a8\u7a0b\u5e8f \u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u8fdb\u884c\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u8c03\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u7a0b\u5e8f\uff0c\u9996\u5148\u8981\u5c06\u865a\u8c37 JDBC \u9a71\u52a8\u52a0\u8f7d\u5230\u7cfb\u7edf\u5185\u5b58\u4e2d\uff0c\u7136\u540e\u4f9b\u7cfb\u7edf\u4f7f\u7528\u3002\u865a\u8c37 JDBC \u7684\u9a71\u52a8\u5b9e\u73b0\u7c7b\u4e3acom.xugu.cloudjdbc.Driver\uff0c\u4ee5\u4e0b\u662f\u5c06\u865a\u8c37 JDBC \u9a71\u52a8\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\u7684\u4ee3\u7801\uff1a //\u663e\u793a\u6ce8\u518c DriverManager.registerDriver(new com.xugu.cloudjdbc.Driver())\u037e //\u9690\u5f0f\u6ce8\u518c Class.forName(\u201ccom.xugu.cloudjdbc.Driver\u201d)\u037e \u9690\u5f0f\u6ce8\u518c\u5373\u901a\u8fc7 Class.forName() \u5c06\u5bf9\u5e94\u7684\u9a71\u52a8\u7c7b\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\uff0c\u5c06\u6267\u884c\u5185\u5b58\u4e2d\u7684 static \u9759\u6001\u4ee3\u7801\u6bb5\uff0c\u6b64\u4ee3\u7801\u6bb5\u4f1a\u521b\u5efa\u4e00\u4e2a\u865a\u8c37 JDBC \u9a71\u52a8\u7684\u5b9e\u4f8b\uff0c\u5e76\u653e\u5165 DriverManager \u4e2d\uff0c\u4f9b DriverManager \u4f7f\u7528\u3002 {.is-info} 4.3 \u8fde\u63a5\u5b57\u4e32\u53ca\u53c2\u6570\u8bbe\u7f6e \u865a\u8c37 JDBC \u9a71\u52a8\u8fde\u63a5 URL \u4e32\u683c\u5f0f\uff1a jdbc:xugu://serverIP:portNumber/databaseName[?property=value[&property=value]] \u865a\u8c37 JDBC \u9a71\u52a8\u8fde\u63a5 URL \u4e32\u683c\u5f0f\uff1a 1). jdbc:xugu:// \uff1a\uff08\u5fc5\u9700\uff09\u865a\u8c37\u6570\u636e\u5e93\u7279\u5b9a\u534f\u8bae\u3002 2). serverIP \uff1a\uff08\u5fc5\u9700\uff09\u865a\u8c37\u6570\u636e\u5e93\u6240\u5728\u670d\u52a1\u5668\u7684 IP \u5730\u5740\u3002 3). portNumber\uff1a\uff08\u5fc5\u9700\uff09\u662f\u865a\u8c37\u6570\u636e\u5e93\u670d\u52a1 TCP \u8bbf\u95ee\u7aef\u53e3\uff0c\u9ed8\u8ba4 5138\u3002 4). databaseName\uff1a\uff08\u5fc5\u9700\uff09\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u5e93\u540d\u79f0\u3002 5). property\uff1a\uff08\u53ef\u9009\uff09\u865a\u8c37\u6570\u636e\u5e93\u7684 URL \u8fde\u63a5\u5c5e\u6027\u3002\u591a\u4e2a\u8fde\u63a5\u5c5e\u6027\u4e4b\u95f4\u4f7f\u7528\u201c&\u201d\u5206\u9694\uff0c\u4e0d\u53ef\u91cd\u590d\u3002 \u865a\u8c37 JDBC \u9a71\u52a8 URL \u4e32\u793a\u4f8b\u5982\u4e0b\uff1a String url = jdbc:xugu://localhost:5138/System?user=GUEST&password=GUEST\u037e property \u8bbe\u7f6e\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u6027\uff0c\u5e38\u7528\u8fde\u63a5\u5c5e\u6027\u89c1\u88684.1\u3002 \u88684.1 \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u6027 table th:first-of-type { width: 20%; } table th:nth-of-type(2) { width: 10%; } table th:nth-of-type(3) { width: 10%; } table th:nth-of-type(4) { width: 50%; } \u5c5e\u6027\u540d\u79f0 \u5fc5\u9009\u9879 \u53d6\u503c \u8bf4\u660e database \u221a \u5b57\u7b26\u4e32 \u6570\u636e\u5e93\u540d\u79f0 user \u221a \u5b57\u7b26\u4e32 \u7528\u6237\u540d\u79f0 password \u221a \u5b57\u7b26\u4e32 \u7528\u6237\u5bc6\u7801 encryptor \u00d7 \u5b57\u7b26\u4e32 \u7528\u4e8e\u542f\u52a8\u52a0\u5bc6\u6570\u636e\u5e93\uff0c\u82e5\u5e93\u672a\u52a0\u5bc6\uff0c\u5219\u53ef\u4e0d\u8981\uff0c\u4f46\u5e26\u4e0a\u6b64\u53c2\u6570\u4e0d\u4f1a\u5f71\u54cd\u8fde\u63a5 char_set \u00d7 \u5b57\u7b26\u4e32 \u8fde\u63a5\u5b57\u7b26\u96c6\u3002'GB2312'\u3001'GBK'\u3001'UTF8' \u7b49\uff0c\u9ed8\u8ba4\uff1aGBK time_zone \u00d7 \u5b57\u7b26\u4e32 \u5ba2\u6237\u7aef\u65f6\u533a\u3002\u9ed8\u8ba4\uff1a\u865a\u8c37\u6570\u636e\u5e93\u914d\u7f6e\u53c2\u6570 def_timezone \u6240\u8bbe\u7f6e\u65f6\u533a\uff08\u53ea\u5bf9\u7cfb\u7edf\u65f6\u95f4\u51fd\u6570\u751f\u6548\uff09 iso_level \u00d7 \u5b57\u7b26\u4e32 'READ COMMITED'\uff1a\u8bfb\u5df2\u63d0\u4ea4\uff1b 'REPEATIABLE READ'\uff1a\u53ef\u91cd\u590d\u8bfb\uff1b'SERIALIZABLE'\uff1a\u5e8f\u5217\u5316 lock_time \u00d7 \u6570\u503c \u5355\u4f4d\uff1a\u6beb\u79d2\uff0c\u9ed8\u8ba4\u503c\uff1a0\uff0c\u8868\u793a\u8fde\u63a5\u4e2d\u7684\u4e8b\u52a1\u9501\u5f81\u7528\u65f6\uff0c\u6700\u5927\u7b49\u5019\u65f6\u95f4\uff0c\u82e5\u5728\u8bbe\u7f6e\u65f6\u95f4\u5185\u52a0\u9501\u5931\u8d25\uff0c\u56de\u6eda\u4e8b\u52a1\u5e76\u62a5\u9519 lob_ret \u00d7 \u5b57\u7b26\u4e32 \u5927\u5bf9\u8c61\uff08Blob\u3001Clob\uff09\u6570\u636e\u8fd4\u56de\u65b9\u5f0f\u3002\u5c5e\u6027\u4e3a descriptor \u65f6\uff0c\u4ee5\u63cf\u8ff0\u7b26\u65b9\u5f0f\u8fd4\u56de\uff1b\u5176\u4ed6\u4ee5\u6570\u636e\u6d41\u65b9\u5f0f\u8fd4\u56de\u3002\u9ed8\u8ba4\uff1a\u4ee5\u6570\u636e\u6d41\u65b9\u5f0f\u8fd4\u56de return_rowid \u00d7 \u5e03\u5c14\u503c \u662f\u5426\u8fd4\u56de\u8bb0\u5f55 rowid \u503c\u3002\u5c5e\u6027\u4e3a TRUE \u65f6\uff0c\u8fd4\u56de rowid\uff1b\u5176\u4ed6\u8fd4\u56de FALSE\u3002\u9ed8\u8ba4\uff1aFALSE auto_commit \u00d7 on/off \u4e8b\u52a1\u662f\u5426\u81ea\u52a8\u63d0\u4ea4\u3002\u5c5e\u6027\u4e3a ON \u65f6\uff0c\u8fde\u63a5\u81ea\u52a8\u63d0\u4ea4\uff1b\u5c5e\u6027\u4e3a OFF\u65f6\uff0c\u8fde\u63a5\u975e\u81ea\u52a8\u63d0\u4ea4\u3002\u9ed8\u8ba4\uff1aON conn_type \u00d7 \u6570\u503c \u8d1f\u8f7d\u5747\u8861\u5206\u914d\u65b9\u5f0f\u3002\u5c5e\u6027\u4e3a 1 \u65f6\uff0c\u968f\u673a\u5206\u914d\uff1b\u5c5e\u6027\u4e3a 2 \u65f6\uff0c\u987a\u5e8f\u5206\u914d\u3002\u9ed8\u8ba4\uff1a2 ips \u00d7 \u5b57\u7b26\u4e32 \u8d1f\u8f7d\u5747\u8861\u8fde\u63a5 IP \u5730\u5740\uff0c\u591a\u4e2a IP \u5730\u5740\u4ee5\u9017\u53f7\u5206\u9694\uff08\u8be6\u7ec6\u89c1\u8d1f\u8f7d\u5747\u8861\uff09 CompatibleOracle \u00d7 \u5e03\u5c14\u503c \u517c\u5bb9 Oracle \u9009\u9879\u3002\u5c5e\u6027\u4e3a true\uff0c\u517c\u5bb9 Oracle\u037e \u5c5e\u6027\u4e3a FALSE\uff0c\u865a\u8c37 JDBC \u81ea\u6709\u5b9e\u73b0 recv_mode \u00d7 \u6570\u503c \u63a5\u6536\u6a21\u5f0f\u9009\u9879\u3002\u5c5e\u6027\u503c\u4e3a 0 \u65f6\uff0c\u672c\u5730\u5168\u63a5\u6536\u6a21\u5f0f\uff1b\u5c5e\u6027\u503c\u4e3a 1 \u65f6\uff0c\u7f51\u7edc\u63a5\u6536\u6a21\u5f0f\uff1b\u5c5e\u6027\u503c\u4e3a 2 \u65f6\uff0c\u670d\u52a1\u5668\u7aef\u6e38\u6807\u63a5\u6536\u6a21\u5f0f\u3002\u9ed8\u8ba4\uff1a0 emptyStringAsNull \u00d7 \u5e03\u5c14\u503c \u7a7a\u5b57\u4e32\u5904\u7406\u3002\u5c5e\u6027\u4e3a FALSE \u65f6\uff0c\u7a7a\u5b57\u7b26\u4e32\u8ba4\u5b9a\u4e3a NULL\uff1b\u5c5e\u6027\u4e3a TRUE \u65f6\uff0c\u7a7a\u5b57\u7b26\u4e32\u4fdd\u7559\u3002\u9ed8\u8ba4\uff1a\u7a7a\u5b57\u4e32\u4fdd\u7559 xgversion \u00d7 201/301 \u5ba2\u6237\u7aef\u534f\u8bae\u7248\u672c\uff0c\u865a\u8c37\u6570\u636e\u5e93V12\u7248\u672c\u5347\u7ea7\u652f\u6301301\u534f\u8bae\uff0c\u540c\u65f6\u517c\u5bb9201\u534f\u8bae SSL \u00d7 SSL \u8fde\u63a5\u52a0\u5bc6\u53c2\u6570\u3002\u5c5e\u6027\u503c\u3010SSL\uff1a\u542f\u7528SSL\u52a0\u5bc6\u4f20\u8f93\uff1bNSSL\uff1a\u7981\u7528SSL\u52a0\u5bc6\u4f20\u8f93\u3011 slowsqltime \u00d7 \u6570\u503c \u8bbe\u7f6e\u6162SQL\u6267\u884c\u65f6\u95f4\u3002SQL\u8bed\u53e5\u6267\u884c\u65f6\u95f4\u8d85\u8fc7\u8be5\u6570\u503c\uff0c\u65e5\u5fd7\u5219\u4f1a\u8f93\u51fa\u6267\u884cSQL batch_mode \u00d7 \u5e03\u5c14\u503c PreparedStatement\u662f\u5426\u4f7f\u7528\u6279\u91cf\u5904\u7406\u3002\u5c5e\u6027\u4e3a TRUE \u65f6\uff0cexecuteBatch\u91c7\u7528\u6279\u91cf\u6a21\u578b\uff1bFALSE\u5219\u91c7\u7528\u5355\u6761\u5904\u7406\u6a21\u578b\u3002\u9ed8\u8ba4\uff1aFALSE \u8fde\u63a5\u53c2\u6570\u4f7f\u7528SSL\u5c5e\u6027\u65f6\uff0c\u4f9d\u8d56\u7a0b\u5e8f\u5305\u4e2d\u63d0\u4f9b\u7684\u52a8\u6001\u94fe\u63a5\u5e93\uff0c\u4f7f\u7528\u524d\u9700\u5c06\u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u5230\u64cd\u4f5c\u7cfb\u7edf\u6307\u5b9a\u4f4d\u7f6e\u65b9\u53ef\u6b63\u5e38\u4f7f\u7528SSL\u52a0\u5bc6\u529f\u80fd\u3002 Windows 32\u4f4d\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u7528SSL\u5c5e\u6027\u524d\uff0c\u9700\u5c06\u7a0b\u5e8f\u5305 ssl/win32 \u4e0b xgssl.dll \u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u62f7\u8d1d\u5230\u7cfb\u7edf\u76ee\u5f55 C:/windows/system32 \u76ee\u5f55\u4f4d\u7f6e\u3002 Windows 64\u4f4d\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u7528SSL\u5c5e\u6027\u524d\uff0c\u9700\u5c06\u7a0b\u5e8f\u5305 ssl/win64 \u4e0b xgssl.dll \u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u62f7\u8d1d\u5230\u7cfb\u7edf\u76ee\u5f55 C:/windows/system32 \u76ee\u5f55\u4e0b\u3002 Linux X64\u4f4d\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u7528SSL\u5c5e\u6027\u524d\uff0c\u9700\u5c06\u7a0b\u5e8f\u5305 ssl/linux64 \u4e0b libxgssl.so \u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u62f7\u8d1d\u5230\u7cfb\u7edf\u76ee\u5f55 /usr/lib\u6216\u8005/usr/lib4 \u76ee\u5f55\u4e0b\u3002 \u865a\u8c37 JDBC \u8bbe\u7f6e\u8fde\u63a5\u5c5e\u6027\u793a\u4f8b\u5982\u4e0b (\u7248\u672c\u53f7\u3001\u5927\u5bf9\u8c61\u63cf\u8ff0\u7b26\u3001\u65f6\u533a\u3001\u5173\u95ed\u8fde\u63a5\u81ea\u52a8\u63d0\u4ea4)\uff1a String url=jdbc:xugu://localhost:5138/System?user=GUEST&password=GUEST&version=110&auto_commit=false&lob_ret=descriptor&time_zone=GMT-8:00\u037e 4.4 \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5 \u5728\u5e94\u7528\u7a0b\u5e8f\u5c06\u865a\u8c37 JDBC \u9a71\u52a8\u52a0\u8f7d\u5230\u7cfb\u7edf\u5185\u5b58\u4e2d\u540e\uff0c\u53ef\u901a\u8fc7 DriverManager \u7c7b\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u65b9\u6cd5\u5982\u4e0b\uff1a DriverManager.getConnection(String url)\u037e DriverManager.getConnection(String url,Properties)\u037e DriverManager.getConnection(String url,String user,String password)\u037e \u4e94. \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u6e90\u548c\u8fde\u63a5\u6c60 \u901a\u8fc7 DriverManager \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u4ee5\u5916\uff0c\u8fd8\u53ef\u4ee5\u4f7f\u7528\u6570\u636e\u6e90\u6216\u8fde\u63a5\u6c60\u65b9\u5f0f\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u3002\u901a\u8fc7\u6570\u636e\u6e90\u65b9\u5f0f\u6216\u8fde\u63a5\u6c60\u65b9\u5f0f\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u6709\u4ee5\u4e0b\u4f18\u70b9\uff1a - \u8d44\u6e90\u91cd\u7528 \u7531\u4e8e\u6570\u636e\u5e93\u8fde\u63a5\u5f97\u5230\u91cd\u7528\uff0c\u907f\u514d\u4e86\u9891\u7e41\u521b\u5efa\u3001\u91ca\u653e\u8fde\u63a5\u5f15\u8d77\u7684\u5927\u91cf\u6027\u80fd\u5f00\u9500\u3002\u5728\u51cf\u5c11\u7cfb\u7edf\u6d88\u8017\u7684\u57fa\u7840\u4e0a\uff0c\u53e6\u4e00\u65b9\u9762\u4e5f\u589e\u8fdb\u4e86\u7cfb\u7edf\u8fd0\u884c\u73af\u5883\u7684\u5e73\u7a33\u6027\uff08\u51cf\u5c11\u5185\u5b58\u788e\u7247\u4ee5\u53ca\u6570\u636e\u5e93\u4e34\u65f6\u8fdb\u7a0b/\u7ebf\u7a0b\u7684\u6570\u91cf\uff09\u3002 - \u66f4\u5feb\u7684\u7cfb\u7edf\u54cd\u5e94 \u6570\u636e\u5e93\u8fde\u63a5\u6c60\u5728\u521d\u59cb\u5316\u8fc7\u7a0b\u4e2d\uff0c\u5f80\u5f80\u5df2\u7ecf\u521b\u5efa\u4e86\u82e5\u5e72\u6570\u636e\u5e93\u8fde\u63a5\u7f6e\u4e8e\u6c60\u4e2d\u5907\u7528\u3002\u6b64\u65f6\u8fde\u63a5\u7684\u521d\u59cb\u5316\u5de5\u4f5c\u5747\u5df2\u5b8c\u6210\u3002\u5bf9\u4e8e\u4e1a\u52a1\u8bf7\u6c42\u5904\u7406\u800c\u8a00\uff0c\u76f4\u63a5\u5229\u7528\u73b0\u6709\u53ef\u7528\u8fde\u63a5\uff0c\u907f\u514d\u4e86\u6570\u636e\u5e93\u8fde\u63a5\u521d\u59cb\u5316\u548c\u91ca\u653e\u8fc7\u7a0b\u7684\u65f6\u95f4\u5f00\u9500\uff0c\u4ece\u800c\u7f29\u51cf\u4e86\u7cfb\u7edf\u6574\u4f53\u54cd\u5e94\u65f6\u95f4\u3002 - \u65b0\u7684\u8d44\u6e90\u5206\u914d\u624b\u6bb5 \u5bf9\u4e8e\u591a\u5e94\u7528\u5171\u4eab\u540c\u4e00\u6570\u636e\u5e93\u7684\u7cfb\u7edf\u800c\u8a00\uff0c\u53ef\u5728\u5e94\u7528\u5c42\u901a\u8fc7\u6570\u636e\u5e93\u8fde\u63a5\u7684\u914d\u7f6e\uff0c\u9650\u5236\u5355\u4e00\u5e94\u7528\u7533\u8bf7\u6570\u636e\u5e93\u8fde\u63a5\u6570\uff0c\u4ece\u800c\u907f\u514d\u5355\u4e00\u5e94\u7528\u72ec\u5360\u6240\u6709\u6570\u636e\u5e93\u8d44\u6e90\u3002 \u865a\u8c37 JDBC \u4e2d\u6570\u636e\u6e90\u5b9e\u73b0\u7c7b\u4e3a com.xugu.pool.XgDataSource\uff0c\u8fde\u63a5\u6c60\u5b9e\u73b0\u7c7b\u4e3acom.xugu.pool \u5305\u4e2d\u7684 XgDataSource\u3001XgPooledConnection\u3001XgConnectionPoolDataSource\u3001XgConnectionEventListener\u3001XgConnectionEvent\u3002 5.1 \u4f7f\u7528\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u6e90\u521b\u5efa\u8fde\u63a5 XgDataSource \u63d0\u4f9b set \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u6e90\u8fde\u63a5\u5c5e\u6027\uff1a \u793a\u4f8b\uff1a\u901a\u8fc7 XgDataSource \u4e0e\u865a\u8c37\u6570\u636e\u5e93\u5efa\u7acb\u8fde\u63a5 com.xugu.pool.XgDataSource ds = new com.xugu.pool.XgDataSource()\u037e ds.setUrl(\"jdbc:xugu://127.0.0.1:5138/db\")\u037e ds.setUser(\"SYSDBA\")\u037e ds.setPassword(\"SYSDBA\")\u037e Properties pro = new Properties()\u037e pro.setProperty(\"return_rowid\", \"true\")\u037e pro.setProperty(\"auto_commit\", \"off\")\u037e ds.setPro(pro)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u767b\u5f55\u4e32\u3002url\u4e3a\u6570\u636e\u5e93\u767b\u5f55\u4e32 setUrl(String url)\uff1b //\u6307\u5b9a\u6570\u636e\u5e93\u670d\u52a1\u5668\u3002host\u4e3a\u670d\u52a1\u5668\u5730\u5740 setHostName(String host)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u540d\u3002dbName\u4e3a\u6570\u636e\u5e93\u540d setDatabaseName(String dbName)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u7aef\u53e3\u53f7\u3002port\u4e3a\u6570\u636e\u5e93\u7aef\u53e3\u53f7 setPort(int port)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u7528\u6237\u3002userName\u4e3a\u6570\u636e\u5e93\u767b\u5f55\u7528\u6237\u540d setUser(String userName)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u767b\u5f55\u5bc6\u7801\u3002passWord\u4e3a\u6570\u636e\u5e93\u767b\u5f55\u5bc6\u7801 setPassword(Stirng passWord)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u767b\u5f55\u53c2\u6570\u3002ds_pro\u4e3a\u6570\u636e\u5e93\u8fde\u63a5\u53c2\u6570 setPro(Properties ds_pro)\uff1b // \u901a\u8fc7\u6570\u636e\u6e90\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5 Connection conn = ds.getConnection()\u037e \u5728 com.xugu.pool.XgDataSource \u7c7b\u4e2d\u901a\u8fc7 setXX() \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u6e90\u7684\u8fde\u63a5\u5c5e\u6027\uff0c\u82e5\u672a\u6307\u5b9a\u5219\u4f7f\u7528\u9ed8\u8ba4\u5c5e\u6027\u503c\uff1a\u6570\u636e\u5e93\u670d\u52a1\u5668\u5730\u5740\u9ed8\u8ba4\u4e3a\u201clocalhost\u201d \uff0c\u8fde\u63a5\u6570\u636e\u5e93\u9ed8\u8ba4\u4e3a\u201cSYSTEM\u201d \uff0c\u8bbf\u95ee\u7aef\u53e3\u53f7\u9ed8\u8ba4\u4e3a\u201c5138\u201d \uff0c\u8bbf\u95ee\u7528\u6237\u540d\u9ed8\u8ba4\u4e3a\u201cGUEST\u201d \uff0c\u7528\u6237\u5bc6\u7801\u9ed8\u8ba4\u4e3a\u201cGUEST\u201d \u3002URL \u9ed8\u8ba4\u8fde\u63a5\u4e32\u4e3a\u201cjdbc:xugu://127.0.0.1:5138/SYSTEM?user=GUEST&password=GUEST&version=110\u201d\u3002\u6570\u636e\u6e90\u5efa\u7acb\u540e\uff0c\u53ef\u901a\u8fc7\u8c03\u7528 XgDataSource \u7c7b\u4e2d\u7684 getConnection() \u548c getConnection(String username,String password) \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u3002 5.2 \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u6c60 \u8fde\u63a5\u6c60\u6280\u672f\u7684\u6838\u5fc3\u601d\u60f3\u662f\uff1a\u8fde\u63a5\u590d\u7528\uff0c\u901a\u8fc7\u5efa\u7acb\u4e00\u4e2a\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u4ee5\u53ca\u4e00\u5957\u8fde\u63a5\u4f7f\u7528\u3001\u5206\u914d\u3001\u7ba1\u7406\u7b56\u7565\uff0c\u8be5\u8fde\u63a5\u6c60\u4e2d\u7684\u8fde\u63a5\u53ef\u4ee5\u5f97\u5230\u9ad8\u6548\u3001\u5b89\u5168\u7684\u590d\u7528\uff0c\u907f\u514d\u4e86\u6570\u636e\u5e93\u8fde\u63a5\u9891\u7e41\u5efa\u7acb\u3001\u5173\u95ed\u7684\u5f00\u9500\u3002 \u865a\u8c37 JDBC \u8fde\u63a5\u6c60\u5b9e\u73b0\u7c7b\u5bf9\u865a\u8c37\u6570\u636e\u5e93\u539f\u59cb\u8fde\u63a5\u8fdb\u884c\u4e86\u5c01\u88c5\uff0c\u4ece\u800c\u65b9\u4fbf\u4e86\u6570\u636e\u5e93\u5e94\u7528\u5bf9\u4e8e\u8fde\u63a5\u7684\u4f7f\u7528\uff08\u7279\u522b\u662f\u5bf9\u4e8e\u4e8b\u52a1\u5904\u7406\uff09\uff0c\u63d0\u9ad8\u4e86\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u6548\u7387\uff0c\u4e5f\u6b63\u662f\u56e0\u4e3a\u8fd9\u4e2a\u5c01\u88c5\u5c42\u7684\u5b58\u5728\uff0c\u9694\u79bb\u4e86\u5e94\u7528\u7684\u672c\u8eab\u7684\u5904\u7406\u903b\u8f91\u548c\u5177\u4f53\u6570\u636e\u5e93\u8bbf\u95ee\u903b\u8f91\uff0c\u4f7f\u5e94\u7528\u672c\u8eab\u7684\u590d\u7528\u6210\u4e3a\u53ef\u80fd\u3002\u8fde\u63a5\u6c60\u4e3b\u8981\u7531\u4e09\u90e8\u5206\u7ec4\u6210\uff1a\u8fde\u63a5\u6c60\u7684\u5efa\u7acb\u3001\u8fde\u63a5\u6c60\u4e2d\u8fde\u63a5\u7684\u4f7f\u7528\u7ba1\u7406\u3001\u8fde\u63a5\u6c60\u7684\u5173\u95ed\u3002 \u865a\u8c37 JDBC \u8fde\u63a5\u6c60\u7684\u57fa\u672c\u601d\u60f3\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u5efa\u7acb\u4e00\u4e2a\u201c\u7f13\u51b2\u6c60\u201d\u3002\u9884\u5148\u5728\u201c\u7f13\u51b2\u6c60\u201d\u4e2d\u653e\u5165\u4e00\u5b9a\u6570\u91cf\u7684\u8fde\u63a5\uff0c\u5f53\u9700\u8981\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65f6\uff0c\u53ea\u9700\u4ece\u201c\u7f13\u51b2\u6c60\u201d\u4e2d\u53d6\u51fa\u4e00\u4e2a\uff0c\u4f7f\u7528\u5b8c\u6bd5\u4e4b\u540e\u518d\u653e\u56de\u53bb\u3002\u901a\u8fc7\u8bbe\u5b9a\u8fde\u63a5\u6c60\u6700\u5927\u8fde\u63a5\u6570\u6765\u9632\u6b62\u7cfb\u7edf\u65e0\u5c3d\u7684\u4e0e\u6570\u636e\u5e93\u8fde\u63a5\u3002\u4ea6\u53ef\u901a\u8fc7\u8fde\u63a5\u6c60\u7684\u7ba1\u7406\u673a\u5236\u76d1\u89c6\u6570\u636e\u5e93\u7684\u8fde\u63a5\u6570\u91cf\u3001\u4f7f\u7528\u60c5\u51b5\uff0c\u4e3a\u7cfb\u7edf\u5f00\u53d1\u3001\u6d4b\u8bd5\u53ca\u6027\u80fd\u8c03\u6574\u63d0\u4f9b\u4f9d\u636e\u3002 \u5f53\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u5b8c\u6570\u636e\u5e93\u8fde\u63a5\u8c03\u7528\u8fde\u63a5\u5173\u95ed\u65b9\u6cd5\u65f6\uff0c\u8be5\u8fde\u63a5\u5e76\u672a\u9500\u6bc1\uff0c\u800c\u662f\u88ab\u5f52\u8fd8\u7ed9\u8fde\u63a5\u6c60\u7b49\u5f85\u4e0b\u6b21\u7ee7\u7eed\u8c03\u7528\u3002 {.is-info} \u865a\u8c37 JDBC \u5b9e\u73b0\u8fde\u63a5\u6c60\u670d\u52a1\u6240\u63d0\u4f9b\u7684\u63a5\u53e3\u7c7b\u5982\u4e0b\uff1a - XgDataSource \u5b9e\u73b0 javax.sql.DataSource \u63a5\u53e3\uff1b - XgPooledConnection \u5b9e\u73b0 javax.sql.PooledConnection \u63a5\u53e3\uff1b - XgConnectionPoolDataSource \u5b9e\u73b0 javax.sql.ConnectionPoolDataSource \u63a5\u53e3\uff1b - XgConnectionEventListener \u5b9e\u73b0 javax.sql.ConnectionEventListener \u63a5\u53e3\uff1b - XgConnectionEvent \u7ee7\u627f\u81ea javax.sql.ConnectionEvent \u7c7b\u3002 \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u4e2d\u7684\u8fde\u63a5\u5747\u662f\u901a\u8fc7\u6570\u636e\u6e90\u5efa\u7acb\u7684\uff0c\u6545\u800c XgConnectionPoolDataSource \u7ee7\u627f\u4e86 com.xugu.pool.XgDataSource \u7c7b\u3002\u7528\u6237\u4ea6\u53ef\u901a\u8fc7 XgConnectionPoolDataSource \u5bf9\u8c61\u8bbe\u7f6e\u6570\u636e\u6e90\u5c5e\u6027\u548c\u8fde\u63a5\u6c60\u5c5e\u6027\uff1a //\u6700\u5c0f\u8fde\u63a5\u6570 setMinIdle(int min) //\u6700\u5927\u8fde\u63a5\u6570 setMaxActive(int max) //\u767b\u5f55\u7a7a\u95f2\u65f6\u95f4 setLoginTimeout(int time) //\u6700\u5927\u7b49\u5f85\u8fde\u63a5\u8d85\u65f6 setMaxWaitTime(long waitTime) \u5176\u4e2d\uff1asetLoginTimeout() \u548c setMaxWaitTime() \u65b9\u6cd5\u4e2d\u53c2\u6570\u5355\u4f4d\u4e3a\u6beb\u79d2\uff0c\u5176\u4ed6\u65b9\u6cd5\u4e2d\u53c2\u6570\u5355\u4f4d\u4e3a\u79d2\u3002 \u793a\u4f8b\uff1a\u521b\u5efa\u4e00\u4e2a\u865a\u8c37 JDBC \u8fde\u63a5\u6c60\uff0c\u5e76\u901a\u8fc7\u8fde\u63a5\u6c60\u83b7\u53d6\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u3002 XgConnectionPoolDataSource CPDSource = new XgConnectionPoolDataSource()\u037e CPDSource.setHostName(\u201clocalhost\u201d)\u037e CPDSource.setPort(5138)\u037e CPDSource.setDatabaseName(\u201cxuguNew\u201d)\u037e CPDSource.setUser(\u201cSYSDBA\u201d)\u037e CPDSource.setPassword(\u201cSYSDBA\u201d)\u037e CPDSource.setUrl(\"jdbc:xugu://localhost:5138/xuguNew)\u037e CPDSource.setMaxActive(50)\u037e CPDSource.setMinIdle(5)\u037e CPDSource.setLoginTimeout(3000)\u037e CPDSource.setMaxWaitTime(3000)\u037e XgPooledConnection Pconn = (XgPooledConnection)CPDSource.getPooledConnection()\u037e Connection conn = Pconn.getConnection()\u037e \u516d. \u865a\u8c37\u6570\u636e\u5e93\u7684JDBC\u4ea4\u4e92\u6d41\u7a0b \u4f7f\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u5b9e\u73b0\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u4ea4\u4e92\u7684\u4e00\u822c\u4f7f\u7528\u6b65\u9aa4\uff1a\u5bfc\u5165\u865a\u8c37 JDBC \u9a71\u52a8\u5305 \u2192 \u52a0\u8f7d\u865a\u8c37 JDBC \u9a71\u52a8\u7a0b\u5e8f \u2192 \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5 Connection \u2192 \u521b\u5efa\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61 Statement \u2192 \u6267\u884c SQL \u8bed\u53e5 \u2192 \u5904\u7406\u6267\u884c\u7ed3\u679c ResultSet \u2192 \u91ca\u653e\u8d44\u6e90\u3002 - \u7b2c 1 \u6b65\uff1a\u5bfc\u5165\u865a\u8c37 JDBC \u9a71\u52a8\u5305 - \u7b2c 2 \u6b65\uff1a\u6ce8\u518a\u9a71\u52a8 (\u4ec5\u505a\u4e00\u6b21) - \u7b2c 3 \u6b65\uff1a\u5efa\u7acb\u8fde\u63a5 (Connection) - \u7b2c 4 \u6b65\uff1a\u521b\u5efa\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61 (Statement) - \u7b2c 5 \u6b65\uff1a\u6267\u884c SQL \u8bed\u53e5 - \u7b2c 6 \u6b65\uff1a\u5904\u7406\u6267\u884c\u7ed3\u679c (ResultSet) - \u7b2c 7 \u6b65\uff1a\u91ca\u653e\u8d44\u6e90 6.1 \u5bfc\u5165\u865a\u8c37JDBC\u9a71\u52a8\u5305 \u4e0b\u8f7d\u865a\u8c37\u6570\u636e\u5e93\u4e13\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u5305 (cloudjdbc-*.*.*.jar)\uff0c\u5e76\u5bfc\u5165\u5230\u5e94\u7528\u7a0b\u5e8f\u4e2d\u3002 6.2 \u52a0\u8f7d\u865a\u8c37JDBC\u9a71\u52a8 \u865a\u8c37 JDBC \u9a71\u52a8\u7a0b\u5e8f\u4e2d Driver \u63a5\u53e3\u5b9e\u73b0\u7c7b\u4e3a com.xugu.cloudjdbc.Driver\u3002\u52a0\u8f7d\u9a71\u52a8\u65b9\u5f0f\u4e3a DriverManager.registerDriver(new com.xugu.cloudjdbc.Driver()) \u6216Class.forName(\u201ccom.xugu.cloudjdbc.Driver\u201d)\u3002 6.3 \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5 \u5efa\u7acb\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u7684\u65b9\u5f0f\u6709\u591a\u79cd\uff0c\u53ef\u6839\u636e\u5e94\u7528\u7a0b\u5e8f\u5b9e\u9645\u4f7f\u7528\u573a\u666f\u9009\u62e9\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65b9\u5f0f\u3002\u5e38\u89c1\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65b9\u5f0f\u5982\u4e0b\uff1a - \u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u4f7f\u7528 DriverManager \u83b7\u5f97\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\uff1b - \u4f7f\u7528\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u6e90/\u8fde\u63a5\u6c60\u7684\u65b9\u5f0f\u83b7\u53d6\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\uff1b - \u4f7f\u7528\u7b2c\u4e09\u65b9\u901a\u7528\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u65b9\u5f0f\u83b7\u53d6\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u3002 \u5982\uff1adruid\u3001c3p0\u3001dbcp\u3001JNDI \u7b49\u3002 6.3.1 \u6253\u5f00\u6570\u636e\u5e93\u8fde\u63a5 \u6253\u5f00\u6570\u636e\u5e93\u8fde\u63a5\u5373\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u5bf9\u8c61 Connection \u7c7b\u3002 \u5982\uff1aDriverManager \u901a\u8fc7 getConnection() \u65b9\u6cd5\u83b7\u53d6 Connection \u7c7b\u5bf9\u8c61\u3002DriverManager \u7684 getConnection() \u65b9\u6cd5\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\u7684\u65b9\u5f0f\u4ea6\u6709\u591a\u79cd\u3002\u4ee5\u4e0b\u4e3a\u5e38\u89c1\u65b9\u5f0f\uff1a - getConnection(String url) \u53c2\u6570\u8bf4\u660e\uff1a - url\uff1a\u8bbf\u95ee\u6570\u636e\u5e93\u7684 URL \u8def\u5f84\u3002 \u793a\u4f8b\uff1a \u4e0b\u9762\u7684\u4ee3\u7801\u5229\u7528 getConnection \u65b9\u6cd5\u521b\u5efa\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u3002 ``` public Connection getConnection(){ Connection con=null\u037e try{ //\u6ce8\u518c\u6570\u636e\u5e93\u9a71\u52a8 Class.forName(\"com.xugu.cloudjdbc.Driver\")\u037e //\u5b9a\u4e49\u8fde\u63a5\u6570\u636e\u5e93\u7684url String url = \"jdbc:xugu://localhost:5138/db?user=user1\uff06password=pwd\"\u037e //\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5 con = DriverManager.getConnection(url)\u037e System.out.println(\"\u6570\u636e\u5e93\u8fde\u63a5\u6210\u529f\uff01\")\u037e }catch(Exception e){ e.printStackTrace()\u037e } //\u8fd4\u56de\u4e00\u4e2a\u8fde\u63a5 return con\u037e } ``` getConnection(String url,String user,String password) \u53c2\u6570\u8bf4\u660e\uff1a url\uff1a\u8bbf\u95ee\u6570\u636e\u5e93\u7684 URL \u8def\u5f84\u3002 user\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u7528\u6237\u540d\u3002 password\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u7528\u6237\u5bc6\u7801\u3002 \u793a\u4f8b\uff1a \u4e0b\u9762\u7684\u4ee3\u7801\u5229\u7528 getConnection \u65b9\u6cd5\u521b\u5efa\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u3002 private Connection con; private String user = \"user1\"; //\u5b9a\u4e49\u8fde\u63a5\u6570\u636e\u5e93\u7684\u7528\u6237\u540d private String password = \"pwd\"; //\u5b9a\u4e49\u8fde\u63a5\u6570\u636e\u5e93\u7684\u5bc6\u7801 private String className = \"com.xugu.cloudjdbc.Driver\";//\u5b9a\u4e49\u865a\u8c37JDBC\u9a71\u52a8 private String url = \"jdbc:xugu://localhost:5138/db\"; /\\*\\*\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\\*/ public Connection getConnection(){ try{ Class.forName(className);//\u52a0\u8f7d\u6570\u636e\u5e93\u9a71\u52a8 System.out.println(\"\u6570\u636e\u5e93\u9a71\u52a8\u52a0\u8f7d\u6210\u529f\uff01\"); con = DriverManager.getConnection(url,user,password); //\u8fde\u63a5\u6570\u636e\u5e93 System.out.println(\"\u6210\u529f\u5730\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\uff01\"); }catch(Exception e){ System.out.println(\"\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\u5931\u8d25\uff01\"); con = null; e.printStackTrace(); } finally { If(conn != null){ //\u91ca\u653e\u8fde\u63a5\u8d44\u6e90 conn.close(); } } return con; } getConnection(String url,Properties info) \u53c2\u6570\u8bf4\u660e\uff1a url\uff1a\u8bbf\u95ee\u6570\u636e\u5e93\u7684 URL \u8def\u5f84\u3002 info\uff1a\u4e00\u4e2a\u6301\u4e45\u7684\u5c5e\u6027\u96c6\u5bf9\u8c61\uff0c\u5305\u62ec user \u548c password \u7b49\u5c5e\u6027\u3002 \u793a\u4f8b\uff1a \u4e0b\u9762\u7684\u4ee3\u7801\u5229\u7528 getConnection \u65b9\u6cd5\u521b\u5efa\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u3002 public Connection getConnection(){ Connection con = null; //\u5b9a\u4e49\u6570\u636e\u5e93\u8fde\u63a5\u5bf9\u8c61 Properties info = new Properties(); //\u5b9a\u4e49Properties\u5bf9\u8c61 info.setProperty(\"user\",\"user1\"); //\u8bbe\u7f6eProperties\u5bf9\u8c61\u5c5e\u6027 info.setProperty(\"password\",\"pwd\"); try{ //\u6ce8\u518c\u6570\u636e\u5e93\u9a71\u52a8 Class.forName(\"com.xugu.cloudjdbc.Driver\"); //test\u4e3a\u6570\u636e\u5e93\u540d\u79f0 String url = \"jdbc:xugu://localhost:5138/db\"; //\u83b7\u53d6\u8fde\u63a5\u6570\u636e\u5e93\u7684Connection\u5bf9\u8c61 con = DriverManager.getConnection(url,info); System.out.println(\"\u6570\u636e\u5e93\u8fde\u63a5\u6210\u529f\uff01\"); }catch(Exception e){ e.printStackTrace(); } //\u8fd4\u56de\u4e00\u4e2a\u8fde\u63a5 return con; } 6.3.2 \u8fde\u63a5\u4e8b\u52a1\u7ba1\u7406 \u6570\u636e\u5e93\u4e8b\u52a1 (transaction) \u662f\u8bbf\u95ee\u5e76\u53ef\u80fd\u64cd\u4f5c\u5404\u79cd\u6570\u636e\u9879\u7684\u4e00\u4e2a\u6570\u636e\u5e93\u64cd\u4f5c\u5e8f\u5217\uff0c\u8fd9\u4e9b\u64cd\u4f5c\u8981\u4e48\u5168\u90e8\u6267\u884c, \u8981\u4e48\u5168\u90e8\u4e0d\u6267\u884c\uff0c\u662f\u4e00\u4e2a\u4e0d\u53ef\u5206\u5272\u7684\u5de5\u4f5c\u5355\u4f4d\u3002\u4e8b\u52a1\u7531\u4e8b\u52a1\u5f00\u59cb\u5230\u4e8b\u52a1\u7ed3\u675f\u4e4b\u95f4\u6267\u884c\u7684\u5168\u90e8\u6570\u636e\u5e93\u64cd\u4f5c\u7ec4\u6210\u3002 \u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\uff0c\u5373\u5f53\u4e00\u6761 SQL \u8bed\u53e5\u6267\u884c\u5b8c\u6210\u540e\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u5c06\u81ea\u52a8\u63d0\u4ea4\u8be5\u8bed\u53e5\u6240\u5728\u4e8b\u52a1\u3002\u5728\u865a\u8c37 JDBC \u9a71\u52a8\u4e2d\u63a7\u5236\u4e8b\u52a1\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a - \u901a\u8fc7\u6570\u636e\u5e93\u8fde\u63a5 URL \u4e32\u7684 auto_commit \u5c5e\u6027\uff0c\u63a7\u5236\u4e8b\u52a1\u7684\u5f00\u542f\u4e0e\u5173\u95ed\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b auto_commit \u5c5e\u6027\u4e3a on\uff0c\u5373\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u3002 - \u901a\u8fc7 Connection \u7c7b\u7684 setAutoCommit(boolean commit) \u65b9\u6cd5\u63a7\u5236\u4e8b\u52a1\u7684\u5f00\u542f\u4e0e\u5173\u95ed\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b commit \u5c5e\u6027\u4e3a TRUE\uff0c\u5373\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u3002 \u5728\u7981\u7528\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u4e0b\uff0c\u4f7f\u7528 Connection \u7c7b\u7684 commit() \u65b9\u6cd5\u63d0\u4ea4 SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u505a\u7684\u66f4\u6539\uff0c\u800c Connection \u7c7b\u7684 rollback() \u65b9\u6cd5\u5c06\u56de\u6eda SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u7684\u66f4\u6539\uff0c\u4e0a\u8ff0\u4e24\u79cd\u65b9\u6cd5\u6267\u884c\u5b8c\u6210\u540e\u5747\u5c06\u91ca\u653e\u4e8b\u52a1\u6301\u6709\u7684\u5168\u90e8\u9501\u8d44\u6e90\u3002 \u4e8b\u52a1\u4ec5\u5bf9\u6570\u636e\u5e93 DML \u64cd\u4f5c\u6709\u6548\u3002 {.is-info} \u4ee5\u4e0b\u4e3a\u4f7f\u7528 setAutoCommit() \u65b9\u6cd5\u63a7\u5236\u4e8b\u52a1\u63d0\u4ea4\u7684\u793a\u4f8b\u4ee3\u7801\uff1a //\u8bbe\u7f6e\u4e8b\u52a1\u4e3a\u975e\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f conn.setAutoCommit(false)\u037e //\u521b\u5efa\u6570\u636e\u5e93Statement\u5bf9\u8c61 Statement stm = conn.createStatement()\u037e //\u6570\u636e\u5e93\u4e8b\u52a1\u6267\u884cSQL\u8bed\u53e5 String sql = \"insert into test (comp_id,comp_name) values(1,'comp')\"\u037e //\u6267\u884c\u9759\u6001SQL\u8bed\u53e5 stm.execute(sql)\u037e //\u6570\u636e\u5e93\u9884\u5904\u7406SQL\u8bed\u53e5 PreparedStatement pstm = conn. prepareStatement(\u201cupdate test set id=? where comp_name=?\u201d) //\u9884\u5904\u7406SQL\u8bed\u53e5\u7b2c\u4e00\u4e2a\u53c2\u6570\u8d4b\u503c pstm.setInt(1,15)\u037e //\u9884\u5904\u7406SQL\u8bed\u53e5\u7b2c\u4e8c\u4e2a\u53c2\u6570\u8d4b\u503c pstm.setString(2,'DBMS')\u037e //\u6267\u884c\u9884\u5904\u7406SQL\u8bed\u53e5 pstm.execute()\u037e //\u63d0\u4ea4\u4e8b\u52a1 conn.commit()\u037e //\u5220\u9664\u8868\u4e2d\u6307\u5b9a\u884c\u6570\u636e stm.execute(\u201cdelete from test where id=15\u201d)\u037e //\u4e8b\u52a1\u56de\u6eda\u65b9\u6cd5 conn.rollback()\u037e \u4e0a\u9762\u4ee3\u7801\u4e2d\u6267\u884c\u63d0\u4ea4\u4e8b\u52a1\u64cd\u4f5c\uff0c\u6267\u884c\u9759\u6001 SQL \u8bed\u53e5\u4e0e\u6267\u884c\u9884\u5904\u7406 SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u7684\u66f4\u6539\u5c06\u6c38\u4e45\u751f\u6548\uff1b\u800c\u540e\u6267\u884c\u7684\u5220\u9664\u8868\u4e2d\u6307\u5b9a\u884c\u6570\u636e\u64cd\u4f5c\uff0c\u56e0\u5176\u540e\u8c03\u7528\u7684 rollback() \u65b9\u6cd5\uff0cdelete \u547d\u4ee4\u5bf9\u6570\u636e\u5e93\u7684\u6570\u636e\u66f4\u6539\u5c06\u88ab\u56de\u6eda\u6389\uff0c\u6545\u800c\u5bf9\u6570\u636e\u5e93\u7684\u5220\u9664\u64cd\u4f5c\u4e0d\u4f1a\u751f\u6548\u3002 6.3.3 \u8fde\u63a5\u4e8b\u52a1\u63a7\u5236\uff0cSavepoint\u63a5\u53e3 JDBC \u89c4\u8303 3.0 \u4e2d\u4e3a\u4e86\u589e\u52a0\u5bf9\u4e8b\u52a1\u7684\u63a7\u5236\uff0c\u65b0\u589e Savepoint \u63a5\u53e3\uff0c\u5176\u4ee3\u8868\u4e8b\u52a1\u4e2d\u7684\u4e00\u4e2a\u903b\u8f91\u4e8b\u52a1\u70b9\u3002\u5728\u975e\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u4e0b\uff0c\u4e00\u4e2a\u4e8b\u52a1\u4e2d\u53ef\u4ee5\u8bbe\u7f6e\u591a\u4e2a Savepoint\uff0c\u5728\u4ee3\u7801\u4e2d\u8fdb\u884c\u4e8b\u52a1\u56de\u6eda\u64cd\u4f5c\u65f6\uff0c\u53ef\u4ee5\u6307\u5b9a\u4e8b\u52a1\u56de\u6eda\u5230\u6307\u5b9a Savepoint \u4f4d\u7f6e\uff0c\u6307\u5b9a\u56de\u6eda\u4f4d\u7f6e\u524d\u7684\u4e8b\u52a1\u64cd\u4f5c\u4ecd\u7136\u4fdd\u7559\u3002\u6b64\u63a5\u53e3\u5927\u5927\u63d0\u9ad8\u4e86\u4e8b\u52a1\u5904\u7406\u7684\u7c92\u5ea6\uff0c\u65b9\u4fbf\u5e94\u7528\u7a0b\u5e8f\u63a7\u5236\u4e8b\u52a1\u5904\u7406\u903b\u8f91\u3002 \u793a\u4f8b\uff1a\u8fde\u63a5\u4e8b\u52a1\u63a7\u5236\u63a5\u53e3 Savepoint \u4f7f\u7528 //\u8bbe\u7f6e\u975e\u81ea\u52a8\u63d0\u4ea4 conn.setAutoCommit(false); //\u521b\u5efaStatement\u5bf9\u8c61 Statement stm = conn.createStatement(); //\u6267\u884cSQL\u547d\u4ee4 stm.execute(sql1); stm.execute(sql2); //\u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\u70b9save1 java.sql.Savepoint save1 =conn.setSavepoint(\"save_1\"); stm.execute(sql3); //\u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\u70b9save2 java.sql.Savepoint save2 =conn.setSavepoint(\"save_2\"); stm.execute(sql4); //\u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\u70b9save3 java.sql.Savepoint save3 =conn.setSavepoint(\"save_3\"); stm.execute(sql5); //\u56de\u6eda\u4e8b\u52a1\u5230\u56de\u6eda\u70b9save3 conn.rollback(save3); conn.commit(); \u4ee5\u4e0a\u4ee3\u7801\u6bb5\u4e2d\uff0c\u4e8b\u52a1\u6267\u884c\u8bed\u53e5 sql5 \u5c06\u88ab\u56de\u6eda\u6389\u3002 6.4 \u521b\u5efa\u6267\u884cSQL\u8bed\u53e5\u5bf9\u8c61 \u5728\u6570\u636e\u5e93\u6807\u51c6\u4e2d\uff0c\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61\u5206\u4e3a\u4e09\u7c7b\uff1a\u6267\u884c\u9759\u6001 SQL \u8bed\u53e5\u7684 Statement \u5bf9\u8c61\u3001\u6267\u884c\u9884\u7f16\u8bd1 SQL \u8bed\u53e5\u7684 PreparedStatement \u5bf9\u8c61\u4ee5\u53ca\u6267\u884c\u6570\u636e\u5e93\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\u7684 CallableStatement \u5bf9\u8c61\u3002 6.4.1 \u6267\u884cSQL\u5bf9\u8c61Statement Statement \u5bf9\u8c61\u7528\u4e8e\u6267\u884c\u9759\u6001 SQL \u8bed\u53e5\u548c\u83b7\u5f97 SQL \u4ea7\u751f\u7684\u7ed3\u679c\u3002\u5728\u865a\u8c37 JDBC \u9a71\u52a8\u4e2d\uff0c\u865a\u8c37\u6570\u636e\u5e93 DDL \u64cd\u4f5c\u5747\u901a\u8fc7 Statement \u5bf9\u8c61\u6765\u6267\u884c\u3002 Statement \u5bf9\u8c61\u901a\u8fc7 Connection \u7c7b\u7684 createStatement() \u65b9\u6cd5\u521b\u5efa\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a //\u521b\u5efa\u6267\u884cSQL\u8bed\u53e5\u5bf9\u8c61Statement Statement stm = conn.createStatement()\u037e 6.4.2 \u6267\u884cSQL\u5bf9\u8c61PreparedStatement PreparedStatement \u5bf9\u8c61\u4f7f\u7528\u65f6\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u5bf9\u6267\u884c SQL \u8bed\u53e5\u8fdb\u884c\u9884\u7f16\u8bd1\u5904\u7406\uff0c\u9884\u7f16\u8bd1 SQL \u8bed\u53e5\u5c06\u5728\u672a\u6765\u7684\u4f7f\u7528\u4e2d\u88ab\u91cd\u7528\u3002\u4e0e Statement \u5bf9\u8c61\u76f8\u6bd4\uff0cPreparedStatement \u5bf9\u8c61\u64cd\u4f5c\u591a\u6761 SQL \u8bed\u53e5\u7684\u6548\u7387\u66f4\u9ad8\u3002 \u7ecf\u8fc7\u9884\u7f16\u8bd1\u5e76\u5b58\u50a8\u5728 PreparedStatement \u5bf9\u8c61\u4e2d\u7684 SQL \u8bed\u53e5\uff0c\u901a\u8fc7 Connection \u7c7b\u7684 prepareStatement() \u65b9\u6cd5\u521b\u5efa\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a //\u521b\u5efa\u6267\u884c\u9884\u7f16\u8bd1SQL\u8bed\u53e5\u5bf9\u8c61PreparedStatement PreparedStatement preStatement = conn.prepareStatement(\u201c\u9884\u7f16\u8bd1SQL\u8bed\u53e5\u201d); \u9884\u5904\u7406 PreparedStatement \u5bf9\u8c61\u76f8\u5bf9\u4e8e\u9759\u6001 Statement \u5bf9\u8c61\u7684\u4f18\u52bf\uff1a - PreparedStatement \u53ef\u4ee5\u52a8\u6001\u4f20\u5165\u53c2\u6570\u503c\uff1b - PreparedStatement \u6bd4 Statement \u66f4\u5feb\uff1b PreparedStatement \u4f1a\u5c06 SQL \u8bed\u53e5\u9884\u7f16\u8bd1\u5728\u6570\u636e\u5e93\u7cfb\u7edf\u4e2d\uff0c\u6267\u884c\u8ba1\u5212\u540c\u6837\u4f1a\u88ab\u7f13\u5b58\u8d77\u6765\uff0c\u5b83\u5141\u8bb8\u6570\u636e\u5e93\u505a\u53c2\u6570\u5316\u67e5\u8be2\u3002\u4f7f\u7528\u9884\u5904\u7406\u8bed\u53e5\u6bd4\u666e\u901a\u7684 Statement \u67e5\u8be2\u66f4\u5feb\uff0c\u56e0\u505a\u7684\u5de5\u4f5c\u66f4\u5c11 (\u6570\u636e\u5e93\u5bf9 SQL \u8bed\u53e5\u7684\u5206\u6790\u3001\u7f16\u8bd1\u3001\u4f18\u5316\u5df2\u7ecf\u5728\u7b2c\u4e00\u6b21\u67e5\u8be2\u524d\u5b8c\u6210\u4e86)\u037e - PreparedStatement \u53ef\u4ee5\u9632\u6b62 SQL \u6ce8\u5165\u5f0f\u653b\u51fb\u3002 PreparedStatement \u5728\u4f7f\u7528\u53c2\u6570\u5316\u67e5\u8be2\u7684\u60c5\u51b5\u4e0b\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u4e0d\u4f1a\u5c06\u53c2\u6570\u7684\u5185\u5bb9\u89c6\u4e3a SQL \u6307\u4ee4\u7684\u4e00\u90e8\u5206\u6765\u5904\u7406\uff0c\u800c\u662f\u5728\u6570\u636e\u5e93\u5b8c\u6210 SQL \u6307\u4ee4\u7684\u7f16\u8bd1\u540e\uff0c\u624d\u5957\u7528\u53c2\u6570\u8fd0\u884c\uff0c\u56e0\u6b64\u5c31\u7b97\u53c2\u6570\u4e2d\u542b\u6709\u7834\u574f\u6027\u7684\u6307\u4ee4\uff0c\u4e5f\u4e0d\u4f1a\u88ab\u6570\u636e\u5e93\u6240\u8fd0\u884c\u3002 6.4.3 \u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u5bf9\u8c61CallableStatement CallableStatement \u5bf9\u8c61\u5b9e\u73b0\u4e86\u4ece Java \u5e94\u7528\u7a0b\u5e8f\u4e2d\u8c03\u7528\u6570\u636e\u5e93\u5b58\u50a8\u8fc7\u7a0b\u3002\u4f46\u6b64\u8c03\u7528\u8fc7\u7a0b\u5e76\u4e0d\u5305\u542b\u5b58\u50a8\u8fc7\u7a0b\u672c\u8eab\uff0c\u56e0\u5b58\u50a8\u8fc7\u7a0b\u5b58\u50a8\u5728\u6570\u636e\u5e93\u4e2d\u3002 CallableStatement \u5bf9\u8c61\u4e3a\u6240\u6709\u7684\u6570\u636e\u5e93\u63d0\u4f9b\u4e86\u4e00\u79cd\u4ee5\u6807\u51c6\u5f62\u5f0f\u8c03\u7528\u5b58\u50a8\u8fc7\u7a0b\u7684\u65b9\u6cd5\uff0c\u901a\u8fc7 Connection \u7c7b\u7684 prepareCall() \u65b9\u6cd5\u521b\u5efa\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a //\u521b\u5efa\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u5bf9\u8c61CallableStatement CallableStatement cstmt= conn.prepareCall(\u201c{call \u5b58\u50a8\u8fc7\u7a0b\u540d(\u53c2\u6570\u8868\u5217)}\u201d); 6.4.4 \u6267\u884cSQL\u8bed\u53e5\u5bf9\u8c61\u5c5e\u6027\u6269\u5145 \u5728\u521b\u5efa\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61\u65f6\uff0c\u53ef\u901a\u8fc7\u6784\u9020\u65b9\u6cd5\u7684\u4e0d\u540c\u53c2\u6570\u8bbe\u7f6e ResultSet \u5bf9\u8c61\u5c5e\u6027\uff0c\u5c5e\u6027\u5305\u62ec\u7ed3\u679c\u7c7b\u578b ResultSetType\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b ResultSetConcurrency\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b ResultSetHoldability\u3002 ResultSetType \u9ed8\u8ba4\u4e3a ResultSet.TYPE_SCROLL_INSENSITIVE\uff1a\u652f\u6301\u7ed3\u679c\u96c6 backforward\u3001last\u3001first \u7b49\u64cd\u4f5c\uff0c\u5bf9\u6570\u636e\u5e93\u4e2d\u5176\u5b83 session \u8fdb\u884c\u7684\u6570\u636e\u66f4\u6539\u4e0d\u654f\u611f\uff1b ResultSetConcurrency \u9ed8\u8ba4\u4e3a ResultSet.CONCUR_READ_ONLY: \u4e0d\u53ef\u66f4\u65b0\u7ed3\u679c\u96c6\uff1b\u8be5\u5c5e\u6027\u4ea6\u53ef\u66f4\u6539\u4e3a ResultSet.CONCUR_UPDATABLE\uff0c\u652f\u6301\u5728 ResultSet \u4e2d\u5bf9\u8bb0\u5f55\u8fdb\u884c\u4fee\u6539\uff0c\u4fee\u6539\u540e\u8bb0\u5f55\u66f4\u65b0\u5230\u6570\u636e\u5e93\uff0c\u4fee\u6539\u64cd\u4f5c\u53ef\u5305\u542b\u63d2\u5165\u3001\u5220\u9664\u6216\u66f4\u65b0\uff1b ResultSetHoldability \u9ed8\u8ba4\u4e3a ResultSet.HOLD_CURSORS_OVER_COMMIT: \u5728\u4e8b\u52a1 commit \u6216 rollback \u540e\uff0cResultSet \u4ecd\u7136\u53ef\u7528\u3002 Connection \u7c7b\u521b\u5efa Statement \u5bf9\u8c61\u6784\u9020\u65b9\u6cd5\uff1a //Statement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 createStatement(int resultSetType,int resultSetConcurrency)\uff1b //Statement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 createStatement(int resultSetType,int resultSetConcurrency, int resultSetHoldability)\uff1b Connection \u7c7b\u521b\u5efa PreparedStatement \u5bf9\u8c61\u6784\u9020\u65b9\u6cd5\uff1a //PreparedStatement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareStatement(String sql, int resultSetType,int resultSetConcurrency) //PrepareStatment\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareStatement(String sql, int resultSetType,int resultSetConcurrency, int resultSetHoldability) Connection \u7c7b\u521b\u5efa CallableStatement \u5bf9\u8c61\u6784\u9020\u65b9\u6cd5\uff1a //CallableStatement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareCall(String sql, int resultSetType,int resultSetConcurrency) //CallableStatement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareCall(String sql, int resultSetType,int resultSetConcurrency, int resultSetHoldability) 6.5 \u6267\u884cSQL\u8bed\u53e5 Statement \u5bf9\u8c61\u5b9a\u4e49\u4e86\u591a\u79cd\u6267\u884c SQL \u8bed\u53e5\u7684\u65b9\u6cd5\uff0c\u7528\u6765\u5904\u7406\u8fd4\u56de\u4e0d\u540c\u7ed3\u679c\u7684 SQL \u547d\u4ee4\uff1a - execute(String sql)\uff1a\u6267\u884c\u53ef\u4ee5\u8fd4\u56de\u591a\u4e2a\u7ed3\u679c\u96c6\u7684 SQL \u8bed\u53e5\u8fd4\u56de\u7c7b\u578b\u4e3a boolean\uff0c\u5982\u679c\u8fd4\u56de\u7684\u662f\u66f4\u65b0\u7684\u6570\u76ee\uff0c\u5219\u8fd4\u56de false\uff1b\u5982\u679c\u8fd4\u56de\u7684\u662f ResultSet \u5bf9\u8c61\uff0c\u5219\u8fd4\u56detrue\u3002 - executeQuery(String sql)\uff1a\u6267\u884c\u8fd4\u56de\u5355\u4e2a ResultSet \u7684 SQL \u8bed\u53e5\u8fd4\u56de\u7c7b\u578b\u4e3a ResultSet \u5bf9\u8c61\u3002 - executeUpdate()\uff1a\u6267\u884c SQL INSERT\u3001UPDATE \u6216 DELETE \u8bed\u53e5\u8fd4\u56de\u503c\u4e3a int \u578b\uff0c\u6570\u636e\u5e93\u53d7\u5f71\u54cd\u7684\u884c\u8ba1\u6570\u3002 - \u6279\u5904\u7406\u65b9\u6cd5\uff1a\u6279\u91cf\u6267\u884c SQL \u8bed\u53e5 clearBatch()\uff1a\u6e05\u7a7a\u5386\u53f2 batch \u547d\u4ee4\uff1b addBatch(String sql)\uff1a\u6dfb\u52a0\u8981\u6267\u884c\u7684 sql\uff1b executeBatch()\uff1a\u6279\u91cf\u6267\u884c sql\u3002 PreparedStatement \u7ee7\u627f\u81ea Statement\uff0c\u5b9a\u4e49\u4e86\u5927\u91cf\u7684 setter \u65b9\u6cd5\u7528\u4e8e\u8bbe\u7f6e\u52a8\u6001 sql\u7684\u53c2\u6570\uff0c\u56e0\u6b64 PreparedStatement \u652f\u6301\u52a8\u6001\u4f20\u53c2\uff1b\u53e6\u5916 PreparedStatement \u5185\u90e8\u5b58\u50a8\u4e86\u89e3\u6790\u7684 sql\uff0c\u53ef\u4ee5\u591a\u6b21\u6267\u884c\u800c\u65e0\u9700\u91cd\u590d\u89e3\u6790\u3002PreparedStatement \u7ee7\u627f\u81ea Statement\uff0cCallableStatement \u7ee7\u627f\u81ea PreparedStatement\uff0c\u6545\u800c\u4e09\u8005\u6267\u884c SQL \u8bed\u53e5\u7684\u65b9\u5f0f\u53ef\u901a\u7528\u3002 6.5.1 \u901a\u8fc7Statement\u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c \u901a\u8fc7 Statement \u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c\u9700\u8981\u6ce8\u610f\u7684\u4e8b\u9879\uff1a - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u524d\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u8bbe\u7f6e\u4e3a FALSE\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\uff0c\u5e76\u8fdb\u884c\u624b\u52a8\u63d0\u4ea4\uff08commit\uff09\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u540e\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u6062\u590d\u4e3a TRUE\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u5f02\u5e38\u53d1\u751f\u65f6\uff0c\u8fdb\u884c rollback(\u56de\u6eda)\u3002 \u793a\u4f8b\uff1a\u901a\u8fc7 Statement \u6279\u91cf\u64cd\u4f5c\u6570\u636e try { //\u521b\u5efaStatement\u5bf9\u8c61 stm = con.createStatement(); //\u8bbe\u7f6e\u4e8b\u52a1\u975e\u81ea\u52a8\u63d0\u4ea4 con.setAutoCommit(false); // \u6dfb\u52a0\u591a\u6761SQL\u8bed\u53e5\u5230\u6279\u5904\u7406\u4e2d stm.addBatch(\"insert into student values(23,'tangbao','\u9ad8\u6570',100)\"); stm.addBatch(\"insert into student values(24,'\u738b\u5b9a','c#',98)\"); stm.addBatch(\"insert into student values(25,'\u738b\u56fd\u4e91','java',90)\"); //\u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c stm.executeBatch(); System.out.println(\"\u63d2\u5165\u6210\u529f!\"); //\u6267\u884c\u6210\u529f\u540e\u8fdb\u884c\u6570\u636e\u63d0\u4ea4 con.commit(); System.out.println(\"\u63d0\u4ea4\u6210\u529f!\"); //\u5173\u95ed\u975e\u81ea\u52a8\u63d0\u4ea4 con.setAutoCommit(true); } catch (SQLException e) { if (!con.isClosed()) { con.rollback(); //\u51fa\u73b0\u5f02\u5e38\uff0c\u56de\u6eda\u4e8b\u52a1 System.out.println(\"\u63d0\u4ea4\u5931\u8d25\uff0c\u56de\u6eda\uff01\"); con.setAutoCommit(true); //\u5173\u95ed\u975e\u81ea\u52a8\u63d0\u4ea4 } } finally { if (stmt != null) { //\u5173\u95ed\u64cd\u4f5c\u5bf9\u8c61 stmt.close(); } } 6.5.2 \u901a\u8fc7PreparedStatement\u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c \u901a\u8fc7 PreparedStatement \u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c\u9700\u8981\u6ce8\u610f\u7684\u4e8b\u9879\uff1a - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u524d\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u8bbe\u7f6e\u4e3a FALSE\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\uff0c\u5e76\u8fdb\u884c\u624b\u52a8\u63d0\u4ea4\uff08commit\uff09\uff0c\u6570\u636e\u91cf\u5927\u65f6\uff0c\u8bbe\u7f6e\u624b\u52a8\u63d0\u4ea4\u95f4\u9694\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u540e\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u6062\u590d\u4e3a TRUE\uff1b \u2022 \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u5f02\u5e38\u53d1\u751f\u65f6\uff0c\u8fdb\u884c rollback(\u56de\u6eda)\uff1b - PreparedStatement \u6267\u884c\u8bed\u53e5\u4e0d\u80fd\u4e3a DDL \u8bed\u53e5\u3002 \u793a\u4f8b\uff1a\u5c06 10000 \u6761\u8bb0\u5f55\u63d2\u5165\u6570\u636e\u5e93\u4e2d\uff0c\u6bcf 100 \u6761\u6267\u884c\u4e00\u6b21\u63d0\u4ea4\u64cd\u4f5c try{ conn.setAutoCommit(false); //\u8bbe\u7f6e\u975e\u81ea\u52a8\u63d0\u4ea4 //\u521b\u5efaPreparedStatement\u5bf9\u8c61 ps = conn.prepareStatement(\"insert into testtab values (?, ?, ?)\"); //\u5faa\u73af\u6dfb\u52a0\u6279\u5904\u7406\u6570\u636e for(int i = 0;i<list.size();i++){ HashMap map = list.get(i);//list\u4e3a\u6570\u636e\u5c01\u88c5\uff0c\u6b64\u5904\u7565 ps.setString(1, map.get(\"id\").toString()); ps.setString(2, map.get(\"name\").toString()); ps.setString(3, map.get(\"age\").toString()); ps.addBatch(); if(mod(i,100)==0){//\u6bcf100\u6761\u6267\u884c\u4e00\u6b21\u6267\u884c\u64cd\u4f5c ps.executeBatch();//\u6267\u884c\u6279\u91cf\u63d2\u5165 conn.commit();//\u6267\u884c\u4e8b\u52a1\u63d0\u4ea4 } } ps.executeBatch();//\u6267\u884c\u6279\u91cf\u63d2\u5165 conn.commit(); //\u63d0\u4ea4\u4e8b\u52a1 }catch(Exception e){ if (!conn.isClosed()) { conn.rollback(); //\u51fa\u73b0\u5f02\u5e38\uff0c\u56de\u6eda\u4e8b\u52a1 System.out.println(\"\u63d0\u4ea4\u5931\u8d25\uff0c\u56de\u6eda\uff01\"); conn.setAutoCommit(true); //\u5173\u95ed\u975e\u81ea\u52a8\u63d0\u4ea4 } } finally { if (ps!= null) { ps.close();//\u5173\u95ed\u64cd\u4f5c\u5bf9\u8c61 } } 6.5.3 CallableStatement\u7ed1\u5b9a\u53c2\u6570 CallableStatement \u5b58\u5728\u4e09\u79cd\u7c7b\u578b\u7684\u53c2\u6570 IN\u3001OUT \u548c INOUT\u3002 - IN\uff1a\u521b\u5efa SQL \u8bed\u53e5\u65f6\u5176\u53c2\u6570\u503c\u672a\u77e5\u3002\u4f7f\u7528 setXXX() \u65b9\u6cd5\u5c06\u503c\u7ed1\u5b9a\u5230 IN \u53c2\u6570\u3002 - OUT\uff1a\u7531 SQL \u8bed\u53e5\u8fd4\u56de\u7684\u53c2\u6570\u503c\u3002\u53ef\u4ee5\u4f7f\u7528 getXXX() \u65b9\u6cd5\u4ece OUT \u53c2\u6570\u4e2d\u68c0\u7d22\u503c\u3002 - INOUT\uff1a\u63d0\u4f9b\u8f93\u5165\u548c\u8f93\u51fa\u503c\u7684\u53c2\u6570\u3002\u4f7f\u7528 setXXX() \u65b9\u6cd5\u7ed1\u5b9a\u53d8\u91cf\u5e76\u4f7f\u7528getXXX() \u65b9\u6cd5\u68c0\u7d22\u503c\u3002 \u793a\u4f8b 1\uff1a\u901a\u8fc7\u53c2\u6570\u4e0b\u6807\u7ed1\u5b9a\u53c2\u6570 //\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\u8bed\u53e5 String sql =\"{call pro_2(?,?,?)}\"; //\u521b\u5efaCallableStatement\u5bf9\u8c61 CallableStatement cstm = conn.prepareCall(sql); //\u901a\u8fc7\u53c2\u6570\u4e0b\u6807\u8bbe\u7f6e\u53c2\u6570(IN\u53c2\u6570) cstm.setInt(1, 20490); //\u6ce8\u518cOUT\u53c2\u6570\u6570\u636e\u7c7b\u578b cstm.registerOutParameter(2, com.xugu.cloudjdbc.Types.VARCHAR); cstm.registerOutParameter(3, com.xugu.cloudjdbc.Types.VARCHAR); //\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528 cstm.execute(); //\u83b7\u53d6\u5b58\u50a8\u8fc7\u7a0b\u8f93\u51fa\u53c2\u6570 String name = (String)cstm.getObject(2); String address = (String)cstm.getObject(3); \u793a\u4f8b 2\uff1a\u901a\u8fc7\u53c2\u6570\u540d\u7ed1\u5b9a\u53c2\u6570 //\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\u8bed\u53e5 CallableStatement pstm = conn.prepareCall(\"insert into tt1 values(:id,:name)\"); //\u901a\u8fc7\u53c2\u6570\u540d\u8bbe\u7f6e\u53c2\u6570(IN\u53c2\u6570) pstm.setInt(\"id\", 1); pstm.setString(\"name\", \"cloud\"); //\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528 pstm.execute(); 6.6 \u5904\u7406\u6267\u884c\u7ed3\u679c ResultSet \u7c7b\u662f\u901a\u8fc7 Statement \u53ca\u5176\u5b50\u7c7b\u6267\u884c SQL \u67e5\u8be2\u8bed\u53e5\u5f97\u5230\u7684\u7ed3\u679c\u96c6\u3002ResultSet \u7c7b\u5305\u542b\u4e09\u4e2a\u91cd\u8981\u5c5e\u6027\uff1aResultSet \u5bf9\u8c61\u5e76\u53d1\u6a21\u5f0f\u3001ResultSet \u5bf9\u8c61\u5149\u6807\u5904\u7406\u65b9\u5411\u3001ResultSet \u5bf9\u8c61\u5149\u6807\u7c7b\u578b\u3002ResultSet \u7c7b\u5177\u6709\u6307\u5411\u5f53\u524d\u7ed3\u679c\u96c6\u6570\u636e\u884c\u4f4d\u7f6e\u5149\u6807\uff0c\u5149\u6807\u4f4d\u7f6e\u521d\u59cb\u88ab\u7f6e\u4e8e\u7b2c\u4e00\u884c\u4e4b\u524d\uff0c\u901a\u8fc7 ResultSet \u7c7b\u5c01\u88c5\u7684\u5149\u6807\u79fb\u52a8\u65b9\u6cd5\u5b9e\u73b0\u5bf9\u5149\u6807\u4f4d\u7f6e\u7684\u63a7\u5236\uff0c\u5f53 ResultSet \u5bf9\u8c61\u7684\u5149\u6807\u79fb\u81f3\u6570\u636e\u7ed3\u679c\u96c6\u672b\u5c3e\u65f6 (\u4e0b\u4e00\u884c\u65e0\u6570\u636e)\uff0c\u8fd4\u56de FALSE\u3002 \u5728\u865a\u8c37 JDBC \u4e2d\uff0cResultSet \u7c7b\u5206\u4e3a\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u548c\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\uff08\u901a\u8fc7 URL \u8fde\u63a5\u4e32\u53c2\u6570 recv_mode \u914d\u7f6e\uff09\u3002\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u9ed8\u8ba4\u5c5e\u6027\u4e3a\u4e0d\u53ef\u66f4\u65b0\u3001\u5411\u524d\u79fb\u52a8\u3001\u53ef\u4ee5\u6eda\u52a8\uff1b\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u9ed8\u8ba4\u5c5e\u6027\u4e3a\u4e0d\u53ef\u66f4\u65b0\u3001\u53ea\u5411\u524d\u79fb\u52a8\u3001\u4e0d\u53ef\u6eda\u52a8\u3002 Statement \u5bf9\u8c61\u6267\u884c SQL \u8bed\u53e5\u8fd4\u56de\u7ed3\u679c\u96c6\u4ec5\u80fd\u662f\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\uff0c\u800c PreparedStatement \u5bf9\u8c61\u6267\u884c SQL \u8bed\u53e5\u8fd4\u56de\u7ed3\u679c\u96c6\u53ef\u4e3a\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u6216\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u3002 \u5f53\u6267\u884c SQL \u8fd4\u56de\u6570\u636e\u7ed3\u679c\u96c6\u8f83\u5927\u65f6\uff0c\u5efa\u8bae\u4f7f\u7528\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\uff0c\u907f\u514d JVM \u7684\u6ea2\u51fa\u3002 {.is-info} 6.6.1 \u66f4\u65b0ResultSet\u7ed3\u679c\u96c6 \u521b\u5efa Statement \u5bf9\u8c61\u65f6\uff0c\u8bbe\u7f6e Statement \u5c5e\u6027 RresultSetConcurrency \u4e3a ResultSet.CONCUR_UPDATABLE\uff0c\u5e76\u4e14\u6570\u636e\u5e93 URL \u8fde\u63a5\u4e32\u5c5e\u6027 return_rowid \u8bbe\u7f6e\u4e3a TRUE\u65f6\uff0cStatement \u5bf9\u8c61\u6267\u884c SQL \u8bed\u53e5\u8fd4\u56de\u7684 ResultSet \u7ed3\u679c\u96c6\u624d\u80fd\u88ab\u66f4\u65b0\u3002\u5f53 ResultSet \u5bf9\u8c61\u4e3a\u53ef\u66f4\u65b0\u7ed3\u679c\u96c6\u65f6\uff0c\u5c06\u5149\u6807\u79fb\u81f3\u63d2\u5165\u4f4d\u7f6e\uff0c\u53ef\u8c03\u7528 ResultSet \u7c7b\u5bf9\u5e94\u7684 update \u65b9\u6cd5\u4fee\u6539\u7ed3\u679c\u96c6\u4e2d\u884c\u6570\u636e\uff0c\u5e76\u901a\u8fc7 updateRow \u65b9\u6cd5\u5c06\u66f4\u6539\u6570\u636e\u66f4\u65b0\u5230\u6570\u636e\u5e93\u4e2d\u3002 \u793a\u4f8b\uff1a\u901a\u8fc7\u4fee\u6539\u7ed3\u679c\u96c6\u4e2d\u6570\u636e\u503c\u66f4\u6539\u6570\u636e\u5e93\u4e2d\u5bf9\u5e94\u8bb0\u5f55 //\u521b\u5efaStatement\u5bf9\u8c61\u5e76\u8bbe\u7f6e\u7ed3\u679c\u96c6\u5c5e\u6027\u4e3a\u53ef\u66f4\u65b0 Statement stm = conn.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_UPDATABLE); //\u6267\u884cSQL\u8bed\u53e5 ResultSet rs = stm.executeQuery(sql); //\u7ed3\u679c\u96c6\u904d\u5386 while(rs.next()) { //\u66f4\u65b0\u7ed3\u679c\u96c6\u4e2d\u6307\u5b9a\u5217\u6570\u636e rs.updateLong(1, 5); //\u66f4\u65b0\u7ed3\u679c\u96c6\u4e2d\u6307\u5b9a\u5217\u6570\u636e rs.updateFloat(3, 12.3f); //\u7ed3\u679c\u96c6\u53d8\u66f4\u56de\u5199\u5165\u6570\u636e\u5e93 rs.updateRow(); } \u901a\u8fc7\u8c03\u7528 ResultSet \u7c7b\u7684 next()\u3001previous()\u3001absolute(int) \u65b9\u6cd5\u79fb\u52a8\u5149\u6807\u4f4d\u7f6e\uff0c\u5c06\u5149\u6807\u4f4d\u7f6e\u79fb\u52a8\u5230\u6307\u5b9a\u6570\u636e\u884c\uff0c\u901a\u8fc7 ResultSet \u7c7b\u5bf9\u5e94\u7684 get \u65b9\u6cd5\u83b7\u53d6\u884c\u6570\u636e\u3002 \u5982\u4f7f\u7528\u7ed3\u679c\u96c6\u66f4\u65b0\u6570\u636e\u5e93\u6570\u636e\uff0c\u9700\u5728\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65f6\uff0c\u8bbe\u7f6e\u8fde\u63a5\u5c5e\u6027 return_rowid \u4e3aTRUE\uff0c\u4e14\u5728\u751f\u6210\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61\u65f6\uff0c\u5e76\u53d1\u5c5e\u6027\u6307\u5b9a\u4e3a ResultSet.CONCUR_UPDATABLE\u3002 {.is-info} 6.6.2 \u901a\u8fc7\u79fb\u52a8\u5149\u6807\u83b7\u53d6\u7ed3\u679c\u96c6\u6761\u6570 \u793a\u4f8b 1\uff1a \u7edf\u8ba1\u7ed3\u679c\u96c6\u603b\u6761\u6570 //\u521b\u5efaStatement\u5bf9\u8c61 Statement stm= conn.createStatement(); stm.execute(\"create table test(id int identity(1,1));insert into test values(default)\"); //\u6267\u884c\u7ed3\u679c\u96c6\u67e5\u8be2 ResultSet rs = stm.executeQuery(\"select * from test\") //\u79fb\u52a8\u5149\u6807\u81f3\u7ed3\u679c\u96c6\u672b\u5c3e rs.last(); //\u83b7\u53d6\u7ed3\u679c\u96c6\u884c\u6570 int rsCounts = rs.getRow(); 6.6.3 \u591a\u7ed3\u679c\u96c6\u5904\u7406 \u865a\u8c37 JDBC \u652f\u6301\u591a\u7ed3\u679c\u96c6\u5904\u7406\uff0c\u5141\u8bb8 Statement \u63a5\u53e3\u652f\u6301\u591a\u91cd\u6253\u5f00\u7684 ResultSet \u5bf9\u8c61\u3002\u6267\u884c\u8bed\u53e5\u53ef\u4ee5\u662f\u591a\u6761 SQL \u8bed\u53e5\u7684\u96c6\u5408\uff0c\u5373\u4e00\u6b21\u6027\u5411\u865a\u8c37\u670d\u52a1\u5668\u53d1\u9001\u591a\u6761 SQL \u8bed\u53e5\uff0c\u865a\u8c37\u670d\u52a1\u5668\u6267\u884c\u5b8c SQL \u8bed\u53e5\u540e\u8fd4\u56de\u591a\u4e2a\u6267\u884c\u7ed3\u679c\uff1b\u4ea6\u6216\u5b58\u50a8\u8fc7\u7a0b\u5b9a\u4e49\u6709\u591a\u4e2a\u8fd4\u56de\u7ed3\u679c\u96c6\u3002\u865a\u8c37 JDBC \u7684 Statement \u91cd\u8f7d\u4e86 Statement \u63a5\u53e3\u4e2d\u7684 getMoreResults() \u65b9\u6cd5\u3002 \u793a\u4f8b\uff1a\u591a\u7ed3\u679c\u96c6\u5904\u7406 //SQL\u8bed\u53e5\u5305\u542b\u591a\u6761\u67e5\u8be2\u547d\u4ee4 String sql=\" SELECT * FROM A1 WHERE D2=(SELECT AVG(D2) FROM A1 GROUP BY D1);SELECT * FROM A1 WHERE D2>(SELECT MIN(D2) FROM A1 GROUP BY D1)\"; //\u521b\u5efaStatement\u5bf9\u8c61 Statement stm = conn.createStatement(); //\u6267\u884cSQL\u8bed\u53e5 boolean f = stm.execute(sql); //\u5224\u65ad\u662f\u5426\u6709ResultSet\u5bf9\u8c61\u4ea7\u751f if(f == true){ //\u83b7\u53d6\u7ed3\u679c\u96c6\u5bf9\u8c61 ResultSet rs1 = stm.getResultSet(); ... ... ... ... } while(true) { //\u5224\u65adStatement\u662f\u5426\u8fd4\u56de\u4e86\u591a\u4e2aResultSet\u5bf9\u8c61 if(!stm.getMoreResults(Statement.CLOSE_CURRENT_RESULT)){ break; } else if((rs2 = cstm.getResultSet())!=null) { ... ... ... ...//\u6570\u636e\u5904\u7406\u90e8\u5206\u7701\u7565 } } 6.6.4 \u670d\u52a1\u5668\u7aef\u6e38\u6807\u4f7f\u7528 \u865a\u8c37JDBC\u4e2d\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u751f\u6210\u9700\u6ee1\u8db3\u4e24\u4e2a\u6761\u4ef6\uff1aURL\u8fde\u63a5\u4e32\u5c5e\u6027recv_mode\u503c\u4e3a2\uff0cStatement\u5bf9\u8c61\u6267\u884cSQL\u8bed\u53e5\u4e3a\u5355\u6761SELECT\u8bed\u53e5\u3002 \u5e94\u7528\u7a0b\u5e8f\u7aef\u901a\u8fc7Statement\u7c7b\u7684setFetchSize(int)\u65b9\u6cd5\u6216ResultSet\u7c7b\u7684setFetchSize(int)\u65b9\u6cd5\u8bbe\u7f6e\u6bcf\u6b21\u4ece\u670d\u52a1\u5668\u7aef\u83b7\u53d6\u591a\u5c11\u6761\u6570\u636e\u3002 \u4f7f\u7528\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7684 ResultSet \u5bf9\u8c61\uff0c\u5149\u6807\u53ea\u80fd\u5355\u5411\u5411\u524d\u6b63\u5411\u79fb\u52a8\uff0c\u4e0d\u80fd\u5411\u540e\u79fb\u52a8\u6216\u6765\u56de\u6eda\u52a8\u3002 {.is-info} \u793a\u4f8b\uff1a\u865a\u8c37\u6570\u636e\u5e93\u670d\u52a1\u5668\u7aef\u6e38\u6807\u4f7f\u7528 //\u521b\u5efa\u865a\u8c37JDBC\u7279\u6709Statement\u5bf9\u8c61 Statement stm = (com.xugu.cloudjdbc.Statement)conn.createStatement(); //\u5f00\u542f\u670d\u52a1\u5668\u7aef\u6e38\u6807 stm.setServerCursor(true); //\u8bbe\u7f6e\u670d\u52a1\u5668\u7aef\u6e38\u6807\u5355\u6b21\u8fd4\u56de\u6570\u636e\u6761\u6570 stm.setFetchSize(1000); //\u6267\u884cSQL\u8bed\u53e5 ResultSet rs = stm.executeQuery(\"select * from t1\"); //\u904d\u5386\u6570\u636e while\uff08rs.next()\uff09 { ... ... ... ... } //\u5173\u95ed\u670d\u52a1\u5668\u7aef\u6e38\u6807 stm.setServerCursor(false); 6.6.5 \u68c0\u7d22\u81ea\u52a8\u4ea7\u751f\u7684\u5173\u952e\u5b57GeneratedKeys JDBC 3.0 \u89c4\u8303\u4e2d\u5bf9\u4e8e\u81ea\u52a8\u4ea7\u751f\u7684\u5173\u952e\u5b57\u6570\u503c\uff0c\u5b9a\u4e49\u4e86\u63a5\u53e3\u89c4\u8303\uff0c\u5373\uff1agetGeneratedKeys() \u65b9\u6cd5\u3002 \u4e3a\u4e86\u89e3\u51b3\u5bf9\u83b7\u53d6\u81ea\u52a8\u4ea7\u751f\u7684\u6216\u81ea\u52a8\u589e\u52a0\u7684\u5173\u952e\u5b57\u7684\u503c\u7684\u9700\u6c42\uff0c\u865a\u8c37 JDBC \u6839\u636e JDBC3.0 \u89c4\u8303\u63d0\u4f9b\u4e86\u83b7\u5f97\u5173\u952e\u5b57\u503c\u7684\u65b9\u6cd5\u3002\u83b7\u53d6\u5173\u952e\u5b57\u7684\u503c\uff0c\u9700\u8981\u5728\u6267\u884c\u65b9\u6cd5\u4e2d\u6307\u5b9a\u81ea\u589e\u5173\u952e\u5b57\u6807\u8bb0\u3002SQL \u8bed\u53e5\u6267\u884c\u5b8c\u540e\uff0c\u8c03\u7528 Statement \u5bf9\u8c61\u7684 getGeneratedKeys() \u65b9\u6cd5\uff0c\u83b7\u5f97\u5305\u542b\u81ea\u589e\u957f\u503c\u7684 ResultSet \u5bf9\u8c61\u3002 \u793a\u4f8b\uff1a\u83b7\u53d6\u6570\u636e\u5e93\u81ea\u589e\u957f\u5173\u952e\u5b57\u7684\u503c //\u521b\u5efaStatement\u5bf9\u8c61 Statement stmt = conn.createStatement(); //\u6307\u5b9a\u81ea\u589e\u957f\u5173\u952e\u5b57\u7684\u6807\u8bc6 String[] colN = {\"id\"}; //\u5728\u6267\u884c\u65b9\u6cd5\u4e2d\u5f15\u5165\u81ea\u589e\u957f\u5173\u952e\u5b57\u6807\u8bc6 stmt.executeUpdate(\"INSERT INTO authors(first_name, last_name) VALUES (\u2018Ghq\u2019, \u2018Wxl\u2019)\",colN); //\u83b7\u53d6\u7ed3\u679c\u96c6 ResultSet rs = stmt.getGeneratedKeys(); if ( rs.next() ) { //\u83b7\u53d6\u7ed3\u679c\u96c6\u4e2d\u7684\u81ea\u589e\u957f\u503c \u3000\u3000 int key = rs.getInt(); } 6.7 \u91ca\u653e\u8d44\u6e90 \u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u56e0\u5904\u7406\u9700\u8981\u6240\u5efa\u7acb\u7684 ResultSet\u3001Statement\u3001PreparedStatement \u7b49\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61\uff0c\u5728\u4f7f\u7528\u5b8c\u540e\u5fc5\u987b\u5173\u95ed\u3002\u5173\u95ed\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61\uff0c\u76f4\u63a5\u8c03\u7528\u5bf9\u5e94\u7684\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61 close() \u65b9\u6cd5\u5373\u53ef\u3002 \u5f53\u4e0d\u518d\u9700\u8981\u548c\u865a\u8c37\u6570\u636e\u5e93\u8fdb\u884c\u4ea4\u4e92\u65f6\uff0c\u9700\u65ad\u5f00\u6570\u636e\u5e93\u8fde\u63a5\u3002\u8c03\u7528 Connection \u7c7b\u7684 close() \u65b9\u6cd5\u5373\u4f1a\u5173\u95ed\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u540c\u65f6\u91ca\u653e\u8fde\u63a5\u4e0a\u6240\u6301\u6709\u7684\u6240\u6709\u6570\u636e\u5e93\u8d44\u6e90\u3002 \u6570\u636e\u5e93\u8fde\u63a5\u4e3a\u975e\u81ea\u52a8\u63d0\u4ea4\u65f6\uff0c\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61\u5728\u4f7f\u7528\u5b8c\u540e\uff0c\u82e5\u672a\u53ca\u65f6\u5173\u95ed\uff0c\u6b64\u65f6\u8fdb\u884c DDL \u64cd\u4f5c\u5c06\u4f1a\u5bfc\u81f4\u865a\u8c37\u6570\u636e\u5e93\u52a0\u9501\u8d85\u65f6\u6216\u5931\u8d25\u3002 {.is-info} \u4e03. \u5927\u5bf9\u8c61\u7c7b\u578b\u5904\u7406 JDBC 3.0 \u89c4\u8303\u5b9a\u4e49\u6709 java.sql.Blob \u4e0e java.sql.Clob \u63a5\u53e3\uff0c\u6b64\u4e24\u7c7b\u63a5\u53e3\u4e3a\u6570\u636e\u5e93\u5927\u5bf9\u8c61\u6570\u636e\u5904\u7406\u63a5\u53e3\u3002\u865a\u8c37\u6570\u636e\u5e93\u5927\u5bf9\u8c61\u5b57\u6bb5\u7c7b\u578b\u5305\u542b\uff1ablob\u3001clob\u3001binary\u3002 \u5728\u865a\u8c37 JDBC \u4e2d\uff0c\u83b7\u53d6\u5927\u5bf9\u8c61\u6570\u636e\u6709\u4e24\u79cd\u8fd4\u56de\u65b9\u5f0f\uff1a\u4e00\u79cd\u662f\u6570\u636e\u76f4\u63a5\u8fd4\u56de\uff1b\u53e6\u4e00\u79cd\u662f\u8fd4\u56de\u63cf\u8ff0\u7b26\u65b9\u5f0f\u3002\u5f53\u8fd4\u56de\u6570\u636e\u4e2d\u5927\u5bf9\u8c61\u6570\u636e\u8f83\u591a\u65f6\uff0c\u5efa\u8bae\u4f7f\u7528\u8fd4\u56de\u63cf\u8ff0\u7b26\u65b9\u5f0f\uff0c\u4ece\u800c\u907f\u514d\u56e0\u6570\u636e\u8fc7\u591a\u8fc7\u5927\u9020\u6210\u7684 JVM \u5185\u5b58\u6ea2\u51fa\u3002\u865a\u8c37 JDBC \u9a71\u52a8\u542f\u7528\u5927\u5bf9\u8c61\u8fd4\u56de\u63cf\u8ff0\u7b26\u65b9\u5f0f\uff0c\u9700\u5728\u8fde\u63a5 URL \u4e32\u4e0a\u914d\u7f6e\u5c5e\u6027 lob_ret \u4e3a descriptor \u3002 7.1 \u5411\u8868\u4e2d\u63d2\u5165\u5927\u5bf9\u8c61 LOB \u5bf9\u8c61\u7684\u63d2\u5165\u5fc5\u987b\u901a\u8fc7 PreparedStatement\u3001CallableStatement \u7c7b\u7684 setXXX() \u65b9\u6cd5\u65b9\u5f0f\u5b9e\u73b0\u3002\u865a\u8c37 JDBC \u4e2d PreparedStatement \u63d0\u4f9b\u591a\u79cd\u65b9\u6cd5\u8bbe\u7f6e\u5927\u5bf9\u8c61\u53c2\u6570\u503c\uff0c\u5982\u4e0b\u5217\u65b9\u6cd5\uff1a setBinaryStream(int parameterIndex,InputStream x) setBlob(int parameterIndex, Blob x) setBlob(int parameterIndex, InputStream x) setBytes(int parameterIndex,byte[] x) setCharacterStream(int parameterIndex, Reader reader) setClob(int parameterIndex, Clob x) setClob(int parameterIndex, Reader reader) setString(int parameterIndex, String x) \u793a\u4f8b\uff1a\u5e94\u7528\u7a0b\u5e8f\u63d2\u5165\u5927\u5bf9\u8c61\u6570\u636e\uff0c\u5176\u4e2d\u8868 b1 \u5b57\u6bb5 photo \u4e3a blob \u7c7b\u578b\uff0c\u5b57\u6bb5 text \u4e3a clob \u7c7b\u578b PreparedStatement ps = conn.prepareStatement(\"INSERT INTO b1 VALUES (?, ?)\")\u037e // blobBytes is a byte[] type ps.setBlob(1, new com.xugu.cloudjdbc.Blob(blobBytes))\u037e // clobString is a String type ps.setClob(2, new com.xugu.cloudjdbc.Clob(clobString))\u037e ps.execute()\uff1b 7.2 \u67e5\u8be2\u5927\u5bf9\u8c61\u6570\u636e \u901a\u8fc7\u865a\u8c37 JDBC \u83b7\u53d6\u5927\u5bf9\u8c61\u503c\uff0c\u6570\u636e\u5e93 CLOB \u5bf9\u8c61\u53ef\u901a\u8fc7\u5b57\u7b26\u4e32\u5f62\u5f0f\u6216\u6d41\u5f0f\u6570\u636e\u5f62\u5f0f\u83b7\u53d6\uff0c\u6570\u636e\u5e93 BLOB \u5bf9\u8c61\u53ea\u901a\u8fc7\u6d41\u5f0f\u6570\u636e\u5f62\u5f0f\u83b7\u53d6\u3002 \u793a\u4f8b 1\uff1a\u6d41\u5f0f\u83b7\u53d6 CLOB \u5bf9\u8c61 Statement stm = xgConn.createStatement(); String sql=\u201dselect remark from t_clob where id=101\u201d; ResultSet rs = stm.executeQuery(sql); while(rs.next) { Clob data = rs.getClob(\"remark \"); //\u4ee5\u5b57\u7b26\u6d41\u65b9\u5f0f\u83b7\u53d6\u6570\u636e Reader rd = data.getCharacterStream(); char[] sc = new char[1000]; StringBuffer sb = new StringBuffer(); int len = 0; while((len=rd.read(sc)) !=-1) { sb.append(new String(sc,0,len)); } System.out.println(sb.toString()); } \u793a\u4f8b 2\uff1a\u865a\u8c37 JDBC \u5141\u8bb8\u4ee5\u5b57\u7b26\u4e32\u7684\u5f62\u5f0f\u8bfb\u53d6 CLOB \u5bf9\u8c61 String sql=\"select text from t_clob\"\u037e Statement stm=conn.createStatement()\u037e ResultSet rs=stm.executeQuery(sql)\u037e while(rs.next()) { String clobStr =rs.getString(\"text\")\u037e } \u516b. \u865a\u8c37\u6570\u636e\u5e93\u8d1f\u8f7d\u5747\u8861 \u865a\u8c37\u6570\u636e\u5e93\u662f\u4e00\u6b3e\u5177\u5907\u9ad8\u5b89\u5168\u3001\u9ad8\u6027\u80fd\u3001\u9ad8\u6269\u5c55\u7b49\u7279\u6027\u7684\u3001\u57fa\u4e8e\u5206\u5e03\u5f0f\u67b6\u6784\u7684\u5206\u5e03\u5f0f\u4e8b\u52a1\u578b\u6570\u636e\u5e93\u3002\u90e8\u7f72\u6570\u636e\u5e93\u96c6\u7fa4\u65f6\uff0c\u591a\u53f0\u670d\u52a1\u5668\u4f5c\u4e3a\u4e00\u4e2a\u6574\u4f53\u5bf9\u5916\u63d0\u4f9b\u6570\u636e\u670d\u52a1\u3002\u5728\u591a\u673a\u73af\u5883\u4e0b\uff0c\u4e3a\u4f7f\u6570\u636e\u5e93\u8fde\u63a5\u5747\u5300\u5206\u5e03\u4e8e\u5404\u53f0\u670d\u52a1\uff0c\u865a\u8c37 JDBC \u5728\u63a5\u53e3\u5c42\u5b9e\u73b0\u4e86\u57fa\u4e8e\u8f6f\u8d1f\u8f7d\u5747\u8861\u6280\u672f\u7684\u6570\u636e\u5e93\u8fde\u63a5\u5efa\u7acb\u65b9\u5f0f\u3002 \u865a\u8c37\u6570\u636e\u5e93\u8d1f\u8f7d\u5747\u8861\u5206\u914d\u6570\u636e\u5e93\u8fde\u63a5\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a\u987a\u5e8f\u5206\u914d\u3001\u968f\u673a\u5206\u914d\u3002\u901a\u8fc7\u5728\u6570\u636e\u5e93 URL \u8fde\u63a5\u4e32\u4e0a\u8bbe\u7f6e\u53c2\u6570 conn_type(conn_type:1, \u968f\u673a\u5206\u914d\uff1b2, \u987a\u5e8f\u5206\u914d) \u7c7b\u578b\uff0c\u5b9e\u73b0\u6570\u636e\u5e93\u8fde\u63a5\u5728\u591a\u96c6\u7fa4\u73af\u5883\u4e0b\u7684\u8d1f\u8f7d\u5747\u8861\u3002\u9ed8\u8ba4\u8d1f\u8f7d\u5747\u8861\u5206\u914d\u65b9\u5f0f\uff1a\u987a\u5e8f\u5206\u914d\u3002 \u865a\u8c37 JDBC \u63d0\u4f9b\u4e09\u79cd\u914d\u7f6e\u8d1f\u8f7d\u5747\u8861\u7684\u65b9\u5f0f\uff1a\u6570\u636e\u5e93 URL \u8fde\u63a5\u4e32\u914d\u7f6e\u3001\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u6027\u6587\u4ef6 Properties \u914d\u7f6e\u3001\u6570\u636e\u5e93\u8fde\u63a5 XML \u6587\u4ef6\u914d\u7f6e\u3002 1. URL \u8fde\u63a5\u4e32\u914d\u7f6e Class.forName(\"com.xugu.cloudjdbc.Driver\"); //URL\u8fde\u63a5\u4e32\u4e2d\u4f7f\u7528ips\u5c5e\u6027\u914d\u7f6e\u591aIP\u8d1f\u8f7d\u5747\u8861 Connection conn = DriverManager.getConnection(\"jdbc:xugu://192.168.0.201:5138/SYSTEM?user=SYSDBA&password=SYSDBA&conn_type=1&ips=192.168.0.205,192.168.0.204,192.168.1.206\") \u8fde\u63a5\u5c5e\u6027\u6587\u4ef6 Properties \u914d\u7f6e (Vector \u6216\u5b57\u7b26\u4e32\u6570\u7ec4) Properties info=new Properties(); Class.forName(\"com.xugu.cloudjdbc.Driver\"); //Vector\u7ed3\u6784\u5b58\u653e\u8d1f\u8f7d\u5747\u8861\u591aIP\u5730\u5740\u65b9\u5f0f Vector<String> ipsVector=new Vector<String>(); ipsVector.add(\"192.168.1.201\"); ipsVector.add(\"192.168.1.204\"); ipsVector.add(\"192.168.1.205\"); ipsVector.add(\"192.168.1.206\"); info.put(\"ips\", ipsVector); //\u6570\u7ec4\u5b58\u653e\u8d1f\u8f7d\u5747\u8861\u591aIP\u5730\u5740\u65b9\u5f0f String[] ips={\"192.168.1.205\",\"192.168.1.204\",\"192.168.1.206\"}; info.put(\"ips\", ips); Connection conn = DriverManager.getConnection(\"jdbc:xugu://192.168.1.201:5138/SYSTEM?user=SYSDBA&password=SYSDBA&conn_type=2\",info); \u8fde\u63a5\u5c5e\u6027 XML \u6587\u4ef6\u914d\u7f6e <?xml version=\"1.0\" encoding=\"utf-8\"?> <listeners> <listener> <ip>192.168.1.206</ip> </listener> <listener> <ip>192.168.1.204</ip> </listener> <listener> <ip>192.168.1.205</ip> </listener> </listeners> Class.forName(\"com.xugu.cloudjdbc.Driver\"); Connection conn = DriverManager.getConnection(\"jdbc:xugu:file://xuguClouldListener.xml:5138/SYSTEM?user=SYSDBA&password=SYSDBA&conn_type=1\");","title":"JDBC7"},{"location":"JDBC7/#jdbc","text":"Java \u6570\u636e\u5e93\u8fde\u63a5\uff08Java Database Connectivity\uff0c\u7b80\u79f0 JDBC\uff09\u662f Java \u8bed\u8a00\u4e2d\u7528\u6765\u89c4\u8303\u5ba2\u6237\u7aef\u7a0b\u5e8f\u5982\u4f55\u8bbf\u95ee\u6570\u636e\u5e93\u7684\u5e94\u7528\u7a0b\u5e8f\u63a5\u53e3\uff0c\u63d0\u4f9b\u4e86\u8bf8\u5982\u67e5\u8be2\u548c\u66f4\u65b0\u6570\u636e\u5e93\u4e2d\u6570\u636e\u7684\u65b9\u6cd5\uff0c\u53ef\u4ee5\u4e3a\u591a\u79cd\u5173\u7cfb\u6570\u636e\u5e93\u63d0\u4f9b\u7edf\u4e00\u8bbf\u95ee\u3002JDBC \u63d0\u4f9b\u4e86\u4e00\u79cd\u57fa\u51c6\uff0c\u901a\u8fc7\u6b64\u57fa\u51c6\u6570\u636e\u5e93\u5f00\u53d1\u4eba\u5458\u53ef\u6784\u5efa\u66f4\u9ad8\u7ea7\u7684\u5de5\u5177\u548c\u63a5\u53e3\uff0c\u4e5f\u53ef\u901a\u8fc7\u6b64\u57fa\u51c6\u7f16\u5199\u6570\u636e\u5e93\u5e94\u7528\u7a0b\u5e8f\u3002 \u865a\u8c37\u6570\u636e\u5e93\u7684 JDBC \u9a71\u52a8\u7a0b\u5e8f\uff08\u4ee5\u4e0b\u7b80\u79f0\uff1a\u865a\u8c37 JDBC\uff09\u5b9e\u73b0\u4e86 Java \u7a0b\u5e8f\u548c\u865a\u8c37\u6570\u636e\u5e93\u901a\u4fe1\uff0c\u652f\u6301 SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u7684\u8bbf\u95ee\uff0c\u540c\u65f6\u4e5f\u662f\u6784\u9020\u9ad8\u7ea7 API \u548c\u6570\u636e\u5e93\u5f00\u53d1\u5de5\u5177\u7684\u57fa\u7840\u3002 \u7528\u6237\u60f3\u8981\u5b9e\u73b0\u5bf9\u6570\u636e\u5e93\u7684\u8bbf\u95ee\uff0c\u4e00\u822c\u8981\u7ecf\u8fc7\u5982\u4e0b\u7684\u6b65\u9aa4\uff1a 1. \u901a\u8fc7\u9a71\u52a8\u5668\u7ba1\u7406\u5668\u83b7\u53d6\u8fde\u63a5\u63a5\u53e3\uff1b 2. \u83b7\u5f97 Statement \u6216 Statement \u5b50\u7c7b\uff1b 3. \u901a\u8fc7 Statement \u6267\u884c SQL \u547d\u4ee4\uff1b 4. \u5904\u7406\u6267\u884c\u7ed3\u679c\uff1b 5. \u5173\u95ed Statement\uff1b 6. \u5173\u95ed\u8fde\u63a5\u3002 JDBC \u7ed3\u6784\u56fe, \u5982\u56fe1.1\u6240\u793a\u3002 \u56fe1.1 JDBC\u7ed3\u6784\u56fe \u4f7f\u7528\u865a\u8c37 JDBC \u5b9e\u73b0\u5e94\u7528\u7a0b\u5e8f\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u4e4b\u95f4\u7684\u8fde\u63a5\u670d\u52a1\uff0c\u5e94\u7528\u7a0b\u5e8f\u6240\u5728\u8ba1\u7b97\u673a\u9700\u5df2\u5b89\u88c5 Java \u8fd0\u884c\u73af\u5883\uff08Java Runtime Environment, \u7b80\u79f0 JRE\uff09\u3002\u865a\u8c37 JDBC \u53c2\u7167 JDBC API \u5b9e\u73b0\uff0c\u652f\u6301 JDBC 3.0 \u529f\u80fd\uff0cJava \u5e94\u7528\u7a0b\u5e8f\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u4e4b\u95f4\u7684\u6240\u6709\u64cd\u4f5c\u5747\u9700\u901a\u8fc7\u865a\u8c37 JDBC \u6765\u5b8c\u6210\u3002 \u4f7f\u7528\u865a\u8c37 JDBC \u9700\u8981 JRE 1.6 \u7248\u6216\u66f4\u9ad8\u7248\u672c\u7684 Java \u8fd0\u884c\u65f6\u73af\u5883 (JRE)\u3002 {.is-info}","title":"\u4e00. \u865a\u8c37\u6570\u636e\u5e93\u7684JDBC\u9a71\u52a8\u7a0b\u5e8f\u6982\u8ff0"},{"location":"JDBC7/#jdbc_1","text":"JDBC 3.0 \u89c4\u8303\u7531 JDBC 1.0\u3001JDBC 2.0 \u884d\u751f\u800c\u6765\uff0c\u4e3b\u8981\u5305\u542b java.sql \u5305\u4ee5\u53ca javax.sql \u5305\uff0c\u6570\u636e\u5e93 JDBC \u9a71\u52a8\u5b9e\u73b0 JDBC 3.0 \u89c4\u8303\u6240\u5b9a\u4e49\u7684\u7279\u6027\u63a5\u53e3\uff0c\u5373\u53ef\u8fbe\u5230\u5bf9\u6807\u51c6 JDBC 3.0 \u89c4\u8303\u7684\u652f\u6301\u3002 \u865a\u8c37 JDBC \u57fa\u4e8e JDBC 3.0 \u89c4\u8303\u5b9e\u73b0\uff0c\u5b9e\u73b0\u63a5\u53e3\u7c7b\u6620\u5c04\uff0c\u5982\u88682.1\u6240\u793a\u3002 \u88682.1 \u865a\u8c37JDBC\u5b9e\u73b0\u63a5\u53e3\u7c7b | \u63a5\u53e3 | \u865a\u8c37JDBC\u5b9e\u73b0\u7c7b | | ---------------------------------- | ---------------------------------------- | | java.sql.Driver | com.xugu.cloudjdbc.Driver | | java.sql.Connection | com.xugu.cloudjdbc.Connection | | java.sql.Statement | com.xugu.cloudjdbc.Statement | | java.sql.PreparedStatement | com.xugu.cloudjdbc.PreparedStatement | | java.sql.CallableStatement | com.xugu.cloudjdbc.CallableStatement | | java.sql.ResultSet | com.xugu.cloudjdbc.ResultSet | | java.sql.ResultSetMetaData | com.xugu.cloudjdbc.ResultSetMetaData | | java.sql.DatabaseMetaData | com.xugu.cloudjdbc.DatabaseMetaData | | java.sql.PrameterMetaData | com.xugu.cloudjdbc.PrameterMetaData | | java.sql.Types | com.xugu.cloudjdbc.Types | | java.sql.Blob | com.xugu.cloudjdbc.Blob | | java.sql.Clob | com.xugu.cloudjdbc.Clob | | java.sql.Savepoint | com.xugu.cloudjdbc.Savepoint | | javax.sql.DataSource | com.xugu.pool.XgDataSource | | javax.sql.ConnectionPoolDataSource | com.xugu.pool.XgConnectionPoolDataSource | | javx.sql.PooledConnection | com.xugu.pool.XgPooledConnection | \u9664\u4e86\u4ee5\u4e0a\u6807\u51c6\u7c7b\u63a5\u53e3\u5916\uff0c\u865a\u8c37 JDBC \u8fd8\u6269\u5c55\u5b9e\u73b0\u4e86\u4ee5\u4e0b\u7c7b\uff1a - com.xugu.cloudjdbc.ClientInfo - com.xugu.cloudjdbc.OutParameter - com.xugu.cloudjdbc.Rowid - com.xugu.cloudjdbc.SQLXml - com.xugu.cloudjdbc.SSL - com.xugu.pool.StatementWrapper - com.xugu.pool.PreparedStatementWrapper","title":"\u4e8c. \u865a\u8c37\u6570\u636e\u5e93\u7684JDBC\u63a5\u53e3\u548c\u5bf9\u8c61\u7c7b"},{"location":"JDBC7/#_1","text":"","title":"\u4e09. \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b"},{"location":"JDBC7/#31","text":"\u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b\u3001\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u3001Java \u6570\u636e\u7c7b\u578b\u4e09\u8005\u6620\u5c04\u5173\u7cfb\uff0c\u5982\u88683.1\u6240\u793a\u3002 \u88683.1 \u6570\u636e\u7c7b\u578b\u6620\u5c04\u5173\u7cfb \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b \u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b Java \u6570\u636e\u7c7b\u578b BOOLEAN BOOLEAN boolean SMALLINT SMALLINT short TINYINT TINYINT byte INTEGER INTEGER int BIGINT BIGINT long FLOAT FLOAT float DOUBLE DOUBLE double NUMERIC NUMERIC BigDecimal DECIMAL BigDecimal CHAR CHAR String NCHAR NCHAR String VARCHAR VARCHAR String VARCHAR2 VARCHAR String NVARCHAR2 VARCHAR String BLOB BLOB Blob CLOB CLOB Clob NCLOB BINARY BINARY byte[] VARBINARY LONG VARBINARY DATE DATE Date TIME TIME Time TIMESTAMP TIMESTAMP Timestamp","title":"3.1 \u57fa\u672c\u6570\u636e\u7c7b\u578b"},{"location":"JDBC7/#32","text":"\u865a\u8c37 JDBC \u9664\u4e86\u5b9e\u73b0\u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b\uff0c\u8fd8\u6839\u636e\u865a\u8c37\u6570\u636e\u5e93\u81ea\u6709\u7c7b\u578b\u6269\u5c55\u4e86\u90e8\u5206\u6570\u636e\u7c7b\u578b\uff08\u88683.2\u6240\u793a\uff09\uff0c\u5305\u62ec\u4ee5\u4e0b\u6570\u636e\u7c7b\u578b\u3002 1. \u65f6\u95f4\u6570\u636e\u7c7b\u578b DATETIME\u2014\u2014\u2014 \u65e5\u671f\u65f6\u95f4\u7c7b\u578b DATETIME WITH TIME ZONE \u2014\u2014\u2014 \u5e26\u65f6\u533a\u7684\u65e5\u671f\u65f6\u95f4\u7c7b\u578b TIME WITH TIME ZONE \u2014\u2014\u2014 \u5e26\u65f6\u533a\u7684\u65f6\u95f4\u7c7b\u578b INTERVAL YEAR \u2014\u2014\u2014 \u5e74\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL MONTH \u2014\u2014\u2014 \u6708\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY\u2014\u2014\u2014 \u65e5\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL HOUR \u2014\u2014\u2014 \u5c0f\u65f6\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL MINUTE \u2014\u2014\u2014 \u5206\u949f\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL SECOND \u2014\u2014\u2014 \u79d2\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL YEAR TO MONTH \u2014\u2014\u2014 \u5e74\u5230\u6708\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY TO HOUR \u2014\u2014\u2014 \u65e5\u5230\u5c0f\u65f6\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY TO MINUTE \u2014\u2014\u2014 \u65e5\u5230\u5206\u949f\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY TO SECOND \u2014\u2014\u2014 \u65e5\u5230\u79d2\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL HOUR TO MINUTE \u2014\u2014\u2014 \u5c0f\u65f6\u5230\u5206\u949f\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL HOUR TO SECOND \u2014\u2014\u2014 \u5c0f\u65f6\u5230\u79d2\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL MINUTE TO SECOND \u2014\u2014\u2014 \u5206\u949f\u5230\u79d2\u7684\u65f6\u95f4\u95f4\u9694 2. \u6e38\u6807\u6570\u636e\u7c7b\u578b\uff08\u53ea\u5728\u5b58\u50a8\u8fc7\u7a0b\u3001\u51fd\u6570\u3001\u5305\u4e2d\u4f7f\u7528\uff09 CURSOR \u2014\u2014\u2014 \u6e38\u6807\u6570\u636e\u7c7b\u578b SYS_REFCURSOR \u2014\u2014\u2014 \u8fd4\u56de\u6e38\u6807\u6570\u636e\u7c7b\u578b 3. \u5176\u4ed6\u6570\u636e\u7c7b\u578b GUID \u2014\u2014\u2014 \u5168\u5c40\u552f\u4e00\u6807\u8bc6\u7b26 \u88683.2 \u6269\u5c55\u6570\u636e\u7c7b\u578b\u5bf9\u5e94\u8868 \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b \u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b Java \u6570\u636e\u7c7b\u578b DATETIME DATETIME Timestamp DATETIME WITH TIME ZONE DATETIME_TZ String TIME WITH TIME ZONE TIME_TZ String INTERVAL YEAR INTERVAL_Y String INTERVAL MONTH INTERVAL_M INTERVAL DAY INTERVAL_D INTERVAL HOUR INTERVAL_H INTERVAL MINUTE INTERVAL_MI INTERVAL SECOND INTERVAL_S String INTERVAL YEAR TO MONTH INTERVAL_Y2M INTERVAL DAY TO HOUR INTERVAL_D2H INTERVAL DAY TO MINUTE INTERVAL_D2M INTERVAL DAY TO SECOND INTERVAL_D2S INTERVAL HOUR TO MINUTE INTERVAL_H2M INTERVAL HOUR TO SECOND INTERVAL_H2S INTERVAL MINUTE TO SECOND INTERVAL_M2S CURSOR CURSOR \u65e0\u5bf9\u5e94\u7c7b\u578b SYS_REFCURSOR REFCUR GUID GUID String \u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528 ResultSet \u5bf9\u8c61\u6765\u5bf9\u5e94\u83b7\u53d6\u6e38\u6807\u6240\u8fd4\u56de\u6570\u636e\u3002 {.is-info}","title":"3.2 \u6269\u5c55\u6570\u636e\u7c7b\u578b"},{"location":"JDBC7/#33","text":"\u5728\u8c03\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u4e2d\u7684\u67d0\u4e9b\u65b9\u6cd5\u65f6\uff0c\u9700\u8fdb\u884c Java \u6570\u636e\u7c7b\u578b\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u7684\u8f6c\u6362\uff0c\u8fd9\u4e9b\u65b9\u6cd5\u5305\u62ec\uff1a - ResultSet \u7c7b get\\<Type> \u65b9\u6cd5\uff1b - ResultSet \u7c7b update\\<Type> \u65b9\u6cd5\uff1b - CallableStatement \u7c7b get\\<Type> \u65b9\u6cd5\uff1b - PreparedStatement \u7c7b set\\<Type> \u65b9\u6cd5\u3002 \u6570\u636e\u7c7b\u578b\u4e4b\u95f4\u7684\u8f6c\u6362\uff0c\u9700\u9075\u4ece Java \u6570\u636e\u7c7b\u578b\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u6620\u5c04\u5173\u7cfb\u89c4\u5219\uff0c\u5426\u5219\u53ef\u80fd\u8f6c\u6362\u5931\u8d25\u3002 1. com.xugu.cloudjdbc.ResultSet \u7c7b\u4e2d get\\<Type> \u65b9\u6cd5\u7684\u7c7b\u578b\u8f6c\u6362\uff0c\u5982\u88683.3\u6240\u793a\u3002 2. com.xugu.cloudjdbc.PreparedStatement \u7c7b\u4e2d set\\<Type> \u65b9\u6cd5\u7684\u7c7b\u578b\u8f6c\u6362\uff0c\u5982\u88683.4\u6240\u793a\u3002 X\uff08\u65e0\u4e22\u5931\u8f6c\u6362\uff09\uff1a\u6307\u4ee5\u957f\u7cbe\u5ea6\u7c7b\u578b\u7684 get\\<Type> \u65b9\u6cd5\u83b7\u53d6\u77ed\u7cbe\u5ea6\u6570\u636e\u7c7b\u578b\u5217\u503c\u65e0\u4e22\u5931\u3002 \u5982\uff1a\u4f7f\u7528 getInt() \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u4e3a smallint \u7684\u5217\u6570\u636e\uff0c\u83b7\u53d6\u6570\u636e\u5b8c\u6574\u3002 Z\uff08\u4f9d\u8d56\u8f6c\u6362\uff09\uff1a\u6307 get\\<Type> \u65b9\u6cd5\u4e2d\u7684 Type \u7c7b\u578b\u4e0e\u83b7\u53d6\u6570\u636e\u5e93\u4e2d\u5217\u7684\u6570\u636e\u7c7b\u578b\u4e0d\u4e00\u81f4\uff0c\u6b64\u65f6\u9700\u8981\u901a\u8fc7\u5176\u4ed6\u6570\u636e\u7c7b\u578b\u8f6c\u6362\u4e3a Type \u6570\u636e\u7c7b\u578b\uff0c\u6b64\u8f6c\u6362\u8fc7\u7a0b\u503c\u53ef\u80fd\u4e22\u5931\u90e8\u5206\u6570\u636e\u3002 \u5982\uff1a\u4f7f\u7528 getInt() \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u4e3a float \u7684\u5217\u6570\u636e\uff0c\u53ef\u83b7\u53d6 float \u5217\u6570\u636e\u7684\u6574\u6570\u503c\uff0c\u800c\u5c0f\u6570\u7cbe\u5ea6\u503c\u5c06\u4e22\u5931\u3002 Y\uff08\u76f4\u63a5\u8f6c\u6362\uff09\uff1a\u6307 get\\<Type> \u65b9\u6cd5\u4e2d\u7684 Type \u7c7b\u578b\u4e0e\u83b7\u53d6\u6570\u636e\u5e93\u4e2d\u5217\u7684\u6570\u636e\u7c7b\u578b\u4e00\u81f4\u3002 \u5982\uff1a\u4f7f\u7528 getInt() \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u4e3a integer \u7684\u5217\u6570\u636e\uff0c\u76f4\u63a5\u83b7\u53d6\u5b8c\u6574\u6570\u636e\u3002 {.is-info} P\uff08\u5141\u8bb8\u63d2\u5165\uff09\uff1a\u6307 set\\<Type> \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u5e93\u4e2d\u5217\u6570\u636e\u65f6\uff0c\u6570\u636e\u65e0\u635f\u5931\u5b58\u5165\u6570\u636e\u5e93\u4e2d\u3002 \u5982\uff1a\u4f7f\u7528 setInt() \u65b9\u6cd5\u8bbe\u7f6e\u5217\u6570\u636e\u7c7b\u578b\u4e3a bigint \u7684\u6570\u636e\u65f6\uff0c\u6570\u636e\u53ef\u6b63\u786e\u5b58\u5165\u3002 Z\uff08\u90e8\u5206\u63d2\u5165\uff09\uff1a\u6307 set\\<Type> \u65b9\u6cd5\u4e2d\u7684 Type \u7c7b\u578b\u548c\u6570\u636e\u5e93\u4e2d\u5217\u6570\u636e\u7c7b\u578b\u4e0d\u4e00\u81f4\uff0c\u6570\u636e\u4ec5\u80fd\u90e8\u5206\u6b63\u786e\u5b58\u5165\u3002 \u5982\uff1a\u4f7f\u7528 setInt() \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u5e93\u5217\u7c7b\u578b\u4e3a tinyint \u7684\u6570\u636e\uff0c\u56e0 tinyint \u8868\u793a\u8303\u56f4\u4e3a-128\uff5e127 \u7684\u6574\u6570\u503c\uff0c\u6545\u800c tinyint\u8868\u793a\u8303\u56f4\u5185\u6570\u636e\u53ef\u6b63\u786e\u5b58\u5165\uff0c\u8303\u56f4\u5916\u6570\u636e\u5c06\u63d2\u5165\u5931\u8d25\u3002 {.is-info}","title":"3.3 \u6570\u636e\u7c7b\u578b\u8f6c\u6362"},{"location":"JDBC7/#_2","text":"","title":"\u56db. \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5"},{"location":"JDBC7/#41-jdbc","text":"\u901a\u8fc7\u865a\u8c37 JDBC \u9a71\u52a8\u8bbf\u95ee\u865a\u8c37\u6570\u636e\u5e93\uff0c\u9996\u5148\u5e94\u4fdd\u8bc1\u5e94\u7528\u7a0b\u5e8f\u6b63\u786e\u5f15\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u5305 (cloudjdbc-*.*.*.jar)\uff0c\u5373\u5c06\u9a71\u52a8\u5305\u62f7\u8d1d\u81f3\u5e94\u7528\u7a0b\u5e8f\u5e76\u6dfb\u52a0\u5f15\u7528\u3002","title":"4.1 \u90e8\u7f72JDBC\u9a71\u52a8\u7a0b\u5e8f"},{"location":"JDBC7/#42-jdbc","text":"\u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u8fdb\u884c\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u8c03\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u7a0b\u5e8f\uff0c\u9996\u5148\u8981\u5c06\u865a\u8c37 JDBC \u9a71\u52a8\u52a0\u8f7d\u5230\u7cfb\u7edf\u5185\u5b58\u4e2d\uff0c\u7136\u540e\u4f9b\u7cfb\u7edf\u4f7f\u7528\u3002\u865a\u8c37 JDBC \u7684\u9a71\u52a8\u5b9e\u73b0\u7c7b\u4e3acom.xugu.cloudjdbc.Driver\uff0c\u4ee5\u4e0b\u662f\u5c06\u865a\u8c37 JDBC \u9a71\u52a8\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\u7684\u4ee3\u7801\uff1a //\u663e\u793a\u6ce8\u518c DriverManager.registerDriver(new com.xugu.cloudjdbc.Driver())\u037e //\u9690\u5f0f\u6ce8\u518c Class.forName(\u201ccom.xugu.cloudjdbc.Driver\u201d)\u037e \u9690\u5f0f\u6ce8\u518c\u5373\u901a\u8fc7 Class.forName() \u5c06\u5bf9\u5e94\u7684\u9a71\u52a8\u7c7b\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\uff0c\u5c06\u6267\u884c\u5185\u5b58\u4e2d\u7684 static \u9759\u6001\u4ee3\u7801\u6bb5\uff0c\u6b64\u4ee3\u7801\u6bb5\u4f1a\u521b\u5efa\u4e00\u4e2a\u865a\u8c37 JDBC \u9a71\u52a8\u7684\u5b9e\u4f8b\uff0c\u5e76\u653e\u5165 DriverManager \u4e2d\uff0c\u4f9b DriverManager \u4f7f\u7528\u3002 {.is-info}","title":"4.2 \u52a0\u8f7dJDBC\u9a71\u52a8\u7a0b\u5e8f"},{"location":"JDBC7/#43","text":"\u865a\u8c37 JDBC \u9a71\u52a8\u8fde\u63a5 URL \u4e32\u683c\u5f0f\uff1a jdbc:xugu://serverIP:portNumber/databaseName[?property=value[&property=value]] \u865a\u8c37 JDBC \u9a71\u52a8\u8fde\u63a5 URL \u4e32\u683c\u5f0f\uff1a 1). jdbc:xugu:// \uff1a\uff08\u5fc5\u9700\uff09\u865a\u8c37\u6570\u636e\u5e93\u7279\u5b9a\u534f\u8bae\u3002 2). serverIP \uff1a\uff08\u5fc5\u9700\uff09\u865a\u8c37\u6570\u636e\u5e93\u6240\u5728\u670d\u52a1\u5668\u7684 IP \u5730\u5740\u3002 3). portNumber\uff1a\uff08\u5fc5\u9700\uff09\u662f\u865a\u8c37\u6570\u636e\u5e93\u670d\u52a1 TCP \u8bbf\u95ee\u7aef\u53e3\uff0c\u9ed8\u8ba4 5138\u3002 4). databaseName\uff1a\uff08\u5fc5\u9700\uff09\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u5e93\u540d\u79f0\u3002 5). property\uff1a\uff08\u53ef\u9009\uff09\u865a\u8c37\u6570\u636e\u5e93\u7684 URL \u8fde\u63a5\u5c5e\u6027\u3002\u591a\u4e2a\u8fde\u63a5\u5c5e\u6027\u4e4b\u95f4\u4f7f\u7528\u201c&\u201d\u5206\u9694\uff0c\u4e0d\u53ef\u91cd\u590d\u3002 \u865a\u8c37 JDBC \u9a71\u52a8 URL \u4e32\u793a\u4f8b\u5982\u4e0b\uff1a String url = jdbc:xugu://localhost:5138/System?user=GUEST&password=GUEST\u037e property \u8bbe\u7f6e\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u6027\uff0c\u5e38\u7528\u8fde\u63a5\u5c5e\u6027\u89c1\u88684.1\u3002 \u88684.1 \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u6027 table th:first-of-type { width: 20%; } table th:nth-of-type(2) { width: 10%; } table th:nth-of-type(3) { width: 10%; } table th:nth-of-type(4) { width: 50%; } \u5c5e\u6027\u540d\u79f0 \u5fc5\u9009\u9879 \u53d6\u503c \u8bf4\u660e database \u221a \u5b57\u7b26\u4e32 \u6570\u636e\u5e93\u540d\u79f0 user \u221a \u5b57\u7b26\u4e32 \u7528\u6237\u540d\u79f0 password \u221a \u5b57\u7b26\u4e32 \u7528\u6237\u5bc6\u7801 encryptor \u00d7 \u5b57\u7b26\u4e32 \u7528\u4e8e\u542f\u52a8\u52a0\u5bc6\u6570\u636e\u5e93\uff0c\u82e5\u5e93\u672a\u52a0\u5bc6\uff0c\u5219\u53ef\u4e0d\u8981\uff0c\u4f46\u5e26\u4e0a\u6b64\u53c2\u6570\u4e0d\u4f1a\u5f71\u54cd\u8fde\u63a5 char_set \u00d7 \u5b57\u7b26\u4e32 \u8fde\u63a5\u5b57\u7b26\u96c6\u3002'GB2312'\u3001'GBK'\u3001'UTF8' \u7b49\uff0c\u9ed8\u8ba4\uff1aGBK time_zone \u00d7 \u5b57\u7b26\u4e32 \u5ba2\u6237\u7aef\u65f6\u533a\u3002\u9ed8\u8ba4\uff1a\u865a\u8c37\u6570\u636e\u5e93\u914d\u7f6e\u53c2\u6570 def_timezone \u6240\u8bbe\u7f6e\u65f6\u533a\uff08\u53ea\u5bf9\u7cfb\u7edf\u65f6\u95f4\u51fd\u6570\u751f\u6548\uff09 iso_level \u00d7 \u5b57\u7b26\u4e32 'READ COMMITED'\uff1a\u8bfb\u5df2\u63d0\u4ea4\uff1b 'REPEATIABLE READ'\uff1a\u53ef\u91cd\u590d\u8bfb\uff1b'SERIALIZABLE'\uff1a\u5e8f\u5217\u5316 lock_time \u00d7 \u6570\u503c \u5355\u4f4d\uff1a\u6beb\u79d2\uff0c\u9ed8\u8ba4\u503c\uff1a0\uff0c\u8868\u793a\u8fde\u63a5\u4e2d\u7684\u4e8b\u52a1\u9501\u5f81\u7528\u65f6\uff0c\u6700\u5927\u7b49\u5019\u65f6\u95f4\uff0c\u82e5\u5728\u8bbe\u7f6e\u65f6\u95f4\u5185\u52a0\u9501\u5931\u8d25\uff0c\u56de\u6eda\u4e8b\u52a1\u5e76\u62a5\u9519 lob_ret \u00d7 \u5b57\u7b26\u4e32 \u5927\u5bf9\u8c61\uff08Blob\u3001Clob\uff09\u6570\u636e\u8fd4\u56de\u65b9\u5f0f\u3002\u5c5e\u6027\u4e3a descriptor \u65f6\uff0c\u4ee5\u63cf\u8ff0\u7b26\u65b9\u5f0f\u8fd4\u56de\uff1b\u5176\u4ed6\u4ee5\u6570\u636e\u6d41\u65b9\u5f0f\u8fd4\u56de\u3002\u9ed8\u8ba4\uff1a\u4ee5\u6570\u636e\u6d41\u65b9\u5f0f\u8fd4\u56de return_rowid \u00d7 \u5e03\u5c14\u503c \u662f\u5426\u8fd4\u56de\u8bb0\u5f55 rowid \u503c\u3002\u5c5e\u6027\u4e3a TRUE \u65f6\uff0c\u8fd4\u56de rowid\uff1b\u5176\u4ed6\u8fd4\u56de FALSE\u3002\u9ed8\u8ba4\uff1aFALSE auto_commit \u00d7 on/off \u4e8b\u52a1\u662f\u5426\u81ea\u52a8\u63d0\u4ea4\u3002\u5c5e\u6027\u4e3a ON \u65f6\uff0c\u8fde\u63a5\u81ea\u52a8\u63d0\u4ea4\uff1b\u5c5e\u6027\u4e3a OFF\u65f6\uff0c\u8fde\u63a5\u975e\u81ea\u52a8\u63d0\u4ea4\u3002\u9ed8\u8ba4\uff1aON conn_type \u00d7 \u6570\u503c \u8d1f\u8f7d\u5747\u8861\u5206\u914d\u65b9\u5f0f\u3002\u5c5e\u6027\u4e3a 1 \u65f6\uff0c\u968f\u673a\u5206\u914d\uff1b\u5c5e\u6027\u4e3a 2 \u65f6\uff0c\u987a\u5e8f\u5206\u914d\u3002\u9ed8\u8ba4\uff1a2 ips \u00d7 \u5b57\u7b26\u4e32 \u8d1f\u8f7d\u5747\u8861\u8fde\u63a5 IP \u5730\u5740\uff0c\u591a\u4e2a IP \u5730\u5740\u4ee5\u9017\u53f7\u5206\u9694\uff08\u8be6\u7ec6\u89c1\u8d1f\u8f7d\u5747\u8861\uff09 CompatibleOracle \u00d7 \u5e03\u5c14\u503c \u517c\u5bb9 Oracle \u9009\u9879\u3002\u5c5e\u6027\u4e3a true\uff0c\u517c\u5bb9 Oracle\u037e \u5c5e\u6027\u4e3a FALSE\uff0c\u865a\u8c37 JDBC \u81ea\u6709\u5b9e\u73b0 recv_mode \u00d7 \u6570\u503c \u63a5\u6536\u6a21\u5f0f\u9009\u9879\u3002\u5c5e\u6027\u503c\u4e3a 0 \u65f6\uff0c\u672c\u5730\u5168\u63a5\u6536\u6a21\u5f0f\uff1b\u5c5e\u6027\u503c\u4e3a 1 \u65f6\uff0c\u7f51\u7edc\u63a5\u6536\u6a21\u5f0f\uff1b\u5c5e\u6027\u503c\u4e3a 2 \u65f6\uff0c\u670d\u52a1\u5668\u7aef\u6e38\u6807\u63a5\u6536\u6a21\u5f0f\u3002\u9ed8\u8ba4\uff1a0 emptyStringAsNull \u00d7 \u5e03\u5c14\u503c \u7a7a\u5b57\u4e32\u5904\u7406\u3002\u5c5e\u6027\u4e3a FALSE \u65f6\uff0c\u7a7a\u5b57\u7b26\u4e32\u8ba4\u5b9a\u4e3a NULL\uff1b\u5c5e\u6027\u4e3a TRUE \u65f6\uff0c\u7a7a\u5b57\u7b26\u4e32\u4fdd\u7559\u3002\u9ed8\u8ba4\uff1a\u7a7a\u5b57\u4e32\u4fdd\u7559 xgversion \u00d7 201/301 \u5ba2\u6237\u7aef\u534f\u8bae\u7248\u672c\uff0c\u865a\u8c37\u6570\u636e\u5e93V12\u7248\u672c\u5347\u7ea7\u652f\u6301301\u534f\u8bae\uff0c\u540c\u65f6\u517c\u5bb9201\u534f\u8bae SSL \u00d7 SSL \u8fde\u63a5\u52a0\u5bc6\u53c2\u6570\u3002\u5c5e\u6027\u503c\u3010SSL\uff1a\u542f\u7528SSL\u52a0\u5bc6\u4f20\u8f93\uff1bNSSL\uff1a\u7981\u7528SSL\u52a0\u5bc6\u4f20\u8f93\u3011 slowsqltime \u00d7 \u6570\u503c \u8bbe\u7f6e\u6162SQL\u6267\u884c\u65f6\u95f4\u3002SQL\u8bed\u53e5\u6267\u884c\u65f6\u95f4\u8d85\u8fc7\u8be5\u6570\u503c\uff0c\u65e5\u5fd7\u5219\u4f1a\u8f93\u51fa\u6267\u884cSQL batch_mode \u00d7 \u5e03\u5c14\u503c PreparedStatement\u662f\u5426\u4f7f\u7528\u6279\u91cf\u5904\u7406\u3002\u5c5e\u6027\u4e3a TRUE \u65f6\uff0cexecuteBatch\u91c7\u7528\u6279\u91cf\u6a21\u578b\uff1bFALSE\u5219\u91c7\u7528\u5355\u6761\u5904\u7406\u6a21\u578b\u3002\u9ed8\u8ba4\uff1aFALSE \u8fde\u63a5\u53c2\u6570\u4f7f\u7528SSL\u5c5e\u6027\u65f6\uff0c\u4f9d\u8d56\u7a0b\u5e8f\u5305\u4e2d\u63d0\u4f9b\u7684\u52a8\u6001\u94fe\u63a5\u5e93\uff0c\u4f7f\u7528\u524d\u9700\u5c06\u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u5230\u64cd\u4f5c\u7cfb\u7edf\u6307\u5b9a\u4f4d\u7f6e\u65b9\u53ef\u6b63\u5e38\u4f7f\u7528SSL\u52a0\u5bc6\u529f\u80fd\u3002 Windows 32\u4f4d\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u7528SSL\u5c5e\u6027\u524d\uff0c\u9700\u5c06\u7a0b\u5e8f\u5305 ssl/win32 \u4e0b xgssl.dll \u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u62f7\u8d1d\u5230\u7cfb\u7edf\u76ee\u5f55 C:/windows/system32 \u76ee\u5f55\u4f4d\u7f6e\u3002 Windows 64\u4f4d\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u7528SSL\u5c5e\u6027\u524d\uff0c\u9700\u5c06\u7a0b\u5e8f\u5305 ssl/win64 \u4e0b xgssl.dll \u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u62f7\u8d1d\u5230\u7cfb\u7edf\u76ee\u5f55 C:/windows/system32 \u76ee\u5f55\u4e0b\u3002 Linux X64\u4f4d\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u7528SSL\u5c5e\u6027\u524d\uff0c\u9700\u5c06\u7a0b\u5e8f\u5305 ssl/linux64 \u4e0b libxgssl.so \u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u62f7\u8d1d\u5230\u7cfb\u7edf\u76ee\u5f55 /usr/lib\u6216\u8005/usr/lib4 \u76ee\u5f55\u4e0b\u3002 \u865a\u8c37 JDBC \u8bbe\u7f6e\u8fde\u63a5\u5c5e\u6027\u793a\u4f8b\u5982\u4e0b (\u7248\u672c\u53f7\u3001\u5927\u5bf9\u8c61\u63cf\u8ff0\u7b26\u3001\u65f6\u533a\u3001\u5173\u95ed\u8fde\u63a5\u81ea\u52a8\u63d0\u4ea4)\uff1a String url=jdbc:xugu://localhost:5138/System?user=GUEST&password=GUEST&version=110&auto_commit=false&lob_ret=descriptor&time_zone=GMT-8:00\u037e","title":"4.3 \u8fde\u63a5\u5b57\u4e32\u53ca\u53c2\u6570\u8bbe\u7f6e"},{"location":"JDBC7/#44","text":"\u5728\u5e94\u7528\u7a0b\u5e8f\u5c06\u865a\u8c37 JDBC \u9a71\u52a8\u52a0\u8f7d\u5230\u7cfb\u7edf\u5185\u5b58\u4e2d\u540e\uff0c\u53ef\u901a\u8fc7 DriverManager \u7c7b\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u65b9\u6cd5\u5982\u4e0b\uff1a DriverManager.getConnection(String url)\u037e DriverManager.getConnection(String url,Properties)\u037e DriverManager.getConnection(String url,String user,String password)\u037e","title":"4.4 \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5"},{"location":"JDBC7/#_3","text":"\u901a\u8fc7 DriverManager \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u4ee5\u5916\uff0c\u8fd8\u53ef\u4ee5\u4f7f\u7528\u6570\u636e\u6e90\u6216\u8fde\u63a5\u6c60\u65b9\u5f0f\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u3002\u901a\u8fc7\u6570\u636e\u6e90\u65b9\u5f0f\u6216\u8fde\u63a5\u6c60\u65b9\u5f0f\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u6709\u4ee5\u4e0b\u4f18\u70b9\uff1a - \u8d44\u6e90\u91cd\u7528 \u7531\u4e8e\u6570\u636e\u5e93\u8fde\u63a5\u5f97\u5230\u91cd\u7528\uff0c\u907f\u514d\u4e86\u9891\u7e41\u521b\u5efa\u3001\u91ca\u653e\u8fde\u63a5\u5f15\u8d77\u7684\u5927\u91cf\u6027\u80fd\u5f00\u9500\u3002\u5728\u51cf\u5c11\u7cfb\u7edf\u6d88\u8017\u7684\u57fa\u7840\u4e0a\uff0c\u53e6\u4e00\u65b9\u9762\u4e5f\u589e\u8fdb\u4e86\u7cfb\u7edf\u8fd0\u884c\u73af\u5883\u7684\u5e73\u7a33\u6027\uff08\u51cf\u5c11\u5185\u5b58\u788e\u7247\u4ee5\u53ca\u6570\u636e\u5e93\u4e34\u65f6\u8fdb\u7a0b/\u7ebf\u7a0b\u7684\u6570\u91cf\uff09\u3002 - \u66f4\u5feb\u7684\u7cfb\u7edf\u54cd\u5e94 \u6570\u636e\u5e93\u8fde\u63a5\u6c60\u5728\u521d\u59cb\u5316\u8fc7\u7a0b\u4e2d\uff0c\u5f80\u5f80\u5df2\u7ecf\u521b\u5efa\u4e86\u82e5\u5e72\u6570\u636e\u5e93\u8fde\u63a5\u7f6e\u4e8e\u6c60\u4e2d\u5907\u7528\u3002\u6b64\u65f6\u8fde\u63a5\u7684\u521d\u59cb\u5316\u5de5\u4f5c\u5747\u5df2\u5b8c\u6210\u3002\u5bf9\u4e8e\u4e1a\u52a1\u8bf7\u6c42\u5904\u7406\u800c\u8a00\uff0c\u76f4\u63a5\u5229\u7528\u73b0\u6709\u53ef\u7528\u8fde\u63a5\uff0c\u907f\u514d\u4e86\u6570\u636e\u5e93\u8fde\u63a5\u521d\u59cb\u5316\u548c\u91ca\u653e\u8fc7\u7a0b\u7684\u65f6\u95f4\u5f00\u9500\uff0c\u4ece\u800c\u7f29\u51cf\u4e86\u7cfb\u7edf\u6574\u4f53\u54cd\u5e94\u65f6\u95f4\u3002 - \u65b0\u7684\u8d44\u6e90\u5206\u914d\u624b\u6bb5 \u5bf9\u4e8e\u591a\u5e94\u7528\u5171\u4eab\u540c\u4e00\u6570\u636e\u5e93\u7684\u7cfb\u7edf\u800c\u8a00\uff0c\u53ef\u5728\u5e94\u7528\u5c42\u901a\u8fc7\u6570\u636e\u5e93\u8fde\u63a5\u7684\u914d\u7f6e\uff0c\u9650\u5236\u5355\u4e00\u5e94\u7528\u7533\u8bf7\u6570\u636e\u5e93\u8fde\u63a5\u6570\uff0c\u4ece\u800c\u907f\u514d\u5355\u4e00\u5e94\u7528\u72ec\u5360\u6240\u6709\u6570\u636e\u5e93\u8d44\u6e90\u3002 \u865a\u8c37 JDBC \u4e2d\u6570\u636e\u6e90\u5b9e\u73b0\u7c7b\u4e3a com.xugu.pool.XgDataSource\uff0c\u8fde\u63a5\u6c60\u5b9e\u73b0\u7c7b\u4e3acom.xugu.pool \u5305\u4e2d\u7684 XgDataSource\u3001XgPooledConnection\u3001XgConnectionPoolDataSource\u3001XgConnectionEventListener\u3001XgConnectionEvent\u3002","title":"\u4e94. \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u6e90\u548c\u8fde\u63a5\u6c60"},{"location":"JDBC7/#51","text":"XgDataSource \u63d0\u4f9b set \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u6e90\u8fde\u63a5\u5c5e\u6027\uff1a \u793a\u4f8b\uff1a\u901a\u8fc7 XgDataSource \u4e0e\u865a\u8c37\u6570\u636e\u5e93\u5efa\u7acb\u8fde\u63a5 com.xugu.pool.XgDataSource ds = new com.xugu.pool.XgDataSource()\u037e ds.setUrl(\"jdbc:xugu://127.0.0.1:5138/db\")\u037e ds.setUser(\"SYSDBA\")\u037e ds.setPassword(\"SYSDBA\")\u037e Properties pro = new Properties()\u037e pro.setProperty(\"return_rowid\", \"true\")\u037e pro.setProperty(\"auto_commit\", \"off\")\u037e ds.setPro(pro)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u767b\u5f55\u4e32\u3002url\u4e3a\u6570\u636e\u5e93\u767b\u5f55\u4e32 setUrl(String url)\uff1b //\u6307\u5b9a\u6570\u636e\u5e93\u670d\u52a1\u5668\u3002host\u4e3a\u670d\u52a1\u5668\u5730\u5740 setHostName(String host)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u540d\u3002dbName\u4e3a\u6570\u636e\u5e93\u540d setDatabaseName(String dbName)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u7aef\u53e3\u53f7\u3002port\u4e3a\u6570\u636e\u5e93\u7aef\u53e3\u53f7 setPort(int port)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u7528\u6237\u3002userName\u4e3a\u6570\u636e\u5e93\u767b\u5f55\u7528\u6237\u540d setUser(String userName)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u767b\u5f55\u5bc6\u7801\u3002passWord\u4e3a\u6570\u636e\u5e93\u767b\u5f55\u5bc6\u7801 setPassword(Stirng passWord)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u767b\u5f55\u53c2\u6570\u3002ds_pro\u4e3a\u6570\u636e\u5e93\u8fde\u63a5\u53c2\u6570 setPro(Properties ds_pro)\uff1b // \u901a\u8fc7\u6570\u636e\u6e90\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5 Connection conn = ds.getConnection()\u037e \u5728 com.xugu.pool.XgDataSource \u7c7b\u4e2d\u901a\u8fc7 setXX() \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u6e90\u7684\u8fde\u63a5\u5c5e\u6027\uff0c\u82e5\u672a\u6307\u5b9a\u5219\u4f7f\u7528\u9ed8\u8ba4\u5c5e\u6027\u503c\uff1a\u6570\u636e\u5e93\u670d\u52a1\u5668\u5730\u5740\u9ed8\u8ba4\u4e3a\u201clocalhost\u201d \uff0c\u8fde\u63a5\u6570\u636e\u5e93\u9ed8\u8ba4\u4e3a\u201cSYSTEM\u201d \uff0c\u8bbf\u95ee\u7aef\u53e3\u53f7\u9ed8\u8ba4\u4e3a\u201c5138\u201d \uff0c\u8bbf\u95ee\u7528\u6237\u540d\u9ed8\u8ba4\u4e3a\u201cGUEST\u201d \uff0c\u7528\u6237\u5bc6\u7801\u9ed8\u8ba4\u4e3a\u201cGUEST\u201d \u3002URL \u9ed8\u8ba4\u8fde\u63a5\u4e32\u4e3a\u201cjdbc:xugu://127.0.0.1:5138/SYSTEM?user=GUEST&password=GUEST&version=110\u201d\u3002\u6570\u636e\u6e90\u5efa\u7acb\u540e\uff0c\u53ef\u901a\u8fc7\u8c03\u7528 XgDataSource \u7c7b\u4e2d\u7684 getConnection() \u548c getConnection(String username,String password) \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u3002","title":"5.1 \u4f7f\u7528\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u6e90\u521b\u5efa\u8fde\u63a5"},{"location":"JDBC7/#52","text":"\u8fde\u63a5\u6c60\u6280\u672f\u7684\u6838\u5fc3\u601d\u60f3\u662f\uff1a\u8fde\u63a5\u590d\u7528\uff0c\u901a\u8fc7\u5efa\u7acb\u4e00\u4e2a\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u4ee5\u53ca\u4e00\u5957\u8fde\u63a5\u4f7f\u7528\u3001\u5206\u914d\u3001\u7ba1\u7406\u7b56\u7565\uff0c\u8be5\u8fde\u63a5\u6c60\u4e2d\u7684\u8fde\u63a5\u53ef\u4ee5\u5f97\u5230\u9ad8\u6548\u3001\u5b89\u5168\u7684\u590d\u7528\uff0c\u907f\u514d\u4e86\u6570\u636e\u5e93\u8fde\u63a5\u9891\u7e41\u5efa\u7acb\u3001\u5173\u95ed\u7684\u5f00\u9500\u3002 \u865a\u8c37 JDBC \u8fde\u63a5\u6c60\u5b9e\u73b0\u7c7b\u5bf9\u865a\u8c37\u6570\u636e\u5e93\u539f\u59cb\u8fde\u63a5\u8fdb\u884c\u4e86\u5c01\u88c5\uff0c\u4ece\u800c\u65b9\u4fbf\u4e86\u6570\u636e\u5e93\u5e94\u7528\u5bf9\u4e8e\u8fde\u63a5\u7684\u4f7f\u7528\uff08\u7279\u522b\u662f\u5bf9\u4e8e\u4e8b\u52a1\u5904\u7406\uff09\uff0c\u63d0\u9ad8\u4e86\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u6548\u7387\uff0c\u4e5f\u6b63\u662f\u56e0\u4e3a\u8fd9\u4e2a\u5c01\u88c5\u5c42\u7684\u5b58\u5728\uff0c\u9694\u79bb\u4e86\u5e94\u7528\u7684\u672c\u8eab\u7684\u5904\u7406\u903b\u8f91\u548c\u5177\u4f53\u6570\u636e\u5e93\u8bbf\u95ee\u903b\u8f91\uff0c\u4f7f\u5e94\u7528\u672c\u8eab\u7684\u590d\u7528\u6210\u4e3a\u53ef\u80fd\u3002\u8fde\u63a5\u6c60\u4e3b\u8981\u7531\u4e09\u90e8\u5206\u7ec4\u6210\uff1a\u8fde\u63a5\u6c60\u7684\u5efa\u7acb\u3001\u8fde\u63a5\u6c60\u4e2d\u8fde\u63a5\u7684\u4f7f\u7528\u7ba1\u7406\u3001\u8fde\u63a5\u6c60\u7684\u5173\u95ed\u3002 \u865a\u8c37 JDBC \u8fde\u63a5\u6c60\u7684\u57fa\u672c\u601d\u60f3\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u5efa\u7acb\u4e00\u4e2a\u201c\u7f13\u51b2\u6c60\u201d\u3002\u9884\u5148\u5728\u201c\u7f13\u51b2\u6c60\u201d\u4e2d\u653e\u5165\u4e00\u5b9a\u6570\u91cf\u7684\u8fde\u63a5\uff0c\u5f53\u9700\u8981\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65f6\uff0c\u53ea\u9700\u4ece\u201c\u7f13\u51b2\u6c60\u201d\u4e2d\u53d6\u51fa\u4e00\u4e2a\uff0c\u4f7f\u7528\u5b8c\u6bd5\u4e4b\u540e\u518d\u653e\u56de\u53bb\u3002\u901a\u8fc7\u8bbe\u5b9a\u8fde\u63a5\u6c60\u6700\u5927\u8fde\u63a5\u6570\u6765\u9632\u6b62\u7cfb\u7edf\u65e0\u5c3d\u7684\u4e0e\u6570\u636e\u5e93\u8fde\u63a5\u3002\u4ea6\u53ef\u901a\u8fc7\u8fde\u63a5\u6c60\u7684\u7ba1\u7406\u673a\u5236\u76d1\u89c6\u6570\u636e\u5e93\u7684\u8fde\u63a5\u6570\u91cf\u3001\u4f7f\u7528\u60c5\u51b5\uff0c\u4e3a\u7cfb\u7edf\u5f00\u53d1\u3001\u6d4b\u8bd5\u53ca\u6027\u80fd\u8c03\u6574\u63d0\u4f9b\u4f9d\u636e\u3002 \u5f53\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u5b8c\u6570\u636e\u5e93\u8fde\u63a5\u8c03\u7528\u8fde\u63a5\u5173\u95ed\u65b9\u6cd5\u65f6\uff0c\u8be5\u8fde\u63a5\u5e76\u672a\u9500\u6bc1\uff0c\u800c\u662f\u88ab\u5f52\u8fd8\u7ed9\u8fde\u63a5\u6c60\u7b49\u5f85\u4e0b\u6b21\u7ee7\u7eed\u8c03\u7528\u3002 {.is-info} \u865a\u8c37 JDBC \u5b9e\u73b0\u8fde\u63a5\u6c60\u670d\u52a1\u6240\u63d0\u4f9b\u7684\u63a5\u53e3\u7c7b\u5982\u4e0b\uff1a - XgDataSource \u5b9e\u73b0 javax.sql.DataSource \u63a5\u53e3\uff1b - XgPooledConnection \u5b9e\u73b0 javax.sql.PooledConnection \u63a5\u53e3\uff1b - XgConnectionPoolDataSource \u5b9e\u73b0 javax.sql.ConnectionPoolDataSource \u63a5\u53e3\uff1b - XgConnectionEventListener \u5b9e\u73b0 javax.sql.ConnectionEventListener \u63a5\u53e3\uff1b - XgConnectionEvent \u7ee7\u627f\u81ea javax.sql.ConnectionEvent \u7c7b\u3002 \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u4e2d\u7684\u8fde\u63a5\u5747\u662f\u901a\u8fc7\u6570\u636e\u6e90\u5efa\u7acb\u7684\uff0c\u6545\u800c XgConnectionPoolDataSource \u7ee7\u627f\u4e86 com.xugu.pool.XgDataSource \u7c7b\u3002\u7528\u6237\u4ea6\u53ef\u901a\u8fc7 XgConnectionPoolDataSource \u5bf9\u8c61\u8bbe\u7f6e\u6570\u636e\u6e90\u5c5e\u6027\u548c\u8fde\u63a5\u6c60\u5c5e\u6027\uff1a //\u6700\u5c0f\u8fde\u63a5\u6570 setMinIdle(int min) //\u6700\u5927\u8fde\u63a5\u6570 setMaxActive(int max) //\u767b\u5f55\u7a7a\u95f2\u65f6\u95f4 setLoginTimeout(int time) //\u6700\u5927\u7b49\u5f85\u8fde\u63a5\u8d85\u65f6 setMaxWaitTime(long waitTime) \u5176\u4e2d\uff1asetLoginTimeout() \u548c setMaxWaitTime() \u65b9\u6cd5\u4e2d\u53c2\u6570\u5355\u4f4d\u4e3a\u6beb\u79d2\uff0c\u5176\u4ed6\u65b9\u6cd5\u4e2d\u53c2\u6570\u5355\u4f4d\u4e3a\u79d2\u3002 \u793a\u4f8b\uff1a\u521b\u5efa\u4e00\u4e2a\u865a\u8c37 JDBC \u8fde\u63a5\u6c60\uff0c\u5e76\u901a\u8fc7\u8fde\u63a5\u6c60\u83b7\u53d6\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u3002 XgConnectionPoolDataSource CPDSource = new XgConnectionPoolDataSource()\u037e CPDSource.setHostName(\u201clocalhost\u201d)\u037e CPDSource.setPort(5138)\u037e CPDSource.setDatabaseName(\u201cxuguNew\u201d)\u037e CPDSource.setUser(\u201cSYSDBA\u201d)\u037e CPDSource.setPassword(\u201cSYSDBA\u201d)\u037e CPDSource.setUrl(\"jdbc:xugu://localhost:5138/xuguNew)\u037e CPDSource.setMaxActive(50)\u037e CPDSource.setMinIdle(5)\u037e CPDSource.setLoginTimeout(3000)\u037e CPDSource.setMaxWaitTime(3000)\u037e XgPooledConnection Pconn = (XgPooledConnection)CPDSource.getPooledConnection()\u037e Connection conn = Pconn.getConnection()\u037e","title":"5.2 \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u6c60"},{"location":"JDBC7/#jdbc_2","text":"\u4f7f\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u5b9e\u73b0\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u4ea4\u4e92\u7684\u4e00\u822c\u4f7f\u7528\u6b65\u9aa4\uff1a\u5bfc\u5165\u865a\u8c37 JDBC \u9a71\u52a8\u5305 \u2192 \u52a0\u8f7d\u865a\u8c37 JDBC \u9a71\u52a8\u7a0b\u5e8f \u2192 \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5 Connection \u2192 \u521b\u5efa\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61 Statement \u2192 \u6267\u884c SQL \u8bed\u53e5 \u2192 \u5904\u7406\u6267\u884c\u7ed3\u679c ResultSet \u2192 \u91ca\u653e\u8d44\u6e90\u3002 - \u7b2c 1 \u6b65\uff1a\u5bfc\u5165\u865a\u8c37 JDBC \u9a71\u52a8\u5305 - \u7b2c 2 \u6b65\uff1a\u6ce8\u518a\u9a71\u52a8 (\u4ec5\u505a\u4e00\u6b21) - \u7b2c 3 \u6b65\uff1a\u5efa\u7acb\u8fde\u63a5 (Connection) - \u7b2c 4 \u6b65\uff1a\u521b\u5efa\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61 (Statement) - \u7b2c 5 \u6b65\uff1a\u6267\u884c SQL \u8bed\u53e5 - \u7b2c 6 \u6b65\uff1a\u5904\u7406\u6267\u884c\u7ed3\u679c (ResultSet) - \u7b2c 7 \u6b65\uff1a\u91ca\u653e\u8d44\u6e90","title":"\u516d. \u865a\u8c37\u6570\u636e\u5e93\u7684JDBC\u4ea4\u4e92\u6d41\u7a0b"},{"location":"JDBC7/#61-jdbc","text":"\u4e0b\u8f7d\u865a\u8c37\u6570\u636e\u5e93\u4e13\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u5305 (cloudjdbc-*.*.*.jar)\uff0c\u5e76\u5bfc\u5165\u5230\u5e94\u7528\u7a0b\u5e8f\u4e2d\u3002","title":"6.1 \u5bfc\u5165\u865a\u8c37JDBC\u9a71\u52a8\u5305"},{"location":"JDBC7/#62-jdbc","text":"\u865a\u8c37 JDBC \u9a71\u52a8\u7a0b\u5e8f\u4e2d Driver \u63a5\u53e3\u5b9e\u73b0\u7c7b\u4e3a com.xugu.cloudjdbc.Driver\u3002\u52a0\u8f7d\u9a71\u52a8\u65b9\u5f0f\u4e3a DriverManager.registerDriver(new com.xugu.cloudjdbc.Driver()) \u6216Class.forName(\u201ccom.xugu.cloudjdbc.Driver\u201d)\u3002","title":"6.2 \u52a0\u8f7d\u865a\u8c37JDBC\u9a71\u52a8"},{"location":"JDBC7/#63","text":"\u5efa\u7acb\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u7684\u65b9\u5f0f\u6709\u591a\u79cd\uff0c\u53ef\u6839\u636e\u5e94\u7528\u7a0b\u5e8f\u5b9e\u9645\u4f7f\u7528\u573a\u666f\u9009\u62e9\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65b9\u5f0f\u3002\u5e38\u89c1\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65b9\u5f0f\u5982\u4e0b\uff1a - \u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u4f7f\u7528 DriverManager \u83b7\u5f97\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\uff1b - \u4f7f\u7528\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u6e90/\u8fde\u63a5\u6c60\u7684\u65b9\u5f0f\u83b7\u53d6\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\uff1b - \u4f7f\u7528\u7b2c\u4e09\u65b9\u901a\u7528\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u65b9\u5f0f\u83b7\u53d6\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u3002 \u5982\uff1adruid\u3001c3p0\u3001dbcp\u3001JNDI \u7b49\u3002","title":"6.3 \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5"},{"location":"JDBC7/#631","text":"\u6253\u5f00\u6570\u636e\u5e93\u8fde\u63a5\u5373\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u5bf9\u8c61 Connection \u7c7b\u3002 \u5982\uff1aDriverManager \u901a\u8fc7 getConnection() \u65b9\u6cd5\u83b7\u53d6 Connection \u7c7b\u5bf9\u8c61\u3002DriverManager \u7684 getConnection() \u65b9\u6cd5\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\u7684\u65b9\u5f0f\u4ea6\u6709\u591a\u79cd\u3002\u4ee5\u4e0b\u4e3a\u5e38\u89c1\u65b9\u5f0f\uff1a - getConnection(String url) \u53c2\u6570\u8bf4\u660e\uff1a - url\uff1a\u8bbf\u95ee\u6570\u636e\u5e93\u7684 URL \u8def\u5f84\u3002 \u793a\u4f8b\uff1a \u4e0b\u9762\u7684\u4ee3\u7801\u5229\u7528 getConnection \u65b9\u6cd5\u521b\u5efa\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u3002 ``` public Connection getConnection(){ Connection con=null\u037e try{ //\u6ce8\u518c\u6570\u636e\u5e93\u9a71\u52a8 Class.forName(\"com.xugu.cloudjdbc.Driver\")\u037e //\u5b9a\u4e49\u8fde\u63a5\u6570\u636e\u5e93\u7684url String url = \"jdbc:xugu://localhost:5138/db?user=user1\uff06password=pwd\"\u037e //\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5 con = DriverManager.getConnection(url)\u037e System.out.println(\"\u6570\u636e\u5e93\u8fde\u63a5\u6210\u529f\uff01\")\u037e }catch(Exception e){ e.printStackTrace()\u037e } //\u8fd4\u56de\u4e00\u4e2a\u8fde\u63a5 return con\u037e } ``` getConnection(String url,String user,String password) \u53c2\u6570\u8bf4\u660e\uff1a url\uff1a\u8bbf\u95ee\u6570\u636e\u5e93\u7684 URL \u8def\u5f84\u3002 user\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u7528\u6237\u540d\u3002 password\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u7528\u6237\u5bc6\u7801\u3002 \u793a\u4f8b\uff1a \u4e0b\u9762\u7684\u4ee3\u7801\u5229\u7528 getConnection \u65b9\u6cd5\u521b\u5efa\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u3002 private Connection con; private String user = \"user1\"; //\u5b9a\u4e49\u8fde\u63a5\u6570\u636e\u5e93\u7684\u7528\u6237\u540d private String password = \"pwd\"; //\u5b9a\u4e49\u8fde\u63a5\u6570\u636e\u5e93\u7684\u5bc6\u7801 private String className = \"com.xugu.cloudjdbc.Driver\";//\u5b9a\u4e49\u865a\u8c37JDBC\u9a71\u52a8 private String url = \"jdbc:xugu://localhost:5138/db\"; /\\*\\*\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\\*/ public Connection getConnection(){ try{ Class.forName(className);//\u52a0\u8f7d\u6570\u636e\u5e93\u9a71\u52a8 System.out.println(\"\u6570\u636e\u5e93\u9a71\u52a8\u52a0\u8f7d\u6210\u529f\uff01\"); con = DriverManager.getConnection(url,user,password); //\u8fde\u63a5\u6570\u636e\u5e93 System.out.println(\"\u6210\u529f\u5730\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\uff01\"); }catch(Exception e){ System.out.println(\"\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\u5931\u8d25\uff01\"); con = null; e.printStackTrace(); } finally { If(conn != null){ //\u91ca\u653e\u8fde\u63a5\u8d44\u6e90 conn.close(); } } return con; } getConnection(String url,Properties info) \u53c2\u6570\u8bf4\u660e\uff1a url\uff1a\u8bbf\u95ee\u6570\u636e\u5e93\u7684 URL \u8def\u5f84\u3002 info\uff1a\u4e00\u4e2a\u6301\u4e45\u7684\u5c5e\u6027\u96c6\u5bf9\u8c61\uff0c\u5305\u62ec user \u548c password \u7b49\u5c5e\u6027\u3002 \u793a\u4f8b\uff1a \u4e0b\u9762\u7684\u4ee3\u7801\u5229\u7528 getConnection \u65b9\u6cd5\u521b\u5efa\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u3002 public Connection getConnection(){ Connection con = null; //\u5b9a\u4e49\u6570\u636e\u5e93\u8fde\u63a5\u5bf9\u8c61 Properties info = new Properties(); //\u5b9a\u4e49Properties\u5bf9\u8c61 info.setProperty(\"user\",\"user1\"); //\u8bbe\u7f6eProperties\u5bf9\u8c61\u5c5e\u6027 info.setProperty(\"password\",\"pwd\"); try{ //\u6ce8\u518c\u6570\u636e\u5e93\u9a71\u52a8 Class.forName(\"com.xugu.cloudjdbc.Driver\"); //test\u4e3a\u6570\u636e\u5e93\u540d\u79f0 String url = \"jdbc:xugu://localhost:5138/db\"; //\u83b7\u53d6\u8fde\u63a5\u6570\u636e\u5e93\u7684Connection\u5bf9\u8c61 con = DriverManager.getConnection(url,info); System.out.println(\"\u6570\u636e\u5e93\u8fde\u63a5\u6210\u529f\uff01\"); }catch(Exception e){ e.printStackTrace(); } //\u8fd4\u56de\u4e00\u4e2a\u8fde\u63a5 return con; }","title":"6.3.1 \u6253\u5f00\u6570\u636e\u5e93\u8fde\u63a5"},{"location":"JDBC7/#632","text":"\u6570\u636e\u5e93\u4e8b\u52a1 (transaction) \u662f\u8bbf\u95ee\u5e76\u53ef\u80fd\u64cd\u4f5c\u5404\u79cd\u6570\u636e\u9879\u7684\u4e00\u4e2a\u6570\u636e\u5e93\u64cd\u4f5c\u5e8f\u5217\uff0c\u8fd9\u4e9b\u64cd\u4f5c\u8981\u4e48\u5168\u90e8\u6267\u884c, \u8981\u4e48\u5168\u90e8\u4e0d\u6267\u884c\uff0c\u662f\u4e00\u4e2a\u4e0d\u53ef\u5206\u5272\u7684\u5de5\u4f5c\u5355\u4f4d\u3002\u4e8b\u52a1\u7531\u4e8b\u52a1\u5f00\u59cb\u5230\u4e8b\u52a1\u7ed3\u675f\u4e4b\u95f4\u6267\u884c\u7684\u5168\u90e8\u6570\u636e\u5e93\u64cd\u4f5c\u7ec4\u6210\u3002 \u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\uff0c\u5373\u5f53\u4e00\u6761 SQL \u8bed\u53e5\u6267\u884c\u5b8c\u6210\u540e\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u5c06\u81ea\u52a8\u63d0\u4ea4\u8be5\u8bed\u53e5\u6240\u5728\u4e8b\u52a1\u3002\u5728\u865a\u8c37 JDBC \u9a71\u52a8\u4e2d\u63a7\u5236\u4e8b\u52a1\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a - \u901a\u8fc7\u6570\u636e\u5e93\u8fde\u63a5 URL \u4e32\u7684 auto_commit \u5c5e\u6027\uff0c\u63a7\u5236\u4e8b\u52a1\u7684\u5f00\u542f\u4e0e\u5173\u95ed\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b auto_commit \u5c5e\u6027\u4e3a on\uff0c\u5373\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u3002 - \u901a\u8fc7 Connection \u7c7b\u7684 setAutoCommit(boolean commit) \u65b9\u6cd5\u63a7\u5236\u4e8b\u52a1\u7684\u5f00\u542f\u4e0e\u5173\u95ed\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b commit \u5c5e\u6027\u4e3a TRUE\uff0c\u5373\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u3002 \u5728\u7981\u7528\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u4e0b\uff0c\u4f7f\u7528 Connection \u7c7b\u7684 commit() \u65b9\u6cd5\u63d0\u4ea4 SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u505a\u7684\u66f4\u6539\uff0c\u800c Connection \u7c7b\u7684 rollback() \u65b9\u6cd5\u5c06\u56de\u6eda SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u7684\u66f4\u6539\uff0c\u4e0a\u8ff0\u4e24\u79cd\u65b9\u6cd5\u6267\u884c\u5b8c\u6210\u540e\u5747\u5c06\u91ca\u653e\u4e8b\u52a1\u6301\u6709\u7684\u5168\u90e8\u9501\u8d44\u6e90\u3002 \u4e8b\u52a1\u4ec5\u5bf9\u6570\u636e\u5e93 DML \u64cd\u4f5c\u6709\u6548\u3002 {.is-info} \u4ee5\u4e0b\u4e3a\u4f7f\u7528 setAutoCommit() \u65b9\u6cd5\u63a7\u5236\u4e8b\u52a1\u63d0\u4ea4\u7684\u793a\u4f8b\u4ee3\u7801\uff1a //\u8bbe\u7f6e\u4e8b\u52a1\u4e3a\u975e\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f conn.setAutoCommit(false)\u037e //\u521b\u5efa\u6570\u636e\u5e93Statement\u5bf9\u8c61 Statement stm = conn.createStatement()\u037e //\u6570\u636e\u5e93\u4e8b\u52a1\u6267\u884cSQL\u8bed\u53e5 String sql = \"insert into test (comp_id,comp_name) values(1,'comp')\"\u037e //\u6267\u884c\u9759\u6001SQL\u8bed\u53e5 stm.execute(sql)\u037e //\u6570\u636e\u5e93\u9884\u5904\u7406SQL\u8bed\u53e5 PreparedStatement pstm = conn. prepareStatement(\u201cupdate test set id=? where comp_name=?\u201d) //\u9884\u5904\u7406SQL\u8bed\u53e5\u7b2c\u4e00\u4e2a\u53c2\u6570\u8d4b\u503c pstm.setInt(1,15)\u037e //\u9884\u5904\u7406SQL\u8bed\u53e5\u7b2c\u4e8c\u4e2a\u53c2\u6570\u8d4b\u503c pstm.setString(2,'DBMS')\u037e //\u6267\u884c\u9884\u5904\u7406SQL\u8bed\u53e5 pstm.execute()\u037e //\u63d0\u4ea4\u4e8b\u52a1 conn.commit()\u037e //\u5220\u9664\u8868\u4e2d\u6307\u5b9a\u884c\u6570\u636e stm.execute(\u201cdelete from test where id=15\u201d)\u037e //\u4e8b\u52a1\u56de\u6eda\u65b9\u6cd5 conn.rollback()\u037e \u4e0a\u9762\u4ee3\u7801\u4e2d\u6267\u884c\u63d0\u4ea4\u4e8b\u52a1\u64cd\u4f5c\uff0c\u6267\u884c\u9759\u6001 SQL \u8bed\u53e5\u4e0e\u6267\u884c\u9884\u5904\u7406 SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u7684\u66f4\u6539\u5c06\u6c38\u4e45\u751f\u6548\uff1b\u800c\u540e\u6267\u884c\u7684\u5220\u9664\u8868\u4e2d\u6307\u5b9a\u884c\u6570\u636e\u64cd\u4f5c\uff0c\u56e0\u5176\u540e\u8c03\u7528\u7684 rollback() \u65b9\u6cd5\uff0cdelete \u547d\u4ee4\u5bf9\u6570\u636e\u5e93\u7684\u6570\u636e\u66f4\u6539\u5c06\u88ab\u56de\u6eda\u6389\uff0c\u6545\u800c\u5bf9\u6570\u636e\u5e93\u7684\u5220\u9664\u64cd\u4f5c\u4e0d\u4f1a\u751f\u6548\u3002","title":"6.3.2 \u8fde\u63a5\u4e8b\u52a1\u7ba1\u7406"},{"location":"JDBC7/#633-savepoint","text":"JDBC \u89c4\u8303 3.0 \u4e2d\u4e3a\u4e86\u589e\u52a0\u5bf9\u4e8b\u52a1\u7684\u63a7\u5236\uff0c\u65b0\u589e Savepoint \u63a5\u53e3\uff0c\u5176\u4ee3\u8868\u4e8b\u52a1\u4e2d\u7684\u4e00\u4e2a\u903b\u8f91\u4e8b\u52a1\u70b9\u3002\u5728\u975e\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u4e0b\uff0c\u4e00\u4e2a\u4e8b\u52a1\u4e2d\u53ef\u4ee5\u8bbe\u7f6e\u591a\u4e2a Savepoint\uff0c\u5728\u4ee3\u7801\u4e2d\u8fdb\u884c\u4e8b\u52a1\u56de\u6eda\u64cd\u4f5c\u65f6\uff0c\u53ef\u4ee5\u6307\u5b9a\u4e8b\u52a1\u56de\u6eda\u5230\u6307\u5b9a Savepoint \u4f4d\u7f6e\uff0c\u6307\u5b9a\u56de\u6eda\u4f4d\u7f6e\u524d\u7684\u4e8b\u52a1\u64cd\u4f5c\u4ecd\u7136\u4fdd\u7559\u3002\u6b64\u63a5\u53e3\u5927\u5927\u63d0\u9ad8\u4e86\u4e8b\u52a1\u5904\u7406\u7684\u7c92\u5ea6\uff0c\u65b9\u4fbf\u5e94\u7528\u7a0b\u5e8f\u63a7\u5236\u4e8b\u52a1\u5904\u7406\u903b\u8f91\u3002 \u793a\u4f8b\uff1a\u8fde\u63a5\u4e8b\u52a1\u63a7\u5236\u63a5\u53e3 Savepoint \u4f7f\u7528 //\u8bbe\u7f6e\u975e\u81ea\u52a8\u63d0\u4ea4 conn.setAutoCommit(false); //\u521b\u5efaStatement\u5bf9\u8c61 Statement stm = conn.createStatement(); //\u6267\u884cSQL\u547d\u4ee4 stm.execute(sql1); stm.execute(sql2); //\u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\u70b9save1 java.sql.Savepoint save1 =conn.setSavepoint(\"save_1\"); stm.execute(sql3); //\u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\u70b9save2 java.sql.Savepoint save2 =conn.setSavepoint(\"save_2\"); stm.execute(sql4); //\u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\u70b9save3 java.sql.Savepoint save3 =conn.setSavepoint(\"save_3\"); stm.execute(sql5); //\u56de\u6eda\u4e8b\u52a1\u5230\u56de\u6eda\u70b9save3 conn.rollback(save3); conn.commit(); \u4ee5\u4e0a\u4ee3\u7801\u6bb5\u4e2d\uff0c\u4e8b\u52a1\u6267\u884c\u8bed\u53e5 sql5 \u5c06\u88ab\u56de\u6eda\u6389\u3002","title":"6.3.3 \u8fde\u63a5\u4e8b\u52a1\u63a7\u5236\uff0cSavepoint\u63a5\u53e3"},{"location":"JDBC7/#64-sql","text":"\u5728\u6570\u636e\u5e93\u6807\u51c6\u4e2d\uff0c\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61\u5206\u4e3a\u4e09\u7c7b\uff1a\u6267\u884c\u9759\u6001 SQL \u8bed\u53e5\u7684 Statement \u5bf9\u8c61\u3001\u6267\u884c\u9884\u7f16\u8bd1 SQL \u8bed\u53e5\u7684 PreparedStatement \u5bf9\u8c61\u4ee5\u53ca\u6267\u884c\u6570\u636e\u5e93\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\u7684 CallableStatement \u5bf9\u8c61\u3002","title":"6.4 \u521b\u5efa\u6267\u884cSQL\u8bed\u53e5\u5bf9\u8c61"},{"location":"JDBC7/#641-sqlstatement","text":"Statement \u5bf9\u8c61\u7528\u4e8e\u6267\u884c\u9759\u6001 SQL \u8bed\u53e5\u548c\u83b7\u5f97 SQL \u4ea7\u751f\u7684\u7ed3\u679c\u3002\u5728\u865a\u8c37 JDBC \u9a71\u52a8\u4e2d\uff0c\u865a\u8c37\u6570\u636e\u5e93 DDL \u64cd\u4f5c\u5747\u901a\u8fc7 Statement \u5bf9\u8c61\u6765\u6267\u884c\u3002 Statement \u5bf9\u8c61\u901a\u8fc7 Connection \u7c7b\u7684 createStatement() \u65b9\u6cd5\u521b\u5efa\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a //\u521b\u5efa\u6267\u884cSQL\u8bed\u53e5\u5bf9\u8c61Statement Statement stm = conn.createStatement()\u037e","title":"6.4.1 \u6267\u884cSQL\u5bf9\u8c61Statement"},{"location":"JDBC7/#642-sqlpreparedstatement","text":"PreparedStatement \u5bf9\u8c61\u4f7f\u7528\u65f6\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u5bf9\u6267\u884c SQL \u8bed\u53e5\u8fdb\u884c\u9884\u7f16\u8bd1\u5904\u7406\uff0c\u9884\u7f16\u8bd1 SQL \u8bed\u53e5\u5c06\u5728\u672a\u6765\u7684\u4f7f\u7528\u4e2d\u88ab\u91cd\u7528\u3002\u4e0e Statement \u5bf9\u8c61\u76f8\u6bd4\uff0cPreparedStatement \u5bf9\u8c61\u64cd\u4f5c\u591a\u6761 SQL \u8bed\u53e5\u7684\u6548\u7387\u66f4\u9ad8\u3002 \u7ecf\u8fc7\u9884\u7f16\u8bd1\u5e76\u5b58\u50a8\u5728 PreparedStatement \u5bf9\u8c61\u4e2d\u7684 SQL \u8bed\u53e5\uff0c\u901a\u8fc7 Connection \u7c7b\u7684 prepareStatement() \u65b9\u6cd5\u521b\u5efa\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a //\u521b\u5efa\u6267\u884c\u9884\u7f16\u8bd1SQL\u8bed\u53e5\u5bf9\u8c61PreparedStatement PreparedStatement preStatement = conn.prepareStatement(\u201c\u9884\u7f16\u8bd1SQL\u8bed\u53e5\u201d); \u9884\u5904\u7406 PreparedStatement \u5bf9\u8c61\u76f8\u5bf9\u4e8e\u9759\u6001 Statement \u5bf9\u8c61\u7684\u4f18\u52bf\uff1a - PreparedStatement \u53ef\u4ee5\u52a8\u6001\u4f20\u5165\u53c2\u6570\u503c\uff1b - PreparedStatement \u6bd4 Statement \u66f4\u5feb\uff1b PreparedStatement \u4f1a\u5c06 SQL \u8bed\u53e5\u9884\u7f16\u8bd1\u5728\u6570\u636e\u5e93\u7cfb\u7edf\u4e2d\uff0c\u6267\u884c\u8ba1\u5212\u540c\u6837\u4f1a\u88ab\u7f13\u5b58\u8d77\u6765\uff0c\u5b83\u5141\u8bb8\u6570\u636e\u5e93\u505a\u53c2\u6570\u5316\u67e5\u8be2\u3002\u4f7f\u7528\u9884\u5904\u7406\u8bed\u53e5\u6bd4\u666e\u901a\u7684 Statement \u67e5\u8be2\u66f4\u5feb\uff0c\u56e0\u505a\u7684\u5de5\u4f5c\u66f4\u5c11 (\u6570\u636e\u5e93\u5bf9 SQL \u8bed\u53e5\u7684\u5206\u6790\u3001\u7f16\u8bd1\u3001\u4f18\u5316\u5df2\u7ecf\u5728\u7b2c\u4e00\u6b21\u67e5\u8be2\u524d\u5b8c\u6210\u4e86)\u037e - PreparedStatement \u53ef\u4ee5\u9632\u6b62 SQL \u6ce8\u5165\u5f0f\u653b\u51fb\u3002 PreparedStatement \u5728\u4f7f\u7528\u53c2\u6570\u5316\u67e5\u8be2\u7684\u60c5\u51b5\u4e0b\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u4e0d\u4f1a\u5c06\u53c2\u6570\u7684\u5185\u5bb9\u89c6\u4e3a SQL \u6307\u4ee4\u7684\u4e00\u90e8\u5206\u6765\u5904\u7406\uff0c\u800c\u662f\u5728\u6570\u636e\u5e93\u5b8c\u6210 SQL \u6307\u4ee4\u7684\u7f16\u8bd1\u540e\uff0c\u624d\u5957\u7528\u53c2\u6570\u8fd0\u884c\uff0c\u56e0\u6b64\u5c31\u7b97\u53c2\u6570\u4e2d\u542b\u6709\u7834\u574f\u6027\u7684\u6307\u4ee4\uff0c\u4e5f\u4e0d\u4f1a\u88ab\u6570\u636e\u5e93\u6240\u8fd0\u884c\u3002","title":"6.4.2 \u6267\u884cSQL\u5bf9\u8c61PreparedStatement"},{"location":"JDBC7/#643-callablestatement","text":"CallableStatement \u5bf9\u8c61\u5b9e\u73b0\u4e86\u4ece Java \u5e94\u7528\u7a0b\u5e8f\u4e2d\u8c03\u7528\u6570\u636e\u5e93\u5b58\u50a8\u8fc7\u7a0b\u3002\u4f46\u6b64\u8c03\u7528\u8fc7\u7a0b\u5e76\u4e0d\u5305\u542b\u5b58\u50a8\u8fc7\u7a0b\u672c\u8eab\uff0c\u56e0\u5b58\u50a8\u8fc7\u7a0b\u5b58\u50a8\u5728\u6570\u636e\u5e93\u4e2d\u3002 CallableStatement \u5bf9\u8c61\u4e3a\u6240\u6709\u7684\u6570\u636e\u5e93\u63d0\u4f9b\u4e86\u4e00\u79cd\u4ee5\u6807\u51c6\u5f62\u5f0f\u8c03\u7528\u5b58\u50a8\u8fc7\u7a0b\u7684\u65b9\u6cd5\uff0c\u901a\u8fc7 Connection \u7c7b\u7684 prepareCall() \u65b9\u6cd5\u521b\u5efa\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a //\u521b\u5efa\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u5bf9\u8c61CallableStatement CallableStatement cstmt= conn.prepareCall(\u201c{call \u5b58\u50a8\u8fc7\u7a0b\u540d(\u53c2\u6570\u8868\u5217)}\u201d);","title":"6.4.3 \u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u5bf9\u8c61CallableStatement"},{"location":"JDBC7/#644-sql","text":"\u5728\u521b\u5efa\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61\u65f6\uff0c\u53ef\u901a\u8fc7\u6784\u9020\u65b9\u6cd5\u7684\u4e0d\u540c\u53c2\u6570\u8bbe\u7f6e ResultSet \u5bf9\u8c61\u5c5e\u6027\uff0c\u5c5e\u6027\u5305\u62ec\u7ed3\u679c\u7c7b\u578b ResultSetType\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b ResultSetConcurrency\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b ResultSetHoldability\u3002 ResultSetType \u9ed8\u8ba4\u4e3a ResultSet.TYPE_SCROLL_INSENSITIVE\uff1a\u652f\u6301\u7ed3\u679c\u96c6 backforward\u3001last\u3001first \u7b49\u64cd\u4f5c\uff0c\u5bf9\u6570\u636e\u5e93\u4e2d\u5176\u5b83 session \u8fdb\u884c\u7684\u6570\u636e\u66f4\u6539\u4e0d\u654f\u611f\uff1b ResultSetConcurrency \u9ed8\u8ba4\u4e3a ResultSet.CONCUR_READ_ONLY: \u4e0d\u53ef\u66f4\u65b0\u7ed3\u679c\u96c6\uff1b\u8be5\u5c5e\u6027\u4ea6\u53ef\u66f4\u6539\u4e3a ResultSet.CONCUR_UPDATABLE\uff0c\u652f\u6301\u5728 ResultSet \u4e2d\u5bf9\u8bb0\u5f55\u8fdb\u884c\u4fee\u6539\uff0c\u4fee\u6539\u540e\u8bb0\u5f55\u66f4\u65b0\u5230\u6570\u636e\u5e93\uff0c\u4fee\u6539\u64cd\u4f5c\u53ef\u5305\u542b\u63d2\u5165\u3001\u5220\u9664\u6216\u66f4\u65b0\uff1b ResultSetHoldability \u9ed8\u8ba4\u4e3a ResultSet.HOLD_CURSORS_OVER_COMMIT: \u5728\u4e8b\u52a1 commit \u6216 rollback \u540e\uff0cResultSet \u4ecd\u7136\u53ef\u7528\u3002 Connection \u7c7b\u521b\u5efa Statement \u5bf9\u8c61\u6784\u9020\u65b9\u6cd5\uff1a //Statement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 createStatement(int resultSetType,int resultSetConcurrency)\uff1b //Statement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 createStatement(int resultSetType,int resultSetConcurrency, int resultSetHoldability)\uff1b Connection \u7c7b\u521b\u5efa PreparedStatement \u5bf9\u8c61\u6784\u9020\u65b9\u6cd5\uff1a //PreparedStatement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareStatement(String sql, int resultSetType,int resultSetConcurrency) //PrepareStatment\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareStatement(String sql, int resultSetType,int resultSetConcurrency, int resultSetHoldability) Connection \u7c7b\u521b\u5efa CallableStatement \u5bf9\u8c61\u6784\u9020\u65b9\u6cd5\uff1a //CallableStatement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareCall(String sql, int resultSetType,int resultSetConcurrency) //CallableStatement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareCall(String sql, int resultSetType,int resultSetConcurrency, int resultSetHoldability)","title":"6.4.4 \u6267\u884cSQL\u8bed\u53e5\u5bf9\u8c61\u5c5e\u6027\u6269\u5145"},{"location":"JDBC7/#65-sql","text":"Statement \u5bf9\u8c61\u5b9a\u4e49\u4e86\u591a\u79cd\u6267\u884c SQL \u8bed\u53e5\u7684\u65b9\u6cd5\uff0c\u7528\u6765\u5904\u7406\u8fd4\u56de\u4e0d\u540c\u7ed3\u679c\u7684 SQL \u547d\u4ee4\uff1a - execute(String sql)\uff1a\u6267\u884c\u53ef\u4ee5\u8fd4\u56de\u591a\u4e2a\u7ed3\u679c\u96c6\u7684 SQL \u8bed\u53e5\u8fd4\u56de\u7c7b\u578b\u4e3a boolean\uff0c\u5982\u679c\u8fd4\u56de\u7684\u662f\u66f4\u65b0\u7684\u6570\u76ee\uff0c\u5219\u8fd4\u56de false\uff1b\u5982\u679c\u8fd4\u56de\u7684\u662f ResultSet \u5bf9\u8c61\uff0c\u5219\u8fd4\u56detrue\u3002 - executeQuery(String sql)\uff1a\u6267\u884c\u8fd4\u56de\u5355\u4e2a ResultSet \u7684 SQL \u8bed\u53e5\u8fd4\u56de\u7c7b\u578b\u4e3a ResultSet \u5bf9\u8c61\u3002 - executeUpdate()\uff1a\u6267\u884c SQL INSERT\u3001UPDATE \u6216 DELETE \u8bed\u53e5\u8fd4\u56de\u503c\u4e3a int \u578b\uff0c\u6570\u636e\u5e93\u53d7\u5f71\u54cd\u7684\u884c\u8ba1\u6570\u3002 - \u6279\u5904\u7406\u65b9\u6cd5\uff1a\u6279\u91cf\u6267\u884c SQL \u8bed\u53e5 clearBatch()\uff1a\u6e05\u7a7a\u5386\u53f2 batch \u547d\u4ee4\uff1b addBatch(String sql)\uff1a\u6dfb\u52a0\u8981\u6267\u884c\u7684 sql\uff1b executeBatch()\uff1a\u6279\u91cf\u6267\u884c sql\u3002 PreparedStatement \u7ee7\u627f\u81ea Statement\uff0c\u5b9a\u4e49\u4e86\u5927\u91cf\u7684 setter \u65b9\u6cd5\u7528\u4e8e\u8bbe\u7f6e\u52a8\u6001 sql\u7684\u53c2\u6570\uff0c\u56e0\u6b64 PreparedStatement \u652f\u6301\u52a8\u6001\u4f20\u53c2\uff1b\u53e6\u5916 PreparedStatement \u5185\u90e8\u5b58\u50a8\u4e86\u89e3\u6790\u7684 sql\uff0c\u53ef\u4ee5\u591a\u6b21\u6267\u884c\u800c\u65e0\u9700\u91cd\u590d\u89e3\u6790\u3002PreparedStatement \u7ee7\u627f\u81ea Statement\uff0cCallableStatement \u7ee7\u627f\u81ea PreparedStatement\uff0c\u6545\u800c\u4e09\u8005\u6267\u884c SQL \u8bed\u53e5\u7684\u65b9\u5f0f\u53ef\u901a\u7528\u3002","title":"6.5 \u6267\u884cSQL\u8bed\u53e5"},{"location":"JDBC7/#651-statement","text":"\u901a\u8fc7 Statement \u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c\u9700\u8981\u6ce8\u610f\u7684\u4e8b\u9879\uff1a - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u524d\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u8bbe\u7f6e\u4e3a FALSE\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\uff0c\u5e76\u8fdb\u884c\u624b\u52a8\u63d0\u4ea4\uff08commit\uff09\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u540e\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u6062\u590d\u4e3a TRUE\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u5f02\u5e38\u53d1\u751f\u65f6\uff0c\u8fdb\u884c rollback(\u56de\u6eda)\u3002 \u793a\u4f8b\uff1a\u901a\u8fc7 Statement \u6279\u91cf\u64cd\u4f5c\u6570\u636e try { //\u521b\u5efaStatement\u5bf9\u8c61 stm = con.createStatement(); //\u8bbe\u7f6e\u4e8b\u52a1\u975e\u81ea\u52a8\u63d0\u4ea4 con.setAutoCommit(false); // \u6dfb\u52a0\u591a\u6761SQL\u8bed\u53e5\u5230\u6279\u5904\u7406\u4e2d stm.addBatch(\"insert into student values(23,'tangbao','\u9ad8\u6570',100)\"); stm.addBatch(\"insert into student values(24,'\u738b\u5b9a','c#',98)\"); stm.addBatch(\"insert into student values(25,'\u738b\u56fd\u4e91','java',90)\"); //\u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c stm.executeBatch(); System.out.println(\"\u63d2\u5165\u6210\u529f!\"); //\u6267\u884c\u6210\u529f\u540e\u8fdb\u884c\u6570\u636e\u63d0\u4ea4 con.commit(); System.out.println(\"\u63d0\u4ea4\u6210\u529f!\"); //\u5173\u95ed\u975e\u81ea\u52a8\u63d0\u4ea4 con.setAutoCommit(true); } catch (SQLException e) { if (!con.isClosed()) { con.rollback(); //\u51fa\u73b0\u5f02\u5e38\uff0c\u56de\u6eda\u4e8b\u52a1 System.out.println(\"\u63d0\u4ea4\u5931\u8d25\uff0c\u56de\u6eda\uff01\"); con.setAutoCommit(true); //\u5173\u95ed\u975e\u81ea\u52a8\u63d0\u4ea4 } } finally { if (stmt != null) { //\u5173\u95ed\u64cd\u4f5c\u5bf9\u8c61 stmt.close(); } }","title":"6.5.1 \u901a\u8fc7Statement\u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c"},{"location":"JDBC7/#652-preparedstatement","text":"\u901a\u8fc7 PreparedStatement \u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c\u9700\u8981\u6ce8\u610f\u7684\u4e8b\u9879\uff1a - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u524d\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u8bbe\u7f6e\u4e3a FALSE\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\uff0c\u5e76\u8fdb\u884c\u624b\u52a8\u63d0\u4ea4\uff08commit\uff09\uff0c\u6570\u636e\u91cf\u5927\u65f6\uff0c\u8bbe\u7f6e\u624b\u52a8\u63d0\u4ea4\u95f4\u9694\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u540e\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u6062\u590d\u4e3a TRUE\uff1b \u2022 \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u5f02\u5e38\u53d1\u751f\u65f6\uff0c\u8fdb\u884c rollback(\u56de\u6eda)\uff1b - PreparedStatement \u6267\u884c\u8bed\u53e5\u4e0d\u80fd\u4e3a DDL \u8bed\u53e5\u3002 \u793a\u4f8b\uff1a\u5c06 10000 \u6761\u8bb0\u5f55\u63d2\u5165\u6570\u636e\u5e93\u4e2d\uff0c\u6bcf 100 \u6761\u6267\u884c\u4e00\u6b21\u63d0\u4ea4\u64cd\u4f5c try{ conn.setAutoCommit(false); //\u8bbe\u7f6e\u975e\u81ea\u52a8\u63d0\u4ea4 //\u521b\u5efaPreparedStatement\u5bf9\u8c61 ps = conn.prepareStatement(\"insert into testtab values (?, ?, ?)\"); //\u5faa\u73af\u6dfb\u52a0\u6279\u5904\u7406\u6570\u636e for(int i = 0;i<list.size();i++){ HashMap map = list.get(i);//list\u4e3a\u6570\u636e\u5c01\u88c5\uff0c\u6b64\u5904\u7565 ps.setString(1, map.get(\"id\").toString()); ps.setString(2, map.get(\"name\").toString()); ps.setString(3, map.get(\"age\").toString()); ps.addBatch(); if(mod(i,100)==0){//\u6bcf100\u6761\u6267\u884c\u4e00\u6b21\u6267\u884c\u64cd\u4f5c ps.executeBatch();//\u6267\u884c\u6279\u91cf\u63d2\u5165 conn.commit();//\u6267\u884c\u4e8b\u52a1\u63d0\u4ea4 } } ps.executeBatch();//\u6267\u884c\u6279\u91cf\u63d2\u5165 conn.commit(); //\u63d0\u4ea4\u4e8b\u52a1 }catch(Exception e){ if (!conn.isClosed()) { conn.rollback(); //\u51fa\u73b0\u5f02\u5e38\uff0c\u56de\u6eda\u4e8b\u52a1 System.out.println(\"\u63d0\u4ea4\u5931\u8d25\uff0c\u56de\u6eda\uff01\"); conn.setAutoCommit(true); //\u5173\u95ed\u975e\u81ea\u52a8\u63d0\u4ea4 } } finally { if (ps!= null) { ps.close();//\u5173\u95ed\u64cd\u4f5c\u5bf9\u8c61 } }","title":"6.5.2 \u901a\u8fc7PreparedStatement\u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c"},{"location":"JDBC7/#653-callablestatement","text":"CallableStatement \u5b58\u5728\u4e09\u79cd\u7c7b\u578b\u7684\u53c2\u6570 IN\u3001OUT \u548c INOUT\u3002 - IN\uff1a\u521b\u5efa SQL \u8bed\u53e5\u65f6\u5176\u53c2\u6570\u503c\u672a\u77e5\u3002\u4f7f\u7528 setXXX() \u65b9\u6cd5\u5c06\u503c\u7ed1\u5b9a\u5230 IN \u53c2\u6570\u3002 - OUT\uff1a\u7531 SQL \u8bed\u53e5\u8fd4\u56de\u7684\u53c2\u6570\u503c\u3002\u53ef\u4ee5\u4f7f\u7528 getXXX() \u65b9\u6cd5\u4ece OUT \u53c2\u6570\u4e2d\u68c0\u7d22\u503c\u3002 - INOUT\uff1a\u63d0\u4f9b\u8f93\u5165\u548c\u8f93\u51fa\u503c\u7684\u53c2\u6570\u3002\u4f7f\u7528 setXXX() \u65b9\u6cd5\u7ed1\u5b9a\u53d8\u91cf\u5e76\u4f7f\u7528getXXX() \u65b9\u6cd5\u68c0\u7d22\u503c\u3002 \u793a\u4f8b 1\uff1a\u901a\u8fc7\u53c2\u6570\u4e0b\u6807\u7ed1\u5b9a\u53c2\u6570 //\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\u8bed\u53e5 String sql =\"{call pro_2(?,?,?)}\"; //\u521b\u5efaCallableStatement\u5bf9\u8c61 CallableStatement cstm = conn.prepareCall(sql); //\u901a\u8fc7\u53c2\u6570\u4e0b\u6807\u8bbe\u7f6e\u53c2\u6570(IN\u53c2\u6570) cstm.setInt(1, 20490); //\u6ce8\u518cOUT\u53c2\u6570\u6570\u636e\u7c7b\u578b cstm.registerOutParameter(2, com.xugu.cloudjdbc.Types.VARCHAR); cstm.registerOutParameter(3, com.xugu.cloudjdbc.Types.VARCHAR); //\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528 cstm.execute(); //\u83b7\u53d6\u5b58\u50a8\u8fc7\u7a0b\u8f93\u51fa\u53c2\u6570 String name = (String)cstm.getObject(2); String address = (String)cstm.getObject(3); \u793a\u4f8b 2\uff1a\u901a\u8fc7\u53c2\u6570\u540d\u7ed1\u5b9a\u53c2\u6570 //\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\u8bed\u53e5 CallableStatement pstm = conn.prepareCall(\"insert into tt1 values(:id,:name)\"); //\u901a\u8fc7\u53c2\u6570\u540d\u8bbe\u7f6e\u53c2\u6570(IN\u53c2\u6570) pstm.setInt(\"id\", 1); pstm.setString(\"name\", \"cloud\"); //\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528 pstm.execute();","title":"6.5.3 CallableStatement\u7ed1\u5b9a\u53c2\u6570"},{"location":"JDBC7/#66","text":"ResultSet \u7c7b\u662f\u901a\u8fc7 Statement \u53ca\u5176\u5b50\u7c7b\u6267\u884c SQL \u67e5\u8be2\u8bed\u53e5\u5f97\u5230\u7684\u7ed3\u679c\u96c6\u3002ResultSet \u7c7b\u5305\u542b\u4e09\u4e2a\u91cd\u8981\u5c5e\u6027\uff1aResultSet \u5bf9\u8c61\u5e76\u53d1\u6a21\u5f0f\u3001ResultSet \u5bf9\u8c61\u5149\u6807\u5904\u7406\u65b9\u5411\u3001ResultSet \u5bf9\u8c61\u5149\u6807\u7c7b\u578b\u3002ResultSet \u7c7b\u5177\u6709\u6307\u5411\u5f53\u524d\u7ed3\u679c\u96c6\u6570\u636e\u884c\u4f4d\u7f6e\u5149\u6807\uff0c\u5149\u6807\u4f4d\u7f6e\u521d\u59cb\u88ab\u7f6e\u4e8e\u7b2c\u4e00\u884c\u4e4b\u524d\uff0c\u901a\u8fc7 ResultSet \u7c7b\u5c01\u88c5\u7684\u5149\u6807\u79fb\u52a8\u65b9\u6cd5\u5b9e\u73b0\u5bf9\u5149\u6807\u4f4d\u7f6e\u7684\u63a7\u5236\uff0c\u5f53 ResultSet \u5bf9\u8c61\u7684\u5149\u6807\u79fb\u81f3\u6570\u636e\u7ed3\u679c\u96c6\u672b\u5c3e\u65f6 (\u4e0b\u4e00\u884c\u65e0\u6570\u636e)\uff0c\u8fd4\u56de FALSE\u3002 \u5728\u865a\u8c37 JDBC \u4e2d\uff0cResultSet \u7c7b\u5206\u4e3a\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u548c\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\uff08\u901a\u8fc7 URL \u8fde\u63a5\u4e32\u53c2\u6570 recv_mode \u914d\u7f6e\uff09\u3002\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u9ed8\u8ba4\u5c5e\u6027\u4e3a\u4e0d\u53ef\u66f4\u65b0\u3001\u5411\u524d\u79fb\u52a8\u3001\u53ef\u4ee5\u6eda\u52a8\uff1b\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u9ed8\u8ba4\u5c5e\u6027\u4e3a\u4e0d\u53ef\u66f4\u65b0\u3001\u53ea\u5411\u524d\u79fb\u52a8\u3001\u4e0d\u53ef\u6eda\u52a8\u3002 Statement \u5bf9\u8c61\u6267\u884c SQL \u8bed\u53e5\u8fd4\u56de\u7ed3\u679c\u96c6\u4ec5\u80fd\u662f\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\uff0c\u800c PreparedStatement \u5bf9\u8c61\u6267\u884c SQL \u8bed\u53e5\u8fd4\u56de\u7ed3\u679c\u96c6\u53ef\u4e3a\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u6216\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u3002 \u5f53\u6267\u884c SQL \u8fd4\u56de\u6570\u636e\u7ed3\u679c\u96c6\u8f83\u5927\u65f6\uff0c\u5efa\u8bae\u4f7f\u7528\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\uff0c\u907f\u514d JVM \u7684\u6ea2\u51fa\u3002 {.is-info}","title":"6.6 \u5904\u7406\u6267\u884c\u7ed3\u679c"},{"location":"JDBC7/#661-resultset","text":"\u521b\u5efa Statement \u5bf9\u8c61\u65f6\uff0c\u8bbe\u7f6e Statement \u5c5e\u6027 RresultSetConcurrency \u4e3a ResultSet.CONCUR_UPDATABLE\uff0c\u5e76\u4e14\u6570\u636e\u5e93 URL \u8fde\u63a5\u4e32\u5c5e\u6027 return_rowid \u8bbe\u7f6e\u4e3a TRUE\u65f6\uff0cStatement \u5bf9\u8c61\u6267\u884c SQL \u8bed\u53e5\u8fd4\u56de\u7684 ResultSet \u7ed3\u679c\u96c6\u624d\u80fd\u88ab\u66f4\u65b0\u3002\u5f53 ResultSet \u5bf9\u8c61\u4e3a\u53ef\u66f4\u65b0\u7ed3\u679c\u96c6\u65f6\uff0c\u5c06\u5149\u6807\u79fb\u81f3\u63d2\u5165\u4f4d\u7f6e\uff0c\u53ef\u8c03\u7528 ResultSet \u7c7b\u5bf9\u5e94\u7684 update \u65b9\u6cd5\u4fee\u6539\u7ed3\u679c\u96c6\u4e2d\u884c\u6570\u636e\uff0c\u5e76\u901a\u8fc7 updateRow \u65b9\u6cd5\u5c06\u66f4\u6539\u6570\u636e\u66f4\u65b0\u5230\u6570\u636e\u5e93\u4e2d\u3002 \u793a\u4f8b\uff1a\u901a\u8fc7\u4fee\u6539\u7ed3\u679c\u96c6\u4e2d\u6570\u636e\u503c\u66f4\u6539\u6570\u636e\u5e93\u4e2d\u5bf9\u5e94\u8bb0\u5f55 //\u521b\u5efaStatement\u5bf9\u8c61\u5e76\u8bbe\u7f6e\u7ed3\u679c\u96c6\u5c5e\u6027\u4e3a\u53ef\u66f4\u65b0 Statement stm = conn.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_UPDATABLE); //\u6267\u884cSQL\u8bed\u53e5 ResultSet rs = stm.executeQuery(sql); //\u7ed3\u679c\u96c6\u904d\u5386 while(rs.next()) { //\u66f4\u65b0\u7ed3\u679c\u96c6\u4e2d\u6307\u5b9a\u5217\u6570\u636e rs.updateLong(1, 5); //\u66f4\u65b0\u7ed3\u679c\u96c6\u4e2d\u6307\u5b9a\u5217\u6570\u636e rs.updateFloat(3, 12.3f); //\u7ed3\u679c\u96c6\u53d8\u66f4\u56de\u5199\u5165\u6570\u636e\u5e93 rs.updateRow(); } \u901a\u8fc7\u8c03\u7528 ResultSet \u7c7b\u7684 next()\u3001previous()\u3001absolute(int) \u65b9\u6cd5\u79fb\u52a8\u5149\u6807\u4f4d\u7f6e\uff0c\u5c06\u5149\u6807\u4f4d\u7f6e\u79fb\u52a8\u5230\u6307\u5b9a\u6570\u636e\u884c\uff0c\u901a\u8fc7 ResultSet \u7c7b\u5bf9\u5e94\u7684 get \u65b9\u6cd5\u83b7\u53d6\u884c\u6570\u636e\u3002 \u5982\u4f7f\u7528\u7ed3\u679c\u96c6\u66f4\u65b0\u6570\u636e\u5e93\u6570\u636e\uff0c\u9700\u5728\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65f6\uff0c\u8bbe\u7f6e\u8fde\u63a5\u5c5e\u6027 return_rowid \u4e3aTRUE\uff0c\u4e14\u5728\u751f\u6210\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61\u65f6\uff0c\u5e76\u53d1\u5c5e\u6027\u6307\u5b9a\u4e3a ResultSet.CONCUR_UPDATABLE\u3002 {.is-info}","title":"6.6.1 \u66f4\u65b0ResultSet\u7ed3\u679c\u96c6"},{"location":"JDBC7/#662","text":"\u793a\u4f8b 1\uff1a \u7edf\u8ba1\u7ed3\u679c\u96c6\u603b\u6761\u6570 //\u521b\u5efaStatement\u5bf9\u8c61 Statement stm= conn.createStatement(); stm.execute(\"create table test(id int identity(1,1));insert into test values(default)\"); //\u6267\u884c\u7ed3\u679c\u96c6\u67e5\u8be2 ResultSet rs = stm.executeQuery(\"select * from test\") //\u79fb\u52a8\u5149\u6807\u81f3\u7ed3\u679c\u96c6\u672b\u5c3e rs.last(); //\u83b7\u53d6\u7ed3\u679c\u96c6\u884c\u6570 int rsCounts = rs.getRow();","title":"6.6.2 \u901a\u8fc7\u79fb\u52a8\u5149\u6807\u83b7\u53d6\u7ed3\u679c\u96c6\u6761\u6570"},{"location":"JDBC7/#663","text":"\u865a\u8c37 JDBC \u652f\u6301\u591a\u7ed3\u679c\u96c6\u5904\u7406\uff0c\u5141\u8bb8 Statement \u63a5\u53e3\u652f\u6301\u591a\u91cd\u6253\u5f00\u7684 ResultSet \u5bf9\u8c61\u3002\u6267\u884c\u8bed\u53e5\u53ef\u4ee5\u662f\u591a\u6761 SQL \u8bed\u53e5\u7684\u96c6\u5408\uff0c\u5373\u4e00\u6b21\u6027\u5411\u865a\u8c37\u670d\u52a1\u5668\u53d1\u9001\u591a\u6761 SQL \u8bed\u53e5\uff0c\u865a\u8c37\u670d\u52a1\u5668\u6267\u884c\u5b8c SQL \u8bed\u53e5\u540e\u8fd4\u56de\u591a\u4e2a\u6267\u884c\u7ed3\u679c\uff1b\u4ea6\u6216\u5b58\u50a8\u8fc7\u7a0b\u5b9a\u4e49\u6709\u591a\u4e2a\u8fd4\u56de\u7ed3\u679c\u96c6\u3002\u865a\u8c37 JDBC \u7684 Statement \u91cd\u8f7d\u4e86 Statement \u63a5\u53e3\u4e2d\u7684 getMoreResults() \u65b9\u6cd5\u3002 \u793a\u4f8b\uff1a\u591a\u7ed3\u679c\u96c6\u5904\u7406 //SQL\u8bed\u53e5\u5305\u542b\u591a\u6761\u67e5\u8be2\u547d\u4ee4 String sql=\" SELECT * FROM A1 WHERE D2=(SELECT AVG(D2) FROM A1 GROUP BY D1);SELECT * FROM A1 WHERE D2>(SELECT MIN(D2) FROM A1 GROUP BY D1)\"; //\u521b\u5efaStatement\u5bf9\u8c61 Statement stm = conn.createStatement(); //\u6267\u884cSQL\u8bed\u53e5 boolean f = stm.execute(sql); //\u5224\u65ad\u662f\u5426\u6709ResultSet\u5bf9\u8c61\u4ea7\u751f if(f == true){ //\u83b7\u53d6\u7ed3\u679c\u96c6\u5bf9\u8c61 ResultSet rs1 = stm.getResultSet(); ... ... ... ... } while(true) { //\u5224\u65adStatement\u662f\u5426\u8fd4\u56de\u4e86\u591a\u4e2aResultSet\u5bf9\u8c61 if(!stm.getMoreResults(Statement.CLOSE_CURRENT_RESULT)){ break; } else if((rs2 = cstm.getResultSet())!=null) { ... ... ... ...//\u6570\u636e\u5904\u7406\u90e8\u5206\u7701\u7565 } }","title":"6.6.3 \u591a\u7ed3\u679c\u96c6\u5904\u7406"},{"location":"JDBC7/#664","text":"\u865a\u8c37JDBC\u4e2d\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u751f\u6210\u9700\u6ee1\u8db3\u4e24\u4e2a\u6761\u4ef6\uff1aURL\u8fde\u63a5\u4e32\u5c5e\u6027recv_mode\u503c\u4e3a2\uff0cStatement\u5bf9\u8c61\u6267\u884cSQL\u8bed\u53e5\u4e3a\u5355\u6761SELECT\u8bed\u53e5\u3002 \u5e94\u7528\u7a0b\u5e8f\u7aef\u901a\u8fc7Statement\u7c7b\u7684setFetchSize(int)\u65b9\u6cd5\u6216ResultSet\u7c7b\u7684setFetchSize(int)\u65b9\u6cd5\u8bbe\u7f6e\u6bcf\u6b21\u4ece\u670d\u52a1\u5668\u7aef\u83b7\u53d6\u591a\u5c11\u6761\u6570\u636e\u3002 \u4f7f\u7528\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7684 ResultSet \u5bf9\u8c61\uff0c\u5149\u6807\u53ea\u80fd\u5355\u5411\u5411\u524d\u6b63\u5411\u79fb\u52a8\uff0c\u4e0d\u80fd\u5411\u540e\u79fb\u52a8\u6216\u6765\u56de\u6eda\u52a8\u3002 {.is-info} \u793a\u4f8b\uff1a\u865a\u8c37\u6570\u636e\u5e93\u670d\u52a1\u5668\u7aef\u6e38\u6807\u4f7f\u7528 //\u521b\u5efa\u865a\u8c37JDBC\u7279\u6709Statement\u5bf9\u8c61 Statement stm = (com.xugu.cloudjdbc.Statement)conn.createStatement(); //\u5f00\u542f\u670d\u52a1\u5668\u7aef\u6e38\u6807 stm.setServerCursor(true); //\u8bbe\u7f6e\u670d\u52a1\u5668\u7aef\u6e38\u6807\u5355\u6b21\u8fd4\u56de\u6570\u636e\u6761\u6570 stm.setFetchSize(1000); //\u6267\u884cSQL\u8bed\u53e5 ResultSet rs = stm.executeQuery(\"select * from t1\"); //\u904d\u5386\u6570\u636e while\uff08rs.next()\uff09 { ... ... ... ... } //\u5173\u95ed\u670d\u52a1\u5668\u7aef\u6e38\u6807 stm.setServerCursor(false);","title":"6.6.4 \u670d\u52a1\u5668\u7aef\u6e38\u6807\u4f7f\u7528"},{"location":"JDBC7/#665-generatedkeys","text":"JDBC 3.0 \u89c4\u8303\u4e2d\u5bf9\u4e8e\u81ea\u52a8\u4ea7\u751f\u7684\u5173\u952e\u5b57\u6570\u503c\uff0c\u5b9a\u4e49\u4e86\u63a5\u53e3\u89c4\u8303\uff0c\u5373\uff1agetGeneratedKeys() \u65b9\u6cd5\u3002 \u4e3a\u4e86\u89e3\u51b3\u5bf9\u83b7\u53d6\u81ea\u52a8\u4ea7\u751f\u7684\u6216\u81ea\u52a8\u589e\u52a0\u7684\u5173\u952e\u5b57\u7684\u503c\u7684\u9700\u6c42\uff0c\u865a\u8c37 JDBC \u6839\u636e JDBC3.0 \u89c4\u8303\u63d0\u4f9b\u4e86\u83b7\u5f97\u5173\u952e\u5b57\u503c\u7684\u65b9\u6cd5\u3002\u83b7\u53d6\u5173\u952e\u5b57\u7684\u503c\uff0c\u9700\u8981\u5728\u6267\u884c\u65b9\u6cd5\u4e2d\u6307\u5b9a\u81ea\u589e\u5173\u952e\u5b57\u6807\u8bb0\u3002SQL \u8bed\u53e5\u6267\u884c\u5b8c\u540e\uff0c\u8c03\u7528 Statement \u5bf9\u8c61\u7684 getGeneratedKeys() \u65b9\u6cd5\uff0c\u83b7\u5f97\u5305\u542b\u81ea\u589e\u957f\u503c\u7684 ResultSet \u5bf9\u8c61\u3002 \u793a\u4f8b\uff1a\u83b7\u53d6\u6570\u636e\u5e93\u81ea\u589e\u957f\u5173\u952e\u5b57\u7684\u503c //\u521b\u5efaStatement\u5bf9\u8c61 Statement stmt = conn.createStatement(); //\u6307\u5b9a\u81ea\u589e\u957f\u5173\u952e\u5b57\u7684\u6807\u8bc6 String[] colN = {\"id\"}; //\u5728\u6267\u884c\u65b9\u6cd5\u4e2d\u5f15\u5165\u81ea\u589e\u957f\u5173\u952e\u5b57\u6807\u8bc6 stmt.executeUpdate(\"INSERT INTO authors(first_name, last_name) VALUES (\u2018Ghq\u2019, \u2018Wxl\u2019)\",colN); //\u83b7\u53d6\u7ed3\u679c\u96c6 ResultSet rs = stmt.getGeneratedKeys(); if ( rs.next() ) { //\u83b7\u53d6\u7ed3\u679c\u96c6\u4e2d\u7684\u81ea\u589e\u957f\u503c \u3000\u3000 int key = rs.getInt(); }","title":"6.6.5 \u68c0\u7d22\u81ea\u52a8\u4ea7\u751f\u7684\u5173\u952e\u5b57GeneratedKeys"},{"location":"JDBC7/#67","text":"\u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u56e0\u5904\u7406\u9700\u8981\u6240\u5efa\u7acb\u7684 ResultSet\u3001Statement\u3001PreparedStatement \u7b49\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61\uff0c\u5728\u4f7f\u7528\u5b8c\u540e\u5fc5\u987b\u5173\u95ed\u3002\u5173\u95ed\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61\uff0c\u76f4\u63a5\u8c03\u7528\u5bf9\u5e94\u7684\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61 close() \u65b9\u6cd5\u5373\u53ef\u3002 \u5f53\u4e0d\u518d\u9700\u8981\u548c\u865a\u8c37\u6570\u636e\u5e93\u8fdb\u884c\u4ea4\u4e92\u65f6\uff0c\u9700\u65ad\u5f00\u6570\u636e\u5e93\u8fde\u63a5\u3002\u8c03\u7528 Connection \u7c7b\u7684 close() \u65b9\u6cd5\u5373\u4f1a\u5173\u95ed\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u540c\u65f6\u91ca\u653e\u8fde\u63a5\u4e0a\u6240\u6301\u6709\u7684\u6240\u6709\u6570\u636e\u5e93\u8d44\u6e90\u3002 \u6570\u636e\u5e93\u8fde\u63a5\u4e3a\u975e\u81ea\u52a8\u63d0\u4ea4\u65f6\uff0c\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61\u5728\u4f7f\u7528\u5b8c\u540e\uff0c\u82e5\u672a\u53ca\u65f6\u5173\u95ed\uff0c\u6b64\u65f6\u8fdb\u884c DDL \u64cd\u4f5c\u5c06\u4f1a\u5bfc\u81f4\u865a\u8c37\u6570\u636e\u5e93\u52a0\u9501\u8d85\u65f6\u6216\u5931\u8d25\u3002 {.is-info}","title":"6.7 \u91ca\u653e\u8d44\u6e90"},{"location":"JDBC7/#_4","text":"JDBC 3.0 \u89c4\u8303\u5b9a\u4e49\u6709 java.sql.Blob \u4e0e java.sql.Clob \u63a5\u53e3\uff0c\u6b64\u4e24\u7c7b\u63a5\u53e3\u4e3a\u6570\u636e\u5e93\u5927\u5bf9\u8c61\u6570\u636e\u5904\u7406\u63a5\u53e3\u3002\u865a\u8c37\u6570\u636e\u5e93\u5927\u5bf9\u8c61\u5b57\u6bb5\u7c7b\u578b\u5305\u542b\uff1ablob\u3001clob\u3001binary\u3002 \u5728\u865a\u8c37 JDBC \u4e2d\uff0c\u83b7\u53d6\u5927\u5bf9\u8c61\u6570\u636e\u6709\u4e24\u79cd\u8fd4\u56de\u65b9\u5f0f\uff1a\u4e00\u79cd\u662f\u6570\u636e\u76f4\u63a5\u8fd4\u56de\uff1b\u53e6\u4e00\u79cd\u662f\u8fd4\u56de\u63cf\u8ff0\u7b26\u65b9\u5f0f\u3002\u5f53\u8fd4\u56de\u6570\u636e\u4e2d\u5927\u5bf9\u8c61\u6570\u636e\u8f83\u591a\u65f6\uff0c\u5efa\u8bae\u4f7f\u7528\u8fd4\u56de\u63cf\u8ff0\u7b26\u65b9\u5f0f\uff0c\u4ece\u800c\u907f\u514d\u56e0\u6570\u636e\u8fc7\u591a\u8fc7\u5927\u9020\u6210\u7684 JVM \u5185\u5b58\u6ea2\u51fa\u3002\u865a\u8c37 JDBC \u9a71\u52a8\u542f\u7528\u5927\u5bf9\u8c61\u8fd4\u56de\u63cf\u8ff0\u7b26\u65b9\u5f0f\uff0c\u9700\u5728\u8fde\u63a5 URL \u4e32\u4e0a\u914d\u7f6e\u5c5e\u6027 lob_ret \u4e3a descriptor \u3002","title":"\u4e03. \u5927\u5bf9\u8c61\u7c7b\u578b\u5904\u7406"},{"location":"JDBC7/#71","text":"LOB \u5bf9\u8c61\u7684\u63d2\u5165\u5fc5\u987b\u901a\u8fc7 PreparedStatement\u3001CallableStatement \u7c7b\u7684 setXXX() \u65b9\u6cd5\u65b9\u5f0f\u5b9e\u73b0\u3002\u865a\u8c37 JDBC \u4e2d PreparedStatement \u63d0\u4f9b\u591a\u79cd\u65b9\u6cd5\u8bbe\u7f6e\u5927\u5bf9\u8c61\u53c2\u6570\u503c\uff0c\u5982\u4e0b\u5217\u65b9\u6cd5\uff1a setBinaryStream(int parameterIndex,InputStream x) setBlob(int parameterIndex, Blob x) setBlob(int parameterIndex, InputStream x) setBytes(int parameterIndex,byte[] x) setCharacterStream(int parameterIndex, Reader reader) setClob(int parameterIndex, Clob x) setClob(int parameterIndex, Reader reader) setString(int parameterIndex, String x) \u793a\u4f8b\uff1a\u5e94\u7528\u7a0b\u5e8f\u63d2\u5165\u5927\u5bf9\u8c61\u6570\u636e\uff0c\u5176\u4e2d\u8868 b1 \u5b57\u6bb5 photo \u4e3a blob \u7c7b\u578b\uff0c\u5b57\u6bb5 text \u4e3a clob \u7c7b\u578b PreparedStatement ps = conn.prepareStatement(\"INSERT INTO b1 VALUES (?, ?)\")\u037e // blobBytes is a byte[] type ps.setBlob(1, new com.xugu.cloudjdbc.Blob(blobBytes))\u037e // clobString is a String type ps.setClob(2, new com.xugu.cloudjdbc.Clob(clobString))\u037e ps.execute()\uff1b","title":"7.1 \u5411\u8868\u4e2d\u63d2\u5165\u5927\u5bf9\u8c61"},{"location":"JDBC7/#72","text":"\u901a\u8fc7\u865a\u8c37 JDBC \u83b7\u53d6\u5927\u5bf9\u8c61\u503c\uff0c\u6570\u636e\u5e93 CLOB \u5bf9\u8c61\u53ef\u901a\u8fc7\u5b57\u7b26\u4e32\u5f62\u5f0f\u6216\u6d41\u5f0f\u6570\u636e\u5f62\u5f0f\u83b7\u53d6\uff0c\u6570\u636e\u5e93 BLOB \u5bf9\u8c61\u53ea\u901a\u8fc7\u6d41\u5f0f\u6570\u636e\u5f62\u5f0f\u83b7\u53d6\u3002 \u793a\u4f8b 1\uff1a\u6d41\u5f0f\u83b7\u53d6 CLOB \u5bf9\u8c61 Statement stm = xgConn.createStatement(); String sql=\u201dselect remark from t_clob where id=101\u201d; ResultSet rs = stm.executeQuery(sql); while(rs.next) { Clob data = rs.getClob(\"remark \"); //\u4ee5\u5b57\u7b26\u6d41\u65b9\u5f0f\u83b7\u53d6\u6570\u636e Reader rd = data.getCharacterStream(); char[] sc = new char[1000]; StringBuffer sb = new StringBuffer(); int len = 0; while((len=rd.read(sc)) !=-1) { sb.append(new String(sc,0,len)); } System.out.println(sb.toString()); } \u793a\u4f8b 2\uff1a\u865a\u8c37 JDBC \u5141\u8bb8\u4ee5\u5b57\u7b26\u4e32\u7684\u5f62\u5f0f\u8bfb\u53d6 CLOB \u5bf9\u8c61 String sql=\"select text from t_clob\"\u037e Statement stm=conn.createStatement()\u037e ResultSet rs=stm.executeQuery(sql)\u037e while(rs.next()) { String clobStr =rs.getString(\"text\")\u037e }","title":"7.2 \u67e5\u8be2\u5927\u5bf9\u8c61\u6570\u636e"},{"location":"JDBC7/#_5","text":"\u865a\u8c37\u6570\u636e\u5e93\u662f\u4e00\u6b3e\u5177\u5907\u9ad8\u5b89\u5168\u3001\u9ad8\u6027\u80fd\u3001\u9ad8\u6269\u5c55\u7b49\u7279\u6027\u7684\u3001\u57fa\u4e8e\u5206\u5e03\u5f0f\u67b6\u6784\u7684\u5206\u5e03\u5f0f\u4e8b\u52a1\u578b\u6570\u636e\u5e93\u3002\u90e8\u7f72\u6570\u636e\u5e93\u96c6\u7fa4\u65f6\uff0c\u591a\u53f0\u670d\u52a1\u5668\u4f5c\u4e3a\u4e00\u4e2a\u6574\u4f53\u5bf9\u5916\u63d0\u4f9b\u6570\u636e\u670d\u52a1\u3002\u5728\u591a\u673a\u73af\u5883\u4e0b\uff0c\u4e3a\u4f7f\u6570\u636e\u5e93\u8fde\u63a5\u5747\u5300\u5206\u5e03\u4e8e\u5404\u53f0\u670d\u52a1\uff0c\u865a\u8c37 JDBC \u5728\u63a5\u53e3\u5c42\u5b9e\u73b0\u4e86\u57fa\u4e8e\u8f6f\u8d1f\u8f7d\u5747\u8861\u6280\u672f\u7684\u6570\u636e\u5e93\u8fde\u63a5\u5efa\u7acb\u65b9\u5f0f\u3002 \u865a\u8c37\u6570\u636e\u5e93\u8d1f\u8f7d\u5747\u8861\u5206\u914d\u6570\u636e\u5e93\u8fde\u63a5\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a\u987a\u5e8f\u5206\u914d\u3001\u968f\u673a\u5206\u914d\u3002\u901a\u8fc7\u5728\u6570\u636e\u5e93 URL \u8fde\u63a5\u4e32\u4e0a\u8bbe\u7f6e\u53c2\u6570 conn_type(conn_type:1, \u968f\u673a\u5206\u914d\uff1b2, \u987a\u5e8f\u5206\u914d) \u7c7b\u578b\uff0c\u5b9e\u73b0\u6570\u636e\u5e93\u8fde\u63a5\u5728\u591a\u96c6\u7fa4\u73af\u5883\u4e0b\u7684\u8d1f\u8f7d\u5747\u8861\u3002\u9ed8\u8ba4\u8d1f\u8f7d\u5747\u8861\u5206\u914d\u65b9\u5f0f\uff1a\u987a\u5e8f\u5206\u914d\u3002 \u865a\u8c37 JDBC \u63d0\u4f9b\u4e09\u79cd\u914d\u7f6e\u8d1f\u8f7d\u5747\u8861\u7684\u65b9\u5f0f\uff1a\u6570\u636e\u5e93 URL \u8fde\u63a5\u4e32\u914d\u7f6e\u3001\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u6027\u6587\u4ef6 Properties \u914d\u7f6e\u3001\u6570\u636e\u5e93\u8fde\u63a5 XML \u6587\u4ef6\u914d\u7f6e\u3002 1. URL \u8fde\u63a5\u4e32\u914d\u7f6e Class.forName(\"com.xugu.cloudjdbc.Driver\"); //URL\u8fde\u63a5\u4e32\u4e2d\u4f7f\u7528ips\u5c5e\u6027\u914d\u7f6e\u591aIP\u8d1f\u8f7d\u5747\u8861 Connection conn = DriverManager.getConnection(\"jdbc:xugu://192.168.0.201:5138/SYSTEM?user=SYSDBA&password=SYSDBA&conn_type=1&ips=192.168.0.205,192.168.0.204,192.168.1.206\") \u8fde\u63a5\u5c5e\u6027\u6587\u4ef6 Properties \u914d\u7f6e (Vector \u6216\u5b57\u7b26\u4e32\u6570\u7ec4) Properties info=new Properties(); Class.forName(\"com.xugu.cloudjdbc.Driver\"); //Vector\u7ed3\u6784\u5b58\u653e\u8d1f\u8f7d\u5747\u8861\u591aIP\u5730\u5740\u65b9\u5f0f Vector<String> ipsVector=new Vector<String>(); ipsVector.add(\"192.168.1.201\"); ipsVector.add(\"192.168.1.204\"); ipsVector.add(\"192.168.1.205\"); ipsVector.add(\"192.168.1.206\"); info.put(\"ips\", ipsVector); //\u6570\u7ec4\u5b58\u653e\u8d1f\u8f7d\u5747\u8861\u591aIP\u5730\u5740\u65b9\u5f0f String[] ips={\"192.168.1.205\",\"192.168.1.204\",\"192.168.1.206\"}; info.put(\"ips\", ips); Connection conn = DriverManager.getConnection(\"jdbc:xugu://192.168.1.201:5138/SYSTEM?user=SYSDBA&password=SYSDBA&conn_type=2\",info); \u8fde\u63a5\u5c5e\u6027 XML \u6587\u4ef6\u914d\u7f6e <?xml version=\"1.0\" encoding=\"utf-8\"?> <listeners> <listener> <ip>192.168.1.206</ip> </listener> <listener> <ip>192.168.1.204</ip> </listener> <listener> <ip>192.168.1.205</ip> </listener> </listeners> Class.forName(\"com.xugu.cloudjdbc.Driver\"); Connection conn = DriverManager.getConnection(\"jdbc:xugu:file://xuguClouldListener.xml:5138/SYSTEM?user=SYSDBA&password=SYSDBA&conn_type=1\");","title":"\u516b. \u865a\u8c37\u6570\u636e\u5e93\u8d1f\u8f7d\u5747\u8861"},{"location":"JDBC8/","text":"\u6587\u6863\u5bc6\u7ea7\uff1a\u3010 - \u3011 \u8bf4\u660e\uff1a\u516c\u5f00 \u6587\u6863\u4fee\u8ba2\u5386\u53f2 \u5e8f\u53f7 \u6587\u6863\u7248\u672c \u7a0b\u5e8f\u7248\u672c \u7f16\u64b0\u4eba A-\u589e\u52a0 M-\u66f4\u65b0 D-\u5220\u51cf \u53d8\u66f4\u8bf4\u660e \u5b8c\u6210\u65e5\u671f \u8bc4\u5ba1\u4eba \u8bc4\u5ba1\u65e5\u671f \u8bc4\u5ba1\u7ed3\u679c [\u901a\u8fc7/\u62d2\u7edd] 1 1.0 11.0 \u5468\u5f66\u5f64 A \u6574\u7248\u7f16\u5199 2021-7-12 \u5434\u751f\u52c7 2021-7-12 \u901a\u8fc7 2 2.0 12.0 \u66f9\u831c M \u4fee\u6539\u7b2c\u4e8c\u7ae0\u7c7b\u6269\u5c55\u30014.3\u8fde\u63a5\u53c2\u6570 2022-5-14 \u5468\u5f66\u5f64 2022-5-14 \u901a\u8fc7 3 2.1 12.0 \u66f9\u831c M \u4fee\u6539\u7b2c3.1\u57fa\u672c\u6570\u636e\u7c7b\u578b 2022-6-20 \u5468\u5f66\u5f64 2022-6-20 \u901a\u8fc7 \u4e00. \u865a\u8c37\u6570\u636e\u5e93\u7684JDBC\u9a71\u52a8\u7a0b\u5e8f\u6982\u8ff0 Java \u6570\u636e\u5e93\u8fde\u63a5\uff08Java Database Connectivity\uff0c\u7b80\u79f0 JDBC\uff09\u662f Java \u8bed\u8a00\u4e2d\u7528\u6765\u89c4\u8303\u5ba2\u6237\u7aef\u7a0b\u5e8f\u5982\u4f55\u8bbf\u95ee\u6570\u636e\u5e93\u7684\u5e94\u7528\u7a0b\u5e8f\u63a5\u53e3\uff0c\u63d0\u4f9b\u4e86\u8bf8\u5982\u67e5\u8be2\u548c\u66f4\u65b0\u6570\u636e\u5e93\u4e2d\u6570\u636e\u7684\u65b9\u6cd5\uff0c\u53ef\u4ee5\u4e3a\u591a\u79cd\u5173\u7cfb\u6570\u636e\u5e93\u63d0\u4f9b\u7edf\u4e00\u8bbf\u95ee\u3002JDBC \u63d0\u4f9b\u4e86\u4e00\u79cd\u57fa\u51c6\uff0c\u901a\u8fc7\u6b64\u57fa\u51c6\u6570\u636e\u5e93\u5f00\u53d1\u4eba\u5458\u53ef\u6784\u5efa\u66f4\u9ad8\u7ea7\u7684\u5de5\u5177\u548c\u63a5\u53e3\uff0c\u4e5f\u53ef\u901a\u8fc7\u6b64\u57fa\u51c6\u7f16\u5199\u6570\u636e\u5e93\u5e94\u7528\u7a0b\u5e8f\u3002 \u865a\u8c37\u6570\u636e\u5e93\u7684 JDBC \u9a71\u52a8\u7a0b\u5e8f\uff08\u4ee5\u4e0b\u7b80\u79f0\uff1a\u865a\u8c37 JDBC\uff09\u5b9e\u73b0\u4e86 Java \u7a0b\u5e8f\u548c\u865a\u8c37\u6570\u636e\u5e93\u901a\u4fe1\uff0c\u652f\u6301 SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u7684\u8bbf\u95ee\uff0c\u540c\u65f6\u4e5f\u662f\u6784\u9020\u9ad8\u7ea7 API \u548c\u6570\u636e\u5e93\u5f00\u53d1\u5de5\u5177\u7684\u57fa\u7840\u3002 \u7528\u6237\u60f3\u8981\u5b9e\u73b0\u5bf9\u6570\u636e\u5e93\u7684\u8bbf\u95ee\uff0c\u4e00\u822c\u8981\u7ecf\u8fc7\u5982\u4e0b\u7684\u6b65\u9aa4\uff1a 1. \u901a\u8fc7\u9a71\u52a8\u5668\u7ba1\u7406\u5668\u83b7\u53d6\u8fde\u63a5\u63a5\u53e3\uff1b 2. \u83b7\u5f97 Statement \u6216 Statement \u5b50\u7c7b\uff1b 3. \u901a\u8fc7 Statement \u6267\u884c SQL \u547d\u4ee4\uff1b 4. \u5904\u7406\u6267\u884c\u7ed3\u679c\uff1b 5. \u5173\u95ed Statement\uff1b 6. \u5173\u95ed\u8fde\u63a5\u3002 JDBC \u7ed3\u6784\u56fe, \u5982\u56fe1.1\u6240\u793a\u3002 \u56fe1.1 JDBC\u7ed3\u6784\u56fe \u4f7f\u7528\u865a\u8c37 JDBC \u5b9e\u73b0\u5e94\u7528\u7a0b\u5e8f\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u4e4b\u95f4\u7684\u8fde\u63a5\u670d\u52a1\uff0c\u5e94\u7528\u7a0b\u5e8f\u6240\u5728\u8ba1\u7b97\u673a\u9700\u5df2\u5b89\u88c5 Java \u8fd0\u884c\u73af\u5883\uff08Java Runtime Environment, \u7b80\u79f0 JRE\uff09\u3002\u865a\u8c37 JDBC \u53c2\u7167 JDBC API \u5b9e\u73b0\uff0c\u652f\u6301 JDBC 3.0 \u529f\u80fd\uff0cJava \u5e94\u7528\u7a0b\u5e8f\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u4e4b\u95f4\u7684\u6240\u6709\u64cd\u4f5c\u5747\u9700\u901a\u8fc7\u865a\u8c37 JDBC \u6765\u5b8c\u6210\u3002 \u4f7f\u7528\u865a\u8c37 JDBC \u9700\u8981 JRE 1.6 \u7248\u6216\u66f4\u9ad8\u7248\u672c\u7684 Java \u8fd0\u884c\u65f6\u73af\u5883 (JRE)\u3002 {.is-info} \u4e8c. \u865a\u8c37\u6570\u636e\u5e93\u7684JDBC\u63a5\u53e3\u548c\u5bf9\u8c61\u7c7b JDBC 3.0 \u89c4\u8303\u7531 JDBC 1.0\u3001JDBC 2.0 \u884d\u751f\u800c\u6765\uff0c\u4e3b\u8981\u5305\u542b java.sql \u5305\u4ee5\u53ca javax.sql \u5305\uff0c\u6570\u636e\u5e93 JDBC \u9a71\u52a8\u5b9e\u73b0 JDBC 3.0 \u89c4\u8303\u6240\u5b9a\u4e49\u7684\u7279\u6027\u63a5\u53e3\uff0c\u5373\u53ef\u8fbe\u5230\u5bf9\u6807\u51c6 JDBC 3.0 \u89c4\u8303\u7684\u652f\u6301\u3002 \u865a\u8c37 JDBC \u57fa\u4e8e JDBC 3.0 \u89c4\u8303\u5b9e\u73b0\uff0c\u5b9e\u73b0\u63a5\u53e3\u7c7b\u6620\u5c04\uff0c\u5982\u88682.1\u6240\u793a\u3002 \u88682.1 \u865a\u8c37JDBC\u5b9e\u73b0\u63a5\u53e3\u7c7b | \u63a5\u53e3 | \u865a\u8c37JDBC\u5b9e\u73b0\u7c7b | | ---------------------------------- | ---------------------------------------- | | java.sql.Driver | com.xugu.cloudjdbc.Driver | | java.sql.Connection | com.xugu.cloudjdbc.Connection | | java.sql.Statement | com.xugu.cloudjdbc.Statement | | java.sql.PreparedStatement | com.xugu.cloudjdbc.PreparedStatement | | java.sql.CallableStatement | com.xugu.cloudjdbc.CallableStatement | | java.sql.ResultSet | com.xugu.cloudjdbc.ResultSet | | java.sql.ResultSetMetaData | com.xugu.cloudjdbc.ResultSetMetaData | | java.sql.DatabaseMetaData | com.xugu.cloudjdbc.DatabaseMetaData | | java.sql.PrameterMetaData | com.xugu.cloudjdbc.PrameterMetaData | | java.sql.Types | com.xugu.cloudjdbc.Types | | java.sql.Blob | com.xugu.cloudjdbc.Blob | | java.sql.Clob | com.xugu.cloudjdbc.Clob | | java.sql.Savepoint | com.xugu.cloudjdbc.Savepoint | | javax.sql.DataSource | com.xugu.pool.XgDataSource | | javax.sql.ConnectionPoolDataSource | com.xugu.pool.XgConnectionPoolDataSource | | javx.sql.PooledConnection | com.xugu.pool.XgPooledConnection | \u9664\u4e86\u4ee5\u4e0a\u6807\u51c6\u7c7b\u63a5\u53e3\u5916\uff0c\u865a\u8c37 JDBC \u8fd8\u6269\u5c55\u5b9e\u73b0\u4e86\u4ee5\u4e0b\u7c7b\uff1a - com.xugu.cloudjdbc.ClientInfo - com.xugu.cloudjdbc.OutParameter - com.xugu.cloudjdbc.Rowid - com.xugu.cloudjdbc.SQLXml - com.xugu.cloudjdbc.SSL - com.xugu.pool.StatementWrapper - com.xugu.pool.PreparedStatementWrapper \u4e09. \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b 3.1 \u57fa\u672c\u6570\u636e\u7c7b\u578b \u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b\u3001\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u3001Java \u6570\u636e\u7c7b\u578b\u4e09\u8005\u6620\u5c04\u5173\u7cfb\uff0c\u5982\u88683.1\u6240\u793a\u3002 \u88683.1 \u6570\u636e\u7c7b\u578b\u6620\u5c04\u5173\u7cfb \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b \u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b Java \u6570\u636e\u7c7b\u578b BOOLEAN BOOLEAN boolean SMALLINT SMALLINT short TINYINT TINYINT byte INTEGER INTEGER int BIGINT BIGINT long FLOAT FLOAT float DOUBLE DOUBLE double NUMERIC NUMERIC BigDecimal DECIMAL BigDecimal CHAR CHAR String NCHAR NCHAR String VARCHAR VARCHAR String VARCHAR2 VARCHAR String NVARCHAR2 VARCHAR String BLOB BLOB Blob CLOB CLOB Clob NCLOB BINARY BINARY byte[] VARBINARY LONG VARBINARY DATE DATE Date TIME TIME Time TIMESTAMP TIMESTAMP Timestamp 3.2 \u6269\u5c55\u6570\u636e\u7c7b\u578b \u865a\u8c37 JDBC \u9664\u4e86\u5b9e\u73b0\u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b\uff0c\u8fd8\u6839\u636e\u865a\u8c37\u6570\u636e\u5e93\u81ea\u6709\u7c7b\u578b\u6269\u5c55\u4e86\u90e8\u5206\u6570\u636e\u7c7b\u578b\uff08\u88683.2\u6240\u793a\uff09\uff0c\u5305\u62ec\u4ee5\u4e0b\u6570\u636e\u7c7b\u578b\u3002 1. \u65f6\u95f4\u6570\u636e\u7c7b\u578b DATETIME\u2014\u2014\u2014 \u65e5\u671f\u65f6\u95f4\u7c7b\u578b DATETIME WITH TIME ZONE \u2014\u2014\u2014 \u5e26\u65f6\u533a\u7684\u65e5\u671f\u65f6\u95f4\u7c7b\u578b TIME WITH TIME ZONE \u2014\u2014\u2014 \u5e26\u65f6\u533a\u7684\u65f6\u95f4\u7c7b\u578b INTERVAL YEAR \u2014\u2014\u2014 \u5e74\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL MONTH \u2014\u2014\u2014 \u6708\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY\u2014\u2014\u2014 \u65e5\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL HOUR \u2014\u2014\u2014 \u5c0f\u65f6\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL MINUTE \u2014\u2014\u2014 \u5206\u949f\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL SECOND \u2014\u2014\u2014 \u79d2\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL YEAR TO MONTH \u2014\u2014\u2014 \u5e74\u5230\u6708\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY TO HOUR \u2014\u2014\u2014 \u65e5\u5230\u5c0f\u65f6\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY TO MINUTE \u2014\u2014\u2014 \u65e5\u5230\u5206\u949f\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY TO SECOND \u2014\u2014\u2014 \u65e5\u5230\u79d2\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL HOUR TO MINUTE \u2014\u2014\u2014 \u5c0f\u65f6\u5230\u5206\u949f\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL HOUR TO SECOND \u2014\u2014\u2014 \u5c0f\u65f6\u5230\u79d2\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL MINUTE TO SECOND \u2014\u2014\u2014 \u5206\u949f\u5230\u79d2\u7684\u65f6\u95f4\u95f4\u9694 2. \u6e38\u6807\u6570\u636e\u7c7b\u578b\uff08\u53ea\u5728\u5b58\u50a8\u8fc7\u7a0b\u3001\u51fd\u6570\u3001\u5305\u4e2d\u4f7f\u7528\uff09 CURSOR \u2014\u2014\u2014 \u6e38\u6807\u6570\u636e\u7c7b\u578b SYS_REFCURSOR \u2014\u2014\u2014 \u8fd4\u56de\u6e38\u6807\u6570\u636e\u7c7b\u578b 3. \u5176\u4ed6\u6570\u636e\u7c7b\u578b GUID \u2014\u2014\u2014 \u5168\u5c40\u552f\u4e00\u6807\u8bc6\u7b26 \u88683.2 \u6269\u5c55\u6570\u636e\u7c7b\u578b\u5bf9\u5e94\u8868 \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b \u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b Java \u6570\u636e\u7c7b\u578b DATETIME DATETIME Timestamp DATETIME WITH TIME ZONE DATETIME_TZ String TIME WITH TIME ZONE TIME_TZ String INTERVAL YEAR INTERVAL_Y String INTERVAL MONTH INTERVAL_M INTERVAL DAY INTERVAL_D INTERVAL HOUR INTERVAL_H INTERVAL MINUTE INTERVAL_MI INTERVAL SECOND INTERVAL_S String INTERVAL YEAR TO MONTH INTERVAL_Y2M INTERVAL DAY TO HOUR INTERVAL_D2H INTERVAL DAY TO MINUTE INTERVAL_D2M INTERVAL DAY TO SECOND INTERVAL_D2S INTERVAL HOUR TO MINUTE INTERVAL_H2M INTERVAL HOUR TO SECOND INTERVAL_H2S INTERVAL MINUTE TO SECOND INTERVAL_M2S CURSOR CURSOR \u65e0\u5bf9\u5e94\u7c7b\u578b SYS_REFCURSOR REFCUR GUID GUID String \u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528 ResultSet \u5bf9\u8c61\u6765\u5bf9\u5e94\u83b7\u53d6\u6e38\u6807\u6240\u8fd4\u56de\u6570\u636e\u3002 {.is-info} 3.3 \u6570\u636e\u7c7b\u578b\u8f6c\u6362 \u5728\u8c03\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u4e2d\u7684\u67d0\u4e9b\u65b9\u6cd5\u65f6\uff0c\u9700\u8fdb\u884c Java \u6570\u636e\u7c7b\u578b\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u7684\u8f6c\u6362\uff0c\u8fd9\u4e9b\u65b9\u6cd5\u5305\u62ec\uff1a - ResultSet \u7c7b get\\<Type> \u65b9\u6cd5\uff1b - ResultSet \u7c7b update\\<Type> \u65b9\u6cd5\uff1b - CallableStatement \u7c7b get\\<Type> \u65b9\u6cd5\uff1b - PreparedStatement \u7c7b set\\<Type> \u65b9\u6cd5\u3002 \u6570\u636e\u7c7b\u578b\u4e4b\u95f4\u7684\u8f6c\u6362\uff0c\u9700\u9075\u4ece Java \u6570\u636e\u7c7b\u578b\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u6620\u5c04\u5173\u7cfb\u89c4\u5219\uff0c\u5426\u5219\u53ef\u80fd\u8f6c\u6362\u5931\u8d25\u3002 1. com.xugu.cloudjdbc.ResultSet \u7c7b\u4e2d get\\<Type> \u65b9\u6cd5\u7684\u7c7b\u578b\u8f6c\u6362\uff0c\u5982\u88683.3\u6240\u793a\u3002 2. com.xugu.cloudjdbc.PreparedStatement \u7c7b\u4e2d set\\<Type> \u65b9\u6cd5\u7684\u7c7b\u578b\u8f6c\u6362\uff0c\u5982\u88683.4\u6240\u793a\u3002 X\uff08\u65e0\u4e22\u5931\u8f6c\u6362\uff09\uff1a\u6307\u4ee5\u957f\u7cbe\u5ea6\u7c7b\u578b\u7684 get\\<Type> \u65b9\u6cd5\u83b7\u53d6\u77ed\u7cbe\u5ea6\u6570\u636e\u7c7b\u578b\u5217\u503c\u65e0\u4e22\u5931\u3002 \u5982\uff1a\u4f7f\u7528 getInt() \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u4e3a smallint \u7684\u5217\u6570\u636e\uff0c\u83b7\u53d6\u6570\u636e\u5b8c\u6574\u3002 Z\uff08\u4f9d\u8d56\u8f6c\u6362\uff09\uff1a\u6307 get\\<Type> \u65b9\u6cd5\u4e2d\u7684 Type \u7c7b\u578b\u4e0e\u83b7\u53d6\u6570\u636e\u5e93\u4e2d\u5217\u7684\u6570\u636e\u7c7b\u578b\u4e0d\u4e00\u81f4\uff0c\u6b64\u65f6\u9700\u8981\u901a\u8fc7\u5176\u4ed6\u6570\u636e\u7c7b\u578b\u8f6c\u6362\u4e3a Type \u6570\u636e\u7c7b\u578b\uff0c\u6b64\u8f6c\u6362\u8fc7\u7a0b\u503c\u53ef\u80fd\u4e22\u5931\u90e8\u5206\u6570\u636e\u3002 \u5982\uff1a\u4f7f\u7528 getInt() \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u4e3a float \u7684\u5217\u6570\u636e\uff0c\u53ef\u83b7\u53d6 float \u5217\u6570\u636e\u7684\u6574\u6570\u503c\uff0c\u800c\u5c0f\u6570\u7cbe\u5ea6\u503c\u5c06\u4e22\u5931\u3002 Y\uff08\u76f4\u63a5\u8f6c\u6362\uff09\uff1a\u6307 get\\<Type> \u65b9\u6cd5\u4e2d\u7684 Type \u7c7b\u578b\u4e0e\u83b7\u53d6\u6570\u636e\u5e93\u4e2d\u5217\u7684\u6570\u636e\u7c7b\u578b\u4e00\u81f4\u3002 \u5982\uff1a\u4f7f\u7528 getInt() \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u4e3a integer \u7684\u5217\u6570\u636e\uff0c\u76f4\u63a5\u83b7\u53d6\u5b8c\u6574\u6570\u636e\u3002 {.is-info} P\uff08\u5141\u8bb8\u63d2\u5165\uff09\uff1a\u6307 set\\<Type> \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u5e93\u4e2d\u5217\u6570\u636e\u65f6\uff0c\u6570\u636e\u65e0\u635f\u5931\u5b58\u5165\u6570\u636e\u5e93\u4e2d\u3002 \u5982\uff1a\u4f7f\u7528 setInt() \u65b9\u6cd5\u8bbe\u7f6e\u5217\u6570\u636e\u7c7b\u578b\u4e3a bigint \u7684\u6570\u636e\u65f6\uff0c\u6570\u636e\u53ef\u6b63\u786e\u5b58\u5165\u3002 Z\uff08\u90e8\u5206\u63d2\u5165\uff09\uff1a\u6307 set\\<Type> \u65b9\u6cd5\u4e2d\u7684 Type \u7c7b\u578b\u548c\u6570\u636e\u5e93\u4e2d\u5217\u6570\u636e\u7c7b\u578b\u4e0d\u4e00\u81f4\uff0c\u6570\u636e\u4ec5\u80fd\u90e8\u5206\u6b63\u786e\u5b58\u5165\u3002 \u5982\uff1a\u4f7f\u7528 setInt() \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u5e93\u5217\u7c7b\u578b\u4e3a tinyint \u7684\u6570\u636e\uff0c\u56e0 tinyint \u8868\u793a\u8303\u56f4\u4e3a-128\uff5e127 \u7684\u6574\u6570\u503c\uff0c\u6545\u800c tinyint\u8868\u793a\u8303\u56f4\u5185\u6570\u636e\u53ef\u6b63\u786e\u5b58\u5165\uff0c\u8303\u56f4\u5916\u6570\u636e\u5c06\u63d2\u5165\u5931\u8d25\u3002 {.is-info} \u56db. \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5 4.1 \u90e8\u7f72JDBC\u9a71\u52a8\u7a0b\u5e8f \u901a\u8fc7\u865a\u8c37 JDBC \u9a71\u52a8\u8bbf\u95ee\u865a\u8c37\u6570\u636e\u5e93\uff0c\u9996\u5148\u5e94\u4fdd\u8bc1\u5e94\u7528\u7a0b\u5e8f\u6b63\u786e\u5f15\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u5305 (cloudjdbc-*.*.*.jar)\uff0c\u5373\u5c06\u9a71\u52a8\u5305\u62f7\u8d1d\u81f3\u5e94\u7528\u7a0b\u5e8f\u5e76\u6dfb\u52a0\u5f15\u7528\u3002 4.2 \u52a0\u8f7dJDBC\u9a71\u52a8\u7a0b\u5e8f \u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u8fdb\u884c\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u8c03\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u7a0b\u5e8f\uff0c\u9996\u5148\u8981\u5c06\u865a\u8c37 JDBC \u9a71\u52a8\u52a0\u8f7d\u5230\u7cfb\u7edf\u5185\u5b58\u4e2d\uff0c\u7136\u540e\u4f9b\u7cfb\u7edf\u4f7f\u7528\u3002\u865a\u8c37 JDBC \u7684\u9a71\u52a8\u5b9e\u73b0\u7c7b\u4e3acom.xugu.cloudjdbc.Driver\uff0c\u4ee5\u4e0b\u662f\u5c06\u865a\u8c37 JDBC \u9a71\u52a8\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\u7684\u4ee3\u7801\uff1a //\u663e\u793a\u6ce8\u518c DriverManager.registerDriver(new com.xugu.cloudjdbc.Driver())\u037e //\u9690\u5f0f\u6ce8\u518c Class.forName(\u201ccom.xugu.cloudjdbc.Driver\u201d)\u037e \u9690\u5f0f\u6ce8\u518c\u5373\u901a\u8fc7 Class.forName() \u5c06\u5bf9\u5e94\u7684\u9a71\u52a8\u7c7b\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\uff0c\u5c06\u6267\u884c\u5185\u5b58\u4e2d\u7684 static \u9759\u6001\u4ee3\u7801\u6bb5\uff0c\u6b64\u4ee3\u7801\u6bb5\u4f1a\u521b\u5efa\u4e00\u4e2a\u865a\u8c37 JDBC \u9a71\u52a8\u7684\u5b9e\u4f8b\uff0c\u5e76\u653e\u5165 DriverManager \u4e2d\uff0c\u4f9b DriverManager \u4f7f\u7528\u3002 {.is-info} 4.3 \u8fde\u63a5\u5b57\u4e32\u53ca\u53c2\u6570\u8bbe\u7f6e \u865a\u8c37 JDBC \u9a71\u52a8\u8fde\u63a5 URL \u4e32\u683c\u5f0f\uff1a jdbc:xugu://serverIP:portNumber/databaseName[?property=value[&property=value]] \u865a\u8c37 JDBC \u9a71\u52a8\u8fde\u63a5 URL \u4e32\u683c\u5f0f\uff1a 1). jdbc:xugu:// \uff1a\uff08\u5fc5\u9700\uff09\u865a\u8c37\u6570\u636e\u5e93\u7279\u5b9a\u534f\u8bae\u3002 2). serverIP \uff1a\uff08\u5fc5\u9700\uff09\u865a\u8c37\u6570\u636e\u5e93\u6240\u5728\u670d\u52a1\u5668\u7684 IP \u5730\u5740\u3002 3). portNumber\uff1a\uff08\u5fc5\u9700\uff09\u662f\u865a\u8c37\u6570\u636e\u5e93\u670d\u52a1 TCP \u8bbf\u95ee\u7aef\u53e3\uff0c\u9ed8\u8ba4 5138\u3002 4). databaseName\uff1a\uff08\u5fc5\u9700\uff09\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u5e93\u540d\u79f0\u3002 5). property\uff1a\uff08\u53ef\u9009\uff09\u865a\u8c37\u6570\u636e\u5e93\u7684 URL \u8fde\u63a5\u5c5e\u6027\u3002\u591a\u4e2a\u8fde\u63a5\u5c5e\u6027\u4e4b\u95f4\u4f7f\u7528\u201c&\u201d\u5206\u9694\uff0c\u4e0d\u53ef\u91cd\u590d\u3002 \u865a\u8c37 JDBC \u9a71\u52a8 URL \u4e32\u793a\u4f8b\u5982\u4e0b\uff1a String url = jdbc:xugu://localhost:5138/System?user=GUEST&password=GUEST\u037e property \u8bbe\u7f6e\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u6027\uff0c\u5e38\u7528\u8fde\u63a5\u5c5e\u6027\u89c1\u88684.1\u3002 \u88684.1 \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u6027 table th:first-of-type { width: 20%; } table th:nth-of-type(2) { width: 10%; } table th:nth-of-type(3) { width: 10%; } table th:nth-of-type(4) { width: 50%; } \u5c5e\u6027\u540d\u79f0 \u5fc5\u9009\u9879 \u53d6\u503c \u8bf4\u660e database \u221a \u5b57\u7b26\u4e32 \u6570\u636e\u5e93\u540d\u79f0 user \u221a \u5b57\u7b26\u4e32 \u7528\u6237\u540d\u79f0 password \u221a \u5b57\u7b26\u4e32 \u7528\u6237\u5bc6\u7801 encryptor \u00d7 \u5b57\u7b26\u4e32 \u7528\u4e8e\u542f\u52a8\u52a0\u5bc6\u6570\u636e\u5e93\uff0c\u82e5\u5e93\u672a\u52a0\u5bc6\uff0c\u5219\u53ef\u4e0d\u8981\uff0c\u4f46\u5e26\u4e0a\u6b64\u53c2\u6570\u4e0d\u4f1a\u5f71\u54cd\u8fde\u63a5 char_set \u00d7 \u5b57\u7b26\u4e32 \u8fde\u63a5\u5b57\u7b26\u96c6\u3002'GB2312'\u3001'GBK'\u3001'UTF8' \u7b49\uff0c\u9ed8\u8ba4\uff1aGBK time_zone \u00d7 \u5b57\u7b26\u4e32 \u5ba2\u6237\u7aef\u65f6\u533a\u3002\u9ed8\u8ba4\uff1a\u865a\u8c37\u6570\u636e\u5e93\u914d\u7f6e\u53c2\u6570 def_timezone \u6240\u8bbe\u7f6e\u65f6\u533a\uff08\u53ea\u5bf9\u7cfb\u7edf\u65f6\u95f4\u51fd\u6570\u751f\u6548\uff09 iso_level \u00d7 \u5b57\u7b26\u4e32 'READ COMMITED'\uff1a\u8bfb\u5df2\u63d0\u4ea4\uff1b 'REPEATIABLE READ'\uff1a\u53ef\u91cd\u590d\u8bfb\uff1b'SERIALIZABLE'\uff1a\u5e8f\u5217\u5316 lock_time \u00d7 \u6570\u503c \u5355\u4f4d\uff1a\u6beb\u79d2\uff0c\u9ed8\u8ba4\u503c\uff1a0\uff0c\u8868\u793a\u8fde\u63a5\u4e2d\u7684\u4e8b\u52a1\u9501\u5f81\u7528\u65f6\uff0c\u6700\u5927\u7b49\u5019\u65f6\u95f4\uff0c\u82e5\u5728\u8bbe\u7f6e\u65f6\u95f4\u5185\u52a0\u9501\u5931\u8d25\uff0c\u56de\u6eda\u4e8b\u52a1\u5e76\u62a5\u9519 lob_ret \u00d7 \u5b57\u7b26\u4e32 \u5927\u5bf9\u8c61\uff08Blob\u3001Clob\uff09\u6570\u636e\u8fd4\u56de\u65b9\u5f0f\u3002\u5c5e\u6027\u4e3a descriptor \u65f6\uff0c\u4ee5\u63cf\u8ff0\u7b26\u65b9\u5f0f\u8fd4\u56de\uff1b\u5176\u4ed6\u4ee5\u6570\u636e\u6d41\u65b9\u5f0f\u8fd4\u56de\u3002\u9ed8\u8ba4\uff1a\u4ee5\u6570\u636e\u6d41\u65b9\u5f0f\u8fd4\u56de return_rowid \u00d7 \u5e03\u5c14\u503c \u662f\u5426\u8fd4\u56de\u8bb0\u5f55 rowid \u503c\u3002\u5c5e\u6027\u4e3a TRUE \u65f6\uff0c\u8fd4\u56de rowid\uff1b\u5176\u4ed6\u8fd4\u56de FALSE\u3002\u9ed8\u8ba4\uff1aFALSE auto_commit \u00d7 on/off \u4e8b\u52a1\u662f\u5426\u81ea\u52a8\u63d0\u4ea4\u3002\u5c5e\u6027\u4e3a ON \u65f6\uff0c\u8fde\u63a5\u81ea\u52a8\u63d0\u4ea4\uff1b\u5c5e\u6027\u4e3a OFF\u65f6\uff0c\u8fde\u63a5\u975e\u81ea\u52a8\u63d0\u4ea4\u3002\u9ed8\u8ba4\uff1aON conn_type \u00d7 \u6570\u503c \u8d1f\u8f7d\u5747\u8861\u5206\u914d\u65b9\u5f0f\u3002\u5c5e\u6027\u4e3a 1 \u65f6\uff0c\u968f\u673a\u5206\u914d\uff1b\u5c5e\u6027\u4e3a 2 \u65f6\uff0c\u987a\u5e8f\u5206\u914d\u3002\u9ed8\u8ba4\uff1a2 ips \u00d7 \u5b57\u7b26\u4e32 \u8d1f\u8f7d\u5747\u8861\u8fde\u63a5 IP \u5730\u5740\uff0c\u591a\u4e2a IP \u5730\u5740\u4ee5\u9017\u53f7\u5206\u9694\uff08\u8be6\u7ec6\u89c1\u8d1f\u8f7d\u5747\u8861\uff09 CompatibleOracle \u00d7 \u5e03\u5c14\u503c \u517c\u5bb9 Oracle \u9009\u9879\u3002\u5c5e\u6027\u4e3a true\uff0c\u517c\u5bb9 Oracle\u037e \u5c5e\u6027\u4e3a FALSE\uff0c\u865a\u8c37 JDBC \u81ea\u6709\u5b9e\u73b0 recv_mode \u00d7 \u6570\u503c \u63a5\u6536\u6a21\u5f0f\u9009\u9879\u3002\u5c5e\u6027\u503c\u4e3a 0 \u65f6\uff0c\u672c\u5730\u5168\u63a5\u6536\u6a21\u5f0f\uff1b\u5c5e\u6027\u503c\u4e3a 1 \u65f6\uff0c\u7f51\u7edc\u63a5\u6536\u6a21\u5f0f\uff1b\u5c5e\u6027\u503c\u4e3a 2 \u65f6\uff0c\u670d\u52a1\u5668\u7aef\u6e38\u6807\u63a5\u6536\u6a21\u5f0f\u3002\u9ed8\u8ba4\uff1a0 emptyStringAsNull \u00d7 \u5e03\u5c14\u503c \u7a7a\u5b57\u4e32\u5904\u7406\u3002\u5c5e\u6027\u4e3a FALSE \u65f6\uff0c\u7a7a\u5b57\u7b26\u4e32\u8ba4\u5b9a\u4e3a NULL\uff1b\u5c5e\u6027\u4e3a TRUE \u65f6\uff0c\u7a7a\u5b57\u7b26\u4e32\u4fdd\u7559\u3002\u9ed8\u8ba4\uff1a\u7a7a\u5b57\u4e32\u4fdd\u7559 xgversion \u00d7 201/301 \u5ba2\u6237\u7aef\u534f\u8bae\u7248\u672c\uff0c\u865a\u8c37\u6570\u636e\u5e93V12\u7248\u672c\u5347\u7ea7\u652f\u6301301\u534f\u8bae\uff0c\u540c\u65f6\u517c\u5bb9201\u534f\u8bae SSL \u00d7 SSL \u8fde\u63a5\u52a0\u5bc6\u53c2\u6570\u3002\u5c5e\u6027\u503c\u3010SSL\uff1a\u542f\u7528SSL\u52a0\u5bc6\u4f20\u8f93\uff1bNSSL\uff1a\u7981\u7528SSL\u52a0\u5bc6\u4f20\u8f93\u3011 slowsqltime \u00d7 \u6570\u503c \u8bbe\u7f6e\u6162SQL\u6267\u884c\u65f6\u95f4\u3002SQL\u8bed\u53e5\u6267\u884c\u65f6\u95f4\u8d85\u8fc7\u8be5\u6570\u503c\uff0c\u65e5\u5fd7\u5219\u4f1a\u8f93\u51fa\u6267\u884cSQL batch_mode \u00d7 \u5e03\u5c14\u503c PreparedStatement\u662f\u5426\u4f7f\u7528\u6279\u91cf\u5904\u7406\u3002\u5c5e\u6027\u4e3a TRUE \u65f6\uff0cexecuteBatch\u91c7\u7528\u6279\u91cf\u6a21\u578b\uff1bFALSE\u5219\u91c7\u7528\u5355\u6761\u5904\u7406\u6a21\u578b\u3002\u9ed8\u8ba4\uff1aFALSE \u8fde\u63a5\u53c2\u6570\u4f7f\u7528SSL\u5c5e\u6027\u65f6\uff0c\u4f9d\u8d56\u7a0b\u5e8f\u5305\u4e2d\u63d0\u4f9b\u7684\u52a8\u6001\u94fe\u63a5\u5e93\uff0c\u4f7f\u7528\u524d\u9700\u5c06\u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u5230\u64cd\u4f5c\u7cfb\u7edf\u6307\u5b9a\u4f4d\u7f6e\u65b9\u53ef\u6b63\u5e38\u4f7f\u7528SSL\u52a0\u5bc6\u529f\u80fd\u3002 Windows 32\u4f4d\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u7528SSL\u5c5e\u6027\u524d\uff0c\u9700\u5c06\u7a0b\u5e8f\u5305 ssl/win32 \u4e0b xgssl.dll \u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u62f7\u8d1d\u5230\u7cfb\u7edf\u76ee\u5f55 C:/windows/system32 \u76ee\u5f55\u4f4d\u7f6e\u3002 Windows 64\u4f4d\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u7528SSL\u5c5e\u6027\u524d\uff0c\u9700\u5c06\u7a0b\u5e8f\u5305 ssl/win64 \u4e0b xgssl.dll \u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u62f7\u8d1d\u5230\u7cfb\u7edf\u76ee\u5f55 C:/windows/system32 \u76ee\u5f55\u4e0b\u3002 Linux X64\u4f4d\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u7528SSL\u5c5e\u6027\u524d\uff0c\u9700\u5c06\u7a0b\u5e8f\u5305 ssl/linux64 \u4e0b libxgssl.so \u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u62f7\u8d1d\u5230\u7cfb\u7edf\u76ee\u5f55 /usr/lib\u6216\u8005/usr/lib4 \u76ee\u5f55\u4e0b\u3002 \u865a\u8c37 JDBC \u8bbe\u7f6e\u8fde\u63a5\u5c5e\u6027\u793a\u4f8b\u5982\u4e0b (\u7248\u672c\u53f7\u3001\u5927\u5bf9\u8c61\u63cf\u8ff0\u7b26\u3001\u65f6\u533a\u3001\u5173\u95ed\u8fde\u63a5\u81ea\u52a8\u63d0\u4ea4)\uff1a String url=jdbc:xugu://localhost:5138/System?user=GUEST&password=GUEST&version=110&auto_commit=false&lob_ret=descriptor&time_zone=GMT-8:00\u037e 4.4 \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5 \u5728\u5e94\u7528\u7a0b\u5e8f\u5c06\u865a\u8c37 JDBC \u9a71\u52a8\u52a0\u8f7d\u5230\u7cfb\u7edf\u5185\u5b58\u4e2d\u540e\uff0c\u53ef\u901a\u8fc7 DriverManager \u7c7b\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u65b9\u6cd5\u5982\u4e0b\uff1a DriverManager.getConnection(String url)\u037e DriverManager.getConnection(String url,Properties)\u037e DriverManager.getConnection(String url,String user,String password)\u037e \u4e94. \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u6e90\u548c\u8fde\u63a5\u6c60 \u901a\u8fc7 DriverManager \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u4ee5\u5916\uff0c\u8fd8\u53ef\u4ee5\u4f7f\u7528\u6570\u636e\u6e90\u6216\u8fde\u63a5\u6c60\u65b9\u5f0f\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u3002\u901a\u8fc7\u6570\u636e\u6e90\u65b9\u5f0f\u6216\u8fde\u63a5\u6c60\u65b9\u5f0f\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u6709\u4ee5\u4e0b\u4f18\u70b9\uff1a - \u8d44\u6e90\u91cd\u7528 \u7531\u4e8e\u6570\u636e\u5e93\u8fde\u63a5\u5f97\u5230\u91cd\u7528\uff0c\u907f\u514d\u4e86\u9891\u7e41\u521b\u5efa\u3001\u91ca\u653e\u8fde\u63a5\u5f15\u8d77\u7684\u5927\u91cf\u6027\u80fd\u5f00\u9500\u3002\u5728\u51cf\u5c11\u7cfb\u7edf\u6d88\u8017\u7684\u57fa\u7840\u4e0a\uff0c\u53e6\u4e00\u65b9\u9762\u4e5f\u589e\u8fdb\u4e86\u7cfb\u7edf\u8fd0\u884c\u73af\u5883\u7684\u5e73\u7a33\u6027\uff08\u51cf\u5c11\u5185\u5b58\u788e\u7247\u4ee5\u53ca\u6570\u636e\u5e93\u4e34\u65f6\u8fdb\u7a0b/\u7ebf\u7a0b\u7684\u6570\u91cf\uff09\u3002 - \u66f4\u5feb\u7684\u7cfb\u7edf\u54cd\u5e94 \u6570\u636e\u5e93\u8fde\u63a5\u6c60\u5728\u521d\u59cb\u5316\u8fc7\u7a0b\u4e2d\uff0c\u5f80\u5f80\u5df2\u7ecf\u521b\u5efa\u4e86\u82e5\u5e72\u6570\u636e\u5e93\u8fde\u63a5\u7f6e\u4e8e\u6c60\u4e2d\u5907\u7528\u3002\u6b64\u65f6\u8fde\u63a5\u7684\u521d\u59cb\u5316\u5de5\u4f5c\u5747\u5df2\u5b8c\u6210\u3002\u5bf9\u4e8e\u4e1a\u52a1\u8bf7\u6c42\u5904\u7406\u800c\u8a00\uff0c\u76f4\u63a5\u5229\u7528\u73b0\u6709\u53ef\u7528\u8fde\u63a5\uff0c\u907f\u514d\u4e86\u6570\u636e\u5e93\u8fde\u63a5\u521d\u59cb\u5316\u548c\u91ca\u653e\u8fc7\u7a0b\u7684\u65f6\u95f4\u5f00\u9500\uff0c\u4ece\u800c\u7f29\u51cf\u4e86\u7cfb\u7edf\u6574\u4f53\u54cd\u5e94\u65f6\u95f4\u3002 - \u65b0\u7684\u8d44\u6e90\u5206\u914d\u624b\u6bb5 \u5bf9\u4e8e\u591a\u5e94\u7528\u5171\u4eab\u540c\u4e00\u6570\u636e\u5e93\u7684\u7cfb\u7edf\u800c\u8a00\uff0c\u53ef\u5728\u5e94\u7528\u5c42\u901a\u8fc7\u6570\u636e\u5e93\u8fde\u63a5\u7684\u914d\u7f6e\uff0c\u9650\u5236\u5355\u4e00\u5e94\u7528\u7533\u8bf7\u6570\u636e\u5e93\u8fde\u63a5\u6570\uff0c\u4ece\u800c\u907f\u514d\u5355\u4e00\u5e94\u7528\u72ec\u5360\u6240\u6709\u6570\u636e\u5e93\u8d44\u6e90\u3002 \u865a\u8c37 JDBC \u4e2d\u6570\u636e\u6e90\u5b9e\u73b0\u7c7b\u4e3a com.xugu.pool.XgDataSource\uff0c\u8fde\u63a5\u6c60\u5b9e\u73b0\u7c7b\u4e3acom.xugu.pool \u5305\u4e2d\u7684 XgDataSource\u3001XgPooledConnection\u3001XgConnectionPoolDataSource\u3001XgConnectionEventListener\u3001XgConnectionEvent\u3002 5.1 \u4f7f\u7528\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u6e90\u521b\u5efa\u8fde\u63a5 XgDataSource \u63d0\u4f9b set \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u6e90\u8fde\u63a5\u5c5e\u6027\uff1a \u793a\u4f8b\uff1a\u901a\u8fc7 XgDataSource \u4e0e\u865a\u8c37\u6570\u636e\u5e93\u5efa\u7acb\u8fde\u63a5 com.xugu.pool.XgDataSource ds = new com.xugu.pool.XgDataSource()\u037e ds.setUrl(\"jdbc:xugu://127.0.0.1:5138/db\")\u037e ds.setUser(\"SYSDBA\")\u037e ds.setPassword(\"SYSDBA\")\u037e Properties pro = new Properties()\u037e pro.setProperty(\"return_rowid\", \"true\")\u037e pro.setProperty(\"auto_commit\", \"off\")\u037e ds.setPro(pro)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u767b\u5f55\u4e32\u3002url\u4e3a\u6570\u636e\u5e93\u767b\u5f55\u4e32 setUrl(String url)\uff1b //\u6307\u5b9a\u6570\u636e\u5e93\u670d\u52a1\u5668\u3002host\u4e3a\u670d\u52a1\u5668\u5730\u5740 setHostName(String host)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u540d\u3002dbName\u4e3a\u6570\u636e\u5e93\u540d setDatabaseName(String dbName)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u7aef\u53e3\u53f7\u3002port\u4e3a\u6570\u636e\u5e93\u7aef\u53e3\u53f7 setPort(int port)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u7528\u6237\u3002userName\u4e3a\u6570\u636e\u5e93\u767b\u5f55\u7528\u6237\u540d setUser(String userName)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u767b\u5f55\u5bc6\u7801\u3002passWord\u4e3a\u6570\u636e\u5e93\u767b\u5f55\u5bc6\u7801 setPassword(Stirng passWord)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u767b\u5f55\u53c2\u6570\u3002ds_pro\u4e3a\u6570\u636e\u5e93\u8fde\u63a5\u53c2\u6570 setPro(Properties ds_pro)\uff1b // \u901a\u8fc7\u6570\u636e\u6e90\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5 Connection conn = ds.getConnection()\u037e \u5728 com.xugu.pool.XgDataSource \u7c7b\u4e2d\u901a\u8fc7 setXX() \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u6e90\u7684\u8fde\u63a5\u5c5e\u6027\uff0c\u82e5\u672a\u6307\u5b9a\u5219\u4f7f\u7528\u9ed8\u8ba4\u5c5e\u6027\u503c\uff1a\u6570\u636e\u5e93\u670d\u52a1\u5668\u5730\u5740\u9ed8\u8ba4\u4e3a\u201clocalhost\u201d \uff0c\u8fde\u63a5\u6570\u636e\u5e93\u9ed8\u8ba4\u4e3a\u201cSYSTEM\u201d \uff0c\u8bbf\u95ee\u7aef\u53e3\u53f7\u9ed8\u8ba4\u4e3a\u201c5138\u201d \uff0c\u8bbf\u95ee\u7528\u6237\u540d\u9ed8\u8ba4\u4e3a\u201cGUEST\u201d \uff0c\u7528\u6237\u5bc6\u7801\u9ed8\u8ba4\u4e3a\u201cGUEST\u201d \u3002URL \u9ed8\u8ba4\u8fde\u63a5\u4e32\u4e3a\u201cjdbc:xugu://127.0.0.1:5138/SYSTEM?user=GUEST&password=GUEST&version=110\u201d\u3002\u6570\u636e\u6e90\u5efa\u7acb\u540e\uff0c\u53ef\u901a\u8fc7\u8c03\u7528 XgDataSource \u7c7b\u4e2d\u7684 getConnection() \u548c getConnection(String username,String password) \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u3002 5.2 \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u6c60 \u8fde\u63a5\u6c60\u6280\u672f\u7684\u6838\u5fc3\u601d\u60f3\u662f\uff1a\u8fde\u63a5\u590d\u7528\uff0c\u901a\u8fc7\u5efa\u7acb\u4e00\u4e2a\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u4ee5\u53ca\u4e00\u5957\u8fde\u63a5\u4f7f\u7528\u3001\u5206\u914d\u3001\u7ba1\u7406\u7b56\u7565\uff0c\u8be5\u8fde\u63a5\u6c60\u4e2d\u7684\u8fde\u63a5\u53ef\u4ee5\u5f97\u5230\u9ad8\u6548\u3001\u5b89\u5168\u7684\u590d\u7528\uff0c\u907f\u514d\u4e86\u6570\u636e\u5e93\u8fde\u63a5\u9891\u7e41\u5efa\u7acb\u3001\u5173\u95ed\u7684\u5f00\u9500\u3002 \u865a\u8c37 JDBC \u8fde\u63a5\u6c60\u5b9e\u73b0\u7c7b\u5bf9\u865a\u8c37\u6570\u636e\u5e93\u539f\u59cb\u8fde\u63a5\u8fdb\u884c\u4e86\u5c01\u88c5\uff0c\u4ece\u800c\u65b9\u4fbf\u4e86\u6570\u636e\u5e93\u5e94\u7528\u5bf9\u4e8e\u8fde\u63a5\u7684\u4f7f\u7528\uff08\u7279\u522b\u662f\u5bf9\u4e8e\u4e8b\u52a1\u5904\u7406\uff09\uff0c\u63d0\u9ad8\u4e86\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u6548\u7387\uff0c\u4e5f\u6b63\u662f\u56e0\u4e3a\u8fd9\u4e2a\u5c01\u88c5\u5c42\u7684\u5b58\u5728\uff0c\u9694\u79bb\u4e86\u5e94\u7528\u7684\u672c\u8eab\u7684\u5904\u7406\u903b\u8f91\u548c\u5177\u4f53\u6570\u636e\u5e93\u8bbf\u95ee\u903b\u8f91\uff0c\u4f7f\u5e94\u7528\u672c\u8eab\u7684\u590d\u7528\u6210\u4e3a\u53ef\u80fd\u3002\u8fde\u63a5\u6c60\u4e3b\u8981\u7531\u4e09\u90e8\u5206\u7ec4\u6210\uff1a\u8fde\u63a5\u6c60\u7684\u5efa\u7acb\u3001\u8fde\u63a5\u6c60\u4e2d\u8fde\u63a5\u7684\u4f7f\u7528\u7ba1\u7406\u3001\u8fde\u63a5\u6c60\u7684\u5173\u95ed\u3002 \u865a\u8c37 JDBC \u8fde\u63a5\u6c60\u7684\u57fa\u672c\u601d\u60f3\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u5efa\u7acb\u4e00\u4e2a\u201c\u7f13\u51b2\u6c60\u201d\u3002\u9884\u5148\u5728\u201c\u7f13\u51b2\u6c60\u201d\u4e2d\u653e\u5165\u4e00\u5b9a\u6570\u91cf\u7684\u8fde\u63a5\uff0c\u5f53\u9700\u8981\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65f6\uff0c\u53ea\u9700\u4ece\u201c\u7f13\u51b2\u6c60\u201d\u4e2d\u53d6\u51fa\u4e00\u4e2a\uff0c\u4f7f\u7528\u5b8c\u6bd5\u4e4b\u540e\u518d\u653e\u56de\u53bb\u3002\u901a\u8fc7\u8bbe\u5b9a\u8fde\u63a5\u6c60\u6700\u5927\u8fde\u63a5\u6570\u6765\u9632\u6b62\u7cfb\u7edf\u65e0\u5c3d\u7684\u4e0e\u6570\u636e\u5e93\u8fde\u63a5\u3002\u4ea6\u53ef\u901a\u8fc7\u8fde\u63a5\u6c60\u7684\u7ba1\u7406\u673a\u5236\u76d1\u89c6\u6570\u636e\u5e93\u7684\u8fde\u63a5\u6570\u91cf\u3001\u4f7f\u7528\u60c5\u51b5\uff0c\u4e3a\u7cfb\u7edf\u5f00\u53d1\u3001\u6d4b\u8bd5\u53ca\u6027\u80fd\u8c03\u6574\u63d0\u4f9b\u4f9d\u636e\u3002 \u5f53\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u5b8c\u6570\u636e\u5e93\u8fde\u63a5\u8c03\u7528\u8fde\u63a5\u5173\u95ed\u65b9\u6cd5\u65f6\uff0c\u8be5\u8fde\u63a5\u5e76\u672a\u9500\u6bc1\uff0c\u800c\u662f\u88ab\u5f52\u8fd8\u7ed9\u8fde\u63a5\u6c60\u7b49\u5f85\u4e0b\u6b21\u7ee7\u7eed\u8c03\u7528\u3002 {.is-info} \u865a\u8c37 JDBC \u5b9e\u73b0\u8fde\u63a5\u6c60\u670d\u52a1\u6240\u63d0\u4f9b\u7684\u63a5\u53e3\u7c7b\u5982\u4e0b\uff1a - XgDataSource \u5b9e\u73b0 javax.sql.DataSource \u63a5\u53e3\uff1b - XgPooledConnection \u5b9e\u73b0 javax.sql.PooledConnection \u63a5\u53e3\uff1b - XgConnectionPoolDataSource \u5b9e\u73b0 javax.sql.ConnectionPoolDataSource \u63a5\u53e3\uff1b - XgConnectionEventListener \u5b9e\u73b0 javax.sql.ConnectionEventListener \u63a5\u53e3\uff1b - XgConnectionEvent \u7ee7\u627f\u81ea javax.sql.ConnectionEvent \u7c7b\u3002 \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u4e2d\u7684\u8fde\u63a5\u5747\u662f\u901a\u8fc7\u6570\u636e\u6e90\u5efa\u7acb\u7684\uff0c\u6545\u800c XgConnectionPoolDataSource \u7ee7\u627f\u4e86 com.xugu.pool.XgDataSource \u7c7b\u3002\u7528\u6237\u4ea6\u53ef\u901a\u8fc7 XgConnectionPoolDataSource \u5bf9\u8c61\u8bbe\u7f6e\u6570\u636e\u6e90\u5c5e\u6027\u548c\u8fde\u63a5\u6c60\u5c5e\u6027\uff1a //\u6700\u5c0f\u8fde\u63a5\u6570 setMinIdle(int min) //\u6700\u5927\u8fde\u63a5\u6570 setMaxActive(int max) //\u767b\u5f55\u7a7a\u95f2\u65f6\u95f4 setLoginTimeout(int time) //\u6700\u5927\u7b49\u5f85\u8fde\u63a5\u8d85\u65f6 setMaxWaitTime(long waitTime) \u5176\u4e2d\uff1asetLoginTimeout() \u548c setMaxWaitTime() \u65b9\u6cd5\u4e2d\u53c2\u6570\u5355\u4f4d\u4e3a\u6beb\u79d2\uff0c\u5176\u4ed6\u65b9\u6cd5\u4e2d\u53c2\u6570\u5355\u4f4d\u4e3a\u79d2\u3002 \u793a\u4f8b\uff1a\u521b\u5efa\u4e00\u4e2a\u865a\u8c37 JDBC \u8fde\u63a5\u6c60\uff0c\u5e76\u901a\u8fc7\u8fde\u63a5\u6c60\u83b7\u53d6\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u3002 XgConnectionPoolDataSource CPDSource = new XgConnectionPoolDataSource()\u037e CPDSource.setHostName(\u201clocalhost\u201d)\u037e CPDSource.setPort(5138)\u037e CPDSource.setDatabaseName(\u201cxuguNew\u201d)\u037e CPDSource.setUser(\u201cSYSDBA\u201d)\u037e CPDSource.setPassword(\u201cSYSDBA\u201d)\u037e CPDSource.setUrl(\"jdbc:xugu://localhost:5138/xuguNew)\u037e CPDSource.setMaxActive(50)\u037e CPDSource.setMinIdle(5)\u037e CPDSource.setLoginTimeout(3000)\u037e CPDSource.setMaxWaitTime(3000)\u037e XgPooledConnection Pconn = (XgPooledConnection)CPDSource.getPooledConnection()\u037e Connection conn = Pconn.getConnection()\u037e \u516d. \u865a\u8c37\u6570\u636e\u5e93\u7684JDBC\u4ea4\u4e92\u6d41\u7a0b \u4f7f\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u5b9e\u73b0\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u4ea4\u4e92\u7684\u4e00\u822c\u4f7f\u7528\u6b65\u9aa4\uff1a\u5bfc\u5165\u865a\u8c37 JDBC \u9a71\u52a8\u5305 \u2192 \u52a0\u8f7d\u865a\u8c37 JDBC \u9a71\u52a8\u7a0b\u5e8f \u2192 \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5 Connection \u2192 \u521b\u5efa\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61 Statement \u2192 \u6267\u884c SQL \u8bed\u53e5 \u2192 \u5904\u7406\u6267\u884c\u7ed3\u679c ResultSet \u2192 \u91ca\u653e\u8d44\u6e90\u3002 - \u7b2c 1 \u6b65\uff1a\u5bfc\u5165\u865a\u8c37 JDBC \u9a71\u52a8\u5305 - \u7b2c 2 \u6b65\uff1a\u6ce8\u518a\u9a71\u52a8 (\u4ec5\u505a\u4e00\u6b21) - \u7b2c 3 \u6b65\uff1a\u5efa\u7acb\u8fde\u63a5 (Connection) - \u7b2c 4 \u6b65\uff1a\u521b\u5efa\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61 (Statement) - \u7b2c 5 \u6b65\uff1a\u6267\u884c SQL \u8bed\u53e5 - \u7b2c 6 \u6b65\uff1a\u5904\u7406\u6267\u884c\u7ed3\u679c (ResultSet) - \u7b2c 7 \u6b65\uff1a\u91ca\u653e\u8d44\u6e90 6.1 \u5bfc\u5165\u865a\u8c37JDBC\u9a71\u52a8\u5305 \u4e0b\u8f7d\u865a\u8c37\u6570\u636e\u5e93\u4e13\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u5305 (cloudjdbc-*.*.*.jar)\uff0c\u5e76\u5bfc\u5165\u5230\u5e94\u7528\u7a0b\u5e8f\u4e2d\u3002 6.2 \u52a0\u8f7d\u865a\u8c37JDBC\u9a71\u52a8 \u865a\u8c37 JDBC \u9a71\u52a8\u7a0b\u5e8f\u4e2d Driver \u63a5\u53e3\u5b9e\u73b0\u7c7b\u4e3a com.xugu.cloudjdbc.Driver\u3002\u52a0\u8f7d\u9a71\u52a8\u65b9\u5f0f\u4e3a DriverManager.registerDriver(new com.xugu.cloudjdbc.Driver()) \u6216Class.forName(\u201ccom.xugu.cloudjdbc.Driver\u201d)\u3002 6.3 \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5 \u5efa\u7acb\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u7684\u65b9\u5f0f\u6709\u591a\u79cd\uff0c\u53ef\u6839\u636e\u5e94\u7528\u7a0b\u5e8f\u5b9e\u9645\u4f7f\u7528\u573a\u666f\u9009\u62e9\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65b9\u5f0f\u3002\u5e38\u89c1\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65b9\u5f0f\u5982\u4e0b\uff1a - \u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u4f7f\u7528 DriverManager \u83b7\u5f97\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\uff1b - \u4f7f\u7528\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u6e90/\u8fde\u63a5\u6c60\u7684\u65b9\u5f0f\u83b7\u53d6\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\uff1b - \u4f7f\u7528\u7b2c\u4e09\u65b9\u901a\u7528\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u65b9\u5f0f\u83b7\u53d6\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u3002 \u5982\uff1adruid\u3001c3p0\u3001dbcp\u3001JNDI \u7b49\u3002 6.3.1 \u6253\u5f00\u6570\u636e\u5e93\u8fde\u63a5 \u6253\u5f00\u6570\u636e\u5e93\u8fde\u63a5\u5373\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u5bf9\u8c61 Connection \u7c7b\u3002 \u5982\uff1aDriverManager \u901a\u8fc7 getConnection() \u65b9\u6cd5\u83b7\u53d6 Connection \u7c7b\u5bf9\u8c61\u3002DriverManager \u7684 getConnection() \u65b9\u6cd5\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\u7684\u65b9\u5f0f\u4ea6\u6709\u591a\u79cd\u3002\u4ee5\u4e0b\u4e3a\u5e38\u89c1\u65b9\u5f0f\uff1a - getConnection(String url) \u53c2\u6570\u8bf4\u660e\uff1a - url\uff1a\u8bbf\u95ee\u6570\u636e\u5e93\u7684 URL \u8def\u5f84\u3002 \u793a\u4f8b\uff1a \u4e0b\u9762\u7684\u4ee3\u7801\u5229\u7528 getConnection \u65b9\u6cd5\u521b\u5efa\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u3002 ``` public Connection getConnection(){ Connection con=null\u037e try{ //\u6ce8\u518c\u6570\u636e\u5e93\u9a71\u52a8 Class.forName(\"com.xugu.cloudjdbc.Driver\")\u037e //\u5b9a\u4e49\u8fde\u63a5\u6570\u636e\u5e93\u7684url String url = \"jdbc:xugu://localhost:5138/db?user=user1\uff06password=pwd\"\u037e //\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5 con = DriverManager.getConnection(url)\u037e System.out.println(\"\u6570\u636e\u5e93\u8fde\u63a5\u6210\u529f\uff01\")\u037e }catch(Exception e){ e.printStackTrace()\u037e } //\u8fd4\u56de\u4e00\u4e2a\u8fde\u63a5 return con\u037e } ``` getConnection(String url,String user,String password) \u53c2\u6570\u8bf4\u660e\uff1a url\uff1a\u8bbf\u95ee\u6570\u636e\u5e93\u7684 URL \u8def\u5f84\u3002 user\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u7528\u6237\u540d\u3002 password\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u7528\u6237\u5bc6\u7801\u3002 \u793a\u4f8b\uff1a \u4e0b\u9762\u7684\u4ee3\u7801\u5229\u7528 getConnection \u65b9\u6cd5\u521b\u5efa\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u3002 private Connection con; private String user = \"user1\"; //\u5b9a\u4e49\u8fde\u63a5\u6570\u636e\u5e93\u7684\u7528\u6237\u540d private String password = \"pwd\"; //\u5b9a\u4e49\u8fde\u63a5\u6570\u636e\u5e93\u7684\u5bc6\u7801 private String className = \"com.xugu.cloudjdbc.Driver\";//\u5b9a\u4e49\u865a\u8c37JDBC\u9a71\u52a8 private String url = \"jdbc:xugu://localhost:5138/db\"; /\\*\\*\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\\*/ public Connection getConnection(){ try{ Class.forName(className);//\u52a0\u8f7d\u6570\u636e\u5e93\u9a71\u52a8 System.out.println(\"\u6570\u636e\u5e93\u9a71\u52a8\u52a0\u8f7d\u6210\u529f\uff01\"); con = DriverManager.getConnection(url,user,password); //\u8fde\u63a5\u6570\u636e\u5e93 System.out.println(\"\u6210\u529f\u5730\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\uff01\"); }catch(Exception e){ System.out.println(\"\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\u5931\u8d25\uff01\"); con = null; e.printStackTrace(); } finally { If(conn != null){ //\u91ca\u653e\u8fde\u63a5\u8d44\u6e90 conn.close(); } } return con; } getConnection(String url,Properties info) \u53c2\u6570\u8bf4\u660e\uff1a url\uff1a\u8bbf\u95ee\u6570\u636e\u5e93\u7684 URL \u8def\u5f84\u3002 info\uff1a\u4e00\u4e2a\u6301\u4e45\u7684\u5c5e\u6027\u96c6\u5bf9\u8c61\uff0c\u5305\u62ec user \u548c password \u7b49\u5c5e\u6027\u3002 \u793a\u4f8b\uff1a \u4e0b\u9762\u7684\u4ee3\u7801\u5229\u7528 getConnection \u65b9\u6cd5\u521b\u5efa\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u3002 public Connection getConnection(){ Connection con = null; //\u5b9a\u4e49\u6570\u636e\u5e93\u8fde\u63a5\u5bf9\u8c61 Properties info = new Properties(); //\u5b9a\u4e49Properties\u5bf9\u8c61 info.setProperty(\"user\",\"user1\"); //\u8bbe\u7f6eProperties\u5bf9\u8c61\u5c5e\u6027 info.setProperty(\"password\",\"pwd\"); try{ //\u6ce8\u518c\u6570\u636e\u5e93\u9a71\u52a8 Class.forName(\"com.xugu.cloudjdbc.Driver\"); //test\u4e3a\u6570\u636e\u5e93\u540d\u79f0 String url = \"jdbc:xugu://localhost:5138/db\"; //\u83b7\u53d6\u8fde\u63a5\u6570\u636e\u5e93\u7684Connection\u5bf9\u8c61 con = DriverManager.getConnection(url,info); System.out.println(\"\u6570\u636e\u5e93\u8fde\u63a5\u6210\u529f\uff01\"); }catch(Exception e){ e.printStackTrace(); } //\u8fd4\u56de\u4e00\u4e2a\u8fde\u63a5 return con; } 6.3.2 \u8fde\u63a5\u4e8b\u52a1\u7ba1\u7406 \u6570\u636e\u5e93\u4e8b\u52a1 (transaction) \u662f\u8bbf\u95ee\u5e76\u53ef\u80fd\u64cd\u4f5c\u5404\u79cd\u6570\u636e\u9879\u7684\u4e00\u4e2a\u6570\u636e\u5e93\u64cd\u4f5c\u5e8f\u5217\uff0c\u8fd9\u4e9b\u64cd\u4f5c\u8981\u4e48\u5168\u90e8\u6267\u884c, \u8981\u4e48\u5168\u90e8\u4e0d\u6267\u884c\uff0c\u662f\u4e00\u4e2a\u4e0d\u53ef\u5206\u5272\u7684\u5de5\u4f5c\u5355\u4f4d\u3002\u4e8b\u52a1\u7531\u4e8b\u52a1\u5f00\u59cb\u5230\u4e8b\u52a1\u7ed3\u675f\u4e4b\u95f4\u6267\u884c\u7684\u5168\u90e8\u6570\u636e\u5e93\u64cd\u4f5c\u7ec4\u6210\u3002 \u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\uff0c\u5373\u5f53\u4e00\u6761 SQL \u8bed\u53e5\u6267\u884c\u5b8c\u6210\u540e\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u5c06\u81ea\u52a8\u63d0\u4ea4\u8be5\u8bed\u53e5\u6240\u5728\u4e8b\u52a1\u3002\u5728\u865a\u8c37 JDBC \u9a71\u52a8\u4e2d\u63a7\u5236\u4e8b\u52a1\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a - \u901a\u8fc7\u6570\u636e\u5e93\u8fde\u63a5 URL \u4e32\u7684 auto_commit \u5c5e\u6027\uff0c\u63a7\u5236\u4e8b\u52a1\u7684\u5f00\u542f\u4e0e\u5173\u95ed\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b auto_commit \u5c5e\u6027\u4e3a on\uff0c\u5373\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u3002 - \u901a\u8fc7 Connection \u7c7b\u7684 setAutoCommit(boolean commit) \u65b9\u6cd5\u63a7\u5236\u4e8b\u52a1\u7684\u5f00\u542f\u4e0e\u5173\u95ed\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b commit \u5c5e\u6027\u4e3a TRUE\uff0c\u5373\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u3002 \u5728\u7981\u7528\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u4e0b\uff0c\u4f7f\u7528 Connection \u7c7b\u7684 commit() \u65b9\u6cd5\u63d0\u4ea4 SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u505a\u7684\u66f4\u6539\uff0c\u800c Connection \u7c7b\u7684 rollback() \u65b9\u6cd5\u5c06\u56de\u6eda SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u7684\u66f4\u6539\uff0c\u4e0a\u8ff0\u4e24\u79cd\u65b9\u6cd5\u6267\u884c\u5b8c\u6210\u540e\u5747\u5c06\u91ca\u653e\u4e8b\u52a1\u6301\u6709\u7684\u5168\u90e8\u9501\u8d44\u6e90\u3002 \u4e8b\u52a1\u4ec5\u5bf9\u6570\u636e\u5e93 DML \u64cd\u4f5c\u6709\u6548\u3002 {.is-info} \u4ee5\u4e0b\u4e3a\u4f7f\u7528 setAutoCommit() \u65b9\u6cd5\u63a7\u5236\u4e8b\u52a1\u63d0\u4ea4\u7684\u793a\u4f8b\u4ee3\u7801\uff1a //\u8bbe\u7f6e\u4e8b\u52a1\u4e3a\u975e\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f conn.setAutoCommit(false)\u037e //\u521b\u5efa\u6570\u636e\u5e93Statement\u5bf9\u8c61 Statement stm = conn.createStatement()\u037e //\u6570\u636e\u5e93\u4e8b\u52a1\u6267\u884cSQL\u8bed\u53e5 String sql = \"insert into test (comp_id,comp_name) values(1,'comp')\"\u037e //\u6267\u884c\u9759\u6001SQL\u8bed\u53e5 stm.execute(sql)\u037e //\u6570\u636e\u5e93\u9884\u5904\u7406SQL\u8bed\u53e5 PreparedStatement pstm = conn. prepareStatement(\u201cupdate test set id=? where comp_name=?\u201d) //\u9884\u5904\u7406SQL\u8bed\u53e5\u7b2c\u4e00\u4e2a\u53c2\u6570\u8d4b\u503c pstm.setInt(1,15)\u037e //\u9884\u5904\u7406SQL\u8bed\u53e5\u7b2c\u4e8c\u4e2a\u53c2\u6570\u8d4b\u503c pstm.setString(2,'DBMS')\u037e //\u6267\u884c\u9884\u5904\u7406SQL\u8bed\u53e5 pstm.execute()\u037e //\u63d0\u4ea4\u4e8b\u52a1 conn.commit()\u037e //\u5220\u9664\u8868\u4e2d\u6307\u5b9a\u884c\u6570\u636e stm.execute(\u201cdelete from test where id=15\u201d)\u037e //\u4e8b\u52a1\u56de\u6eda\u65b9\u6cd5 conn.rollback()\u037e \u4e0a\u9762\u4ee3\u7801\u4e2d\u6267\u884c\u63d0\u4ea4\u4e8b\u52a1\u64cd\u4f5c\uff0c\u6267\u884c\u9759\u6001 SQL \u8bed\u53e5\u4e0e\u6267\u884c\u9884\u5904\u7406 SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u7684\u66f4\u6539\u5c06\u6c38\u4e45\u751f\u6548\uff1b\u800c\u540e\u6267\u884c\u7684\u5220\u9664\u8868\u4e2d\u6307\u5b9a\u884c\u6570\u636e\u64cd\u4f5c\uff0c\u56e0\u5176\u540e\u8c03\u7528\u7684 rollback() \u65b9\u6cd5\uff0cdelete \u547d\u4ee4\u5bf9\u6570\u636e\u5e93\u7684\u6570\u636e\u66f4\u6539\u5c06\u88ab\u56de\u6eda\u6389\uff0c\u6545\u800c\u5bf9\u6570\u636e\u5e93\u7684\u5220\u9664\u64cd\u4f5c\u4e0d\u4f1a\u751f\u6548\u3002 6.3.3 \u8fde\u63a5\u4e8b\u52a1\u63a7\u5236\uff0cSavepoint\u63a5\u53e3 JDBC \u89c4\u8303 3.0 \u4e2d\u4e3a\u4e86\u589e\u52a0\u5bf9\u4e8b\u52a1\u7684\u63a7\u5236\uff0c\u65b0\u589e Savepoint \u63a5\u53e3\uff0c\u5176\u4ee3\u8868\u4e8b\u52a1\u4e2d\u7684\u4e00\u4e2a\u903b\u8f91\u4e8b\u52a1\u70b9\u3002\u5728\u975e\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u4e0b\uff0c\u4e00\u4e2a\u4e8b\u52a1\u4e2d\u53ef\u4ee5\u8bbe\u7f6e\u591a\u4e2a Savepoint\uff0c\u5728\u4ee3\u7801\u4e2d\u8fdb\u884c\u4e8b\u52a1\u56de\u6eda\u64cd\u4f5c\u65f6\uff0c\u53ef\u4ee5\u6307\u5b9a\u4e8b\u52a1\u56de\u6eda\u5230\u6307\u5b9a Savepoint \u4f4d\u7f6e\uff0c\u6307\u5b9a\u56de\u6eda\u4f4d\u7f6e\u524d\u7684\u4e8b\u52a1\u64cd\u4f5c\u4ecd\u7136\u4fdd\u7559\u3002\u6b64\u63a5\u53e3\u5927\u5927\u63d0\u9ad8\u4e86\u4e8b\u52a1\u5904\u7406\u7684\u7c92\u5ea6\uff0c\u65b9\u4fbf\u5e94\u7528\u7a0b\u5e8f\u63a7\u5236\u4e8b\u52a1\u5904\u7406\u903b\u8f91\u3002 \u793a\u4f8b\uff1a\u8fde\u63a5\u4e8b\u52a1\u63a7\u5236\u63a5\u53e3 Savepoint \u4f7f\u7528 //\u8bbe\u7f6e\u975e\u81ea\u52a8\u63d0\u4ea4 conn.setAutoCommit(false); //\u521b\u5efaStatement\u5bf9\u8c61 Statement stm = conn.createStatement(); //\u6267\u884cSQL\u547d\u4ee4 stm.execute(sql1); stm.execute(sql2); //\u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\u70b9save1 java.sql.Savepoint save1 =conn.setSavepoint(\"save_1\"); stm.execute(sql3); //\u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\u70b9save2 java.sql.Savepoint save2 =conn.setSavepoint(\"save_2\"); stm.execute(sql4); //\u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\u70b9save3 java.sql.Savepoint save3 =conn.setSavepoint(\"save_3\"); stm.execute(sql5); //\u56de\u6eda\u4e8b\u52a1\u5230\u56de\u6eda\u70b9save3 conn.rollback(save3); conn.commit(); \u4ee5\u4e0a\u4ee3\u7801\u6bb5\u4e2d\uff0c\u4e8b\u52a1\u6267\u884c\u8bed\u53e5 sql5 \u5c06\u88ab\u56de\u6eda\u6389\u3002 6.4 \u521b\u5efa\u6267\u884cSQL\u8bed\u53e5\u5bf9\u8c61 \u5728\u6570\u636e\u5e93\u6807\u51c6\u4e2d\uff0c\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61\u5206\u4e3a\u4e09\u7c7b\uff1a\u6267\u884c\u9759\u6001 SQL \u8bed\u53e5\u7684 Statement \u5bf9\u8c61\u3001\u6267\u884c\u9884\u7f16\u8bd1 SQL \u8bed\u53e5\u7684 PreparedStatement \u5bf9\u8c61\u4ee5\u53ca\u6267\u884c\u6570\u636e\u5e93\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\u7684 CallableStatement \u5bf9\u8c61\u3002 6.4.1 \u6267\u884cSQL\u5bf9\u8c61Statement Statement \u5bf9\u8c61\u7528\u4e8e\u6267\u884c\u9759\u6001 SQL \u8bed\u53e5\u548c\u83b7\u5f97 SQL \u4ea7\u751f\u7684\u7ed3\u679c\u3002\u5728\u865a\u8c37 JDBC \u9a71\u52a8\u4e2d\uff0c\u865a\u8c37\u6570\u636e\u5e93 DDL \u64cd\u4f5c\u5747\u901a\u8fc7 Statement \u5bf9\u8c61\u6765\u6267\u884c\u3002 Statement \u5bf9\u8c61\u901a\u8fc7 Connection \u7c7b\u7684 createStatement() \u65b9\u6cd5\u521b\u5efa\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a //\u521b\u5efa\u6267\u884cSQL\u8bed\u53e5\u5bf9\u8c61Statement Statement stm = conn.createStatement()\u037e 6.4.2 \u6267\u884cSQL\u5bf9\u8c61PreparedStatement PreparedStatement \u5bf9\u8c61\u4f7f\u7528\u65f6\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u5bf9\u6267\u884c SQL \u8bed\u53e5\u8fdb\u884c\u9884\u7f16\u8bd1\u5904\u7406\uff0c\u9884\u7f16\u8bd1 SQL \u8bed\u53e5\u5c06\u5728\u672a\u6765\u7684\u4f7f\u7528\u4e2d\u88ab\u91cd\u7528\u3002\u4e0e Statement \u5bf9\u8c61\u76f8\u6bd4\uff0cPreparedStatement \u5bf9\u8c61\u64cd\u4f5c\u591a\u6761 SQL \u8bed\u53e5\u7684\u6548\u7387\u66f4\u9ad8\u3002 \u7ecf\u8fc7\u9884\u7f16\u8bd1\u5e76\u5b58\u50a8\u5728 PreparedStatement \u5bf9\u8c61\u4e2d\u7684 SQL \u8bed\u53e5\uff0c\u901a\u8fc7 Connection \u7c7b\u7684 prepareStatement() \u65b9\u6cd5\u521b\u5efa\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a //\u521b\u5efa\u6267\u884c\u9884\u7f16\u8bd1SQL\u8bed\u53e5\u5bf9\u8c61PreparedStatement PreparedStatement preStatement = conn.prepareStatement(\u201c\u9884\u7f16\u8bd1SQL\u8bed\u53e5\u201d); \u9884\u5904\u7406 PreparedStatement \u5bf9\u8c61\u76f8\u5bf9\u4e8e\u9759\u6001 Statement \u5bf9\u8c61\u7684\u4f18\u52bf\uff1a - PreparedStatement \u53ef\u4ee5\u52a8\u6001\u4f20\u5165\u53c2\u6570\u503c\uff1b - PreparedStatement \u6bd4 Statement \u66f4\u5feb\uff1b PreparedStatement \u4f1a\u5c06 SQL \u8bed\u53e5\u9884\u7f16\u8bd1\u5728\u6570\u636e\u5e93\u7cfb\u7edf\u4e2d\uff0c\u6267\u884c\u8ba1\u5212\u540c\u6837\u4f1a\u88ab\u7f13\u5b58\u8d77\u6765\uff0c\u5b83\u5141\u8bb8\u6570\u636e\u5e93\u505a\u53c2\u6570\u5316\u67e5\u8be2\u3002\u4f7f\u7528\u9884\u5904\u7406\u8bed\u53e5\u6bd4\u666e\u901a\u7684 Statement \u67e5\u8be2\u66f4\u5feb\uff0c\u56e0\u505a\u7684\u5de5\u4f5c\u66f4\u5c11 (\u6570\u636e\u5e93\u5bf9 SQL \u8bed\u53e5\u7684\u5206\u6790\u3001\u7f16\u8bd1\u3001\u4f18\u5316\u5df2\u7ecf\u5728\u7b2c\u4e00\u6b21\u67e5\u8be2\u524d\u5b8c\u6210\u4e86)\u037e - PreparedStatement \u53ef\u4ee5\u9632\u6b62 SQL \u6ce8\u5165\u5f0f\u653b\u51fb\u3002 PreparedStatement \u5728\u4f7f\u7528\u53c2\u6570\u5316\u67e5\u8be2\u7684\u60c5\u51b5\u4e0b\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u4e0d\u4f1a\u5c06\u53c2\u6570\u7684\u5185\u5bb9\u89c6\u4e3a SQL \u6307\u4ee4\u7684\u4e00\u90e8\u5206\u6765\u5904\u7406\uff0c\u800c\u662f\u5728\u6570\u636e\u5e93\u5b8c\u6210 SQL \u6307\u4ee4\u7684\u7f16\u8bd1\u540e\uff0c\u624d\u5957\u7528\u53c2\u6570\u8fd0\u884c\uff0c\u56e0\u6b64\u5c31\u7b97\u53c2\u6570\u4e2d\u542b\u6709\u7834\u574f\u6027\u7684\u6307\u4ee4\uff0c\u4e5f\u4e0d\u4f1a\u88ab\u6570\u636e\u5e93\u6240\u8fd0\u884c\u3002 6.4.3 \u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u5bf9\u8c61CallableStatement CallableStatement \u5bf9\u8c61\u5b9e\u73b0\u4e86\u4ece Java \u5e94\u7528\u7a0b\u5e8f\u4e2d\u8c03\u7528\u6570\u636e\u5e93\u5b58\u50a8\u8fc7\u7a0b\u3002\u4f46\u6b64\u8c03\u7528\u8fc7\u7a0b\u5e76\u4e0d\u5305\u542b\u5b58\u50a8\u8fc7\u7a0b\u672c\u8eab\uff0c\u56e0\u5b58\u50a8\u8fc7\u7a0b\u5b58\u50a8\u5728\u6570\u636e\u5e93\u4e2d\u3002 CallableStatement \u5bf9\u8c61\u4e3a\u6240\u6709\u7684\u6570\u636e\u5e93\u63d0\u4f9b\u4e86\u4e00\u79cd\u4ee5\u6807\u51c6\u5f62\u5f0f\u8c03\u7528\u5b58\u50a8\u8fc7\u7a0b\u7684\u65b9\u6cd5\uff0c\u901a\u8fc7 Connection \u7c7b\u7684 prepareCall() \u65b9\u6cd5\u521b\u5efa\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a //\u521b\u5efa\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u5bf9\u8c61CallableStatement CallableStatement cstmt= conn.prepareCall(\u201c{call \u5b58\u50a8\u8fc7\u7a0b\u540d(\u53c2\u6570\u8868\u5217)}\u201d); 6.4.4 \u6267\u884cSQL\u8bed\u53e5\u5bf9\u8c61\u5c5e\u6027\u6269\u5145 \u5728\u521b\u5efa\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61\u65f6\uff0c\u53ef\u901a\u8fc7\u6784\u9020\u65b9\u6cd5\u7684\u4e0d\u540c\u53c2\u6570\u8bbe\u7f6e ResultSet \u5bf9\u8c61\u5c5e\u6027\uff0c\u5c5e\u6027\u5305\u62ec\u7ed3\u679c\u7c7b\u578b ResultSetType\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b ResultSetConcurrency\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b ResultSetHoldability\u3002 ResultSetType \u9ed8\u8ba4\u4e3a ResultSet.TYPE_SCROLL_INSENSITIVE\uff1a\u652f\u6301\u7ed3\u679c\u96c6 backforward\u3001last\u3001first \u7b49\u64cd\u4f5c\uff0c\u5bf9\u6570\u636e\u5e93\u4e2d\u5176\u5b83 session \u8fdb\u884c\u7684\u6570\u636e\u66f4\u6539\u4e0d\u654f\u611f\uff1b ResultSetConcurrency \u9ed8\u8ba4\u4e3a ResultSet.CONCUR_READ_ONLY: \u4e0d\u53ef\u66f4\u65b0\u7ed3\u679c\u96c6\uff1b\u8be5\u5c5e\u6027\u4ea6\u53ef\u66f4\u6539\u4e3a ResultSet.CONCUR_UPDATABLE\uff0c\u652f\u6301\u5728 ResultSet \u4e2d\u5bf9\u8bb0\u5f55\u8fdb\u884c\u4fee\u6539\uff0c\u4fee\u6539\u540e\u8bb0\u5f55\u66f4\u65b0\u5230\u6570\u636e\u5e93\uff0c\u4fee\u6539\u64cd\u4f5c\u53ef\u5305\u542b\u63d2\u5165\u3001\u5220\u9664\u6216\u66f4\u65b0\uff1b ResultSetHoldability \u9ed8\u8ba4\u4e3a ResultSet.HOLD_CURSORS_OVER_COMMIT: \u5728\u4e8b\u52a1 commit \u6216 rollback \u540e\uff0cResultSet \u4ecd\u7136\u53ef\u7528\u3002 Connection \u7c7b\u521b\u5efa Statement \u5bf9\u8c61\u6784\u9020\u65b9\u6cd5\uff1a //Statement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 createStatement(int resultSetType,int resultSetConcurrency)\uff1b //Statement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 createStatement(int resultSetType,int resultSetConcurrency, int resultSetHoldability)\uff1b Connection \u7c7b\u521b\u5efa PreparedStatement \u5bf9\u8c61\u6784\u9020\u65b9\u6cd5\uff1a //PreparedStatement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareStatement(String sql, int resultSetType,int resultSetConcurrency) //PrepareStatment\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareStatement(String sql, int resultSetType,int resultSetConcurrency, int resultSetHoldability) Connection \u7c7b\u521b\u5efa CallableStatement \u5bf9\u8c61\u6784\u9020\u65b9\u6cd5\uff1a //CallableStatement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareCall(String sql, int resultSetType,int resultSetConcurrency) //CallableStatement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareCall(String sql, int resultSetType,int resultSetConcurrency, int resultSetHoldability) 6.5 \u6267\u884cSQL\u8bed\u53e5 Statement \u5bf9\u8c61\u5b9a\u4e49\u4e86\u591a\u79cd\u6267\u884c SQL \u8bed\u53e5\u7684\u65b9\u6cd5\uff0c\u7528\u6765\u5904\u7406\u8fd4\u56de\u4e0d\u540c\u7ed3\u679c\u7684 SQL \u547d\u4ee4\uff1a - execute(String sql)\uff1a\u6267\u884c\u53ef\u4ee5\u8fd4\u56de\u591a\u4e2a\u7ed3\u679c\u96c6\u7684 SQL \u8bed\u53e5\u8fd4\u56de\u7c7b\u578b\u4e3a boolean\uff0c\u5982\u679c\u8fd4\u56de\u7684\u662f\u66f4\u65b0\u7684\u6570\u76ee\uff0c\u5219\u8fd4\u56de false\uff1b\u5982\u679c\u8fd4\u56de\u7684\u662f ResultSet \u5bf9\u8c61\uff0c\u5219\u8fd4\u56detrue\u3002 - executeQuery(String sql)\uff1a\u6267\u884c\u8fd4\u56de\u5355\u4e2a ResultSet \u7684 SQL \u8bed\u53e5\u8fd4\u56de\u7c7b\u578b\u4e3a ResultSet \u5bf9\u8c61\u3002 - executeUpdate()\uff1a\u6267\u884c SQL INSERT\u3001UPDATE \u6216 DELETE \u8bed\u53e5\u8fd4\u56de\u503c\u4e3a int \u578b\uff0c\u6570\u636e\u5e93\u53d7\u5f71\u54cd\u7684\u884c\u8ba1\u6570\u3002 - \u6279\u5904\u7406\u65b9\u6cd5\uff1a\u6279\u91cf\u6267\u884c SQL \u8bed\u53e5 clearBatch()\uff1a\u6e05\u7a7a\u5386\u53f2 batch \u547d\u4ee4\uff1b addBatch(String sql)\uff1a\u6dfb\u52a0\u8981\u6267\u884c\u7684 sql\uff1b executeBatch()\uff1a\u6279\u91cf\u6267\u884c sql\u3002 PreparedStatement \u7ee7\u627f\u81ea Statement\uff0c\u5b9a\u4e49\u4e86\u5927\u91cf\u7684 setter \u65b9\u6cd5\u7528\u4e8e\u8bbe\u7f6e\u52a8\u6001 sql\u7684\u53c2\u6570\uff0c\u56e0\u6b64 PreparedStatement \u652f\u6301\u52a8\u6001\u4f20\u53c2\uff1b\u53e6\u5916 PreparedStatement \u5185\u90e8\u5b58\u50a8\u4e86\u89e3\u6790\u7684 sql\uff0c\u53ef\u4ee5\u591a\u6b21\u6267\u884c\u800c\u65e0\u9700\u91cd\u590d\u89e3\u6790\u3002PreparedStatement \u7ee7\u627f\u81ea Statement\uff0cCallableStatement \u7ee7\u627f\u81ea PreparedStatement\uff0c\u6545\u800c\u4e09\u8005\u6267\u884c SQL \u8bed\u53e5\u7684\u65b9\u5f0f\u53ef\u901a\u7528\u3002 6.5.1 \u901a\u8fc7Statement\u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c \u901a\u8fc7 Statement \u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c\u9700\u8981\u6ce8\u610f\u7684\u4e8b\u9879\uff1a - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u524d\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u8bbe\u7f6e\u4e3a FALSE\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\uff0c\u5e76\u8fdb\u884c\u624b\u52a8\u63d0\u4ea4\uff08commit\uff09\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u540e\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u6062\u590d\u4e3a TRUE\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u5f02\u5e38\u53d1\u751f\u65f6\uff0c\u8fdb\u884c rollback(\u56de\u6eda)\u3002 \u793a\u4f8b\uff1a\u901a\u8fc7 Statement \u6279\u91cf\u64cd\u4f5c\u6570\u636e try { //\u521b\u5efaStatement\u5bf9\u8c61 stm = con.createStatement(); //\u8bbe\u7f6e\u4e8b\u52a1\u975e\u81ea\u52a8\u63d0\u4ea4 con.setAutoCommit(false); // \u6dfb\u52a0\u591a\u6761SQL\u8bed\u53e5\u5230\u6279\u5904\u7406\u4e2d stm.addBatch(\"insert into student values(23,'tangbao','\u9ad8\u6570',100)\"); stm.addBatch(\"insert into student values(24,'\u738b\u5b9a','c#',98)\"); stm.addBatch(\"insert into student values(25,'\u738b\u56fd\u4e91','java',90)\"); //\u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c stm.executeBatch(); System.out.println(\"\u63d2\u5165\u6210\u529f!\"); //\u6267\u884c\u6210\u529f\u540e\u8fdb\u884c\u6570\u636e\u63d0\u4ea4 con.commit(); System.out.println(\"\u63d0\u4ea4\u6210\u529f!\"); //\u5173\u95ed\u975e\u81ea\u52a8\u63d0\u4ea4 con.setAutoCommit(true); } catch (SQLException e) { if (!con.isClosed()) { con.rollback(); //\u51fa\u73b0\u5f02\u5e38\uff0c\u56de\u6eda\u4e8b\u52a1 System.out.println(\"\u63d0\u4ea4\u5931\u8d25\uff0c\u56de\u6eda\uff01\"); con.setAutoCommit(true); //\u5173\u95ed\u975e\u81ea\u52a8\u63d0\u4ea4 } } finally { if (stmt != null) { //\u5173\u95ed\u64cd\u4f5c\u5bf9\u8c61 stmt.close(); } } 6.5.2 \u901a\u8fc7PreparedStatement\u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c \u901a\u8fc7 PreparedStatement \u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c\u9700\u8981\u6ce8\u610f\u7684\u4e8b\u9879\uff1a - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u524d\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u8bbe\u7f6e\u4e3a FALSE\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\uff0c\u5e76\u8fdb\u884c\u624b\u52a8\u63d0\u4ea4\uff08commit\uff09\uff0c\u6570\u636e\u91cf\u5927\u65f6\uff0c\u8bbe\u7f6e\u624b\u52a8\u63d0\u4ea4\u95f4\u9694\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u540e\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u6062\u590d\u4e3a TRUE\uff1b \u2022 \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u5f02\u5e38\u53d1\u751f\u65f6\uff0c\u8fdb\u884c rollback(\u56de\u6eda)\uff1b - PreparedStatement \u6267\u884c\u8bed\u53e5\u4e0d\u80fd\u4e3a DDL \u8bed\u53e5\u3002 \u793a\u4f8b\uff1a\u5c06 10000 \u6761\u8bb0\u5f55\u63d2\u5165\u6570\u636e\u5e93\u4e2d\uff0c\u6bcf 100 \u6761\u6267\u884c\u4e00\u6b21\u63d0\u4ea4\u64cd\u4f5c try{ conn.setAutoCommit(false); //\u8bbe\u7f6e\u975e\u81ea\u52a8\u63d0\u4ea4 //\u521b\u5efaPreparedStatement\u5bf9\u8c61 ps = conn.prepareStatement(\"insert into testtab values (?, ?, ?)\"); //\u5faa\u73af\u6dfb\u52a0\u6279\u5904\u7406\u6570\u636e for(int i = 0;i<list.size();i++){ HashMap map = list.get(i);//list\u4e3a\u6570\u636e\u5c01\u88c5\uff0c\u6b64\u5904\u7565 ps.setString(1, map.get(\"id\").toString()); ps.setString(2, map.get(\"name\").toString()); ps.setString(3, map.get(\"age\").toString()); ps.addBatch(); if(mod(i,100)==0){//\u6bcf100\u6761\u6267\u884c\u4e00\u6b21\u6267\u884c\u64cd\u4f5c ps.executeBatch();//\u6267\u884c\u6279\u91cf\u63d2\u5165 conn.commit();//\u6267\u884c\u4e8b\u52a1\u63d0\u4ea4 } } ps.executeBatch();//\u6267\u884c\u6279\u91cf\u63d2\u5165 conn.commit(); //\u63d0\u4ea4\u4e8b\u52a1 }catch(Exception e){ if (!conn.isClosed()) { conn.rollback(); //\u51fa\u73b0\u5f02\u5e38\uff0c\u56de\u6eda\u4e8b\u52a1 System.out.println(\"\u63d0\u4ea4\u5931\u8d25\uff0c\u56de\u6eda\uff01\"); conn.setAutoCommit(true); //\u5173\u95ed\u975e\u81ea\u52a8\u63d0\u4ea4 } } finally { if (ps!= null) { ps.close();//\u5173\u95ed\u64cd\u4f5c\u5bf9\u8c61 } } 6.5.3 CallableStatement\u7ed1\u5b9a\u53c2\u6570 CallableStatement \u5b58\u5728\u4e09\u79cd\u7c7b\u578b\u7684\u53c2\u6570 IN\u3001OUT \u548c INOUT\u3002 - IN\uff1a\u521b\u5efa SQL \u8bed\u53e5\u65f6\u5176\u53c2\u6570\u503c\u672a\u77e5\u3002\u4f7f\u7528 setXXX() \u65b9\u6cd5\u5c06\u503c\u7ed1\u5b9a\u5230 IN \u53c2\u6570\u3002 - OUT\uff1a\u7531 SQL \u8bed\u53e5\u8fd4\u56de\u7684\u53c2\u6570\u503c\u3002\u53ef\u4ee5\u4f7f\u7528 getXXX() \u65b9\u6cd5\u4ece OUT \u53c2\u6570\u4e2d\u68c0\u7d22\u503c\u3002 - INOUT\uff1a\u63d0\u4f9b\u8f93\u5165\u548c\u8f93\u51fa\u503c\u7684\u53c2\u6570\u3002\u4f7f\u7528 setXXX() \u65b9\u6cd5\u7ed1\u5b9a\u53d8\u91cf\u5e76\u4f7f\u7528getXXX() \u65b9\u6cd5\u68c0\u7d22\u503c\u3002 \u793a\u4f8b 1\uff1a\u901a\u8fc7\u53c2\u6570\u4e0b\u6807\u7ed1\u5b9a\u53c2\u6570 //\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\u8bed\u53e5 String sql =\"{call pro_2(?,?,?)}\"; //\u521b\u5efaCallableStatement\u5bf9\u8c61 CallableStatement cstm = conn.prepareCall(sql); //\u901a\u8fc7\u53c2\u6570\u4e0b\u6807\u8bbe\u7f6e\u53c2\u6570(IN\u53c2\u6570) cstm.setInt(1, 20490); //\u6ce8\u518cOUT\u53c2\u6570\u6570\u636e\u7c7b\u578b cstm.registerOutParameter(2, com.xugu.cloudjdbc.Types.VARCHAR); cstm.registerOutParameter(3, com.xugu.cloudjdbc.Types.VARCHAR); //\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528 cstm.execute(); //\u83b7\u53d6\u5b58\u50a8\u8fc7\u7a0b\u8f93\u51fa\u53c2\u6570 String name = (String)cstm.getObject(2); String address = (String)cstm.getObject(3); \u793a\u4f8b 2\uff1a\u901a\u8fc7\u53c2\u6570\u540d\u7ed1\u5b9a\u53c2\u6570 //\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\u8bed\u53e5 CallableStatement pstm = conn.prepareCall(\"insert into tt1 values(:id,:name)\"); //\u901a\u8fc7\u53c2\u6570\u540d\u8bbe\u7f6e\u53c2\u6570(IN\u53c2\u6570) pstm.setInt(\"id\", 1); pstm.setString(\"name\", \"cloud\"); //\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528 pstm.execute(); 6.6 \u5904\u7406\u6267\u884c\u7ed3\u679c ResultSet \u7c7b\u662f\u901a\u8fc7 Statement \u53ca\u5176\u5b50\u7c7b\u6267\u884c SQL \u67e5\u8be2\u8bed\u53e5\u5f97\u5230\u7684\u7ed3\u679c\u96c6\u3002ResultSet \u7c7b\u5305\u542b\u4e09\u4e2a\u91cd\u8981\u5c5e\u6027\uff1aResultSet \u5bf9\u8c61\u5e76\u53d1\u6a21\u5f0f\u3001ResultSet \u5bf9\u8c61\u5149\u6807\u5904\u7406\u65b9\u5411\u3001ResultSet \u5bf9\u8c61\u5149\u6807\u7c7b\u578b\u3002ResultSet \u7c7b\u5177\u6709\u6307\u5411\u5f53\u524d\u7ed3\u679c\u96c6\u6570\u636e\u884c\u4f4d\u7f6e\u5149\u6807\uff0c\u5149\u6807\u4f4d\u7f6e\u521d\u59cb\u88ab\u7f6e\u4e8e\u7b2c\u4e00\u884c\u4e4b\u524d\uff0c\u901a\u8fc7 ResultSet \u7c7b\u5c01\u88c5\u7684\u5149\u6807\u79fb\u52a8\u65b9\u6cd5\u5b9e\u73b0\u5bf9\u5149\u6807\u4f4d\u7f6e\u7684\u63a7\u5236\uff0c\u5f53 ResultSet \u5bf9\u8c61\u7684\u5149\u6807\u79fb\u81f3\u6570\u636e\u7ed3\u679c\u96c6\u672b\u5c3e\u65f6 (\u4e0b\u4e00\u884c\u65e0\u6570\u636e)\uff0c\u8fd4\u56de FALSE\u3002 \u5728\u865a\u8c37 JDBC \u4e2d\uff0cResultSet \u7c7b\u5206\u4e3a\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u548c\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\uff08\u901a\u8fc7 URL \u8fde\u63a5\u4e32\u53c2\u6570 recv_mode \u914d\u7f6e\uff09\u3002\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u9ed8\u8ba4\u5c5e\u6027\u4e3a\u4e0d\u53ef\u66f4\u65b0\u3001\u5411\u524d\u79fb\u52a8\u3001\u53ef\u4ee5\u6eda\u52a8\uff1b\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u9ed8\u8ba4\u5c5e\u6027\u4e3a\u4e0d\u53ef\u66f4\u65b0\u3001\u53ea\u5411\u524d\u79fb\u52a8\u3001\u4e0d\u53ef\u6eda\u52a8\u3002 Statement \u5bf9\u8c61\u6267\u884c SQL \u8bed\u53e5\u8fd4\u56de\u7ed3\u679c\u96c6\u4ec5\u80fd\u662f\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\uff0c\u800c PreparedStatement \u5bf9\u8c61\u6267\u884c SQL \u8bed\u53e5\u8fd4\u56de\u7ed3\u679c\u96c6\u53ef\u4e3a\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u6216\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u3002 \u5f53\u6267\u884c SQL \u8fd4\u56de\u6570\u636e\u7ed3\u679c\u96c6\u8f83\u5927\u65f6\uff0c\u5efa\u8bae\u4f7f\u7528\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\uff0c\u907f\u514d JVM \u7684\u6ea2\u51fa\u3002 {.is-info} 6.6.1 \u66f4\u65b0ResultSet\u7ed3\u679c\u96c6 \u521b\u5efa Statement \u5bf9\u8c61\u65f6\uff0c\u8bbe\u7f6e Statement \u5c5e\u6027 RresultSetConcurrency \u4e3a ResultSet.CONCUR_UPDATABLE\uff0c\u5e76\u4e14\u6570\u636e\u5e93 URL \u8fde\u63a5\u4e32\u5c5e\u6027 return_rowid \u8bbe\u7f6e\u4e3a TRUE\u65f6\uff0cStatement \u5bf9\u8c61\u6267\u884c SQL \u8bed\u53e5\u8fd4\u56de\u7684 ResultSet \u7ed3\u679c\u96c6\u624d\u80fd\u88ab\u66f4\u65b0\u3002\u5f53 ResultSet \u5bf9\u8c61\u4e3a\u53ef\u66f4\u65b0\u7ed3\u679c\u96c6\u65f6\uff0c\u5c06\u5149\u6807\u79fb\u81f3\u63d2\u5165\u4f4d\u7f6e\uff0c\u53ef\u8c03\u7528 ResultSet \u7c7b\u5bf9\u5e94\u7684 update \u65b9\u6cd5\u4fee\u6539\u7ed3\u679c\u96c6\u4e2d\u884c\u6570\u636e\uff0c\u5e76\u901a\u8fc7 updateRow \u65b9\u6cd5\u5c06\u66f4\u6539\u6570\u636e\u66f4\u65b0\u5230\u6570\u636e\u5e93\u4e2d\u3002 \u793a\u4f8b\uff1a\u901a\u8fc7\u4fee\u6539\u7ed3\u679c\u96c6\u4e2d\u6570\u636e\u503c\u66f4\u6539\u6570\u636e\u5e93\u4e2d\u5bf9\u5e94\u8bb0\u5f55 //\u521b\u5efaStatement\u5bf9\u8c61\u5e76\u8bbe\u7f6e\u7ed3\u679c\u96c6\u5c5e\u6027\u4e3a\u53ef\u66f4\u65b0 Statement stm = conn.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_UPDATABLE); //\u6267\u884cSQL\u8bed\u53e5 ResultSet rs = stm.executeQuery(sql); //\u7ed3\u679c\u96c6\u904d\u5386 while(rs.next()) { //\u66f4\u65b0\u7ed3\u679c\u96c6\u4e2d\u6307\u5b9a\u5217\u6570\u636e rs.updateLong(1, 5); //\u66f4\u65b0\u7ed3\u679c\u96c6\u4e2d\u6307\u5b9a\u5217\u6570\u636e rs.updateFloat(3, 12.3f); //\u7ed3\u679c\u96c6\u53d8\u66f4\u56de\u5199\u5165\u6570\u636e\u5e93 rs.updateRow(); } \u901a\u8fc7\u8c03\u7528 ResultSet \u7c7b\u7684 next()\u3001previous()\u3001absolute(int) \u65b9\u6cd5\u79fb\u52a8\u5149\u6807\u4f4d\u7f6e\uff0c\u5c06\u5149\u6807\u4f4d\u7f6e\u79fb\u52a8\u5230\u6307\u5b9a\u6570\u636e\u884c\uff0c\u901a\u8fc7 ResultSet \u7c7b\u5bf9\u5e94\u7684 get \u65b9\u6cd5\u83b7\u53d6\u884c\u6570\u636e\u3002 \u5982\u4f7f\u7528\u7ed3\u679c\u96c6\u66f4\u65b0\u6570\u636e\u5e93\u6570\u636e\uff0c\u9700\u5728\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65f6\uff0c\u8bbe\u7f6e\u8fde\u63a5\u5c5e\u6027 return_rowid \u4e3aTRUE\uff0c\u4e14\u5728\u751f\u6210\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61\u65f6\uff0c\u5e76\u53d1\u5c5e\u6027\u6307\u5b9a\u4e3a ResultSet.CONCUR_UPDATABLE\u3002 {.is-info} 6.6.2 \u901a\u8fc7\u79fb\u52a8\u5149\u6807\u83b7\u53d6\u7ed3\u679c\u96c6\u6761\u6570 \u793a\u4f8b 1\uff1a \u7edf\u8ba1\u7ed3\u679c\u96c6\u603b\u6761\u6570 //\u521b\u5efaStatement\u5bf9\u8c61 Statement stm= conn.createStatement(); stm.execute(\"create table test(id int identity(1,1));insert into test values(default)\"); //\u6267\u884c\u7ed3\u679c\u96c6\u67e5\u8be2 ResultSet rs = stm.executeQuery(\"select * from test\") //\u79fb\u52a8\u5149\u6807\u81f3\u7ed3\u679c\u96c6\u672b\u5c3e rs.last(); //\u83b7\u53d6\u7ed3\u679c\u96c6\u884c\u6570 int rsCounts = rs.getRow(); 6.6.3 \u591a\u7ed3\u679c\u96c6\u5904\u7406 \u865a\u8c37 JDBC \u652f\u6301\u591a\u7ed3\u679c\u96c6\u5904\u7406\uff0c\u5141\u8bb8 Statement \u63a5\u53e3\u652f\u6301\u591a\u91cd\u6253\u5f00\u7684 ResultSet \u5bf9\u8c61\u3002\u6267\u884c\u8bed\u53e5\u53ef\u4ee5\u662f\u591a\u6761 SQL \u8bed\u53e5\u7684\u96c6\u5408\uff0c\u5373\u4e00\u6b21\u6027\u5411\u865a\u8c37\u670d\u52a1\u5668\u53d1\u9001\u591a\u6761 SQL \u8bed\u53e5\uff0c\u865a\u8c37\u670d\u52a1\u5668\u6267\u884c\u5b8c SQL \u8bed\u53e5\u540e\u8fd4\u56de\u591a\u4e2a\u6267\u884c\u7ed3\u679c\uff1b\u4ea6\u6216\u5b58\u50a8\u8fc7\u7a0b\u5b9a\u4e49\u6709\u591a\u4e2a\u8fd4\u56de\u7ed3\u679c\u96c6\u3002\u865a\u8c37 JDBC \u7684 Statement \u91cd\u8f7d\u4e86 Statement \u63a5\u53e3\u4e2d\u7684 getMoreResults() \u65b9\u6cd5\u3002 \u793a\u4f8b\uff1a\u591a\u7ed3\u679c\u96c6\u5904\u7406 //SQL\u8bed\u53e5\u5305\u542b\u591a\u6761\u67e5\u8be2\u547d\u4ee4 String sql=\" SELECT * FROM A1 WHERE D2=(SELECT AVG(D2) FROM A1 GROUP BY D1);SELECT * FROM A1 WHERE D2>(SELECT MIN(D2) FROM A1 GROUP BY D1)\"; //\u521b\u5efaStatement\u5bf9\u8c61 Statement stm = conn.createStatement(); //\u6267\u884cSQL\u8bed\u53e5 boolean f = stm.execute(sql); //\u5224\u65ad\u662f\u5426\u6709ResultSet\u5bf9\u8c61\u4ea7\u751f if(f == true){ //\u83b7\u53d6\u7ed3\u679c\u96c6\u5bf9\u8c61 ResultSet rs1 = stm.getResultSet(); ... ... ... ... } while(true) { //\u5224\u65adStatement\u662f\u5426\u8fd4\u56de\u4e86\u591a\u4e2aResultSet\u5bf9\u8c61 if(!stm.getMoreResults(Statement.CLOSE_CURRENT_RESULT)){ break; } else if((rs2 = cstm.getResultSet())!=null) { ... ... ... ...//\u6570\u636e\u5904\u7406\u90e8\u5206\u7701\u7565 } } 6.6.4 \u670d\u52a1\u5668\u7aef\u6e38\u6807\u4f7f\u7528 \u865a\u8c37JDBC\u4e2d\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u751f\u6210\u9700\u6ee1\u8db3\u4e24\u4e2a\u6761\u4ef6\uff1aURL\u8fde\u63a5\u4e32\u5c5e\u6027recv_mode\u503c\u4e3a2\uff0cStatement\u5bf9\u8c61\u6267\u884cSQL\u8bed\u53e5\u4e3a\u5355\u6761SELECT\u8bed\u53e5\u3002 \u5e94\u7528\u7a0b\u5e8f\u7aef\u901a\u8fc7Statement\u7c7b\u7684setFetchSize(int)\u65b9\u6cd5\u6216ResultSet\u7c7b\u7684setFetchSize(int)\u65b9\u6cd5\u8bbe\u7f6e\u6bcf\u6b21\u4ece\u670d\u52a1\u5668\u7aef\u83b7\u53d6\u591a\u5c11\u6761\u6570\u636e\u3002 \u4f7f\u7528\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7684 ResultSet \u5bf9\u8c61\uff0c\u5149\u6807\u53ea\u80fd\u5355\u5411\u5411\u524d\u6b63\u5411\u79fb\u52a8\uff0c\u4e0d\u80fd\u5411\u540e\u79fb\u52a8\u6216\u6765\u56de\u6eda\u52a8\u3002 {.is-info} \u793a\u4f8b\uff1a\u865a\u8c37\u6570\u636e\u5e93\u670d\u52a1\u5668\u7aef\u6e38\u6807\u4f7f\u7528 //\u521b\u5efa\u865a\u8c37JDBC\u7279\u6709Statement\u5bf9\u8c61 Statement stm = (com.xugu.cloudjdbc.Statement)conn.createStatement(); //\u5f00\u542f\u670d\u52a1\u5668\u7aef\u6e38\u6807 stm.setServerCursor(true); //\u8bbe\u7f6e\u670d\u52a1\u5668\u7aef\u6e38\u6807\u5355\u6b21\u8fd4\u56de\u6570\u636e\u6761\u6570 stm.setFetchSize(1000); //\u6267\u884cSQL\u8bed\u53e5 ResultSet rs = stm.executeQuery(\"select * from t1\"); //\u904d\u5386\u6570\u636e while\uff08rs.next()\uff09 { ... ... ... ... } //\u5173\u95ed\u670d\u52a1\u5668\u7aef\u6e38\u6807 stm.setServerCursor(false); 6.6.5 \u68c0\u7d22\u81ea\u52a8\u4ea7\u751f\u7684\u5173\u952e\u5b57GeneratedKeys JDBC 3.0 \u89c4\u8303\u4e2d\u5bf9\u4e8e\u81ea\u52a8\u4ea7\u751f\u7684\u5173\u952e\u5b57\u6570\u503c\uff0c\u5b9a\u4e49\u4e86\u63a5\u53e3\u89c4\u8303\uff0c\u5373\uff1agetGeneratedKeys() \u65b9\u6cd5\u3002 \u4e3a\u4e86\u89e3\u51b3\u5bf9\u83b7\u53d6\u81ea\u52a8\u4ea7\u751f\u7684\u6216\u81ea\u52a8\u589e\u52a0\u7684\u5173\u952e\u5b57\u7684\u503c\u7684\u9700\u6c42\uff0c\u865a\u8c37 JDBC \u6839\u636e JDBC3.0 \u89c4\u8303\u63d0\u4f9b\u4e86\u83b7\u5f97\u5173\u952e\u5b57\u503c\u7684\u65b9\u6cd5\u3002\u83b7\u53d6\u5173\u952e\u5b57\u7684\u503c\uff0c\u9700\u8981\u5728\u6267\u884c\u65b9\u6cd5\u4e2d\u6307\u5b9a\u81ea\u589e\u5173\u952e\u5b57\u6807\u8bb0\u3002SQL \u8bed\u53e5\u6267\u884c\u5b8c\u540e\uff0c\u8c03\u7528 Statement \u5bf9\u8c61\u7684 getGeneratedKeys() \u65b9\u6cd5\uff0c\u83b7\u5f97\u5305\u542b\u81ea\u589e\u957f\u503c\u7684 ResultSet \u5bf9\u8c61\u3002 \u793a\u4f8b\uff1a\u83b7\u53d6\u6570\u636e\u5e93\u81ea\u589e\u957f\u5173\u952e\u5b57\u7684\u503c //\u521b\u5efaStatement\u5bf9\u8c61 Statement stmt = conn.createStatement(); //\u6307\u5b9a\u81ea\u589e\u957f\u5173\u952e\u5b57\u7684\u6807\u8bc6 String[] colN = {\"id\"}; //\u5728\u6267\u884c\u65b9\u6cd5\u4e2d\u5f15\u5165\u81ea\u589e\u957f\u5173\u952e\u5b57\u6807\u8bc6 stmt.executeUpdate(\"INSERT INTO authors(first_name, last_name) VALUES (\u2018Ghq\u2019, \u2018Wxl\u2019)\",colN); //\u83b7\u53d6\u7ed3\u679c\u96c6 ResultSet rs = stmt.getGeneratedKeys(); if ( rs.next() ) { //\u83b7\u53d6\u7ed3\u679c\u96c6\u4e2d\u7684\u81ea\u589e\u957f\u503c \u3000\u3000 int key = rs.getInt(); } 6.7 \u91ca\u653e\u8d44\u6e90 \u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u56e0\u5904\u7406\u9700\u8981\u6240\u5efa\u7acb\u7684 ResultSet\u3001Statement\u3001PreparedStatement \u7b49\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61\uff0c\u5728\u4f7f\u7528\u5b8c\u540e\u5fc5\u987b\u5173\u95ed\u3002\u5173\u95ed\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61\uff0c\u76f4\u63a5\u8c03\u7528\u5bf9\u5e94\u7684\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61 close() \u65b9\u6cd5\u5373\u53ef\u3002 \u5f53\u4e0d\u518d\u9700\u8981\u548c\u865a\u8c37\u6570\u636e\u5e93\u8fdb\u884c\u4ea4\u4e92\u65f6\uff0c\u9700\u65ad\u5f00\u6570\u636e\u5e93\u8fde\u63a5\u3002\u8c03\u7528 Connection \u7c7b\u7684 close() \u65b9\u6cd5\u5373\u4f1a\u5173\u95ed\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u540c\u65f6\u91ca\u653e\u8fde\u63a5\u4e0a\u6240\u6301\u6709\u7684\u6240\u6709\u6570\u636e\u5e93\u8d44\u6e90\u3002 \u6570\u636e\u5e93\u8fde\u63a5\u4e3a\u975e\u81ea\u52a8\u63d0\u4ea4\u65f6\uff0c\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61\u5728\u4f7f\u7528\u5b8c\u540e\uff0c\u82e5\u672a\u53ca\u65f6\u5173\u95ed\uff0c\u6b64\u65f6\u8fdb\u884c DDL \u64cd\u4f5c\u5c06\u4f1a\u5bfc\u81f4\u865a\u8c37\u6570\u636e\u5e93\u52a0\u9501\u8d85\u65f6\u6216\u5931\u8d25\u3002 {.is-info} \u4e03. \u5927\u5bf9\u8c61\u7c7b\u578b\u5904\u7406 JDBC 3.0 \u89c4\u8303\u5b9a\u4e49\u6709 java.sql.Blob \u4e0e java.sql.Clob \u63a5\u53e3\uff0c\u6b64\u4e24\u7c7b\u63a5\u53e3\u4e3a\u6570\u636e\u5e93\u5927\u5bf9\u8c61\u6570\u636e\u5904\u7406\u63a5\u53e3\u3002\u865a\u8c37\u6570\u636e\u5e93\u5927\u5bf9\u8c61\u5b57\u6bb5\u7c7b\u578b\u5305\u542b\uff1ablob\u3001clob\u3001binary\u3002 \u5728\u865a\u8c37 JDBC \u4e2d\uff0c\u83b7\u53d6\u5927\u5bf9\u8c61\u6570\u636e\u6709\u4e24\u79cd\u8fd4\u56de\u65b9\u5f0f\uff1a\u4e00\u79cd\u662f\u6570\u636e\u76f4\u63a5\u8fd4\u56de\uff1b\u53e6\u4e00\u79cd\u662f\u8fd4\u56de\u63cf\u8ff0\u7b26\u65b9\u5f0f\u3002\u5f53\u8fd4\u56de\u6570\u636e\u4e2d\u5927\u5bf9\u8c61\u6570\u636e\u8f83\u591a\u65f6\uff0c\u5efa\u8bae\u4f7f\u7528\u8fd4\u56de\u63cf\u8ff0\u7b26\u65b9\u5f0f\uff0c\u4ece\u800c\u907f\u514d\u56e0\u6570\u636e\u8fc7\u591a\u8fc7\u5927\u9020\u6210\u7684 JVM \u5185\u5b58\u6ea2\u51fa\u3002\u865a\u8c37 JDBC \u9a71\u52a8\u542f\u7528\u5927\u5bf9\u8c61\u8fd4\u56de\u63cf\u8ff0\u7b26\u65b9\u5f0f\uff0c\u9700\u5728\u8fde\u63a5 URL \u4e32\u4e0a\u914d\u7f6e\u5c5e\u6027 lob_ret \u4e3a descriptor \u3002 7.1 \u5411\u8868\u4e2d\u63d2\u5165\u5927\u5bf9\u8c61 LOB \u5bf9\u8c61\u7684\u63d2\u5165\u5fc5\u987b\u901a\u8fc7 PreparedStatement\u3001CallableStatement \u7c7b\u7684 setXXX() \u65b9\u6cd5\u65b9\u5f0f\u5b9e\u73b0\u3002\u865a\u8c37 JDBC \u4e2d PreparedStatement \u63d0\u4f9b\u591a\u79cd\u65b9\u6cd5\u8bbe\u7f6e\u5927\u5bf9\u8c61\u53c2\u6570\u503c\uff0c\u5982\u4e0b\u5217\u65b9\u6cd5\uff1a setBinaryStream(int parameterIndex,InputStream x) setBlob(int parameterIndex, Blob x) setBlob(int parameterIndex, InputStream x) setBytes(int parameterIndex,byte[] x) setCharacterStream(int parameterIndex, Reader reader) setClob(int parameterIndex, Clob x) setClob(int parameterIndex, Reader reader) setString(int parameterIndex, String x) \u793a\u4f8b\uff1a\u5e94\u7528\u7a0b\u5e8f\u63d2\u5165\u5927\u5bf9\u8c61\u6570\u636e\uff0c\u5176\u4e2d\u8868 b1 \u5b57\u6bb5 photo \u4e3a blob \u7c7b\u578b\uff0c\u5b57\u6bb5 text \u4e3a clob \u7c7b\u578b PreparedStatement ps = conn.prepareStatement(\"INSERT INTO b1 VALUES (?, ?)\")\u037e // blobBytes is a byte[] type ps.setBlob(1, new com.xugu.cloudjdbc.Blob(blobBytes))\u037e // clobString is a String type ps.setClob(2, new com.xugu.cloudjdbc.Clob(clobString))\u037e ps.execute()\uff1b 7.2 \u67e5\u8be2\u5927\u5bf9\u8c61\u6570\u636e \u901a\u8fc7\u865a\u8c37 JDBC \u83b7\u53d6\u5927\u5bf9\u8c61\u503c\uff0c\u6570\u636e\u5e93 CLOB \u5bf9\u8c61\u53ef\u901a\u8fc7\u5b57\u7b26\u4e32\u5f62\u5f0f\u6216\u6d41\u5f0f\u6570\u636e\u5f62\u5f0f\u83b7\u53d6\uff0c\u6570\u636e\u5e93 BLOB \u5bf9\u8c61\u53ea\u901a\u8fc7\u6d41\u5f0f\u6570\u636e\u5f62\u5f0f\u83b7\u53d6\u3002 \u793a\u4f8b 1\uff1a\u6d41\u5f0f\u83b7\u53d6 CLOB \u5bf9\u8c61 Statement stm = xgConn.createStatement(); String sql=\u201dselect remark from t_clob where id=101\u201d; ResultSet rs = stm.executeQuery(sql); while(rs.next) { Clob data = rs.getClob(\"remark \"); //\u4ee5\u5b57\u7b26\u6d41\u65b9\u5f0f\u83b7\u53d6\u6570\u636e Reader rd = data.getCharacterStream(); char[] sc = new char[1000]; StringBuffer sb = new StringBuffer(); int len = 0; while((len=rd.read(sc)) !=-1) { sb.append(new String(sc,0,len)); } System.out.println(sb.toString()); } \u793a\u4f8b 2\uff1a\u865a\u8c37 JDBC \u5141\u8bb8\u4ee5\u5b57\u7b26\u4e32\u7684\u5f62\u5f0f\u8bfb\u53d6 CLOB \u5bf9\u8c61 String sql=\"select text from t_clob\"\u037e Statement stm=conn.createStatement()\u037e ResultSet rs=stm.executeQuery(sql)\u037e while(rs.next()) { String clobStr =rs.getString(\"text\")\u037e } \u516b. \u865a\u8c37\u6570\u636e\u5e93\u8d1f\u8f7d\u5747\u8861 \u865a\u8c37\u6570\u636e\u5e93\u662f\u4e00\u6b3e\u5177\u5907\u9ad8\u5b89\u5168\u3001\u9ad8\u6027\u80fd\u3001\u9ad8\u6269\u5c55\u7b49\u7279\u6027\u7684\u3001\u57fa\u4e8e\u5206\u5e03\u5f0f\u67b6\u6784\u7684\u5206\u5e03\u5f0f\u4e8b\u52a1\u578b\u6570\u636e\u5e93\u3002\u90e8\u7f72\u6570\u636e\u5e93\u96c6\u7fa4\u65f6\uff0c\u591a\u53f0\u670d\u52a1\u5668\u4f5c\u4e3a\u4e00\u4e2a\u6574\u4f53\u5bf9\u5916\u63d0\u4f9b\u6570\u636e\u670d\u52a1\u3002\u5728\u591a\u673a\u73af\u5883\u4e0b\uff0c\u4e3a\u4f7f\u6570\u636e\u5e93\u8fde\u63a5\u5747\u5300\u5206\u5e03\u4e8e\u5404\u53f0\u670d\u52a1\uff0c\u865a\u8c37 JDBC \u5728\u63a5\u53e3\u5c42\u5b9e\u73b0\u4e86\u57fa\u4e8e\u8f6f\u8d1f\u8f7d\u5747\u8861\u6280\u672f\u7684\u6570\u636e\u5e93\u8fde\u63a5\u5efa\u7acb\u65b9\u5f0f\u3002 \u865a\u8c37\u6570\u636e\u5e93\u8d1f\u8f7d\u5747\u8861\u5206\u914d\u6570\u636e\u5e93\u8fde\u63a5\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a\u987a\u5e8f\u5206\u914d\u3001\u968f\u673a\u5206\u914d\u3002\u901a\u8fc7\u5728\u6570\u636e\u5e93 URL \u8fde\u63a5\u4e32\u4e0a\u8bbe\u7f6e\u53c2\u6570 conn_type(conn_type:1, \u968f\u673a\u5206\u914d\uff1b2, \u987a\u5e8f\u5206\u914d) \u7c7b\u578b\uff0c\u5b9e\u73b0\u6570\u636e\u5e93\u8fde\u63a5\u5728\u591a\u96c6\u7fa4\u73af\u5883\u4e0b\u7684\u8d1f\u8f7d\u5747\u8861\u3002\u9ed8\u8ba4\u8d1f\u8f7d\u5747\u8861\u5206\u914d\u65b9\u5f0f\uff1a\u987a\u5e8f\u5206\u914d\u3002 \u865a\u8c37 JDBC \u63d0\u4f9b\u4e09\u79cd\u914d\u7f6e\u8d1f\u8f7d\u5747\u8861\u7684\u65b9\u5f0f\uff1a\u6570\u636e\u5e93 URL \u8fde\u63a5\u4e32\u914d\u7f6e\u3001\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u6027\u6587\u4ef6 Properties \u914d\u7f6e\u3001\u6570\u636e\u5e93\u8fde\u63a5 XML \u6587\u4ef6\u914d\u7f6e\u3002 1. URL \u8fde\u63a5\u4e32\u914d\u7f6e Class.forName(\"com.xugu.cloudjdbc.Driver\"); //URL\u8fde\u63a5\u4e32\u4e2d\u4f7f\u7528ips\u5c5e\u6027\u914d\u7f6e\u591aIP\u8d1f\u8f7d\u5747\u8861 Connection conn = DriverManager.getConnection(\"jdbc:xugu://192.168.0.201:5138/SYSTEM?user=SYSDBA&password=SYSDBA&conn_type=1&ips=192.168.0.205,192.168.0.204,192.168.1.206\") \u8fde\u63a5\u5c5e\u6027\u6587\u4ef6 Properties \u914d\u7f6e (Vector \u6216\u5b57\u7b26\u4e32\u6570\u7ec4) Properties info=new Properties(); Class.forName(\"com.xugu.cloudjdbc.Driver\"); //Vector\u7ed3\u6784\u5b58\u653e\u8d1f\u8f7d\u5747\u8861\u591aIP\u5730\u5740\u65b9\u5f0f Vector<String> ipsVector=new Vector<String>(); ipsVector.add(\"192.168.1.201\"); ipsVector.add(\"192.168.1.204\"); ipsVector.add(\"192.168.1.205\"); ipsVector.add(\"192.168.1.206\"); info.put(\"ips\", ipsVector); //\u6570\u7ec4\u5b58\u653e\u8d1f\u8f7d\u5747\u8861\u591aIP\u5730\u5740\u65b9\u5f0f String[] ips={\"192.168.1.205\",\"192.168.1.204\",\"192.168.1.206\"}; info.put(\"ips\", ips); Connection conn = DriverManager.getConnection(\"jdbc:xugu://192.168.1.201:5138/SYSTEM?user=SYSDBA&password=SYSDBA&conn_type=2\",info); \u8fde\u63a5\u5c5e\u6027 XML \u6587\u4ef6\u914d\u7f6e <?xml version=\"1.0\" encoding=\"utf-8\"?> <listeners> <listener> <ip>192.168.1.206</ip> </listener> <listener> <ip>192.168.1.204</ip> </listener> <listener> <ip>192.168.1.205</ip> </listener> </listeners> Class.forName(\"com.xugu.cloudjdbc.Driver\"); Connection conn = DriverManager.getConnection(\"jdbc:xugu:file://xuguClouldListener.xml:5138/SYSTEM?user=SYSDBA&password=SYSDBA&conn_type=1\");","title":"JDBC7"},{"location":"JDBC8/#jdbc","text":"Java \u6570\u636e\u5e93\u8fde\u63a5\uff08Java Database Connectivity\uff0c\u7b80\u79f0 JDBC\uff09\u662f Java \u8bed\u8a00\u4e2d\u7528\u6765\u89c4\u8303\u5ba2\u6237\u7aef\u7a0b\u5e8f\u5982\u4f55\u8bbf\u95ee\u6570\u636e\u5e93\u7684\u5e94\u7528\u7a0b\u5e8f\u63a5\u53e3\uff0c\u63d0\u4f9b\u4e86\u8bf8\u5982\u67e5\u8be2\u548c\u66f4\u65b0\u6570\u636e\u5e93\u4e2d\u6570\u636e\u7684\u65b9\u6cd5\uff0c\u53ef\u4ee5\u4e3a\u591a\u79cd\u5173\u7cfb\u6570\u636e\u5e93\u63d0\u4f9b\u7edf\u4e00\u8bbf\u95ee\u3002JDBC \u63d0\u4f9b\u4e86\u4e00\u79cd\u57fa\u51c6\uff0c\u901a\u8fc7\u6b64\u57fa\u51c6\u6570\u636e\u5e93\u5f00\u53d1\u4eba\u5458\u53ef\u6784\u5efa\u66f4\u9ad8\u7ea7\u7684\u5de5\u5177\u548c\u63a5\u53e3\uff0c\u4e5f\u53ef\u901a\u8fc7\u6b64\u57fa\u51c6\u7f16\u5199\u6570\u636e\u5e93\u5e94\u7528\u7a0b\u5e8f\u3002 \u865a\u8c37\u6570\u636e\u5e93\u7684 JDBC \u9a71\u52a8\u7a0b\u5e8f\uff08\u4ee5\u4e0b\u7b80\u79f0\uff1a\u865a\u8c37 JDBC\uff09\u5b9e\u73b0\u4e86 Java \u7a0b\u5e8f\u548c\u865a\u8c37\u6570\u636e\u5e93\u901a\u4fe1\uff0c\u652f\u6301 SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u7684\u8bbf\u95ee\uff0c\u540c\u65f6\u4e5f\u662f\u6784\u9020\u9ad8\u7ea7 API \u548c\u6570\u636e\u5e93\u5f00\u53d1\u5de5\u5177\u7684\u57fa\u7840\u3002 \u7528\u6237\u60f3\u8981\u5b9e\u73b0\u5bf9\u6570\u636e\u5e93\u7684\u8bbf\u95ee\uff0c\u4e00\u822c\u8981\u7ecf\u8fc7\u5982\u4e0b\u7684\u6b65\u9aa4\uff1a 1. \u901a\u8fc7\u9a71\u52a8\u5668\u7ba1\u7406\u5668\u83b7\u53d6\u8fde\u63a5\u63a5\u53e3\uff1b 2. \u83b7\u5f97 Statement \u6216 Statement \u5b50\u7c7b\uff1b 3. \u901a\u8fc7 Statement \u6267\u884c SQL \u547d\u4ee4\uff1b 4. \u5904\u7406\u6267\u884c\u7ed3\u679c\uff1b 5. \u5173\u95ed Statement\uff1b 6. \u5173\u95ed\u8fde\u63a5\u3002 JDBC \u7ed3\u6784\u56fe, \u5982\u56fe1.1\u6240\u793a\u3002 \u56fe1.1 JDBC\u7ed3\u6784\u56fe \u4f7f\u7528\u865a\u8c37 JDBC \u5b9e\u73b0\u5e94\u7528\u7a0b\u5e8f\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u4e4b\u95f4\u7684\u8fde\u63a5\u670d\u52a1\uff0c\u5e94\u7528\u7a0b\u5e8f\u6240\u5728\u8ba1\u7b97\u673a\u9700\u5df2\u5b89\u88c5 Java \u8fd0\u884c\u73af\u5883\uff08Java Runtime Environment, \u7b80\u79f0 JRE\uff09\u3002\u865a\u8c37 JDBC \u53c2\u7167 JDBC API \u5b9e\u73b0\uff0c\u652f\u6301 JDBC 3.0 \u529f\u80fd\uff0cJava \u5e94\u7528\u7a0b\u5e8f\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u4e4b\u95f4\u7684\u6240\u6709\u64cd\u4f5c\u5747\u9700\u901a\u8fc7\u865a\u8c37 JDBC \u6765\u5b8c\u6210\u3002 \u4f7f\u7528\u865a\u8c37 JDBC \u9700\u8981 JRE 1.6 \u7248\u6216\u66f4\u9ad8\u7248\u672c\u7684 Java \u8fd0\u884c\u65f6\u73af\u5883 (JRE)\u3002 {.is-info}","title":"\u4e00. \u865a\u8c37\u6570\u636e\u5e93\u7684JDBC\u9a71\u52a8\u7a0b\u5e8f\u6982\u8ff0"},{"location":"JDBC8/#jdbc_1","text":"JDBC 3.0 \u89c4\u8303\u7531 JDBC 1.0\u3001JDBC 2.0 \u884d\u751f\u800c\u6765\uff0c\u4e3b\u8981\u5305\u542b java.sql \u5305\u4ee5\u53ca javax.sql \u5305\uff0c\u6570\u636e\u5e93 JDBC \u9a71\u52a8\u5b9e\u73b0 JDBC 3.0 \u89c4\u8303\u6240\u5b9a\u4e49\u7684\u7279\u6027\u63a5\u53e3\uff0c\u5373\u53ef\u8fbe\u5230\u5bf9\u6807\u51c6 JDBC 3.0 \u89c4\u8303\u7684\u652f\u6301\u3002 \u865a\u8c37 JDBC \u57fa\u4e8e JDBC 3.0 \u89c4\u8303\u5b9e\u73b0\uff0c\u5b9e\u73b0\u63a5\u53e3\u7c7b\u6620\u5c04\uff0c\u5982\u88682.1\u6240\u793a\u3002 \u88682.1 \u865a\u8c37JDBC\u5b9e\u73b0\u63a5\u53e3\u7c7b | \u63a5\u53e3 | \u865a\u8c37JDBC\u5b9e\u73b0\u7c7b | | ---------------------------------- | ---------------------------------------- | | java.sql.Driver | com.xugu.cloudjdbc.Driver | | java.sql.Connection | com.xugu.cloudjdbc.Connection | | java.sql.Statement | com.xugu.cloudjdbc.Statement | | java.sql.PreparedStatement | com.xugu.cloudjdbc.PreparedStatement | | java.sql.CallableStatement | com.xugu.cloudjdbc.CallableStatement | | java.sql.ResultSet | com.xugu.cloudjdbc.ResultSet | | java.sql.ResultSetMetaData | com.xugu.cloudjdbc.ResultSetMetaData | | java.sql.DatabaseMetaData | com.xugu.cloudjdbc.DatabaseMetaData | | java.sql.PrameterMetaData | com.xugu.cloudjdbc.PrameterMetaData | | java.sql.Types | com.xugu.cloudjdbc.Types | | java.sql.Blob | com.xugu.cloudjdbc.Blob | | java.sql.Clob | com.xugu.cloudjdbc.Clob | | java.sql.Savepoint | com.xugu.cloudjdbc.Savepoint | | javax.sql.DataSource | com.xugu.pool.XgDataSource | | javax.sql.ConnectionPoolDataSource | com.xugu.pool.XgConnectionPoolDataSource | | javx.sql.PooledConnection | com.xugu.pool.XgPooledConnection | \u9664\u4e86\u4ee5\u4e0a\u6807\u51c6\u7c7b\u63a5\u53e3\u5916\uff0c\u865a\u8c37 JDBC \u8fd8\u6269\u5c55\u5b9e\u73b0\u4e86\u4ee5\u4e0b\u7c7b\uff1a - com.xugu.cloudjdbc.ClientInfo - com.xugu.cloudjdbc.OutParameter - com.xugu.cloudjdbc.Rowid - com.xugu.cloudjdbc.SQLXml - com.xugu.cloudjdbc.SSL - com.xugu.pool.StatementWrapper - com.xugu.pool.PreparedStatementWrapper","title":"\u4e8c. \u865a\u8c37\u6570\u636e\u5e93\u7684JDBC\u63a5\u53e3\u548c\u5bf9\u8c61\u7c7b"},{"location":"JDBC8/#_1","text":"","title":"\u4e09. \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b"},{"location":"JDBC8/#31","text":"\u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b\u3001\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u3001Java \u6570\u636e\u7c7b\u578b\u4e09\u8005\u6620\u5c04\u5173\u7cfb\uff0c\u5982\u88683.1\u6240\u793a\u3002 \u88683.1 \u6570\u636e\u7c7b\u578b\u6620\u5c04\u5173\u7cfb \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b \u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b Java \u6570\u636e\u7c7b\u578b BOOLEAN BOOLEAN boolean SMALLINT SMALLINT short TINYINT TINYINT byte INTEGER INTEGER int BIGINT BIGINT long FLOAT FLOAT float DOUBLE DOUBLE double NUMERIC NUMERIC BigDecimal DECIMAL BigDecimal CHAR CHAR String NCHAR NCHAR String VARCHAR VARCHAR String VARCHAR2 VARCHAR String NVARCHAR2 VARCHAR String BLOB BLOB Blob CLOB CLOB Clob NCLOB BINARY BINARY byte[] VARBINARY LONG VARBINARY DATE DATE Date TIME TIME Time TIMESTAMP TIMESTAMP Timestamp","title":"3.1 \u57fa\u672c\u6570\u636e\u7c7b\u578b"},{"location":"JDBC8/#32","text":"\u865a\u8c37 JDBC \u9664\u4e86\u5b9e\u73b0\u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b\uff0c\u8fd8\u6839\u636e\u865a\u8c37\u6570\u636e\u5e93\u81ea\u6709\u7c7b\u578b\u6269\u5c55\u4e86\u90e8\u5206\u6570\u636e\u7c7b\u578b\uff08\u88683.2\u6240\u793a\uff09\uff0c\u5305\u62ec\u4ee5\u4e0b\u6570\u636e\u7c7b\u578b\u3002 1. \u65f6\u95f4\u6570\u636e\u7c7b\u578b DATETIME\u2014\u2014\u2014 \u65e5\u671f\u65f6\u95f4\u7c7b\u578b DATETIME WITH TIME ZONE \u2014\u2014\u2014 \u5e26\u65f6\u533a\u7684\u65e5\u671f\u65f6\u95f4\u7c7b\u578b TIME WITH TIME ZONE \u2014\u2014\u2014 \u5e26\u65f6\u533a\u7684\u65f6\u95f4\u7c7b\u578b INTERVAL YEAR \u2014\u2014\u2014 \u5e74\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL MONTH \u2014\u2014\u2014 \u6708\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY\u2014\u2014\u2014 \u65e5\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL HOUR \u2014\u2014\u2014 \u5c0f\u65f6\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL MINUTE \u2014\u2014\u2014 \u5206\u949f\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL SECOND \u2014\u2014\u2014 \u79d2\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL YEAR TO MONTH \u2014\u2014\u2014 \u5e74\u5230\u6708\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY TO HOUR \u2014\u2014\u2014 \u65e5\u5230\u5c0f\u65f6\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY TO MINUTE \u2014\u2014\u2014 \u65e5\u5230\u5206\u949f\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY TO SECOND \u2014\u2014\u2014 \u65e5\u5230\u79d2\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL HOUR TO MINUTE \u2014\u2014\u2014 \u5c0f\u65f6\u5230\u5206\u949f\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL HOUR TO SECOND \u2014\u2014\u2014 \u5c0f\u65f6\u5230\u79d2\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL MINUTE TO SECOND \u2014\u2014\u2014 \u5206\u949f\u5230\u79d2\u7684\u65f6\u95f4\u95f4\u9694 2. \u6e38\u6807\u6570\u636e\u7c7b\u578b\uff08\u53ea\u5728\u5b58\u50a8\u8fc7\u7a0b\u3001\u51fd\u6570\u3001\u5305\u4e2d\u4f7f\u7528\uff09 CURSOR \u2014\u2014\u2014 \u6e38\u6807\u6570\u636e\u7c7b\u578b SYS_REFCURSOR \u2014\u2014\u2014 \u8fd4\u56de\u6e38\u6807\u6570\u636e\u7c7b\u578b 3. \u5176\u4ed6\u6570\u636e\u7c7b\u578b GUID \u2014\u2014\u2014 \u5168\u5c40\u552f\u4e00\u6807\u8bc6\u7b26 \u88683.2 \u6269\u5c55\u6570\u636e\u7c7b\u578b\u5bf9\u5e94\u8868 \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b \u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b Java \u6570\u636e\u7c7b\u578b DATETIME DATETIME Timestamp DATETIME WITH TIME ZONE DATETIME_TZ String TIME WITH TIME ZONE TIME_TZ String INTERVAL YEAR INTERVAL_Y String INTERVAL MONTH INTERVAL_M INTERVAL DAY INTERVAL_D INTERVAL HOUR INTERVAL_H INTERVAL MINUTE INTERVAL_MI INTERVAL SECOND INTERVAL_S String INTERVAL YEAR TO MONTH INTERVAL_Y2M INTERVAL DAY TO HOUR INTERVAL_D2H INTERVAL DAY TO MINUTE INTERVAL_D2M INTERVAL DAY TO SECOND INTERVAL_D2S INTERVAL HOUR TO MINUTE INTERVAL_H2M INTERVAL HOUR TO SECOND INTERVAL_H2S INTERVAL MINUTE TO SECOND INTERVAL_M2S CURSOR CURSOR \u65e0\u5bf9\u5e94\u7c7b\u578b SYS_REFCURSOR REFCUR GUID GUID String \u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528 ResultSet \u5bf9\u8c61\u6765\u5bf9\u5e94\u83b7\u53d6\u6e38\u6807\u6240\u8fd4\u56de\u6570\u636e\u3002 {.is-info}","title":"3.2 \u6269\u5c55\u6570\u636e\u7c7b\u578b"},{"location":"JDBC8/#33","text":"\u5728\u8c03\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u4e2d\u7684\u67d0\u4e9b\u65b9\u6cd5\u65f6\uff0c\u9700\u8fdb\u884c Java \u6570\u636e\u7c7b\u578b\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u7684\u8f6c\u6362\uff0c\u8fd9\u4e9b\u65b9\u6cd5\u5305\u62ec\uff1a - ResultSet \u7c7b get\\<Type> \u65b9\u6cd5\uff1b - ResultSet \u7c7b update\\<Type> \u65b9\u6cd5\uff1b - CallableStatement \u7c7b get\\<Type> \u65b9\u6cd5\uff1b - PreparedStatement \u7c7b set\\<Type> \u65b9\u6cd5\u3002 \u6570\u636e\u7c7b\u578b\u4e4b\u95f4\u7684\u8f6c\u6362\uff0c\u9700\u9075\u4ece Java \u6570\u636e\u7c7b\u578b\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u6620\u5c04\u5173\u7cfb\u89c4\u5219\uff0c\u5426\u5219\u53ef\u80fd\u8f6c\u6362\u5931\u8d25\u3002 1. com.xugu.cloudjdbc.ResultSet \u7c7b\u4e2d get\\<Type> \u65b9\u6cd5\u7684\u7c7b\u578b\u8f6c\u6362\uff0c\u5982\u88683.3\u6240\u793a\u3002 2. com.xugu.cloudjdbc.PreparedStatement \u7c7b\u4e2d set\\<Type> \u65b9\u6cd5\u7684\u7c7b\u578b\u8f6c\u6362\uff0c\u5982\u88683.4\u6240\u793a\u3002 X\uff08\u65e0\u4e22\u5931\u8f6c\u6362\uff09\uff1a\u6307\u4ee5\u957f\u7cbe\u5ea6\u7c7b\u578b\u7684 get\\<Type> \u65b9\u6cd5\u83b7\u53d6\u77ed\u7cbe\u5ea6\u6570\u636e\u7c7b\u578b\u5217\u503c\u65e0\u4e22\u5931\u3002 \u5982\uff1a\u4f7f\u7528 getInt() \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u4e3a smallint \u7684\u5217\u6570\u636e\uff0c\u83b7\u53d6\u6570\u636e\u5b8c\u6574\u3002 Z\uff08\u4f9d\u8d56\u8f6c\u6362\uff09\uff1a\u6307 get\\<Type> \u65b9\u6cd5\u4e2d\u7684 Type \u7c7b\u578b\u4e0e\u83b7\u53d6\u6570\u636e\u5e93\u4e2d\u5217\u7684\u6570\u636e\u7c7b\u578b\u4e0d\u4e00\u81f4\uff0c\u6b64\u65f6\u9700\u8981\u901a\u8fc7\u5176\u4ed6\u6570\u636e\u7c7b\u578b\u8f6c\u6362\u4e3a Type \u6570\u636e\u7c7b\u578b\uff0c\u6b64\u8f6c\u6362\u8fc7\u7a0b\u503c\u53ef\u80fd\u4e22\u5931\u90e8\u5206\u6570\u636e\u3002 \u5982\uff1a\u4f7f\u7528 getInt() \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u4e3a float \u7684\u5217\u6570\u636e\uff0c\u53ef\u83b7\u53d6 float \u5217\u6570\u636e\u7684\u6574\u6570\u503c\uff0c\u800c\u5c0f\u6570\u7cbe\u5ea6\u503c\u5c06\u4e22\u5931\u3002 Y\uff08\u76f4\u63a5\u8f6c\u6362\uff09\uff1a\u6307 get\\<Type> \u65b9\u6cd5\u4e2d\u7684 Type \u7c7b\u578b\u4e0e\u83b7\u53d6\u6570\u636e\u5e93\u4e2d\u5217\u7684\u6570\u636e\u7c7b\u578b\u4e00\u81f4\u3002 \u5982\uff1a\u4f7f\u7528 getInt() \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u4e3a integer \u7684\u5217\u6570\u636e\uff0c\u76f4\u63a5\u83b7\u53d6\u5b8c\u6574\u6570\u636e\u3002 {.is-info} P\uff08\u5141\u8bb8\u63d2\u5165\uff09\uff1a\u6307 set\\<Type> \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u5e93\u4e2d\u5217\u6570\u636e\u65f6\uff0c\u6570\u636e\u65e0\u635f\u5931\u5b58\u5165\u6570\u636e\u5e93\u4e2d\u3002 \u5982\uff1a\u4f7f\u7528 setInt() \u65b9\u6cd5\u8bbe\u7f6e\u5217\u6570\u636e\u7c7b\u578b\u4e3a bigint \u7684\u6570\u636e\u65f6\uff0c\u6570\u636e\u53ef\u6b63\u786e\u5b58\u5165\u3002 Z\uff08\u90e8\u5206\u63d2\u5165\uff09\uff1a\u6307 set\\<Type> \u65b9\u6cd5\u4e2d\u7684 Type \u7c7b\u578b\u548c\u6570\u636e\u5e93\u4e2d\u5217\u6570\u636e\u7c7b\u578b\u4e0d\u4e00\u81f4\uff0c\u6570\u636e\u4ec5\u80fd\u90e8\u5206\u6b63\u786e\u5b58\u5165\u3002 \u5982\uff1a\u4f7f\u7528 setInt() \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u5e93\u5217\u7c7b\u578b\u4e3a tinyint \u7684\u6570\u636e\uff0c\u56e0 tinyint \u8868\u793a\u8303\u56f4\u4e3a-128\uff5e127 \u7684\u6574\u6570\u503c\uff0c\u6545\u800c tinyint\u8868\u793a\u8303\u56f4\u5185\u6570\u636e\u53ef\u6b63\u786e\u5b58\u5165\uff0c\u8303\u56f4\u5916\u6570\u636e\u5c06\u63d2\u5165\u5931\u8d25\u3002 {.is-info}","title":"3.3 \u6570\u636e\u7c7b\u578b\u8f6c\u6362"},{"location":"JDBC8/#_2","text":"","title":"\u56db. \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5"},{"location":"JDBC8/#41-jdbc","text":"\u901a\u8fc7\u865a\u8c37 JDBC \u9a71\u52a8\u8bbf\u95ee\u865a\u8c37\u6570\u636e\u5e93\uff0c\u9996\u5148\u5e94\u4fdd\u8bc1\u5e94\u7528\u7a0b\u5e8f\u6b63\u786e\u5f15\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u5305 (cloudjdbc-*.*.*.jar)\uff0c\u5373\u5c06\u9a71\u52a8\u5305\u62f7\u8d1d\u81f3\u5e94\u7528\u7a0b\u5e8f\u5e76\u6dfb\u52a0\u5f15\u7528\u3002","title":"4.1 \u90e8\u7f72JDBC\u9a71\u52a8\u7a0b\u5e8f"},{"location":"JDBC8/#42-jdbc","text":"\u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u8fdb\u884c\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u8c03\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u7a0b\u5e8f\uff0c\u9996\u5148\u8981\u5c06\u865a\u8c37 JDBC \u9a71\u52a8\u52a0\u8f7d\u5230\u7cfb\u7edf\u5185\u5b58\u4e2d\uff0c\u7136\u540e\u4f9b\u7cfb\u7edf\u4f7f\u7528\u3002\u865a\u8c37 JDBC \u7684\u9a71\u52a8\u5b9e\u73b0\u7c7b\u4e3acom.xugu.cloudjdbc.Driver\uff0c\u4ee5\u4e0b\u662f\u5c06\u865a\u8c37 JDBC \u9a71\u52a8\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\u7684\u4ee3\u7801\uff1a //\u663e\u793a\u6ce8\u518c DriverManager.registerDriver(new com.xugu.cloudjdbc.Driver())\u037e //\u9690\u5f0f\u6ce8\u518c Class.forName(\u201ccom.xugu.cloudjdbc.Driver\u201d)\u037e \u9690\u5f0f\u6ce8\u518c\u5373\u901a\u8fc7 Class.forName() \u5c06\u5bf9\u5e94\u7684\u9a71\u52a8\u7c7b\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\uff0c\u5c06\u6267\u884c\u5185\u5b58\u4e2d\u7684 static \u9759\u6001\u4ee3\u7801\u6bb5\uff0c\u6b64\u4ee3\u7801\u6bb5\u4f1a\u521b\u5efa\u4e00\u4e2a\u865a\u8c37 JDBC \u9a71\u52a8\u7684\u5b9e\u4f8b\uff0c\u5e76\u653e\u5165 DriverManager \u4e2d\uff0c\u4f9b DriverManager \u4f7f\u7528\u3002 {.is-info}","title":"4.2 \u52a0\u8f7dJDBC\u9a71\u52a8\u7a0b\u5e8f"},{"location":"JDBC8/#43","text":"\u865a\u8c37 JDBC \u9a71\u52a8\u8fde\u63a5 URL \u4e32\u683c\u5f0f\uff1a jdbc:xugu://serverIP:portNumber/databaseName[?property=value[&property=value]] \u865a\u8c37 JDBC \u9a71\u52a8\u8fde\u63a5 URL \u4e32\u683c\u5f0f\uff1a 1). jdbc:xugu:// \uff1a\uff08\u5fc5\u9700\uff09\u865a\u8c37\u6570\u636e\u5e93\u7279\u5b9a\u534f\u8bae\u3002 2). serverIP \uff1a\uff08\u5fc5\u9700\uff09\u865a\u8c37\u6570\u636e\u5e93\u6240\u5728\u670d\u52a1\u5668\u7684 IP \u5730\u5740\u3002 3). portNumber\uff1a\uff08\u5fc5\u9700\uff09\u662f\u865a\u8c37\u6570\u636e\u5e93\u670d\u52a1 TCP \u8bbf\u95ee\u7aef\u53e3\uff0c\u9ed8\u8ba4 5138\u3002 4). databaseName\uff1a\uff08\u5fc5\u9700\uff09\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u5e93\u540d\u79f0\u3002 5). property\uff1a\uff08\u53ef\u9009\uff09\u865a\u8c37\u6570\u636e\u5e93\u7684 URL \u8fde\u63a5\u5c5e\u6027\u3002\u591a\u4e2a\u8fde\u63a5\u5c5e\u6027\u4e4b\u95f4\u4f7f\u7528\u201c&\u201d\u5206\u9694\uff0c\u4e0d\u53ef\u91cd\u590d\u3002 \u865a\u8c37 JDBC \u9a71\u52a8 URL \u4e32\u793a\u4f8b\u5982\u4e0b\uff1a String url = jdbc:xugu://localhost:5138/System?user=GUEST&password=GUEST\u037e property \u8bbe\u7f6e\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u6027\uff0c\u5e38\u7528\u8fde\u63a5\u5c5e\u6027\u89c1\u88684.1\u3002 \u88684.1 \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u6027 table th:first-of-type { width: 20%; } table th:nth-of-type(2) { width: 10%; } table th:nth-of-type(3) { width: 10%; } table th:nth-of-type(4) { width: 50%; } \u5c5e\u6027\u540d\u79f0 \u5fc5\u9009\u9879 \u53d6\u503c \u8bf4\u660e database \u221a \u5b57\u7b26\u4e32 \u6570\u636e\u5e93\u540d\u79f0 user \u221a \u5b57\u7b26\u4e32 \u7528\u6237\u540d\u79f0 password \u221a \u5b57\u7b26\u4e32 \u7528\u6237\u5bc6\u7801 encryptor \u00d7 \u5b57\u7b26\u4e32 \u7528\u4e8e\u542f\u52a8\u52a0\u5bc6\u6570\u636e\u5e93\uff0c\u82e5\u5e93\u672a\u52a0\u5bc6\uff0c\u5219\u53ef\u4e0d\u8981\uff0c\u4f46\u5e26\u4e0a\u6b64\u53c2\u6570\u4e0d\u4f1a\u5f71\u54cd\u8fde\u63a5 char_set \u00d7 \u5b57\u7b26\u4e32 \u8fde\u63a5\u5b57\u7b26\u96c6\u3002'GB2312'\u3001'GBK'\u3001'UTF8' \u7b49\uff0c\u9ed8\u8ba4\uff1aGBK time_zone \u00d7 \u5b57\u7b26\u4e32 \u5ba2\u6237\u7aef\u65f6\u533a\u3002\u9ed8\u8ba4\uff1a\u865a\u8c37\u6570\u636e\u5e93\u914d\u7f6e\u53c2\u6570 def_timezone \u6240\u8bbe\u7f6e\u65f6\u533a\uff08\u53ea\u5bf9\u7cfb\u7edf\u65f6\u95f4\u51fd\u6570\u751f\u6548\uff09 iso_level \u00d7 \u5b57\u7b26\u4e32 'READ COMMITED'\uff1a\u8bfb\u5df2\u63d0\u4ea4\uff1b 'REPEATIABLE READ'\uff1a\u53ef\u91cd\u590d\u8bfb\uff1b'SERIALIZABLE'\uff1a\u5e8f\u5217\u5316 lock_time \u00d7 \u6570\u503c \u5355\u4f4d\uff1a\u6beb\u79d2\uff0c\u9ed8\u8ba4\u503c\uff1a0\uff0c\u8868\u793a\u8fde\u63a5\u4e2d\u7684\u4e8b\u52a1\u9501\u5f81\u7528\u65f6\uff0c\u6700\u5927\u7b49\u5019\u65f6\u95f4\uff0c\u82e5\u5728\u8bbe\u7f6e\u65f6\u95f4\u5185\u52a0\u9501\u5931\u8d25\uff0c\u56de\u6eda\u4e8b\u52a1\u5e76\u62a5\u9519 lob_ret \u00d7 \u5b57\u7b26\u4e32 \u5927\u5bf9\u8c61\uff08Blob\u3001Clob\uff09\u6570\u636e\u8fd4\u56de\u65b9\u5f0f\u3002\u5c5e\u6027\u4e3a descriptor \u65f6\uff0c\u4ee5\u63cf\u8ff0\u7b26\u65b9\u5f0f\u8fd4\u56de\uff1b\u5176\u4ed6\u4ee5\u6570\u636e\u6d41\u65b9\u5f0f\u8fd4\u56de\u3002\u9ed8\u8ba4\uff1a\u4ee5\u6570\u636e\u6d41\u65b9\u5f0f\u8fd4\u56de return_rowid \u00d7 \u5e03\u5c14\u503c \u662f\u5426\u8fd4\u56de\u8bb0\u5f55 rowid \u503c\u3002\u5c5e\u6027\u4e3a TRUE \u65f6\uff0c\u8fd4\u56de rowid\uff1b\u5176\u4ed6\u8fd4\u56de FALSE\u3002\u9ed8\u8ba4\uff1aFALSE auto_commit \u00d7 on/off \u4e8b\u52a1\u662f\u5426\u81ea\u52a8\u63d0\u4ea4\u3002\u5c5e\u6027\u4e3a ON \u65f6\uff0c\u8fde\u63a5\u81ea\u52a8\u63d0\u4ea4\uff1b\u5c5e\u6027\u4e3a OFF\u65f6\uff0c\u8fde\u63a5\u975e\u81ea\u52a8\u63d0\u4ea4\u3002\u9ed8\u8ba4\uff1aON conn_type \u00d7 \u6570\u503c \u8d1f\u8f7d\u5747\u8861\u5206\u914d\u65b9\u5f0f\u3002\u5c5e\u6027\u4e3a 1 \u65f6\uff0c\u968f\u673a\u5206\u914d\uff1b\u5c5e\u6027\u4e3a 2 \u65f6\uff0c\u987a\u5e8f\u5206\u914d\u3002\u9ed8\u8ba4\uff1a2 ips \u00d7 \u5b57\u7b26\u4e32 \u8d1f\u8f7d\u5747\u8861\u8fde\u63a5 IP \u5730\u5740\uff0c\u591a\u4e2a IP \u5730\u5740\u4ee5\u9017\u53f7\u5206\u9694\uff08\u8be6\u7ec6\u89c1\u8d1f\u8f7d\u5747\u8861\uff09 CompatibleOracle \u00d7 \u5e03\u5c14\u503c \u517c\u5bb9 Oracle \u9009\u9879\u3002\u5c5e\u6027\u4e3a true\uff0c\u517c\u5bb9 Oracle\u037e \u5c5e\u6027\u4e3a FALSE\uff0c\u865a\u8c37 JDBC \u81ea\u6709\u5b9e\u73b0 recv_mode \u00d7 \u6570\u503c \u63a5\u6536\u6a21\u5f0f\u9009\u9879\u3002\u5c5e\u6027\u503c\u4e3a 0 \u65f6\uff0c\u672c\u5730\u5168\u63a5\u6536\u6a21\u5f0f\uff1b\u5c5e\u6027\u503c\u4e3a 1 \u65f6\uff0c\u7f51\u7edc\u63a5\u6536\u6a21\u5f0f\uff1b\u5c5e\u6027\u503c\u4e3a 2 \u65f6\uff0c\u670d\u52a1\u5668\u7aef\u6e38\u6807\u63a5\u6536\u6a21\u5f0f\u3002\u9ed8\u8ba4\uff1a0 emptyStringAsNull \u00d7 \u5e03\u5c14\u503c \u7a7a\u5b57\u4e32\u5904\u7406\u3002\u5c5e\u6027\u4e3a FALSE \u65f6\uff0c\u7a7a\u5b57\u7b26\u4e32\u8ba4\u5b9a\u4e3a NULL\uff1b\u5c5e\u6027\u4e3a TRUE \u65f6\uff0c\u7a7a\u5b57\u7b26\u4e32\u4fdd\u7559\u3002\u9ed8\u8ba4\uff1a\u7a7a\u5b57\u4e32\u4fdd\u7559 xgversion \u00d7 201/301 \u5ba2\u6237\u7aef\u534f\u8bae\u7248\u672c\uff0c\u865a\u8c37\u6570\u636e\u5e93V12\u7248\u672c\u5347\u7ea7\u652f\u6301301\u534f\u8bae\uff0c\u540c\u65f6\u517c\u5bb9201\u534f\u8bae SSL \u00d7 SSL \u8fde\u63a5\u52a0\u5bc6\u53c2\u6570\u3002\u5c5e\u6027\u503c\u3010SSL\uff1a\u542f\u7528SSL\u52a0\u5bc6\u4f20\u8f93\uff1bNSSL\uff1a\u7981\u7528SSL\u52a0\u5bc6\u4f20\u8f93\u3011 slowsqltime \u00d7 \u6570\u503c \u8bbe\u7f6e\u6162SQL\u6267\u884c\u65f6\u95f4\u3002SQL\u8bed\u53e5\u6267\u884c\u65f6\u95f4\u8d85\u8fc7\u8be5\u6570\u503c\uff0c\u65e5\u5fd7\u5219\u4f1a\u8f93\u51fa\u6267\u884cSQL batch_mode \u00d7 \u5e03\u5c14\u503c PreparedStatement\u662f\u5426\u4f7f\u7528\u6279\u91cf\u5904\u7406\u3002\u5c5e\u6027\u4e3a TRUE \u65f6\uff0cexecuteBatch\u91c7\u7528\u6279\u91cf\u6a21\u578b\uff1bFALSE\u5219\u91c7\u7528\u5355\u6761\u5904\u7406\u6a21\u578b\u3002\u9ed8\u8ba4\uff1aFALSE \u8fde\u63a5\u53c2\u6570\u4f7f\u7528SSL\u5c5e\u6027\u65f6\uff0c\u4f9d\u8d56\u7a0b\u5e8f\u5305\u4e2d\u63d0\u4f9b\u7684\u52a8\u6001\u94fe\u63a5\u5e93\uff0c\u4f7f\u7528\u524d\u9700\u5c06\u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u5230\u64cd\u4f5c\u7cfb\u7edf\u6307\u5b9a\u4f4d\u7f6e\u65b9\u53ef\u6b63\u5e38\u4f7f\u7528SSL\u52a0\u5bc6\u529f\u80fd\u3002 Windows 32\u4f4d\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u7528SSL\u5c5e\u6027\u524d\uff0c\u9700\u5c06\u7a0b\u5e8f\u5305 ssl/win32 \u4e0b xgssl.dll \u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u62f7\u8d1d\u5230\u7cfb\u7edf\u76ee\u5f55 C:/windows/system32 \u76ee\u5f55\u4f4d\u7f6e\u3002 Windows 64\u4f4d\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u7528SSL\u5c5e\u6027\u524d\uff0c\u9700\u5c06\u7a0b\u5e8f\u5305 ssl/win64 \u4e0b xgssl.dll \u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u62f7\u8d1d\u5230\u7cfb\u7edf\u76ee\u5f55 C:/windows/system32 \u76ee\u5f55\u4e0b\u3002 Linux X64\u4f4d\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u7528SSL\u5c5e\u6027\u524d\uff0c\u9700\u5c06\u7a0b\u5e8f\u5305 ssl/linux64 \u4e0b libxgssl.so \u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u62f7\u8d1d\u5230\u7cfb\u7edf\u76ee\u5f55 /usr/lib\u6216\u8005/usr/lib4 \u76ee\u5f55\u4e0b\u3002 \u865a\u8c37 JDBC \u8bbe\u7f6e\u8fde\u63a5\u5c5e\u6027\u793a\u4f8b\u5982\u4e0b (\u7248\u672c\u53f7\u3001\u5927\u5bf9\u8c61\u63cf\u8ff0\u7b26\u3001\u65f6\u533a\u3001\u5173\u95ed\u8fde\u63a5\u81ea\u52a8\u63d0\u4ea4)\uff1a String url=jdbc:xugu://localhost:5138/System?user=GUEST&password=GUEST&version=110&auto_commit=false&lob_ret=descriptor&time_zone=GMT-8:00\u037e","title":"4.3 \u8fde\u63a5\u5b57\u4e32\u53ca\u53c2\u6570\u8bbe\u7f6e"},{"location":"JDBC8/#44","text":"\u5728\u5e94\u7528\u7a0b\u5e8f\u5c06\u865a\u8c37 JDBC \u9a71\u52a8\u52a0\u8f7d\u5230\u7cfb\u7edf\u5185\u5b58\u4e2d\u540e\uff0c\u53ef\u901a\u8fc7 DriverManager \u7c7b\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u65b9\u6cd5\u5982\u4e0b\uff1a DriverManager.getConnection(String url)\u037e DriverManager.getConnection(String url,Properties)\u037e DriverManager.getConnection(String url,String user,String password)\u037e","title":"4.4 \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5"},{"location":"JDBC8/#_3","text":"\u901a\u8fc7 DriverManager \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u4ee5\u5916\uff0c\u8fd8\u53ef\u4ee5\u4f7f\u7528\u6570\u636e\u6e90\u6216\u8fde\u63a5\u6c60\u65b9\u5f0f\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u3002\u901a\u8fc7\u6570\u636e\u6e90\u65b9\u5f0f\u6216\u8fde\u63a5\u6c60\u65b9\u5f0f\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u6709\u4ee5\u4e0b\u4f18\u70b9\uff1a - \u8d44\u6e90\u91cd\u7528 \u7531\u4e8e\u6570\u636e\u5e93\u8fde\u63a5\u5f97\u5230\u91cd\u7528\uff0c\u907f\u514d\u4e86\u9891\u7e41\u521b\u5efa\u3001\u91ca\u653e\u8fde\u63a5\u5f15\u8d77\u7684\u5927\u91cf\u6027\u80fd\u5f00\u9500\u3002\u5728\u51cf\u5c11\u7cfb\u7edf\u6d88\u8017\u7684\u57fa\u7840\u4e0a\uff0c\u53e6\u4e00\u65b9\u9762\u4e5f\u589e\u8fdb\u4e86\u7cfb\u7edf\u8fd0\u884c\u73af\u5883\u7684\u5e73\u7a33\u6027\uff08\u51cf\u5c11\u5185\u5b58\u788e\u7247\u4ee5\u53ca\u6570\u636e\u5e93\u4e34\u65f6\u8fdb\u7a0b/\u7ebf\u7a0b\u7684\u6570\u91cf\uff09\u3002 - \u66f4\u5feb\u7684\u7cfb\u7edf\u54cd\u5e94 \u6570\u636e\u5e93\u8fde\u63a5\u6c60\u5728\u521d\u59cb\u5316\u8fc7\u7a0b\u4e2d\uff0c\u5f80\u5f80\u5df2\u7ecf\u521b\u5efa\u4e86\u82e5\u5e72\u6570\u636e\u5e93\u8fde\u63a5\u7f6e\u4e8e\u6c60\u4e2d\u5907\u7528\u3002\u6b64\u65f6\u8fde\u63a5\u7684\u521d\u59cb\u5316\u5de5\u4f5c\u5747\u5df2\u5b8c\u6210\u3002\u5bf9\u4e8e\u4e1a\u52a1\u8bf7\u6c42\u5904\u7406\u800c\u8a00\uff0c\u76f4\u63a5\u5229\u7528\u73b0\u6709\u53ef\u7528\u8fde\u63a5\uff0c\u907f\u514d\u4e86\u6570\u636e\u5e93\u8fde\u63a5\u521d\u59cb\u5316\u548c\u91ca\u653e\u8fc7\u7a0b\u7684\u65f6\u95f4\u5f00\u9500\uff0c\u4ece\u800c\u7f29\u51cf\u4e86\u7cfb\u7edf\u6574\u4f53\u54cd\u5e94\u65f6\u95f4\u3002 - \u65b0\u7684\u8d44\u6e90\u5206\u914d\u624b\u6bb5 \u5bf9\u4e8e\u591a\u5e94\u7528\u5171\u4eab\u540c\u4e00\u6570\u636e\u5e93\u7684\u7cfb\u7edf\u800c\u8a00\uff0c\u53ef\u5728\u5e94\u7528\u5c42\u901a\u8fc7\u6570\u636e\u5e93\u8fde\u63a5\u7684\u914d\u7f6e\uff0c\u9650\u5236\u5355\u4e00\u5e94\u7528\u7533\u8bf7\u6570\u636e\u5e93\u8fde\u63a5\u6570\uff0c\u4ece\u800c\u907f\u514d\u5355\u4e00\u5e94\u7528\u72ec\u5360\u6240\u6709\u6570\u636e\u5e93\u8d44\u6e90\u3002 \u865a\u8c37 JDBC \u4e2d\u6570\u636e\u6e90\u5b9e\u73b0\u7c7b\u4e3a com.xugu.pool.XgDataSource\uff0c\u8fde\u63a5\u6c60\u5b9e\u73b0\u7c7b\u4e3acom.xugu.pool \u5305\u4e2d\u7684 XgDataSource\u3001XgPooledConnection\u3001XgConnectionPoolDataSource\u3001XgConnectionEventListener\u3001XgConnectionEvent\u3002","title":"\u4e94. \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u6e90\u548c\u8fde\u63a5\u6c60"},{"location":"JDBC8/#51","text":"XgDataSource \u63d0\u4f9b set \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u6e90\u8fde\u63a5\u5c5e\u6027\uff1a \u793a\u4f8b\uff1a\u901a\u8fc7 XgDataSource \u4e0e\u865a\u8c37\u6570\u636e\u5e93\u5efa\u7acb\u8fde\u63a5 com.xugu.pool.XgDataSource ds = new com.xugu.pool.XgDataSource()\u037e ds.setUrl(\"jdbc:xugu://127.0.0.1:5138/db\")\u037e ds.setUser(\"SYSDBA\")\u037e ds.setPassword(\"SYSDBA\")\u037e Properties pro = new Properties()\u037e pro.setProperty(\"return_rowid\", \"true\")\u037e pro.setProperty(\"auto_commit\", \"off\")\u037e ds.setPro(pro)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u767b\u5f55\u4e32\u3002url\u4e3a\u6570\u636e\u5e93\u767b\u5f55\u4e32 setUrl(String url)\uff1b //\u6307\u5b9a\u6570\u636e\u5e93\u670d\u52a1\u5668\u3002host\u4e3a\u670d\u52a1\u5668\u5730\u5740 setHostName(String host)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u540d\u3002dbName\u4e3a\u6570\u636e\u5e93\u540d setDatabaseName(String dbName)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u7aef\u53e3\u53f7\u3002port\u4e3a\u6570\u636e\u5e93\u7aef\u53e3\u53f7 setPort(int port)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u7528\u6237\u3002userName\u4e3a\u6570\u636e\u5e93\u767b\u5f55\u7528\u6237\u540d setUser(String userName)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u767b\u5f55\u5bc6\u7801\u3002passWord\u4e3a\u6570\u636e\u5e93\u767b\u5f55\u5bc6\u7801 setPassword(Stirng passWord)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u767b\u5f55\u53c2\u6570\u3002ds_pro\u4e3a\u6570\u636e\u5e93\u8fde\u63a5\u53c2\u6570 setPro(Properties ds_pro)\uff1b // \u901a\u8fc7\u6570\u636e\u6e90\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5 Connection conn = ds.getConnection()\u037e \u5728 com.xugu.pool.XgDataSource \u7c7b\u4e2d\u901a\u8fc7 setXX() \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u6e90\u7684\u8fde\u63a5\u5c5e\u6027\uff0c\u82e5\u672a\u6307\u5b9a\u5219\u4f7f\u7528\u9ed8\u8ba4\u5c5e\u6027\u503c\uff1a\u6570\u636e\u5e93\u670d\u52a1\u5668\u5730\u5740\u9ed8\u8ba4\u4e3a\u201clocalhost\u201d \uff0c\u8fde\u63a5\u6570\u636e\u5e93\u9ed8\u8ba4\u4e3a\u201cSYSTEM\u201d \uff0c\u8bbf\u95ee\u7aef\u53e3\u53f7\u9ed8\u8ba4\u4e3a\u201c5138\u201d \uff0c\u8bbf\u95ee\u7528\u6237\u540d\u9ed8\u8ba4\u4e3a\u201cGUEST\u201d \uff0c\u7528\u6237\u5bc6\u7801\u9ed8\u8ba4\u4e3a\u201cGUEST\u201d \u3002URL \u9ed8\u8ba4\u8fde\u63a5\u4e32\u4e3a\u201cjdbc:xugu://127.0.0.1:5138/SYSTEM?user=GUEST&password=GUEST&version=110\u201d\u3002\u6570\u636e\u6e90\u5efa\u7acb\u540e\uff0c\u53ef\u901a\u8fc7\u8c03\u7528 XgDataSource \u7c7b\u4e2d\u7684 getConnection() \u548c getConnection(String username,String password) \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u3002","title":"5.1 \u4f7f\u7528\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u6e90\u521b\u5efa\u8fde\u63a5"},{"location":"JDBC8/#52","text":"\u8fde\u63a5\u6c60\u6280\u672f\u7684\u6838\u5fc3\u601d\u60f3\u662f\uff1a\u8fde\u63a5\u590d\u7528\uff0c\u901a\u8fc7\u5efa\u7acb\u4e00\u4e2a\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u4ee5\u53ca\u4e00\u5957\u8fde\u63a5\u4f7f\u7528\u3001\u5206\u914d\u3001\u7ba1\u7406\u7b56\u7565\uff0c\u8be5\u8fde\u63a5\u6c60\u4e2d\u7684\u8fde\u63a5\u53ef\u4ee5\u5f97\u5230\u9ad8\u6548\u3001\u5b89\u5168\u7684\u590d\u7528\uff0c\u907f\u514d\u4e86\u6570\u636e\u5e93\u8fde\u63a5\u9891\u7e41\u5efa\u7acb\u3001\u5173\u95ed\u7684\u5f00\u9500\u3002 \u865a\u8c37 JDBC \u8fde\u63a5\u6c60\u5b9e\u73b0\u7c7b\u5bf9\u865a\u8c37\u6570\u636e\u5e93\u539f\u59cb\u8fde\u63a5\u8fdb\u884c\u4e86\u5c01\u88c5\uff0c\u4ece\u800c\u65b9\u4fbf\u4e86\u6570\u636e\u5e93\u5e94\u7528\u5bf9\u4e8e\u8fde\u63a5\u7684\u4f7f\u7528\uff08\u7279\u522b\u662f\u5bf9\u4e8e\u4e8b\u52a1\u5904\u7406\uff09\uff0c\u63d0\u9ad8\u4e86\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u6548\u7387\uff0c\u4e5f\u6b63\u662f\u56e0\u4e3a\u8fd9\u4e2a\u5c01\u88c5\u5c42\u7684\u5b58\u5728\uff0c\u9694\u79bb\u4e86\u5e94\u7528\u7684\u672c\u8eab\u7684\u5904\u7406\u903b\u8f91\u548c\u5177\u4f53\u6570\u636e\u5e93\u8bbf\u95ee\u903b\u8f91\uff0c\u4f7f\u5e94\u7528\u672c\u8eab\u7684\u590d\u7528\u6210\u4e3a\u53ef\u80fd\u3002\u8fde\u63a5\u6c60\u4e3b\u8981\u7531\u4e09\u90e8\u5206\u7ec4\u6210\uff1a\u8fde\u63a5\u6c60\u7684\u5efa\u7acb\u3001\u8fde\u63a5\u6c60\u4e2d\u8fde\u63a5\u7684\u4f7f\u7528\u7ba1\u7406\u3001\u8fde\u63a5\u6c60\u7684\u5173\u95ed\u3002 \u865a\u8c37 JDBC \u8fde\u63a5\u6c60\u7684\u57fa\u672c\u601d\u60f3\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u5efa\u7acb\u4e00\u4e2a\u201c\u7f13\u51b2\u6c60\u201d\u3002\u9884\u5148\u5728\u201c\u7f13\u51b2\u6c60\u201d\u4e2d\u653e\u5165\u4e00\u5b9a\u6570\u91cf\u7684\u8fde\u63a5\uff0c\u5f53\u9700\u8981\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65f6\uff0c\u53ea\u9700\u4ece\u201c\u7f13\u51b2\u6c60\u201d\u4e2d\u53d6\u51fa\u4e00\u4e2a\uff0c\u4f7f\u7528\u5b8c\u6bd5\u4e4b\u540e\u518d\u653e\u56de\u53bb\u3002\u901a\u8fc7\u8bbe\u5b9a\u8fde\u63a5\u6c60\u6700\u5927\u8fde\u63a5\u6570\u6765\u9632\u6b62\u7cfb\u7edf\u65e0\u5c3d\u7684\u4e0e\u6570\u636e\u5e93\u8fde\u63a5\u3002\u4ea6\u53ef\u901a\u8fc7\u8fde\u63a5\u6c60\u7684\u7ba1\u7406\u673a\u5236\u76d1\u89c6\u6570\u636e\u5e93\u7684\u8fde\u63a5\u6570\u91cf\u3001\u4f7f\u7528\u60c5\u51b5\uff0c\u4e3a\u7cfb\u7edf\u5f00\u53d1\u3001\u6d4b\u8bd5\u53ca\u6027\u80fd\u8c03\u6574\u63d0\u4f9b\u4f9d\u636e\u3002 \u5f53\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u5b8c\u6570\u636e\u5e93\u8fde\u63a5\u8c03\u7528\u8fde\u63a5\u5173\u95ed\u65b9\u6cd5\u65f6\uff0c\u8be5\u8fde\u63a5\u5e76\u672a\u9500\u6bc1\uff0c\u800c\u662f\u88ab\u5f52\u8fd8\u7ed9\u8fde\u63a5\u6c60\u7b49\u5f85\u4e0b\u6b21\u7ee7\u7eed\u8c03\u7528\u3002 {.is-info} \u865a\u8c37 JDBC \u5b9e\u73b0\u8fde\u63a5\u6c60\u670d\u52a1\u6240\u63d0\u4f9b\u7684\u63a5\u53e3\u7c7b\u5982\u4e0b\uff1a - XgDataSource \u5b9e\u73b0 javax.sql.DataSource \u63a5\u53e3\uff1b - XgPooledConnection \u5b9e\u73b0 javax.sql.PooledConnection \u63a5\u53e3\uff1b - XgConnectionPoolDataSource \u5b9e\u73b0 javax.sql.ConnectionPoolDataSource \u63a5\u53e3\uff1b - XgConnectionEventListener \u5b9e\u73b0 javax.sql.ConnectionEventListener \u63a5\u53e3\uff1b - XgConnectionEvent \u7ee7\u627f\u81ea javax.sql.ConnectionEvent \u7c7b\u3002 \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u4e2d\u7684\u8fde\u63a5\u5747\u662f\u901a\u8fc7\u6570\u636e\u6e90\u5efa\u7acb\u7684\uff0c\u6545\u800c XgConnectionPoolDataSource \u7ee7\u627f\u4e86 com.xugu.pool.XgDataSource \u7c7b\u3002\u7528\u6237\u4ea6\u53ef\u901a\u8fc7 XgConnectionPoolDataSource \u5bf9\u8c61\u8bbe\u7f6e\u6570\u636e\u6e90\u5c5e\u6027\u548c\u8fde\u63a5\u6c60\u5c5e\u6027\uff1a //\u6700\u5c0f\u8fde\u63a5\u6570 setMinIdle(int min) //\u6700\u5927\u8fde\u63a5\u6570 setMaxActive(int max) //\u767b\u5f55\u7a7a\u95f2\u65f6\u95f4 setLoginTimeout(int time) //\u6700\u5927\u7b49\u5f85\u8fde\u63a5\u8d85\u65f6 setMaxWaitTime(long waitTime) \u5176\u4e2d\uff1asetLoginTimeout() \u548c setMaxWaitTime() \u65b9\u6cd5\u4e2d\u53c2\u6570\u5355\u4f4d\u4e3a\u6beb\u79d2\uff0c\u5176\u4ed6\u65b9\u6cd5\u4e2d\u53c2\u6570\u5355\u4f4d\u4e3a\u79d2\u3002 \u793a\u4f8b\uff1a\u521b\u5efa\u4e00\u4e2a\u865a\u8c37 JDBC \u8fde\u63a5\u6c60\uff0c\u5e76\u901a\u8fc7\u8fde\u63a5\u6c60\u83b7\u53d6\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u3002 XgConnectionPoolDataSource CPDSource = new XgConnectionPoolDataSource()\u037e CPDSource.setHostName(\u201clocalhost\u201d)\u037e CPDSource.setPort(5138)\u037e CPDSource.setDatabaseName(\u201cxuguNew\u201d)\u037e CPDSource.setUser(\u201cSYSDBA\u201d)\u037e CPDSource.setPassword(\u201cSYSDBA\u201d)\u037e CPDSource.setUrl(\"jdbc:xugu://localhost:5138/xuguNew)\u037e CPDSource.setMaxActive(50)\u037e CPDSource.setMinIdle(5)\u037e CPDSource.setLoginTimeout(3000)\u037e CPDSource.setMaxWaitTime(3000)\u037e XgPooledConnection Pconn = (XgPooledConnection)CPDSource.getPooledConnection()\u037e Connection conn = Pconn.getConnection()\u037e","title":"5.2 \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u6c60"},{"location":"JDBC8/#jdbc_2","text":"\u4f7f\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u5b9e\u73b0\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u4ea4\u4e92\u7684\u4e00\u822c\u4f7f\u7528\u6b65\u9aa4\uff1a\u5bfc\u5165\u865a\u8c37 JDBC \u9a71\u52a8\u5305 \u2192 \u52a0\u8f7d\u865a\u8c37 JDBC \u9a71\u52a8\u7a0b\u5e8f \u2192 \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5 Connection \u2192 \u521b\u5efa\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61 Statement \u2192 \u6267\u884c SQL \u8bed\u53e5 \u2192 \u5904\u7406\u6267\u884c\u7ed3\u679c ResultSet \u2192 \u91ca\u653e\u8d44\u6e90\u3002 - \u7b2c 1 \u6b65\uff1a\u5bfc\u5165\u865a\u8c37 JDBC \u9a71\u52a8\u5305 - \u7b2c 2 \u6b65\uff1a\u6ce8\u518a\u9a71\u52a8 (\u4ec5\u505a\u4e00\u6b21) - \u7b2c 3 \u6b65\uff1a\u5efa\u7acb\u8fde\u63a5 (Connection) - \u7b2c 4 \u6b65\uff1a\u521b\u5efa\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61 (Statement) - \u7b2c 5 \u6b65\uff1a\u6267\u884c SQL \u8bed\u53e5 - \u7b2c 6 \u6b65\uff1a\u5904\u7406\u6267\u884c\u7ed3\u679c (ResultSet) - \u7b2c 7 \u6b65\uff1a\u91ca\u653e\u8d44\u6e90","title":"\u516d. \u865a\u8c37\u6570\u636e\u5e93\u7684JDBC\u4ea4\u4e92\u6d41\u7a0b"},{"location":"JDBC8/#61-jdbc","text":"\u4e0b\u8f7d\u865a\u8c37\u6570\u636e\u5e93\u4e13\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u5305 (cloudjdbc-*.*.*.jar)\uff0c\u5e76\u5bfc\u5165\u5230\u5e94\u7528\u7a0b\u5e8f\u4e2d\u3002","title":"6.1 \u5bfc\u5165\u865a\u8c37JDBC\u9a71\u52a8\u5305"},{"location":"JDBC8/#62-jdbc","text":"\u865a\u8c37 JDBC \u9a71\u52a8\u7a0b\u5e8f\u4e2d Driver \u63a5\u53e3\u5b9e\u73b0\u7c7b\u4e3a com.xugu.cloudjdbc.Driver\u3002\u52a0\u8f7d\u9a71\u52a8\u65b9\u5f0f\u4e3a DriverManager.registerDriver(new com.xugu.cloudjdbc.Driver()) \u6216Class.forName(\u201ccom.xugu.cloudjdbc.Driver\u201d)\u3002","title":"6.2 \u52a0\u8f7d\u865a\u8c37JDBC\u9a71\u52a8"},{"location":"JDBC8/#63","text":"\u5efa\u7acb\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u7684\u65b9\u5f0f\u6709\u591a\u79cd\uff0c\u53ef\u6839\u636e\u5e94\u7528\u7a0b\u5e8f\u5b9e\u9645\u4f7f\u7528\u573a\u666f\u9009\u62e9\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65b9\u5f0f\u3002\u5e38\u89c1\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65b9\u5f0f\u5982\u4e0b\uff1a - \u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u4f7f\u7528 DriverManager \u83b7\u5f97\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\uff1b - \u4f7f\u7528\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u6e90/\u8fde\u63a5\u6c60\u7684\u65b9\u5f0f\u83b7\u53d6\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\uff1b - \u4f7f\u7528\u7b2c\u4e09\u65b9\u901a\u7528\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u65b9\u5f0f\u83b7\u53d6\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u3002 \u5982\uff1adruid\u3001c3p0\u3001dbcp\u3001JNDI \u7b49\u3002","title":"6.3 \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5"},{"location":"JDBC8/#631","text":"\u6253\u5f00\u6570\u636e\u5e93\u8fde\u63a5\u5373\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u5bf9\u8c61 Connection \u7c7b\u3002 \u5982\uff1aDriverManager \u901a\u8fc7 getConnection() \u65b9\u6cd5\u83b7\u53d6 Connection \u7c7b\u5bf9\u8c61\u3002DriverManager \u7684 getConnection() \u65b9\u6cd5\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\u7684\u65b9\u5f0f\u4ea6\u6709\u591a\u79cd\u3002\u4ee5\u4e0b\u4e3a\u5e38\u89c1\u65b9\u5f0f\uff1a - getConnection(String url) \u53c2\u6570\u8bf4\u660e\uff1a - url\uff1a\u8bbf\u95ee\u6570\u636e\u5e93\u7684 URL \u8def\u5f84\u3002 \u793a\u4f8b\uff1a \u4e0b\u9762\u7684\u4ee3\u7801\u5229\u7528 getConnection \u65b9\u6cd5\u521b\u5efa\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u3002 ``` public Connection getConnection(){ Connection con=null\u037e try{ //\u6ce8\u518c\u6570\u636e\u5e93\u9a71\u52a8 Class.forName(\"com.xugu.cloudjdbc.Driver\")\u037e //\u5b9a\u4e49\u8fde\u63a5\u6570\u636e\u5e93\u7684url String url = \"jdbc:xugu://localhost:5138/db?user=user1\uff06password=pwd\"\u037e //\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5 con = DriverManager.getConnection(url)\u037e System.out.println(\"\u6570\u636e\u5e93\u8fde\u63a5\u6210\u529f\uff01\")\u037e }catch(Exception e){ e.printStackTrace()\u037e } //\u8fd4\u56de\u4e00\u4e2a\u8fde\u63a5 return con\u037e } ``` getConnection(String url,String user,String password) \u53c2\u6570\u8bf4\u660e\uff1a url\uff1a\u8bbf\u95ee\u6570\u636e\u5e93\u7684 URL \u8def\u5f84\u3002 user\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u7528\u6237\u540d\u3002 password\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u7528\u6237\u5bc6\u7801\u3002 \u793a\u4f8b\uff1a \u4e0b\u9762\u7684\u4ee3\u7801\u5229\u7528 getConnection \u65b9\u6cd5\u521b\u5efa\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u3002 private Connection con; private String user = \"user1\"; //\u5b9a\u4e49\u8fde\u63a5\u6570\u636e\u5e93\u7684\u7528\u6237\u540d private String password = \"pwd\"; //\u5b9a\u4e49\u8fde\u63a5\u6570\u636e\u5e93\u7684\u5bc6\u7801 private String className = \"com.xugu.cloudjdbc.Driver\";//\u5b9a\u4e49\u865a\u8c37JDBC\u9a71\u52a8 private String url = \"jdbc:xugu://localhost:5138/db\"; /\\*\\*\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\\*/ public Connection getConnection(){ try{ Class.forName(className);//\u52a0\u8f7d\u6570\u636e\u5e93\u9a71\u52a8 System.out.println(\"\u6570\u636e\u5e93\u9a71\u52a8\u52a0\u8f7d\u6210\u529f\uff01\"); con = DriverManager.getConnection(url,user,password); //\u8fde\u63a5\u6570\u636e\u5e93 System.out.println(\"\u6210\u529f\u5730\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\uff01\"); }catch(Exception e){ System.out.println(\"\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\u5931\u8d25\uff01\"); con = null; e.printStackTrace(); } finally { If(conn != null){ //\u91ca\u653e\u8fde\u63a5\u8d44\u6e90 conn.close(); } } return con; } getConnection(String url,Properties info) \u53c2\u6570\u8bf4\u660e\uff1a url\uff1a\u8bbf\u95ee\u6570\u636e\u5e93\u7684 URL \u8def\u5f84\u3002 info\uff1a\u4e00\u4e2a\u6301\u4e45\u7684\u5c5e\u6027\u96c6\u5bf9\u8c61\uff0c\u5305\u62ec user \u548c password \u7b49\u5c5e\u6027\u3002 \u793a\u4f8b\uff1a \u4e0b\u9762\u7684\u4ee3\u7801\u5229\u7528 getConnection \u65b9\u6cd5\u521b\u5efa\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u3002 public Connection getConnection(){ Connection con = null; //\u5b9a\u4e49\u6570\u636e\u5e93\u8fde\u63a5\u5bf9\u8c61 Properties info = new Properties(); //\u5b9a\u4e49Properties\u5bf9\u8c61 info.setProperty(\"user\",\"user1\"); //\u8bbe\u7f6eProperties\u5bf9\u8c61\u5c5e\u6027 info.setProperty(\"password\",\"pwd\"); try{ //\u6ce8\u518c\u6570\u636e\u5e93\u9a71\u52a8 Class.forName(\"com.xugu.cloudjdbc.Driver\"); //test\u4e3a\u6570\u636e\u5e93\u540d\u79f0 String url = \"jdbc:xugu://localhost:5138/db\"; //\u83b7\u53d6\u8fde\u63a5\u6570\u636e\u5e93\u7684Connection\u5bf9\u8c61 con = DriverManager.getConnection(url,info); System.out.println(\"\u6570\u636e\u5e93\u8fde\u63a5\u6210\u529f\uff01\"); }catch(Exception e){ e.printStackTrace(); } //\u8fd4\u56de\u4e00\u4e2a\u8fde\u63a5 return con; }","title":"6.3.1 \u6253\u5f00\u6570\u636e\u5e93\u8fde\u63a5"},{"location":"JDBC8/#632","text":"\u6570\u636e\u5e93\u4e8b\u52a1 (transaction) \u662f\u8bbf\u95ee\u5e76\u53ef\u80fd\u64cd\u4f5c\u5404\u79cd\u6570\u636e\u9879\u7684\u4e00\u4e2a\u6570\u636e\u5e93\u64cd\u4f5c\u5e8f\u5217\uff0c\u8fd9\u4e9b\u64cd\u4f5c\u8981\u4e48\u5168\u90e8\u6267\u884c, \u8981\u4e48\u5168\u90e8\u4e0d\u6267\u884c\uff0c\u662f\u4e00\u4e2a\u4e0d\u53ef\u5206\u5272\u7684\u5de5\u4f5c\u5355\u4f4d\u3002\u4e8b\u52a1\u7531\u4e8b\u52a1\u5f00\u59cb\u5230\u4e8b\u52a1\u7ed3\u675f\u4e4b\u95f4\u6267\u884c\u7684\u5168\u90e8\u6570\u636e\u5e93\u64cd\u4f5c\u7ec4\u6210\u3002 \u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\uff0c\u5373\u5f53\u4e00\u6761 SQL \u8bed\u53e5\u6267\u884c\u5b8c\u6210\u540e\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u5c06\u81ea\u52a8\u63d0\u4ea4\u8be5\u8bed\u53e5\u6240\u5728\u4e8b\u52a1\u3002\u5728\u865a\u8c37 JDBC \u9a71\u52a8\u4e2d\u63a7\u5236\u4e8b\u52a1\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a - \u901a\u8fc7\u6570\u636e\u5e93\u8fde\u63a5 URL \u4e32\u7684 auto_commit \u5c5e\u6027\uff0c\u63a7\u5236\u4e8b\u52a1\u7684\u5f00\u542f\u4e0e\u5173\u95ed\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b auto_commit \u5c5e\u6027\u4e3a on\uff0c\u5373\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u3002 - \u901a\u8fc7 Connection \u7c7b\u7684 setAutoCommit(boolean commit) \u65b9\u6cd5\u63a7\u5236\u4e8b\u52a1\u7684\u5f00\u542f\u4e0e\u5173\u95ed\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b commit \u5c5e\u6027\u4e3a TRUE\uff0c\u5373\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u3002 \u5728\u7981\u7528\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u4e0b\uff0c\u4f7f\u7528 Connection \u7c7b\u7684 commit() \u65b9\u6cd5\u63d0\u4ea4 SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u505a\u7684\u66f4\u6539\uff0c\u800c Connection \u7c7b\u7684 rollback() \u65b9\u6cd5\u5c06\u56de\u6eda SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u7684\u66f4\u6539\uff0c\u4e0a\u8ff0\u4e24\u79cd\u65b9\u6cd5\u6267\u884c\u5b8c\u6210\u540e\u5747\u5c06\u91ca\u653e\u4e8b\u52a1\u6301\u6709\u7684\u5168\u90e8\u9501\u8d44\u6e90\u3002 \u4e8b\u52a1\u4ec5\u5bf9\u6570\u636e\u5e93 DML \u64cd\u4f5c\u6709\u6548\u3002 {.is-info} \u4ee5\u4e0b\u4e3a\u4f7f\u7528 setAutoCommit() \u65b9\u6cd5\u63a7\u5236\u4e8b\u52a1\u63d0\u4ea4\u7684\u793a\u4f8b\u4ee3\u7801\uff1a //\u8bbe\u7f6e\u4e8b\u52a1\u4e3a\u975e\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f conn.setAutoCommit(false)\u037e //\u521b\u5efa\u6570\u636e\u5e93Statement\u5bf9\u8c61 Statement stm = conn.createStatement()\u037e //\u6570\u636e\u5e93\u4e8b\u52a1\u6267\u884cSQL\u8bed\u53e5 String sql = \"insert into test (comp_id,comp_name) values(1,'comp')\"\u037e //\u6267\u884c\u9759\u6001SQL\u8bed\u53e5 stm.execute(sql)\u037e //\u6570\u636e\u5e93\u9884\u5904\u7406SQL\u8bed\u53e5 PreparedStatement pstm = conn. prepareStatement(\u201cupdate test set id=? where comp_name=?\u201d) //\u9884\u5904\u7406SQL\u8bed\u53e5\u7b2c\u4e00\u4e2a\u53c2\u6570\u8d4b\u503c pstm.setInt(1,15)\u037e //\u9884\u5904\u7406SQL\u8bed\u53e5\u7b2c\u4e8c\u4e2a\u53c2\u6570\u8d4b\u503c pstm.setString(2,'DBMS')\u037e //\u6267\u884c\u9884\u5904\u7406SQL\u8bed\u53e5 pstm.execute()\u037e //\u63d0\u4ea4\u4e8b\u52a1 conn.commit()\u037e //\u5220\u9664\u8868\u4e2d\u6307\u5b9a\u884c\u6570\u636e stm.execute(\u201cdelete from test where id=15\u201d)\u037e //\u4e8b\u52a1\u56de\u6eda\u65b9\u6cd5 conn.rollback()\u037e \u4e0a\u9762\u4ee3\u7801\u4e2d\u6267\u884c\u63d0\u4ea4\u4e8b\u52a1\u64cd\u4f5c\uff0c\u6267\u884c\u9759\u6001 SQL \u8bed\u53e5\u4e0e\u6267\u884c\u9884\u5904\u7406 SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u7684\u66f4\u6539\u5c06\u6c38\u4e45\u751f\u6548\uff1b\u800c\u540e\u6267\u884c\u7684\u5220\u9664\u8868\u4e2d\u6307\u5b9a\u884c\u6570\u636e\u64cd\u4f5c\uff0c\u56e0\u5176\u540e\u8c03\u7528\u7684 rollback() \u65b9\u6cd5\uff0cdelete \u547d\u4ee4\u5bf9\u6570\u636e\u5e93\u7684\u6570\u636e\u66f4\u6539\u5c06\u88ab\u56de\u6eda\u6389\uff0c\u6545\u800c\u5bf9\u6570\u636e\u5e93\u7684\u5220\u9664\u64cd\u4f5c\u4e0d\u4f1a\u751f\u6548\u3002","title":"6.3.2 \u8fde\u63a5\u4e8b\u52a1\u7ba1\u7406"},{"location":"JDBC8/#633-savepoint","text":"JDBC \u89c4\u8303 3.0 \u4e2d\u4e3a\u4e86\u589e\u52a0\u5bf9\u4e8b\u52a1\u7684\u63a7\u5236\uff0c\u65b0\u589e Savepoint \u63a5\u53e3\uff0c\u5176\u4ee3\u8868\u4e8b\u52a1\u4e2d\u7684\u4e00\u4e2a\u903b\u8f91\u4e8b\u52a1\u70b9\u3002\u5728\u975e\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u4e0b\uff0c\u4e00\u4e2a\u4e8b\u52a1\u4e2d\u53ef\u4ee5\u8bbe\u7f6e\u591a\u4e2a Savepoint\uff0c\u5728\u4ee3\u7801\u4e2d\u8fdb\u884c\u4e8b\u52a1\u56de\u6eda\u64cd\u4f5c\u65f6\uff0c\u53ef\u4ee5\u6307\u5b9a\u4e8b\u52a1\u56de\u6eda\u5230\u6307\u5b9a Savepoint \u4f4d\u7f6e\uff0c\u6307\u5b9a\u56de\u6eda\u4f4d\u7f6e\u524d\u7684\u4e8b\u52a1\u64cd\u4f5c\u4ecd\u7136\u4fdd\u7559\u3002\u6b64\u63a5\u53e3\u5927\u5927\u63d0\u9ad8\u4e86\u4e8b\u52a1\u5904\u7406\u7684\u7c92\u5ea6\uff0c\u65b9\u4fbf\u5e94\u7528\u7a0b\u5e8f\u63a7\u5236\u4e8b\u52a1\u5904\u7406\u903b\u8f91\u3002 \u793a\u4f8b\uff1a\u8fde\u63a5\u4e8b\u52a1\u63a7\u5236\u63a5\u53e3 Savepoint \u4f7f\u7528 //\u8bbe\u7f6e\u975e\u81ea\u52a8\u63d0\u4ea4 conn.setAutoCommit(false); //\u521b\u5efaStatement\u5bf9\u8c61 Statement stm = conn.createStatement(); //\u6267\u884cSQL\u547d\u4ee4 stm.execute(sql1); stm.execute(sql2); //\u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\u70b9save1 java.sql.Savepoint save1 =conn.setSavepoint(\"save_1\"); stm.execute(sql3); //\u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\u70b9save2 java.sql.Savepoint save2 =conn.setSavepoint(\"save_2\"); stm.execute(sql4); //\u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\u70b9save3 java.sql.Savepoint save3 =conn.setSavepoint(\"save_3\"); stm.execute(sql5); //\u56de\u6eda\u4e8b\u52a1\u5230\u56de\u6eda\u70b9save3 conn.rollback(save3); conn.commit(); \u4ee5\u4e0a\u4ee3\u7801\u6bb5\u4e2d\uff0c\u4e8b\u52a1\u6267\u884c\u8bed\u53e5 sql5 \u5c06\u88ab\u56de\u6eda\u6389\u3002","title":"6.3.3 \u8fde\u63a5\u4e8b\u52a1\u63a7\u5236\uff0cSavepoint\u63a5\u53e3"},{"location":"JDBC8/#64-sql","text":"\u5728\u6570\u636e\u5e93\u6807\u51c6\u4e2d\uff0c\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61\u5206\u4e3a\u4e09\u7c7b\uff1a\u6267\u884c\u9759\u6001 SQL \u8bed\u53e5\u7684 Statement \u5bf9\u8c61\u3001\u6267\u884c\u9884\u7f16\u8bd1 SQL \u8bed\u53e5\u7684 PreparedStatement \u5bf9\u8c61\u4ee5\u53ca\u6267\u884c\u6570\u636e\u5e93\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\u7684 CallableStatement \u5bf9\u8c61\u3002","title":"6.4 \u521b\u5efa\u6267\u884cSQL\u8bed\u53e5\u5bf9\u8c61"},{"location":"JDBC8/#641-sqlstatement","text":"Statement \u5bf9\u8c61\u7528\u4e8e\u6267\u884c\u9759\u6001 SQL \u8bed\u53e5\u548c\u83b7\u5f97 SQL \u4ea7\u751f\u7684\u7ed3\u679c\u3002\u5728\u865a\u8c37 JDBC \u9a71\u52a8\u4e2d\uff0c\u865a\u8c37\u6570\u636e\u5e93 DDL \u64cd\u4f5c\u5747\u901a\u8fc7 Statement \u5bf9\u8c61\u6765\u6267\u884c\u3002 Statement \u5bf9\u8c61\u901a\u8fc7 Connection \u7c7b\u7684 createStatement() \u65b9\u6cd5\u521b\u5efa\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a //\u521b\u5efa\u6267\u884cSQL\u8bed\u53e5\u5bf9\u8c61Statement Statement stm = conn.createStatement()\u037e","title":"6.4.1 \u6267\u884cSQL\u5bf9\u8c61Statement"},{"location":"JDBC8/#642-sqlpreparedstatement","text":"PreparedStatement \u5bf9\u8c61\u4f7f\u7528\u65f6\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u5bf9\u6267\u884c SQL \u8bed\u53e5\u8fdb\u884c\u9884\u7f16\u8bd1\u5904\u7406\uff0c\u9884\u7f16\u8bd1 SQL \u8bed\u53e5\u5c06\u5728\u672a\u6765\u7684\u4f7f\u7528\u4e2d\u88ab\u91cd\u7528\u3002\u4e0e Statement \u5bf9\u8c61\u76f8\u6bd4\uff0cPreparedStatement \u5bf9\u8c61\u64cd\u4f5c\u591a\u6761 SQL \u8bed\u53e5\u7684\u6548\u7387\u66f4\u9ad8\u3002 \u7ecf\u8fc7\u9884\u7f16\u8bd1\u5e76\u5b58\u50a8\u5728 PreparedStatement \u5bf9\u8c61\u4e2d\u7684 SQL \u8bed\u53e5\uff0c\u901a\u8fc7 Connection \u7c7b\u7684 prepareStatement() \u65b9\u6cd5\u521b\u5efa\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a //\u521b\u5efa\u6267\u884c\u9884\u7f16\u8bd1SQL\u8bed\u53e5\u5bf9\u8c61PreparedStatement PreparedStatement preStatement = conn.prepareStatement(\u201c\u9884\u7f16\u8bd1SQL\u8bed\u53e5\u201d); \u9884\u5904\u7406 PreparedStatement \u5bf9\u8c61\u76f8\u5bf9\u4e8e\u9759\u6001 Statement \u5bf9\u8c61\u7684\u4f18\u52bf\uff1a - PreparedStatement \u53ef\u4ee5\u52a8\u6001\u4f20\u5165\u53c2\u6570\u503c\uff1b - PreparedStatement \u6bd4 Statement \u66f4\u5feb\uff1b PreparedStatement \u4f1a\u5c06 SQL \u8bed\u53e5\u9884\u7f16\u8bd1\u5728\u6570\u636e\u5e93\u7cfb\u7edf\u4e2d\uff0c\u6267\u884c\u8ba1\u5212\u540c\u6837\u4f1a\u88ab\u7f13\u5b58\u8d77\u6765\uff0c\u5b83\u5141\u8bb8\u6570\u636e\u5e93\u505a\u53c2\u6570\u5316\u67e5\u8be2\u3002\u4f7f\u7528\u9884\u5904\u7406\u8bed\u53e5\u6bd4\u666e\u901a\u7684 Statement \u67e5\u8be2\u66f4\u5feb\uff0c\u56e0\u505a\u7684\u5de5\u4f5c\u66f4\u5c11 (\u6570\u636e\u5e93\u5bf9 SQL \u8bed\u53e5\u7684\u5206\u6790\u3001\u7f16\u8bd1\u3001\u4f18\u5316\u5df2\u7ecf\u5728\u7b2c\u4e00\u6b21\u67e5\u8be2\u524d\u5b8c\u6210\u4e86)\u037e - PreparedStatement \u53ef\u4ee5\u9632\u6b62 SQL \u6ce8\u5165\u5f0f\u653b\u51fb\u3002 PreparedStatement \u5728\u4f7f\u7528\u53c2\u6570\u5316\u67e5\u8be2\u7684\u60c5\u51b5\u4e0b\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u4e0d\u4f1a\u5c06\u53c2\u6570\u7684\u5185\u5bb9\u89c6\u4e3a SQL \u6307\u4ee4\u7684\u4e00\u90e8\u5206\u6765\u5904\u7406\uff0c\u800c\u662f\u5728\u6570\u636e\u5e93\u5b8c\u6210 SQL \u6307\u4ee4\u7684\u7f16\u8bd1\u540e\uff0c\u624d\u5957\u7528\u53c2\u6570\u8fd0\u884c\uff0c\u56e0\u6b64\u5c31\u7b97\u53c2\u6570\u4e2d\u542b\u6709\u7834\u574f\u6027\u7684\u6307\u4ee4\uff0c\u4e5f\u4e0d\u4f1a\u88ab\u6570\u636e\u5e93\u6240\u8fd0\u884c\u3002","title":"6.4.2 \u6267\u884cSQL\u5bf9\u8c61PreparedStatement"},{"location":"JDBC8/#643-callablestatement","text":"CallableStatement \u5bf9\u8c61\u5b9e\u73b0\u4e86\u4ece Java \u5e94\u7528\u7a0b\u5e8f\u4e2d\u8c03\u7528\u6570\u636e\u5e93\u5b58\u50a8\u8fc7\u7a0b\u3002\u4f46\u6b64\u8c03\u7528\u8fc7\u7a0b\u5e76\u4e0d\u5305\u542b\u5b58\u50a8\u8fc7\u7a0b\u672c\u8eab\uff0c\u56e0\u5b58\u50a8\u8fc7\u7a0b\u5b58\u50a8\u5728\u6570\u636e\u5e93\u4e2d\u3002 CallableStatement \u5bf9\u8c61\u4e3a\u6240\u6709\u7684\u6570\u636e\u5e93\u63d0\u4f9b\u4e86\u4e00\u79cd\u4ee5\u6807\u51c6\u5f62\u5f0f\u8c03\u7528\u5b58\u50a8\u8fc7\u7a0b\u7684\u65b9\u6cd5\uff0c\u901a\u8fc7 Connection \u7c7b\u7684 prepareCall() \u65b9\u6cd5\u521b\u5efa\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a //\u521b\u5efa\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u5bf9\u8c61CallableStatement CallableStatement cstmt= conn.prepareCall(\u201c{call \u5b58\u50a8\u8fc7\u7a0b\u540d(\u53c2\u6570\u8868\u5217)}\u201d);","title":"6.4.3 \u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u5bf9\u8c61CallableStatement"},{"location":"JDBC8/#644-sql","text":"\u5728\u521b\u5efa\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61\u65f6\uff0c\u53ef\u901a\u8fc7\u6784\u9020\u65b9\u6cd5\u7684\u4e0d\u540c\u53c2\u6570\u8bbe\u7f6e ResultSet \u5bf9\u8c61\u5c5e\u6027\uff0c\u5c5e\u6027\u5305\u62ec\u7ed3\u679c\u7c7b\u578b ResultSetType\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b ResultSetConcurrency\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b ResultSetHoldability\u3002 ResultSetType \u9ed8\u8ba4\u4e3a ResultSet.TYPE_SCROLL_INSENSITIVE\uff1a\u652f\u6301\u7ed3\u679c\u96c6 backforward\u3001last\u3001first \u7b49\u64cd\u4f5c\uff0c\u5bf9\u6570\u636e\u5e93\u4e2d\u5176\u5b83 session \u8fdb\u884c\u7684\u6570\u636e\u66f4\u6539\u4e0d\u654f\u611f\uff1b ResultSetConcurrency \u9ed8\u8ba4\u4e3a ResultSet.CONCUR_READ_ONLY: \u4e0d\u53ef\u66f4\u65b0\u7ed3\u679c\u96c6\uff1b\u8be5\u5c5e\u6027\u4ea6\u53ef\u66f4\u6539\u4e3a ResultSet.CONCUR_UPDATABLE\uff0c\u652f\u6301\u5728 ResultSet \u4e2d\u5bf9\u8bb0\u5f55\u8fdb\u884c\u4fee\u6539\uff0c\u4fee\u6539\u540e\u8bb0\u5f55\u66f4\u65b0\u5230\u6570\u636e\u5e93\uff0c\u4fee\u6539\u64cd\u4f5c\u53ef\u5305\u542b\u63d2\u5165\u3001\u5220\u9664\u6216\u66f4\u65b0\uff1b ResultSetHoldability \u9ed8\u8ba4\u4e3a ResultSet.HOLD_CURSORS_OVER_COMMIT: \u5728\u4e8b\u52a1 commit \u6216 rollback \u540e\uff0cResultSet \u4ecd\u7136\u53ef\u7528\u3002 Connection \u7c7b\u521b\u5efa Statement \u5bf9\u8c61\u6784\u9020\u65b9\u6cd5\uff1a //Statement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 createStatement(int resultSetType,int resultSetConcurrency)\uff1b //Statement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 createStatement(int resultSetType,int resultSetConcurrency, int resultSetHoldability)\uff1b Connection \u7c7b\u521b\u5efa PreparedStatement \u5bf9\u8c61\u6784\u9020\u65b9\u6cd5\uff1a //PreparedStatement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareStatement(String sql, int resultSetType,int resultSetConcurrency) //PrepareStatment\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareStatement(String sql, int resultSetType,int resultSetConcurrency, int resultSetHoldability) Connection \u7c7b\u521b\u5efa CallableStatement \u5bf9\u8c61\u6784\u9020\u65b9\u6cd5\uff1a //CallableStatement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareCall(String sql, int resultSetType,int resultSetConcurrency) //CallableStatement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareCall(String sql, int resultSetType,int resultSetConcurrency, int resultSetHoldability)","title":"6.4.4 \u6267\u884cSQL\u8bed\u53e5\u5bf9\u8c61\u5c5e\u6027\u6269\u5145"},{"location":"JDBC8/#65-sql","text":"Statement \u5bf9\u8c61\u5b9a\u4e49\u4e86\u591a\u79cd\u6267\u884c SQL \u8bed\u53e5\u7684\u65b9\u6cd5\uff0c\u7528\u6765\u5904\u7406\u8fd4\u56de\u4e0d\u540c\u7ed3\u679c\u7684 SQL \u547d\u4ee4\uff1a - execute(String sql)\uff1a\u6267\u884c\u53ef\u4ee5\u8fd4\u56de\u591a\u4e2a\u7ed3\u679c\u96c6\u7684 SQL \u8bed\u53e5\u8fd4\u56de\u7c7b\u578b\u4e3a boolean\uff0c\u5982\u679c\u8fd4\u56de\u7684\u662f\u66f4\u65b0\u7684\u6570\u76ee\uff0c\u5219\u8fd4\u56de false\uff1b\u5982\u679c\u8fd4\u56de\u7684\u662f ResultSet \u5bf9\u8c61\uff0c\u5219\u8fd4\u56detrue\u3002 - executeQuery(String sql)\uff1a\u6267\u884c\u8fd4\u56de\u5355\u4e2a ResultSet \u7684 SQL \u8bed\u53e5\u8fd4\u56de\u7c7b\u578b\u4e3a ResultSet \u5bf9\u8c61\u3002 - executeUpdate()\uff1a\u6267\u884c SQL INSERT\u3001UPDATE \u6216 DELETE \u8bed\u53e5\u8fd4\u56de\u503c\u4e3a int \u578b\uff0c\u6570\u636e\u5e93\u53d7\u5f71\u54cd\u7684\u884c\u8ba1\u6570\u3002 - \u6279\u5904\u7406\u65b9\u6cd5\uff1a\u6279\u91cf\u6267\u884c SQL \u8bed\u53e5 clearBatch()\uff1a\u6e05\u7a7a\u5386\u53f2 batch \u547d\u4ee4\uff1b addBatch(String sql)\uff1a\u6dfb\u52a0\u8981\u6267\u884c\u7684 sql\uff1b executeBatch()\uff1a\u6279\u91cf\u6267\u884c sql\u3002 PreparedStatement \u7ee7\u627f\u81ea Statement\uff0c\u5b9a\u4e49\u4e86\u5927\u91cf\u7684 setter \u65b9\u6cd5\u7528\u4e8e\u8bbe\u7f6e\u52a8\u6001 sql\u7684\u53c2\u6570\uff0c\u56e0\u6b64 PreparedStatement \u652f\u6301\u52a8\u6001\u4f20\u53c2\uff1b\u53e6\u5916 PreparedStatement \u5185\u90e8\u5b58\u50a8\u4e86\u89e3\u6790\u7684 sql\uff0c\u53ef\u4ee5\u591a\u6b21\u6267\u884c\u800c\u65e0\u9700\u91cd\u590d\u89e3\u6790\u3002PreparedStatement \u7ee7\u627f\u81ea Statement\uff0cCallableStatement \u7ee7\u627f\u81ea PreparedStatement\uff0c\u6545\u800c\u4e09\u8005\u6267\u884c SQL \u8bed\u53e5\u7684\u65b9\u5f0f\u53ef\u901a\u7528\u3002","title":"6.5 \u6267\u884cSQL\u8bed\u53e5"},{"location":"JDBC8/#651-statement","text":"\u901a\u8fc7 Statement \u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c\u9700\u8981\u6ce8\u610f\u7684\u4e8b\u9879\uff1a - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u524d\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u8bbe\u7f6e\u4e3a FALSE\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\uff0c\u5e76\u8fdb\u884c\u624b\u52a8\u63d0\u4ea4\uff08commit\uff09\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u540e\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u6062\u590d\u4e3a TRUE\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u5f02\u5e38\u53d1\u751f\u65f6\uff0c\u8fdb\u884c rollback(\u56de\u6eda)\u3002 \u793a\u4f8b\uff1a\u901a\u8fc7 Statement \u6279\u91cf\u64cd\u4f5c\u6570\u636e try { //\u521b\u5efaStatement\u5bf9\u8c61 stm = con.createStatement(); //\u8bbe\u7f6e\u4e8b\u52a1\u975e\u81ea\u52a8\u63d0\u4ea4 con.setAutoCommit(false); // \u6dfb\u52a0\u591a\u6761SQL\u8bed\u53e5\u5230\u6279\u5904\u7406\u4e2d stm.addBatch(\"insert into student values(23,'tangbao','\u9ad8\u6570',100)\"); stm.addBatch(\"insert into student values(24,'\u738b\u5b9a','c#',98)\"); stm.addBatch(\"insert into student values(25,'\u738b\u56fd\u4e91','java',90)\"); //\u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c stm.executeBatch(); System.out.println(\"\u63d2\u5165\u6210\u529f!\"); //\u6267\u884c\u6210\u529f\u540e\u8fdb\u884c\u6570\u636e\u63d0\u4ea4 con.commit(); System.out.println(\"\u63d0\u4ea4\u6210\u529f!\"); //\u5173\u95ed\u975e\u81ea\u52a8\u63d0\u4ea4 con.setAutoCommit(true); } catch (SQLException e) { if (!con.isClosed()) { con.rollback(); //\u51fa\u73b0\u5f02\u5e38\uff0c\u56de\u6eda\u4e8b\u52a1 System.out.println(\"\u63d0\u4ea4\u5931\u8d25\uff0c\u56de\u6eda\uff01\"); con.setAutoCommit(true); //\u5173\u95ed\u975e\u81ea\u52a8\u63d0\u4ea4 } } finally { if (stmt != null) { //\u5173\u95ed\u64cd\u4f5c\u5bf9\u8c61 stmt.close(); } }","title":"6.5.1 \u901a\u8fc7Statement\u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c"},{"location":"JDBC8/#652-preparedstatement","text":"\u901a\u8fc7 PreparedStatement \u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c\u9700\u8981\u6ce8\u610f\u7684\u4e8b\u9879\uff1a - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u524d\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u8bbe\u7f6e\u4e3a FALSE\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\uff0c\u5e76\u8fdb\u884c\u624b\u52a8\u63d0\u4ea4\uff08commit\uff09\uff0c\u6570\u636e\u91cf\u5927\u65f6\uff0c\u8bbe\u7f6e\u624b\u52a8\u63d0\u4ea4\u95f4\u9694\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u540e\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u6062\u590d\u4e3a TRUE\uff1b \u2022 \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u5f02\u5e38\u53d1\u751f\u65f6\uff0c\u8fdb\u884c rollback(\u56de\u6eda)\uff1b - PreparedStatement \u6267\u884c\u8bed\u53e5\u4e0d\u80fd\u4e3a DDL \u8bed\u53e5\u3002 \u793a\u4f8b\uff1a\u5c06 10000 \u6761\u8bb0\u5f55\u63d2\u5165\u6570\u636e\u5e93\u4e2d\uff0c\u6bcf 100 \u6761\u6267\u884c\u4e00\u6b21\u63d0\u4ea4\u64cd\u4f5c try{ conn.setAutoCommit(false); //\u8bbe\u7f6e\u975e\u81ea\u52a8\u63d0\u4ea4 //\u521b\u5efaPreparedStatement\u5bf9\u8c61 ps = conn.prepareStatement(\"insert into testtab values (?, ?, ?)\"); //\u5faa\u73af\u6dfb\u52a0\u6279\u5904\u7406\u6570\u636e for(int i = 0;i<list.size();i++){ HashMap map = list.get(i);//list\u4e3a\u6570\u636e\u5c01\u88c5\uff0c\u6b64\u5904\u7565 ps.setString(1, map.get(\"id\").toString()); ps.setString(2, map.get(\"name\").toString()); ps.setString(3, map.get(\"age\").toString()); ps.addBatch(); if(mod(i,100)==0){//\u6bcf100\u6761\u6267\u884c\u4e00\u6b21\u6267\u884c\u64cd\u4f5c ps.executeBatch();//\u6267\u884c\u6279\u91cf\u63d2\u5165 conn.commit();//\u6267\u884c\u4e8b\u52a1\u63d0\u4ea4 } } ps.executeBatch();//\u6267\u884c\u6279\u91cf\u63d2\u5165 conn.commit(); //\u63d0\u4ea4\u4e8b\u52a1 }catch(Exception e){ if (!conn.isClosed()) { conn.rollback(); //\u51fa\u73b0\u5f02\u5e38\uff0c\u56de\u6eda\u4e8b\u52a1 System.out.println(\"\u63d0\u4ea4\u5931\u8d25\uff0c\u56de\u6eda\uff01\"); conn.setAutoCommit(true); //\u5173\u95ed\u975e\u81ea\u52a8\u63d0\u4ea4 } } finally { if (ps!= null) { ps.close();//\u5173\u95ed\u64cd\u4f5c\u5bf9\u8c61 } }","title":"6.5.2 \u901a\u8fc7PreparedStatement\u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c"},{"location":"JDBC8/#653-callablestatement","text":"CallableStatement \u5b58\u5728\u4e09\u79cd\u7c7b\u578b\u7684\u53c2\u6570 IN\u3001OUT \u548c INOUT\u3002 - IN\uff1a\u521b\u5efa SQL \u8bed\u53e5\u65f6\u5176\u53c2\u6570\u503c\u672a\u77e5\u3002\u4f7f\u7528 setXXX() \u65b9\u6cd5\u5c06\u503c\u7ed1\u5b9a\u5230 IN \u53c2\u6570\u3002 - OUT\uff1a\u7531 SQL \u8bed\u53e5\u8fd4\u56de\u7684\u53c2\u6570\u503c\u3002\u53ef\u4ee5\u4f7f\u7528 getXXX() \u65b9\u6cd5\u4ece OUT \u53c2\u6570\u4e2d\u68c0\u7d22\u503c\u3002 - INOUT\uff1a\u63d0\u4f9b\u8f93\u5165\u548c\u8f93\u51fa\u503c\u7684\u53c2\u6570\u3002\u4f7f\u7528 setXXX() \u65b9\u6cd5\u7ed1\u5b9a\u53d8\u91cf\u5e76\u4f7f\u7528getXXX() \u65b9\u6cd5\u68c0\u7d22\u503c\u3002 \u793a\u4f8b 1\uff1a\u901a\u8fc7\u53c2\u6570\u4e0b\u6807\u7ed1\u5b9a\u53c2\u6570 //\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\u8bed\u53e5 String sql =\"{call pro_2(?,?,?)}\"; //\u521b\u5efaCallableStatement\u5bf9\u8c61 CallableStatement cstm = conn.prepareCall(sql); //\u901a\u8fc7\u53c2\u6570\u4e0b\u6807\u8bbe\u7f6e\u53c2\u6570(IN\u53c2\u6570) cstm.setInt(1, 20490); //\u6ce8\u518cOUT\u53c2\u6570\u6570\u636e\u7c7b\u578b cstm.registerOutParameter(2, com.xugu.cloudjdbc.Types.VARCHAR); cstm.registerOutParameter(3, com.xugu.cloudjdbc.Types.VARCHAR); //\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528 cstm.execute(); //\u83b7\u53d6\u5b58\u50a8\u8fc7\u7a0b\u8f93\u51fa\u53c2\u6570 String name = (String)cstm.getObject(2); String address = (String)cstm.getObject(3); \u793a\u4f8b 2\uff1a\u901a\u8fc7\u53c2\u6570\u540d\u7ed1\u5b9a\u53c2\u6570 //\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\u8bed\u53e5 CallableStatement pstm = conn.prepareCall(\"insert into tt1 values(:id,:name)\"); //\u901a\u8fc7\u53c2\u6570\u540d\u8bbe\u7f6e\u53c2\u6570(IN\u53c2\u6570) pstm.setInt(\"id\", 1); pstm.setString(\"name\", \"cloud\"); //\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528 pstm.execute();","title":"6.5.3 CallableStatement\u7ed1\u5b9a\u53c2\u6570"},{"location":"JDBC8/#66","text":"ResultSet \u7c7b\u662f\u901a\u8fc7 Statement \u53ca\u5176\u5b50\u7c7b\u6267\u884c SQL \u67e5\u8be2\u8bed\u53e5\u5f97\u5230\u7684\u7ed3\u679c\u96c6\u3002ResultSet \u7c7b\u5305\u542b\u4e09\u4e2a\u91cd\u8981\u5c5e\u6027\uff1aResultSet \u5bf9\u8c61\u5e76\u53d1\u6a21\u5f0f\u3001ResultSet \u5bf9\u8c61\u5149\u6807\u5904\u7406\u65b9\u5411\u3001ResultSet \u5bf9\u8c61\u5149\u6807\u7c7b\u578b\u3002ResultSet \u7c7b\u5177\u6709\u6307\u5411\u5f53\u524d\u7ed3\u679c\u96c6\u6570\u636e\u884c\u4f4d\u7f6e\u5149\u6807\uff0c\u5149\u6807\u4f4d\u7f6e\u521d\u59cb\u88ab\u7f6e\u4e8e\u7b2c\u4e00\u884c\u4e4b\u524d\uff0c\u901a\u8fc7 ResultSet \u7c7b\u5c01\u88c5\u7684\u5149\u6807\u79fb\u52a8\u65b9\u6cd5\u5b9e\u73b0\u5bf9\u5149\u6807\u4f4d\u7f6e\u7684\u63a7\u5236\uff0c\u5f53 ResultSet \u5bf9\u8c61\u7684\u5149\u6807\u79fb\u81f3\u6570\u636e\u7ed3\u679c\u96c6\u672b\u5c3e\u65f6 (\u4e0b\u4e00\u884c\u65e0\u6570\u636e)\uff0c\u8fd4\u56de FALSE\u3002 \u5728\u865a\u8c37 JDBC \u4e2d\uff0cResultSet \u7c7b\u5206\u4e3a\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u548c\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\uff08\u901a\u8fc7 URL \u8fde\u63a5\u4e32\u53c2\u6570 recv_mode \u914d\u7f6e\uff09\u3002\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u9ed8\u8ba4\u5c5e\u6027\u4e3a\u4e0d\u53ef\u66f4\u65b0\u3001\u5411\u524d\u79fb\u52a8\u3001\u53ef\u4ee5\u6eda\u52a8\uff1b\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u9ed8\u8ba4\u5c5e\u6027\u4e3a\u4e0d\u53ef\u66f4\u65b0\u3001\u53ea\u5411\u524d\u79fb\u52a8\u3001\u4e0d\u53ef\u6eda\u52a8\u3002 Statement \u5bf9\u8c61\u6267\u884c SQL \u8bed\u53e5\u8fd4\u56de\u7ed3\u679c\u96c6\u4ec5\u80fd\u662f\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\uff0c\u800c PreparedStatement \u5bf9\u8c61\u6267\u884c SQL \u8bed\u53e5\u8fd4\u56de\u7ed3\u679c\u96c6\u53ef\u4e3a\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u6216\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u3002 \u5f53\u6267\u884c SQL \u8fd4\u56de\u6570\u636e\u7ed3\u679c\u96c6\u8f83\u5927\u65f6\uff0c\u5efa\u8bae\u4f7f\u7528\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\uff0c\u907f\u514d JVM \u7684\u6ea2\u51fa\u3002 {.is-info}","title":"6.6 \u5904\u7406\u6267\u884c\u7ed3\u679c"},{"location":"JDBC8/#661-resultset","text":"\u521b\u5efa Statement \u5bf9\u8c61\u65f6\uff0c\u8bbe\u7f6e Statement \u5c5e\u6027 RresultSetConcurrency \u4e3a ResultSet.CONCUR_UPDATABLE\uff0c\u5e76\u4e14\u6570\u636e\u5e93 URL \u8fde\u63a5\u4e32\u5c5e\u6027 return_rowid \u8bbe\u7f6e\u4e3a TRUE\u65f6\uff0cStatement \u5bf9\u8c61\u6267\u884c SQL \u8bed\u53e5\u8fd4\u56de\u7684 ResultSet \u7ed3\u679c\u96c6\u624d\u80fd\u88ab\u66f4\u65b0\u3002\u5f53 ResultSet \u5bf9\u8c61\u4e3a\u53ef\u66f4\u65b0\u7ed3\u679c\u96c6\u65f6\uff0c\u5c06\u5149\u6807\u79fb\u81f3\u63d2\u5165\u4f4d\u7f6e\uff0c\u53ef\u8c03\u7528 ResultSet \u7c7b\u5bf9\u5e94\u7684 update \u65b9\u6cd5\u4fee\u6539\u7ed3\u679c\u96c6\u4e2d\u884c\u6570\u636e\uff0c\u5e76\u901a\u8fc7 updateRow \u65b9\u6cd5\u5c06\u66f4\u6539\u6570\u636e\u66f4\u65b0\u5230\u6570\u636e\u5e93\u4e2d\u3002 \u793a\u4f8b\uff1a\u901a\u8fc7\u4fee\u6539\u7ed3\u679c\u96c6\u4e2d\u6570\u636e\u503c\u66f4\u6539\u6570\u636e\u5e93\u4e2d\u5bf9\u5e94\u8bb0\u5f55 //\u521b\u5efaStatement\u5bf9\u8c61\u5e76\u8bbe\u7f6e\u7ed3\u679c\u96c6\u5c5e\u6027\u4e3a\u53ef\u66f4\u65b0 Statement stm = conn.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_UPDATABLE); //\u6267\u884cSQL\u8bed\u53e5 ResultSet rs = stm.executeQuery(sql); //\u7ed3\u679c\u96c6\u904d\u5386 while(rs.next()) { //\u66f4\u65b0\u7ed3\u679c\u96c6\u4e2d\u6307\u5b9a\u5217\u6570\u636e rs.updateLong(1, 5); //\u66f4\u65b0\u7ed3\u679c\u96c6\u4e2d\u6307\u5b9a\u5217\u6570\u636e rs.updateFloat(3, 12.3f); //\u7ed3\u679c\u96c6\u53d8\u66f4\u56de\u5199\u5165\u6570\u636e\u5e93 rs.updateRow(); } \u901a\u8fc7\u8c03\u7528 ResultSet \u7c7b\u7684 next()\u3001previous()\u3001absolute(int) \u65b9\u6cd5\u79fb\u52a8\u5149\u6807\u4f4d\u7f6e\uff0c\u5c06\u5149\u6807\u4f4d\u7f6e\u79fb\u52a8\u5230\u6307\u5b9a\u6570\u636e\u884c\uff0c\u901a\u8fc7 ResultSet \u7c7b\u5bf9\u5e94\u7684 get \u65b9\u6cd5\u83b7\u53d6\u884c\u6570\u636e\u3002 \u5982\u4f7f\u7528\u7ed3\u679c\u96c6\u66f4\u65b0\u6570\u636e\u5e93\u6570\u636e\uff0c\u9700\u5728\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65f6\uff0c\u8bbe\u7f6e\u8fde\u63a5\u5c5e\u6027 return_rowid \u4e3aTRUE\uff0c\u4e14\u5728\u751f\u6210\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61\u65f6\uff0c\u5e76\u53d1\u5c5e\u6027\u6307\u5b9a\u4e3a ResultSet.CONCUR_UPDATABLE\u3002 {.is-info}","title":"6.6.1 \u66f4\u65b0ResultSet\u7ed3\u679c\u96c6"},{"location":"JDBC8/#662","text":"\u793a\u4f8b 1\uff1a \u7edf\u8ba1\u7ed3\u679c\u96c6\u603b\u6761\u6570 //\u521b\u5efaStatement\u5bf9\u8c61 Statement stm= conn.createStatement(); stm.execute(\"create table test(id int identity(1,1));insert into test values(default)\"); //\u6267\u884c\u7ed3\u679c\u96c6\u67e5\u8be2 ResultSet rs = stm.executeQuery(\"select * from test\") //\u79fb\u52a8\u5149\u6807\u81f3\u7ed3\u679c\u96c6\u672b\u5c3e rs.last(); //\u83b7\u53d6\u7ed3\u679c\u96c6\u884c\u6570 int rsCounts = rs.getRow();","title":"6.6.2 \u901a\u8fc7\u79fb\u52a8\u5149\u6807\u83b7\u53d6\u7ed3\u679c\u96c6\u6761\u6570"},{"location":"JDBC8/#663","text":"\u865a\u8c37 JDBC \u652f\u6301\u591a\u7ed3\u679c\u96c6\u5904\u7406\uff0c\u5141\u8bb8 Statement \u63a5\u53e3\u652f\u6301\u591a\u91cd\u6253\u5f00\u7684 ResultSet \u5bf9\u8c61\u3002\u6267\u884c\u8bed\u53e5\u53ef\u4ee5\u662f\u591a\u6761 SQL \u8bed\u53e5\u7684\u96c6\u5408\uff0c\u5373\u4e00\u6b21\u6027\u5411\u865a\u8c37\u670d\u52a1\u5668\u53d1\u9001\u591a\u6761 SQL \u8bed\u53e5\uff0c\u865a\u8c37\u670d\u52a1\u5668\u6267\u884c\u5b8c SQL \u8bed\u53e5\u540e\u8fd4\u56de\u591a\u4e2a\u6267\u884c\u7ed3\u679c\uff1b\u4ea6\u6216\u5b58\u50a8\u8fc7\u7a0b\u5b9a\u4e49\u6709\u591a\u4e2a\u8fd4\u56de\u7ed3\u679c\u96c6\u3002\u865a\u8c37 JDBC \u7684 Statement \u91cd\u8f7d\u4e86 Statement \u63a5\u53e3\u4e2d\u7684 getMoreResults() \u65b9\u6cd5\u3002 \u793a\u4f8b\uff1a\u591a\u7ed3\u679c\u96c6\u5904\u7406 //SQL\u8bed\u53e5\u5305\u542b\u591a\u6761\u67e5\u8be2\u547d\u4ee4 String sql=\" SELECT * FROM A1 WHERE D2=(SELECT AVG(D2) FROM A1 GROUP BY D1);SELECT * FROM A1 WHERE D2>(SELECT MIN(D2) FROM A1 GROUP BY D1)\"; //\u521b\u5efaStatement\u5bf9\u8c61 Statement stm = conn.createStatement(); //\u6267\u884cSQL\u8bed\u53e5 boolean f = stm.execute(sql); //\u5224\u65ad\u662f\u5426\u6709ResultSet\u5bf9\u8c61\u4ea7\u751f if(f == true){ //\u83b7\u53d6\u7ed3\u679c\u96c6\u5bf9\u8c61 ResultSet rs1 = stm.getResultSet(); ... ... ... ... } while(true) { //\u5224\u65adStatement\u662f\u5426\u8fd4\u56de\u4e86\u591a\u4e2aResultSet\u5bf9\u8c61 if(!stm.getMoreResults(Statement.CLOSE_CURRENT_RESULT)){ break; } else if((rs2 = cstm.getResultSet())!=null) { ... ... ... ...//\u6570\u636e\u5904\u7406\u90e8\u5206\u7701\u7565 } }","title":"6.6.3 \u591a\u7ed3\u679c\u96c6\u5904\u7406"},{"location":"JDBC8/#664","text":"\u865a\u8c37JDBC\u4e2d\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u751f\u6210\u9700\u6ee1\u8db3\u4e24\u4e2a\u6761\u4ef6\uff1aURL\u8fde\u63a5\u4e32\u5c5e\u6027recv_mode\u503c\u4e3a2\uff0cStatement\u5bf9\u8c61\u6267\u884cSQL\u8bed\u53e5\u4e3a\u5355\u6761SELECT\u8bed\u53e5\u3002 \u5e94\u7528\u7a0b\u5e8f\u7aef\u901a\u8fc7Statement\u7c7b\u7684setFetchSize(int)\u65b9\u6cd5\u6216ResultSet\u7c7b\u7684setFetchSize(int)\u65b9\u6cd5\u8bbe\u7f6e\u6bcf\u6b21\u4ece\u670d\u52a1\u5668\u7aef\u83b7\u53d6\u591a\u5c11\u6761\u6570\u636e\u3002 \u4f7f\u7528\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7684 ResultSet \u5bf9\u8c61\uff0c\u5149\u6807\u53ea\u80fd\u5355\u5411\u5411\u524d\u6b63\u5411\u79fb\u52a8\uff0c\u4e0d\u80fd\u5411\u540e\u79fb\u52a8\u6216\u6765\u56de\u6eda\u52a8\u3002 {.is-info} \u793a\u4f8b\uff1a\u865a\u8c37\u6570\u636e\u5e93\u670d\u52a1\u5668\u7aef\u6e38\u6807\u4f7f\u7528 //\u521b\u5efa\u865a\u8c37JDBC\u7279\u6709Statement\u5bf9\u8c61 Statement stm = (com.xugu.cloudjdbc.Statement)conn.createStatement(); //\u5f00\u542f\u670d\u52a1\u5668\u7aef\u6e38\u6807 stm.setServerCursor(true); //\u8bbe\u7f6e\u670d\u52a1\u5668\u7aef\u6e38\u6807\u5355\u6b21\u8fd4\u56de\u6570\u636e\u6761\u6570 stm.setFetchSize(1000); //\u6267\u884cSQL\u8bed\u53e5 ResultSet rs = stm.executeQuery(\"select * from t1\"); //\u904d\u5386\u6570\u636e while\uff08rs.next()\uff09 { ... ... ... ... } //\u5173\u95ed\u670d\u52a1\u5668\u7aef\u6e38\u6807 stm.setServerCursor(false);","title":"6.6.4 \u670d\u52a1\u5668\u7aef\u6e38\u6807\u4f7f\u7528"},{"location":"JDBC8/#665-generatedkeys","text":"JDBC 3.0 \u89c4\u8303\u4e2d\u5bf9\u4e8e\u81ea\u52a8\u4ea7\u751f\u7684\u5173\u952e\u5b57\u6570\u503c\uff0c\u5b9a\u4e49\u4e86\u63a5\u53e3\u89c4\u8303\uff0c\u5373\uff1agetGeneratedKeys() \u65b9\u6cd5\u3002 \u4e3a\u4e86\u89e3\u51b3\u5bf9\u83b7\u53d6\u81ea\u52a8\u4ea7\u751f\u7684\u6216\u81ea\u52a8\u589e\u52a0\u7684\u5173\u952e\u5b57\u7684\u503c\u7684\u9700\u6c42\uff0c\u865a\u8c37 JDBC \u6839\u636e JDBC3.0 \u89c4\u8303\u63d0\u4f9b\u4e86\u83b7\u5f97\u5173\u952e\u5b57\u503c\u7684\u65b9\u6cd5\u3002\u83b7\u53d6\u5173\u952e\u5b57\u7684\u503c\uff0c\u9700\u8981\u5728\u6267\u884c\u65b9\u6cd5\u4e2d\u6307\u5b9a\u81ea\u589e\u5173\u952e\u5b57\u6807\u8bb0\u3002SQL \u8bed\u53e5\u6267\u884c\u5b8c\u540e\uff0c\u8c03\u7528 Statement \u5bf9\u8c61\u7684 getGeneratedKeys() \u65b9\u6cd5\uff0c\u83b7\u5f97\u5305\u542b\u81ea\u589e\u957f\u503c\u7684 ResultSet \u5bf9\u8c61\u3002 \u793a\u4f8b\uff1a\u83b7\u53d6\u6570\u636e\u5e93\u81ea\u589e\u957f\u5173\u952e\u5b57\u7684\u503c //\u521b\u5efaStatement\u5bf9\u8c61 Statement stmt = conn.createStatement(); //\u6307\u5b9a\u81ea\u589e\u957f\u5173\u952e\u5b57\u7684\u6807\u8bc6 String[] colN = {\"id\"}; //\u5728\u6267\u884c\u65b9\u6cd5\u4e2d\u5f15\u5165\u81ea\u589e\u957f\u5173\u952e\u5b57\u6807\u8bc6 stmt.executeUpdate(\"INSERT INTO authors(first_name, last_name) VALUES (\u2018Ghq\u2019, \u2018Wxl\u2019)\",colN); //\u83b7\u53d6\u7ed3\u679c\u96c6 ResultSet rs = stmt.getGeneratedKeys(); if ( rs.next() ) { //\u83b7\u53d6\u7ed3\u679c\u96c6\u4e2d\u7684\u81ea\u589e\u957f\u503c \u3000\u3000 int key = rs.getInt(); }","title":"6.6.5 \u68c0\u7d22\u81ea\u52a8\u4ea7\u751f\u7684\u5173\u952e\u5b57GeneratedKeys"},{"location":"JDBC8/#67","text":"\u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u56e0\u5904\u7406\u9700\u8981\u6240\u5efa\u7acb\u7684 ResultSet\u3001Statement\u3001PreparedStatement \u7b49\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61\uff0c\u5728\u4f7f\u7528\u5b8c\u540e\u5fc5\u987b\u5173\u95ed\u3002\u5173\u95ed\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61\uff0c\u76f4\u63a5\u8c03\u7528\u5bf9\u5e94\u7684\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61 close() \u65b9\u6cd5\u5373\u53ef\u3002 \u5f53\u4e0d\u518d\u9700\u8981\u548c\u865a\u8c37\u6570\u636e\u5e93\u8fdb\u884c\u4ea4\u4e92\u65f6\uff0c\u9700\u65ad\u5f00\u6570\u636e\u5e93\u8fde\u63a5\u3002\u8c03\u7528 Connection \u7c7b\u7684 close() \u65b9\u6cd5\u5373\u4f1a\u5173\u95ed\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u540c\u65f6\u91ca\u653e\u8fde\u63a5\u4e0a\u6240\u6301\u6709\u7684\u6240\u6709\u6570\u636e\u5e93\u8d44\u6e90\u3002 \u6570\u636e\u5e93\u8fde\u63a5\u4e3a\u975e\u81ea\u52a8\u63d0\u4ea4\u65f6\uff0c\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61\u5728\u4f7f\u7528\u5b8c\u540e\uff0c\u82e5\u672a\u53ca\u65f6\u5173\u95ed\uff0c\u6b64\u65f6\u8fdb\u884c DDL \u64cd\u4f5c\u5c06\u4f1a\u5bfc\u81f4\u865a\u8c37\u6570\u636e\u5e93\u52a0\u9501\u8d85\u65f6\u6216\u5931\u8d25\u3002 {.is-info}","title":"6.7 \u91ca\u653e\u8d44\u6e90"},{"location":"JDBC8/#_4","text":"JDBC 3.0 \u89c4\u8303\u5b9a\u4e49\u6709 java.sql.Blob \u4e0e java.sql.Clob \u63a5\u53e3\uff0c\u6b64\u4e24\u7c7b\u63a5\u53e3\u4e3a\u6570\u636e\u5e93\u5927\u5bf9\u8c61\u6570\u636e\u5904\u7406\u63a5\u53e3\u3002\u865a\u8c37\u6570\u636e\u5e93\u5927\u5bf9\u8c61\u5b57\u6bb5\u7c7b\u578b\u5305\u542b\uff1ablob\u3001clob\u3001binary\u3002 \u5728\u865a\u8c37 JDBC \u4e2d\uff0c\u83b7\u53d6\u5927\u5bf9\u8c61\u6570\u636e\u6709\u4e24\u79cd\u8fd4\u56de\u65b9\u5f0f\uff1a\u4e00\u79cd\u662f\u6570\u636e\u76f4\u63a5\u8fd4\u56de\uff1b\u53e6\u4e00\u79cd\u662f\u8fd4\u56de\u63cf\u8ff0\u7b26\u65b9\u5f0f\u3002\u5f53\u8fd4\u56de\u6570\u636e\u4e2d\u5927\u5bf9\u8c61\u6570\u636e\u8f83\u591a\u65f6\uff0c\u5efa\u8bae\u4f7f\u7528\u8fd4\u56de\u63cf\u8ff0\u7b26\u65b9\u5f0f\uff0c\u4ece\u800c\u907f\u514d\u56e0\u6570\u636e\u8fc7\u591a\u8fc7\u5927\u9020\u6210\u7684 JVM \u5185\u5b58\u6ea2\u51fa\u3002\u865a\u8c37 JDBC \u9a71\u52a8\u542f\u7528\u5927\u5bf9\u8c61\u8fd4\u56de\u63cf\u8ff0\u7b26\u65b9\u5f0f\uff0c\u9700\u5728\u8fde\u63a5 URL \u4e32\u4e0a\u914d\u7f6e\u5c5e\u6027 lob_ret \u4e3a descriptor \u3002","title":"\u4e03. \u5927\u5bf9\u8c61\u7c7b\u578b\u5904\u7406"},{"location":"JDBC8/#71","text":"LOB \u5bf9\u8c61\u7684\u63d2\u5165\u5fc5\u987b\u901a\u8fc7 PreparedStatement\u3001CallableStatement \u7c7b\u7684 setXXX() \u65b9\u6cd5\u65b9\u5f0f\u5b9e\u73b0\u3002\u865a\u8c37 JDBC \u4e2d PreparedStatement \u63d0\u4f9b\u591a\u79cd\u65b9\u6cd5\u8bbe\u7f6e\u5927\u5bf9\u8c61\u53c2\u6570\u503c\uff0c\u5982\u4e0b\u5217\u65b9\u6cd5\uff1a setBinaryStream(int parameterIndex,InputStream x) setBlob(int parameterIndex, Blob x) setBlob(int parameterIndex, InputStream x) setBytes(int parameterIndex,byte[] x) setCharacterStream(int parameterIndex, Reader reader) setClob(int parameterIndex, Clob x) setClob(int parameterIndex, Reader reader) setString(int parameterIndex, String x) \u793a\u4f8b\uff1a\u5e94\u7528\u7a0b\u5e8f\u63d2\u5165\u5927\u5bf9\u8c61\u6570\u636e\uff0c\u5176\u4e2d\u8868 b1 \u5b57\u6bb5 photo \u4e3a blob \u7c7b\u578b\uff0c\u5b57\u6bb5 text \u4e3a clob \u7c7b\u578b PreparedStatement ps = conn.prepareStatement(\"INSERT INTO b1 VALUES (?, ?)\")\u037e // blobBytes is a byte[] type ps.setBlob(1, new com.xugu.cloudjdbc.Blob(blobBytes))\u037e // clobString is a String type ps.setClob(2, new com.xugu.cloudjdbc.Clob(clobString))\u037e ps.execute()\uff1b","title":"7.1 \u5411\u8868\u4e2d\u63d2\u5165\u5927\u5bf9\u8c61"},{"location":"JDBC8/#72","text":"\u901a\u8fc7\u865a\u8c37 JDBC \u83b7\u53d6\u5927\u5bf9\u8c61\u503c\uff0c\u6570\u636e\u5e93 CLOB \u5bf9\u8c61\u53ef\u901a\u8fc7\u5b57\u7b26\u4e32\u5f62\u5f0f\u6216\u6d41\u5f0f\u6570\u636e\u5f62\u5f0f\u83b7\u53d6\uff0c\u6570\u636e\u5e93 BLOB \u5bf9\u8c61\u53ea\u901a\u8fc7\u6d41\u5f0f\u6570\u636e\u5f62\u5f0f\u83b7\u53d6\u3002 \u793a\u4f8b 1\uff1a\u6d41\u5f0f\u83b7\u53d6 CLOB \u5bf9\u8c61 Statement stm = xgConn.createStatement(); String sql=\u201dselect remark from t_clob where id=101\u201d; ResultSet rs = stm.executeQuery(sql); while(rs.next) { Clob data = rs.getClob(\"remark \"); //\u4ee5\u5b57\u7b26\u6d41\u65b9\u5f0f\u83b7\u53d6\u6570\u636e Reader rd = data.getCharacterStream(); char[] sc = new char[1000]; StringBuffer sb = new StringBuffer(); int len = 0; while((len=rd.read(sc)) !=-1) { sb.append(new String(sc,0,len)); } System.out.println(sb.toString()); } \u793a\u4f8b 2\uff1a\u865a\u8c37 JDBC \u5141\u8bb8\u4ee5\u5b57\u7b26\u4e32\u7684\u5f62\u5f0f\u8bfb\u53d6 CLOB \u5bf9\u8c61 String sql=\"select text from t_clob\"\u037e Statement stm=conn.createStatement()\u037e ResultSet rs=stm.executeQuery(sql)\u037e while(rs.next()) { String clobStr =rs.getString(\"text\")\u037e }","title":"7.2 \u67e5\u8be2\u5927\u5bf9\u8c61\u6570\u636e"},{"location":"JDBC8/#_5","text":"\u865a\u8c37\u6570\u636e\u5e93\u662f\u4e00\u6b3e\u5177\u5907\u9ad8\u5b89\u5168\u3001\u9ad8\u6027\u80fd\u3001\u9ad8\u6269\u5c55\u7b49\u7279\u6027\u7684\u3001\u57fa\u4e8e\u5206\u5e03\u5f0f\u67b6\u6784\u7684\u5206\u5e03\u5f0f\u4e8b\u52a1\u578b\u6570\u636e\u5e93\u3002\u90e8\u7f72\u6570\u636e\u5e93\u96c6\u7fa4\u65f6\uff0c\u591a\u53f0\u670d\u52a1\u5668\u4f5c\u4e3a\u4e00\u4e2a\u6574\u4f53\u5bf9\u5916\u63d0\u4f9b\u6570\u636e\u670d\u52a1\u3002\u5728\u591a\u673a\u73af\u5883\u4e0b\uff0c\u4e3a\u4f7f\u6570\u636e\u5e93\u8fde\u63a5\u5747\u5300\u5206\u5e03\u4e8e\u5404\u53f0\u670d\u52a1\uff0c\u865a\u8c37 JDBC \u5728\u63a5\u53e3\u5c42\u5b9e\u73b0\u4e86\u57fa\u4e8e\u8f6f\u8d1f\u8f7d\u5747\u8861\u6280\u672f\u7684\u6570\u636e\u5e93\u8fde\u63a5\u5efa\u7acb\u65b9\u5f0f\u3002 \u865a\u8c37\u6570\u636e\u5e93\u8d1f\u8f7d\u5747\u8861\u5206\u914d\u6570\u636e\u5e93\u8fde\u63a5\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a\u987a\u5e8f\u5206\u914d\u3001\u968f\u673a\u5206\u914d\u3002\u901a\u8fc7\u5728\u6570\u636e\u5e93 URL \u8fde\u63a5\u4e32\u4e0a\u8bbe\u7f6e\u53c2\u6570 conn_type(conn_type:1, \u968f\u673a\u5206\u914d\uff1b2, \u987a\u5e8f\u5206\u914d) \u7c7b\u578b\uff0c\u5b9e\u73b0\u6570\u636e\u5e93\u8fde\u63a5\u5728\u591a\u96c6\u7fa4\u73af\u5883\u4e0b\u7684\u8d1f\u8f7d\u5747\u8861\u3002\u9ed8\u8ba4\u8d1f\u8f7d\u5747\u8861\u5206\u914d\u65b9\u5f0f\uff1a\u987a\u5e8f\u5206\u914d\u3002 \u865a\u8c37 JDBC \u63d0\u4f9b\u4e09\u79cd\u914d\u7f6e\u8d1f\u8f7d\u5747\u8861\u7684\u65b9\u5f0f\uff1a\u6570\u636e\u5e93 URL \u8fde\u63a5\u4e32\u914d\u7f6e\u3001\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u6027\u6587\u4ef6 Properties \u914d\u7f6e\u3001\u6570\u636e\u5e93\u8fde\u63a5 XML \u6587\u4ef6\u914d\u7f6e\u3002 1. URL \u8fde\u63a5\u4e32\u914d\u7f6e Class.forName(\"com.xugu.cloudjdbc.Driver\"); //URL\u8fde\u63a5\u4e32\u4e2d\u4f7f\u7528ips\u5c5e\u6027\u914d\u7f6e\u591aIP\u8d1f\u8f7d\u5747\u8861 Connection conn = DriverManager.getConnection(\"jdbc:xugu://192.168.0.201:5138/SYSTEM?user=SYSDBA&password=SYSDBA&conn_type=1&ips=192.168.0.205,192.168.0.204,192.168.1.206\") \u8fde\u63a5\u5c5e\u6027\u6587\u4ef6 Properties \u914d\u7f6e (Vector \u6216\u5b57\u7b26\u4e32\u6570\u7ec4) Properties info=new Properties(); Class.forName(\"com.xugu.cloudjdbc.Driver\"); //Vector\u7ed3\u6784\u5b58\u653e\u8d1f\u8f7d\u5747\u8861\u591aIP\u5730\u5740\u65b9\u5f0f Vector<String> ipsVector=new Vector<String>(); ipsVector.add(\"192.168.1.201\"); ipsVector.add(\"192.168.1.204\"); ipsVector.add(\"192.168.1.205\"); ipsVector.add(\"192.168.1.206\"); info.put(\"ips\", ipsVector); //\u6570\u7ec4\u5b58\u653e\u8d1f\u8f7d\u5747\u8861\u591aIP\u5730\u5740\u65b9\u5f0f String[] ips={\"192.168.1.205\",\"192.168.1.204\",\"192.168.1.206\"}; info.put(\"ips\", ips); Connection conn = DriverManager.getConnection(\"jdbc:xugu://192.168.1.201:5138/SYSTEM?user=SYSDBA&password=SYSDBA&conn_type=2\",info); \u8fde\u63a5\u5c5e\u6027 XML \u6587\u4ef6\u914d\u7f6e <?xml version=\"1.0\" encoding=\"utf-8\"?> <listeners> <listener> <ip>192.168.1.206</ip> </listener> <listener> <ip>192.168.1.204</ip> </listener> <listener> <ip>192.168.1.205</ip> </listener> </listeners> Class.forName(\"com.xugu.cloudjdbc.Driver\"); Connection conn = DriverManager.getConnection(\"jdbc:xugu:file://xuguClouldListener.xml:5138/SYSTEM?user=SYSDBA&password=SYSDBA&conn_type=1\");","title":"\u516b. \u865a\u8c37\u6570\u636e\u5e93\u8d1f\u8f7d\u5747\u8861"},{"location":"JDBC9/","text":"\u6587\u6863\u5bc6\u7ea7\uff1a\u3010 - \u3011 \u8bf4\u660e\uff1a\u516c\u5f00 \u6587\u6863\u4fee\u8ba2\u5386\u53f2 \u5e8f\u53f7 \u6587\u6863\u7248\u672c \u7a0b\u5e8f\u7248\u672c \u7f16\u64b0\u4eba A-\u589e\u52a0 M-\u66f4\u65b0 D-\u5220\u51cf \u53d8\u66f4\u8bf4\u660e \u5b8c\u6210\u65e5\u671f \u8bc4\u5ba1\u4eba \u8bc4\u5ba1\u65e5\u671f \u8bc4\u5ba1\u7ed3\u679c [\u901a\u8fc7/\u62d2\u7edd] 1 1.0 11.0 \u5468\u5f66\u5f64 A \u6574\u7248\u7f16\u5199 2021-7-12 \u5434\u751f\u52c7 2021-7-12 \u901a\u8fc7 2 2.0 12.0 \u66f9\u831c M \u4fee\u6539\u7b2c\u4e8c\u7ae0\u7c7b\u6269\u5c55\u30014.3\u8fde\u63a5\u53c2\u6570 2022-5-14 \u5468\u5f66\u5f64 2022-5-14 \u901a\u8fc7 3 2.1 12.0 \u66f9\u831c M \u4fee\u6539\u7b2c3.1\u57fa\u672c\u6570\u636e\u7c7b\u578b 2022-6-20 \u5468\u5f66\u5f64 2022-6-20 \u901a\u8fc7 \u4e00. \u865a\u8c37\u6570\u636e\u5e93\u7684JDBC\u9a71\u52a8\u7a0b\u5e8f\u6982\u8ff0 Java \u6570\u636e\u5e93\u8fde\u63a5\uff08Java Database Connectivity\uff0c\u7b80\u79f0 JDBC\uff09\u662f Java \u8bed\u8a00\u4e2d\u7528\u6765\u89c4\u8303\u5ba2\u6237\u7aef\u7a0b\u5e8f\u5982\u4f55\u8bbf\u95ee\u6570\u636e\u5e93\u7684\u5e94\u7528\u7a0b\u5e8f\u63a5\u53e3\uff0c\u63d0\u4f9b\u4e86\u8bf8\u5982\u67e5\u8be2\u548c\u66f4\u65b0\u6570\u636e\u5e93\u4e2d\u6570\u636e\u7684\u65b9\u6cd5\uff0c\u53ef\u4ee5\u4e3a\u591a\u79cd\u5173\u7cfb\u6570\u636e\u5e93\u63d0\u4f9b\u7edf\u4e00\u8bbf\u95ee\u3002JDBC \u63d0\u4f9b\u4e86\u4e00\u79cd\u57fa\u51c6\uff0c\u901a\u8fc7\u6b64\u57fa\u51c6\u6570\u636e\u5e93\u5f00\u53d1\u4eba\u5458\u53ef\u6784\u5efa\u66f4\u9ad8\u7ea7\u7684\u5de5\u5177\u548c\u63a5\u53e3\uff0c\u4e5f\u53ef\u901a\u8fc7\u6b64\u57fa\u51c6\u7f16\u5199\u6570\u636e\u5e93\u5e94\u7528\u7a0b\u5e8f\u3002 \u865a\u8c37\u6570\u636e\u5e93\u7684 JDBC \u9a71\u52a8\u7a0b\u5e8f\uff08\u4ee5\u4e0b\u7b80\u79f0\uff1a\u865a\u8c37 JDBC\uff09\u5b9e\u73b0\u4e86 Java \u7a0b\u5e8f\u548c\u865a\u8c37\u6570\u636e\u5e93\u901a\u4fe1\uff0c\u652f\u6301 SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u7684\u8bbf\u95ee\uff0c\u540c\u65f6\u4e5f\u662f\u6784\u9020\u9ad8\u7ea7 API \u548c\u6570\u636e\u5e93\u5f00\u53d1\u5de5\u5177\u7684\u57fa\u7840\u3002 \u7528\u6237\u60f3\u8981\u5b9e\u73b0\u5bf9\u6570\u636e\u5e93\u7684\u8bbf\u95ee\uff0c\u4e00\u822c\u8981\u7ecf\u8fc7\u5982\u4e0b\u7684\u6b65\u9aa4\uff1a 1. \u901a\u8fc7\u9a71\u52a8\u5668\u7ba1\u7406\u5668\u83b7\u53d6\u8fde\u63a5\u63a5\u53e3\uff1b 2. \u83b7\u5f97 Statement \u6216 Statement \u5b50\u7c7b\uff1b 3. \u901a\u8fc7 Statement \u6267\u884c SQL \u547d\u4ee4\uff1b 4. \u5904\u7406\u6267\u884c\u7ed3\u679c\uff1b 5. \u5173\u95ed Statement\uff1b 6. \u5173\u95ed\u8fde\u63a5\u3002 JDBC \u7ed3\u6784\u56fe, \u5982\u56fe1.1\u6240\u793a\u3002 \u56fe1.1 JDBC\u7ed3\u6784\u56fe \u4f7f\u7528\u865a\u8c37 JDBC \u5b9e\u73b0\u5e94\u7528\u7a0b\u5e8f\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u4e4b\u95f4\u7684\u8fde\u63a5\u670d\u52a1\uff0c\u5e94\u7528\u7a0b\u5e8f\u6240\u5728\u8ba1\u7b97\u673a\u9700\u5df2\u5b89\u88c5 Java \u8fd0\u884c\u73af\u5883\uff08Java Runtime Environment, \u7b80\u79f0 JRE\uff09\u3002\u865a\u8c37 JDBC \u53c2\u7167 JDBC API \u5b9e\u73b0\uff0c\u652f\u6301 JDBC 3.0 \u529f\u80fd\uff0cJava \u5e94\u7528\u7a0b\u5e8f\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u4e4b\u95f4\u7684\u6240\u6709\u64cd\u4f5c\u5747\u9700\u901a\u8fc7\u865a\u8c37 JDBC \u6765\u5b8c\u6210\u3002 \u4f7f\u7528\u865a\u8c37 JDBC \u9700\u8981 JRE 1.6 \u7248\u6216\u66f4\u9ad8\u7248\u672c\u7684 Java \u8fd0\u884c\u65f6\u73af\u5883 (JRE)\u3002 {.is-info} \u4e8c. \u865a\u8c37\u6570\u636e\u5e93\u7684JDBC\u63a5\u53e3\u548c\u5bf9\u8c61\u7c7b JDBC 3.0 \u89c4\u8303\u7531 JDBC 1.0\u3001JDBC 2.0 \u884d\u751f\u800c\u6765\uff0c\u4e3b\u8981\u5305\u542b java.sql \u5305\u4ee5\u53ca javax.sql \u5305\uff0c\u6570\u636e\u5e93 JDBC \u9a71\u52a8\u5b9e\u73b0 JDBC 3.0 \u89c4\u8303\u6240\u5b9a\u4e49\u7684\u7279\u6027\u63a5\u53e3\uff0c\u5373\u53ef\u8fbe\u5230\u5bf9\u6807\u51c6 JDBC 3.0 \u89c4\u8303\u7684\u652f\u6301\u3002 \u865a\u8c37 JDBC \u57fa\u4e8e JDBC 3.0 \u89c4\u8303\u5b9e\u73b0\uff0c\u5b9e\u73b0\u63a5\u53e3\u7c7b\u6620\u5c04\uff0c\u5982\u88682.1\u6240\u793a\u3002 \u88682.1 \u865a\u8c37JDBC\u5b9e\u73b0\u63a5\u53e3\u7c7b | \u63a5\u53e3 | \u865a\u8c37JDBC\u5b9e\u73b0\u7c7b | | ---------------------------------- | ---------------------------------------- | | java.sql.Driver | com.xugu.cloudjdbc.Driver | | java.sql.Connection | com.xugu.cloudjdbc.Connection | | java.sql.Statement | com.xugu.cloudjdbc.Statement | | java.sql.PreparedStatement | com.xugu.cloudjdbc.PreparedStatement | | java.sql.CallableStatement | com.xugu.cloudjdbc.CallableStatement | | java.sql.ResultSet | com.xugu.cloudjdbc.ResultSet | | java.sql.ResultSetMetaData | com.xugu.cloudjdbc.ResultSetMetaData | | java.sql.DatabaseMetaData | com.xugu.cloudjdbc.DatabaseMetaData | | java.sql.PrameterMetaData | com.xugu.cloudjdbc.PrameterMetaData | | java.sql.Types | com.xugu.cloudjdbc.Types | | java.sql.Blob | com.xugu.cloudjdbc.Blob | | java.sql.Clob | com.xugu.cloudjdbc.Clob | | java.sql.Savepoint | com.xugu.cloudjdbc.Savepoint | | javax.sql.DataSource | com.xugu.pool.XgDataSource | | javax.sql.ConnectionPoolDataSource | com.xugu.pool.XgConnectionPoolDataSource | | javx.sql.PooledConnection | com.xugu.pool.XgPooledConnection | \u9664\u4e86\u4ee5\u4e0a\u6807\u51c6\u7c7b\u63a5\u53e3\u5916\uff0c\u865a\u8c37 JDBC \u8fd8\u6269\u5c55\u5b9e\u73b0\u4e86\u4ee5\u4e0b\u7c7b\uff1a - com.xugu.cloudjdbc.ClientInfo - com.xugu.cloudjdbc.OutParameter - com.xugu.cloudjdbc.Rowid - com.xugu.cloudjdbc.SQLXml - com.xugu.cloudjdbc.SSL - com.xugu.pool.StatementWrapper - com.xugu.pool.PreparedStatementWrapper \u4e09. \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b 3.1 \u57fa\u672c\u6570\u636e\u7c7b\u578b \u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b\u3001\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u3001Java \u6570\u636e\u7c7b\u578b\u4e09\u8005\u6620\u5c04\u5173\u7cfb\uff0c\u5982\u88683.1\u6240\u793a\u3002 \u88683.1 \u6570\u636e\u7c7b\u578b\u6620\u5c04\u5173\u7cfb \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b \u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b Java \u6570\u636e\u7c7b\u578b BOOLEAN BOOLEAN boolean SMALLINT SMALLINT short TINYINT TINYINT byte INTEGER INTEGER int BIGINT BIGINT long FLOAT FLOAT float DOUBLE DOUBLE double NUMERIC NUMERIC BigDecimal DECIMAL BigDecimal CHAR CHAR String NCHAR NCHAR String VARCHAR VARCHAR String VARCHAR2 VARCHAR String NVARCHAR2 VARCHAR String BLOB BLOB Blob CLOB CLOB Clob NCLOB BINARY BINARY byte[] VARBINARY LONG VARBINARY DATE DATE Date TIME TIME Time TIMESTAMP TIMESTAMP Timestamp 3.2 \u6269\u5c55\u6570\u636e\u7c7b\u578b \u865a\u8c37 JDBC \u9664\u4e86\u5b9e\u73b0\u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b\uff0c\u8fd8\u6839\u636e\u865a\u8c37\u6570\u636e\u5e93\u81ea\u6709\u7c7b\u578b\u6269\u5c55\u4e86\u90e8\u5206\u6570\u636e\u7c7b\u578b\uff08\u88683.2\u6240\u793a\uff09\uff0c\u5305\u62ec\u4ee5\u4e0b\u6570\u636e\u7c7b\u578b\u3002 1. \u65f6\u95f4\u6570\u636e\u7c7b\u578b DATETIME\u2014\u2014\u2014 \u65e5\u671f\u65f6\u95f4\u7c7b\u578b DATETIME WITH TIME ZONE \u2014\u2014\u2014 \u5e26\u65f6\u533a\u7684\u65e5\u671f\u65f6\u95f4\u7c7b\u578b TIME WITH TIME ZONE \u2014\u2014\u2014 \u5e26\u65f6\u533a\u7684\u65f6\u95f4\u7c7b\u578b INTERVAL YEAR \u2014\u2014\u2014 \u5e74\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL MONTH \u2014\u2014\u2014 \u6708\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY\u2014\u2014\u2014 \u65e5\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL HOUR \u2014\u2014\u2014 \u5c0f\u65f6\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL MINUTE \u2014\u2014\u2014 \u5206\u949f\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL SECOND \u2014\u2014\u2014 \u79d2\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL YEAR TO MONTH \u2014\u2014\u2014 \u5e74\u5230\u6708\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY TO HOUR \u2014\u2014\u2014 \u65e5\u5230\u5c0f\u65f6\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY TO MINUTE \u2014\u2014\u2014 \u65e5\u5230\u5206\u949f\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY TO SECOND \u2014\u2014\u2014 \u65e5\u5230\u79d2\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL HOUR TO MINUTE \u2014\u2014\u2014 \u5c0f\u65f6\u5230\u5206\u949f\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL HOUR TO SECOND \u2014\u2014\u2014 \u5c0f\u65f6\u5230\u79d2\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL MINUTE TO SECOND \u2014\u2014\u2014 \u5206\u949f\u5230\u79d2\u7684\u65f6\u95f4\u95f4\u9694 2. \u6e38\u6807\u6570\u636e\u7c7b\u578b\uff08\u53ea\u5728\u5b58\u50a8\u8fc7\u7a0b\u3001\u51fd\u6570\u3001\u5305\u4e2d\u4f7f\u7528\uff09 CURSOR \u2014\u2014\u2014 \u6e38\u6807\u6570\u636e\u7c7b\u578b SYS_REFCURSOR \u2014\u2014\u2014 \u8fd4\u56de\u6e38\u6807\u6570\u636e\u7c7b\u578b 3. \u5176\u4ed6\u6570\u636e\u7c7b\u578b GUID \u2014\u2014\u2014 \u5168\u5c40\u552f\u4e00\u6807\u8bc6\u7b26 \u88683.2 \u6269\u5c55\u6570\u636e\u7c7b\u578b\u5bf9\u5e94\u8868 \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b \u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b Java \u6570\u636e\u7c7b\u578b DATETIME DATETIME Timestamp DATETIME WITH TIME ZONE DATETIME_TZ String TIME WITH TIME ZONE TIME_TZ String INTERVAL YEAR INTERVAL_Y String INTERVAL MONTH INTERVAL_M INTERVAL DAY INTERVAL_D INTERVAL HOUR INTERVAL_H INTERVAL MINUTE INTERVAL_MI INTERVAL SECOND INTERVAL_S String INTERVAL YEAR TO MONTH INTERVAL_Y2M INTERVAL DAY TO HOUR INTERVAL_D2H INTERVAL DAY TO MINUTE INTERVAL_D2M INTERVAL DAY TO SECOND INTERVAL_D2S INTERVAL HOUR TO MINUTE INTERVAL_H2M INTERVAL HOUR TO SECOND INTERVAL_H2S INTERVAL MINUTE TO SECOND INTERVAL_M2S CURSOR CURSOR \u65e0\u5bf9\u5e94\u7c7b\u578b SYS_REFCURSOR REFCUR GUID GUID String \u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528 ResultSet \u5bf9\u8c61\u6765\u5bf9\u5e94\u83b7\u53d6\u6e38\u6807\u6240\u8fd4\u56de\u6570\u636e\u3002 {.is-info} 3.3 \u6570\u636e\u7c7b\u578b\u8f6c\u6362 \u5728\u8c03\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u4e2d\u7684\u67d0\u4e9b\u65b9\u6cd5\u65f6\uff0c\u9700\u8fdb\u884c Java \u6570\u636e\u7c7b\u578b\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u7684\u8f6c\u6362\uff0c\u8fd9\u4e9b\u65b9\u6cd5\u5305\u62ec\uff1a - ResultSet \u7c7b get\\<Type> \u65b9\u6cd5\uff1b - ResultSet \u7c7b update\\<Type> \u65b9\u6cd5\uff1b - CallableStatement \u7c7b get\\<Type> \u65b9\u6cd5\uff1b - PreparedStatement \u7c7b set\\<Type> \u65b9\u6cd5\u3002 \u6570\u636e\u7c7b\u578b\u4e4b\u95f4\u7684\u8f6c\u6362\uff0c\u9700\u9075\u4ece Java \u6570\u636e\u7c7b\u578b\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u6620\u5c04\u5173\u7cfb\u89c4\u5219\uff0c\u5426\u5219\u53ef\u80fd\u8f6c\u6362\u5931\u8d25\u3002 1. com.xugu.cloudjdbc.ResultSet \u7c7b\u4e2d get\\<Type> \u65b9\u6cd5\u7684\u7c7b\u578b\u8f6c\u6362\uff0c\u5982\u88683.3\u6240\u793a\u3002 2. com.xugu.cloudjdbc.PreparedStatement \u7c7b\u4e2d set\\<Type> \u65b9\u6cd5\u7684\u7c7b\u578b\u8f6c\u6362\uff0c\u5982\u88683.4\u6240\u793a\u3002 X\uff08\u65e0\u4e22\u5931\u8f6c\u6362\uff09\uff1a\u6307\u4ee5\u957f\u7cbe\u5ea6\u7c7b\u578b\u7684 get\\<Type> \u65b9\u6cd5\u83b7\u53d6\u77ed\u7cbe\u5ea6\u6570\u636e\u7c7b\u578b\u5217\u503c\u65e0\u4e22\u5931\u3002 \u5982\uff1a\u4f7f\u7528 getInt() \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u4e3a smallint \u7684\u5217\u6570\u636e\uff0c\u83b7\u53d6\u6570\u636e\u5b8c\u6574\u3002 Z\uff08\u4f9d\u8d56\u8f6c\u6362\uff09\uff1a\u6307 get\\<Type> \u65b9\u6cd5\u4e2d\u7684 Type \u7c7b\u578b\u4e0e\u83b7\u53d6\u6570\u636e\u5e93\u4e2d\u5217\u7684\u6570\u636e\u7c7b\u578b\u4e0d\u4e00\u81f4\uff0c\u6b64\u65f6\u9700\u8981\u901a\u8fc7\u5176\u4ed6\u6570\u636e\u7c7b\u578b\u8f6c\u6362\u4e3a Type \u6570\u636e\u7c7b\u578b\uff0c\u6b64\u8f6c\u6362\u8fc7\u7a0b\u503c\u53ef\u80fd\u4e22\u5931\u90e8\u5206\u6570\u636e\u3002 \u5982\uff1a\u4f7f\u7528 getInt() \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u4e3a float \u7684\u5217\u6570\u636e\uff0c\u53ef\u83b7\u53d6 float \u5217\u6570\u636e\u7684\u6574\u6570\u503c\uff0c\u800c\u5c0f\u6570\u7cbe\u5ea6\u503c\u5c06\u4e22\u5931\u3002 Y\uff08\u76f4\u63a5\u8f6c\u6362\uff09\uff1a\u6307 get\\<Type> \u65b9\u6cd5\u4e2d\u7684 Type \u7c7b\u578b\u4e0e\u83b7\u53d6\u6570\u636e\u5e93\u4e2d\u5217\u7684\u6570\u636e\u7c7b\u578b\u4e00\u81f4\u3002 \u5982\uff1a\u4f7f\u7528 getInt() \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u4e3a integer \u7684\u5217\u6570\u636e\uff0c\u76f4\u63a5\u83b7\u53d6\u5b8c\u6574\u6570\u636e\u3002 {.is-info} P\uff08\u5141\u8bb8\u63d2\u5165\uff09\uff1a\u6307 set\\<Type> \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u5e93\u4e2d\u5217\u6570\u636e\u65f6\uff0c\u6570\u636e\u65e0\u635f\u5931\u5b58\u5165\u6570\u636e\u5e93\u4e2d\u3002 \u5982\uff1a\u4f7f\u7528 setInt() \u65b9\u6cd5\u8bbe\u7f6e\u5217\u6570\u636e\u7c7b\u578b\u4e3a bigint \u7684\u6570\u636e\u65f6\uff0c\u6570\u636e\u53ef\u6b63\u786e\u5b58\u5165\u3002 Z\uff08\u90e8\u5206\u63d2\u5165\uff09\uff1a\u6307 set\\<Type> \u65b9\u6cd5\u4e2d\u7684 Type \u7c7b\u578b\u548c\u6570\u636e\u5e93\u4e2d\u5217\u6570\u636e\u7c7b\u578b\u4e0d\u4e00\u81f4\uff0c\u6570\u636e\u4ec5\u80fd\u90e8\u5206\u6b63\u786e\u5b58\u5165\u3002 \u5982\uff1a\u4f7f\u7528 setInt() \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u5e93\u5217\u7c7b\u578b\u4e3a tinyint \u7684\u6570\u636e\uff0c\u56e0 tinyint \u8868\u793a\u8303\u56f4\u4e3a-128\uff5e127 \u7684\u6574\u6570\u503c\uff0c\u6545\u800c tinyint\u8868\u793a\u8303\u56f4\u5185\u6570\u636e\u53ef\u6b63\u786e\u5b58\u5165\uff0c\u8303\u56f4\u5916\u6570\u636e\u5c06\u63d2\u5165\u5931\u8d25\u3002 {.is-info} \u56db. \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5 4.1 \u90e8\u7f72JDBC\u9a71\u52a8\u7a0b\u5e8f \u901a\u8fc7\u865a\u8c37 JDBC \u9a71\u52a8\u8bbf\u95ee\u865a\u8c37\u6570\u636e\u5e93\uff0c\u9996\u5148\u5e94\u4fdd\u8bc1\u5e94\u7528\u7a0b\u5e8f\u6b63\u786e\u5f15\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u5305 (cloudjdbc-*.*.*.jar)\uff0c\u5373\u5c06\u9a71\u52a8\u5305\u62f7\u8d1d\u81f3\u5e94\u7528\u7a0b\u5e8f\u5e76\u6dfb\u52a0\u5f15\u7528\u3002 4.2 \u52a0\u8f7dJDBC\u9a71\u52a8\u7a0b\u5e8f \u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u8fdb\u884c\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u8c03\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u7a0b\u5e8f\uff0c\u9996\u5148\u8981\u5c06\u865a\u8c37 JDBC \u9a71\u52a8\u52a0\u8f7d\u5230\u7cfb\u7edf\u5185\u5b58\u4e2d\uff0c\u7136\u540e\u4f9b\u7cfb\u7edf\u4f7f\u7528\u3002\u865a\u8c37 JDBC \u7684\u9a71\u52a8\u5b9e\u73b0\u7c7b\u4e3acom.xugu.cloudjdbc.Driver\uff0c\u4ee5\u4e0b\u662f\u5c06\u865a\u8c37 JDBC \u9a71\u52a8\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\u7684\u4ee3\u7801\uff1a //\u663e\u793a\u6ce8\u518c DriverManager.registerDriver(new com.xugu.cloudjdbc.Driver())\u037e //\u9690\u5f0f\u6ce8\u518c Class.forName(\u201ccom.xugu.cloudjdbc.Driver\u201d)\u037e \u9690\u5f0f\u6ce8\u518c\u5373\u901a\u8fc7 Class.forName() \u5c06\u5bf9\u5e94\u7684\u9a71\u52a8\u7c7b\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\uff0c\u5c06\u6267\u884c\u5185\u5b58\u4e2d\u7684 static \u9759\u6001\u4ee3\u7801\u6bb5\uff0c\u6b64\u4ee3\u7801\u6bb5\u4f1a\u521b\u5efa\u4e00\u4e2a\u865a\u8c37 JDBC \u9a71\u52a8\u7684\u5b9e\u4f8b\uff0c\u5e76\u653e\u5165 DriverManager \u4e2d\uff0c\u4f9b DriverManager \u4f7f\u7528\u3002 {.is-info} 4.3 \u8fde\u63a5\u5b57\u4e32\u53ca\u53c2\u6570\u8bbe\u7f6e \u865a\u8c37 JDBC \u9a71\u52a8\u8fde\u63a5 URL \u4e32\u683c\u5f0f\uff1a jdbc:xugu://serverIP:portNumber/databaseName[?property=value[&property=value]] \u865a\u8c37 JDBC \u9a71\u52a8\u8fde\u63a5 URL \u4e32\u683c\u5f0f\uff1a 1). jdbc:xugu:// \uff1a\uff08\u5fc5\u9700\uff09\u865a\u8c37\u6570\u636e\u5e93\u7279\u5b9a\u534f\u8bae\u3002 2). serverIP \uff1a\uff08\u5fc5\u9700\uff09\u865a\u8c37\u6570\u636e\u5e93\u6240\u5728\u670d\u52a1\u5668\u7684 IP \u5730\u5740\u3002 3). portNumber\uff1a\uff08\u5fc5\u9700\uff09\u662f\u865a\u8c37\u6570\u636e\u5e93\u670d\u52a1 TCP \u8bbf\u95ee\u7aef\u53e3\uff0c\u9ed8\u8ba4 5138\u3002 4). databaseName\uff1a\uff08\u5fc5\u9700\uff09\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u5e93\u540d\u79f0\u3002 5). property\uff1a\uff08\u53ef\u9009\uff09\u865a\u8c37\u6570\u636e\u5e93\u7684 URL \u8fde\u63a5\u5c5e\u6027\u3002\u591a\u4e2a\u8fde\u63a5\u5c5e\u6027\u4e4b\u95f4\u4f7f\u7528\u201c&\u201d\u5206\u9694\uff0c\u4e0d\u53ef\u91cd\u590d\u3002 \u865a\u8c37 JDBC \u9a71\u52a8 URL \u4e32\u793a\u4f8b\u5982\u4e0b\uff1a String url = jdbc:xugu://localhost:5138/System?user=GUEST&password=GUEST\u037e property \u8bbe\u7f6e\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u6027\uff0c\u5e38\u7528\u8fde\u63a5\u5c5e\u6027\u89c1\u88684.1\u3002 \u88684.1 \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u6027 table th:first-of-type { width: 20%; } table th:nth-of-type(2) { width: 10%; } table th:nth-of-type(3) { width: 10%; } table th:nth-of-type(4) { width: 50%; } \u5c5e\u6027\u540d\u79f0 \u5fc5\u9009\u9879 \u53d6\u503c \u8bf4\u660e database \u221a \u5b57\u7b26\u4e32 \u6570\u636e\u5e93\u540d\u79f0 user \u221a \u5b57\u7b26\u4e32 \u7528\u6237\u540d\u79f0 password \u221a \u5b57\u7b26\u4e32 \u7528\u6237\u5bc6\u7801 encryptor \u00d7 \u5b57\u7b26\u4e32 \u7528\u4e8e\u542f\u52a8\u52a0\u5bc6\u6570\u636e\u5e93\uff0c\u82e5\u5e93\u672a\u52a0\u5bc6\uff0c\u5219\u53ef\u4e0d\u8981\uff0c\u4f46\u5e26\u4e0a\u6b64\u53c2\u6570\u4e0d\u4f1a\u5f71\u54cd\u8fde\u63a5 char_set \u00d7 \u5b57\u7b26\u4e32 \u8fde\u63a5\u5b57\u7b26\u96c6\u3002'GB2312'\u3001'GBK'\u3001'UTF8' \u7b49\uff0c\u9ed8\u8ba4\uff1aGBK time_zone \u00d7 \u5b57\u7b26\u4e32 \u5ba2\u6237\u7aef\u65f6\u533a\u3002\u9ed8\u8ba4\uff1a\u865a\u8c37\u6570\u636e\u5e93\u914d\u7f6e\u53c2\u6570 def_timezone \u6240\u8bbe\u7f6e\u65f6\u533a\uff08\u53ea\u5bf9\u7cfb\u7edf\u65f6\u95f4\u51fd\u6570\u751f\u6548\uff09 iso_level \u00d7 \u5b57\u7b26\u4e32 'READ COMMITED'\uff1a\u8bfb\u5df2\u63d0\u4ea4\uff1b 'REPEATIABLE READ'\uff1a\u53ef\u91cd\u590d\u8bfb\uff1b'SERIALIZABLE'\uff1a\u5e8f\u5217\u5316 lock_time \u00d7 \u6570\u503c \u5355\u4f4d\uff1a\u6beb\u79d2\uff0c\u9ed8\u8ba4\u503c\uff1a0\uff0c\u8868\u793a\u8fde\u63a5\u4e2d\u7684\u4e8b\u52a1\u9501\u5f81\u7528\u65f6\uff0c\u6700\u5927\u7b49\u5019\u65f6\u95f4\uff0c\u82e5\u5728\u8bbe\u7f6e\u65f6\u95f4\u5185\u52a0\u9501\u5931\u8d25\uff0c\u56de\u6eda\u4e8b\u52a1\u5e76\u62a5\u9519 lob_ret \u00d7 \u5b57\u7b26\u4e32 \u5927\u5bf9\u8c61\uff08Blob\u3001Clob\uff09\u6570\u636e\u8fd4\u56de\u65b9\u5f0f\u3002\u5c5e\u6027\u4e3a descriptor \u65f6\uff0c\u4ee5\u63cf\u8ff0\u7b26\u65b9\u5f0f\u8fd4\u56de\uff1b\u5176\u4ed6\u4ee5\u6570\u636e\u6d41\u65b9\u5f0f\u8fd4\u56de\u3002\u9ed8\u8ba4\uff1a\u4ee5\u6570\u636e\u6d41\u65b9\u5f0f\u8fd4\u56de return_rowid \u00d7 \u5e03\u5c14\u503c \u662f\u5426\u8fd4\u56de\u8bb0\u5f55 rowid \u503c\u3002\u5c5e\u6027\u4e3a TRUE \u65f6\uff0c\u8fd4\u56de rowid\uff1b\u5176\u4ed6\u8fd4\u56de FALSE\u3002\u9ed8\u8ba4\uff1aFALSE auto_commit \u00d7 on/off \u4e8b\u52a1\u662f\u5426\u81ea\u52a8\u63d0\u4ea4\u3002\u5c5e\u6027\u4e3a ON \u65f6\uff0c\u8fde\u63a5\u81ea\u52a8\u63d0\u4ea4\uff1b\u5c5e\u6027\u4e3a OFF\u65f6\uff0c\u8fde\u63a5\u975e\u81ea\u52a8\u63d0\u4ea4\u3002\u9ed8\u8ba4\uff1aON conn_type \u00d7 \u6570\u503c \u8d1f\u8f7d\u5747\u8861\u5206\u914d\u65b9\u5f0f\u3002\u5c5e\u6027\u4e3a 1 \u65f6\uff0c\u968f\u673a\u5206\u914d\uff1b\u5c5e\u6027\u4e3a 2 \u65f6\uff0c\u987a\u5e8f\u5206\u914d\u3002\u9ed8\u8ba4\uff1a2 ips \u00d7 \u5b57\u7b26\u4e32 \u8d1f\u8f7d\u5747\u8861\u8fde\u63a5 IP \u5730\u5740\uff0c\u591a\u4e2a IP \u5730\u5740\u4ee5\u9017\u53f7\u5206\u9694\uff08\u8be6\u7ec6\u89c1\u8d1f\u8f7d\u5747\u8861\uff09 CompatibleOracle \u00d7 \u5e03\u5c14\u503c \u517c\u5bb9 Oracle \u9009\u9879\u3002\u5c5e\u6027\u4e3a true\uff0c\u517c\u5bb9 Oracle\u037e \u5c5e\u6027\u4e3a FALSE\uff0c\u865a\u8c37 JDBC \u81ea\u6709\u5b9e\u73b0 recv_mode \u00d7 \u6570\u503c \u63a5\u6536\u6a21\u5f0f\u9009\u9879\u3002\u5c5e\u6027\u503c\u4e3a 0 \u65f6\uff0c\u672c\u5730\u5168\u63a5\u6536\u6a21\u5f0f\uff1b\u5c5e\u6027\u503c\u4e3a 1 \u65f6\uff0c\u7f51\u7edc\u63a5\u6536\u6a21\u5f0f\uff1b\u5c5e\u6027\u503c\u4e3a 2 \u65f6\uff0c\u670d\u52a1\u5668\u7aef\u6e38\u6807\u63a5\u6536\u6a21\u5f0f\u3002\u9ed8\u8ba4\uff1a0 emptyStringAsNull \u00d7 \u5e03\u5c14\u503c \u7a7a\u5b57\u4e32\u5904\u7406\u3002\u5c5e\u6027\u4e3a FALSE \u65f6\uff0c\u7a7a\u5b57\u7b26\u4e32\u8ba4\u5b9a\u4e3a NULL\uff1b\u5c5e\u6027\u4e3a TRUE \u65f6\uff0c\u7a7a\u5b57\u7b26\u4e32\u4fdd\u7559\u3002\u9ed8\u8ba4\uff1a\u7a7a\u5b57\u4e32\u4fdd\u7559 xgversion \u00d7 201/301 \u5ba2\u6237\u7aef\u534f\u8bae\u7248\u672c\uff0c\u865a\u8c37\u6570\u636e\u5e93V12\u7248\u672c\u5347\u7ea7\u652f\u6301301\u534f\u8bae\uff0c\u540c\u65f6\u517c\u5bb9201\u534f\u8bae SSL \u00d7 SSL \u8fde\u63a5\u52a0\u5bc6\u53c2\u6570\u3002\u5c5e\u6027\u503c\u3010SSL\uff1a\u542f\u7528SSL\u52a0\u5bc6\u4f20\u8f93\uff1bNSSL\uff1a\u7981\u7528SSL\u52a0\u5bc6\u4f20\u8f93\u3011 slowsqltime \u00d7 \u6570\u503c \u8bbe\u7f6e\u6162SQL\u6267\u884c\u65f6\u95f4\u3002SQL\u8bed\u53e5\u6267\u884c\u65f6\u95f4\u8d85\u8fc7\u8be5\u6570\u503c\uff0c\u65e5\u5fd7\u5219\u4f1a\u8f93\u51fa\u6267\u884cSQL batch_mode \u00d7 \u5e03\u5c14\u503c PreparedStatement\u662f\u5426\u4f7f\u7528\u6279\u91cf\u5904\u7406\u3002\u5c5e\u6027\u4e3a TRUE \u65f6\uff0cexecuteBatch\u91c7\u7528\u6279\u91cf\u6a21\u578b\uff1bFALSE\u5219\u91c7\u7528\u5355\u6761\u5904\u7406\u6a21\u578b\u3002\u9ed8\u8ba4\uff1aFALSE \u8fde\u63a5\u53c2\u6570\u4f7f\u7528SSL\u5c5e\u6027\u65f6\uff0c\u4f9d\u8d56\u7a0b\u5e8f\u5305\u4e2d\u63d0\u4f9b\u7684\u52a8\u6001\u94fe\u63a5\u5e93\uff0c\u4f7f\u7528\u524d\u9700\u5c06\u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u5230\u64cd\u4f5c\u7cfb\u7edf\u6307\u5b9a\u4f4d\u7f6e\u65b9\u53ef\u6b63\u5e38\u4f7f\u7528SSL\u52a0\u5bc6\u529f\u80fd\u3002 Windows 32\u4f4d\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u7528SSL\u5c5e\u6027\u524d\uff0c\u9700\u5c06\u7a0b\u5e8f\u5305 ssl/win32 \u4e0b xgssl.dll \u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u62f7\u8d1d\u5230\u7cfb\u7edf\u76ee\u5f55 C:/windows/system32 \u76ee\u5f55\u4f4d\u7f6e\u3002 Windows 64\u4f4d\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u7528SSL\u5c5e\u6027\u524d\uff0c\u9700\u5c06\u7a0b\u5e8f\u5305 ssl/win64 \u4e0b xgssl.dll \u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u62f7\u8d1d\u5230\u7cfb\u7edf\u76ee\u5f55 C:/windows/system32 \u76ee\u5f55\u4e0b\u3002 Linux X64\u4f4d\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u7528SSL\u5c5e\u6027\u524d\uff0c\u9700\u5c06\u7a0b\u5e8f\u5305 ssl/linux64 \u4e0b libxgssl.so \u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u62f7\u8d1d\u5230\u7cfb\u7edf\u76ee\u5f55 /usr/lib\u6216\u8005/usr/lib4 \u76ee\u5f55\u4e0b\u3002 \u865a\u8c37 JDBC \u8bbe\u7f6e\u8fde\u63a5\u5c5e\u6027\u793a\u4f8b\u5982\u4e0b (\u7248\u672c\u53f7\u3001\u5927\u5bf9\u8c61\u63cf\u8ff0\u7b26\u3001\u65f6\u533a\u3001\u5173\u95ed\u8fde\u63a5\u81ea\u52a8\u63d0\u4ea4)\uff1a String url=jdbc:xugu://localhost:5138/System?user=GUEST&password=GUEST&version=110&auto_commit=false&lob_ret=descriptor&time_zone=GMT-8:00\u037e 4.4 \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5 \u5728\u5e94\u7528\u7a0b\u5e8f\u5c06\u865a\u8c37 JDBC \u9a71\u52a8\u52a0\u8f7d\u5230\u7cfb\u7edf\u5185\u5b58\u4e2d\u540e\uff0c\u53ef\u901a\u8fc7 DriverManager \u7c7b\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u65b9\u6cd5\u5982\u4e0b\uff1a DriverManager.getConnection(String url)\u037e DriverManager.getConnection(String url,Properties)\u037e DriverManager.getConnection(String url,String user,String password)\u037e \u4e94. \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u6e90\u548c\u8fde\u63a5\u6c60 \u901a\u8fc7 DriverManager \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u4ee5\u5916\uff0c\u8fd8\u53ef\u4ee5\u4f7f\u7528\u6570\u636e\u6e90\u6216\u8fde\u63a5\u6c60\u65b9\u5f0f\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u3002\u901a\u8fc7\u6570\u636e\u6e90\u65b9\u5f0f\u6216\u8fde\u63a5\u6c60\u65b9\u5f0f\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u6709\u4ee5\u4e0b\u4f18\u70b9\uff1a - \u8d44\u6e90\u91cd\u7528 \u7531\u4e8e\u6570\u636e\u5e93\u8fde\u63a5\u5f97\u5230\u91cd\u7528\uff0c\u907f\u514d\u4e86\u9891\u7e41\u521b\u5efa\u3001\u91ca\u653e\u8fde\u63a5\u5f15\u8d77\u7684\u5927\u91cf\u6027\u80fd\u5f00\u9500\u3002\u5728\u51cf\u5c11\u7cfb\u7edf\u6d88\u8017\u7684\u57fa\u7840\u4e0a\uff0c\u53e6\u4e00\u65b9\u9762\u4e5f\u589e\u8fdb\u4e86\u7cfb\u7edf\u8fd0\u884c\u73af\u5883\u7684\u5e73\u7a33\u6027\uff08\u51cf\u5c11\u5185\u5b58\u788e\u7247\u4ee5\u53ca\u6570\u636e\u5e93\u4e34\u65f6\u8fdb\u7a0b/\u7ebf\u7a0b\u7684\u6570\u91cf\uff09\u3002 - \u66f4\u5feb\u7684\u7cfb\u7edf\u54cd\u5e94 \u6570\u636e\u5e93\u8fde\u63a5\u6c60\u5728\u521d\u59cb\u5316\u8fc7\u7a0b\u4e2d\uff0c\u5f80\u5f80\u5df2\u7ecf\u521b\u5efa\u4e86\u82e5\u5e72\u6570\u636e\u5e93\u8fde\u63a5\u7f6e\u4e8e\u6c60\u4e2d\u5907\u7528\u3002\u6b64\u65f6\u8fde\u63a5\u7684\u521d\u59cb\u5316\u5de5\u4f5c\u5747\u5df2\u5b8c\u6210\u3002\u5bf9\u4e8e\u4e1a\u52a1\u8bf7\u6c42\u5904\u7406\u800c\u8a00\uff0c\u76f4\u63a5\u5229\u7528\u73b0\u6709\u53ef\u7528\u8fde\u63a5\uff0c\u907f\u514d\u4e86\u6570\u636e\u5e93\u8fde\u63a5\u521d\u59cb\u5316\u548c\u91ca\u653e\u8fc7\u7a0b\u7684\u65f6\u95f4\u5f00\u9500\uff0c\u4ece\u800c\u7f29\u51cf\u4e86\u7cfb\u7edf\u6574\u4f53\u54cd\u5e94\u65f6\u95f4\u3002 - \u65b0\u7684\u8d44\u6e90\u5206\u914d\u624b\u6bb5 \u5bf9\u4e8e\u591a\u5e94\u7528\u5171\u4eab\u540c\u4e00\u6570\u636e\u5e93\u7684\u7cfb\u7edf\u800c\u8a00\uff0c\u53ef\u5728\u5e94\u7528\u5c42\u901a\u8fc7\u6570\u636e\u5e93\u8fde\u63a5\u7684\u914d\u7f6e\uff0c\u9650\u5236\u5355\u4e00\u5e94\u7528\u7533\u8bf7\u6570\u636e\u5e93\u8fde\u63a5\u6570\uff0c\u4ece\u800c\u907f\u514d\u5355\u4e00\u5e94\u7528\u72ec\u5360\u6240\u6709\u6570\u636e\u5e93\u8d44\u6e90\u3002 \u865a\u8c37 JDBC \u4e2d\u6570\u636e\u6e90\u5b9e\u73b0\u7c7b\u4e3a com.xugu.pool.XgDataSource\uff0c\u8fde\u63a5\u6c60\u5b9e\u73b0\u7c7b\u4e3acom.xugu.pool \u5305\u4e2d\u7684 XgDataSource\u3001XgPooledConnection\u3001XgConnectionPoolDataSource\u3001XgConnectionEventListener\u3001XgConnectionEvent\u3002 5.1 \u4f7f\u7528\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u6e90\u521b\u5efa\u8fde\u63a5 XgDataSource \u63d0\u4f9b set \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u6e90\u8fde\u63a5\u5c5e\u6027\uff1a \u793a\u4f8b\uff1a\u901a\u8fc7 XgDataSource \u4e0e\u865a\u8c37\u6570\u636e\u5e93\u5efa\u7acb\u8fde\u63a5 com.xugu.pool.XgDataSource ds = new com.xugu.pool.XgDataSource()\u037e ds.setUrl(\"jdbc:xugu://127.0.0.1:5138/db\")\u037e ds.setUser(\"SYSDBA\")\u037e ds.setPassword(\"SYSDBA\")\u037e Properties pro = new Properties()\u037e pro.setProperty(\"return_rowid\", \"true\")\u037e pro.setProperty(\"auto_commit\", \"off\")\u037e ds.setPro(pro)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u767b\u5f55\u4e32\u3002url\u4e3a\u6570\u636e\u5e93\u767b\u5f55\u4e32 setUrl(String url)\uff1b //\u6307\u5b9a\u6570\u636e\u5e93\u670d\u52a1\u5668\u3002host\u4e3a\u670d\u52a1\u5668\u5730\u5740 setHostName(String host)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u540d\u3002dbName\u4e3a\u6570\u636e\u5e93\u540d setDatabaseName(String dbName)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u7aef\u53e3\u53f7\u3002port\u4e3a\u6570\u636e\u5e93\u7aef\u53e3\u53f7 setPort(int port)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u7528\u6237\u3002userName\u4e3a\u6570\u636e\u5e93\u767b\u5f55\u7528\u6237\u540d setUser(String userName)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u767b\u5f55\u5bc6\u7801\u3002passWord\u4e3a\u6570\u636e\u5e93\u767b\u5f55\u5bc6\u7801 setPassword(Stirng passWord)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u767b\u5f55\u53c2\u6570\u3002ds_pro\u4e3a\u6570\u636e\u5e93\u8fde\u63a5\u53c2\u6570 setPro(Properties ds_pro)\uff1b // \u901a\u8fc7\u6570\u636e\u6e90\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5 Connection conn = ds.getConnection()\u037e \u5728 com.xugu.pool.XgDataSource \u7c7b\u4e2d\u901a\u8fc7 setXX() \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u6e90\u7684\u8fde\u63a5\u5c5e\u6027\uff0c\u82e5\u672a\u6307\u5b9a\u5219\u4f7f\u7528\u9ed8\u8ba4\u5c5e\u6027\u503c\uff1a\u6570\u636e\u5e93\u670d\u52a1\u5668\u5730\u5740\u9ed8\u8ba4\u4e3a\u201clocalhost\u201d \uff0c\u8fde\u63a5\u6570\u636e\u5e93\u9ed8\u8ba4\u4e3a\u201cSYSTEM\u201d \uff0c\u8bbf\u95ee\u7aef\u53e3\u53f7\u9ed8\u8ba4\u4e3a\u201c5138\u201d \uff0c\u8bbf\u95ee\u7528\u6237\u540d\u9ed8\u8ba4\u4e3a\u201cGUEST\u201d \uff0c\u7528\u6237\u5bc6\u7801\u9ed8\u8ba4\u4e3a\u201cGUEST\u201d \u3002URL \u9ed8\u8ba4\u8fde\u63a5\u4e32\u4e3a\u201cjdbc:xugu://127.0.0.1:5138/SYSTEM?user=GUEST&password=GUEST&version=110\u201d\u3002\u6570\u636e\u6e90\u5efa\u7acb\u540e\uff0c\u53ef\u901a\u8fc7\u8c03\u7528 XgDataSource \u7c7b\u4e2d\u7684 getConnection() \u548c getConnection(String username,String password) \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u3002 5.2 \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u6c60 \u8fde\u63a5\u6c60\u6280\u672f\u7684\u6838\u5fc3\u601d\u60f3\u662f\uff1a\u8fde\u63a5\u590d\u7528\uff0c\u901a\u8fc7\u5efa\u7acb\u4e00\u4e2a\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u4ee5\u53ca\u4e00\u5957\u8fde\u63a5\u4f7f\u7528\u3001\u5206\u914d\u3001\u7ba1\u7406\u7b56\u7565\uff0c\u8be5\u8fde\u63a5\u6c60\u4e2d\u7684\u8fde\u63a5\u53ef\u4ee5\u5f97\u5230\u9ad8\u6548\u3001\u5b89\u5168\u7684\u590d\u7528\uff0c\u907f\u514d\u4e86\u6570\u636e\u5e93\u8fde\u63a5\u9891\u7e41\u5efa\u7acb\u3001\u5173\u95ed\u7684\u5f00\u9500\u3002 \u865a\u8c37 JDBC \u8fde\u63a5\u6c60\u5b9e\u73b0\u7c7b\u5bf9\u865a\u8c37\u6570\u636e\u5e93\u539f\u59cb\u8fde\u63a5\u8fdb\u884c\u4e86\u5c01\u88c5\uff0c\u4ece\u800c\u65b9\u4fbf\u4e86\u6570\u636e\u5e93\u5e94\u7528\u5bf9\u4e8e\u8fde\u63a5\u7684\u4f7f\u7528\uff08\u7279\u522b\u662f\u5bf9\u4e8e\u4e8b\u52a1\u5904\u7406\uff09\uff0c\u63d0\u9ad8\u4e86\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u6548\u7387\uff0c\u4e5f\u6b63\u662f\u56e0\u4e3a\u8fd9\u4e2a\u5c01\u88c5\u5c42\u7684\u5b58\u5728\uff0c\u9694\u79bb\u4e86\u5e94\u7528\u7684\u672c\u8eab\u7684\u5904\u7406\u903b\u8f91\u548c\u5177\u4f53\u6570\u636e\u5e93\u8bbf\u95ee\u903b\u8f91\uff0c\u4f7f\u5e94\u7528\u672c\u8eab\u7684\u590d\u7528\u6210\u4e3a\u53ef\u80fd\u3002\u8fde\u63a5\u6c60\u4e3b\u8981\u7531\u4e09\u90e8\u5206\u7ec4\u6210\uff1a\u8fde\u63a5\u6c60\u7684\u5efa\u7acb\u3001\u8fde\u63a5\u6c60\u4e2d\u8fde\u63a5\u7684\u4f7f\u7528\u7ba1\u7406\u3001\u8fde\u63a5\u6c60\u7684\u5173\u95ed\u3002 \u865a\u8c37 JDBC \u8fde\u63a5\u6c60\u7684\u57fa\u672c\u601d\u60f3\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u5efa\u7acb\u4e00\u4e2a\u201c\u7f13\u51b2\u6c60\u201d\u3002\u9884\u5148\u5728\u201c\u7f13\u51b2\u6c60\u201d\u4e2d\u653e\u5165\u4e00\u5b9a\u6570\u91cf\u7684\u8fde\u63a5\uff0c\u5f53\u9700\u8981\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65f6\uff0c\u53ea\u9700\u4ece\u201c\u7f13\u51b2\u6c60\u201d\u4e2d\u53d6\u51fa\u4e00\u4e2a\uff0c\u4f7f\u7528\u5b8c\u6bd5\u4e4b\u540e\u518d\u653e\u56de\u53bb\u3002\u901a\u8fc7\u8bbe\u5b9a\u8fde\u63a5\u6c60\u6700\u5927\u8fde\u63a5\u6570\u6765\u9632\u6b62\u7cfb\u7edf\u65e0\u5c3d\u7684\u4e0e\u6570\u636e\u5e93\u8fde\u63a5\u3002\u4ea6\u53ef\u901a\u8fc7\u8fde\u63a5\u6c60\u7684\u7ba1\u7406\u673a\u5236\u76d1\u89c6\u6570\u636e\u5e93\u7684\u8fde\u63a5\u6570\u91cf\u3001\u4f7f\u7528\u60c5\u51b5\uff0c\u4e3a\u7cfb\u7edf\u5f00\u53d1\u3001\u6d4b\u8bd5\u53ca\u6027\u80fd\u8c03\u6574\u63d0\u4f9b\u4f9d\u636e\u3002 \u5f53\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u5b8c\u6570\u636e\u5e93\u8fde\u63a5\u8c03\u7528\u8fde\u63a5\u5173\u95ed\u65b9\u6cd5\u65f6\uff0c\u8be5\u8fde\u63a5\u5e76\u672a\u9500\u6bc1\uff0c\u800c\u662f\u88ab\u5f52\u8fd8\u7ed9\u8fde\u63a5\u6c60\u7b49\u5f85\u4e0b\u6b21\u7ee7\u7eed\u8c03\u7528\u3002 {.is-info} \u865a\u8c37 JDBC \u5b9e\u73b0\u8fde\u63a5\u6c60\u670d\u52a1\u6240\u63d0\u4f9b\u7684\u63a5\u53e3\u7c7b\u5982\u4e0b\uff1a - XgDataSource \u5b9e\u73b0 javax.sql.DataSource \u63a5\u53e3\uff1b - XgPooledConnection \u5b9e\u73b0 javax.sql.PooledConnection \u63a5\u53e3\uff1b - XgConnectionPoolDataSource \u5b9e\u73b0 javax.sql.ConnectionPoolDataSource \u63a5\u53e3\uff1b - XgConnectionEventListener \u5b9e\u73b0 javax.sql.ConnectionEventListener \u63a5\u53e3\uff1b - XgConnectionEvent \u7ee7\u627f\u81ea javax.sql.ConnectionEvent \u7c7b\u3002 \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u4e2d\u7684\u8fde\u63a5\u5747\u662f\u901a\u8fc7\u6570\u636e\u6e90\u5efa\u7acb\u7684\uff0c\u6545\u800c XgConnectionPoolDataSource \u7ee7\u627f\u4e86 com.xugu.pool.XgDataSource \u7c7b\u3002\u7528\u6237\u4ea6\u53ef\u901a\u8fc7 XgConnectionPoolDataSource \u5bf9\u8c61\u8bbe\u7f6e\u6570\u636e\u6e90\u5c5e\u6027\u548c\u8fde\u63a5\u6c60\u5c5e\u6027\uff1a //\u6700\u5c0f\u8fde\u63a5\u6570 setMinIdle(int min) //\u6700\u5927\u8fde\u63a5\u6570 setMaxActive(int max) //\u767b\u5f55\u7a7a\u95f2\u65f6\u95f4 setLoginTimeout(int time) //\u6700\u5927\u7b49\u5f85\u8fde\u63a5\u8d85\u65f6 setMaxWaitTime(long waitTime) \u5176\u4e2d\uff1asetLoginTimeout() \u548c setMaxWaitTime() \u65b9\u6cd5\u4e2d\u53c2\u6570\u5355\u4f4d\u4e3a\u6beb\u79d2\uff0c\u5176\u4ed6\u65b9\u6cd5\u4e2d\u53c2\u6570\u5355\u4f4d\u4e3a\u79d2\u3002 \u793a\u4f8b\uff1a\u521b\u5efa\u4e00\u4e2a\u865a\u8c37 JDBC \u8fde\u63a5\u6c60\uff0c\u5e76\u901a\u8fc7\u8fde\u63a5\u6c60\u83b7\u53d6\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u3002 XgConnectionPoolDataSource CPDSource = new XgConnectionPoolDataSource()\u037e CPDSource.setHostName(\u201clocalhost\u201d)\u037e CPDSource.setPort(5138)\u037e CPDSource.setDatabaseName(\u201cxuguNew\u201d)\u037e CPDSource.setUser(\u201cSYSDBA\u201d)\u037e CPDSource.setPassword(\u201cSYSDBA\u201d)\u037e CPDSource.setUrl(\"jdbc:xugu://localhost:5138/xuguNew)\u037e CPDSource.setMaxActive(50)\u037e CPDSource.setMinIdle(5)\u037e CPDSource.setLoginTimeout(3000)\u037e CPDSource.setMaxWaitTime(3000)\u037e XgPooledConnection Pconn = (XgPooledConnection)CPDSource.getPooledConnection()\u037e Connection conn = Pconn.getConnection()\u037e \u516d. \u865a\u8c37\u6570\u636e\u5e93\u7684JDBC\u4ea4\u4e92\u6d41\u7a0b \u4f7f\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u5b9e\u73b0\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u4ea4\u4e92\u7684\u4e00\u822c\u4f7f\u7528\u6b65\u9aa4\uff1a\u5bfc\u5165\u865a\u8c37 JDBC \u9a71\u52a8\u5305 \u2192 \u52a0\u8f7d\u865a\u8c37 JDBC \u9a71\u52a8\u7a0b\u5e8f \u2192 \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5 Connection \u2192 \u521b\u5efa\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61 Statement \u2192 \u6267\u884c SQL \u8bed\u53e5 \u2192 \u5904\u7406\u6267\u884c\u7ed3\u679c ResultSet \u2192 \u91ca\u653e\u8d44\u6e90\u3002 - \u7b2c 1 \u6b65\uff1a\u5bfc\u5165\u865a\u8c37 JDBC \u9a71\u52a8\u5305 - \u7b2c 2 \u6b65\uff1a\u6ce8\u518a\u9a71\u52a8 (\u4ec5\u505a\u4e00\u6b21) - \u7b2c 3 \u6b65\uff1a\u5efa\u7acb\u8fde\u63a5 (Connection) - \u7b2c 4 \u6b65\uff1a\u521b\u5efa\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61 (Statement) - \u7b2c 5 \u6b65\uff1a\u6267\u884c SQL \u8bed\u53e5 - \u7b2c 6 \u6b65\uff1a\u5904\u7406\u6267\u884c\u7ed3\u679c (ResultSet) - \u7b2c 7 \u6b65\uff1a\u91ca\u653e\u8d44\u6e90 6.1 \u5bfc\u5165\u865a\u8c37JDBC\u9a71\u52a8\u5305 \u4e0b\u8f7d\u865a\u8c37\u6570\u636e\u5e93\u4e13\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u5305 (cloudjdbc-*.*.*.jar)\uff0c\u5e76\u5bfc\u5165\u5230\u5e94\u7528\u7a0b\u5e8f\u4e2d\u3002 6.2 \u52a0\u8f7d\u865a\u8c37JDBC\u9a71\u52a8 \u865a\u8c37 JDBC \u9a71\u52a8\u7a0b\u5e8f\u4e2d Driver \u63a5\u53e3\u5b9e\u73b0\u7c7b\u4e3a com.xugu.cloudjdbc.Driver\u3002\u52a0\u8f7d\u9a71\u52a8\u65b9\u5f0f\u4e3a DriverManager.registerDriver(new com.xugu.cloudjdbc.Driver()) \u6216Class.forName(\u201ccom.xugu.cloudjdbc.Driver\u201d)\u3002 6.3 \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5 \u5efa\u7acb\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u7684\u65b9\u5f0f\u6709\u591a\u79cd\uff0c\u53ef\u6839\u636e\u5e94\u7528\u7a0b\u5e8f\u5b9e\u9645\u4f7f\u7528\u573a\u666f\u9009\u62e9\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65b9\u5f0f\u3002\u5e38\u89c1\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65b9\u5f0f\u5982\u4e0b\uff1a - \u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u4f7f\u7528 DriverManager \u83b7\u5f97\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\uff1b - \u4f7f\u7528\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u6e90/\u8fde\u63a5\u6c60\u7684\u65b9\u5f0f\u83b7\u53d6\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\uff1b - \u4f7f\u7528\u7b2c\u4e09\u65b9\u901a\u7528\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u65b9\u5f0f\u83b7\u53d6\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u3002 \u5982\uff1adruid\u3001c3p0\u3001dbcp\u3001JNDI \u7b49\u3002 6.3.1 \u6253\u5f00\u6570\u636e\u5e93\u8fde\u63a5 \u6253\u5f00\u6570\u636e\u5e93\u8fde\u63a5\u5373\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u5bf9\u8c61 Connection \u7c7b\u3002 \u5982\uff1aDriverManager \u901a\u8fc7 getConnection() \u65b9\u6cd5\u83b7\u53d6 Connection \u7c7b\u5bf9\u8c61\u3002DriverManager \u7684 getConnection() \u65b9\u6cd5\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\u7684\u65b9\u5f0f\u4ea6\u6709\u591a\u79cd\u3002\u4ee5\u4e0b\u4e3a\u5e38\u89c1\u65b9\u5f0f\uff1a - getConnection(String url) \u53c2\u6570\u8bf4\u660e\uff1a - url\uff1a\u8bbf\u95ee\u6570\u636e\u5e93\u7684 URL \u8def\u5f84\u3002 \u793a\u4f8b\uff1a \u4e0b\u9762\u7684\u4ee3\u7801\u5229\u7528 getConnection \u65b9\u6cd5\u521b\u5efa\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u3002 ``` public Connection getConnection(){ Connection con=null\u037e try{ //\u6ce8\u518c\u6570\u636e\u5e93\u9a71\u52a8 Class.forName(\"com.xugu.cloudjdbc.Driver\")\u037e //\u5b9a\u4e49\u8fde\u63a5\u6570\u636e\u5e93\u7684url String url = \"jdbc:xugu://localhost:5138/db?user=user1\uff06password=pwd\"\u037e //\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5 con = DriverManager.getConnection(url)\u037e System.out.println(\"\u6570\u636e\u5e93\u8fde\u63a5\u6210\u529f\uff01\")\u037e }catch(Exception e){ e.printStackTrace()\u037e } //\u8fd4\u56de\u4e00\u4e2a\u8fde\u63a5 return con\u037e } ``` getConnection(String url,String user,String password) \u53c2\u6570\u8bf4\u660e\uff1a url\uff1a\u8bbf\u95ee\u6570\u636e\u5e93\u7684 URL \u8def\u5f84\u3002 user\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u7528\u6237\u540d\u3002 password\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u7528\u6237\u5bc6\u7801\u3002 \u793a\u4f8b\uff1a \u4e0b\u9762\u7684\u4ee3\u7801\u5229\u7528 getConnection \u65b9\u6cd5\u521b\u5efa\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u3002 private Connection con; private String user = \"user1\"; //\u5b9a\u4e49\u8fde\u63a5\u6570\u636e\u5e93\u7684\u7528\u6237\u540d private String password = \"pwd\"; //\u5b9a\u4e49\u8fde\u63a5\u6570\u636e\u5e93\u7684\u5bc6\u7801 private String className = \"com.xugu.cloudjdbc.Driver\";//\u5b9a\u4e49\u865a\u8c37JDBC\u9a71\u52a8 private String url = \"jdbc:xugu://localhost:5138/db\"; /\\*\\*\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\\*/ public Connection getConnection(){ try{ Class.forName(className);//\u52a0\u8f7d\u6570\u636e\u5e93\u9a71\u52a8 System.out.println(\"\u6570\u636e\u5e93\u9a71\u52a8\u52a0\u8f7d\u6210\u529f\uff01\"); con = DriverManager.getConnection(url,user,password); //\u8fde\u63a5\u6570\u636e\u5e93 System.out.println(\"\u6210\u529f\u5730\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\uff01\"); }catch(Exception e){ System.out.println(\"\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\u5931\u8d25\uff01\"); con = null; e.printStackTrace(); } finally { If(conn != null){ //\u91ca\u653e\u8fde\u63a5\u8d44\u6e90 conn.close(); } } return con; } getConnection(String url,Properties info) \u53c2\u6570\u8bf4\u660e\uff1a url\uff1a\u8bbf\u95ee\u6570\u636e\u5e93\u7684 URL \u8def\u5f84\u3002 info\uff1a\u4e00\u4e2a\u6301\u4e45\u7684\u5c5e\u6027\u96c6\u5bf9\u8c61\uff0c\u5305\u62ec user \u548c password \u7b49\u5c5e\u6027\u3002 \u793a\u4f8b\uff1a \u4e0b\u9762\u7684\u4ee3\u7801\u5229\u7528 getConnection \u65b9\u6cd5\u521b\u5efa\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u3002 public Connection getConnection(){ Connection con = null; //\u5b9a\u4e49\u6570\u636e\u5e93\u8fde\u63a5\u5bf9\u8c61 Properties info = new Properties(); //\u5b9a\u4e49Properties\u5bf9\u8c61 info.setProperty(\"user\",\"user1\"); //\u8bbe\u7f6eProperties\u5bf9\u8c61\u5c5e\u6027 info.setProperty(\"password\",\"pwd\"); try{ //\u6ce8\u518c\u6570\u636e\u5e93\u9a71\u52a8 Class.forName(\"com.xugu.cloudjdbc.Driver\"); //test\u4e3a\u6570\u636e\u5e93\u540d\u79f0 String url = \"jdbc:xugu://localhost:5138/db\"; //\u83b7\u53d6\u8fde\u63a5\u6570\u636e\u5e93\u7684Connection\u5bf9\u8c61 con = DriverManager.getConnection(url,info); System.out.println(\"\u6570\u636e\u5e93\u8fde\u63a5\u6210\u529f\uff01\"); }catch(Exception e){ e.printStackTrace(); } //\u8fd4\u56de\u4e00\u4e2a\u8fde\u63a5 return con; } 6.3.2 \u8fde\u63a5\u4e8b\u52a1\u7ba1\u7406 \u6570\u636e\u5e93\u4e8b\u52a1 (transaction) \u662f\u8bbf\u95ee\u5e76\u53ef\u80fd\u64cd\u4f5c\u5404\u79cd\u6570\u636e\u9879\u7684\u4e00\u4e2a\u6570\u636e\u5e93\u64cd\u4f5c\u5e8f\u5217\uff0c\u8fd9\u4e9b\u64cd\u4f5c\u8981\u4e48\u5168\u90e8\u6267\u884c, \u8981\u4e48\u5168\u90e8\u4e0d\u6267\u884c\uff0c\u662f\u4e00\u4e2a\u4e0d\u53ef\u5206\u5272\u7684\u5de5\u4f5c\u5355\u4f4d\u3002\u4e8b\u52a1\u7531\u4e8b\u52a1\u5f00\u59cb\u5230\u4e8b\u52a1\u7ed3\u675f\u4e4b\u95f4\u6267\u884c\u7684\u5168\u90e8\u6570\u636e\u5e93\u64cd\u4f5c\u7ec4\u6210\u3002 \u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\uff0c\u5373\u5f53\u4e00\u6761 SQL \u8bed\u53e5\u6267\u884c\u5b8c\u6210\u540e\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u5c06\u81ea\u52a8\u63d0\u4ea4\u8be5\u8bed\u53e5\u6240\u5728\u4e8b\u52a1\u3002\u5728\u865a\u8c37 JDBC \u9a71\u52a8\u4e2d\u63a7\u5236\u4e8b\u52a1\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a - \u901a\u8fc7\u6570\u636e\u5e93\u8fde\u63a5 URL \u4e32\u7684 auto_commit \u5c5e\u6027\uff0c\u63a7\u5236\u4e8b\u52a1\u7684\u5f00\u542f\u4e0e\u5173\u95ed\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b auto_commit \u5c5e\u6027\u4e3a on\uff0c\u5373\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u3002 - \u901a\u8fc7 Connection \u7c7b\u7684 setAutoCommit(boolean commit) \u65b9\u6cd5\u63a7\u5236\u4e8b\u52a1\u7684\u5f00\u542f\u4e0e\u5173\u95ed\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b commit \u5c5e\u6027\u4e3a TRUE\uff0c\u5373\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u3002 \u5728\u7981\u7528\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u4e0b\uff0c\u4f7f\u7528 Connection \u7c7b\u7684 commit() \u65b9\u6cd5\u63d0\u4ea4 SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u505a\u7684\u66f4\u6539\uff0c\u800c Connection \u7c7b\u7684 rollback() \u65b9\u6cd5\u5c06\u56de\u6eda SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u7684\u66f4\u6539\uff0c\u4e0a\u8ff0\u4e24\u79cd\u65b9\u6cd5\u6267\u884c\u5b8c\u6210\u540e\u5747\u5c06\u91ca\u653e\u4e8b\u52a1\u6301\u6709\u7684\u5168\u90e8\u9501\u8d44\u6e90\u3002 \u4e8b\u52a1\u4ec5\u5bf9\u6570\u636e\u5e93 DML \u64cd\u4f5c\u6709\u6548\u3002 {.is-info} \u4ee5\u4e0b\u4e3a\u4f7f\u7528 setAutoCommit() \u65b9\u6cd5\u63a7\u5236\u4e8b\u52a1\u63d0\u4ea4\u7684\u793a\u4f8b\u4ee3\u7801\uff1a //\u8bbe\u7f6e\u4e8b\u52a1\u4e3a\u975e\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f conn.setAutoCommit(false)\u037e //\u521b\u5efa\u6570\u636e\u5e93Statement\u5bf9\u8c61 Statement stm = conn.createStatement()\u037e //\u6570\u636e\u5e93\u4e8b\u52a1\u6267\u884cSQL\u8bed\u53e5 String sql = \"insert into test (comp_id,comp_name) values(1,'comp')\"\u037e //\u6267\u884c\u9759\u6001SQL\u8bed\u53e5 stm.execute(sql)\u037e //\u6570\u636e\u5e93\u9884\u5904\u7406SQL\u8bed\u53e5 PreparedStatement pstm = conn. prepareStatement(\u201cupdate test set id=? where comp_name=?\u201d) //\u9884\u5904\u7406SQL\u8bed\u53e5\u7b2c\u4e00\u4e2a\u53c2\u6570\u8d4b\u503c pstm.setInt(1,15)\u037e //\u9884\u5904\u7406SQL\u8bed\u53e5\u7b2c\u4e8c\u4e2a\u53c2\u6570\u8d4b\u503c pstm.setString(2,'DBMS')\u037e //\u6267\u884c\u9884\u5904\u7406SQL\u8bed\u53e5 pstm.execute()\u037e //\u63d0\u4ea4\u4e8b\u52a1 conn.commit()\u037e //\u5220\u9664\u8868\u4e2d\u6307\u5b9a\u884c\u6570\u636e stm.execute(\u201cdelete from test where id=15\u201d)\u037e //\u4e8b\u52a1\u56de\u6eda\u65b9\u6cd5 conn.rollback()\u037e \u4e0a\u9762\u4ee3\u7801\u4e2d\u6267\u884c\u63d0\u4ea4\u4e8b\u52a1\u64cd\u4f5c\uff0c\u6267\u884c\u9759\u6001 SQL \u8bed\u53e5\u4e0e\u6267\u884c\u9884\u5904\u7406 SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u7684\u66f4\u6539\u5c06\u6c38\u4e45\u751f\u6548\uff1b\u800c\u540e\u6267\u884c\u7684\u5220\u9664\u8868\u4e2d\u6307\u5b9a\u884c\u6570\u636e\u64cd\u4f5c\uff0c\u56e0\u5176\u540e\u8c03\u7528\u7684 rollback() \u65b9\u6cd5\uff0cdelete \u547d\u4ee4\u5bf9\u6570\u636e\u5e93\u7684\u6570\u636e\u66f4\u6539\u5c06\u88ab\u56de\u6eda\u6389\uff0c\u6545\u800c\u5bf9\u6570\u636e\u5e93\u7684\u5220\u9664\u64cd\u4f5c\u4e0d\u4f1a\u751f\u6548\u3002 6.3.3 \u8fde\u63a5\u4e8b\u52a1\u63a7\u5236\uff0cSavepoint\u63a5\u53e3 JDBC \u89c4\u8303 3.0 \u4e2d\u4e3a\u4e86\u589e\u52a0\u5bf9\u4e8b\u52a1\u7684\u63a7\u5236\uff0c\u65b0\u589e Savepoint \u63a5\u53e3\uff0c\u5176\u4ee3\u8868\u4e8b\u52a1\u4e2d\u7684\u4e00\u4e2a\u903b\u8f91\u4e8b\u52a1\u70b9\u3002\u5728\u975e\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u4e0b\uff0c\u4e00\u4e2a\u4e8b\u52a1\u4e2d\u53ef\u4ee5\u8bbe\u7f6e\u591a\u4e2a Savepoint\uff0c\u5728\u4ee3\u7801\u4e2d\u8fdb\u884c\u4e8b\u52a1\u56de\u6eda\u64cd\u4f5c\u65f6\uff0c\u53ef\u4ee5\u6307\u5b9a\u4e8b\u52a1\u56de\u6eda\u5230\u6307\u5b9a Savepoint \u4f4d\u7f6e\uff0c\u6307\u5b9a\u56de\u6eda\u4f4d\u7f6e\u524d\u7684\u4e8b\u52a1\u64cd\u4f5c\u4ecd\u7136\u4fdd\u7559\u3002\u6b64\u63a5\u53e3\u5927\u5927\u63d0\u9ad8\u4e86\u4e8b\u52a1\u5904\u7406\u7684\u7c92\u5ea6\uff0c\u65b9\u4fbf\u5e94\u7528\u7a0b\u5e8f\u63a7\u5236\u4e8b\u52a1\u5904\u7406\u903b\u8f91\u3002 \u793a\u4f8b\uff1a\u8fde\u63a5\u4e8b\u52a1\u63a7\u5236\u63a5\u53e3 Savepoint \u4f7f\u7528 //\u8bbe\u7f6e\u975e\u81ea\u52a8\u63d0\u4ea4 conn.setAutoCommit(false); //\u521b\u5efaStatement\u5bf9\u8c61 Statement stm = conn.createStatement(); //\u6267\u884cSQL\u547d\u4ee4 stm.execute(sql1); stm.execute(sql2); //\u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\u70b9save1 java.sql.Savepoint save1 =conn.setSavepoint(\"save_1\"); stm.execute(sql3); //\u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\u70b9save2 java.sql.Savepoint save2 =conn.setSavepoint(\"save_2\"); stm.execute(sql4); //\u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\u70b9save3 java.sql.Savepoint save3 =conn.setSavepoint(\"save_3\"); stm.execute(sql5); //\u56de\u6eda\u4e8b\u52a1\u5230\u56de\u6eda\u70b9save3 conn.rollback(save3); conn.commit(); \u4ee5\u4e0a\u4ee3\u7801\u6bb5\u4e2d\uff0c\u4e8b\u52a1\u6267\u884c\u8bed\u53e5 sql5 \u5c06\u88ab\u56de\u6eda\u6389\u3002 6.4 \u521b\u5efa\u6267\u884cSQL\u8bed\u53e5\u5bf9\u8c61 \u5728\u6570\u636e\u5e93\u6807\u51c6\u4e2d\uff0c\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61\u5206\u4e3a\u4e09\u7c7b\uff1a\u6267\u884c\u9759\u6001 SQL \u8bed\u53e5\u7684 Statement \u5bf9\u8c61\u3001\u6267\u884c\u9884\u7f16\u8bd1 SQL \u8bed\u53e5\u7684 PreparedStatement \u5bf9\u8c61\u4ee5\u53ca\u6267\u884c\u6570\u636e\u5e93\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\u7684 CallableStatement \u5bf9\u8c61\u3002 6.4.1 \u6267\u884cSQL\u5bf9\u8c61Statement Statement \u5bf9\u8c61\u7528\u4e8e\u6267\u884c\u9759\u6001 SQL \u8bed\u53e5\u548c\u83b7\u5f97 SQL \u4ea7\u751f\u7684\u7ed3\u679c\u3002\u5728\u865a\u8c37 JDBC \u9a71\u52a8\u4e2d\uff0c\u865a\u8c37\u6570\u636e\u5e93 DDL \u64cd\u4f5c\u5747\u901a\u8fc7 Statement \u5bf9\u8c61\u6765\u6267\u884c\u3002 Statement \u5bf9\u8c61\u901a\u8fc7 Connection \u7c7b\u7684 createStatement() \u65b9\u6cd5\u521b\u5efa\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a //\u521b\u5efa\u6267\u884cSQL\u8bed\u53e5\u5bf9\u8c61Statement Statement stm = conn.createStatement()\u037e 6.4.2 \u6267\u884cSQL\u5bf9\u8c61PreparedStatement PreparedStatement \u5bf9\u8c61\u4f7f\u7528\u65f6\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u5bf9\u6267\u884c SQL \u8bed\u53e5\u8fdb\u884c\u9884\u7f16\u8bd1\u5904\u7406\uff0c\u9884\u7f16\u8bd1 SQL \u8bed\u53e5\u5c06\u5728\u672a\u6765\u7684\u4f7f\u7528\u4e2d\u88ab\u91cd\u7528\u3002\u4e0e Statement \u5bf9\u8c61\u76f8\u6bd4\uff0cPreparedStatement \u5bf9\u8c61\u64cd\u4f5c\u591a\u6761 SQL \u8bed\u53e5\u7684\u6548\u7387\u66f4\u9ad8\u3002 \u7ecf\u8fc7\u9884\u7f16\u8bd1\u5e76\u5b58\u50a8\u5728 PreparedStatement \u5bf9\u8c61\u4e2d\u7684 SQL \u8bed\u53e5\uff0c\u901a\u8fc7 Connection \u7c7b\u7684 prepareStatement() \u65b9\u6cd5\u521b\u5efa\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a //\u521b\u5efa\u6267\u884c\u9884\u7f16\u8bd1SQL\u8bed\u53e5\u5bf9\u8c61PreparedStatement PreparedStatement preStatement = conn.prepareStatement(\u201c\u9884\u7f16\u8bd1SQL\u8bed\u53e5\u201d); \u9884\u5904\u7406 PreparedStatement \u5bf9\u8c61\u76f8\u5bf9\u4e8e\u9759\u6001 Statement \u5bf9\u8c61\u7684\u4f18\u52bf\uff1a - PreparedStatement \u53ef\u4ee5\u52a8\u6001\u4f20\u5165\u53c2\u6570\u503c\uff1b - PreparedStatement \u6bd4 Statement \u66f4\u5feb\uff1b PreparedStatement \u4f1a\u5c06 SQL \u8bed\u53e5\u9884\u7f16\u8bd1\u5728\u6570\u636e\u5e93\u7cfb\u7edf\u4e2d\uff0c\u6267\u884c\u8ba1\u5212\u540c\u6837\u4f1a\u88ab\u7f13\u5b58\u8d77\u6765\uff0c\u5b83\u5141\u8bb8\u6570\u636e\u5e93\u505a\u53c2\u6570\u5316\u67e5\u8be2\u3002\u4f7f\u7528\u9884\u5904\u7406\u8bed\u53e5\u6bd4\u666e\u901a\u7684 Statement \u67e5\u8be2\u66f4\u5feb\uff0c\u56e0\u505a\u7684\u5de5\u4f5c\u66f4\u5c11 (\u6570\u636e\u5e93\u5bf9 SQL \u8bed\u53e5\u7684\u5206\u6790\u3001\u7f16\u8bd1\u3001\u4f18\u5316\u5df2\u7ecf\u5728\u7b2c\u4e00\u6b21\u67e5\u8be2\u524d\u5b8c\u6210\u4e86)\u037e - PreparedStatement \u53ef\u4ee5\u9632\u6b62 SQL \u6ce8\u5165\u5f0f\u653b\u51fb\u3002 PreparedStatement \u5728\u4f7f\u7528\u53c2\u6570\u5316\u67e5\u8be2\u7684\u60c5\u51b5\u4e0b\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u4e0d\u4f1a\u5c06\u53c2\u6570\u7684\u5185\u5bb9\u89c6\u4e3a SQL \u6307\u4ee4\u7684\u4e00\u90e8\u5206\u6765\u5904\u7406\uff0c\u800c\u662f\u5728\u6570\u636e\u5e93\u5b8c\u6210 SQL \u6307\u4ee4\u7684\u7f16\u8bd1\u540e\uff0c\u624d\u5957\u7528\u53c2\u6570\u8fd0\u884c\uff0c\u56e0\u6b64\u5c31\u7b97\u53c2\u6570\u4e2d\u542b\u6709\u7834\u574f\u6027\u7684\u6307\u4ee4\uff0c\u4e5f\u4e0d\u4f1a\u88ab\u6570\u636e\u5e93\u6240\u8fd0\u884c\u3002 6.4.3 \u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u5bf9\u8c61CallableStatement CallableStatement \u5bf9\u8c61\u5b9e\u73b0\u4e86\u4ece Java \u5e94\u7528\u7a0b\u5e8f\u4e2d\u8c03\u7528\u6570\u636e\u5e93\u5b58\u50a8\u8fc7\u7a0b\u3002\u4f46\u6b64\u8c03\u7528\u8fc7\u7a0b\u5e76\u4e0d\u5305\u542b\u5b58\u50a8\u8fc7\u7a0b\u672c\u8eab\uff0c\u56e0\u5b58\u50a8\u8fc7\u7a0b\u5b58\u50a8\u5728\u6570\u636e\u5e93\u4e2d\u3002 CallableStatement \u5bf9\u8c61\u4e3a\u6240\u6709\u7684\u6570\u636e\u5e93\u63d0\u4f9b\u4e86\u4e00\u79cd\u4ee5\u6807\u51c6\u5f62\u5f0f\u8c03\u7528\u5b58\u50a8\u8fc7\u7a0b\u7684\u65b9\u6cd5\uff0c\u901a\u8fc7 Connection \u7c7b\u7684 prepareCall() \u65b9\u6cd5\u521b\u5efa\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a //\u521b\u5efa\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u5bf9\u8c61CallableStatement CallableStatement cstmt= conn.prepareCall(\u201c{call \u5b58\u50a8\u8fc7\u7a0b\u540d(\u53c2\u6570\u8868\u5217)}\u201d); 6.4.4 \u6267\u884cSQL\u8bed\u53e5\u5bf9\u8c61\u5c5e\u6027\u6269\u5145 \u5728\u521b\u5efa\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61\u65f6\uff0c\u53ef\u901a\u8fc7\u6784\u9020\u65b9\u6cd5\u7684\u4e0d\u540c\u53c2\u6570\u8bbe\u7f6e ResultSet \u5bf9\u8c61\u5c5e\u6027\uff0c\u5c5e\u6027\u5305\u62ec\u7ed3\u679c\u7c7b\u578b ResultSetType\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b ResultSetConcurrency\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b ResultSetHoldability\u3002 ResultSetType \u9ed8\u8ba4\u4e3a ResultSet.TYPE_SCROLL_INSENSITIVE\uff1a\u652f\u6301\u7ed3\u679c\u96c6 backforward\u3001last\u3001first \u7b49\u64cd\u4f5c\uff0c\u5bf9\u6570\u636e\u5e93\u4e2d\u5176\u5b83 session \u8fdb\u884c\u7684\u6570\u636e\u66f4\u6539\u4e0d\u654f\u611f\uff1b ResultSetConcurrency \u9ed8\u8ba4\u4e3a ResultSet.CONCUR_READ_ONLY: \u4e0d\u53ef\u66f4\u65b0\u7ed3\u679c\u96c6\uff1b\u8be5\u5c5e\u6027\u4ea6\u53ef\u66f4\u6539\u4e3a ResultSet.CONCUR_UPDATABLE\uff0c\u652f\u6301\u5728 ResultSet \u4e2d\u5bf9\u8bb0\u5f55\u8fdb\u884c\u4fee\u6539\uff0c\u4fee\u6539\u540e\u8bb0\u5f55\u66f4\u65b0\u5230\u6570\u636e\u5e93\uff0c\u4fee\u6539\u64cd\u4f5c\u53ef\u5305\u542b\u63d2\u5165\u3001\u5220\u9664\u6216\u66f4\u65b0\uff1b ResultSetHoldability \u9ed8\u8ba4\u4e3a ResultSet.HOLD_CURSORS_OVER_COMMIT: \u5728\u4e8b\u52a1 commit \u6216 rollback \u540e\uff0cResultSet \u4ecd\u7136\u53ef\u7528\u3002 Connection \u7c7b\u521b\u5efa Statement \u5bf9\u8c61\u6784\u9020\u65b9\u6cd5\uff1a //Statement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 createStatement(int resultSetType,int resultSetConcurrency)\uff1b //Statement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 createStatement(int resultSetType,int resultSetConcurrency, int resultSetHoldability)\uff1b Connection \u7c7b\u521b\u5efa PreparedStatement \u5bf9\u8c61\u6784\u9020\u65b9\u6cd5\uff1a //PreparedStatement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareStatement(String sql, int resultSetType,int resultSetConcurrency) //PrepareStatment\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareStatement(String sql, int resultSetType,int resultSetConcurrency, int resultSetHoldability) Connection \u7c7b\u521b\u5efa CallableStatement \u5bf9\u8c61\u6784\u9020\u65b9\u6cd5\uff1a //CallableStatement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareCall(String sql, int resultSetType,int resultSetConcurrency) //CallableStatement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareCall(String sql, int resultSetType,int resultSetConcurrency, int resultSetHoldability) 6.5 \u6267\u884cSQL\u8bed\u53e5 Statement \u5bf9\u8c61\u5b9a\u4e49\u4e86\u591a\u79cd\u6267\u884c SQL \u8bed\u53e5\u7684\u65b9\u6cd5\uff0c\u7528\u6765\u5904\u7406\u8fd4\u56de\u4e0d\u540c\u7ed3\u679c\u7684 SQL \u547d\u4ee4\uff1a - execute(String sql)\uff1a\u6267\u884c\u53ef\u4ee5\u8fd4\u56de\u591a\u4e2a\u7ed3\u679c\u96c6\u7684 SQL \u8bed\u53e5\u8fd4\u56de\u7c7b\u578b\u4e3a boolean\uff0c\u5982\u679c\u8fd4\u56de\u7684\u662f\u66f4\u65b0\u7684\u6570\u76ee\uff0c\u5219\u8fd4\u56de false\uff1b\u5982\u679c\u8fd4\u56de\u7684\u662f ResultSet \u5bf9\u8c61\uff0c\u5219\u8fd4\u56detrue\u3002 - executeQuery(String sql)\uff1a\u6267\u884c\u8fd4\u56de\u5355\u4e2a ResultSet \u7684 SQL \u8bed\u53e5\u8fd4\u56de\u7c7b\u578b\u4e3a ResultSet \u5bf9\u8c61\u3002 - executeUpdate()\uff1a\u6267\u884c SQL INSERT\u3001UPDATE \u6216 DELETE \u8bed\u53e5\u8fd4\u56de\u503c\u4e3a int \u578b\uff0c\u6570\u636e\u5e93\u53d7\u5f71\u54cd\u7684\u884c\u8ba1\u6570\u3002 - \u6279\u5904\u7406\u65b9\u6cd5\uff1a\u6279\u91cf\u6267\u884c SQL \u8bed\u53e5 clearBatch()\uff1a\u6e05\u7a7a\u5386\u53f2 batch \u547d\u4ee4\uff1b addBatch(String sql)\uff1a\u6dfb\u52a0\u8981\u6267\u884c\u7684 sql\uff1b executeBatch()\uff1a\u6279\u91cf\u6267\u884c sql\u3002 PreparedStatement \u7ee7\u627f\u81ea Statement\uff0c\u5b9a\u4e49\u4e86\u5927\u91cf\u7684 setter \u65b9\u6cd5\u7528\u4e8e\u8bbe\u7f6e\u52a8\u6001 sql\u7684\u53c2\u6570\uff0c\u56e0\u6b64 PreparedStatement \u652f\u6301\u52a8\u6001\u4f20\u53c2\uff1b\u53e6\u5916 PreparedStatement \u5185\u90e8\u5b58\u50a8\u4e86\u89e3\u6790\u7684 sql\uff0c\u53ef\u4ee5\u591a\u6b21\u6267\u884c\u800c\u65e0\u9700\u91cd\u590d\u89e3\u6790\u3002PreparedStatement \u7ee7\u627f\u81ea Statement\uff0cCallableStatement \u7ee7\u627f\u81ea PreparedStatement\uff0c\u6545\u800c\u4e09\u8005\u6267\u884c SQL \u8bed\u53e5\u7684\u65b9\u5f0f\u53ef\u901a\u7528\u3002 6.5.1 \u901a\u8fc7Statement\u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c \u901a\u8fc7 Statement \u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c\u9700\u8981\u6ce8\u610f\u7684\u4e8b\u9879\uff1a - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u524d\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u8bbe\u7f6e\u4e3a FALSE\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\uff0c\u5e76\u8fdb\u884c\u624b\u52a8\u63d0\u4ea4\uff08commit\uff09\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u540e\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u6062\u590d\u4e3a TRUE\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u5f02\u5e38\u53d1\u751f\u65f6\uff0c\u8fdb\u884c rollback(\u56de\u6eda)\u3002 \u793a\u4f8b\uff1a\u901a\u8fc7 Statement \u6279\u91cf\u64cd\u4f5c\u6570\u636e try { //\u521b\u5efaStatement\u5bf9\u8c61 stm = con.createStatement(); //\u8bbe\u7f6e\u4e8b\u52a1\u975e\u81ea\u52a8\u63d0\u4ea4 con.setAutoCommit(false); // \u6dfb\u52a0\u591a\u6761SQL\u8bed\u53e5\u5230\u6279\u5904\u7406\u4e2d stm.addBatch(\"insert into student values(23,'tangbao','\u9ad8\u6570',100)\"); stm.addBatch(\"insert into student values(24,'\u738b\u5b9a','c#',98)\"); stm.addBatch(\"insert into student values(25,'\u738b\u56fd\u4e91','java',90)\"); //\u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c stm.executeBatch(); System.out.println(\"\u63d2\u5165\u6210\u529f!\"); //\u6267\u884c\u6210\u529f\u540e\u8fdb\u884c\u6570\u636e\u63d0\u4ea4 con.commit(); System.out.println(\"\u63d0\u4ea4\u6210\u529f!\"); //\u5173\u95ed\u975e\u81ea\u52a8\u63d0\u4ea4 con.setAutoCommit(true); } catch (SQLException e) { if (!con.isClosed()) { con.rollback(); //\u51fa\u73b0\u5f02\u5e38\uff0c\u56de\u6eda\u4e8b\u52a1 System.out.println(\"\u63d0\u4ea4\u5931\u8d25\uff0c\u56de\u6eda\uff01\"); con.setAutoCommit(true); //\u5173\u95ed\u975e\u81ea\u52a8\u63d0\u4ea4 } } finally { if (stmt != null) { //\u5173\u95ed\u64cd\u4f5c\u5bf9\u8c61 stmt.close(); } } 6.5.2 \u901a\u8fc7PreparedStatement\u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c \u901a\u8fc7 PreparedStatement \u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c\u9700\u8981\u6ce8\u610f\u7684\u4e8b\u9879\uff1a - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u524d\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u8bbe\u7f6e\u4e3a FALSE\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\uff0c\u5e76\u8fdb\u884c\u624b\u52a8\u63d0\u4ea4\uff08commit\uff09\uff0c\u6570\u636e\u91cf\u5927\u65f6\uff0c\u8bbe\u7f6e\u624b\u52a8\u63d0\u4ea4\u95f4\u9694\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u540e\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u6062\u590d\u4e3a TRUE\uff1b \u2022 \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u5f02\u5e38\u53d1\u751f\u65f6\uff0c\u8fdb\u884c rollback(\u56de\u6eda)\uff1b - PreparedStatement \u6267\u884c\u8bed\u53e5\u4e0d\u80fd\u4e3a DDL \u8bed\u53e5\u3002 \u793a\u4f8b\uff1a\u5c06 10000 \u6761\u8bb0\u5f55\u63d2\u5165\u6570\u636e\u5e93\u4e2d\uff0c\u6bcf 100 \u6761\u6267\u884c\u4e00\u6b21\u63d0\u4ea4\u64cd\u4f5c try{ conn.setAutoCommit(false); //\u8bbe\u7f6e\u975e\u81ea\u52a8\u63d0\u4ea4 //\u521b\u5efaPreparedStatement\u5bf9\u8c61 ps = conn.prepareStatement(\"insert into testtab values (?, ?, ?)\"); //\u5faa\u73af\u6dfb\u52a0\u6279\u5904\u7406\u6570\u636e for(int i = 0;i<list.size();i++){ HashMap map = list.get(i);//list\u4e3a\u6570\u636e\u5c01\u88c5\uff0c\u6b64\u5904\u7565 ps.setString(1, map.get(\"id\").toString()); ps.setString(2, map.get(\"name\").toString()); ps.setString(3, map.get(\"age\").toString()); ps.addBatch(); if(mod(i,100)==0){//\u6bcf100\u6761\u6267\u884c\u4e00\u6b21\u6267\u884c\u64cd\u4f5c ps.executeBatch();//\u6267\u884c\u6279\u91cf\u63d2\u5165 conn.commit();//\u6267\u884c\u4e8b\u52a1\u63d0\u4ea4 } } ps.executeBatch();//\u6267\u884c\u6279\u91cf\u63d2\u5165 conn.commit(); //\u63d0\u4ea4\u4e8b\u52a1 }catch(Exception e){ if (!conn.isClosed()) { conn.rollback(); //\u51fa\u73b0\u5f02\u5e38\uff0c\u56de\u6eda\u4e8b\u52a1 System.out.println(\"\u63d0\u4ea4\u5931\u8d25\uff0c\u56de\u6eda\uff01\"); conn.setAutoCommit(true); //\u5173\u95ed\u975e\u81ea\u52a8\u63d0\u4ea4 } } finally { if (ps!= null) { ps.close();//\u5173\u95ed\u64cd\u4f5c\u5bf9\u8c61 } } 6.5.3 CallableStatement\u7ed1\u5b9a\u53c2\u6570 CallableStatement \u5b58\u5728\u4e09\u79cd\u7c7b\u578b\u7684\u53c2\u6570 IN\u3001OUT \u548c INOUT\u3002 - IN\uff1a\u521b\u5efa SQL \u8bed\u53e5\u65f6\u5176\u53c2\u6570\u503c\u672a\u77e5\u3002\u4f7f\u7528 setXXX() \u65b9\u6cd5\u5c06\u503c\u7ed1\u5b9a\u5230 IN \u53c2\u6570\u3002 - OUT\uff1a\u7531 SQL \u8bed\u53e5\u8fd4\u56de\u7684\u53c2\u6570\u503c\u3002\u53ef\u4ee5\u4f7f\u7528 getXXX() \u65b9\u6cd5\u4ece OUT \u53c2\u6570\u4e2d\u68c0\u7d22\u503c\u3002 - INOUT\uff1a\u63d0\u4f9b\u8f93\u5165\u548c\u8f93\u51fa\u503c\u7684\u53c2\u6570\u3002\u4f7f\u7528 setXXX() \u65b9\u6cd5\u7ed1\u5b9a\u53d8\u91cf\u5e76\u4f7f\u7528getXXX() \u65b9\u6cd5\u68c0\u7d22\u503c\u3002 \u793a\u4f8b 1\uff1a\u901a\u8fc7\u53c2\u6570\u4e0b\u6807\u7ed1\u5b9a\u53c2\u6570 //\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\u8bed\u53e5 String sql =\"{call pro_2(?,?,?)}\"; //\u521b\u5efaCallableStatement\u5bf9\u8c61 CallableStatement cstm = conn.prepareCall(sql); //\u901a\u8fc7\u53c2\u6570\u4e0b\u6807\u8bbe\u7f6e\u53c2\u6570(IN\u53c2\u6570) cstm.setInt(1, 20490); //\u6ce8\u518cOUT\u53c2\u6570\u6570\u636e\u7c7b\u578b cstm.registerOutParameter(2, com.xugu.cloudjdbc.Types.VARCHAR); cstm.registerOutParameter(3, com.xugu.cloudjdbc.Types.VARCHAR); //\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528 cstm.execute(); //\u83b7\u53d6\u5b58\u50a8\u8fc7\u7a0b\u8f93\u51fa\u53c2\u6570 String name = (String)cstm.getObject(2); String address = (String)cstm.getObject(3); \u793a\u4f8b 2\uff1a\u901a\u8fc7\u53c2\u6570\u540d\u7ed1\u5b9a\u53c2\u6570 //\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\u8bed\u53e5 CallableStatement pstm = conn.prepareCall(\"insert into tt1 values(:id,:name)\"); //\u901a\u8fc7\u53c2\u6570\u540d\u8bbe\u7f6e\u53c2\u6570(IN\u53c2\u6570) pstm.setInt(\"id\", 1); pstm.setString(\"name\", \"cloud\"); //\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528 pstm.execute(); 6.6 \u5904\u7406\u6267\u884c\u7ed3\u679c ResultSet \u7c7b\u662f\u901a\u8fc7 Statement \u53ca\u5176\u5b50\u7c7b\u6267\u884c SQL \u67e5\u8be2\u8bed\u53e5\u5f97\u5230\u7684\u7ed3\u679c\u96c6\u3002ResultSet \u7c7b\u5305\u542b\u4e09\u4e2a\u91cd\u8981\u5c5e\u6027\uff1aResultSet \u5bf9\u8c61\u5e76\u53d1\u6a21\u5f0f\u3001ResultSet \u5bf9\u8c61\u5149\u6807\u5904\u7406\u65b9\u5411\u3001ResultSet \u5bf9\u8c61\u5149\u6807\u7c7b\u578b\u3002ResultSet \u7c7b\u5177\u6709\u6307\u5411\u5f53\u524d\u7ed3\u679c\u96c6\u6570\u636e\u884c\u4f4d\u7f6e\u5149\u6807\uff0c\u5149\u6807\u4f4d\u7f6e\u521d\u59cb\u88ab\u7f6e\u4e8e\u7b2c\u4e00\u884c\u4e4b\u524d\uff0c\u901a\u8fc7 ResultSet \u7c7b\u5c01\u88c5\u7684\u5149\u6807\u79fb\u52a8\u65b9\u6cd5\u5b9e\u73b0\u5bf9\u5149\u6807\u4f4d\u7f6e\u7684\u63a7\u5236\uff0c\u5f53 ResultSet \u5bf9\u8c61\u7684\u5149\u6807\u79fb\u81f3\u6570\u636e\u7ed3\u679c\u96c6\u672b\u5c3e\u65f6 (\u4e0b\u4e00\u884c\u65e0\u6570\u636e)\uff0c\u8fd4\u56de FALSE\u3002 \u5728\u865a\u8c37 JDBC \u4e2d\uff0cResultSet \u7c7b\u5206\u4e3a\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u548c\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\uff08\u901a\u8fc7 URL \u8fde\u63a5\u4e32\u53c2\u6570 recv_mode \u914d\u7f6e\uff09\u3002\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u9ed8\u8ba4\u5c5e\u6027\u4e3a\u4e0d\u53ef\u66f4\u65b0\u3001\u5411\u524d\u79fb\u52a8\u3001\u53ef\u4ee5\u6eda\u52a8\uff1b\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u9ed8\u8ba4\u5c5e\u6027\u4e3a\u4e0d\u53ef\u66f4\u65b0\u3001\u53ea\u5411\u524d\u79fb\u52a8\u3001\u4e0d\u53ef\u6eda\u52a8\u3002 Statement \u5bf9\u8c61\u6267\u884c SQL \u8bed\u53e5\u8fd4\u56de\u7ed3\u679c\u96c6\u4ec5\u80fd\u662f\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\uff0c\u800c PreparedStatement \u5bf9\u8c61\u6267\u884c SQL \u8bed\u53e5\u8fd4\u56de\u7ed3\u679c\u96c6\u53ef\u4e3a\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u6216\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u3002 \u5f53\u6267\u884c SQL \u8fd4\u56de\u6570\u636e\u7ed3\u679c\u96c6\u8f83\u5927\u65f6\uff0c\u5efa\u8bae\u4f7f\u7528\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\uff0c\u907f\u514d JVM \u7684\u6ea2\u51fa\u3002 {.is-info} 6.6.1 \u66f4\u65b0ResultSet\u7ed3\u679c\u96c6 \u521b\u5efa Statement \u5bf9\u8c61\u65f6\uff0c\u8bbe\u7f6e Statement \u5c5e\u6027 RresultSetConcurrency \u4e3a ResultSet.CONCUR_UPDATABLE\uff0c\u5e76\u4e14\u6570\u636e\u5e93 URL \u8fde\u63a5\u4e32\u5c5e\u6027 return_rowid \u8bbe\u7f6e\u4e3a TRUE\u65f6\uff0cStatement \u5bf9\u8c61\u6267\u884c SQL \u8bed\u53e5\u8fd4\u56de\u7684 ResultSet \u7ed3\u679c\u96c6\u624d\u80fd\u88ab\u66f4\u65b0\u3002\u5f53 ResultSet \u5bf9\u8c61\u4e3a\u53ef\u66f4\u65b0\u7ed3\u679c\u96c6\u65f6\uff0c\u5c06\u5149\u6807\u79fb\u81f3\u63d2\u5165\u4f4d\u7f6e\uff0c\u53ef\u8c03\u7528 ResultSet \u7c7b\u5bf9\u5e94\u7684 update \u65b9\u6cd5\u4fee\u6539\u7ed3\u679c\u96c6\u4e2d\u884c\u6570\u636e\uff0c\u5e76\u901a\u8fc7 updateRow \u65b9\u6cd5\u5c06\u66f4\u6539\u6570\u636e\u66f4\u65b0\u5230\u6570\u636e\u5e93\u4e2d\u3002 \u793a\u4f8b\uff1a\u901a\u8fc7\u4fee\u6539\u7ed3\u679c\u96c6\u4e2d\u6570\u636e\u503c\u66f4\u6539\u6570\u636e\u5e93\u4e2d\u5bf9\u5e94\u8bb0\u5f55 //\u521b\u5efaStatement\u5bf9\u8c61\u5e76\u8bbe\u7f6e\u7ed3\u679c\u96c6\u5c5e\u6027\u4e3a\u53ef\u66f4\u65b0 Statement stm = conn.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_UPDATABLE); //\u6267\u884cSQL\u8bed\u53e5 ResultSet rs = stm.executeQuery(sql); //\u7ed3\u679c\u96c6\u904d\u5386 while(rs.next()) { //\u66f4\u65b0\u7ed3\u679c\u96c6\u4e2d\u6307\u5b9a\u5217\u6570\u636e rs.updateLong(1, 5); //\u66f4\u65b0\u7ed3\u679c\u96c6\u4e2d\u6307\u5b9a\u5217\u6570\u636e rs.updateFloat(3, 12.3f); //\u7ed3\u679c\u96c6\u53d8\u66f4\u56de\u5199\u5165\u6570\u636e\u5e93 rs.updateRow(); } \u901a\u8fc7\u8c03\u7528 ResultSet \u7c7b\u7684 next()\u3001previous()\u3001absolute(int) \u65b9\u6cd5\u79fb\u52a8\u5149\u6807\u4f4d\u7f6e\uff0c\u5c06\u5149\u6807\u4f4d\u7f6e\u79fb\u52a8\u5230\u6307\u5b9a\u6570\u636e\u884c\uff0c\u901a\u8fc7 ResultSet \u7c7b\u5bf9\u5e94\u7684 get \u65b9\u6cd5\u83b7\u53d6\u884c\u6570\u636e\u3002 \u5982\u4f7f\u7528\u7ed3\u679c\u96c6\u66f4\u65b0\u6570\u636e\u5e93\u6570\u636e\uff0c\u9700\u5728\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65f6\uff0c\u8bbe\u7f6e\u8fde\u63a5\u5c5e\u6027 return_rowid \u4e3aTRUE\uff0c\u4e14\u5728\u751f\u6210\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61\u65f6\uff0c\u5e76\u53d1\u5c5e\u6027\u6307\u5b9a\u4e3a ResultSet.CONCUR_UPDATABLE\u3002 {.is-info} 6.6.2 \u901a\u8fc7\u79fb\u52a8\u5149\u6807\u83b7\u53d6\u7ed3\u679c\u96c6\u6761\u6570 \u793a\u4f8b 1\uff1a \u7edf\u8ba1\u7ed3\u679c\u96c6\u603b\u6761\u6570 //\u521b\u5efaStatement\u5bf9\u8c61 Statement stm= conn.createStatement(); stm.execute(\"create table test(id int identity(1,1));insert into test values(default)\"); //\u6267\u884c\u7ed3\u679c\u96c6\u67e5\u8be2 ResultSet rs = stm.executeQuery(\"select * from test\") //\u79fb\u52a8\u5149\u6807\u81f3\u7ed3\u679c\u96c6\u672b\u5c3e rs.last(); //\u83b7\u53d6\u7ed3\u679c\u96c6\u884c\u6570 int rsCounts = rs.getRow(); 6.6.3 \u591a\u7ed3\u679c\u96c6\u5904\u7406 \u865a\u8c37 JDBC \u652f\u6301\u591a\u7ed3\u679c\u96c6\u5904\u7406\uff0c\u5141\u8bb8 Statement \u63a5\u53e3\u652f\u6301\u591a\u91cd\u6253\u5f00\u7684 ResultSet \u5bf9\u8c61\u3002\u6267\u884c\u8bed\u53e5\u53ef\u4ee5\u662f\u591a\u6761 SQL \u8bed\u53e5\u7684\u96c6\u5408\uff0c\u5373\u4e00\u6b21\u6027\u5411\u865a\u8c37\u670d\u52a1\u5668\u53d1\u9001\u591a\u6761 SQL \u8bed\u53e5\uff0c\u865a\u8c37\u670d\u52a1\u5668\u6267\u884c\u5b8c SQL \u8bed\u53e5\u540e\u8fd4\u56de\u591a\u4e2a\u6267\u884c\u7ed3\u679c\uff1b\u4ea6\u6216\u5b58\u50a8\u8fc7\u7a0b\u5b9a\u4e49\u6709\u591a\u4e2a\u8fd4\u56de\u7ed3\u679c\u96c6\u3002\u865a\u8c37 JDBC \u7684 Statement \u91cd\u8f7d\u4e86 Statement \u63a5\u53e3\u4e2d\u7684 getMoreResults() \u65b9\u6cd5\u3002 \u793a\u4f8b\uff1a\u591a\u7ed3\u679c\u96c6\u5904\u7406 //SQL\u8bed\u53e5\u5305\u542b\u591a\u6761\u67e5\u8be2\u547d\u4ee4 String sql=\" SELECT * FROM A1 WHERE D2=(SELECT AVG(D2) FROM A1 GROUP BY D1);SELECT * FROM A1 WHERE D2>(SELECT MIN(D2) FROM A1 GROUP BY D1)\"; //\u521b\u5efaStatement\u5bf9\u8c61 Statement stm = conn.createStatement(); //\u6267\u884cSQL\u8bed\u53e5 boolean f = stm.execute(sql); //\u5224\u65ad\u662f\u5426\u6709ResultSet\u5bf9\u8c61\u4ea7\u751f if(f == true){ //\u83b7\u53d6\u7ed3\u679c\u96c6\u5bf9\u8c61 ResultSet rs1 = stm.getResultSet(); ... ... ... ... } while(true) { //\u5224\u65adStatement\u662f\u5426\u8fd4\u56de\u4e86\u591a\u4e2aResultSet\u5bf9\u8c61 if(!stm.getMoreResults(Statement.CLOSE_CURRENT_RESULT)){ break; } else if((rs2 = cstm.getResultSet())!=null) { ... ... ... ...//\u6570\u636e\u5904\u7406\u90e8\u5206\u7701\u7565 } } 6.6.4 \u670d\u52a1\u5668\u7aef\u6e38\u6807\u4f7f\u7528 \u865a\u8c37JDBC\u4e2d\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u751f\u6210\u9700\u6ee1\u8db3\u4e24\u4e2a\u6761\u4ef6\uff1aURL\u8fde\u63a5\u4e32\u5c5e\u6027recv_mode\u503c\u4e3a2\uff0cStatement\u5bf9\u8c61\u6267\u884cSQL\u8bed\u53e5\u4e3a\u5355\u6761SELECT\u8bed\u53e5\u3002 \u5e94\u7528\u7a0b\u5e8f\u7aef\u901a\u8fc7Statement\u7c7b\u7684setFetchSize(int)\u65b9\u6cd5\u6216ResultSet\u7c7b\u7684setFetchSize(int)\u65b9\u6cd5\u8bbe\u7f6e\u6bcf\u6b21\u4ece\u670d\u52a1\u5668\u7aef\u83b7\u53d6\u591a\u5c11\u6761\u6570\u636e\u3002 \u4f7f\u7528\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7684 ResultSet \u5bf9\u8c61\uff0c\u5149\u6807\u53ea\u80fd\u5355\u5411\u5411\u524d\u6b63\u5411\u79fb\u52a8\uff0c\u4e0d\u80fd\u5411\u540e\u79fb\u52a8\u6216\u6765\u56de\u6eda\u52a8\u3002 {.is-info} \u793a\u4f8b\uff1a\u865a\u8c37\u6570\u636e\u5e93\u670d\u52a1\u5668\u7aef\u6e38\u6807\u4f7f\u7528 //\u521b\u5efa\u865a\u8c37JDBC\u7279\u6709Statement\u5bf9\u8c61 Statement stm = (com.xugu.cloudjdbc.Statement)conn.createStatement(); //\u5f00\u542f\u670d\u52a1\u5668\u7aef\u6e38\u6807 stm.setServerCursor(true); //\u8bbe\u7f6e\u670d\u52a1\u5668\u7aef\u6e38\u6807\u5355\u6b21\u8fd4\u56de\u6570\u636e\u6761\u6570 stm.setFetchSize(1000); //\u6267\u884cSQL\u8bed\u53e5 ResultSet rs = stm.executeQuery(\"select * from t1\"); //\u904d\u5386\u6570\u636e while\uff08rs.next()\uff09 { ... ... ... ... } //\u5173\u95ed\u670d\u52a1\u5668\u7aef\u6e38\u6807 stm.setServerCursor(false); 6.6.5 \u68c0\u7d22\u81ea\u52a8\u4ea7\u751f\u7684\u5173\u952e\u5b57GeneratedKeys JDBC 3.0 \u89c4\u8303\u4e2d\u5bf9\u4e8e\u81ea\u52a8\u4ea7\u751f\u7684\u5173\u952e\u5b57\u6570\u503c\uff0c\u5b9a\u4e49\u4e86\u63a5\u53e3\u89c4\u8303\uff0c\u5373\uff1agetGeneratedKeys() \u65b9\u6cd5\u3002 \u4e3a\u4e86\u89e3\u51b3\u5bf9\u83b7\u53d6\u81ea\u52a8\u4ea7\u751f\u7684\u6216\u81ea\u52a8\u589e\u52a0\u7684\u5173\u952e\u5b57\u7684\u503c\u7684\u9700\u6c42\uff0c\u865a\u8c37 JDBC \u6839\u636e JDBC3.0 \u89c4\u8303\u63d0\u4f9b\u4e86\u83b7\u5f97\u5173\u952e\u5b57\u503c\u7684\u65b9\u6cd5\u3002\u83b7\u53d6\u5173\u952e\u5b57\u7684\u503c\uff0c\u9700\u8981\u5728\u6267\u884c\u65b9\u6cd5\u4e2d\u6307\u5b9a\u81ea\u589e\u5173\u952e\u5b57\u6807\u8bb0\u3002SQL \u8bed\u53e5\u6267\u884c\u5b8c\u540e\uff0c\u8c03\u7528 Statement \u5bf9\u8c61\u7684 getGeneratedKeys() \u65b9\u6cd5\uff0c\u83b7\u5f97\u5305\u542b\u81ea\u589e\u957f\u503c\u7684 ResultSet \u5bf9\u8c61\u3002 \u793a\u4f8b\uff1a\u83b7\u53d6\u6570\u636e\u5e93\u81ea\u589e\u957f\u5173\u952e\u5b57\u7684\u503c //\u521b\u5efaStatement\u5bf9\u8c61 Statement stmt = conn.createStatement(); //\u6307\u5b9a\u81ea\u589e\u957f\u5173\u952e\u5b57\u7684\u6807\u8bc6 String[] colN = {\"id\"}; //\u5728\u6267\u884c\u65b9\u6cd5\u4e2d\u5f15\u5165\u81ea\u589e\u957f\u5173\u952e\u5b57\u6807\u8bc6 stmt.executeUpdate(\"INSERT INTO authors(first_name, last_name) VALUES (\u2018Ghq\u2019, \u2018Wxl\u2019)\",colN); //\u83b7\u53d6\u7ed3\u679c\u96c6 ResultSet rs = stmt.getGeneratedKeys(); if ( rs.next() ) { //\u83b7\u53d6\u7ed3\u679c\u96c6\u4e2d\u7684\u81ea\u589e\u957f\u503c \u3000\u3000 int key = rs.getInt(); } 6.7 \u91ca\u653e\u8d44\u6e90 \u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u56e0\u5904\u7406\u9700\u8981\u6240\u5efa\u7acb\u7684 ResultSet\u3001Statement\u3001PreparedStatement \u7b49\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61\uff0c\u5728\u4f7f\u7528\u5b8c\u540e\u5fc5\u987b\u5173\u95ed\u3002\u5173\u95ed\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61\uff0c\u76f4\u63a5\u8c03\u7528\u5bf9\u5e94\u7684\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61 close() \u65b9\u6cd5\u5373\u53ef\u3002 \u5f53\u4e0d\u518d\u9700\u8981\u548c\u865a\u8c37\u6570\u636e\u5e93\u8fdb\u884c\u4ea4\u4e92\u65f6\uff0c\u9700\u65ad\u5f00\u6570\u636e\u5e93\u8fde\u63a5\u3002\u8c03\u7528 Connection \u7c7b\u7684 close() \u65b9\u6cd5\u5373\u4f1a\u5173\u95ed\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u540c\u65f6\u91ca\u653e\u8fde\u63a5\u4e0a\u6240\u6301\u6709\u7684\u6240\u6709\u6570\u636e\u5e93\u8d44\u6e90\u3002 \u6570\u636e\u5e93\u8fde\u63a5\u4e3a\u975e\u81ea\u52a8\u63d0\u4ea4\u65f6\uff0c\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61\u5728\u4f7f\u7528\u5b8c\u540e\uff0c\u82e5\u672a\u53ca\u65f6\u5173\u95ed\uff0c\u6b64\u65f6\u8fdb\u884c DDL \u64cd\u4f5c\u5c06\u4f1a\u5bfc\u81f4\u865a\u8c37\u6570\u636e\u5e93\u52a0\u9501\u8d85\u65f6\u6216\u5931\u8d25\u3002 {.is-info} \u4e03. \u5927\u5bf9\u8c61\u7c7b\u578b\u5904\u7406 JDBC 3.0 \u89c4\u8303\u5b9a\u4e49\u6709 java.sql.Blob \u4e0e java.sql.Clob \u63a5\u53e3\uff0c\u6b64\u4e24\u7c7b\u63a5\u53e3\u4e3a\u6570\u636e\u5e93\u5927\u5bf9\u8c61\u6570\u636e\u5904\u7406\u63a5\u53e3\u3002\u865a\u8c37\u6570\u636e\u5e93\u5927\u5bf9\u8c61\u5b57\u6bb5\u7c7b\u578b\u5305\u542b\uff1ablob\u3001clob\u3001binary\u3002 \u5728\u865a\u8c37 JDBC \u4e2d\uff0c\u83b7\u53d6\u5927\u5bf9\u8c61\u6570\u636e\u6709\u4e24\u79cd\u8fd4\u56de\u65b9\u5f0f\uff1a\u4e00\u79cd\u662f\u6570\u636e\u76f4\u63a5\u8fd4\u56de\uff1b\u53e6\u4e00\u79cd\u662f\u8fd4\u56de\u63cf\u8ff0\u7b26\u65b9\u5f0f\u3002\u5f53\u8fd4\u56de\u6570\u636e\u4e2d\u5927\u5bf9\u8c61\u6570\u636e\u8f83\u591a\u65f6\uff0c\u5efa\u8bae\u4f7f\u7528\u8fd4\u56de\u63cf\u8ff0\u7b26\u65b9\u5f0f\uff0c\u4ece\u800c\u907f\u514d\u56e0\u6570\u636e\u8fc7\u591a\u8fc7\u5927\u9020\u6210\u7684 JVM \u5185\u5b58\u6ea2\u51fa\u3002\u865a\u8c37 JDBC \u9a71\u52a8\u542f\u7528\u5927\u5bf9\u8c61\u8fd4\u56de\u63cf\u8ff0\u7b26\u65b9\u5f0f\uff0c\u9700\u5728\u8fde\u63a5 URL \u4e32\u4e0a\u914d\u7f6e\u5c5e\u6027 lob_ret \u4e3a descriptor \u3002 7.1 \u5411\u8868\u4e2d\u63d2\u5165\u5927\u5bf9\u8c61 LOB \u5bf9\u8c61\u7684\u63d2\u5165\u5fc5\u987b\u901a\u8fc7 PreparedStatement\u3001CallableStatement \u7c7b\u7684 setXXX() \u65b9\u6cd5\u65b9\u5f0f\u5b9e\u73b0\u3002\u865a\u8c37 JDBC \u4e2d PreparedStatement \u63d0\u4f9b\u591a\u79cd\u65b9\u6cd5\u8bbe\u7f6e\u5927\u5bf9\u8c61\u53c2\u6570\u503c\uff0c\u5982\u4e0b\u5217\u65b9\u6cd5\uff1a setBinaryStream(int parameterIndex,InputStream x) setBlob(int parameterIndex, Blob x) setBlob(int parameterIndex, InputStream x) setBytes(int parameterIndex,byte[] x) setCharacterStream(int parameterIndex, Reader reader) setClob(int parameterIndex, Clob x) setClob(int parameterIndex, Reader reader) setString(int parameterIndex, String x) \u793a\u4f8b\uff1a\u5e94\u7528\u7a0b\u5e8f\u63d2\u5165\u5927\u5bf9\u8c61\u6570\u636e\uff0c\u5176\u4e2d\u8868 b1 \u5b57\u6bb5 photo \u4e3a blob \u7c7b\u578b\uff0c\u5b57\u6bb5 text \u4e3a clob \u7c7b\u578b PreparedStatement ps = conn.prepareStatement(\"INSERT INTO b1 VALUES (?, ?)\")\u037e // blobBytes is a byte[] type ps.setBlob(1, new com.xugu.cloudjdbc.Blob(blobBytes))\u037e // clobString is a String type ps.setClob(2, new com.xugu.cloudjdbc.Clob(clobString))\u037e ps.execute()\uff1b 7.2 \u67e5\u8be2\u5927\u5bf9\u8c61\u6570\u636e \u901a\u8fc7\u865a\u8c37 JDBC \u83b7\u53d6\u5927\u5bf9\u8c61\u503c\uff0c\u6570\u636e\u5e93 CLOB \u5bf9\u8c61\u53ef\u901a\u8fc7\u5b57\u7b26\u4e32\u5f62\u5f0f\u6216\u6d41\u5f0f\u6570\u636e\u5f62\u5f0f\u83b7\u53d6\uff0c\u6570\u636e\u5e93 BLOB \u5bf9\u8c61\u53ea\u901a\u8fc7\u6d41\u5f0f\u6570\u636e\u5f62\u5f0f\u83b7\u53d6\u3002 \u793a\u4f8b 1\uff1a\u6d41\u5f0f\u83b7\u53d6 CLOB \u5bf9\u8c61 Statement stm = xgConn.createStatement(); String sql=\u201dselect remark from t_clob where id=101\u201d; ResultSet rs = stm.executeQuery(sql); while(rs.next) { Clob data = rs.getClob(\"remark \"); //\u4ee5\u5b57\u7b26\u6d41\u65b9\u5f0f\u83b7\u53d6\u6570\u636e Reader rd = data.getCharacterStream(); char[] sc = new char[1000]; StringBuffer sb = new StringBuffer(); int len = 0; while((len=rd.read(sc)) !=-1) { sb.append(new String(sc,0,len)); } System.out.println(sb.toString()); } \u793a\u4f8b 2\uff1a\u865a\u8c37 JDBC \u5141\u8bb8\u4ee5\u5b57\u7b26\u4e32\u7684\u5f62\u5f0f\u8bfb\u53d6 CLOB \u5bf9\u8c61 String sql=\"select text from t_clob\"\u037e Statement stm=conn.createStatement()\u037e ResultSet rs=stm.executeQuery(sql)\u037e while(rs.next()) { String clobStr =rs.getString(\"text\")\u037e } \u516b. \u865a\u8c37\u6570\u636e\u5e93\u8d1f\u8f7d\u5747\u8861 \u865a\u8c37\u6570\u636e\u5e93\u662f\u4e00\u6b3e\u5177\u5907\u9ad8\u5b89\u5168\u3001\u9ad8\u6027\u80fd\u3001\u9ad8\u6269\u5c55\u7b49\u7279\u6027\u7684\u3001\u57fa\u4e8e\u5206\u5e03\u5f0f\u67b6\u6784\u7684\u5206\u5e03\u5f0f\u4e8b\u52a1\u578b\u6570\u636e\u5e93\u3002\u90e8\u7f72\u6570\u636e\u5e93\u96c6\u7fa4\u65f6\uff0c\u591a\u53f0\u670d\u52a1\u5668\u4f5c\u4e3a\u4e00\u4e2a\u6574\u4f53\u5bf9\u5916\u63d0\u4f9b\u6570\u636e\u670d\u52a1\u3002\u5728\u591a\u673a\u73af\u5883\u4e0b\uff0c\u4e3a\u4f7f\u6570\u636e\u5e93\u8fde\u63a5\u5747\u5300\u5206\u5e03\u4e8e\u5404\u53f0\u670d\u52a1\uff0c\u865a\u8c37 JDBC \u5728\u63a5\u53e3\u5c42\u5b9e\u73b0\u4e86\u57fa\u4e8e\u8f6f\u8d1f\u8f7d\u5747\u8861\u6280\u672f\u7684\u6570\u636e\u5e93\u8fde\u63a5\u5efa\u7acb\u65b9\u5f0f\u3002 \u865a\u8c37\u6570\u636e\u5e93\u8d1f\u8f7d\u5747\u8861\u5206\u914d\u6570\u636e\u5e93\u8fde\u63a5\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a\u987a\u5e8f\u5206\u914d\u3001\u968f\u673a\u5206\u914d\u3002\u901a\u8fc7\u5728\u6570\u636e\u5e93 URL \u8fde\u63a5\u4e32\u4e0a\u8bbe\u7f6e\u53c2\u6570 conn_type(conn_type:1, \u968f\u673a\u5206\u914d\uff1b2, \u987a\u5e8f\u5206\u914d) \u7c7b\u578b\uff0c\u5b9e\u73b0\u6570\u636e\u5e93\u8fde\u63a5\u5728\u591a\u96c6\u7fa4\u73af\u5883\u4e0b\u7684\u8d1f\u8f7d\u5747\u8861\u3002\u9ed8\u8ba4\u8d1f\u8f7d\u5747\u8861\u5206\u914d\u65b9\u5f0f\uff1a\u987a\u5e8f\u5206\u914d\u3002 \u865a\u8c37 JDBC \u63d0\u4f9b\u4e09\u79cd\u914d\u7f6e\u8d1f\u8f7d\u5747\u8861\u7684\u65b9\u5f0f\uff1a\u6570\u636e\u5e93 URL \u8fde\u63a5\u4e32\u914d\u7f6e\u3001\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u6027\u6587\u4ef6 Properties \u914d\u7f6e\u3001\u6570\u636e\u5e93\u8fde\u63a5 XML \u6587\u4ef6\u914d\u7f6e\u3002 1. URL \u8fde\u63a5\u4e32\u914d\u7f6e Class.forName(\"com.xugu.cloudjdbc.Driver\"); //URL\u8fde\u63a5\u4e32\u4e2d\u4f7f\u7528ips\u5c5e\u6027\u914d\u7f6e\u591aIP\u8d1f\u8f7d\u5747\u8861 Connection conn = DriverManager.getConnection(\"jdbc:xugu://192.168.0.201:5138/SYSTEM?user=SYSDBA&password=SYSDBA&conn_type=1&ips=192.168.0.205,192.168.0.204,192.168.1.206\") \u8fde\u63a5\u5c5e\u6027\u6587\u4ef6 Properties \u914d\u7f6e (Vector \u6216\u5b57\u7b26\u4e32\u6570\u7ec4) Properties info=new Properties(); Class.forName(\"com.xugu.cloudjdbc.Driver\"); //Vector\u7ed3\u6784\u5b58\u653e\u8d1f\u8f7d\u5747\u8861\u591aIP\u5730\u5740\u65b9\u5f0f Vector<String> ipsVector=new Vector<String>(); ipsVector.add(\"192.168.1.201\"); ipsVector.add(\"192.168.1.204\"); ipsVector.add(\"192.168.1.205\"); ipsVector.add(\"192.168.1.206\"); info.put(\"ips\", ipsVector); //\u6570\u7ec4\u5b58\u653e\u8d1f\u8f7d\u5747\u8861\u591aIP\u5730\u5740\u65b9\u5f0f String[] ips={\"192.168.1.205\",\"192.168.1.204\",\"192.168.1.206\"}; info.put(\"ips\", ips); Connection conn = DriverManager.getConnection(\"jdbc:xugu://192.168.1.201:5138/SYSTEM?user=SYSDBA&password=SYSDBA&conn_type=2\",info); \u8fde\u63a5\u5c5e\u6027 XML \u6587\u4ef6\u914d\u7f6e <?xml version=\"1.0\" encoding=\"utf-8\"?> <listeners> <listener> <ip>192.168.1.206</ip> </listener> <listener> <ip>192.168.1.204</ip> </listener> <listener> <ip>192.168.1.205</ip> </listener> </listeners> Class.forName(\"com.xugu.cloudjdbc.Driver\"); Connection conn = DriverManager.getConnection(\"jdbc:xugu:file://xuguClouldListener.xml:5138/SYSTEM?user=SYSDBA&password=SYSDBA&conn_type=1\");","title":"JDBC9"},{"location":"JDBC9/#jdbc","text":"Java \u6570\u636e\u5e93\u8fde\u63a5\uff08Java Database Connectivity\uff0c\u7b80\u79f0 JDBC\uff09\u662f Java \u8bed\u8a00\u4e2d\u7528\u6765\u89c4\u8303\u5ba2\u6237\u7aef\u7a0b\u5e8f\u5982\u4f55\u8bbf\u95ee\u6570\u636e\u5e93\u7684\u5e94\u7528\u7a0b\u5e8f\u63a5\u53e3\uff0c\u63d0\u4f9b\u4e86\u8bf8\u5982\u67e5\u8be2\u548c\u66f4\u65b0\u6570\u636e\u5e93\u4e2d\u6570\u636e\u7684\u65b9\u6cd5\uff0c\u53ef\u4ee5\u4e3a\u591a\u79cd\u5173\u7cfb\u6570\u636e\u5e93\u63d0\u4f9b\u7edf\u4e00\u8bbf\u95ee\u3002JDBC \u63d0\u4f9b\u4e86\u4e00\u79cd\u57fa\u51c6\uff0c\u901a\u8fc7\u6b64\u57fa\u51c6\u6570\u636e\u5e93\u5f00\u53d1\u4eba\u5458\u53ef\u6784\u5efa\u66f4\u9ad8\u7ea7\u7684\u5de5\u5177\u548c\u63a5\u53e3\uff0c\u4e5f\u53ef\u901a\u8fc7\u6b64\u57fa\u51c6\u7f16\u5199\u6570\u636e\u5e93\u5e94\u7528\u7a0b\u5e8f\u3002 \u865a\u8c37\u6570\u636e\u5e93\u7684 JDBC \u9a71\u52a8\u7a0b\u5e8f\uff08\u4ee5\u4e0b\u7b80\u79f0\uff1a\u865a\u8c37 JDBC\uff09\u5b9e\u73b0\u4e86 Java \u7a0b\u5e8f\u548c\u865a\u8c37\u6570\u636e\u5e93\u901a\u4fe1\uff0c\u652f\u6301 SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u7684\u8bbf\u95ee\uff0c\u540c\u65f6\u4e5f\u662f\u6784\u9020\u9ad8\u7ea7 API \u548c\u6570\u636e\u5e93\u5f00\u53d1\u5de5\u5177\u7684\u57fa\u7840\u3002 \u7528\u6237\u60f3\u8981\u5b9e\u73b0\u5bf9\u6570\u636e\u5e93\u7684\u8bbf\u95ee\uff0c\u4e00\u822c\u8981\u7ecf\u8fc7\u5982\u4e0b\u7684\u6b65\u9aa4\uff1a 1. \u901a\u8fc7\u9a71\u52a8\u5668\u7ba1\u7406\u5668\u83b7\u53d6\u8fde\u63a5\u63a5\u53e3\uff1b 2. \u83b7\u5f97 Statement \u6216 Statement \u5b50\u7c7b\uff1b 3. \u901a\u8fc7 Statement \u6267\u884c SQL \u547d\u4ee4\uff1b 4. \u5904\u7406\u6267\u884c\u7ed3\u679c\uff1b 5. \u5173\u95ed Statement\uff1b 6. \u5173\u95ed\u8fde\u63a5\u3002 JDBC \u7ed3\u6784\u56fe, \u5982\u56fe1.1\u6240\u793a\u3002 \u56fe1.1 JDBC\u7ed3\u6784\u56fe \u4f7f\u7528\u865a\u8c37 JDBC \u5b9e\u73b0\u5e94\u7528\u7a0b\u5e8f\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u4e4b\u95f4\u7684\u8fde\u63a5\u670d\u52a1\uff0c\u5e94\u7528\u7a0b\u5e8f\u6240\u5728\u8ba1\u7b97\u673a\u9700\u5df2\u5b89\u88c5 Java \u8fd0\u884c\u73af\u5883\uff08Java Runtime Environment, \u7b80\u79f0 JRE\uff09\u3002\u865a\u8c37 JDBC \u53c2\u7167 JDBC API \u5b9e\u73b0\uff0c\u652f\u6301 JDBC 3.0 \u529f\u80fd\uff0cJava \u5e94\u7528\u7a0b\u5e8f\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u4e4b\u95f4\u7684\u6240\u6709\u64cd\u4f5c\u5747\u9700\u901a\u8fc7\u865a\u8c37 JDBC \u6765\u5b8c\u6210\u3002 \u4f7f\u7528\u865a\u8c37 JDBC \u9700\u8981 JRE 1.6 \u7248\u6216\u66f4\u9ad8\u7248\u672c\u7684 Java \u8fd0\u884c\u65f6\u73af\u5883 (JRE)\u3002 {.is-info}","title":"\u4e00. \u865a\u8c37\u6570\u636e\u5e93\u7684JDBC\u9a71\u52a8\u7a0b\u5e8f\u6982\u8ff0"},{"location":"JDBC9/#jdbc_1","text":"JDBC 3.0 \u89c4\u8303\u7531 JDBC 1.0\u3001JDBC 2.0 \u884d\u751f\u800c\u6765\uff0c\u4e3b\u8981\u5305\u542b java.sql \u5305\u4ee5\u53ca javax.sql \u5305\uff0c\u6570\u636e\u5e93 JDBC \u9a71\u52a8\u5b9e\u73b0 JDBC 3.0 \u89c4\u8303\u6240\u5b9a\u4e49\u7684\u7279\u6027\u63a5\u53e3\uff0c\u5373\u53ef\u8fbe\u5230\u5bf9\u6807\u51c6 JDBC 3.0 \u89c4\u8303\u7684\u652f\u6301\u3002 \u865a\u8c37 JDBC \u57fa\u4e8e JDBC 3.0 \u89c4\u8303\u5b9e\u73b0\uff0c\u5b9e\u73b0\u63a5\u53e3\u7c7b\u6620\u5c04\uff0c\u5982\u88682.1\u6240\u793a\u3002 \u88682.1 \u865a\u8c37JDBC\u5b9e\u73b0\u63a5\u53e3\u7c7b | \u63a5\u53e3 | \u865a\u8c37JDBC\u5b9e\u73b0\u7c7b | | ---------------------------------- | ---------------------------------------- | | java.sql.Driver | com.xugu.cloudjdbc.Driver | | java.sql.Connection | com.xugu.cloudjdbc.Connection | | java.sql.Statement | com.xugu.cloudjdbc.Statement | | java.sql.PreparedStatement | com.xugu.cloudjdbc.PreparedStatement | | java.sql.CallableStatement | com.xugu.cloudjdbc.CallableStatement | | java.sql.ResultSet | com.xugu.cloudjdbc.ResultSet | | java.sql.ResultSetMetaData | com.xugu.cloudjdbc.ResultSetMetaData | | java.sql.DatabaseMetaData | com.xugu.cloudjdbc.DatabaseMetaData | | java.sql.PrameterMetaData | com.xugu.cloudjdbc.PrameterMetaData | | java.sql.Types | com.xugu.cloudjdbc.Types | | java.sql.Blob | com.xugu.cloudjdbc.Blob | | java.sql.Clob | com.xugu.cloudjdbc.Clob | | java.sql.Savepoint | com.xugu.cloudjdbc.Savepoint | | javax.sql.DataSource | com.xugu.pool.XgDataSource | | javax.sql.ConnectionPoolDataSource | com.xugu.pool.XgConnectionPoolDataSource | | javx.sql.PooledConnection | com.xugu.pool.XgPooledConnection | \u9664\u4e86\u4ee5\u4e0a\u6807\u51c6\u7c7b\u63a5\u53e3\u5916\uff0c\u865a\u8c37 JDBC \u8fd8\u6269\u5c55\u5b9e\u73b0\u4e86\u4ee5\u4e0b\u7c7b\uff1a - com.xugu.cloudjdbc.ClientInfo - com.xugu.cloudjdbc.OutParameter - com.xugu.cloudjdbc.Rowid - com.xugu.cloudjdbc.SQLXml - com.xugu.cloudjdbc.SSL - com.xugu.pool.StatementWrapper - com.xugu.pool.PreparedStatementWrapper","title":"\u4e8c. \u865a\u8c37\u6570\u636e\u5e93\u7684JDBC\u63a5\u53e3\u548c\u5bf9\u8c61\u7c7b"},{"location":"JDBC9/#_1","text":"","title":"\u4e09. \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b"},{"location":"JDBC9/#31","text":"\u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b\u3001\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u3001Java \u6570\u636e\u7c7b\u578b\u4e09\u8005\u6620\u5c04\u5173\u7cfb\uff0c\u5982\u88683.1\u6240\u793a\u3002 \u88683.1 \u6570\u636e\u7c7b\u578b\u6620\u5c04\u5173\u7cfb \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b \u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b Java \u6570\u636e\u7c7b\u578b BOOLEAN BOOLEAN boolean SMALLINT SMALLINT short TINYINT TINYINT byte INTEGER INTEGER int BIGINT BIGINT long FLOAT FLOAT float DOUBLE DOUBLE double NUMERIC NUMERIC BigDecimal DECIMAL BigDecimal CHAR CHAR String NCHAR NCHAR String VARCHAR VARCHAR String VARCHAR2 VARCHAR String NVARCHAR2 VARCHAR String BLOB BLOB Blob CLOB CLOB Clob NCLOB BINARY BINARY byte[] VARBINARY LONG VARBINARY DATE DATE Date TIME TIME Time TIMESTAMP TIMESTAMP Timestamp","title":"3.1 \u57fa\u672c\u6570\u636e\u7c7b\u578b"},{"location":"JDBC9/#32","text":"\u865a\u8c37 JDBC \u9664\u4e86\u5b9e\u73b0\u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b\uff0c\u8fd8\u6839\u636e\u865a\u8c37\u6570\u636e\u5e93\u81ea\u6709\u7c7b\u578b\u6269\u5c55\u4e86\u90e8\u5206\u6570\u636e\u7c7b\u578b\uff08\u88683.2\u6240\u793a\uff09\uff0c\u5305\u62ec\u4ee5\u4e0b\u6570\u636e\u7c7b\u578b\u3002 1. \u65f6\u95f4\u6570\u636e\u7c7b\u578b DATETIME\u2014\u2014\u2014 \u65e5\u671f\u65f6\u95f4\u7c7b\u578b DATETIME WITH TIME ZONE \u2014\u2014\u2014 \u5e26\u65f6\u533a\u7684\u65e5\u671f\u65f6\u95f4\u7c7b\u578b TIME WITH TIME ZONE \u2014\u2014\u2014 \u5e26\u65f6\u533a\u7684\u65f6\u95f4\u7c7b\u578b INTERVAL YEAR \u2014\u2014\u2014 \u5e74\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL MONTH \u2014\u2014\u2014 \u6708\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY\u2014\u2014\u2014 \u65e5\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL HOUR \u2014\u2014\u2014 \u5c0f\u65f6\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL MINUTE \u2014\u2014\u2014 \u5206\u949f\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL SECOND \u2014\u2014\u2014 \u79d2\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL YEAR TO MONTH \u2014\u2014\u2014 \u5e74\u5230\u6708\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY TO HOUR \u2014\u2014\u2014 \u65e5\u5230\u5c0f\u65f6\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY TO MINUTE \u2014\u2014\u2014 \u65e5\u5230\u5206\u949f\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY TO SECOND \u2014\u2014\u2014 \u65e5\u5230\u79d2\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL HOUR TO MINUTE \u2014\u2014\u2014 \u5c0f\u65f6\u5230\u5206\u949f\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL HOUR TO SECOND \u2014\u2014\u2014 \u5c0f\u65f6\u5230\u79d2\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL MINUTE TO SECOND \u2014\u2014\u2014 \u5206\u949f\u5230\u79d2\u7684\u65f6\u95f4\u95f4\u9694 2. \u6e38\u6807\u6570\u636e\u7c7b\u578b\uff08\u53ea\u5728\u5b58\u50a8\u8fc7\u7a0b\u3001\u51fd\u6570\u3001\u5305\u4e2d\u4f7f\u7528\uff09 CURSOR \u2014\u2014\u2014 \u6e38\u6807\u6570\u636e\u7c7b\u578b SYS_REFCURSOR \u2014\u2014\u2014 \u8fd4\u56de\u6e38\u6807\u6570\u636e\u7c7b\u578b 3. \u5176\u4ed6\u6570\u636e\u7c7b\u578b GUID \u2014\u2014\u2014 \u5168\u5c40\u552f\u4e00\u6807\u8bc6\u7b26 \u88683.2 \u6269\u5c55\u6570\u636e\u7c7b\u578b\u5bf9\u5e94\u8868 \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b \u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b Java \u6570\u636e\u7c7b\u578b DATETIME DATETIME Timestamp DATETIME WITH TIME ZONE DATETIME_TZ String TIME WITH TIME ZONE TIME_TZ String INTERVAL YEAR INTERVAL_Y String INTERVAL MONTH INTERVAL_M INTERVAL DAY INTERVAL_D INTERVAL HOUR INTERVAL_H INTERVAL MINUTE INTERVAL_MI INTERVAL SECOND INTERVAL_S String INTERVAL YEAR TO MONTH INTERVAL_Y2M INTERVAL DAY TO HOUR INTERVAL_D2H INTERVAL DAY TO MINUTE INTERVAL_D2M INTERVAL DAY TO SECOND INTERVAL_D2S INTERVAL HOUR TO MINUTE INTERVAL_H2M INTERVAL HOUR TO SECOND INTERVAL_H2S INTERVAL MINUTE TO SECOND INTERVAL_M2S CURSOR CURSOR \u65e0\u5bf9\u5e94\u7c7b\u578b SYS_REFCURSOR REFCUR GUID GUID String \u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528 ResultSet \u5bf9\u8c61\u6765\u5bf9\u5e94\u83b7\u53d6\u6e38\u6807\u6240\u8fd4\u56de\u6570\u636e\u3002 {.is-info}","title":"3.2 \u6269\u5c55\u6570\u636e\u7c7b\u578b"},{"location":"JDBC9/#33","text":"\u5728\u8c03\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u4e2d\u7684\u67d0\u4e9b\u65b9\u6cd5\u65f6\uff0c\u9700\u8fdb\u884c Java \u6570\u636e\u7c7b\u578b\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u7684\u8f6c\u6362\uff0c\u8fd9\u4e9b\u65b9\u6cd5\u5305\u62ec\uff1a - ResultSet \u7c7b get\\<Type> \u65b9\u6cd5\uff1b - ResultSet \u7c7b update\\<Type> \u65b9\u6cd5\uff1b - CallableStatement \u7c7b get\\<Type> \u65b9\u6cd5\uff1b - PreparedStatement \u7c7b set\\<Type> \u65b9\u6cd5\u3002 \u6570\u636e\u7c7b\u578b\u4e4b\u95f4\u7684\u8f6c\u6362\uff0c\u9700\u9075\u4ece Java \u6570\u636e\u7c7b\u578b\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u6620\u5c04\u5173\u7cfb\u89c4\u5219\uff0c\u5426\u5219\u53ef\u80fd\u8f6c\u6362\u5931\u8d25\u3002 1. com.xugu.cloudjdbc.ResultSet \u7c7b\u4e2d get\\<Type> \u65b9\u6cd5\u7684\u7c7b\u578b\u8f6c\u6362\uff0c\u5982\u88683.3\u6240\u793a\u3002 2. com.xugu.cloudjdbc.PreparedStatement \u7c7b\u4e2d set\\<Type> \u65b9\u6cd5\u7684\u7c7b\u578b\u8f6c\u6362\uff0c\u5982\u88683.4\u6240\u793a\u3002 X\uff08\u65e0\u4e22\u5931\u8f6c\u6362\uff09\uff1a\u6307\u4ee5\u957f\u7cbe\u5ea6\u7c7b\u578b\u7684 get\\<Type> \u65b9\u6cd5\u83b7\u53d6\u77ed\u7cbe\u5ea6\u6570\u636e\u7c7b\u578b\u5217\u503c\u65e0\u4e22\u5931\u3002 \u5982\uff1a\u4f7f\u7528 getInt() \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u4e3a smallint \u7684\u5217\u6570\u636e\uff0c\u83b7\u53d6\u6570\u636e\u5b8c\u6574\u3002 Z\uff08\u4f9d\u8d56\u8f6c\u6362\uff09\uff1a\u6307 get\\<Type> \u65b9\u6cd5\u4e2d\u7684 Type \u7c7b\u578b\u4e0e\u83b7\u53d6\u6570\u636e\u5e93\u4e2d\u5217\u7684\u6570\u636e\u7c7b\u578b\u4e0d\u4e00\u81f4\uff0c\u6b64\u65f6\u9700\u8981\u901a\u8fc7\u5176\u4ed6\u6570\u636e\u7c7b\u578b\u8f6c\u6362\u4e3a Type \u6570\u636e\u7c7b\u578b\uff0c\u6b64\u8f6c\u6362\u8fc7\u7a0b\u503c\u53ef\u80fd\u4e22\u5931\u90e8\u5206\u6570\u636e\u3002 \u5982\uff1a\u4f7f\u7528 getInt() \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u4e3a float \u7684\u5217\u6570\u636e\uff0c\u53ef\u83b7\u53d6 float \u5217\u6570\u636e\u7684\u6574\u6570\u503c\uff0c\u800c\u5c0f\u6570\u7cbe\u5ea6\u503c\u5c06\u4e22\u5931\u3002 Y\uff08\u76f4\u63a5\u8f6c\u6362\uff09\uff1a\u6307 get\\<Type> \u65b9\u6cd5\u4e2d\u7684 Type \u7c7b\u578b\u4e0e\u83b7\u53d6\u6570\u636e\u5e93\u4e2d\u5217\u7684\u6570\u636e\u7c7b\u578b\u4e00\u81f4\u3002 \u5982\uff1a\u4f7f\u7528 getInt() \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u4e3a integer \u7684\u5217\u6570\u636e\uff0c\u76f4\u63a5\u83b7\u53d6\u5b8c\u6574\u6570\u636e\u3002 {.is-info} P\uff08\u5141\u8bb8\u63d2\u5165\uff09\uff1a\u6307 set\\<Type> \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u5e93\u4e2d\u5217\u6570\u636e\u65f6\uff0c\u6570\u636e\u65e0\u635f\u5931\u5b58\u5165\u6570\u636e\u5e93\u4e2d\u3002 \u5982\uff1a\u4f7f\u7528 setInt() \u65b9\u6cd5\u8bbe\u7f6e\u5217\u6570\u636e\u7c7b\u578b\u4e3a bigint \u7684\u6570\u636e\u65f6\uff0c\u6570\u636e\u53ef\u6b63\u786e\u5b58\u5165\u3002 Z\uff08\u90e8\u5206\u63d2\u5165\uff09\uff1a\u6307 set\\<Type> \u65b9\u6cd5\u4e2d\u7684 Type \u7c7b\u578b\u548c\u6570\u636e\u5e93\u4e2d\u5217\u6570\u636e\u7c7b\u578b\u4e0d\u4e00\u81f4\uff0c\u6570\u636e\u4ec5\u80fd\u90e8\u5206\u6b63\u786e\u5b58\u5165\u3002 \u5982\uff1a\u4f7f\u7528 setInt() \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u5e93\u5217\u7c7b\u578b\u4e3a tinyint \u7684\u6570\u636e\uff0c\u56e0 tinyint \u8868\u793a\u8303\u56f4\u4e3a-128\uff5e127 \u7684\u6574\u6570\u503c\uff0c\u6545\u800c tinyint\u8868\u793a\u8303\u56f4\u5185\u6570\u636e\u53ef\u6b63\u786e\u5b58\u5165\uff0c\u8303\u56f4\u5916\u6570\u636e\u5c06\u63d2\u5165\u5931\u8d25\u3002 {.is-info}","title":"3.3 \u6570\u636e\u7c7b\u578b\u8f6c\u6362"},{"location":"JDBC9/#_2","text":"","title":"\u56db. \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5"},{"location":"JDBC9/#41-jdbc","text":"\u901a\u8fc7\u865a\u8c37 JDBC \u9a71\u52a8\u8bbf\u95ee\u865a\u8c37\u6570\u636e\u5e93\uff0c\u9996\u5148\u5e94\u4fdd\u8bc1\u5e94\u7528\u7a0b\u5e8f\u6b63\u786e\u5f15\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u5305 (cloudjdbc-*.*.*.jar)\uff0c\u5373\u5c06\u9a71\u52a8\u5305\u62f7\u8d1d\u81f3\u5e94\u7528\u7a0b\u5e8f\u5e76\u6dfb\u52a0\u5f15\u7528\u3002","title":"4.1 \u90e8\u7f72JDBC\u9a71\u52a8\u7a0b\u5e8f"},{"location":"JDBC9/#42-jdbc","text":"\u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u8fdb\u884c\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u8c03\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u7a0b\u5e8f\uff0c\u9996\u5148\u8981\u5c06\u865a\u8c37 JDBC \u9a71\u52a8\u52a0\u8f7d\u5230\u7cfb\u7edf\u5185\u5b58\u4e2d\uff0c\u7136\u540e\u4f9b\u7cfb\u7edf\u4f7f\u7528\u3002\u865a\u8c37 JDBC \u7684\u9a71\u52a8\u5b9e\u73b0\u7c7b\u4e3acom.xugu.cloudjdbc.Driver\uff0c\u4ee5\u4e0b\u662f\u5c06\u865a\u8c37 JDBC \u9a71\u52a8\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\u7684\u4ee3\u7801\uff1a //\u663e\u793a\u6ce8\u518c DriverManager.registerDriver(new com.xugu.cloudjdbc.Driver())\u037e //\u9690\u5f0f\u6ce8\u518c Class.forName(\u201ccom.xugu.cloudjdbc.Driver\u201d)\u037e \u9690\u5f0f\u6ce8\u518c\u5373\u901a\u8fc7 Class.forName() \u5c06\u5bf9\u5e94\u7684\u9a71\u52a8\u7c7b\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\uff0c\u5c06\u6267\u884c\u5185\u5b58\u4e2d\u7684 static \u9759\u6001\u4ee3\u7801\u6bb5\uff0c\u6b64\u4ee3\u7801\u6bb5\u4f1a\u521b\u5efa\u4e00\u4e2a\u865a\u8c37 JDBC \u9a71\u52a8\u7684\u5b9e\u4f8b\uff0c\u5e76\u653e\u5165 DriverManager \u4e2d\uff0c\u4f9b DriverManager \u4f7f\u7528\u3002 {.is-info}","title":"4.2 \u52a0\u8f7dJDBC\u9a71\u52a8\u7a0b\u5e8f"},{"location":"JDBC9/#43","text":"\u865a\u8c37 JDBC \u9a71\u52a8\u8fde\u63a5 URL \u4e32\u683c\u5f0f\uff1a jdbc:xugu://serverIP:portNumber/databaseName[?property=value[&property=value]] \u865a\u8c37 JDBC \u9a71\u52a8\u8fde\u63a5 URL \u4e32\u683c\u5f0f\uff1a 1). jdbc:xugu:// \uff1a\uff08\u5fc5\u9700\uff09\u865a\u8c37\u6570\u636e\u5e93\u7279\u5b9a\u534f\u8bae\u3002 2). serverIP \uff1a\uff08\u5fc5\u9700\uff09\u865a\u8c37\u6570\u636e\u5e93\u6240\u5728\u670d\u52a1\u5668\u7684 IP \u5730\u5740\u3002 3). portNumber\uff1a\uff08\u5fc5\u9700\uff09\u662f\u865a\u8c37\u6570\u636e\u5e93\u670d\u52a1 TCP \u8bbf\u95ee\u7aef\u53e3\uff0c\u9ed8\u8ba4 5138\u3002 4). databaseName\uff1a\uff08\u5fc5\u9700\uff09\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u5e93\u540d\u79f0\u3002 5). property\uff1a\uff08\u53ef\u9009\uff09\u865a\u8c37\u6570\u636e\u5e93\u7684 URL \u8fde\u63a5\u5c5e\u6027\u3002\u591a\u4e2a\u8fde\u63a5\u5c5e\u6027\u4e4b\u95f4\u4f7f\u7528\u201c&\u201d\u5206\u9694\uff0c\u4e0d\u53ef\u91cd\u590d\u3002 \u865a\u8c37 JDBC \u9a71\u52a8 URL \u4e32\u793a\u4f8b\u5982\u4e0b\uff1a String url = jdbc:xugu://localhost:5138/System?user=GUEST&password=GUEST\u037e property \u8bbe\u7f6e\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u6027\uff0c\u5e38\u7528\u8fde\u63a5\u5c5e\u6027\u89c1\u88684.1\u3002 \u88684.1 \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u6027 table th:first-of-type { width: 20%; } table th:nth-of-type(2) { width: 10%; } table th:nth-of-type(3) { width: 10%; } table th:nth-of-type(4) { width: 50%; } \u5c5e\u6027\u540d\u79f0 \u5fc5\u9009\u9879 \u53d6\u503c \u8bf4\u660e database \u221a \u5b57\u7b26\u4e32 \u6570\u636e\u5e93\u540d\u79f0 user \u221a \u5b57\u7b26\u4e32 \u7528\u6237\u540d\u79f0 password \u221a \u5b57\u7b26\u4e32 \u7528\u6237\u5bc6\u7801 encryptor \u00d7 \u5b57\u7b26\u4e32 \u7528\u4e8e\u542f\u52a8\u52a0\u5bc6\u6570\u636e\u5e93\uff0c\u82e5\u5e93\u672a\u52a0\u5bc6\uff0c\u5219\u53ef\u4e0d\u8981\uff0c\u4f46\u5e26\u4e0a\u6b64\u53c2\u6570\u4e0d\u4f1a\u5f71\u54cd\u8fde\u63a5 char_set \u00d7 \u5b57\u7b26\u4e32 \u8fde\u63a5\u5b57\u7b26\u96c6\u3002'GB2312'\u3001'GBK'\u3001'UTF8' \u7b49\uff0c\u9ed8\u8ba4\uff1aGBK time_zone \u00d7 \u5b57\u7b26\u4e32 \u5ba2\u6237\u7aef\u65f6\u533a\u3002\u9ed8\u8ba4\uff1a\u865a\u8c37\u6570\u636e\u5e93\u914d\u7f6e\u53c2\u6570 def_timezone \u6240\u8bbe\u7f6e\u65f6\u533a\uff08\u53ea\u5bf9\u7cfb\u7edf\u65f6\u95f4\u51fd\u6570\u751f\u6548\uff09 iso_level \u00d7 \u5b57\u7b26\u4e32 'READ COMMITED'\uff1a\u8bfb\u5df2\u63d0\u4ea4\uff1b 'REPEATIABLE READ'\uff1a\u53ef\u91cd\u590d\u8bfb\uff1b'SERIALIZABLE'\uff1a\u5e8f\u5217\u5316 lock_time \u00d7 \u6570\u503c \u5355\u4f4d\uff1a\u6beb\u79d2\uff0c\u9ed8\u8ba4\u503c\uff1a0\uff0c\u8868\u793a\u8fde\u63a5\u4e2d\u7684\u4e8b\u52a1\u9501\u5f81\u7528\u65f6\uff0c\u6700\u5927\u7b49\u5019\u65f6\u95f4\uff0c\u82e5\u5728\u8bbe\u7f6e\u65f6\u95f4\u5185\u52a0\u9501\u5931\u8d25\uff0c\u56de\u6eda\u4e8b\u52a1\u5e76\u62a5\u9519 lob_ret \u00d7 \u5b57\u7b26\u4e32 \u5927\u5bf9\u8c61\uff08Blob\u3001Clob\uff09\u6570\u636e\u8fd4\u56de\u65b9\u5f0f\u3002\u5c5e\u6027\u4e3a descriptor \u65f6\uff0c\u4ee5\u63cf\u8ff0\u7b26\u65b9\u5f0f\u8fd4\u56de\uff1b\u5176\u4ed6\u4ee5\u6570\u636e\u6d41\u65b9\u5f0f\u8fd4\u56de\u3002\u9ed8\u8ba4\uff1a\u4ee5\u6570\u636e\u6d41\u65b9\u5f0f\u8fd4\u56de return_rowid \u00d7 \u5e03\u5c14\u503c \u662f\u5426\u8fd4\u56de\u8bb0\u5f55 rowid \u503c\u3002\u5c5e\u6027\u4e3a TRUE \u65f6\uff0c\u8fd4\u56de rowid\uff1b\u5176\u4ed6\u8fd4\u56de FALSE\u3002\u9ed8\u8ba4\uff1aFALSE auto_commit \u00d7 on/off \u4e8b\u52a1\u662f\u5426\u81ea\u52a8\u63d0\u4ea4\u3002\u5c5e\u6027\u4e3a ON \u65f6\uff0c\u8fde\u63a5\u81ea\u52a8\u63d0\u4ea4\uff1b\u5c5e\u6027\u4e3a OFF\u65f6\uff0c\u8fde\u63a5\u975e\u81ea\u52a8\u63d0\u4ea4\u3002\u9ed8\u8ba4\uff1aON conn_type \u00d7 \u6570\u503c \u8d1f\u8f7d\u5747\u8861\u5206\u914d\u65b9\u5f0f\u3002\u5c5e\u6027\u4e3a 1 \u65f6\uff0c\u968f\u673a\u5206\u914d\uff1b\u5c5e\u6027\u4e3a 2 \u65f6\uff0c\u987a\u5e8f\u5206\u914d\u3002\u9ed8\u8ba4\uff1a2 ips \u00d7 \u5b57\u7b26\u4e32 \u8d1f\u8f7d\u5747\u8861\u8fde\u63a5 IP \u5730\u5740\uff0c\u591a\u4e2a IP \u5730\u5740\u4ee5\u9017\u53f7\u5206\u9694\uff08\u8be6\u7ec6\u89c1\u8d1f\u8f7d\u5747\u8861\uff09 CompatibleOracle \u00d7 \u5e03\u5c14\u503c \u517c\u5bb9 Oracle \u9009\u9879\u3002\u5c5e\u6027\u4e3a true\uff0c\u517c\u5bb9 Oracle\u037e \u5c5e\u6027\u4e3a FALSE\uff0c\u865a\u8c37 JDBC \u81ea\u6709\u5b9e\u73b0 recv_mode \u00d7 \u6570\u503c \u63a5\u6536\u6a21\u5f0f\u9009\u9879\u3002\u5c5e\u6027\u503c\u4e3a 0 \u65f6\uff0c\u672c\u5730\u5168\u63a5\u6536\u6a21\u5f0f\uff1b\u5c5e\u6027\u503c\u4e3a 1 \u65f6\uff0c\u7f51\u7edc\u63a5\u6536\u6a21\u5f0f\uff1b\u5c5e\u6027\u503c\u4e3a 2 \u65f6\uff0c\u670d\u52a1\u5668\u7aef\u6e38\u6807\u63a5\u6536\u6a21\u5f0f\u3002\u9ed8\u8ba4\uff1a0 emptyStringAsNull \u00d7 \u5e03\u5c14\u503c \u7a7a\u5b57\u4e32\u5904\u7406\u3002\u5c5e\u6027\u4e3a FALSE \u65f6\uff0c\u7a7a\u5b57\u7b26\u4e32\u8ba4\u5b9a\u4e3a NULL\uff1b\u5c5e\u6027\u4e3a TRUE \u65f6\uff0c\u7a7a\u5b57\u7b26\u4e32\u4fdd\u7559\u3002\u9ed8\u8ba4\uff1a\u7a7a\u5b57\u4e32\u4fdd\u7559 xgversion \u00d7 201/301 \u5ba2\u6237\u7aef\u534f\u8bae\u7248\u672c\uff0c\u865a\u8c37\u6570\u636e\u5e93V12\u7248\u672c\u5347\u7ea7\u652f\u6301301\u534f\u8bae\uff0c\u540c\u65f6\u517c\u5bb9201\u534f\u8bae SSL \u00d7 SSL \u8fde\u63a5\u52a0\u5bc6\u53c2\u6570\u3002\u5c5e\u6027\u503c\u3010SSL\uff1a\u542f\u7528SSL\u52a0\u5bc6\u4f20\u8f93\uff1bNSSL\uff1a\u7981\u7528SSL\u52a0\u5bc6\u4f20\u8f93\u3011 slowsqltime \u00d7 \u6570\u503c \u8bbe\u7f6e\u6162SQL\u6267\u884c\u65f6\u95f4\u3002SQL\u8bed\u53e5\u6267\u884c\u65f6\u95f4\u8d85\u8fc7\u8be5\u6570\u503c\uff0c\u65e5\u5fd7\u5219\u4f1a\u8f93\u51fa\u6267\u884cSQL batch_mode \u00d7 \u5e03\u5c14\u503c PreparedStatement\u662f\u5426\u4f7f\u7528\u6279\u91cf\u5904\u7406\u3002\u5c5e\u6027\u4e3a TRUE \u65f6\uff0cexecuteBatch\u91c7\u7528\u6279\u91cf\u6a21\u578b\uff1bFALSE\u5219\u91c7\u7528\u5355\u6761\u5904\u7406\u6a21\u578b\u3002\u9ed8\u8ba4\uff1aFALSE \u8fde\u63a5\u53c2\u6570\u4f7f\u7528SSL\u5c5e\u6027\u65f6\uff0c\u4f9d\u8d56\u7a0b\u5e8f\u5305\u4e2d\u63d0\u4f9b\u7684\u52a8\u6001\u94fe\u63a5\u5e93\uff0c\u4f7f\u7528\u524d\u9700\u5c06\u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u5230\u64cd\u4f5c\u7cfb\u7edf\u6307\u5b9a\u4f4d\u7f6e\u65b9\u53ef\u6b63\u5e38\u4f7f\u7528SSL\u52a0\u5bc6\u529f\u80fd\u3002 Windows 32\u4f4d\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u7528SSL\u5c5e\u6027\u524d\uff0c\u9700\u5c06\u7a0b\u5e8f\u5305 ssl/win32 \u4e0b xgssl.dll \u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u62f7\u8d1d\u5230\u7cfb\u7edf\u76ee\u5f55 C:/windows/system32 \u76ee\u5f55\u4f4d\u7f6e\u3002 Windows 64\u4f4d\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u7528SSL\u5c5e\u6027\u524d\uff0c\u9700\u5c06\u7a0b\u5e8f\u5305 ssl/win64 \u4e0b xgssl.dll \u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u62f7\u8d1d\u5230\u7cfb\u7edf\u76ee\u5f55 C:/windows/system32 \u76ee\u5f55\u4e0b\u3002 Linux X64\u4f4d\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u7528SSL\u5c5e\u6027\u524d\uff0c\u9700\u5c06\u7a0b\u5e8f\u5305 ssl/linux64 \u4e0b libxgssl.so \u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u62f7\u8d1d\u5230\u7cfb\u7edf\u76ee\u5f55 /usr/lib\u6216\u8005/usr/lib4 \u76ee\u5f55\u4e0b\u3002 \u865a\u8c37 JDBC \u8bbe\u7f6e\u8fde\u63a5\u5c5e\u6027\u793a\u4f8b\u5982\u4e0b (\u7248\u672c\u53f7\u3001\u5927\u5bf9\u8c61\u63cf\u8ff0\u7b26\u3001\u65f6\u533a\u3001\u5173\u95ed\u8fde\u63a5\u81ea\u52a8\u63d0\u4ea4)\uff1a String url=jdbc:xugu://localhost:5138/System?user=GUEST&password=GUEST&version=110&auto_commit=false&lob_ret=descriptor&time_zone=GMT-8:00\u037e","title":"4.3 \u8fde\u63a5\u5b57\u4e32\u53ca\u53c2\u6570\u8bbe\u7f6e"},{"location":"JDBC9/#44","text":"\u5728\u5e94\u7528\u7a0b\u5e8f\u5c06\u865a\u8c37 JDBC \u9a71\u52a8\u52a0\u8f7d\u5230\u7cfb\u7edf\u5185\u5b58\u4e2d\u540e\uff0c\u53ef\u901a\u8fc7 DriverManager \u7c7b\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u65b9\u6cd5\u5982\u4e0b\uff1a DriverManager.getConnection(String url)\u037e DriverManager.getConnection(String url,Properties)\u037e DriverManager.getConnection(String url,String user,String password)\u037e","title":"4.4 \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5"},{"location":"JDBC9/#_3","text":"\u901a\u8fc7 DriverManager \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u4ee5\u5916\uff0c\u8fd8\u53ef\u4ee5\u4f7f\u7528\u6570\u636e\u6e90\u6216\u8fde\u63a5\u6c60\u65b9\u5f0f\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u3002\u901a\u8fc7\u6570\u636e\u6e90\u65b9\u5f0f\u6216\u8fde\u63a5\u6c60\u65b9\u5f0f\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u6709\u4ee5\u4e0b\u4f18\u70b9\uff1a - \u8d44\u6e90\u91cd\u7528 \u7531\u4e8e\u6570\u636e\u5e93\u8fde\u63a5\u5f97\u5230\u91cd\u7528\uff0c\u907f\u514d\u4e86\u9891\u7e41\u521b\u5efa\u3001\u91ca\u653e\u8fde\u63a5\u5f15\u8d77\u7684\u5927\u91cf\u6027\u80fd\u5f00\u9500\u3002\u5728\u51cf\u5c11\u7cfb\u7edf\u6d88\u8017\u7684\u57fa\u7840\u4e0a\uff0c\u53e6\u4e00\u65b9\u9762\u4e5f\u589e\u8fdb\u4e86\u7cfb\u7edf\u8fd0\u884c\u73af\u5883\u7684\u5e73\u7a33\u6027\uff08\u51cf\u5c11\u5185\u5b58\u788e\u7247\u4ee5\u53ca\u6570\u636e\u5e93\u4e34\u65f6\u8fdb\u7a0b/\u7ebf\u7a0b\u7684\u6570\u91cf\uff09\u3002 - \u66f4\u5feb\u7684\u7cfb\u7edf\u54cd\u5e94 \u6570\u636e\u5e93\u8fde\u63a5\u6c60\u5728\u521d\u59cb\u5316\u8fc7\u7a0b\u4e2d\uff0c\u5f80\u5f80\u5df2\u7ecf\u521b\u5efa\u4e86\u82e5\u5e72\u6570\u636e\u5e93\u8fde\u63a5\u7f6e\u4e8e\u6c60\u4e2d\u5907\u7528\u3002\u6b64\u65f6\u8fde\u63a5\u7684\u521d\u59cb\u5316\u5de5\u4f5c\u5747\u5df2\u5b8c\u6210\u3002\u5bf9\u4e8e\u4e1a\u52a1\u8bf7\u6c42\u5904\u7406\u800c\u8a00\uff0c\u76f4\u63a5\u5229\u7528\u73b0\u6709\u53ef\u7528\u8fde\u63a5\uff0c\u907f\u514d\u4e86\u6570\u636e\u5e93\u8fde\u63a5\u521d\u59cb\u5316\u548c\u91ca\u653e\u8fc7\u7a0b\u7684\u65f6\u95f4\u5f00\u9500\uff0c\u4ece\u800c\u7f29\u51cf\u4e86\u7cfb\u7edf\u6574\u4f53\u54cd\u5e94\u65f6\u95f4\u3002 - \u65b0\u7684\u8d44\u6e90\u5206\u914d\u624b\u6bb5 \u5bf9\u4e8e\u591a\u5e94\u7528\u5171\u4eab\u540c\u4e00\u6570\u636e\u5e93\u7684\u7cfb\u7edf\u800c\u8a00\uff0c\u53ef\u5728\u5e94\u7528\u5c42\u901a\u8fc7\u6570\u636e\u5e93\u8fde\u63a5\u7684\u914d\u7f6e\uff0c\u9650\u5236\u5355\u4e00\u5e94\u7528\u7533\u8bf7\u6570\u636e\u5e93\u8fde\u63a5\u6570\uff0c\u4ece\u800c\u907f\u514d\u5355\u4e00\u5e94\u7528\u72ec\u5360\u6240\u6709\u6570\u636e\u5e93\u8d44\u6e90\u3002 \u865a\u8c37 JDBC \u4e2d\u6570\u636e\u6e90\u5b9e\u73b0\u7c7b\u4e3a com.xugu.pool.XgDataSource\uff0c\u8fde\u63a5\u6c60\u5b9e\u73b0\u7c7b\u4e3acom.xugu.pool \u5305\u4e2d\u7684 XgDataSource\u3001XgPooledConnection\u3001XgConnectionPoolDataSource\u3001XgConnectionEventListener\u3001XgConnectionEvent\u3002","title":"\u4e94. \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u6e90\u548c\u8fde\u63a5\u6c60"},{"location":"JDBC9/#51","text":"XgDataSource \u63d0\u4f9b set \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u6e90\u8fde\u63a5\u5c5e\u6027\uff1a \u793a\u4f8b\uff1a\u901a\u8fc7 XgDataSource \u4e0e\u865a\u8c37\u6570\u636e\u5e93\u5efa\u7acb\u8fde\u63a5 com.xugu.pool.XgDataSource ds = new com.xugu.pool.XgDataSource()\u037e ds.setUrl(\"jdbc:xugu://127.0.0.1:5138/db\")\u037e ds.setUser(\"SYSDBA\")\u037e ds.setPassword(\"SYSDBA\")\u037e Properties pro = new Properties()\u037e pro.setProperty(\"return_rowid\", \"true\")\u037e pro.setProperty(\"auto_commit\", \"off\")\u037e ds.setPro(pro)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u767b\u5f55\u4e32\u3002url\u4e3a\u6570\u636e\u5e93\u767b\u5f55\u4e32 setUrl(String url)\uff1b //\u6307\u5b9a\u6570\u636e\u5e93\u670d\u52a1\u5668\u3002host\u4e3a\u670d\u52a1\u5668\u5730\u5740 setHostName(String host)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u540d\u3002dbName\u4e3a\u6570\u636e\u5e93\u540d setDatabaseName(String dbName)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u7aef\u53e3\u53f7\u3002port\u4e3a\u6570\u636e\u5e93\u7aef\u53e3\u53f7 setPort(int port)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u7528\u6237\u3002userName\u4e3a\u6570\u636e\u5e93\u767b\u5f55\u7528\u6237\u540d setUser(String userName)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u767b\u5f55\u5bc6\u7801\u3002passWord\u4e3a\u6570\u636e\u5e93\u767b\u5f55\u5bc6\u7801 setPassword(Stirng passWord)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u767b\u5f55\u53c2\u6570\u3002ds_pro\u4e3a\u6570\u636e\u5e93\u8fde\u63a5\u53c2\u6570 setPro(Properties ds_pro)\uff1b // \u901a\u8fc7\u6570\u636e\u6e90\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5 Connection conn = ds.getConnection()\u037e \u5728 com.xugu.pool.XgDataSource \u7c7b\u4e2d\u901a\u8fc7 setXX() \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u6e90\u7684\u8fde\u63a5\u5c5e\u6027\uff0c\u82e5\u672a\u6307\u5b9a\u5219\u4f7f\u7528\u9ed8\u8ba4\u5c5e\u6027\u503c\uff1a\u6570\u636e\u5e93\u670d\u52a1\u5668\u5730\u5740\u9ed8\u8ba4\u4e3a\u201clocalhost\u201d \uff0c\u8fde\u63a5\u6570\u636e\u5e93\u9ed8\u8ba4\u4e3a\u201cSYSTEM\u201d \uff0c\u8bbf\u95ee\u7aef\u53e3\u53f7\u9ed8\u8ba4\u4e3a\u201c5138\u201d \uff0c\u8bbf\u95ee\u7528\u6237\u540d\u9ed8\u8ba4\u4e3a\u201cGUEST\u201d \uff0c\u7528\u6237\u5bc6\u7801\u9ed8\u8ba4\u4e3a\u201cGUEST\u201d \u3002URL \u9ed8\u8ba4\u8fde\u63a5\u4e32\u4e3a\u201cjdbc:xugu://127.0.0.1:5138/SYSTEM?user=GUEST&password=GUEST&version=110\u201d\u3002\u6570\u636e\u6e90\u5efa\u7acb\u540e\uff0c\u53ef\u901a\u8fc7\u8c03\u7528 XgDataSource \u7c7b\u4e2d\u7684 getConnection() \u548c getConnection(String username,String password) \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u3002","title":"5.1 \u4f7f\u7528\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u6e90\u521b\u5efa\u8fde\u63a5"},{"location":"JDBC9/#52","text":"\u8fde\u63a5\u6c60\u6280\u672f\u7684\u6838\u5fc3\u601d\u60f3\u662f\uff1a\u8fde\u63a5\u590d\u7528\uff0c\u901a\u8fc7\u5efa\u7acb\u4e00\u4e2a\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u4ee5\u53ca\u4e00\u5957\u8fde\u63a5\u4f7f\u7528\u3001\u5206\u914d\u3001\u7ba1\u7406\u7b56\u7565\uff0c\u8be5\u8fde\u63a5\u6c60\u4e2d\u7684\u8fde\u63a5\u53ef\u4ee5\u5f97\u5230\u9ad8\u6548\u3001\u5b89\u5168\u7684\u590d\u7528\uff0c\u907f\u514d\u4e86\u6570\u636e\u5e93\u8fde\u63a5\u9891\u7e41\u5efa\u7acb\u3001\u5173\u95ed\u7684\u5f00\u9500\u3002 \u865a\u8c37 JDBC \u8fde\u63a5\u6c60\u5b9e\u73b0\u7c7b\u5bf9\u865a\u8c37\u6570\u636e\u5e93\u539f\u59cb\u8fde\u63a5\u8fdb\u884c\u4e86\u5c01\u88c5\uff0c\u4ece\u800c\u65b9\u4fbf\u4e86\u6570\u636e\u5e93\u5e94\u7528\u5bf9\u4e8e\u8fde\u63a5\u7684\u4f7f\u7528\uff08\u7279\u522b\u662f\u5bf9\u4e8e\u4e8b\u52a1\u5904\u7406\uff09\uff0c\u63d0\u9ad8\u4e86\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u6548\u7387\uff0c\u4e5f\u6b63\u662f\u56e0\u4e3a\u8fd9\u4e2a\u5c01\u88c5\u5c42\u7684\u5b58\u5728\uff0c\u9694\u79bb\u4e86\u5e94\u7528\u7684\u672c\u8eab\u7684\u5904\u7406\u903b\u8f91\u548c\u5177\u4f53\u6570\u636e\u5e93\u8bbf\u95ee\u903b\u8f91\uff0c\u4f7f\u5e94\u7528\u672c\u8eab\u7684\u590d\u7528\u6210\u4e3a\u53ef\u80fd\u3002\u8fde\u63a5\u6c60\u4e3b\u8981\u7531\u4e09\u90e8\u5206\u7ec4\u6210\uff1a\u8fde\u63a5\u6c60\u7684\u5efa\u7acb\u3001\u8fde\u63a5\u6c60\u4e2d\u8fde\u63a5\u7684\u4f7f\u7528\u7ba1\u7406\u3001\u8fde\u63a5\u6c60\u7684\u5173\u95ed\u3002 \u865a\u8c37 JDBC \u8fde\u63a5\u6c60\u7684\u57fa\u672c\u601d\u60f3\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u5efa\u7acb\u4e00\u4e2a\u201c\u7f13\u51b2\u6c60\u201d\u3002\u9884\u5148\u5728\u201c\u7f13\u51b2\u6c60\u201d\u4e2d\u653e\u5165\u4e00\u5b9a\u6570\u91cf\u7684\u8fde\u63a5\uff0c\u5f53\u9700\u8981\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65f6\uff0c\u53ea\u9700\u4ece\u201c\u7f13\u51b2\u6c60\u201d\u4e2d\u53d6\u51fa\u4e00\u4e2a\uff0c\u4f7f\u7528\u5b8c\u6bd5\u4e4b\u540e\u518d\u653e\u56de\u53bb\u3002\u901a\u8fc7\u8bbe\u5b9a\u8fde\u63a5\u6c60\u6700\u5927\u8fde\u63a5\u6570\u6765\u9632\u6b62\u7cfb\u7edf\u65e0\u5c3d\u7684\u4e0e\u6570\u636e\u5e93\u8fde\u63a5\u3002\u4ea6\u53ef\u901a\u8fc7\u8fde\u63a5\u6c60\u7684\u7ba1\u7406\u673a\u5236\u76d1\u89c6\u6570\u636e\u5e93\u7684\u8fde\u63a5\u6570\u91cf\u3001\u4f7f\u7528\u60c5\u51b5\uff0c\u4e3a\u7cfb\u7edf\u5f00\u53d1\u3001\u6d4b\u8bd5\u53ca\u6027\u80fd\u8c03\u6574\u63d0\u4f9b\u4f9d\u636e\u3002 \u5f53\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u5b8c\u6570\u636e\u5e93\u8fde\u63a5\u8c03\u7528\u8fde\u63a5\u5173\u95ed\u65b9\u6cd5\u65f6\uff0c\u8be5\u8fde\u63a5\u5e76\u672a\u9500\u6bc1\uff0c\u800c\u662f\u88ab\u5f52\u8fd8\u7ed9\u8fde\u63a5\u6c60\u7b49\u5f85\u4e0b\u6b21\u7ee7\u7eed\u8c03\u7528\u3002 {.is-info} \u865a\u8c37 JDBC \u5b9e\u73b0\u8fde\u63a5\u6c60\u670d\u52a1\u6240\u63d0\u4f9b\u7684\u63a5\u53e3\u7c7b\u5982\u4e0b\uff1a - XgDataSource \u5b9e\u73b0 javax.sql.DataSource \u63a5\u53e3\uff1b - XgPooledConnection \u5b9e\u73b0 javax.sql.PooledConnection \u63a5\u53e3\uff1b - XgConnectionPoolDataSource \u5b9e\u73b0 javax.sql.ConnectionPoolDataSource \u63a5\u53e3\uff1b - XgConnectionEventListener \u5b9e\u73b0 javax.sql.ConnectionEventListener \u63a5\u53e3\uff1b - XgConnectionEvent \u7ee7\u627f\u81ea javax.sql.ConnectionEvent \u7c7b\u3002 \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u4e2d\u7684\u8fde\u63a5\u5747\u662f\u901a\u8fc7\u6570\u636e\u6e90\u5efa\u7acb\u7684\uff0c\u6545\u800c XgConnectionPoolDataSource \u7ee7\u627f\u4e86 com.xugu.pool.XgDataSource \u7c7b\u3002\u7528\u6237\u4ea6\u53ef\u901a\u8fc7 XgConnectionPoolDataSource \u5bf9\u8c61\u8bbe\u7f6e\u6570\u636e\u6e90\u5c5e\u6027\u548c\u8fde\u63a5\u6c60\u5c5e\u6027\uff1a //\u6700\u5c0f\u8fde\u63a5\u6570 setMinIdle(int min) //\u6700\u5927\u8fde\u63a5\u6570 setMaxActive(int max) //\u767b\u5f55\u7a7a\u95f2\u65f6\u95f4 setLoginTimeout(int time) //\u6700\u5927\u7b49\u5f85\u8fde\u63a5\u8d85\u65f6 setMaxWaitTime(long waitTime) \u5176\u4e2d\uff1asetLoginTimeout() \u548c setMaxWaitTime() \u65b9\u6cd5\u4e2d\u53c2\u6570\u5355\u4f4d\u4e3a\u6beb\u79d2\uff0c\u5176\u4ed6\u65b9\u6cd5\u4e2d\u53c2\u6570\u5355\u4f4d\u4e3a\u79d2\u3002 \u793a\u4f8b\uff1a\u521b\u5efa\u4e00\u4e2a\u865a\u8c37 JDBC \u8fde\u63a5\u6c60\uff0c\u5e76\u901a\u8fc7\u8fde\u63a5\u6c60\u83b7\u53d6\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u3002 XgConnectionPoolDataSource CPDSource = new XgConnectionPoolDataSource()\u037e CPDSource.setHostName(\u201clocalhost\u201d)\u037e CPDSource.setPort(5138)\u037e CPDSource.setDatabaseName(\u201cxuguNew\u201d)\u037e CPDSource.setUser(\u201cSYSDBA\u201d)\u037e CPDSource.setPassword(\u201cSYSDBA\u201d)\u037e CPDSource.setUrl(\"jdbc:xugu://localhost:5138/xuguNew)\u037e CPDSource.setMaxActive(50)\u037e CPDSource.setMinIdle(5)\u037e CPDSource.setLoginTimeout(3000)\u037e CPDSource.setMaxWaitTime(3000)\u037e XgPooledConnection Pconn = (XgPooledConnection)CPDSource.getPooledConnection()\u037e Connection conn = Pconn.getConnection()\u037e","title":"5.2 \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u6c60"},{"location":"JDBC9/#jdbc_2","text":"\u4f7f\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u5b9e\u73b0\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u4ea4\u4e92\u7684\u4e00\u822c\u4f7f\u7528\u6b65\u9aa4\uff1a\u5bfc\u5165\u865a\u8c37 JDBC \u9a71\u52a8\u5305 \u2192 \u52a0\u8f7d\u865a\u8c37 JDBC \u9a71\u52a8\u7a0b\u5e8f \u2192 \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5 Connection \u2192 \u521b\u5efa\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61 Statement \u2192 \u6267\u884c SQL \u8bed\u53e5 \u2192 \u5904\u7406\u6267\u884c\u7ed3\u679c ResultSet \u2192 \u91ca\u653e\u8d44\u6e90\u3002 - \u7b2c 1 \u6b65\uff1a\u5bfc\u5165\u865a\u8c37 JDBC \u9a71\u52a8\u5305 - \u7b2c 2 \u6b65\uff1a\u6ce8\u518a\u9a71\u52a8 (\u4ec5\u505a\u4e00\u6b21) - \u7b2c 3 \u6b65\uff1a\u5efa\u7acb\u8fde\u63a5 (Connection) - \u7b2c 4 \u6b65\uff1a\u521b\u5efa\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61 (Statement) - \u7b2c 5 \u6b65\uff1a\u6267\u884c SQL \u8bed\u53e5 - \u7b2c 6 \u6b65\uff1a\u5904\u7406\u6267\u884c\u7ed3\u679c (ResultSet) - \u7b2c 7 \u6b65\uff1a\u91ca\u653e\u8d44\u6e90","title":"\u516d. \u865a\u8c37\u6570\u636e\u5e93\u7684JDBC\u4ea4\u4e92\u6d41\u7a0b"},{"location":"JDBC9/#61-jdbc","text":"\u4e0b\u8f7d\u865a\u8c37\u6570\u636e\u5e93\u4e13\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u5305 (cloudjdbc-*.*.*.jar)\uff0c\u5e76\u5bfc\u5165\u5230\u5e94\u7528\u7a0b\u5e8f\u4e2d\u3002","title":"6.1 \u5bfc\u5165\u865a\u8c37JDBC\u9a71\u52a8\u5305"},{"location":"JDBC9/#62-jdbc","text":"\u865a\u8c37 JDBC \u9a71\u52a8\u7a0b\u5e8f\u4e2d Driver \u63a5\u53e3\u5b9e\u73b0\u7c7b\u4e3a com.xugu.cloudjdbc.Driver\u3002\u52a0\u8f7d\u9a71\u52a8\u65b9\u5f0f\u4e3a DriverManager.registerDriver(new com.xugu.cloudjdbc.Driver()) \u6216Class.forName(\u201ccom.xugu.cloudjdbc.Driver\u201d)\u3002","title":"6.2 \u52a0\u8f7d\u865a\u8c37JDBC\u9a71\u52a8"},{"location":"JDBC9/#63","text":"\u5efa\u7acb\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u7684\u65b9\u5f0f\u6709\u591a\u79cd\uff0c\u53ef\u6839\u636e\u5e94\u7528\u7a0b\u5e8f\u5b9e\u9645\u4f7f\u7528\u573a\u666f\u9009\u62e9\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65b9\u5f0f\u3002\u5e38\u89c1\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65b9\u5f0f\u5982\u4e0b\uff1a - \u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u4f7f\u7528 DriverManager \u83b7\u5f97\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\uff1b - \u4f7f\u7528\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u6e90/\u8fde\u63a5\u6c60\u7684\u65b9\u5f0f\u83b7\u53d6\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\uff1b - \u4f7f\u7528\u7b2c\u4e09\u65b9\u901a\u7528\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u65b9\u5f0f\u83b7\u53d6\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u3002 \u5982\uff1adruid\u3001c3p0\u3001dbcp\u3001JNDI \u7b49\u3002","title":"6.3 \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5"},{"location":"JDBC9/#631","text":"\u6253\u5f00\u6570\u636e\u5e93\u8fde\u63a5\u5373\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u5bf9\u8c61 Connection \u7c7b\u3002 \u5982\uff1aDriverManager \u901a\u8fc7 getConnection() \u65b9\u6cd5\u83b7\u53d6 Connection \u7c7b\u5bf9\u8c61\u3002DriverManager \u7684 getConnection() \u65b9\u6cd5\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\u7684\u65b9\u5f0f\u4ea6\u6709\u591a\u79cd\u3002\u4ee5\u4e0b\u4e3a\u5e38\u89c1\u65b9\u5f0f\uff1a - getConnection(String url) \u53c2\u6570\u8bf4\u660e\uff1a - url\uff1a\u8bbf\u95ee\u6570\u636e\u5e93\u7684 URL \u8def\u5f84\u3002 \u793a\u4f8b\uff1a \u4e0b\u9762\u7684\u4ee3\u7801\u5229\u7528 getConnection \u65b9\u6cd5\u521b\u5efa\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u3002 ``` public Connection getConnection(){ Connection con=null\u037e try{ //\u6ce8\u518c\u6570\u636e\u5e93\u9a71\u52a8 Class.forName(\"com.xugu.cloudjdbc.Driver\")\u037e //\u5b9a\u4e49\u8fde\u63a5\u6570\u636e\u5e93\u7684url String url = \"jdbc:xugu://localhost:5138/db?user=user1\uff06password=pwd\"\u037e //\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5 con = DriverManager.getConnection(url)\u037e System.out.println(\"\u6570\u636e\u5e93\u8fde\u63a5\u6210\u529f\uff01\")\u037e }catch(Exception e){ e.printStackTrace()\u037e } //\u8fd4\u56de\u4e00\u4e2a\u8fde\u63a5 return con\u037e } ``` getConnection(String url,String user,String password) \u53c2\u6570\u8bf4\u660e\uff1a url\uff1a\u8bbf\u95ee\u6570\u636e\u5e93\u7684 URL \u8def\u5f84\u3002 user\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u7528\u6237\u540d\u3002 password\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u7528\u6237\u5bc6\u7801\u3002 \u793a\u4f8b\uff1a \u4e0b\u9762\u7684\u4ee3\u7801\u5229\u7528 getConnection \u65b9\u6cd5\u521b\u5efa\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u3002 private Connection con; private String user = \"user1\"; //\u5b9a\u4e49\u8fde\u63a5\u6570\u636e\u5e93\u7684\u7528\u6237\u540d private String password = \"pwd\"; //\u5b9a\u4e49\u8fde\u63a5\u6570\u636e\u5e93\u7684\u5bc6\u7801 private String className = \"com.xugu.cloudjdbc.Driver\";//\u5b9a\u4e49\u865a\u8c37JDBC\u9a71\u52a8 private String url = \"jdbc:xugu://localhost:5138/db\"; /\\*\\*\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\\*/ public Connection getConnection(){ try{ Class.forName(className);//\u52a0\u8f7d\u6570\u636e\u5e93\u9a71\u52a8 System.out.println(\"\u6570\u636e\u5e93\u9a71\u52a8\u52a0\u8f7d\u6210\u529f\uff01\"); con = DriverManager.getConnection(url,user,password); //\u8fde\u63a5\u6570\u636e\u5e93 System.out.println(\"\u6210\u529f\u5730\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\uff01\"); }catch(Exception e){ System.out.println(\"\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\u5931\u8d25\uff01\"); con = null; e.printStackTrace(); } finally { If(conn != null){ //\u91ca\u653e\u8fde\u63a5\u8d44\u6e90 conn.close(); } } return con; } getConnection(String url,Properties info) \u53c2\u6570\u8bf4\u660e\uff1a url\uff1a\u8bbf\u95ee\u6570\u636e\u5e93\u7684 URL \u8def\u5f84\u3002 info\uff1a\u4e00\u4e2a\u6301\u4e45\u7684\u5c5e\u6027\u96c6\u5bf9\u8c61\uff0c\u5305\u62ec user \u548c password \u7b49\u5c5e\u6027\u3002 \u793a\u4f8b\uff1a \u4e0b\u9762\u7684\u4ee3\u7801\u5229\u7528 getConnection \u65b9\u6cd5\u521b\u5efa\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u3002 public Connection getConnection(){ Connection con = null; //\u5b9a\u4e49\u6570\u636e\u5e93\u8fde\u63a5\u5bf9\u8c61 Properties info = new Properties(); //\u5b9a\u4e49Properties\u5bf9\u8c61 info.setProperty(\"user\",\"user1\"); //\u8bbe\u7f6eProperties\u5bf9\u8c61\u5c5e\u6027 info.setProperty(\"password\",\"pwd\"); try{ //\u6ce8\u518c\u6570\u636e\u5e93\u9a71\u52a8 Class.forName(\"com.xugu.cloudjdbc.Driver\"); //test\u4e3a\u6570\u636e\u5e93\u540d\u79f0 String url = \"jdbc:xugu://localhost:5138/db\"; //\u83b7\u53d6\u8fde\u63a5\u6570\u636e\u5e93\u7684Connection\u5bf9\u8c61 con = DriverManager.getConnection(url,info); System.out.println(\"\u6570\u636e\u5e93\u8fde\u63a5\u6210\u529f\uff01\"); }catch(Exception e){ e.printStackTrace(); } //\u8fd4\u56de\u4e00\u4e2a\u8fde\u63a5 return con; }","title":"6.3.1 \u6253\u5f00\u6570\u636e\u5e93\u8fde\u63a5"},{"location":"JDBC9/#632","text":"\u6570\u636e\u5e93\u4e8b\u52a1 (transaction) \u662f\u8bbf\u95ee\u5e76\u53ef\u80fd\u64cd\u4f5c\u5404\u79cd\u6570\u636e\u9879\u7684\u4e00\u4e2a\u6570\u636e\u5e93\u64cd\u4f5c\u5e8f\u5217\uff0c\u8fd9\u4e9b\u64cd\u4f5c\u8981\u4e48\u5168\u90e8\u6267\u884c, \u8981\u4e48\u5168\u90e8\u4e0d\u6267\u884c\uff0c\u662f\u4e00\u4e2a\u4e0d\u53ef\u5206\u5272\u7684\u5de5\u4f5c\u5355\u4f4d\u3002\u4e8b\u52a1\u7531\u4e8b\u52a1\u5f00\u59cb\u5230\u4e8b\u52a1\u7ed3\u675f\u4e4b\u95f4\u6267\u884c\u7684\u5168\u90e8\u6570\u636e\u5e93\u64cd\u4f5c\u7ec4\u6210\u3002 \u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\uff0c\u5373\u5f53\u4e00\u6761 SQL \u8bed\u53e5\u6267\u884c\u5b8c\u6210\u540e\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u5c06\u81ea\u52a8\u63d0\u4ea4\u8be5\u8bed\u53e5\u6240\u5728\u4e8b\u52a1\u3002\u5728\u865a\u8c37 JDBC \u9a71\u52a8\u4e2d\u63a7\u5236\u4e8b\u52a1\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a - \u901a\u8fc7\u6570\u636e\u5e93\u8fde\u63a5 URL \u4e32\u7684 auto_commit \u5c5e\u6027\uff0c\u63a7\u5236\u4e8b\u52a1\u7684\u5f00\u542f\u4e0e\u5173\u95ed\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b auto_commit \u5c5e\u6027\u4e3a on\uff0c\u5373\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u3002 - \u901a\u8fc7 Connection \u7c7b\u7684 setAutoCommit(boolean commit) \u65b9\u6cd5\u63a7\u5236\u4e8b\u52a1\u7684\u5f00\u542f\u4e0e\u5173\u95ed\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b commit \u5c5e\u6027\u4e3a TRUE\uff0c\u5373\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u3002 \u5728\u7981\u7528\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u4e0b\uff0c\u4f7f\u7528 Connection \u7c7b\u7684 commit() \u65b9\u6cd5\u63d0\u4ea4 SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u505a\u7684\u66f4\u6539\uff0c\u800c Connection \u7c7b\u7684 rollback() \u65b9\u6cd5\u5c06\u56de\u6eda SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u7684\u66f4\u6539\uff0c\u4e0a\u8ff0\u4e24\u79cd\u65b9\u6cd5\u6267\u884c\u5b8c\u6210\u540e\u5747\u5c06\u91ca\u653e\u4e8b\u52a1\u6301\u6709\u7684\u5168\u90e8\u9501\u8d44\u6e90\u3002 \u4e8b\u52a1\u4ec5\u5bf9\u6570\u636e\u5e93 DML \u64cd\u4f5c\u6709\u6548\u3002 {.is-info} \u4ee5\u4e0b\u4e3a\u4f7f\u7528 setAutoCommit() \u65b9\u6cd5\u63a7\u5236\u4e8b\u52a1\u63d0\u4ea4\u7684\u793a\u4f8b\u4ee3\u7801\uff1a //\u8bbe\u7f6e\u4e8b\u52a1\u4e3a\u975e\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f conn.setAutoCommit(false)\u037e //\u521b\u5efa\u6570\u636e\u5e93Statement\u5bf9\u8c61 Statement stm = conn.createStatement()\u037e //\u6570\u636e\u5e93\u4e8b\u52a1\u6267\u884cSQL\u8bed\u53e5 String sql = \"insert into test (comp_id,comp_name) values(1,'comp')\"\u037e //\u6267\u884c\u9759\u6001SQL\u8bed\u53e5 stm.execute(sql)\u037e //\u6570\u636e\u5e93\u9884\u5904\u7406SQL\u8bed\u53e5 PreparedStatement pstm = conn. prepareStatement(\u201cupdate test set id=? where comp_name=?\u201d) //\u9884\u5904\u7406SQL\u8bed\u53e5\u7b2c\u4e00\u4e2a\u53c2\u6570\u8d4b\u503c pstm.setInt(1,15)\u037e //\u9884\u5904\u7406SQL\u8bed\u53e5\u7b2c\u4e8c\u4e2a\u53c2\u6570\u8d4b\u503c pstm.setString(2,'DBMS')\u037e //\u6267\u884c\u9884\u5904\u7406SQL\u8bed\u53e5 pstm.execute()\u037e //\u63d0\u4ea4\u4e8b\u52a1 conn.commit()\u037e //\u5220\u9664\u8868\u4e2d\u6307\u5b9a\u884c\u6570\u636e stm.execute(\u201cdelete from test where id=15\u201d)\u037e //\u4e8b\u52a1\u56de\u6eda\u65b9\u6cd5 conn.rollback()\u037e \u4e0a\u9762\u4ee3\u7801\u4e2d\u6267\u884c\u63d0\u4ea4\u4e8b\u52a1\u64cd\u4f5c\uff0c\u6267\u884c\u9759\u6001 SQL \u8bed\u53e5\u4e0e\u6267\u884c\u9884\u5904\u7406 SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u7684\u66f4\u6539\u5c06\u6c38\u4e45\u751f\u6548\uff1b\u800c\u540e\u6267\u884c\u7684\u5220\u9664\u8868\u4e2d\u6307\u5b9a\u884c\u6570\u636e\u64cd\u4f5c\uff0c\u56e0\u5176\u540e\u8c03\u7528\u7684 rollback() \u65b9\u6cd5\uff0cdelete \u547d\u4ee4\u5bf9\u6570\u636e\u5e93\u7684\u6570\u636e\u66f4\u6539\u5c06\u88ab\u56de\u6eda\u6389\uff0c\u6545\u800c\u5bf9\u6570\u636e\u5e93\u7684\u5220\u9664\u64cd\u4f5c\u4e0d\u4f1a\u751f\u6548\u3002","title":"6.3.2 \u8fde\u63a5\u4e8b\u52a1\u7ba1\u7406"},{"location":"JDBC9/#633-savepoint","text":"JDBC \u89c4\u8303 3.0 \u4e2d\u4e3a\u4e86\u589e\u52a0\u5bf9\u4e8b\u52a1\u7684\u63a7\u5236\uff0c\u65b0\u589e Savepoint \u63a5\u53e3\uff0c\u5176\u4ee3\u8868\u4e8b\u52a1\u4e2d\u7684\u4e00\u4e2a\u903b\u8f91\u4e8b\u52a1\u70b9\u3002\u5728\u975e\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u4e0b\uff0c\u4e00\u4e2a\u4e8b\u52a1\u4e2d\u53ef\u4ee5\u8bbe\u7f6e\u591a\u4e2a Savepoint\uff0c\u5728\u4ee3\u7801\u4e2d\u8fdb\u884c\u4e8b\u52a1\u56de\u6eda\u64cd\u4f5c\u65f6\uff0c\u53ef\u4ee5\u6307\u5b9a\u4e8b\u52a1\u56de\u6eda\u5230\u6307\u5b9a Savepoint \u4f4d\u7f6e\uff0c\u6307\u5b9a\u56de\u6eda\u4f4d\u7f6e\u524d\u7684\u4e8b\u52a1\u64cd\u4f5c\u4ecd\u7136\u4fdd\u7559\u3002\u6b64\u63a5\u53e3\u5927\u5927\u63d0\u9ad8\u4e86\u4e8b\u52a1\u5904\u7406\u7684\u7c92\u5ea6\uff0c\u65b9\u4fbf\u5e94\u7528\u7a0b\u5e8f\u63a7\u5236\u4e8b\u52a1\u5904\u7406\u903b\u8f91\u3002 \u793a\u4f8b\uff1a\u8fde\u63a5\u4e8b\u52a1\u63a7\u5236\u63a5\u53e3 Savepoint \u4f7f\u7528 //\u8bbe\u7f6e\u975e\u81ea\u52a8\u63d0\u4ea4 conn.setAutoCommit(false); //\u521b\u5efaStatement\u5bf9\u8c61 Statement stm = conn.createStatement(); //\u6267\u884cSQL\u547d\u4ee4 stm.execute(sql1); stm.execute(sql2); //\u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\u70b9save1 java.sql.Savepoint save1 =conn.setSavepoint(\"save_1\"); stm.execute(sql3); //\u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\u70b9save2 java.sql.Savepoint save2 =conn.setSavepoint(\"save_2\"); stm.execute(sql4); //\u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\u70b9save3 java.sql.Savepoint save3 =conn.setSavepoint(\"save_3\"); stm.execute(sql5); //\u56de\u6eda\u4e8b\u52a1\u5230\u56de\u6eda\u70b9save3 conn.rollback(save3); conn.commit(); \u4ee5\u4e0a\u4ee3\u7801\u6bb5\u4e2d\uff0c\u4e8b\u52a1\u6267\u884c\u8bed\u53e5 sql5 \u5c06\u88ab\u56de\u6eda\u6389\u3002","title":"6.3.3 \u8fde\u63a5\u4e8b\u52a1\u63a7\u5236\uff0cSavepoint\u63a5\u53e3"},{"location":"JDBC9/#64-sql","text":"\u5728\u6570\u636e\u5e93\u6807\u51c6\u4e2d\uff0c\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61\u5206\u4e3a\u4e09\u7c7b\uff1a\u6267\u884c\u9759\u6001 SQL \u8bed\u53e5\u7684 Statement \u5bf9\u8c61\u3001\u6267\u884c\u9884\u7f16\u8bd1 SQL \u8bed\u53e5\u7684 PreparedStatement \u5bf9\u8c61\u4ee5\u53ca\u6267\u884c\u6570\u636e\u5e93\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\u7684 CallableStatement \u5bf9\u8c61\u3002","title":"6.4 \u521b\u5efa\u6267\u884cSQL\u8bed\u53e5\u5bf9\u8c61"},{"location":"JDBC9/#641-sqlstatement","text":"Statement \u5bf9\u8c61\u7528\u4e8e\u6267\u884c\u9759\u6001 SQL \u8bed\u53e5\u548c\u83b7\u5f97 SQL \u4ea7\u751f\u7684\u7ed3\u679c\u3002\u5728\u865a\u8c37 JDBC \u9a71\u52a8\u4e2d\uff0c\u865a\u8c37\u6570\u636e\u5e93 DDL \u64cd\u4f5c\u5747\u901a\u8fc7 Statement \u5bf9\u8c61\u6765\u6267\u884c\u3002 Statement \u5bf9\u8c61\u901a\u8fc7 Connection \u7c7b\u7684 createStatement() \u65b9\u6cd5\u521b\u5efa\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a //\u521b\u5efa\u6267\u884cSQL\u8bed\u53e5\u5bf9\u8c61Statement Statement stm = conn.createStatement()\u037e","title":"6.4.1 \u6267\u884cSQL\u5bf9\u8c61Statement"},{"location":"JDBC9/#642-sqlpreparedstatement","text":"PreparedStatement \u5bf9\u8c61\u4f7f\u7528\u65f6\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u5bf9\u6267\u884c SQL \u8bed\u53e5\u8fdb\u884c\u9884\u7f16\u8bd1\u5904\u7406\uff0c\u9884\u7f16\u8bd1 SQL \u8bed\u53e5\u5c06\u5728\u672a\u6765\u7684\u4f7f\u7528\u4e2d\u88ab\u91cd\u7528\u3002\u4e0e Statement \u5bf9\u8c61\u76f8\u6bd4\uff0cPreparedStatement \u5bf9\u8c61\u64cd\u4f5c\u591a\u6761 SQL \u8bed\u53e5\u7684\u6548\u7387\u66f4\u9ad8\u3002 \u7ecf\u8fc7\u9884\u7f16\u8bd1\u5e76\u5b58\u50a8\u5728 PreparedStatement \u5bf9\u8c61\u4e2d\u7684 SQL \u8bed\u53e5\uff0c\u901a\u8fc7 Connection \u7c7b\u7684 prepareStatement() \u65b9\u6cd5\u521b\u5efa\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a //\u521b\u5efa\u6267\u884c\u9884\u7f16\u8bd1SQL\u8bed\u53e5\u5bf9\u8c61PreparedStatement PreparedStatement preStatement = conn.prepareStatement(\u201c\u9884\u7f16\u8bd1SQL\u8bed\u53e5\u201d); \u9884\u5904\u7406 PreparedStatement \u5bf9\u8c61\u76f8\u5bf9\u4e8e\u9759\u6001 Statement \u5bf9\u8c61\u7684\u4f18\u52bf\uff1a - PreparedStatement \u53ef\u4ee5\u52a8\u6001\u4f20\u5165\u53c2\u6570\u503c\uff1b - PreparedStatement \u6bd4 Statement \u66f4\u5feb\uff1b PreparedStatement \u4f1a\u5c06 SQL \u8bed\u53e5\u9884\u7f16\u8bd1\u5728\u6570\u636e\u5e93\u7cfb\u7edf\u4e2d\uff0c\u6267\u884c\u8ba1\u5212\u540c\u6837\u4f1a\u88ab\u7f13\u5b58\u8d77\u6765\uff0c\u5b83\u5141\u8bb8\u6570\u636e\u5e93\u505a\u53c2\u6570\u5316\u67e5\u8be2\u3002\u4f7f\u7528\u9884\u5904\u7406\u8bed\u53e5\u6bd4\u666e\u901a\u7684 Statement \u67e5\u8be2\u66f4\u5feb\uff0c\u56e0\u505a\u7684\u5de5\u4f5c\u66f4\u5c11 (\u6570\u636e\u5e93\u5bf9 SQL \u8bed\u53e5\u7684\u5206\u6790\u3001\u7f16\u8bd1\u3001\u4f18\u5316\u5df2\u7ecf\u5728\u7b2c\u4e00\u6b21\u67e5\u8be2\u524d\u5b8c\u6210\u4e86)\u037e - PreparedStatement \u53ef\u4ee5\u9632\u6b62 SQL \u6ce8\u5165\u5f0f\u653b\u51fb\u3002 PreparedStatement \u5728\u4f7f\u7528\u53c2\u6570\u5316\u67e5\u8be2\u7684\u60c5\u51b5\u4e0b\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u4e0d\u4f1a\u5c06\u53c2\u6570\u7684\u5185\u5bb9\u89c6\u4e3a SQL \u6307\u4ee4\u7684\u4e00\u90e8\u5206\u6765\u5904\u7406\uff0c\u800c\u662f\u5728\u6570\u636e\u5e93\u5b8c\u6210 SQL \u6307\u4ee4\u7684\u7f16\u8bd1\u540e\uff0c\u624d\u5957\u7528\u53c2\u6570\u8fd0\u884c\uff0c\u56e0\u6b64\u5c31\u7b97\u53c2\u6570\u4e2d\u542b\u6709\u7834\u574f\u6027\u7684\u6307\u4ee4\uff0c\u4e5f\u4e0d\u4f1a\u88ab\u6570\u636e\u5e93\u6240\u8fd0\u884c\u3002","title":"6.4.2 \u6267\u884cSQL\u5bf9\u8c61PreparedStatement"},{"location":"JDBC9/#643-callablestatement","text":"CallableStatement \u5bf9\u8c61\u5b9e\u73b0\u4e86\u4ece Java \u5e94\u7528\u7a0b\u5e8f\u4e2d\u8c03\u7528\u6570\u636e\u5e93\u5b58\u50a8\u8fc7\u7a0b\u3002\u4f46\u6b64\u8c03\u7528\u8fc7\u7a0b\u5e76\u4e0d\u5305\u542b\u5b58\u50a8\u8fc7\u7a0b\u672c\u8eab\uff0c\u56e0\u5b58\u50a8\u8fc7\u7a0b\u5b58\u50a8\u5728\u6570\u636e\u5e93\u4e2d\u3002 CallableStatement \u5bf9\u8c61\u4e3a\u6240\u6709\u7684\u6570\u636e\u5e93\u63d0\u4f9b\u4e86\u4e00\u79cd\u4ee5\u6807\u51c6\u5f62\u5f0f\u8c03\u7528\u5b58\u50a8\u8fc7\u7a0b\u7684\u65b9\u6cd5\uff0c\u901a\u8fc7 Connection \u7c7b\u7684 prepareCall() \u65b9\u6cd5\u521b\u5efa\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a //\u521b\u5efa\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u5bf9\u8c61CallableStatement CallableStatement cstmt= conn.prepareCall(\u201c{call \u5b58\u50a8\u8fc7\u7a0b\u540d(\u53c2\u6570\u8868\u5217)}\u201d);","title":"6.4.3 \u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u5bf9\u8c61CallableStatement"},{"location":"JDBC9/#644-sql","text":"\u5728\u521b\u5efa\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61\u65f6\uff0c\u53ef\u901a\u8fc7\u6784\u9020\u65b9\u6cd5\u7684\u4e0d\u540c\u53c2\u6570\u8bbe\u7f6e ResultSet \u5bf9\u8c61\u5c5e\u6027\uff0c\u5c5e\u6027\u5305\u62ec\u7ed3\u679c\u7c7b\u578b ResultSetType\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b ResultSetConcurrency\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b ResultSetHoldability\u3002 ResultSetType \u9ed8\u8ba4\u4e3a ResultSet.TYPE_SCROLL_INSENSITIVE\uff1a\u652f\u6301\u7ed3\u679c\u96c6 backforward\u3001last\u3001first \u7b49\u64cd\u4f5c\uff0c\u5bf9\u6570\u636e\u5e93\u4e2d\u5176\u5b83 session \u8fdb\u884c\u7684\u6570\u636e\u66f4\u6539\u4e0d\u654f\u611f\uff1b ResultSetConcurrency \u9ed8\u8ba4\u4e3a ResultSet.CONCUR_READ_ONLY: \u4e0d\u53ef\u66f4\u65b0\u7ed3\u679c\u96c6\uff1b\u8be5\u5c5e\u6027\u4ea6\u53ef\u66f4\u6539\u4e3a ResultSet.CONCUR_UPDATABLE\uff0c\u652f\u6301\u5728 ResultSet \u4e2d\u5bf9\u8bb0\u5f55\u8fdb\u884c\u4fee\u6539\uff0c\u4fee\u6539\u540e\u8bb0\u5f55\u66f4\u65b0\u5230\u6570\u636e\u5e93\uff0c\u4fee\u6539\u64cd\u4f5c\u53ef\u5305\u542b\u63d2\u5165\u3001\u5220\u9664\u6216\u66f4\u65b0\uff1b ResultSetHoldability \u9ed8\u8ba4\u4e3a ResultSet.HOLD_CURSORS_OVER_COMMIT: \u5728\u4e8b\u52a1 commit \u6216 rollback \u540e\uff0cResultSet \u4ecd\u7136\u53ef\u7528\u3002 Connection \u7c7b\u521b\u5efa Statement \u5bf9\u8c61\u6784\u9020\u65b9\u6cd5\uff1a //Statement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 createStatement(int resultSetType,int resultSetConcurrency)\uff1b //Statement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 createStatement(int resultSetType,int resultSetConcurrency, int resultSetHoldability)\uff1b Connection \u7c7b\u521b\u5efa PreparedStatement \u5bf9\u8c61\u6784\u9020\u65b9\u6cd5\uff1a //PreparedStatement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareStatement(String sql, int resultSetType,int resultSetConcurrency) //PrepareStatment\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareStatement(String sql, int resultSetType,int resultSetConcurrency, int resultSetHoldability) Connection \u7c7b\u521b\u5efa CallableStatement \u5bf9\u8c61\u6784\u9020\u65b9\u6cd5\uff1a //CallableStatement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareCall(String sql, int resultSetType,int resultSetConcurrency) //CallableStatement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareCall(String sql, int resultSetType,int resultSetConcurrency, int resultSetHoldability)","title":"6.4.4 \u6267\u884cSQL\u8bed\u53e5\u5bf9\u8c61\u5c5e\u6027\u6269\u5145"},{"location":"JDBC9/#65-sql","text":"Statement \u5bf9\u8c61\u5b9a\u4e49\u4e86\u591a\u79cd\u6267\u884c SQL \u8bed\u53e5\u7684\u65b9\u6cd5\uff0c\u7528\u6765\u5904\u7406\u8fd4\u56de\u4e0d\u540c\u7ed3\u679c\u7684 SQL \u547d\u4ee4\uff1a - execute(String sql)\uff1a\u6267\u884c\u53ef\u4ee5\u8fd4\u56de\u591a\u4e2a\u7ed3\u679c\u96c6\u7684 SQL \u8bed\u53e5\u8fd4\u56de\u7c7b\u578b\u4e3a boolean\uff0c\u5982\u679c\u8fd4\u56de\u7684\u662f\u66f4\u65b0\u7684\u6570\u76ee\uff0c\u5219\u8fd4\u56de false\uff1b\u5982\u679c\u8fd4\u56de\u7684\u662f ResultSet \u5bf9\u8c61\uff0c\u5219\u8fd4\u56detrue\u3002 - executeQuery(String sql)\uff1a\u6267\u884c\u8fd4\u56de\u5355\u4e2a ResultSet \u7684 SQL \u8bed\u53e5\u8fd4\u56de\u7c7b\u578b\u4e3a ResultSet \u5bf9\u8c61\u3002 - executeUpdate()\uff1a\u6267\u884c SQL INSERT\u3001UPDATE \u6216 DELETE \u8bed\u53e5\u8fd4\u56de\u503c\u4e3a int \u578b\uff0c\u6570\u636e\u5e93\u53d7\u5f71\u54cd\u7684\u884c\u8ba1\u6570\u3002 - \u6279\u5904\u7406\u65b9\u6cd5\uff1a\u6279\u91cf\u6267\u884c SQL \u8bed\u53e5 clearBatch()\uff1a\u6e05\u7a7a\u5386\u53f2 batch \u547d\u4ee4\uff1b addBatch(String sql)\uff1a\u6dfb\u52a0\u8981\u6267\u884c\u7684 sql\uff1b executeBatch()\uff1a\u6279\u91cf\u6267\u884c sql\u3002 PreparedStatement \u7ee7\u627f\u81ea Statement\uff0c\u5b9a\u4e49\u4e86\u5927\u91cf\u7684 setter \u65b9\u6cd5\u7528\u4e8e\u8bbe\u7f6e\u52a8\u6001 sql\u7684\u53c2\u6570\uff0c\u56e0\u6b64 PreparedStatement \u652f\u6301\u52a8\u6001\u4f20\u53c2\uff1b\u53e6\u5916 PreparedStatement \u5185\u90e8\u5b58\u50a8\u4e86\u89e3\u6790\u7684 sql\uff0c\u53ef\u4ee5\u591a\u6b21\u6267\u884c\u800c\u65e0\u9700\u91cd\u590d\u89e3\u6790\u3002PreparedStatement \u7ee7\u627f\u81ea Statement\uff0cCallableStatement \u7ee7\u627f\u81ea PreparedStatement\uff0c\u6545\u800c\u4e09\u8005\u6267\u884c SQL \u8bed\u53e5\u7684\u65b9\u5f0f\u53ef\u901a\u7528\u3002","title":"6.5 \u6267\u884cSQL\u8bed\u53e5"},{"location":"JDBC9/#651-statement","text":"\u901a\u8fc7 Statement \u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c\u9700\u8981\u6ce8\u610f\u7684\u4e8b\u9879\uff1a - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u524d\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u8bbe\u7f6e\u4e3a FALSE\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\uff0c\u5e76\u8fdb\u884c\u624b\u52a8\u63d0\u4ea4\uff08commit\uff09\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u540e\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u6062\u590d\u4e3a TRUE\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u5f02\u5e38\u53d1\u751f\u65f6\uff0c\u8fdb\u884c rollback(\u56de\u6eda)\u3002 \u793a\u4f8b\uff1a\u901a\u8fc7 Statement \u6279\u91cf\u64cd\u4f5c\u6570\u636e try { //\u521b\u5efaStatement\u5bf9\u8c61 stm = con.createStatement(); //\u8bbe\u7f6e\u4e8b\u52a1\u975e\u81ea\u52a8\u63d0\u4ea4 con.setAutoCommit(false); // \u6dfb\u52a0\u591a\u6761SQL\u8bed\u53e5\u5230\u6279\u5904\u7406\u4e2d stm.addBatch(\"insert into student values(23,'tangbao','\u9ad8\u6570',100)\"); stm.addBatch(\"insert into student values(24,'\u738b\u5b9a','c#',98)\"); stm.addBatch(\"insert into student values(25,'\u738b\u56fd\u4e91','java',90)\"); //\u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c stm.executeBatch(); System.out.println(\"\u63d2\u5165\u6210\u529f!\"); //\u6267\u884c\u6210\u529f\u540e\u8fdb\u884c\u6570\u636e\u63d0\u4ea4 con.commit(); System.out.println(\"\u63d0\u4ea4\u6210\u529f!\"); //\u5173\u95ed\u975e\u81ea\u52a8\u63d0\u4ea4 con.setAutoCommit(true); } catch (SQLException e) { if (!con.isClosed()) { con.rollback(); //\u51fa\u73b0\u5f02\u5e38\uff0c\u56de\u6eda\u4e8b\u52a1 System.out.println(\"\u63d0\u4ea4\u5931\u8d25\uff0c\u56de\u6eda\uff01\"); con.setAutoCommit(true); //\u5173\u95ed\u975e\u81ea\u52a8\u63d0\u4ea4 } } finally { if (stmt != null) { //\u5173\u95ed\u64cd\u4f5c\u5bf9\u8c61 stmt.close(); } }","title":"6.5.1 \u901a\u8fc7Statement\u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c"},{"location":"JDBC9/#652-preparedstatement","text":"\u901a\u8fc7 PreparedStatement \u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c\u9700\u8981\u6ce8\u610f\u7684\u4e8b\u9879\uff1a - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u524d\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u8bbe\u7f6e\u4e3a FALSE\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\uff0c\u5e76\u8fdb\u884c\u624b\u52a8\u63d0\u4ea4\uff08commit\uff09\uff0c\u6570\u636e\u91cf\u5927\u65f6\uff0c\u8bbe\u7f6e\u624b\u52a8\u63d0\u4ea4\u95f4\u9694\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u540e\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u6062\u590d\u4e3a TRUE\uff1b \u2022 \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u5f02\u5e38\u53d1\u751f\u65f6\uff0c\u8fdb\u884c rollback(\u56de\u6eda)\uff1b - PreparedStatement \u6267\u884c\u8bed\u53e5\u4e0d\u80fd\u4e3a DDL \u8bed\u53e5\u3002 \u793a\u4f8b\uff1a\u5c06 10000 \u6761\u8bb0\u5f55\u63d2\u5165\u6570\u636e\u5e93\u4e2d\uff0c\u6bcf 100 \u6761\u6267\u884c\u4e00\u6b21\u63d0\u4ea4\u64cd\u4f5c try{ conn.setAutoCommit(false); //\u8bbe\u7f6e\u975e\u81ea\u52a8\u63d0\u4ea4 //\u521b\u5efaPreparedStatement\u5bf9\u8c61 ps = conn.prepareStatement(\"insert into testtab values (?, ?, ?)\"); //\u5faa\u73af\u6dfb\u52a0\u6279\u5904\u7406\u6570\u636e for(int i = 0;i<list.size();i++){ HashMap map = list.get(i);//list\u4e3a\u6570\u636e\u5c01\u88c5\uff0c\u6b64\u5904\u7565 ps.setString(1, map.get(\"id\").toString()); ps.setString(2, map.get(\"name\").toString()); ps.setString(3, map.get(\"age\").toString()); ps.addBatch(); if(mod(i,100)==0){//\u6bcf100\u6761\u6267\u884c\u4e00\u6b21\u6267\u884c\u64cd\u4f5c ps.executeBatch();//\u6267\u884c\u6279\u91cf\u63d2\u5165 conn.commit();//\u6267\u884c\u4e8b\u52a1\u63d0\u4ea4 } } ps.executeBatch();//\u6267\u884c\u6279\u91cf\u63d2\u5165 conn.commit(); //\u63d0\u4ea4\u4e8b\u52a1 }catch(Exception e){ if (!conn.isClosed()) { conn.rollback(); //\u51fa\u73b0\u5f02\u5e38\uff0c\u56de\u6eda\u4e8b\u52a1 System.out.println(\"\u63d0\u4ea4\u5931\u8d25\uff0c\u56de\u6eda\uff01\"); conn.setAutoCommit(true); //\u5173\u95ed\u975e\u81ea\u52a8\u63d0\u4ea4 } } finally { if (ps!= null) { ps.close();//\u5173\u95ed\u64cd\u4f5c\u5bf9\u8c61 } }","title":"6.5.2 \u901a\u8fc7PreparedStatement\u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c"},{"location":"JDBC9/#653-callablestatement","text":"CallableStatement \u5b58\u5728\u4e09\u79cd\u7c7b\u578b\u7684\u53c2\u6570 IN\u3001OUT \u548c INOUT\u3002 - IN\uff1a\u521b\u5efa SQL \u8bed\u53e5\u65f6\u5176\u53c2\u6570\u503c\u672a\u77e5\u3002\u4f7f\u7528 setXXX() \u65b9\u6cd5\u5c06\u503c\u7ed1\u5b9a\u5230 IN \u53c2\u6570\u3002 - OUT\uff1a\u7531 SQL \u8bed\u53e5\u8fd4\u56de\u7684\u53c2\u6570\u503c\u3002\u53ef\u4ee5\u4f7f\u7528 getXXX() \u65b9\u6cd5\u4ece OUT \u53c2\u6570\u4e2d\u68c0\u7d22\u503c\u3002 - INOUT\uff1a\u63d0\u4f9b\u8f93\u5165\u548c\u8f93\u51fa\u503c\u7684\u53c2\u6570\u3002\u4f7f\u7528 setXXX() \u65b9\u6cd5\u7ed1\u5b9a\u53d8\u91cf\u5e76\u4f7f\u7528getXXX() \u65b9\u6cd5\u68c0\u7d22\u503c\u3002 \u793a\u4f8b 1\uff1a\u901a\u8fc7\u53c2\u6570\u4e0b\u6807\u7ed1\u5b9a\u53c2\u6570 //\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\u8bed\u53e5 String sql =\"{call pro_2(?,?,?)}\"; //\u521b\u5efaCallableStatement\u5bf9\u8c61 CallableStatement cstm = conn.prepareCall(sql); //\u901a\u8fc7\u53c2\u6570\u4e0b\u6807\u8bbe\u7f6e\u53c2\u6570(IN\u53c2\u6570) cstm.setInt(1, 20490); //\u6ce8\u518cOUT\u53c2\u6570\u6570\u636e\u7c7b\u578b cstm.registerOutParameter(2, com.xugu.cloudjdbc.Types.VARCHAR); cstm.registerOutParameter(3, com.xugu.cloudjdbc.Types.VARCHAR); //\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528 cstm.execute(); //\u83b7\u53d6\u5b58\u50a8\u8fc7\u7a0b\u8f93\u51fa\u53c2\u6570 String name = (String)cstm.getObject(2); String address = (String)cstm.getObject(3); \u793a\u4f8b 2\uff1a\u901a\u8fc7\u53c2\u6570\u540d\u7ed1\u5b9a\u53c2\u6570 //\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\u8bed\u53e5 CallableStatement pstm = conn.prepareCall(\"insert into tt1 values(:id,:name)\"); //\u901a\u8fc7\u53c2\u6570\u540d\u8bbe\u7f6e\u53c2\u6570(IN\u53c2\u6570) pstm.setInt(\"id\", 1); pstm.setString(\"name\", \"cloud\"); //\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528 pstm.execute();","title":"6.5.3 CallableStatement\u7ed1\u5b9a\u53c2\u6570"},{"location":"JDBC9/#66","text":"ResultSet \u7c7b\u662f\u901a\u8fc7 Statement \u53ca\u5176\u5b50\u7c7b\u6267\u884c SQL \u67e5\u8be2\u8bed\u53e5\u5f97\u5230\u7684\u7ed3\u679c\u96c6\u3002ResultSet \u7c7b\u5305\u542b\u4e09\u4e2a\u91cd\u8981\u5c5e\u6027\uff1aResultSet \u5bf9\u8c61\u5e76\u53d1\u6a21\u5f0f\u3001ResultSet \u5bf9\u8c61\u5149\u6807\u5904\u7406\u65b9\u5411\u3001ResultSet \u5bf9\u8c61\u5149\u6807\u7c7b\u578b\u3002ResultSet \u7c7b\u5177\u6709\u6307\u5411\u5f53\u524d\u7ed3\u679c\u96c6\u6570\u636e\u884c\u4f4d\u7f6e\u5149\u6807\uff0c\u5149\u6807\u4f4d\u7f6e\u521d\u59cb\u88ab\u7f6e\u4e8e\u7b2c\u4e00\u884c\u4e4b\u524d\uff0c\u901a\u8fc7 ResultSet \u7c7b\u5c01\u88c5\u7684\u5149\u6807\u79fb\u52a8\u65b9\u6cd5\u5b9e\u73b0\u5bf9\u5149\u6807\u4f4d\u7f6e\u7684\u63a7\u5236\uff0c\u5f53 ResultSet \u5bf9\u8c61\u7684\u5149\u6807\u79fb\u81f3\u6570\u636e\u7ed3\u679c\u96c6\u672b\u5c3e\u65f6 (\u4e0b\u4e00\u884c\u65e0\u6570\u636e)\uff0c\u8fd4\u56de FALSE\u3002 \u5728\u865a\u8c37 JDBC \u4e2d\uff0cResultSet \u7c7b\u5206\u4e3a\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u548c\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\uff08\u901a\u8fc7 URL \u8fde\u63a5\u4e32\u53c2\u6570 recv_mode \u914d\u7f6e\uff09\u3002\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u9ed8\u8ba4\u5c5e\u6027\u4e3a\u4e0d\u53ef\u66f4\u65b0\u3001\u5411\u524d\u79fb\u52a8\u3001\u53ef\u4ee5\u6eda\u52a8\uff1b\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u9ed8\u8ba4\u5c5e\u6027\u4e3a\u4e0d\u53ef\u66f4\u65b0\u3001\u53ea\u5411\u524d\u79fb\u52a8\u3001\u4e0d\u53ef\u6eda\u52a8\u3002 Statement \u5bf9\u8c61\u6267\u884c SQL \u8bed\u53e5\u8fd4\u56de\u7ed3\u679c\u96c6\u4ec5\u80fd\u662f\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\uff0c\u800c PreparedStatement \u5bf9\u8c61\u6267\u884c SQL \u8bed\u53e5\u8fd4\u56de\u7ed3\u679c\u96c6\u53ef\u4e3a\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u6216\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u3002 \u5f53\u6267\u884c SQL \u8fd4\u56de\u6570\u636e\u7ed3\u679c\u96c6\u8f83\u5927\u65f6\uff0c\u5efa\u8bae\u4f7f\u7528\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\uff0c\u907f\u514d JVM \u7684\u6ea2\u51fa\u3002 {.is-info}","title":"6.6 \u5904\u7406\u6267\u884c\u7ed3\u679c"},{"location":"JDBC9/#661-resultset","text":"\u521b\u5efa Statement \u5bf9\u8c61\u65f6\uff0c\u8bbe\u7f6e Statement \u5c5e\u6027 RresultSetConcurrency \u4e3a ResultSet.CONCUR_UPDATABLE\uff0c\u5e76\u4e14\u6570\u636e\u5e93 URL \u8fde\u63a5\u4e32\u5c5e\u6027 return_rowid \u8bbe\u7f6e\u4e3a TRUE\u65f6\uff0cStatement \u5bf9\u8c61\u6267\u884c SQL \u8bed\u53e5\u8fd4\u56de\u7684 ResultSet \u7ed3\u679c\u96c6\u624d\u80fd\u88ab\u66f4\u65b0\u3002\u5f53 ResultSet \u5bf9\u8c61\u4e3a\u53ef\u66f4\u65b0\u7ed3\u679c\u96c6\u65f6\uff0c\u5c06\u5149\u6807\u79fb\u81f3\u63d2\u5165\u4f4d\u7f6e\uff0c\u53ef\u8c03\u7528 ResultSet \u7c7b\u5bf9\u5e94\u7684 update \u65b9\u6cd5\u4fee\u6539\u7ed3\u679c\u96c6\u4e2d\u884c\u6570\u636e\uff0c\u5e76\u901a\u8fc7 updateRow \u65b9\u6cd5\u5c06\u66f4\u6539\u6570\u636e\u66f4\u65b0\u5230\u6570\u636e\u5e93\u4e2d\u3002 \u793a\u4f8b\uff1a\u901a\u8fc7\u4fee\u6539\u7ed3\u679c\u96c6\u4e2d\u6570\u636e\u503c\u66f4\u6539\u6570\u636e\u5e93\u4e2d\u5bf9\u5e94\u8bb0\u5f55 //\u521b\u5efaStatement\u5bf9\u8c61\u5e76\u8bbe\u7f6e\u7ed3\u679c\u96c6\u5c5e\u6027\u4e3a\u53ef\u66f4\u65b0 Statement stm = conn.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_UPDATABLE); //\u6267\u884cSQL\u8bed\u53e5 ResultSet rs = stm.executeQuery(sql); //\u7ed3\u679c\u96c6\u904d\u5386 while(rs.next()) { //\u66f4\u65b0\u7ed3\u679c\u96c6\u4e2d\u6307\u5b9a\u5217\u6570\u636e rs.updateLong(1, 5); //\u66f4\u65b0\u7ed3\u679c\u96c6\u4e2d\u6307\u5b9a\u5217\u6570\u636e rs.updateFloat(3, 12.3f); //\u7ed3\u679c\u96c6\u53d8\u66f4\u56de\u5199\u5165\u6570\u636e\u5e93 rs.updateRow(); } \u901a\u8fc7\u8c03\u7528 ResultSet \u7c7b\u7684 next()\u3001previous()\u3001absolute(int) \u65b9\u6cd5\u79fb\u52a8\u5149\u6807\u4f4d\u7f6e\uff0c\u5c06\u5149\u6807\u4f4d\u7f6e\u79fb\u52a8\u5230\u6307\u5b9a\u6570\u636e\u884c\uff0c\u901a\u8fc7 ResultSet \u7c7b\u5bf9\u5e94\u7684 get \u65b9\u6cd5\u83b7\u53d6\u884c\u6570\u636e\u3002 \u5982\u4f7f\u7528\u7ed3\u679c\u96c6\u66f4\u65b0\u6570\u636e\u5e93\u6570\u636e\uff0c\u9700\u5728\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65f6\uff0c\u8bbe\u7f6e\u8fde\u63a5\u5c5e\u6027 return_rowid \u4e3aTRUE\uff0c\u4e14\u5728\u751f\u6210\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61\u65f6\uff0c\u5e76\u53d1\u5c5e\u6027\u6307\u5b9a\u4e3a ResultSet.CONCUR_UPDATABLE\u3002 {.is-info}","title":"6.6.1 \u66f4\u65b0ResultSet\u7ed3\u679c\u96c6"},{"location":"JDBC9/#662","text":"\u793a\u4f8b 1\uff1a \u7edf\u8ba1\u7ed3\u679c\u96c6\u603b\u6761\u6570 //\u521b\u5efaStatement\u5bf9\u8c61 Statement stm= conn.createStatement(); stm.execute(\"create table test(id int identity(1,1));insert into test values(default)\"); //\u6267\u884c\u7ed3\u679c\u96c6\u67e5\u8be2 ResultSet rs = stm.executeQuery(\"select * from test\") //\u79fb\u52a8\u5149\u6807\u81f3\u7ed3\u679c\u96c6\u672b\u5c3e rs.last(); //\u83b7\u53d6\u7ed3\u679c\u96c6\u884c\u6570 int rsCounts = rs.getRow();","title":"6.6.2 \u901a\u8fc7\u79fb\u52a8\u5149\u6807\u83b7\u53d6\u7ed3\u679c\u96c6\u6761\u6570"},{"location":"JDBC9/#663","text":"\u865a\u8c37 JDBC \u652f\u6301\u591a\u7ed3\u679c\u96c6\u5904\u7406\uff0c\u5141\u8bb8 Statement \u63a5\u53e3\u652f\u6301\u591a\u91cd\u6253\u5f00\u7684 ResultSet \u5bf9\u8c61\u3002\u6267\u884c\u8bed\u53e5\u53ef\u4ee5\u662f\u591a\u6761 SQL \u8bed\u53e5\u7684\u96c6\u5408\uff0c\u5373\u4e00\u6b21\u6027\u5411\u865a\u8c37\u670d\u52a1\u5668\u53d1\u9001\u591a\u6761 SQL \u8bed\u53e5\uff0c\u865a\u8c37\u670d\u52a1\u5668\u6267\u884c\u5b8c SQL \u8bed\u53e5\u540e\u8fd4\u56de\u591a\u4e2a\u6267\u884c\u7ed3\u679c\uff1b\u4ea6\u6216\u5b58\u50a8\u8fc7\u7a0b\u5b9a\u4e49\u6709\u591a\u4e2a\u8fd4\u56de\u7ed3\u679c\u96c6\u3002\u865a\u8c37 JDBC \u7684 Statement \u91cd\u8f7d\u4e86 Statement \u63a5\u53e3\u4e2d\u7684 getMoreResults() \u65b9\u6cd5\u3002 \u793a\u4f8b\uff1a\u591a\u7ed3\u679c\u96c6\u5904\u7406 //SQL\u8bed\u53e5\u5305\u542b\u591a\u6761\u67e5\u8be2\u547d\u4ee4 String sql=\" SELECT * FROM A1 WHERE D2=(SELECT AVG(D2) FROM A1 GROUP BY D1);SELECT * FROM A1 WHERE D2>(SELECT MIN(D2) FROM A1 GROUP BY D1)\"; //\u521b\u5efaStatement\u5bf9\u8c61 Statement stm = conn.createStatement(); //\u6267\u884cSQL\u8bed\u53e5 boolean f = stm.execute(sql); //\u5224\u65ad\u662f\u5426\u6709ResultSet\u5bf9\u8c61\u4ea7\u751f if(f == true){ //\u83b7\u53d6\u7ed3\u679c\u96c6\u5bf9\u8c61 ResultSet rs1 = stm.getResultSet(); ... ... ... ... } while(true) { //\u5224\u65adStatement\u662f\u5426\u8fd4\u56de\u4e86\u591a\u4e2aResultSet\u5bf9\u8c61 if(!stm.getMoreResults(Statement.CLOSE_CURRENT_RESULT)){ break; } else if((rs2 = cstm.getResultSet())!=null) { ... ... ... ...//\u6570\u636e\u5904\u7406\u90e8\u5206\u7701\u7565 } }","title":"6.6.3 \u591a\u7ed3\u679c\u96c6\u5904\u7406"},{"location":"JDBC9/#664","text":"\u865a\u8c37JDBC\u4e2d\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u751f\u6210\u9700\u6ee1\u8db3\u4e24\u4e2a\u6761\u4ef6\uff1aURL\u8fde\u63a5\u4e32\u5c5e\u6027recv_mode\u503c\u4e3a2\uff0cStatement\u5bf9\u8c61\u6267\u884cSQL\u8bed\u53e5\u4e3a\u5355\u6761SELECT\u8bed\u53e5\u3002 \u5e94\u7528\u7a0b\u5e8f\u7aef\u901a\u8fc7Statement\u7c7b\u7684setFetchSize(int)\u65b9\u6cd5\u6216ResultSet\u7c7b\u7684setFetchSize(int)\u65b9\u6cd5\u8bbe\u7f6e\u6bcf\u6b21\u4ece\u670d\u52a1\u5668\u7aef\u83b7\u53d6\u591a\u5c11\u6761\u6570\u636e\u3002 \u4f7f\u7528\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7684 ResultSet \u5bf9\u8c61\uff0c\u5149\u6807\u53ea\u80fd\u5355\u5411\u5411\u524d\u6b63\u5411\u79fb\u52a8\uff0c\u4e0d\u80fd\u5411\u540e\u79fb\u52a8\u6216\u6765\u56de\u6eda\u52a8\u3002 {.is-info} \u793a\u4f8b\uff1a\u865a\u8c37\u6570\u636e\u5e93\u670d\u52a1\u5668\u7aef\u6e38\u6807\u4f7f\u7528 //\u521b\u5efa\u865a\u8c37JDBC\u7279\u6709Statement\u5bf9\u8c61 Statement stm = (com.xugu.cloudjdbc.Statement)conn.createStatement(); //\u5f00\u542f\u670d\u52a1\u5668\u7aef\u6e38\u6807 stm.setServerCursor(true); //\u8bbe\u7f6e\u670d\u52a1\u5668\u7aef\u6e38\u6807\u5355\u6b21\u8fd4\u56de\u6570\u636e\u6761\u6570 stm.setFetchSize(1000); //\u6267\u884cSQL\u8bed\u53e5 ResultSet rs = stm.executeQuery(\"select * from t1\"); //\u904d\u5386\u6570\u636e while\uff08rs.next()\uff09 { ... ... ... ... } //\u5173\u95ed\u670d\u52a1\u5668\u7aef\u6e38\u6807 stm.setServerCursor(false);","title":"6.6.4 \u670d\u52a1\u5668\u7aef\u6e38\u6807\u4f7f\u7528"},{"location":"JDBC9/#665-generatedkeys","text":"JDBC 3.0 \u89c4\u8303\u4e2d\u5bf9\u4e8e\u81ea\u52a8\u4ea7\u751f\u7684\u5173\u952e\u5b57\u6570\u503c\uff0c\u5b9a\u4e49\u4e86\u63a5\u53e3\u89c4\u8303\uff0c\u5373\uff1agetGeneratedKeys() \u65b9\u6cd5\u3002 \u4e3a\u4e86\u89e3\u51b3\u5bf9\u83b7\u53d6\u81ea\u52a8\u4ea7\u751f\u7684\u6216\u81ea\u52a8\u589e\u52a0\u7684\u5173\u952e\u5b57\u7684\u503c\u7684\u9700\u6c42\uff0c\u865a\u8c37 JDBC \u6839\u636e JDBC3.0 \u89c4\u8303\u63d0\u4f9b\u4e86\u83b7\u5f97\u5173\u952e\u5b57\u503c\u7684\u65b9\u6cd5\u3002\u83b7\u53d6\u5173\u952e\u5b57\u7684\u503c\uff0c\u9700\u8981\u5728\u6267\u884c\u65b9\u6cd5\u4e2d\u6307\u5b9a\u81ea\u589e\u5173\u952e\u5b57\u6807\u8bb0\u3002SQL \u8bed\u53e5\u6267\u884c\u5b8c\u540e\uff0c\u8c03\u7528 Statement \u5bf9\u8c61\u7684 getGeneratedKeys() \u65b9\u6cd5\uff0c\u83b7\u5f97\u5305\u542b\u81ea\u589e\u957f\u503c\u7684 ResultSet \u5bf9\u8c61\u3002 \u793a\u4f8b\uff1a\u83b7\u53d6\u6570\u636e\u5e93\u81ea\u589e\u957f\u5173\u952e\u5b57\u7684\u503c //\u521b\u5efaStatement\u5bf9\u8c61 Statement stmt = conn.createStatement(); //\u6307\u5b9a\u81ea\u589e\u957f\u5173\u952e\u5b57\u7684\u6807\u8bc6 String[] colN = {\"id\"}; //\u5728\u6267\u884c\u65b9\u6cd5\u4e2d\u5f15\u5165\u81ea\u589e\u957f\u5173\u952e\u5b57\u6807\u8bc6 stmt.executeUpdate(\"INSERT INTO authors(first_name, last_name) VALUES (\u2018Ghq\u2019, \u2018Wxl\u2019)\",colN); //\u83b7\u53d6\u7ed3\u679c\u96c6 ResultSet rs = stmt.getGeneratedKeys(); if ( rs.next() ) { //\u83b7\u53d6\u7ed3\u679c\u96c6\u4e2d\u7684\u81ea\u589e\u957f\u503c \u3000\u3000 int key = rs.getInt(); }","title":"6.6.5 \u68c0\u7d22\u81ea\u52a8\u4ea7\u751f\u7684\u5173\u952e\u5b57GeneratedKeys"},{"location":"JDBC9/#67","text":"\u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u56e0\u5904\u7406\u9700\u8981\u6240\u5efa\u7acb\u7684 ResultSet\u3001Statement\u3001PreparedStatement \u7b49\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61\uff0c\u5728\u4f7f\u7528\u5b8c\u540e\u5fc5\u987b\u5173\u95ed\u3002\u5173\u95ed\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61\uff0c\u76f4\u63a5\u8c03\u7528\u5bf9\u5e94\u7684\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61 close() \u65b9\u6cd5\u5373\u53ef\u3002 \u5f53\u4e0d\u518d\u9700\u8981\u548c\u865a\u8c37\u6570\u636e\u5e93\u8fdb\u884c\u4ea4\u4e92\u65f6\uff0c\u9700\u65ad\u5f00\u6570\u636e\u5e93\u8fde\u63a5\u3002\u8c03\u7528 Connection \u7c7b\u7684 close() \u65b9\u6cd5\u5373\u4f1a\u5173\u95ed\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u540c\u65f6\u91ca\u653e\u8fde\u63a5\u4e0a\u6240\u6301\u6709\u7684\u6240\u6709\u6570\u636e\u5e93\u8d44\u6e90\u3002 \u6570\u636e\u5e93\u8fde\u63a5\u4e3a\u975e\u81ea\u52a8\u63d0\u4ea4\u65f6\uff0c\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61\u5728\u4f7f\u7528\u5b8c\u540e\uff0c\u82e5\u672a\u53ca\u65f6\u5173\u95ed\uff0c\u6b64\u65f6\u8fdb\u884c DDL \u64cd\u4f5c\u5c06\u4f1a\u5bfc\u81f4\u865a\u8c37\u6570\u636e\u5e93\u52a0\u9501\u8d85\u65f6\u6216\u5931\u8d25\u3002 {.is-info}","title":"6.7 \u91ca\u653e\u8d44\u6e90"},{"location":"JDBC9/#_4","text":"JDBC 3.0 \u89c4\u8303\u5b9a\u4e49\u6709 java.sql.Blob \u4e0e java.sql.Clob \u63a5\u53e3\uff0c\u6b64\u4e24\u7c7b\u63a5\u53e3\u4e3a\u6570\u636e\u5e93\u5927\u5bf9\u8c61\u6570\u636e\u5904\u7406\u63a5\u53e3\u3002\u865a\u8c37\u6570\u636e\u5e93\u5927\u5bf9\u8c61\u5b57\u6bb5\u7c7b\u578b\u5305\u542b\uff1ablob\u3001clob\u3001binary\u3002 \u5728\u865a\u8c37 JDBC \u4e2d\uff0c\u83b7\u53d6\u5927\u5bf9\u8c61\u6570\u636e\u6709\u4e24\u79cd\u8fd4\u56de\u65b9\u5f0f\uff1a\u4e00\u79cd\u662f\u6570\u636e\u76f4\u63a5\u8fd4\u56de\uff1b\u53e6\u4e00\u79cd\u662f\u8fd4\u56de\u63cf\u8ff0\u7b26\u65b9\u5f0f\u3002\u5f53\u8fd4\u56de\u6570\u636e\u4e2d\u5927\u5bf9\u8c61\u6570\u636e\u8f83\u591a\u65f6\uff0c\u5efa\u8bae\u4f7f\u7528\u8fd4\u56de\u63cf\u8ff0\u7b26\u65b9\u5f0f\uff0c\u4ece\u800c\u907f\u514d\u56e0\u6570\u636e\u8fc7\u591a\u8fc7\u5927\u9020\u6210\u7684 JVM \u5185\u5b58\u6ea2\u51fa\u3002\u865a\u8c37 JDBC \u9a71\u52a8\u542f\u7528\u5927\u5bf9\u8c61\u8fd4\u56de\u63cf\u8ff0\u7b26\u65b9\u5f0f\uff0c\u9700\u5728\u8fde\u63a5 URL \u4e32\u4e0a\u914d\u7f6e\u5c5e\u6027 lob_ret \u4e3a descriptor \u3002","title":"\u4e03. \u5927\u5bf9\u8c61\u7c7b\u578b\u5904\u7406"},{"location":"JDBC9/#71","text":"LOB \u5bf9\u8c61\u7684\u63d2\u5165\u5fc5\u987b\u901a\u8fc7 PreparedStatement\u3001CallableStatement \u7c7b\u7684 setXXX() \u65b9\u6cd5\u65b9\u5f0f\u5b9e\u73b0\u3002\u865a\u8c37 JDBC \u4e2d PreparedStatement \u63d0\u4f9b\u591a\u79cd\u65b9\u6cd5\u8bbe\u7f6e\u5927\u5bf9\u8c61\u53c2\u6570\u503c\uff0c\u5982\u4e0b\u5217\u65b9\u6cd5\uff1a setBinaryStream(int parameterIndex,InputStream x) setBlob(int parameterIndex, Blob x) setBlob(int parameterIndex, InputStream x) setBytes(int parameterIndex,byte[] x) setCharacterStream(int parameterIndex, Reader reader) setClob(int parameterIndex, Clob x) setClob(int parameterIndex, Reader reader) setString(int parameterIndex, String x) \u793a\u4f8b\uff1a\u5e94\u7528\u7a0b\u5e8f\u63d2\u5165\u5927\u5bf9\u8c61\u6570\u636e\uff0c\u5176\u4e2d\u8868 b1 \u5b57\u6bb5 photo \u4e3a blob \u7c7b\u578b\uff0c\u5b57\u6bb5 text \u4e3a clob \u7c7b\u578b PreparedStatement ps = conn.prepareStatement(\"INSERT INTO b1 VALUES (?, ?)\")\u037e // blobBytes is a byte[] type ps.setBlob(1, new com.xugu.cloudjdbc.Blob(blobBytes))\u037e // clobString is a String type ps.setClob(2, new com.xugu.cloudjdbc.Clob(clobString))\u037e ps.execute()\uff1b","title":"7.1 \u5411\u8868\u4e2d\u63d2\u5165\u5927\u5bf9\u8c61"},{"location":"JDBC9/#72","text":"\u901a\u8fc7\u865a\u8c37 JDBC \u83b7\u53d6\u5927\u5bf9\u8c61\u503c\uff0c\u6570\u636e\u5e93 CLOB \u5bf9\u8c61\u53ef\u901a\u8fc7\u5b57\u7b26\u4e32\u5f62\u5f0f\u6216\u6d41\u5f0f\u6570\u636e\u5f62\u5f0f\u83b7\u53d6\uff0c\u6570\u636e\u5e93 BLOB \u5bf9\u8c61\u53ea\u901a\u8fc7\u6d41\u5f0f\u6570\u636e\u5f62\u5f0f\u83b7\u53d6\u3002 \u793a\u4f8b 1\uff1a\u6d41\u5f0f\u83b7\u53d6 CLOB \u5bf9\u8c61 Statement stm = xgConn.createStatement(); String sql=\u201dselect remark from t_clob where id=101\u201d; ResultSet rs = stm.executeQuery(sql); while(rs.next) { Clob data = rs.getClob(\"remark \"); //\u4ee5\u5b57\u7b26\u6d41\u65b9\u5f0f\u83b7\u53d6\u6570\u636e Reader rd = data.getCharacterStream(); char[] sc = new char[1000]; StringBuffer sb = new StringBuffer(); int len = 0; while((len=rd.read(sc)) !=-1) { sb.append(new String(sc,0,len)); } System.out.println(sb.toString()); } \u793a\u4f8b 2\uff1a\u865a\u8c37 JDBC \u5141\u8bb8\u4ee5\u5b57\u7b26\u4e32\u7684\u5f62\u5f0f\u8bfb\u53d6 CLOB \u5bf9\u8c61 String sql=\"select text from t_clob\"\u037e Statement stm=conn.createStatement()\u037e ResultSet rs=stm.executeQuery(sql)\u037e while(rs.next()) { String clobStr =rs.getString(\"text\")\u037e }","title":"7.2 \u67e5\u8be2\u5927\u5bf9\u8c61\u6570\u636e"},{"location":"JDBC9/#_5","text":"\u865a\u8c37\u6570\u636e\u5e93\u662f\u4e00\u6b3e\u5177\u5907\u9ad8\u5b89\u5168\u3001\u9ad8\u6027\u80fd\u3001\u9ad8\u6269\u5c55\u7b49\u7279\u6027\u7684\u3001\u57fa\u4e8e\u5206\u5e03\u5f0f\u67b6\u6784\u7684\u5206\u5e03\u5f0f\u4e8b\u52a1\u578b\u6570\u636e\u5e93\u3002\u90e8\u7f72\u6570\u636e\u5e93\u96c6\u7fa4\u65f6\uff0c\u591a\u53f0\u670d\u52a1\u5668\u4f5c\u4e3a\u4e00\u4e2a\u6574\u4f53\u5bf9\u5916\u63d0\u4f9b\u6570\u636e\u670d\u52a1\u3002\u5728\u591a\u673a\u73af\u5883\u4e0b\uff0c\u4e3a\u4f7f\u6570\u636e\u5e93\u8fde\u63a5\u5747\u5300\u5206\u5e03\u4e8e\u5404\u53f0\u670d\u52a1\uff0c\u865a\u8c37 JDBC \u5728\u63a5\u53e3\u5c42\u5b9e\u73b0\u4e86\u57fa\u4e8e\u8f6f\u8d1f\u8f7d\u5747\u8861\u6280\u672f\u7684\u6570\u636e\u5e93\u8fde\u63a5\u5efa\u7acb\u65b9\u5f0f\u3002 \u865a\u8c37\u6570\u636e\u5e93\u8d1f\u8f7d\u5747\u8861\u5206\u914d\u6570\u636e\u5e93\u8fde\u63a5\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a\u987a\u5e8f\u5206\u914d\u3001\u968f\u673a\u5206\u914d\u3002\u901a\u8fc7\u5728\u6570\u636e\u5e93 URL \u8fde\u63a5\u4e32\u4e0a\u8bbe\u7f6e\u53c2\u6570 conn_type(conn_type:1, \u968f\u673a\u5206\u914d\uff1b2, \u987a\u5e8f\u5206\u914d) \u7c7b\u578b\uff0c\u5b9e\u73b0\u6570\u636e\u5e93\u8fde\u63a5\u5728\u591a\u96c6\u7fa4\u73af\u5883\u4e0b\u7684\u8d1f\u8f7d\u5747\u8861\u3002\u9ed8\u8ba4\u8d1f\u8f7d\u5747\u8861\u5206\u914d\u65b9\u5f0f\uff1a\u987a\u5e8f\u5206\u914d\u3002 \u865a\u8c37 JDBC \u63d0\u4f9b\u4e09\u79cd\u914d\u7f6e\u8d1f\u8f7d\u5747\u8861\u7684\u65b9\u5f0f\uff1a\u6570\u636e\u5e93 URL \u8fde\u63a5\u4e32\u914d\u7f6e\u3001\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u6027\u6587\u4ef6 Properties \u914d\u7f6e\u3001\u6570\u636e\u5e93\u8fde\u63a5 XML \u6587\u4ef6\u914d\u7f6e\u3002 1. URL \u8fde\u63a5\u4e32\u914d\u7f6e Class.forName(\"com.xugu.cloudjdbc.Driver\"); //URL\u8fde\u63a5\u4e32\u4e2d\u4f7f\u7528ips\u5c5e\u6027\u914d\u7f6e\u591aIP\u8d1f\u8f7d\u5747\u8861 Connection conn = DriverManager.getConnection(\"jdbc:xugu://192.168.0.201:5138/SYSTEM?user=SYSDBA&password=SYSDBA&conn_type=1&ips=192.168.0.205,192.168.0.204,192.168.1.206\") \u8fde\u63a5\u5c5e\u6027\u6587\u4ef6 Properties \u914d\u7f6e (Vector \u6216\u5b57\u7b26\u4e32\u6570\u7ec4) Properties info=new Properties(); Class.forName(\"com.xugu.cloudjdbc.Driver\"); //Vector\u7ed3\u6784\u5b58\u653e\u8d1f\u8f7d\u5747\u8861\u591aIP\u5730\u5740\u65b9\u5f0f Vector<String> ipsVector=new Vector<String>(); ipsVector.add(\"192.168.1.201\"); ipsVector.add(\"192.168.1.204\"); ipsVector.add(\"192.168.1.205\"); ipsVector.add(\"192.168.1.206\"); info.put(\"ips\", ipsVector); //\u6570\u7ec4\u5b58\u653e\u8d1f\u8f7d\u5747\u8861\u591aIP\u5730\u5740\u65b9\u5f0f String[] ips={\"192.168.1.205\",\"192.168.1.204\",\"192.168.1.206\"}; info.put(\"ips\", ips); Connection conn = DriverManager.getConnection(\"jdbc:xugu://192.168.1.201:5138/SYSTEM?user=SYSDBA&password=SYSDBA&conn_type=2\",info); \u8fde\u63a5\u5c5e\u6027 XML \u6587\u4ef6\u914d\u7f6e <?xml version=\"1.0\" encoding=\"utf-8\"?> <listeners> <listener> <ip>192.168.1.206</ip> </listener> <listener> <ip>192.168.1.204</ip> </listener> <listener> <ip>192.168.1.205</ip> </listener> </listeners> Class.forName(\"com.xugu.cloudjdbc.Driver\"); Connection conn = DriverManager.getConnection(\"jdbc:xugu:file://xuguClouldListener.xml:5138/SYSTEM?user=SYSDBA&password=SYSDBA&conn_type=1\");","title":"\u516b. \u865a\u8c37\u6570\u636e\u5e93\u8d1f\u8f7d\u5747\u8861"},{"location":"xugu/","text":"\u6587\u6863\u5bc6\u7ea7\uff1a\u3010 - \u3011 \u8bf4\u660e\uff1a\u516c\u5f00 \u6587\u6863\u4fee\u8ba2\u5386\u53f2 \u5e8f\u53f7 \u6587\u6863\u7248\u672c \u7a0b\u5e8f\u7248\u672c \u7f16\u64b0\u4eba A-\u589e\u52a0 M-\u66f4\u65b0 D-\u5220\u51cf \u53d8\u66f4\u8bf4\u660e \u5b8c\u6210\u65e5\u671f \u8bc4\u5ba1\u4eba \u8bc4\u5ba1\u65e5\u671f \u8bc4\u5ba1\u7ed3\u679c [\u901a\u8fc7/\u62d2\u7edd] 1 1.0 11.0 \u5468\u5f66\u5f64 A \u6574\u7248\u7f16\u5199 2021-7-12 \u5434\u751f\u52c7 2021-7-12 \u901a\u8fc7 2 2.0 12.0 \u66f9\u831c M \u4fee\u6539\u7b2c\u4e8c\u7ae0\u7c7b\u6269\u5c55\u30014.3\u8fde\u63a5\u53c2\u6570 2022-5-14 \u5468\u5f66\u5f64 2022-5-14 \u901a\u8fc7 3 2.1 12.0 \u66f9\u831c M \u4fee\u6539\u7b2c3.1\u57fa\u672c\u6570\u636e\u7c7b\u578b 2022-6-20 \u5468\u5f66\u5f64 2022-6-20 \u901a\u8fc7 \u4e00. \u865a\u8c37\u6570\u636e\u5e93\u7684JDBC\u9a71\u52a8\u7a0b\u5e8f\u6982\u8ff0 Java \u6570\u636e\u5e93\u8fde\u63a5\uff08Java Database Connectivity\uff0c\u7b80\u79f0 JDBC\uff09\u662f Java \u8bed\u8a00\u4e2d\u7528\u6765\u89c4\u8303\u5ba2\u6237\u7aef\u7a0b\u5e8f\u5982\u4f55\u8bbf\u95ee\u6570\u636e\u5e93\u7684\u5e94\u7528\u7a0b\u5e8f\u63a5\u53e3\uff0c\u63d0\u4f9b\u4e86\u8bf8\u5982\u67e5\u8be2\u548c\u66f4\u65b0\u6570\u636e\u5e93\u4e2d\u6570\u636e\u7684\u65b9\u6cd5\uff0c\u53ef\u4ee5\u4e3a\u591a\u79cd\u5173\u7cfb\u6570\u636e\u5e93\u63d0\u4f9b\u7edf\u4e00\u8bbf\u95ee\u3002JDBC \u63d0\u4f9b\u4e86\u4e00\u79cd\u57fa\u51c6\uff0c\u901a\u8fc7\u6b64\u57fa\u51c6\u6570\u636e\u5e93\u5f00\u53d1\u4eba\u5458\u53ef\u6784\u5efa\u66f4\u9ad8\u7ea7\u7684\u5de5\u5177\u548c\u63a5\u53e3\uff0c\u4e5f\u53ef\u901a\u8fc7\u6b64\u57fa\u51c6\u7f16\u5199\u6570\u636e\u5e93\u5e94\u7528\u7a0b\u5e8f\u3002 \u865a\u8c37\u6570\u636e\u5e93\u7684 JDBC \u9a71\u52a8\u7a0b\u5e8f\uff08\u4ee5\u4e0b\u7b80\u79f0\uff1a\u865a\u8c37 JDBC\uff09\u5b9e\u73b0\u4e86 Java \u7a0b\u5e8f\u548c\u865a\u8c37\u6570\u636e\u5e93\u901a\u4fe1\uff0c\u652f\u6301 SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u7684\u8bbf\u95ee\uff0c\u540c\u65f6\u4e5f\u662f\u6784\u9020\u9ad8\u7ea7 API \u548c\u6570\u636e\u5e93\u5f00\u53d1\u5de5\u5177\u7684\u57fa\u7840\u3002 \u7528\u6237\u60f3\u8981\u5b9e\u73b0\u5bf9\u6570\u636e\u5e93\u7684\u8bbf\u95ee\uff0c\u4e00\u822c\u8981\u7ecf\u8fc7\u5982\u4e0b\u7684\u6b65\u9aa4\uff1a 1. \u901a\u8fc7\u9a71\u52a8\u5668\u7ba1\u7406\u5668\u83b7\u53d6\u8fde\u63a5\u63a5\u53e3\uff1b 2. \u83b7\u5f97 Statement \u6216 Statement \u5b50\u7c7b\uff1b 3. \u901a\u8fc7 Statement \u6267\u884c SQL \u547d\u4ee4\uff1b 4. \u5904\u7406\u6267\u884c\u7ed3\u679c\uff1b 5. \u5173\u95ed Statement\uff1b 6. \u5173\u95ed\u8fde\u63a5\u3002 JDBC \u7ed3\u6784\u56fe, \u5982\u56fe1.1\u6240\u793a\u3002 \u56fe1.1 JDBC\u7ed3\u6784\u56fe \u4f7f\u7528\u865a\u8c37 JDBC \u5b9e\u73b0\u5e94\u7528\u7a0b\u5e8f\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u4e4b\u95f4\u7684\u8fde\u63a5\u670d\u52a1\uff0c\u5e94\u7528\u7a0b\u5e8f\u6240\u5728\u8ba1\u7b97\u673a\u9700\u5df2\u5b89\u88c5 Java \u8fd0\u884c\u73af\u5883\uff08Java Runtime Environment, \u7b80\u79f0 JRE\uff09\u3002\u865a\u8c37 JDBC \u53c2\u7167 JDBC API \u5b9e\u73b0\uff0c\u652f\u6301 JDBC 3.0 \u529f\u80fd\uff0cJava \u5e94\u7528\u7a0b\u5e8f\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u4e4b\u95f4\u7684\u6240\u6709\u64cd\u4f5c\u5747\u9700\u901a\u8fc7\u865a\u8c37 JDBC \u6765\u5b8c\u6210\u3002 \u4f7f\u7528\u865a\u8c37 JDBC \u9700\u8981 JRE 1.6 \u7248\u6216\u66f4\u9ad8\u7248\u672c\u7684 Java \u8fd0\u884c\u65f6\u73af\u5883 (JRE)\u3002 {.is-info} \u4e8c. \u865a\u8c37\u6570\u636e\u5e93\u7684JDBC\u63a5\u53e3\u548c\u5bf9\u8c61\u7c7b JDBC 3.0 \u89c4\u8303\u7531 JDBC 1.0\u3001JDBC 2.0 \u884d\u751f\u800c\u6765\uff0c\u4e3b\u8981\u5305\u542b java.sql \u5305\u4ee5\u53ca javax.sql \u5305\uff0c\u6570\u636e\u5e93 JDBC \u9a71\u52a8\u5b9e\u73b0 JDBC 3.0 \u89c4\u8303\u6240\u5b9a\u4e49\u7684\u7279\u6027\u63a5\u53e3\uff0c\u5373\u53ef\u8fbe\u5230\u5bf9\u6807\u51c6 JDBC 3.0 \u89c4\u8303\u7684\u652f\u6301\u3002 \u865a\u8c37 JDBC \u57fa\u4e8e JDBC 3.0 \u89c4\u8303\u5b9e\u73b0\uff0c\u5b9e\u73b0\u63a5\u53e3\u7c7b\u6620\u5c04\uff0c\u5982\u88682.1\u6240\u793a\u3002 \u88682.1 \u865a\u8c37JDBC\u5b9e\u73b0\u63a5\u53e3\u7c7b | \u63a5\u53e3 | \u865a\u8c37JDBC\u5b9e\u73b0\u7c7b | | ---------------------------------- | ---------------------------------------- | | java.sql.Driver | com.xugu.cloudjdbc.Driver | | java.sql.Connection | com.xugu.cloudjdbc.Connection | | java.sql.Statement | com.xugu.cloudjdbc.Statement | | java.sql.PreparedStatement | com.xugu.cloudjdbc.PreparedStatement | | java.sql.CallableStatement | com.xugu.cloudjdbc.CallableStatement | | java.sql.ResultSet | com.xugu.cloudjdbc.ResultSet | | java.sql.ResultSetMetaData | com.xugu.cloudjdbc.ResultSetMetaData | | java.sql.DatabaseMetaData | com.xugu.cloudjdbc.DatabaseMetaData | | java.sql.PrameterMetaData | com.xugu.cloudjdbc.PrameterMetaData | | java.sql.Types | com.xugu.cloudjdbc.Types | | java.sql.Blob | com.xugu.cloudjdbc.Blob | | java.sql.Clob | com.xugu.cloudjdbc.Clob | | java.sql.Savepoint | com.xugu.cloudjdbc.Savepoint | | javax.sql.DataSource | com.xugu.pool.XgDataSource | | javax.sql.ConnectionPoolDataSource | com.xugu.pool.XgConnectionPoolDataSource | | javx.sql.PooledConnection | com.xugu.pool.XgPooledConnection | \u9664\u4e86\u4ee5\u4e0a\u6807\u51c6\u7c7b\u63a5\u53e3\u5916\uff0c\u865a\u8c37 JDBC \u8fd8\u6269\u5c55\u5b9e\u73b0\u4e86\u4ee5\u4e0b\u7c7b\uff1a - com.xugu.cloudjdbc.ClientInfo - com.xugu.cloudjdbc.OutParameter - com.xugu.cloudjdbc.Rowid - com.xugu.cloudjdbc.SQLXml - com.xugu.cloudjdbc.SSL - com.xugu.pool.StatementWrapper - com.xugu.pool.PreparedStatementWrapper \u4e09. \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b 3.1 \u57fa\u672c\u6570\u636e\u7c7b\u578b \u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b\u3001\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u3001Java \u6570\u636e\u7c7b\u578b\u4e09\u8005\u6620\u5c04\u5173\u7cfb\uff0c\u5982\u88683.1\u6240\u793a\u3002 \u88683.1 \u6570\u636e\u7c7b\u578b\u6620\u5c04\u5173\u7cfb \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b \u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b Java \u6570\u636e\u7c7b\u578b BOOLEAN BOOLEAN boolean SMALLINT SMALLINT short TINYINT TINYINT byte INTEGER INTEGER int BIGINT BIGINT long FLOAT FLOAT float DOUBLE DOUBLE double NUMERIC NUMERIC BigDecimal DECIMAL BigDecimal CHAR CHAR String NCHAR NCHAR String VARCHAR VARCHAR String VARCHAR2 VARCHAR String NVARCHAR2 VARCHAR String BLOB BLOB Blob CLOB CLOB Clob NCLOB BINARY BINARY byte[] VARBINARY LONG VARBINARY DATE DATE Date TIME TIME Time TIMESTAMP TIMESTAMP Timestamp 3.2 \u6269\u5c55\u6570\u636e\u7c7b\u578b \u865a\u8c37 JDBC \u9664\u4e86\u5b9e\u73b0\u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b\uff0c\u8fd8\u6839\u636e\u865a\u8c37\u6570\u636e\u5e93\u81ea\u6709\u7c7b\u578b\u6269\u5c55\u4e86\u90e8\u5206\u6570\u636e\u7c7b\u578b\uff08\u88683.2\u6240\u793a\uff09\uff0c\u5305\u62ec\u4ee5\u4e0b\u6570\u636e\u7c7b\u578b\u3002 1. \u65f6\u95f4\u6570\u636e\u7c7b\u578b DATETIME\u2014\u2014\u2014 \u65e5\u671f\u65f6\u95f4\u7c7b\u578b DATETIME WITH TIME ZONE \u2014\u2014\u2014 \u5e26\u65f6\u533a\u7684\u65e5\u671f\u65f6\u95f4\u7c7b\u578b TIME WITH TIME ZONE \u2014\u2014\u2014 \u5e26\u65f6\u533a\u7684\u65f6\u95f4\u7c7b\u578b INTERVAL YEAR \u2014\u2014\u2014 \u5e74\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL MONTH \u2014\u2014\u2014 \u6708\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY\u2014\u2014\u2014 \u65e5\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL HOUR \u2014\u2014\u2014 \u5c0f\u65f6\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL MINUTE \u2014\u2014\u2014 \u5206\u949f\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL SECOND \u2014\u2014\u2014 \u79d2\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL YEAR TO MONTH \u2014\u2014\u2014 \u5e74\u5230\u6708\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY TO HOUR \u2014\u2014\u2014 \u65e5\u5230\u5c0f\u65f6\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY TO MINUTE \u2014\u2014\u2014 \u65e5\u5230\u5206\u949f\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY TO SECOND \u2014\u2014\u2014 \u65e5\u5230\u79d2\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL HOUR TO MINUTE \u2014\u2014\u2014 \u5c0f\u65f6\u5230\u5206\u949f\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL HOUR TO SECOND \u2014\u2014\u2014 \u5c0f\u65f6\u5230\u79d2\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL MINUTE TO SECOND \u2014\u2014\u2014 \u5206\u949f\u5230\u79d2\u7684\u65f6\u95f4\u95f4\u9694 2. \u6e38\u6807\u6570\u636e\u7c7b\u578b\uff08\u53ea\u5728\u5b58\u50a8\u8fc7\u7a0b\u3001\u51fd\u6570\u3001\u5305\u4e2d\u4f7f\u7528\uff09 CURSOR \u2014\u2014\u2014 \u6e38\u6807\u6570\u636e\u7c7b\u578b SYS_REFCURSOR \u2014\u2014\u2014 \u8fd4\u56de\u6e38\u6807\u6570\u636e\u7c7b\u578b 3. \u5176\u4ed6\u6570\u636e\u7c7b\u578b GUID \u2014\u2014\u2014 \u5168\u5c40\u552f\u4e00\u6807\u8bc6\u7b26 \u88683.2 \u6269\u5c55\u6570\u636e\u7c7b\u578b\u5bf9\u5e94\u8868 \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b \u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b Java \u6570\u636e\u7c7b\u578b DATETIME DATETIME Timestamp DATETIME WITH TIME ZONE DATETIME_TZ String TIME WITH TIME ZONE TIME_TZ String INTERVAL YEAR INTERVAL_Y String INTERVAL MONTH INTERVAL_M INTERVAL DAY INTERVAL_D INTERVAL HOUR INTERVAL_H INTERVAL MINUTE INTERVAL_MI INTERVAL SECOND INTERVAL_S String INTERVAL YEAR TO MONTH INTERVAL_Y2M INTERVAL DAY TO HOUR INTERVAL_D2H INTERVAL DAY TO MINUTE INTERVAL_D2M INTERVAL DAY TO SECOND INTERVAL_D2S INTERVAL HOUR TO MINUTE INTERVAL_H2M INTERVAL HOUR TO SECOND INTERVAL_H2S INTERVAL MINUTE TO SECOND INTERVAL_M2S CURSOR CURSOR \u65e0\u5bf9\u5e94\u7c7b\u578b SYS_REFCURSOR REFCUR GUID GUID String \u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528 ResultSet \u5bf9\u8c61\u6765\u5bf9\u5e94\u83b7\u53d6\u6e38\u6807\u6240\u8fd4\u56de\u6570\u636e\u3002 {.is-info} 3.3 \u6570\u636e\u7c7b\u578b\u8f6c\u6362 \u5728\u8c03\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u4e2d\u7684\u67d0\u4e9b\u65b9\u6cd5\u65f6\uff0c\u9700\u8fdb\u884c Java \u6570\u636e\u7c7b\u578b\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u7684\u8f6c\u6362\uff0c\u8fd9\u4e9b\u65b9\u6cd5\u5305\u62ec\uff1a - ResultSet \u7c7b get\\<Type> \u65b9\u6cd5\uff1b - ResultSet \u7c7b update\\<Type> \u65b9\u6cd5\uff1b - CallableStatement \u7c7b get\\<Type> \u65b9\u6cd5\uff1b - PreparedStatement \u7c7b set\\<Type> \u65b9\u6cd5\u3002 \u6570\u636e\u7c7b\u578b\u4e4b\u95f4\u7684\u8f6c\u6362\uff0c\u9700\u9075\u4ece Java \u6570\u636e\u7c7b\u578b\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u6620\u5c04\u5173\u7cfb\u89c4\u5219\uff0c\u5426\u5219\u53ef\u80fd\u8f6c\u6362\u5931\u8d25\u3002 1. com.xugu.cloudjdbc.ResultSet \u7c7b\u4e2d get\\<Type> \u65b9\u6cd5\u7684\u7c7b\u578b\u8f6c\u6362\uff0c\u5982\u88683.3\u6240\u793a\u3002 2. com.xugu.cloudjdbc.PreparedStatement \u7c7b\u4e2d set\\<Type> \u65b9\u6cd5\u7684\u7c7b\u578b\u8f6c\u6362\uff0c\u5982\u88683.4\u6240\u793a\u3002 X\uff08\u65e0\u4e22\u5931\u8f6c\u6362\uff09\uff1a\u6307\u4ee5\u957f\u7cbe\u5ea6\u7c7b\u578b\u7684 get\\<Type> \u65b9\u6cd5\u83b7\u53d6\u77ed\u7cbe\u5ea6\u6570\u636e\u7c7b\u578b\u5217\u503c\u65e0\u4e22\u5931\u3002 \u5982\uff1a\u4f7f\u7528 getInt() \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u4e3a smallint \u7684\u5217\u6570\u636e\uff0c\u83b7\u53d6\u6570\u636e\u5b8c\u6574\u3002 Z\uff08\u4f9d\u8d56\u8f6c\u6362\uff09\uff1a\u6307 get\\<Type> \u65b9\u6cd5\u4e2d\u7684 Type \u7c7b\u578b\u4e0e\u83b7\u53d6\u6570\u636e\u5e93\u4e2d\u5217\u7684\u6570\u636e\u7c7b\u578b\u4e0d\u4e00\u81f4\uff0c\u6b64\u65f6\u9700\u8981\u901a\u8fc7\u5176\u4ed6\u6570\u636e\u7c7b\u578b\u8f6c\u6362\u4e3a Type \u6570\u636e\u7c7b\u578b\uff0c\u6b64\u8f6c\u6362\u8fc7\u7a0b\u503c\u53ef\u80fd\u4e22\u5931\u90e8\u5206\u6570\u636e\u3002 \u5982\uff1a\u4f7f\u7528 getInt() \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u4e3a float \u7684\u5217\u6570\u636e\uff0c\u53ef\u83b7\u53d6 float \u5217\u6570\u636e\u7684\u6574\u6570\u503c\uff0c\u800c\u5c0f\u6570\u7cbe\u5ea6\u503c\u5c06\u4e22\u5931\u3002 Y\uff08\u76f4\u63a5\u8f6c\u6362\uff09\uff1a\u6307 get\\<Type> \u65b9\u6cd5\u4e2d\u7684 Type \u7c7b\u578b\u4e0e\u83b7\u53d6\u6570\u636e\u5e93\u4e2d\u5217\u7684\u6570\u636e\u7c7b\u578b\u4e00\u81f4\u3002 \u5982\uff1a\u4f7f\u7528 getInt() \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u4e3a integer \u7684\u5217\u6570\u636e\uff0c\u76f4\u63a5\u83b7\u53d6\u5b8c\u6574\u6570\u636e\u3002 {.is-info} P\uff08\u5141\u8bb8\u63d2\u5165\uff09\uff1a\u6307 set\\<Type> \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u5e93\u4e2d\u5217\u6570\u636e\u65f6\uff0c\u6570\u636e\u65e0\u635f\u5931\u5b58\u5165\u6570\u636e\u5e93\u4e2d\u3002 \u5982\uff1a\u4f7f\u7528 setInt() \u65b9\u6cd5\u8bbe\u7f6e\u5217\u6570\u636e\u7c7b\u578b\u4e3a bigint \u7684\u6570\u636e\u65f6\uff0c\u6570\u636e\u53ef\u6b63\u786e\u5b58\u5165\u3002 Z\uff08\u90e8\u5206\u63d2\u5165\uff09\uff1a\u6307 set\\<Type> \u65b9\u6cd5\u4e2d\u7684 Type \u7c7b\u578b\u548c\u6570\u636e\u5e93\u4e2d\u5217\u6570\u636e\u7c7b\u578b\u4e0d\u4e00\u81f4\uff0c\u6570\u636e\u4ec5\u80fd\u90e8\u5206\u6b63\u786e\u5b58\u5165\u3002 \u5982\uff1a\u4f7f\u7528 setInt() \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u5e93\u5217\u7c7b\u578b\u4e3a tinyint \u7684\u6570\u636e\uff0c\u56e0 tinyint \u8868\u793a\u8303\u56f4\u4e3a-128\uff5e127 \u7684\u6574\u6570\u503c\uff0c\u6545\u800c tinyint\u8868\u793a\u8303\u56f4\u5185\u6570\u636e\u53ef\u6b63\u786e\u5b58\u5165\uff0c\u8303\u56f4\u5916\u6570\u636e\u5c06\u63d2\u5165\u5931\u8d25\u3002 {.is-info} \u56db. \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5 4.1 \u90e8\u7f72JDBC\u9a71\u52a8\u7a0b\u5e8f \u901a\u8fc7\u865a\u8c37 JDBC \u9a71\u52a8\u8bbf\u95ee\u865a\u8c37\u6570\u636e\u5e93\uff0c\u9996\u5148\u5e94\u4fdd\u8bc1\u5e94\u7528\u7a0b\u5e8f\u6b63\u786e\u5f15\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u5305 (cloudjdbc-*.*.*.jar)\uff0c\u5373\u5c06\u9a71\u52a8\u5305\u62f7\u8d1d\u81f3\u5e94\u7528\u7a0b\u5e8f\u5e76\u6dfb\u52a0\u5f15\u7528\u3002 4.2 \u52a0\u8f7dJDBC\u9a71\u52a8\u7a0b\u5e8f \u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u8fdb\u884c\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u8c03\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u7a0b\u5e8f\uff0c\u9996\u5148\u8981\u5c06\u865a\u8c37 JDBC \u9a71\u52a8\u52a0\u8f7d\u5230\u7cfb\u7edf\u5185\u5b58\u4e2d\uff0c\u7136\u540e\u4f9b\u7cfb\u7edf\u4f7f\u7528\u3002\u865a\u8c37 JDBC \u7684\u9a71\u52a8\u5b9e\u73b0\u7c7b\u4e3acom.xugu.cloudjdbc.Driver\uff0c\u4ee5\u4e0b\u662f\u5c06\u865a\u8c37 JDBC \u9a71\u52a8\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\u7684\u4ee3\u7801\uff1a //\u663e\u793a\u6ce8\u518c DriverManager.registerDriver(new com.xugu.cloudjdbc.Driver())\u037e //\u9690\u5f0f\u6ce8\u518c Class.forName(\u201ccom.xugu.cloudjdbc.Driver\u201d)\u037e \u9690\u5f0f\u6ce8\u518c\u5373\u901a\u8fc7 Class.forName() \u5c06\u5bf9\u5e94\u7684\u9a71\u52a8\u7c7b\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\uff0c\u5c06\u6267\u884c\u5185\u5b58\u4e2d\u7684 static \u9759\u6001\u4ee3\u7801\u6bb5\uff0c\u6b64\u4ee3\u7801\u6bb5\u4f1a\u521b\u5efa\u4e00\u4e2a\u865a\u8c37 JDBC \u9a71\u52a8\u7684\u5b9e\u4f8b\uff0c\u5e76\u653e\u5165 DriverManager \u4e2d\uff0c\u4f9b DriverManager \u4f7f\u7528\u3002 {.is-info} 4.3 \u8fde\u63a5\u5b57\u4e32\u53ca\u53c2\u6570\u8bbe\u7f6e \u865a\u8c37 JDBC \u9a71\u52a8\u8fde\u63a5 URL \u4e32\u683c\u5f0f\uff1a jdbc:xugu://serverIP:portNumber/databaseName[?property=value[&property=value]] \u865a\u8c37 JDBC \u9a71\u52a8\u8fde\u63a5 URL \u4e32\u683c\u5f0f\uff1a 1). jdbc:xugu:// \uff1a\uff08\u5fc5\u9700\uff09\u865a\u8c37\u6570\u636e\u5e93\u7279\u5b9a\u534f\u8bae\u3002 2). serverIP \uff1a\uff08\u5fc5\u9700\uff09\u865a\u8c37\u6570\u636e\u5e93\u6240\u5728\u670d\u52a1\u5668\u7684 IP \u5730\u5740\u3002 3). portNumber\uff1a\uff08\u5fc5\u9700\uff09\u662f\u865a\u8c37\u6570\u636e\u5e93\u670d\u52a1 TCP \u8bbf\u95ee\u7aef\u53e3\uff0c\u9ed8\u8ba4 5138\u3002 4). databaseName\uff1a\uff08\u5fc5\u9700\uff09\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u5e93\u540d\u79f0\u3002 5). property\uff1a\uff08\u53ef\u9009\uff09\u865a\u8c37\u6570\u636e\u5e93\u7684 URL \u8fde\u63a5\u5c5e\u6027\u3002\u591a\u4e2a\u8fde\u63a5\u5c5e\u6027\u4e4b\u95f4\u4f7f\u7528\u201c&\u201d\u5206\u9694\uff0c\u4e0d\u53ef\u91cd\u590d\u3002 \u865a\u8c37 JDBC \u9a71\u52a8 URL \u4e32\u793a\u4f8b\u5982\u4e0b\uff1a String url = jdbc:xugu://localhost:5138/System?user=GUEST&password=GUEST\u037e property \u8bbe\u7f6e\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u6027\uff0c\u5e38\u7528\u8fde\u63a5\u5c5e\u6027\u89c1\u88684.1\u3002 \u88684.1 \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u6027 table th:first-of-type { width: 20%; } table th:nth-of-type(2) { width: 10%; } table th:nth-of-type(3) { width: 10%; } table th:nth-of-type(4) { width: 50%; } \u5c5e\u6027\u540d\u79f0 \u5fc5\u9009\u9879 \u53d6\u503c \u8bf4\u660e database \u221a \u5b57\u7b26\u4e32 \u6570\u636e\u5e93\u540d\u79f0 user \u221a \u5b57\u7b26\u4e32 \u7528\u6237\u540d\u79f0 password \u221a \u5b57\u7b26\u4e32 \u7528\u6237\u5bc6\u7801 encryptor \u00d7 \u5b57\u7b26\u4e32 \u7528\u4e8e\u542f\u52a8\u52a0\u5bc6\u6570\u636e\u5e93\uff0c\u82e5\u5e93\u672a\u52a0\u5bc6\uff0c\u5219\u53ef\u4e0d\u8981\uff0c\u4f46\u5e26\u4e0a\u6b64\u53c2\u6570\u4e0d\u4f1a\u5f71\u54cd\u8fde\u63a5 char_set \u00d7 \u5b57\u7b26\u4e32 \u8fde\u63a5\u5b57\u7b26\u96c6\u3002'GB2312'\u3001'GBK'\u3001'UTF8' \u7b49\uff0c\u9ed8\u8ba4\uff1aGBK time_zone \u00d7 \u5b57\u7b26\u4e32 \u5ba2\u6237\u7aef\u65f6\u533a\u3002\u9ed8\u8ba4\uff1a\u865a\u8c37\u6570\u636e\u5e93\u914d\u7f6e\u53c2\u6570 def_timezone \u6240\u8bbe\u7f6e\u65f6\u533a\uff08\u53ea\u5bf9\u7cfb\u7edf\u65f6\u95f4\u51fd\u6570\u751f\u6548\uff09 iso_level \u00d7 \u5b57\u7b26\u4e32 'READ COMMITED'\uff1a\u8bfb\u5df2\u63d0\u4ea4\uff1b 'REPEATIABLE READ'\uff1a\u53ef\u91cd\u590d\u8bfb\uff1b'SERIALIZABLE'\uff1a\u5e8f\u5217\u5316 lock_time \u00d7 \u6570\u503c \u5355\u4f4d\uff1a\u6beb\u79d2\uff0c\u9ed8\u8ba4\u503c\uff1a0\uff0c\u8868\u793a\u8fde\u63a5\u4e2d\u7684\u4e8b\u52a1\u9501\u5f81\u7528\u65f6\uff0c\u6700\u5927\u7b49\u5019\u65f6\u95f4\uff0c\u82e5\u5728\u8bbe\u7f6e\u65f6\u95f4\u5185\u52a0\u9501\u5931\u8d25\uff0c\u56de\u6eda\u4e8b\u52a1\u5e76\u62a5\u9519 lob_ret \u00d7 \u5b57\u7b26\u4e32 \u5927\u5bf9\u8c61\uff08Blob\u3001Clob\uff09\u6570\u636e\u8fd4\u56de\u65b9\u5f0f\u3002\u5c5e\u6027\u4e3a descriptor \u65f6\uff0c\u4ee5\u63cf\u8ff0\u7b26\u65b9\u5f0f\u8fd4\u56de\uff1b\u5176\u4ed6\u4ee5\u6570\u636e\u6d41\u65b9\u5f0f\u8fd4\u56de\u3002\u9ed8\u8ba4\uff1a\u4ee5\u6570\u636e\u6d41\u65b9\u5f0f\u8fd4\u56de return_rowid \u00d7 \u5e03\u5c14\u503c \u662f\u5426\u8fd4\u56de\u8bb0\u5f55 rowid \u503c\u3002\u5c5e\u6027\u4e3a TRUE \u65f6\uff0c\u8fd4\u56de rowid\uff1b\u5176\u4ed6\u8fd4\u56de FALSE\u3002\u9ed8\u8ba4\uff1aFALSE auto_commit \u00d7 on/off \u4e8b\u52a1\u662f\u5426\u81ea\u52a8\u63d0\u4ea4\u3002\u5c5e\u6027\u4e3a ON \u65f6\uff0c\u8fde\u63a5\u81ea\u52a8\u63d0\u4ea4\uff1b\u5c5e\u6027\u4e3a OFF\u65f6\uff0c\u8fde\u63a5\u975e\u81ea\u52a8\u63d0\u4ea4\u3002\u9ed8\u8ba4\uff1aON conn_type \u00d7 \u6570\u503c \u8d1f\u8f7d\u5747\u8861\u5206\u914d\u65b9\u5f0f\u3002\u5c5e\u6027\u4e3a 1 \u65f6\uff0c\u968f\u673a\u5206\u914d\uff1b\u5c5e\u6027\u4e3a 2 \u65f6\uff0c\u987a\u5e8f\u5206\u914d\u3002\u9ed8\u8ba4\uff1a2 ips \u00d7 \u5b57\u7b26\u4e32 \u8d1f\u8f7d\u5747\u8861\u8fde\u63a5 IP \u5730\u5740\uff0c\u591a\u4e2a IP \u5730\u5740\u4ee5\u9017\u53f7\u5206\u9694\uff08\u8be6\u7ec6\u89c1\u8d1f\u8f7d\u5747\u8861\uff09 CompatibleOracle \u00d7 \u5e03\u5c14\u503c \u517c\u5bb9 Oracle \u9009\u9879\u3002\u5c5e\u6027\u4e3a true\uff0c\u517c\u5bb9 Oracle\u037e \u5c5e\u6027\u4e3a FALSE\uff0c\u865a\u8c37 JDBC \u81ea\u6709\u5b9e\u73b0 recv_mode \u00d7 \u6570\u503c \u63a5\u6536\u6a21\u5f0f\u9009\u9879\u3002\u5c5e\u6027\u503c\u4e3a 0 \u65f6\uff0c\u672c\u5730\u5168\u63a5\u6536\u6a21\u5f0f\uff1b\u5c5e\u6027\u503c\u4e3a 1 \u65f6\uff0c\u7f51\u7edc\u63a5\u6536\u6a21\u5f0f\uff1b\u5c5e\u6027\u503c\u4e3a 2 \u65f6\uff0c\u670d\u52a1\u5668\u7aef\u6e38\u6807\u63a5\u6536\u6a21\u5f0f\u3002\u9ed8\u8ba4\uff1a0 emptyStringAsNull \u00d7 \u5e03\u5c14\u503c \u7a7a\u5b57\u4e32\u5904\u7406\u3002\u5c5e\u6027\u4e3a FALSE \u65f6\uff0c\u7a7a\u5b57\u7b26\u4e32\u8ba4\u5b9a\u4e3a NULL\uff1b\u5c5e\u6027\u4e3a TRUE \u65f6\uff0c\u7a7a\u5b57\u7b26\u4e32\u4fdd\u7559\u3002\u9ed8\u8ba4\uff1a\u7a7a\u5b57\u4e32\u4fdd\u7559 xgversion \u00d7 201/301 \u5ba2\u6237\u7aef\u534f\u8bae\u7248\u672c\uff0c\u865a\u8c37\u6570\u636e\u5e93V12\u7248\u672c\u5347\u7ea7\u652f\u6301301\u534f\u8bae\uff0c\u540c\u65f6\u517c\u5bb9201\u534f\u8bae SSL \u00d7 SSL \u8fde\u63a5\u52a0\u5bc6\u53c2\u6570\u3002\u5c5e\u6027\u503c\u3010SSL\uff1a\u542f\u7528SSL\u52a0\u5bc6\u4f20\u8f93\uff1bNSSL\uff1a\u7981\u7528SSL\u52a0\u5bc6\u4f20\u8f93\u3011 slowsqltime \u00d7 \u6570\u503c \u8bbe\u7f6e\u6162SQL\u6267\u884c\u65f6\u95f4\u3002SQL\u8bed\u53e5\u6267\u884c\u65f6\u95f4\u8d85\u8fc7\u8be5\u6570\u503c\uff0c\u65e5\u5fd7\u5219\u4f1a\u8f93\u51fa\u6267\u884cSQL batch_mode \u00d7 \u5e03\u5c14\u503c PreparedStatement\u662f\u5426\u4f7f\u7528\u6279\u91cf\u5904\u7406\u3002\u5c5e\u6027\u4e3a TRUE \u65f6\uff0cexecuteBatch\u91c7\u7528\u6279\u91cf\u6a21\u578b\uff1bFALSE\u5219\u91c7\u7528\u5355\u6761\u5904\u7406\u6a21\u578b\u3002\u9ed8\u8ba4\uff1aFALSE \u8fde\u63a5\u53c2\u6570\u4f7f\u7528SSL\u5c5e\u6027\u65f6\uff0c\u4f9d\u8d56\u7a0b\u5e8f\u5305\u4e2d\u63d0\u4f9b\u7684\u52a8\u6001\u94fe\u63a5\u5e93\uff0c\u4f7f\u7528\u524d\u9700\u5c06\u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u5230\u64cd\u4f5c\u7cfb\u7edf\u6307\u5b9a\u4f4d\u7f6e\u65b9\u53ef\u6b63\u5e38\u4f7f\u7528SSL\u52a0\u5bc6\u529f\u80fd\u3002 Windows 32\u4f4d\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u7528SSL\u5c5e\u6027\u524d\uff0c\u9700\u5c06\u7a0b\u5e8f\u5305 ssl/win32 \u4e0b xgssl.dll \u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u62f7\u8d1d\u5230\u7cfb\u7edf\u76ee\u5f55 C:/windows/system32 \u76ee\u5f55\u4f4d\u7f6e\u3002 Windows 64\u4f4d\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u7528SSL\u5c5e\u6027\u524d\uff0c\u9700\u5c06\u7a0b\u5e8f\u5305 ssl/win64 \u4e0b xgssl.dll \u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u62f7\u8d1d\u5230\u7cfb\u7edf\u76ee\u5f55 C:/windows/system32 \u76ee\u5f55\u4e0b\u3002 Linux X64\u4f4d\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u7528SSL\u5c5e\u6027\u524d\uff0c\u9700\u5c06\u7a0b\u5e8f\u5305 ssl/linux64 \u4e0b libxgssl.so \u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u62f7\u8d1d\u5230\u7cfb\u7edf\u76ee\u5f55 /usr/lib\u6216\u8005/usr/lib4 \u76ee\u5f55\u4e0b\u3002 \u865a\u8c37 JDBC \u8bbe\u7f6e\u8fde\u63a5\u5c5e\u6027\u793a\u4f8b\u5982\u4e0b (\u7248\u672c\u53f7\u3001\u5927\u5bf9\u8c61\u63cf\u8ff0\u7b26\u3001\u65f6\u533a\u3001\u5173\u95ed\u8fde\u63a5\u81ea\u52a8\u63d0\u4ea4)\uff1a String url=jdbc:xugu://localhost:5138/System?user=GUEST&password=GUEST&version=110&auto_commit=false&lob_ret=descriptor&time_zone=GMT-8:00\u037e 4.4 \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5 \u5728\u5e94\u7528\u7a0b\u5e8f\u5c06\u865a\u8c37 JDBC \u9a71\u52a8\u52a0\u8f7d\u5230\u7cfb\u7edf\u5185\u5b58\u4e2d\u540e\uff0c\u53ef\u901a\u8fc7 DriverManager \u7c7b\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u65b9\u6cd5\u5982\u4e0b\uff1a DriverManager.getConnection(String url)\u037e DriverManager.getConnection(String url,Properties)\u037e DriverManager.getConnection(String url,String user,String password)\u037e \u4e94. \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u6e90\u548c\u8fde\u63a5\u6c60 \u901a\u8fc7 DriverManager \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u4ee5\u5916\uff0c\u8fd8\u53ef\u4ee5\u4f7f\u7528\u6570\u636e\u6e90\u6216\u8fde\u63a5\u6c60\u65b9\u5f0f\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u3002\u901a\u8fc7\u6570\u636e\u6e90\u65b9\u5f0f\u6216\u8fde\u63a5\u6c60\u65b9\u5f0f\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u6709\u4ee5\u4e0b\u4f18\u70b9\uff1a - \u8d44\u6e90\u91cd\u7528 \u7531\u4e8e\u6570\u636e\u5e93\u8fde\u63a5\u5f97\u5230\u91cd\u7528\uff0c\u907f\u514d\u4e86\u9891\u7e41\u521b\u5efa\u3001\u91ca\u653e\u8fde\u63a5\u5f15\u8d77\u7684\u5927\u91cf\u6027\u80fd\u5f00\u9500\u3002\u5728\u51cf\u5c11\u7cfb\u7edf\u6d88\u8017\u7684\u57fa\u7840\u4e0a\uff0c\u53e6\u4e00\u65b9\u9762\u4e5f\u589e\u8fdb\u4e86\u7cfb\u7edf\u8fd0\u884c\u73af\u5883\u7684\u5e73\u7a33\u6027\uff08\u51cf\u5c11\u5185\u5b58\u788e\u7247\u4ee5\u53ca\u6570\u636e\u5e93\u4e34\u65f6\u8fdb\u7a0b/\u7ebf\u7a0b\u7684\u6570\u91cf\uff09\u3002 - \u66f4\u5feb\u7684\u7cfb\u7edf\u54cd\u5e94 \u6570\u636e\u5e93\u8fde\u63a5\u6c60\u5728\u521d\u59cb\u5316\u8fc7\u7a0b\u4e2d\uff0c\u5f80\u5f80\u5df2\u7ecf\u521b\u5efa\u4e86\u82e5\u5e72\u6570\u636e\u5e93\u8fde\u63a5\u7f6e\u4e8e\u6c60\u4e2d\u5907\u7528\u3002\u6b64\u65f6\u8fde\u63a5\u7684\u521d\u59cb\u5316\u5de5\u4f5c\u5747\u5df2\u5b8c\u6210\u3002\u5bf9\u4e8e\u4e1a\u52a1\u8bf7\u6c42\u5904\u7406\u800c\u8a00\uff0c\u76f4\u63a5\u5229\u7528\u73b0\u6709\u53ef\u7528\u8fde\u63a5\uff0c\u907f\u514d\u4e86\u6570\u636e\u5e93\u8fde\u63a5\u521d\u59cb\u5316\u548c\u91ca\u653e\u8fc7\u7a0b\u7684\u65f6\u95f4\u5f00\u9500\uff0c\u4ece\u800c\u7f29\u51cf\u4e86\u7cfb\u7edf\u6574\u4f53\u54cd\u5e94\u65f6\u95f4\u3002 - \u65b0\u7684\u8d44\u6e90\u5206\u914d\u624b\u6bb5 \u5bf9\u4e8e\u591a\u5e94\u7528\u5171\u4eab\u540c\u4e00\u6570\u636e\u5e93\u7684\u7cfb\u7edf\u800c\u8a00\uff0c\u53ef\u5728\u5e94\u7528\u5c42\u901a\u8fc7\u6570\u636e\u5e93\u8fde\u63a5\u7684\u914d\u7f6e\uff0c\u9650\u5236\u5355\u4e00\u5e94\u7528\u7533\u8bf7\u6570\u636e\u5e93\u8fde\u63a5\u6570\uff0c\u4ece\u800c\u907f\u514d\u5355\u4e00\u5e94\u7528\u72ec\u5360\u6240\u6709\u6570\u636e\u5e93\u8d44\u6e90\u3002 \u865a\u8c37 JDBC \u4e2d\u6570\u636e\u6e90\u5b9e\u73b0\u7c7b\u4e3a com.xugu.pool.XgDataSource\uff0c\u8fde\u63a5\u6c60\u5b9e\u73b0\u7c7b\u4e3acom.xugu.pool \u5305\u4e2d\u7684 XgDataSource\u3001XgPooledConnection\u3001XgConnectionPoolDataSource\u3001XgConnectionEventListener\u3001XgConnectionEvent\u3002 5.1 \u4f7f\u7528\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u6e90\u521b\u5efa\u8fde\u63a5 XgDataSource \u63d0\u4f9b set \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u6e90\u8fde\u63a5\u5c5e\u6027\uff1a \u793a\u4f8b\uff1a\u901a\u8fc7 XgDataSource \u4e0e\u865a\u8c37\u6570\u636e\u5e93\u5efa\u7acb\u8fde\u63a5 com.xugu.pool.XgDataSource ds = new com.xugu.pool.XgDataSource()\u037e ds.setUrl(\"jdbc:xugu://127.0.0.1:5138/db\")\u037e ds.setUser(\"SYSDBA\")\u037e ds.setPassword(\"SYSDBA\")\u037e Properties pro = new Properties()\u037e pro.setProperty(\"return_rowid\", \"true\")\u037e pro.setProperty(\"auto_commit\", \"off\")\u037e ds.setPro(pro)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u767b\u5f55\u4e32\u3002url\u4e3a\u6570\u636e\u5e93\u767b\u5f55\u4e32 setUrl(String url)\uff1b //\u6307\u5b9a\u6570\u636e\u5e93\u670d\u52a1\u5668\u3002host\u4e3a\u670d\u52a1\u5668\u5730\u5740 setHostName(String host)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u540d\u3002dbName\u4e3a\u6570\u636e\u5e93\u540d setDatabaseName(String dbName)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u7aef\u53e3\u53f7\u3002port\u4e3a\u6570\u636e\u5e93\u7aef\u53e3\u53f7 setPort(int port)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u7528\u6237\u3002userName\u4e3a\u6570\u636e\u5e93\u767b\u5f55\u7528\u6237\u540d setUser(String userName)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u767b\u5f55\u5bc6\u7801\u3002passWord\u4e3a\u6570\u636e\u5e93\u767b\u5f55\u5bc6\u7801 setPassword(Stirng passWord)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u767b\u5f55\u53c2\u6570\u3002ds_pro\u4e3a\u6570\u636e\u5e93\u8fde\u63a5\u53c2\u6570 setPro(Properties ds_pro)\uff1b // \u901a\u8fc7\u6570\u636e\u6e90\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5 Connection conn = ds.getConnection()\u037e \u5728 com.xugu.pool.XgDataSource \u7c7b\u4e2d\u901a\u8fc7 setXX() \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u6e90\u7684\u8fde\u63a5\u5c5e\u6027\uff0c\u82e5\u672a\u6307\u5b9a\u5219\u4f7f\u7528\u9ed8\u8ba4\u5c5e\u6027\u503c\uff1a\u6570\u636e\u5e93\u670d\u52a1\u5668\u5730\u5740\u9ed8\u8ba4\u4e3a\u201clocalhost\u201d \uff0c\u8fde\u63a5\u6570\u636e\u5e93\u9ed8\u8ba4\u4e3a\u201cSYSTEM\u201d \uff0c\u8bbf\u95ee\u7aef\u53e3\u53f7\u9ed8\u8ba4\u4e3a\u201c5138\u201d \uff0c\u8bbf\u95ee\u7528\u6237\u540d\u9ed8\u8ba4\u4e3a\u201cGUEST\u201d \uff0c\u7528\u6237\u5bc6\u7801\u9ed8\u8ba4\u4e3a\u201cGUEST\u201d \u3002URL \u9ed8\u8ba4\u8fde\u63a5\u4e32\u4e3a\u201cjdbc:xugu://127.0.0.1:5138/SYSTEM?user=GUEST&password=GUEST&version=110\u201d\u3002\u6570\u636e\u6e90\u5efa\u7acb\u540e\uff0c\u53ef\u901a\u8fc7\u8c03\u7528 XgDataSource \u7c7b\u4e2d\u7684 getConnection() \u548c getConnection(String username,String password) \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u3002 5.2 \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u6c60 \u8fde\u63a5\u6c60\u6280\u672f\u7684\u6838\u5fc3\u601d\u60f3\u662f\uff1a\u8fde\u63a5\u590d\u7528\uff0c\u901a\u8fc7\u5efa\u7acb\u4e00\u4e2a\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u4ee5\u53ca\u4e00\u5957\u8fde\u63a5\u4f7f\u7528\u3001\u5206\u914d\u3001\u7ba1\u7406\u7b56\u7565\uff0c\u8be5\u8fde\u63a5\u6c60\u4e2d\u7684\u8fde\u63a5\u53ef\u4ee5\u5f97\u5230\u9ad8\u6548\u3001\u5b89\u5168\u7684\u590d\u7528\uff0c\u907f\u514d\u4e86\u6570\u636e\u5e93\u8fde\u63a5\u9891\u7e41\u5efa\u7acb\u3001\u5173\u95ed\u7684\u5f00\u9500\u3002 \u865a\u8c37 JDBC \u8fde\u63a5\u6c60\u5b9e\u73b0\u7c7b\u5bf9\u865a\u8c37\u6570\u636e\u5e93\u539f\u59cb\u8fde\u63a5\u8fdb\u884c\u4e86\u5c01\u88c5\uff0c\u4ece\u800c\u65b9\u4fbf\u4e86\u6570\u636e\u5e93\u5e94\u7528\u5bf9\u4e8e\u8fde\u63a5\u7684\u4f7f\u7528\uff08\u7279\u522b\u662f\u5bf9\u4e8e\u4e8b\u52a1\u5904\u7406\uff09\uff0c\u63d0\u9ad8\u4e86\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u6548\u7387\uff0c\u4e5f\u6b63\u662f\u56e0\u4e3a\u8fd9\u4e2a\u5c01\u88c5\u5c42\u7684\u5b58\u5728\uff0c\u9694\u79bb\u4e86\u5e94\u7528\u7684\u672c\u8eab\u7684\u5904\u7406\u903b\u8f91\u548c\u5177\u4f53\u6570\u636e\u5e93\u8bbf\u95ee\u903b\u8f91\uff0c\u4f7f\u5e94\u7528\u672c\u8eab\u7684\u590d\u7528\u6210\u4e3a\u53ef\u80fd\u3002\u8fde\u63a5\u6c60\u4e3b\u8981\u7531\u4e09\u90e8\u5206\u7ec4\u6210\uff1a\u8fde\u63a5\u6c60\u7684\u5efa\u7acb\u3001\u8fde\u63a5\u6c60\u4e2d\u8fde\u63a5\u7684\u4f7f\u7528\u7ba1\u7406\u3001\u8fde\u63a5\u6c60\u7684\u5173\u95ed\u3002 \u865a\u8c37 JDBC \u8fde\u63a5\u6c60\u7684\u57fa\u672c\u601d\u60f3\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u5efa\u7acb\u4e00\u4e2a\u201c\u7f13\u51b2\u6c60\u201d\u3002\u9884\u5148\u5728\u201c\u7f13\u51b2\u6c60\u201d\u4e2d\u653e\u5165\u4e00\u5b9a\u6570\u91cf\u7684\u8fde\u63a5\uff0c\u5f53\u9700\u8981\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65f6\uff0c\u53ea\u9700\u4ece\u201c\u7f13\u51b2\u6c60\u201d\u4e2d\u53d6\u51fa\u4e00\u4e2a\uff0c\u4f7f\u7528\u5b8c\u6bd5\u4e4b\u540e\u518d\u653e\u56de\u53bb\u3002\u901a\u8fc7\u8bbe\u5b9a\u8fde\u63a5\u6c60\u6700\u5927\u8fde\u63a5\u6570\u6765\u9632\u6b62\u7cfb\u7edf\u65e0\u5c3d\u7684\u4e0e\u6570\u636e\u5e93\u8fde\u63a5\u3002\u4ea6\u53ef\u901a\u8fc7\u8fde\u63a5\u6c60\u7684\u7ba1\u7406\u673a\u5236\u76d1\u89c6\u6570\u636e\u5e93\u7684\u8fde\u63a5\u6570\u91cf\u3001\u4f7f\u7528\u60c5\u51b5\uff0c\u4e3a\u7cfb\u7edf\u5f00\u53d1\u3001\u6d4b\u8bd5\u53ca\u6027\u80fd\u8c03\u6574\u63d0\u4f9b\u4f9d\u636e\u3002 \u5f53\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u5b8c\u6570\u636e\u5e93\u8fde\u63a5\u8c03\u7528\u8fde\u63a5\u5173\u95ed\u65b9\u6cd5\u65f6\uff0c\u8be5\u8fde\u63a5\u5e76\u672a\u9500\u6bc1\uff0c\u800c\u662f\u88ab\u5f52\u8fd8\u7ed9\u8fde\u63a5\u6c60\u7b49\u5f85\u4e0b\u6b21\u7ee7\u7eed\u8c03\u7528\u3002 {.is-info} \u865a\u8c37 JDBC \u5b9e\u73b0\u8fde\u63a5\u6c60\u670d\u52a1\u6240\u63d0\u4f9b\u7684\u63a5\u53e3\u7c7b\u5982\u4e0b\uff1a - XgDataSource \u5b9e\u73b0 javax.sql.DataSource \u63a5\u53e3\uff1b - XgPooledConnection \u5b9e\u73b0 javax.sql.PooledConnection \u63a5\u53e3\uff1b - XgConnectionPoolDataSource \u5b9e\u73b0 javax.sql.ConnectionPoolDataSource \u63a5\u53e3\uff1b - XgConnectionEventListener \u5b9e\u73b0 javax.sql.ConnectionEventListener \u63a5\u53e3\uff1b - XgConnectionEvent \u7ee7\u627f\u81ea javax.sql.ConnectionEvent \u7c7b\u3002 \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u4e2d\u7684\u8fde\u63a5\u5747\u662f\u901a\u8fc7\u6570\u636e\u6e90\u5efa\u7acb\u7684\uff0c\u6545\u800c XgConnectionPoolDataSource \u7ee7\u627f\u4e86 com.xugu.pool.XgDataSource \u7c7b\u3002\u7528\u6237\u4ea6\u53ef\u901a\u8fc7 XgConnectionPoolDataSource \u5bf9\u8c61\u8bbe\u7f6e\u6570\u636e\u6e90\u5c5e\u6027\u548c\u8fde\u63a5\u6c60\u5c5e\u6027\uff1a //\u6700\u5c0f\u8fde\u63a5\u6570 setMinIdle(int min) //\u6700\u5927\u8fde\u63a5\u6570 setMaxActive(int max) //\u767b\u5f55\u7a7a\u95f2\u65f6\u95f4 setLoginTimeout(int time) //\u6700\u5927\u7b49\u5f85\u8fde\u63a5\u8d85\u65f6 setMaxWaitTime(long waitTime) \u5176\u4e2d\uff1asetLoginTimeout() \u548c setMaxWaitTime() \u65b9\u6cd5\u4e2d\u53c2\u6570\u5355\u4f4d\u4e3a\u6beb\u79d2\uff0c\u5176\u4ed6\u65b9\u6cd5\u4e2d\u53c2\u6570\u5355\u4f4d\u4e3a\u79d2\u3002 \u793a\u4f8b\uff1a\u521b\u5efa\u4e00\u4e2a\u865a\u8c37 JDBC \u8fde\u63a5\u6c60\uff0c\u5e76\u901a\u8fc7\u8fde\u63a5\u6c60\u83b7\u53d6\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u3002 XgConnectionPoolDataSource CPDSource = new XgConnectionPoolDataSource()\u037e CPDSource.setHostName(\u201clocalhost\u201d)\u037e CPDSource.setPort(5138)\u037e CPDSource.setDatabaseName(\u201cxuguNew\u201d)\u037e CPDSource.setUser(\u201cSYSDBA\u201d)\u037e CPDSource.setPassword(\u201cSYSDBA\u201d)\u037e CPDSource.setUrl(\"jdbc:xugu://localhost:5138/xuguNew)\u037e CPDSource.setMaxActive(50)\u037e CPDSource.setMinIdle(5)\u037e CPDSource.setLoginTimeout(3000)\u037e CPDSource.setMaxWaitTime(3000)\u037e XgPooledConnection Pconn = (XgPooledConnection)CPDSource.getPooledConnection()\u037e Connection conn = Pconn.getConnection()\u037e \u516d. \u865a\u8c37\u6570\u636e\u5e93\u7684JDBC\u4ea4\u4e92\u6d41\u7a0b \u4f7f\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u5b9e\u73b0\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u4ea4\u4e92\u7684\u4e00\u822c\u4f7f\u7528\u6b65\u9aa4\uff1a\u5bfc\u5165\u865a\u8c37 JDBC \u9a71\u52a8\u5305 \u2192 \u52a0\u8f7d\u865a\u8c37 JDBC \u9a71\u52a8\u7a0b\u5e8f \u2192 \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5 Connection \u2192 \u521b\u5efa\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61 Statement \u2192 \u6267\u884c SQL \u8bed\u53e5 \u2192 \u5904\u7406\u6267\u884c\u7ed3\u679c ResultSet \u2192 \u91ca\u653e\u8d44\u6e90\u3002 - \u7b2c 1 \u6b65\uff1a\u5bfc\u5165\u865a\u8c37 JDBC \u9a71\u52a8\u5305 - \u7b2c 2 \u6b65\uff1a\u6ce8\u518a\u9a71\u52a8 (\u4ec5\u505a\u4e00\u6b21) - \u7b2c 3 \u6b65\uff1a\u5efa\u7acb\u8fde\u63a5 (Connection) - \u7b2c 4 \u6b65\uff1a\u521b\u5efa\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61 (Statement) - \u7b2c 5 \u6b65\uff1a\u6267\u884c SQL \u8bed\u53e5 - \u7b2c 6 \u6b65\uff1a\u5904\u7406\u6267\u884c\u7ed3\u679c (ResultSet) - \u7b2c 7 \u6b65\uff1a\u91ca\u653e\u8d44\u6e90 6.1 \u5bfc\u5165\u865a\u8c37JDBC\u9a71\u52a8\u5305 \u4e0b\u8f7d\u865a\u8c37\u6570\u636e\u5e93\u4e13\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u5305 (cloudjdbc-*.*.*.jar)\uff0c\u5e76\u5bfc\u5165\u5230\u5e94\u7528\u7a0b\u5e8f\u4e2d\u3002 6.2 \u52a0\u8f7d\u865a\u8c37JDBC\u9a71\u52a8 \u865a\u8c37 JDBC \u9a71\u52a8\u7a0b\u5e8f\u4e2d Driver \u63a5\u53e3\u5b9e\u73b0\u7c7b\u4e3a com.xugu.cloudjdbc.Driver\u3002\u52a0\u8f7d\u9a71\u52a8\u65b9\u5f0f\u4e3a DriverManager.registerDriver(new com.xugu.cloudjdbc.Driver()) \u6216Class.forName(\u201ccom.xugu.cloudjdbc.Driver\u201d)\u3002 6.3 \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5 \u5efa\u7acb\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u7684\u65b9\u5f0f\u6709\u591a\u79cd\uff0c\u53ef\u6839\u636e\u5e94\u7528\u7a0b\u5e8f\u5b9e\u9645\u4f7f\u7528\u573a\u666f\u9009\u62e9\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65b9\u5f0f\u3002\u5e38\u89c1\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65b9\u5f0f\u5982\u4e0b\uff1a - \u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u4f7f\u7528 DriverManager \u83b7\u5f97\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\uff1b - \u4f7f\u7528\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u6e90/\u8fde\u63a5\u6c60\u7684\u65b9\u5f0f\u83b7\u53d6\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\uff1b - \u4f7f\u7528\u7b2c\u4e09\u65b9\u901a\u7528\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u65b9\u5f0f\u83b7\u53d6\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u3002 \u5982\uff1adruid\u3001c3p0\u3001dbcp\u3001JNDI \u7b49\u3002 6.3.1 \u6253\u5f00\u6570\u636e\u5e93\u8fde\u63a5 \u6253\u5f00\u6570\u636e\u5e93\u8fde\u63a5\u5373\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u5bf9\u8c61 Connection \u7c7b\u3002 \u5982\uff1aDriverManager \u901a\u8fc7 getConnection() \u65b9\u6cd5\u83b7\u53d6 Connection \u7c7b\u5bf9\u8c61\u3002DriverManager \u7684 getConnection() \u65b9\u6cd5\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\u7684\u65b9\u5f0f\u4ea6\u6709\u591a\u79cd\u3002\u4ee5\u4e0b\u4e3a\u5e38\u89c1\u65b9\u5f0f\uff1a - getConnection(String url) \u53c2\u6570\u8bf4\u660e\uff1a - url\uff1a\u8bbf\u95ee\u6570\u636e\u5e93\u7684 URL \u8def\u5f84\u3002 \u793a\u4f8b\uff1a \u4e0b\u9762\u7684\u4ee3\u7801\u5229\u7528 getConnection \u65b9\u6cd5\u521b\u5efa\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u3002 ``` public Connection getConnection(){ Connection con=null\u037e try{ //\u6ce8\u518c\u6570\u636e\u5e93\u9a71\u52a8 Class.forName(\"com.xugu.cloudjdbc.Driver\")\u037e //\u5b9a\u4e49\u8fde\u63a5\u6570\u636e\u5e93\u7684url String url = \"jdbc:xugu://localhost:5138/db?user=user1\uff06password=pwd\"\u037e //\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5 con = DriverManager.getConnection(url)\u037e System.out.println(\"\u6570\u636e\u5e93\u8fde\u63a5\u6210\u529f\uff01\")\u037e }catch(Exception e){ e.printStackTrace()\u037e } //\u8fd4\u56de\u4e00\u4e2a\u8fde\u63a5 return con\u037e } ``` getConnection(String url,String user,String password) \u53c2\u6570\u8bf4\u660e\uff1a url\uff1a\u8bbf\u95ee\u6570\u636e\u5e93\u7684 URL \u8def\u5f84\u3002 user\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u7528\u6237\u540d\u3002 password\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u7528\u6237\u5bc6\u7801\u3002 \u793a\u4f8b\uff1a \u4e0b\u9762\u7684\u4ee3\u7801\u5229\u7528 getConnection \u65b9\u6cd5\u521b\u5efa\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u3002 private Connection con; private String user = \"user1\"; //\u5b9a\u4e49\u8fde\u63a5\u6570\u636e\u5e93\u7684\u7528\u6237\u540d private String password = \"pwd\"; //\u5b9a\u4e49\u8fde\u63a5\u6570\u636e\u5e93\u7684\u5bc6\u7801 private String className = \"com.xugu.cloudjdbc.Driver\";//\u5b9a\u4e49\u865a\u8c37JDBC\u9a71\u52a8 private String url = \"jdbc:xugu://localhost:5138/db\"; /\\*\\*\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\\*/ public Connection getConnection(){ try{ Class.forName(className);//\u52a0\u8f7d\u6570\u636e\u5e93\u9a71\u52a8 System.out.println(\"\u6570\u636e\u5e93\u9a71\u52a8\u52a0\u8f7d\u6210\u529f\uff01\"); con = DriverManager.getConnection(url,user,password); //\u8fde\u63a5\u6570\u636e\u5e93 System.out.println(\"\u6210\u529f\u5730\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\uff01\"); }catch(Exception e){ System.out.println(\"\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\u5931\u8d25\uff01\"); con = null; e.printStackTrace(); } finally { If(conn != null){ //\u91ca\u653e\u8fde\u63a5\u8d44\u6e90 conn.close(); } } return con; } getConnection(String url,Properties info) \u53c2\u6570\u8bf4\u660e\uff1a url\uff1a\u8bbf\u95ee\u6570\u636e\u5e93\u7684 URL \u8def\u5f84\u3002 info\uff1a\u4e00\u4e2a\u6301\u4e45\u7684\u5c5e\u6027\u96c6\u5bf9\u8c61\uff0c\u5305\u62ec user \u548c password \u7b49\u5c5e\u6027\u3002 \u793a\u4f8b\uff1a \u4e0b\u9762\u7684\u4ee3\u7801\u5229\u7528 getConnection \u65b9\u6cd5\u521b\u5efa\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u3002 public Connection getConnection(){ Connection con = null; //\u5b9a\u4e49\u6570\u636e\u5e93\u8fde\u63a5\u5bf9\u8c61 Properties info = new Properties(); //\u5b9a\u4e49Properties\u5bf9\u8c61 info.setProperty(\"user\",\"user1\"); //\u8bbe\u7f6eProperties\u5bf9\u8c61\u5c5e\u6027 info.setProperty(\"password\",\"pwd\"); try{ //\u6ce8\u518c\u6570\u636e\u5e93\u9a71\u52a8 Class.forName(\"com.xugu.cloudjdbc.Driver\"); //test\u4e3a\u6570\u636e\u5e93\u540d\u79f0 String url = \"jdbc:xugu://localhost:5138/db\"; //\u83b7\u53d6\u8fde\u63a5\u6570\u636e\u5e93\u7684Connection\u5bf9\u8c61 con = DriverManager.getConnection(url,info); System.out.println(\"\u6570\u636e\u5e93\u8fde\u63a5\u6210\u529f\uff01\"); }catch(Exception e){ e.printStackTrace(); } //\u8fd4\u56de\u4e00\u4e2a\u8fde\u63a5 return con; } 6.3.2 \u8fde\u63a5\u4e8b\u52a1\u7ba1\u7406 \u6570\u636e\u5e93\u4e8b\u52a1 (transaction) \u662f\u8bbf\u95ee\u5e76\u53ef\u80fd\u64cd\u4f5c\u5404\u79cd\u6570\u636e\u9879\u7684\u4e00\u4e2a\u6570\u636e\u5e93\u64cd\u4f5c\u5e8f\u5217\uff0c\u8fd9\u4e9b\u64cd\u4f5c\u8981\u4e48\u5168\u90e8\u6267\u884c, \u8981\u4e48\u5168\u90e8\u4e0d\u6267\u884c\uff0c\u662f\u4e00\u4e2a\u4e0d\u53ef\u5206\u5272\u7684\u5de5\u4f5c\u5355\u4f4d\u3002\u4e8b\u52a1\u7531\u4e8b\u52a1\u5f00\u59cb\u5230\u4e8b\u52a1\u7ed3\u675f\u4e4b\u95f4\u6267\u884c\u7684\u5168\u90e8\u6570\u636e\u5e93\u64cd\u4f5c\u7ec4\u6210\u3002 \u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\uff0c\u5373\u5f53\u4e00\u6761 SQL \u8bed\u53e5\u6267\u884c\u5b8c\u6210\u540e\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u5c06\u81ea\u52a8\u63d0\u4ea4\u8be5\u8bed\u53e5\u6240\u5728\u4e8b\u52a1\u3002\u5728\u865a\u8c37 JDBC \u9a71\u52a8\u4e2d\u63a7\u5236\u4e8b\u52a1\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a - \u901a\u8fc7\u6570\u636e\u5e93\u8fde\u63a5 URL \u4e32\u7684 auto_commit \u5c5e\u6027\uff0c\u63a7\u5236\u4e8b\u52a1\u7684\u5f00\u542f\u4e0e\u5173\u95ed\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b auto_commit \u5c5e\u6027\u4e3a on\uff0c\u5373\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u3002 - \u901a\u8fc7 Connection \u7c7b\u7684 setAutoCommit(boolean commit) \u65b9\u6cd5\u63a7\u5236\u4e8b\u52a1\u7684\u5f00\u542f\u4e0e\u5173\u95ed\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b commit \u5c5e\u6027\u4e3a TRUE\uff0c\u5373\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u3002 \u5728\u7981\u7528\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u4e0b\uff0c\u4f7f\u7528 Connection \u7c7b\u7684 commit() \u65b9\u6cd5\u63d0\u4ea4 SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u505a\u7684\u66f4\u6539\uff0c\u800c Connection \u7c7b\u7684 rollback() \u65b9\u6cd5\u5c06\u56de\u6eda SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u7684\u66f4\u6539\uff0c\u4e0a\u8ff0\u4e24\u79cd\u65b9\u6cd5\u6267\u884c\u5b8c\u6210\u540e\u5747\u5c06\u91ca\u653e\u4e8b\u52a1\u6301\u6709\u7684\u5168\u90e8\u9501\u8d44\u6e90\u3002 \u4e8b\u52a1\u4ec5\u5bf9\u6570\u636e\u5e93 DML \u64cd\u4f5c\u6709\u6548\u3002 {.is-info} \u4ee5\u4e0b\u4e3a\u4f7f\u7528 setAutoCommit() \u65b9\u6cd5\u63a7\u5236\u4e8b\u52a1\u63d0\u4ea4\u7684\u793a\u4f8b\u4ee3\u7801\uff1a //\u8bbe\u7f6e\u4e8b\u52a1\u4e3a\u975e\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f conn.setAutoCommit(false)\u037e //\u521b\u5efa\u6570\u636e\u5e93Statement\u5bf9\u8c61 Statement stm = conn.createStatement()\u037e //\u6570\u636e\u5e93\u4e8b\u52a1\u6267\u884cSQL\u8bed\u53e5 String sql = \"insert into test (comp_id,comp_name) values(1,'comp')\"\u037e //\u6267\u884c\u9759\u6001SQL\u8bed\u53e5 stm.execute(sql)\u037e //\u6570\u636e\u5e93\u9884\u5904\u7406SQL\u8bed\u53e5 PreparedStatement pstm = conn. prepareStatement(\u201cupdate test set id=? where comp_name=?\u201d) //\u9884\u5904\u7406SQL\u8bed\u53e5\u7b2c\u4e00\u4e2a\u53c2\u6570\u8d4b\u503c pstm.setInt(1,15)\u037e //\u9884\u5904\u7406SQL\u8bed\u53e5\u7b2c\u4e8c\u4e2a\u53c2\u6570\u8d4b\u503c pstm.setString(2,'DBMS')\u037e //\u6267\u884c\u9884\u5904\u7406SQL\u8bed\u53e5 pstm.execute()\u037e //\u63d0\u4ea4\u4e8b\u52a1 conn.commit()\u037e //\u5220\u9664\u8868\u4e2d\u6307\u5b9a\u884c\u6570\u636e stm.execute(\u201cdelete from test where id=15\u201d)\u037e //\u4e8b\u52a1\u56de\u6eda\u65b9\u6cd5 conn.rollback()\u037e \u4e0a\u9762\u4ee3\u7801\u4e2d\u6267\u884c\u63d0\u4ea4\u4e8b\u52a1\u64cd\u4f5c\uff0c\u6267\u884c\u9759\u6001 SQL \u8bed\u53e5\u4e0e\u6267\u884c\u9884\u5904\u7406 SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u7684\u66f4\u6539\u5c06\u6c38\u4e45\u751f\u6548\uff1b\u800c\u540e\u6267\u884c\u7684\u5220\u9664\u8868\u4e2d\u6307\u5b9a\u884c\u6570\u636e\u64cd\u4f5c\uff0c\u56e0\u5176\u540e\u8c03\u7528\u7684 rollback() \u65b9\u6cd5\uff0cdelete \u547d\u4ee4\u5bf9\u6570\u636e\u5e93\u7684\u6570\u636e\u66f4\u6539\u5c06\u88ab\u56de\u6eda\u6389\uff0c\u6545\u800c\u5bf9\u6570\u636e\u5e93\u7684\u5220\u9664\u64cd\u4f5c\u4e0d\u4f1a\u751f\u6548\u3002 6.3.3 \u8fde\u63a5\u4e8b\u52a1\u63a7\u5236\uff0cSavepoint\u63a5\u53e3 JDBC \u89c4\u8303 3.0 \u4e2d\u4e3a\u4e86\u589e\u52a0\u5bf9\u4e8b\u52a1\u7684\u63a7\u5236\uff0c\u65b0\u589e Savepoint \u63a5\u53e3\uff0c\u5176\u4ee3\u8868\u4e8b\u52a1\u4e2d\u7684\u4e00\u4e2a\u903b\u8f91\u4e8b\u52a1\u70b9\u3002\u5728\u975e\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u4e0b\uff0c\u4e00\u4e2a\u4e8b\u52a1\u4e2d\u53ef\u4ee5\u8bbe\u7f6e\u591a\u4e2a Savepoint\uff0c\u5728\u4ee3\u7801\u4e2d\u8fdb\u884c\u4e8b\u52a1\u56de\u6eda\u64cd\u4f5c\u65f6\uff0c\u53ef\u4ee5\u6307\u5b9a\u4e8b\u52a1\u56de\u6eda\u5230\u6307\u5b9a Savepoint \u4f4d\u7f6e\uff0c\u6307\u5b9a\u56de\u6eda\u4f4d\u7f6e\u524d\u7684\u4e8b\u52a1\u64cd\u4f5c\u4ecd\u7136\u4fdd\u7559\u3002\u6b64\u63a5\u53e3\u5927\u5927\u63d0\u9ad8\u4e86\u4e8b\u52a1\u5904\u7406\u7684\u7c92\u5ea6\uff0c\u65b9\u4fbf\u5e94\u7528\u7a0b\u5e8f\u63a7\u5236\u4e8b\u52a1\u5904\u7406\u903b\u8f91\u3002 \u793a\u4f8b\uff1a\u8fde\u63a5\u4e8b\u52a1\u63a7\u5236\u63a5\u53e3 Savepoint \u4f7f\u7528 //\u8bbe\u7f6e\u975e\u81ea\u52a8\u63d0\u4ea4 conn.setAutoCommit(false); //\u521b\u5efaStatement\u5bf9\u8c61 Statement stm = conn.createStatement(); //\u6267\u884cSQL\u547d\u4ee4 stm.execute(sql1); stm.execute(sql2); //\u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\u70b9save1 java.sql.Savepoint save1 =conn.setSavepoint(\"save_1\"); stm.execute(sql3); //\u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\u70b9save2 java.sql.Savepoint save2 =conn.setSavepoint(\"save_2\"); stm.execute(sql4); //\u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\u70b9save3 java.sql.Savepoint save3 =conn.setSavepoint(\"save_3\"); stm.execute(sql5); //\u56de\u6eda\u4e8b\u52a1\u5230\u56de\u6eda\u70b9save3 conn.rollback(save3); conn.commit(); \u4ee5\u4e0a\u4ee3\u7801\u6bb5\u4e2d\uff0c\u4e8b\u52a1\u6267\u884c\u8bed\u53e5 sql5 \u5c06\u88ab\u56de\u6eda\u6389\u3002 6.4 \u521b\u5efa\u6267\u884cSQL\u8bed\u53e5\u5bf9\u8c61 \u5728\u6570\u636e\u5e93\u6807\u51c6\u4e2d\uff0c\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61\u5206\u4e3a\u4e09\u7c7b\uff1a\u6267\u884c\u9759\u6001 SQL \u8bed\u53e5\u7684 Statement \u5bf9\u8c61\u3001\u6267\u884c\u9884\u7f16\u8bd1 SQL \u8bed\u53e5\u7684 PreparedStatement \u5bf9\u8c61\u4ee5\u53ca\u6267\u884c\u6570\u636e\u5e93\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\u7684 CallableStatement \u5bf9\u8c61\u3002 6.4.1 \u6267\u884cSQL\u5bf9\u8c61Statement Statement \u5bf9\u8c61\u7528\u4e8e\u6267\u884c\u9759\u6001 SQL \u8bed\u53e5\u548c\u83b7\u5f97 SQL \u4ea7\u751f\u7684\u7ed3\u679c\u3002\u5728\u865a\u8c37 JDBC \u9a71\u52a8\u4e2d\uff0c\u865a\u8c37\u6570\u636e\u5e93 DDL \u64cd\u4f5c\u5747\u901a\u8fc7 Statement \u5bf9\u8c61\u6765\u6267\u884c\u3002 Statement \u5bf9\u8c61\u901a\u8fc7 Connection \u7c7b\u7684 createStatement() \u65b9\u6cd5\u521b\u5efa\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a //\u521b\u5efa\u6267\u884cSQL\u8bed\u53e5\u5bf9\u8c61Statement Statement stm = conn.createStatement()\u037e 6.4.2 \u6267\u884cSQL\u5bf9\u8c61PreparedStatement PreparedStatement \u5bf9\u8c61\u4f7f\u7528\u65f6\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u5bf9\u6267\u884c SQL \u8bed\u53e5\u8fdb\u884c\u9884\u7f16\u8bd1\u5904\u7406\uff0c\u9884\u7f16\u8bd1 SQL \u8bed\u53e5\u5c06\u5728\u672a\u6765\u7684\u4f7f\u7528\u4e2d\u88ab\u91cd\u7528\u3002\u4e0e Statement \u5bf9\u8c61\u76f8\u6bd4\uff0cPreparedStatement \u5bf9\u8c61\u64cd\u4f5c\u591a\u6761 SQL \u8bed\u53e5\u7684\u6548\u7387\u66f4\u9ad8\u3002 \u7ecf\u8fc7\u9884\u7f16\u8bd1\u5e76\u5b58\u50a8\u5728 PreparedStatement \u5bf9\u8c61\u4e2d\u7684 SQL \u8bed\u53e5\uff0c\u901a\u8fc7 Connection \u7c7b\u7684 prepareStatement() \u65b9\u6cd5\u521b\u5efa\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a //\u521b\u5efa\u6267\u884c\u9884\u7f16\u8bd1SQL\u8bed\u53e5\u5bf9\u8c61PreparedStatement PreparedStatement preStatement = conn.prepareStatement(\u201c\u9884\u7f16\u8bd1SQL\u8bed\u53e5\u201d); \u9884\u5904\u7406 PreparedStatement \u5bf9\u8c61\u76f8\u5bf9\u4e8e\u9759\u6001 Statement \u5bf9\u8c61\u7684\u4f18\u52bf\uff1a - PreparedStatement \u53ef\u4ee5\u52a8\u6001\u4f20\u5165\u53c2\u6570\u503c\uff1b - PreparedStatement \u6bd4 Statement \u66f4\u5feb\uff1b PreparedStatement \u4f1a\u5c06 SQL \u8bed\u53e5\u9884\u7f16\u8bd1\u5728\u6570\u636e\u5e93\u7cfb\u7edf\u4e2d\uff0c\u6267\u884c\u8ba1\u5212\u540c\u6837\u4f1a\u88ab\u7f13\u5b58\u8d77\u6765\uff0c\u5b83\u5141\u8bb8\u6570\u636e\u5e93\u505a\u53c2\u6570\u5316\u67e5\u8be2\u3002\u4f7f\u7528\u9884\u5904\u7406\u8bed\u53e5\u6bd4\u666e\u901a\u7684 Statement \u67e5\u8be2\u66f4\u5feb\uff0c\u56e0\u505a\u7684\u5de5\u4f5c\u66f4\u5c11 (\u6570\u636e\u5e93\u5bf9 SQL \u8bed\u53e5\u7684\u5206\u6790\u3001\u7f16\u8bd1\u3001\u4f18\u5316\u5df2\u7ecf\u5728\u7b2c\u4e00\u6b21\u67e5\u8be2\u524d\u5b8c\u6210\u4e86)\u037e - PreparedStatement \u53ef\u4ee5\u9632\u6b62 SQL \u6ce8\u5165\u5f0f\u653b\u51fb\u3002 PreparedStatement \u5728\u4f7f\u7528\u53c2\u6570\u5316\u67e5\u8be2\u7684\u60c5\u51b5\u4e0b\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u4e0d\u4f1a\u5c06\u53c2\u6570\u7684\u5185\u5bb9\u89c6\u4e3a SQL \u6307\u4ee4\u7684\u4e00\u90e8\u5206\u6765\u5904\u7406\uff0c\u800c\u662f\u5728\u6570\u636e\u5e93\u5b8c\u6210 SQL \u6307\u4ee4\u7684\u7f16\u8bd1\u540e\uff0c\u624d\u5957\u7528\u53c2\u6570\u8fd0\u884c\uff0c\u56e0\u6b64\u5c31\u7b97\u53c2\u6570\u4e2d\u542b\u6709\u7834\u574f\u6027\u7684\u6307\u4ee4\uff0c\u4e5f\u4e0d\u4f1a\u88ab\u6570\u636e\u5e93\u6240\u8fd0\u884c\u3002 6.4.3 \u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u5bf9\u8c61CallableStatement CallableStatement \u5bf9\u8c61\u5b9e\u73b0\u4e86\u4ece Java \u5e94\u7528\u7a0b\u5e8f\u4e2d\u8c03\u7528\u6570\u636e\u5e93\u5b58\u50a8\u8fc7\u7a0b\u3002\u4f46\u6b64\u8c03\u7528\u8fc7\u7a0b\u5e76\u4e0d\u5305\u542b\u5b58\u50a8\u8fc7\u7a0b\u672c\u8eab\uff0c\u56e0\u5b58\u50a8\u8fc7\u7a0b\u5b58\u50a8\u5728\u6570\u636e\u5e93\u4e2d\u3002 CallableStatement \u5bf9\u8c61\u4e3a\u6240\u6709\u7684\u6570\u636e\u5e93\u63d0\u4f9b\u4e86\u4e00\u79cd\u4ee5\u6807\u51c6\u5f62\u5f0f\u8c03\u7528\u5b58\u50a8\u8fc7\u7a0b\u7684\u65b9\u6cd5\uff0c\u901a\u8fc7 Connection \u7c7b\u7684 prepareCall() \u65b9\u6cd5\u521b\u5efa\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a //\u521b\u5efa\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u5bf9\u8c61CallableStatement CallableStatement cstmt= conn.prepareCall(\u201c{call \u5b58\u50a8\u8fc7\u7a0b\u540d(\u53c2\u6570\u8868\u5217)}\u201d); 6.4.4 \u6267\u884cSQL\u8bed\u53e5\u5bf9\u8c61\u5c5e\u6027\u6269\u5145 \u5728\u521b\u5efa\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61\u65f6\uff0c\u53ef\u901a\u8fc7\u6784\u9020\u65b9\u6cd5\u7684\u4e0d\u540c\u53c2\u6570\u8bbe\u7f6e ResultSet \u5bf9\u8c61\u5c5e\u6027\uff0c\u5c5e\u6027\u5305\u62ec\u7ed3\u679c\u7c7b\u578b ResultSetType\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b ResultSetConcurrency\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b ResultSetHoldability\u3002 ResultSetType \u9ed8\u8ba4\u4e3a ResultSet.TYPE_SCROLL_INSENSITIVE\uff1a\u652f\u6301\u7ed3\u679c\u96c6 backforward\u3001last\u3001first \u7b49\u64cd\u4f5c\uff0c\u5bf9\u6570\u636e\u5e93\u4e2d\u5176\u5b83 session \u8fdb\u884c\u7684\u6570\u636e\u66f4\u6539\u4e0d\u654f\u611f\uff1b ResultSetConcurrency \u9ed8\u8ba4\u4e3a ResultSet.CONCUR_READ_ONLY: \u4e0d\u53ef\u66f4\u65b0\u7ed3\u679c\u96c6\uff1b\u8be5\u5c5e\u6027\u4ea6\u53ef\u66f4\u6539\u4e3a ResultSet.CONCUR_UPDATABLE\uff0c\u652f\u6301\u5728 ResultSet \u4e2d\u5bf9\u8bb0\u5f55\u8fdb\u884c\u4fee\u6539\uff0c\u4fee\u6539\u540e\u8bb0\u5f55\u66f4\u65b0\u5230\u6570\u636e\u5e93\uff0c\u4fee\u6539\u64cd\u4f5c\u53ef\u5305\u542b\u63d2\u5165\u3001\u5220\u9664\u6216\u66f4\u65b0\uff1b ResultSetHoldability \u9ed8\u8ba4\u4e3a ResultSet.HOLD_CURSORS_OVER_COMMIT: \u5728\u4e8b\u52a1 commit \u6216 rollback \u540e\uff0cResultSet \u4ecd\u7136\u53ef\u7528\u3002 Connection \u7c7b\u521b\u5efa Statement \u5bf9\u8c61\u6784\u9020\u65b9\u6cd5\uff1a //Statement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 createStatement(int resultSetType,int resultSetConcurrency)\uff1b //Statement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 createStatement(int resultSetType,int resultSetConcurrency, int resultSetHoldability)\uff1b Connection \u7c7b\u521b\u5efa PreparedStatement \u5bf9\u8c61\u6784\u9020\u65b9\u6cd5\uff1a //PreparedStatement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareStatement(String sql, int resultSetType,int resultSetConcurrency) //PrepareStatment\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareStatement(String sql, int resultSetType,int resultSetConcurrency, int resultSetHoldability) Connection \u7c7b\u521b\u5efa CallableStatement \u5bf9\u8c61\u6784\u9020\u65b9\u6cd5\uff1a //CallableStatement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareCall(String sql, int resultSetType,int resultSetConcurrency) //CallableStatement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareCall(String sql, int resultSetType,int resultSetConcurrency, int resultSetHoldability) 6.5 \u6267\u884cSQL\u8bed\u53e5 Statement \u5bf9\u8c61\u5b9a\u4e49\u4e86\u591a\u79cd\u6267\u884c SQL \u8bed\u53e5\u7684\u65b9\u6cd5\uff0c\u7528\u6765\u5904\u7406\u8fd4\u56de\u4e0d\u540c\u7ed3\u679c\u7684 SQL \u547d\u4ee4\uff1a - execute(String sql)\uff1a\u6267\u884c\u53ef\u4ee5\u8fd4\u56de\u591a\u4e2a\u7ed3\u679c\u96c6\u7684 SQL \u8bed\u53e5\u8fd4\u56de\u7c7b\u578b\u4e3a boolean\uff0c\u5982\u679c\u8fd4\u56de\u7684\u662f\u66f4\u65b0\u7684\u6570\u76ee\uff0c\u5219\u8fd4\u56de false\uff1b\u5982\u679c\u8fd4\u56de\u7684\u662f ResultSet \u5bf9\u8c61\uff0c\u5219\u8fd4\u56detrue\u3002 - executeQuery(String sql)\uff1a\u6267\u884c\u8fd4\u56de\u5355\u4e2a ResultSet \u7684 SQL \u8bed\u53e5\u8fd4\u56de\u7c7b\u578b\u4e3a ResultSet \u5bf9\u8c61\u3002 - executeUpdate()\uff1a\u6267\u884c SQL INSERT\u3001UPDATE \u6216 DELETE \u8bed\u53e5\u8fd4\u56de\u503c\u4e3a int \u578b\uff0c\u6570\u636e\u5e93\u53d7\u5f71\u54cd\u7684\u884c\u8ba1\u6570\u3002 - \u6279\u5904\u7406\u65b9\u6cd5\uff1a\u6279\u91cf\u6267\u884c SQL \u8bed\u53e5 clearBatch()\uff1a\u6e05\u7a7a\u5386\u53f2 batch \u547d\u4ee4\uff1b addBatch(String sql)\uff1a\u6dfb\u52a0\u8981\u6267\u884c\u7684 sql\uff1b executeBatch()\uff1a\u6279\u91cf\u6267\u884c sql\u3002 PreparedStatement \u7ee7\u627f\u81ea Statement\uff0c\u5b9a\u4e49\u4e86\u5927\u91cf\u7684 setter \u65b9\u6cd5\u7528\u4e8e\u8bbe\u7f6e\u52a8\u6001 sql\u7684\u53c2\u6570\uff0c\u56e0\u6b64 PreparedStatement \u652f\u6301\u52a8\u6001\u4f20\u53c2\uff1b\u53e6\u5916 PreparedStatement \u5185\u90e8\u5b58\u50a8\u4e86\u89e3\u6790\u7684 sql\uff0c\u53ef\u4ee5\u591a\u6b21\u6267\u884c\u800c\u65e0\u9700\u91cd\u590d\u89e3\u6790\u3002PreparedStatement \u7ee7\u627f\u81ea Statement\uff0cCallableStatement \u7ee7\u627f\u81ea PreparedStatement\uff0c\u6545\u800c\u4e09\u8005\u6267\u884c SQL \u8bed\u53e5\u7684\u65b9\u5f0f\u53ef\u901a\u7528\u3002 6.5.1 \u901a\u8fc7Statement\u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c \u901a\u8fc7 Statement \u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c\u9700\u8981\u6ce8\u610f\u7684\u4e8b\u9879\uff1a - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u524d\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u8bbe\u7f6e\u4e3a FALSE\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\uff0c\u5e76\u8fdb\u884c\u624b\u52a8\u63d0\u4ea4\uff08commit\uff09\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u540e\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u6062\u590d\u4e3a TRUE\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u5f02\u5e38\u53d1\u751f\u65f6\uff0c\u8fdb\u884c rollback(\u56de\u6eda)\u3002 \u793a\u4f8b\uff1a\u901a\u8fc7 Statement \u6279\u91cf\u64cd\u4f5c\u6570\u636e try { //\u521b\u5efaStatement\u5bf9\u8c61 stm = con.createStatement(); //\u8bbe\u7f6e\u4e8b\u52a1\u975e\u81ea\u52a8\u63d0\u4ea4 con.setAutoCommit(false); // \u6dfb\u52a0\u591a\u6761SQL\u8bed\u53e5\u5230\u6279\u5904\u7406\u4e2d stm.addBatch(\"insert into student values(23,'tangbao','\u9ad8\u6570',100)\"); stm.addBatch(\"insert into student values(24,'\u738b\u5b9a','c#',98)\"); stm.addBatch(\"insert into student values(25,'\u738b\u56fd\u4e91','java',90)\"); //\u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c stm.executeBatch(); System.out.println(\"\u63d2\u5165\u6210\u529f!\"); //\u6267\u884c\u6210\u529f\u540e\u8fdb\u884c\u6570\u636e\u63d0\u4ea4 con.commit(); System.out.println(\"\u63d0\u4ea4\u6210\u529f!\"); //\u5173\u95ed\u975e\u81ea\u52a8\u63d0\u4ea4 con.setAutoCommit(true); } catch (SQLException e) { if (!con.isClosed()) { con.rollback(); //\u51fa\u73b0\u5f02\u5e38\uff0c\u56de\u6eda\u4e8b\u52a1 System.out.println(\"\u63d0\u4ea4\u5931\u8d25\uff0c\u56de\u6eda\uff01\"); con.setAutoCommit(true); //\u5173\u95ed\u975e\u81ea\u52a8\u63d0\u4ea4 } } finally { if (stmt != null) { //\u5173\u95ed\u64cd\u4f5c\u5bf9\u8c61 stmt.close(); } } 6.5.2 \u901a\u8fc7PreparedStatement\u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c \u901a\u8fc7 PreparedStatement \u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c\u9700\u8981\u6ce8\u610f\u7684\u4e8b\u9879\uff1a - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u524d\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u8bbe\u7f6e\u4e3a FALSE\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\uff0c\u5e76\u8fdb\u884c\u624b\u52a8\u63d0\u4ea4\uff08commit\uff09\uff0c\u6570\u636e\u91cf\u5927\u65f6\uff0c\u8bbe\u7f6e\u624b\u52a8\u63d0\u4ea4\u95f4\u9694\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u540e\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u6062\u590d\u4e3a TRUE\uff1b \u2022 \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u5f02\u5e38\u53d1\u751f\u65f6\uff0c\u8fdb\u884c rollback(\u56de\u6eda)\uff1b - PreparedStatement \u6267\u884c\u8bed\u53e5\u4e0d\u80fd\u4e3a DDL \u8bed\u53e5\u3002 \u793a\u4f8b\uff1a\u5c06 10000 \u6761\u8bb0\u5f55\u63d2\u5165\u6570\u636e\u5e93\u4e2d\uff0c\u6bcf 100 \u6761\u6267\u884c\u4e00\u6b21\u63d0\u4ea4\u64cd\u4f5c try{ conn.setAutoCommit(false); //\u8bbe\u7f6e\u975e\u81ea\u52a8\u63d0\u4ea4 //\u521b\u5efaPreparedStatement\u5bf9\u8c61 ps = conn.prepareStatement(\"insert into testtab values (?, ?, ?)\"); //\u5faa\u73af\u6dfb\u52a0\u6279\u5904\u7406\u6570\u636e for(int i = 0;i<list.size();i++){ HashMap map = list.get(i);//list\u4e3a\u6570\u636e\u5c01\u88c5\uff0c\u6b64\u5904\u7565 ps.setString(1, map.get(\"id\").toString()); ps.setString(2, map.get(\"name\").toString()); ps.setString(3, map.get(\"age\").toString()); ps.addBatch(); if(mod(i,100)==0){//\u6bcf100\u6761\u6267\u884c\u4e00\u6b21\u6267\u884c\u64cd\u4f5c ps.executeBatch();//\u6267\u884c\u6279\u91cf\u63d2\u5165 conn.commit();//\u6267\u884c\u4e8b\u52a1\u63d0\u4ea4 } } ps.executeBatch();//\u6267\u884c\u6279\u91cf\u63d2\u5165 conn.commit(); //\u63d0\u4ea4\u4e8b\u52a1 }catch(Exception e){ if (!conn.isClosed()) { conn.rollback(); //\u51fa\u73b0\u5f02\u5e38\uff0c\u56de\u6eda\u4e8b\u52a1 System.out.println(\"\u63d0\u4ea4\u5931\u8d25\uff0c\u56de\u6eda\uff01\"); conn.setAutoCommit(true); //\u5173\u95ed\u975e\u81ea\u52a8\u63d0\u4ea4 } } finally { if (ps!= null) { ps.close();//\u5173\u95ed\u64cd\u4f5c\u5bf9\u8c61 } } 6.5.3 CallableStatement\u7ed1\u5b9a\u53c2\u6570 CallableStatement \u5b58\u5728\u4e09\u79cd\u7c7b\u578b\u7684\u53c2\u6570 IN\u3001OUT \u548c INOUT\u3002 - IN\uff1a\u521b\u5efa SQL \u8bed\u53e5\u65f6\u5176\u53c2\u6570\u503c\u672a\u77e5\u3002\u4f7f\u7528 setXXX() \u65b9\u6cd5\u5c06\u503c\u7ed1\u5b9a\u5230 IN \u53c2\u6570\u3002 - OUT\uff1a\u7531 SQL \u8bed\u53e5\u8fd4\u56de\u7684\u53c2\u6570\u503c\u3002\u53ef\u4ee5\u4f7f\u7528 getXXX() \u65b9\u6cd5\u4ece OUT \u53c2\u6570\u4e2d\u68c0\u7d22\u503c\u3002 - INOUT\uff1a\u63d0\u4f9b\u8f93\u5165\u548c\u8f93\u51fa\u503c\u7684\u53c2\u6570\u3002\u4f7f\u7528 setXXX() \u65b9\u6cd5\u7ed1\u5b9a\u53d8\u91cf\u5e76\u4f7f\u7528getXXX() \u65b9\u6cd5\u68c0\u7d22\u503c\u3002 \u793a\u4f8b 1\uff1a\u901a\u8fc7\u53c2\u6570\u4e0b\u6807\u7ed1\u5b9a\u53c2\u6570 //\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\u8bed\u53e5 String sql =\"{call pro_2(?,?,?)}\"; //\u521b\u5efaCallableStatement\u5bf9\u8c61 CallableStatement cstm = conn.prepareCall(sql); //\u901a\u8fc7\u53c2\u6570\u4e0b\u6807\u8bbe\u7f6e\u53c2\u6570(IN\u53c2\u6570) cstm.setInt(1, 20490); //\u6ce8\u518cOUT\u53c2\u6570\u6570\u636e\u7c7b\u578b cstm.registerOutParameter(2, com.xugu.cloudjdbc.Types.VARCHAR); cstm.registerOutParameter(3, com.xugu.cloudjdbc.Types.VARCHAR); //\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528 cstm.execute(); //\u83b7\u53d6\u5b58\u50a8\u8fc7\u7a0b\u8f93\u51fa\u53c2\u6570 String name = (String)cstm.getObject(2); String address = (String)cstm.getObject(3); \u793a\u4f8b 2\uff1a\u901a\u8fc7\u53c2\u6570\u540d\u7ed1\u5b9a\u53c2\u6570 //\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\u8bed\u53e5 CallableStatement pstm = conn.prepareCall(\"insert into tt1 values(:id,:name)\"); //\u901a\u8fc7\u53c2\u6570\u540d\u8bbe\u7f6e\u53c2\u6570(IN\u53c2\u6570) pstm.setInt(\"id\", 1); pstm.setString(\"name\", \"cloud\"); //\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528 pstm.execute(); 6.6 \u5904\u7406\u6267\u884c\u7ed3\u679c ResultSet \u7c7b\u662f\u901a\u8fc7 Statement \u53ca\u5176\u5b50\u7c7b\u6267\u884c SQL \u67e5\u8be2\u8bed\u53e5\u5f97\u5230\u7684\u7ed3\u679c\u96c6\u3002ResultSet \u7c7b\u5305\u542b\u4e09\u4e2a\u91cd\u8981\u5c5e\u6027\uff1aResultSet \u5bf9\u8c61\u5e76\u53d1\u6a21\u5f0f\u3001ResultSet \u5bf9\u8c61\u5149\u6807\u5904\u7406\u65b9\u5411\u3001ResultSet \u5bf9\u8c61\u5149\u6807\u7c7b\u578b\u3002ResultSet \u7c7b\u5177\u6709\u6307\u5411\u5f53\u524d\u7ed3\u679c\u96c6\u6570\u636e\u884c\u4f4d\u7f6e\u5149\u6807\uff0c\u5149\u6807\u4f4d\u7f6e\u521d\u59cb\u88ab\u7f6e\u4e8e\u7b2c\u4e00\u884c\u4e4b\u524d\uff0c\u901a\u8fc7 ResultSet \u7c7b\u5c01\u88c5\u7684\u5149\u6807\u79fb\u52a8\u65b9\u6cd5\u5b9e\u73b0\u5bf9\u5149\u6807\u4f4d\u7f6e\u7684\u63a7\u5236\uff0c\u5f53 ResultSet \u5bf9\u8c61\u7684\u5149\u6807\u79fb\u81f3\u6570\u636e\u7ed3\u679c\u96c6\u672b\u5c3e\u65f6 (\u4e0b\u4e00\u884c\u65e0\u6570\u636e)\uff0c\u8fd4\u56de FALSE\u3002 \u5728\u865a\u8c37 JDBC \u4e2d\uff0cResultSet \u7c7b\u5206\u4e3a\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u548c\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\uff08\u901a\u8fc7 URL \u8fde\u63a5\u4e32\u53c2\u6570 recv_mode \u914d\u7f6e\uff09\u3002\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u9ed8\u8ba4\u5c5e\u6027\u4e3a\u4e0d\u53ef\u66f4\u65b0\u3001\u5411\u524d\u79fb\u52a8\u3001\u53ef\u4ee5\u6eda\u52a8\uff1b\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u9ed8\u8ba4\u5c5e\u6027\u4e3a\u4e0d\u53ef\u66f4\u65b0\u3001\u53ea\u5411\u524d\u79fb\u52a8\u3001\u4e0d\u53ef\u6eda\u52a8\u3002 Statement \u5bf9\u8c61\u6267\u884c SQL \u8bed\u53e5\u8fd4\u56de\u7ed3\u679c\u96c6\u4ec5\u80fd\u662f\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\uff0c\u800c PreparedStatement \u5bf9\u8c61\u6267\u884c SQL \u8bed\u53e5\u8fd4\u56de\u7ed3\u679c\u96c6\u53ef\u4e3a\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u6216\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u3002 \u5f53\u6267\u884c SQL \u8fd4\u56de\u6570\u636e\u7ed3\u679c\u96c6\u8f83\u5927\u65f6\uff0c\u5efa\u8bae\u4f7f\u7528\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\uff0c\u907f\u514d JVM \u7684\u6ea2\u51fa\u3002 {.is-info} 6.6.1 \u66f4\u65b0ResultSet\u7ed3\u679c\u96c6 \u521b\u5efa Statement \u5bf9\u8c61\u65f6\uff0c\u8bbe\u7f6e Statement \u5c5e\u6027 RresultSetConcurrency \u4e3a ResultSet.CONCUR_UPDATABLE\uff0c\u5e76\u4e14\u6570\u636e\u5e93 URL \u8fde\u63a5\u4e32\u5c5e\u6027 return_rowid \u8bbe\u7f6e\u4e3a TRUE\u65f6\uff0cStatement \u5bf9\u8c61\u6267\u884c SQL \u8bed\u53e5\u8fd4\u56de\u7684 ResultSet \u7ed3\u679c\u96c6\u624d\u80fd\u88ab\u66f4\u65b0\u3002\u5f53 ResultSet \u5bf9\u8c61\u4e3a\u53ef\u66f4\u65b0\u7ed3\u679c\u96c6\u65f6\uff0c\u5c06\u5149\u6807\u79fb\u81f3\u63d2\u5165\u4f4d\u7f6e\uff0c\u53ef\u8c03\u7528 ResultSet \u7c7b\u5bf9\u5e94\u7684 update \u65b9\u6cd5\u4fee\u6539\u7ed3\u679c\u96c6\u4e2d\u884c\u6570\u636e\uff0c\u5e76\u901a\u8fc7 updateRow \u65b9\u6cd5\u5c06\u66f4\u6539\u6570\u636e\u66f4\u65b0\u5230\u6570\u636e\u5e93\u4e2d\u3002 \u793a\u4f8b\uff1a\u901a\u8fc7\u4fee\u6539\u7ed3\u679c\u96c6\u4e2d\u6570\u636e\u503c\u66f4\u6539\u6570\u636e\u5e93\u4e2d\u5bf9\u5e94\u8bb0\u5f55 //\u521b\u5efaStatement\u5bf9\u8c61\u5e76\u8bbe\u7f6e\u7ed3\u679c\u96c6\u5c5e\u6027\u4e3a\u53ef\u66f4\u65b0 Statement stm = conn.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_UPDATABLE); //\u6267\u884cSQL\u8bed\u53e5 ResultSet rs = stm.executeQuery(sql); //\u7ed3\u679c\u96c6\u904d\u5386 while(rs.next()) { //\u66f4\u65b0\u7ed3\u679c\u96c6\u4e2d\u6307\u5b9a\u5217\u6570\u636e rs.updateLong(1, 5); //\u66f4\u65b0\u7ed3\u679c\u96c6\u4e2d\u6307\u5b9a\u5217\u6570\u636e rs.updateFloat(3, 12.3f); //\u7ed3\u679c\u96c6\u53d8\u66f4\u56de\u5199\u5165\u6570\u636e\u5e93 rs.updateRow(); } \u901a\u8fc7\u8c03\u7528 ResultSet \u7c7b\u7684 next()\u3001previous()\u3001absolute(int) \u65b9\u6cd5\u79fb\u52a8\u5149\u6807\u4f4d\u7f6e\uff0c\u5c06\u5149\u6807\u4f4d\u7f6e\u79fb\u52a8\u5230\u6307\u5b9a\u6570\u636e\u884c\uff0c\u901a\u8fc7 ResultSet \u7c7b\u5bf9\u5e94\u7684 get \u65b9\u6cd5\u83b7\u53d6\u884c\u6570\u636e\u3002 \u5982\u4f7f\u7528\u7ed3\u679c\u96c6\u66f4\u65b0\u6570\u636e\u5e93\u6570\u636e\uff0c\u9700\u5728\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65f6\uff0c\u8bbe\u7f6e\u8fde\u63a5\u5c5e\u6027 return_rowid \u4e3aTRUE\uff0c\u4e14\u5728\u751f\u6210\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61\u65f6\uff0c\u5e76\u53d1\u5c5e\u6027\u6307\u5b9a\u4e3a ResultSet.CONCUR_UPDATABLE\u3002 {.is-info} 6.6.2 \u901a\u8fc7\u79fb\u52a8\u5149\u6807\u83b7\u53d6\u7ed3\u679c\u96c6\u6761\u6570 \u793a\u4f8b 1\uff1a \u7edf\u8ba1\u7ed3\u679c\u96c6\u603b\u6761\u6570 //\u521b\u5efaStatement\u5bf9\u8c61 Statement stm= conn.createStatement(); stm.execute(\"create table test(id int identity(1,1));insert into test values(default)\"); //\u6267\u884c\u7ed3\u679c\u96c6\u67e5\u8be2 ResultSet rs = stm.executeQuery(\"select * from test\") //\u79fb\u52a8\u5149\u6807\u81f3\u7ed3\u679c\u96c6\u672b\u5c3e rs.last(); //\u83b7\u53d6\u7ed3\u679c\u96c6\u884c\u6570 int rsCounts = rs.getRow(); 6.6.3 \u591a\u7ed3\u679c\u96c6\u5904\u7406 \u865a\u8c37 JDBC \u652f\u6301\u591a\u7ed3\u679c\u96c6\u5904\u7406\uff0c\u5141\u8bb8 Statement \u63a5\u53e3\u652f\u6301\u591a\u91cd\u6253\u5f00\u7684 ResultSet \u5bf9\u8c61\u3002\u6267\u884c\u8bed\u53e5\u53ef\u4ee5\u662f\u591a\u6761 SQL \u8bed\u53e5\u7684\u96c6\u5408\uff0c\u5373\u4e00\u6b21\u6027\u5411\u865a\u8c37\u670d\u52a1\u5668\u53d1\u9001\u591a\u6761 SQL \u8bed\u53e5\uff0c\u865a\u8c37\u670d\u52a1\u5668\u6267\u884c\u5b8c SQL \u8bed\u53e5\u540e\u8fd4\u56de\u591a\u4e2a\u6267\u884c\u7ed3\u679c\uff1b\u4ea6\u6216\u5b58\u50a8\u8fc7\u7a0b\u5b9a\u4e49\u6709\u591a\u4e2a\u8fd4\u56de\u7ed3\u679c\u96c6\u3002\u865a\u8c37 JDBC \u7684 Statement \u91cd\u8f7d\u4e86 Statement \u63a5\u53e3\u4e2d\u7684 getMoreResults() \u65b9\u6cd5\u3002 \u793a\u4f8b\uff1a\u591a\u7ed3\u679c\u96c6\u5904\u7406 //SQL\u8bed\u53e5\u5305\u542b\u591a\u6761\u67e5\u8be2\u547d\u4ee4 String sql=\" SELECT * FROM A1 WHERE D2=(SELECT AVG(D2) FROM A1 GROUP BY D1);SELECT * FROM A1 WHERE D2>(SELECT MIN(D2) FROM A1 GROUP BY D1)\"; //\u521b\u5efaStatement\u5bf9\u8c61 Statement stm = conn.createStatement(); //\u6267\u884cSQL\u8bed\u53e5 boolean f = stm.execute(sql); //\u5224\u65ad\u662f\u5426\u6709ResultSet\u5bf9\u8c61\u4ea7\u751f if(f == true){ //\u83b7\u53d6\u7ed3\u679c\u96c6\u5bf9\u8c61 ResultSet rs1 = stm.getResultSet(); ... ... ... ... } while(true) { //\u5224\u65adStatement\u662f\u5426\u8fd4\u56de\u4e86\u591a\u4e2aResultSet\u5bf9\u8c61 if(!stm.getMoreResults(Statement.CLOSE_CURRENT_RESULT)){ break; } else if((rs2 = cstm.getResultSet())!=null) { ... ... ... ...//\u6570\u636e\u5904\u7406\u90e8\u5206\u7701\u7565 } } 6.6.4 \u670d\u52a1\u5668\u7aef\u6e38\u6807\u4f7f\u7528 \u865a\u8c37JDBC\u4e2d\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u751f\u6210\u9700\u6ee1\u8db3\u4e24\u4e2a\u6761\u4ef6\uff1aURL\u8fde\u63a5\u4e32\u5c5e\u6027recv_mode\u503c\u4e3a2\uff0cStatement\u5bf9\u8c61\u6267\u884cSQL\u8bed\u53e5\u4e3a\u5355\u6761SELECT\u8bed\u53e5\u3002 \u5e94\u7528\u7a0b\u5e8f\u7aef\u901a\u8fc7Statement\u7c7b\u7684setFetchSize(int)\u65b9\u6cd5\u6216ResultSet\u7c7b\u7684setFetchSize(int)\u65b9\u6cd5\u8bbe\u7f6e\u6bcf\u6b21\u4ece\u670d\u52a1\u5668\u7aef\u83b7\u53d6\u591a\u5c11\u6761\u6570\u636e\u3002 \u4f7f\u7528\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7684 ResultSet \u5bf9\u8c61\uff0c\u5149\u6807\u53ea\u80fd\u5355\u5411\u5411\u524d\u6b63\u5411\u79fb\u52a8\uff0c\u4e0d\u80fd\u5411\u540e\u79fb\u52a8\u6216\u6765\u56de\u6eda\u52a8\u3002 {.is-info} \u793a\u4f8b\uff1a\u865a\u8c37\u6570\u636e\u5e93\u670d\u52a1\u5668\u7aef\u6e38\u6807\u4f7f\u7528 //\u521b\u5efa\u865a\u8c37JDBC\u7279\u6709Statement\u5bf9\u8c61 Statement stm = (com.xugu.cloudjdbc.Statement)conn.createStatement(); //\u5f00\u542f\u670d\u52a1\u5668\u7aef\u6e38\u6807 stm.setServerCursor(true); //\u8bbe\u7f6e\u670d\u52a1\u5668\u7aef\u6e38\u6807\u5355\u6b21\u8fd4\u56de\u6570\u636e\u6761\u6570 stm.setFetchSize(1000); //\u6267\u884cSQL\u8bed\u53e5 ResultSet rs = stm.executeQuery(\"select * from t1\"); //\u904d\u5386\u6570\u636e while\uff08rs.next()\uff09 { ... ... ... ... } //\u5173\u95ed\u670d\u52a1\u5668\u7aef\u6e38\u6807 stm.setServerCursor(false); 6.6.5 \u68c0\u7d22\u81ea\u52a8\u4ea7\u751f\u7684\u5173\u952e\u5b57GeneratedKeys JDBC 3.0 \u89c4\u8303\u4e2d\u5bf9\u4e8e\u81ea\u52a8\u4ea7\u751f\u7684\u5173\u952e\u5b57\u6570\u503c\uff0c\u5b9a\u4e49\u4e86\u63a5\u53e3\u89c4\u8303\uff0c\u5373\uff1agetGeneratedKeys() \u65b9\u6cd5\u3002 \u4e3a\u4e86\u89e3\u51b3\u5bf9\u83b7\u53d6\u81ea\u52a8\u4ea7\u751f\u7684\u6216\u81ea\u52a8\u589e\u52a0\u7684\u5173\u952e\u5b57\u7684\u503c\u7684\u9700\u6c42\uff0c\u865a\u8c37 JDBC \u6839\u636e JDBC3.0 \u89c4\u8303\u63d0\u4f9b\u4e86\u83b7\u5f97\u5173\u952e\u5b57\u503c\u7684\u65b9\u6cd5\u3002\u83b7\u53d6\u5173\u952e\u5b57\u7684\u503c\uff0c\u9700\u8981\u5728\u6267\u884c\u65b9\u6cd5\u4e2d\u6307\u5b9a\u81ea\u589e\u5173\u952e\u5b57\u6807\u8bb0\u3002SQL \u8bed\u53e5\u6267\u884c\u5b8c\u540e\uff0c\u8c03\u7528 Statement \u5bf9\u8c61\u7684 getGeneratedKeys() \u65b9\u6cd5\uff0c\u83b7\u5f97\u5305\u542b\u81ea\u589e\u957f\u503c\u7684 ResultSet \u5bf9\u8c61\u3002 \u793a\u4f8b\uff1a\u83b7\u53d6\u6570\u636e\u5e93\u81ea\u589e\u957f\u5173\u952e\u5b57\u7684\u503c //\u521b\u5efaStatement\u5bf9\u8c61 Statement stmt = conn.createStatement(); //\u6307\u5b9a\u81ea\u589e\u957f\u5173\u952e\u5b57\u7684\u6807\u8bc6 String[] colN = {\"id\"}; //\u5728\u6267\u884c\u65b9\u6cd5\u4e2d\u5f15\u5165\u81ea\u589e\u957f\u5173\u952e\u5b57\u6807\u8bc6 stmt.executeUpdate(\"INSERT INTO authors(first_name, last_name) VALUES (\u2018Ghq\u2019, \u2018Wxl\u2019)\",colN); //\u83b7\u53d6\u7ed3\u679c\u96c6 ResultSet rs = stmt.getGeneratedKeys(); if ( rs.next() ) { //\u83b7\u53d6\u7ed3\u679c\u96c6\u4e2d\u7684\u81ea\u589e\u957f\u503c \u3000\u3000 int key = rs.getInt(); } 6.7 \u91ca\u653e\u8d44\u6e90 \u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u56e0\u5904\u7406\u9700\u8981\u6240\u5efa\u7acb\u7684 ResultSet\u3001Statement\u3001PreparedStatement \u7b49\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61\uff0c\u5728\u4f7f\u7528\u5b8c\u540e\u5fc5\u987b\u5173\u95ed\u3002\u5173\u95ed\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61\uff0c\u76f4\u63a5\u8c03\u7528\u5bf9\u5e94\u7684\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61 close() \u65b9\u6cd5\u5373\u53ef\u3002 \u5f53\u4e0d\u518d\u9700\u8981\u548c\u865a\u8c37\u6570\u636e\u5e93\u8fdb\u884c\u4ea4\u4e92\u65f6\uff0c\u9700\u65ad\u5f00\u6570\u636e\u5e93\u8fde\u63a5\u3002\u8c03\u7528 Connection \u7c7b\u7684 close() \u65b9\u6cd5\u5373\u4f1a\u5173\u95ed\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u540c\u65f6\u91ca\u653e\u8fde\u63a5\u4e0a\u6240\u6301\u6709\u7684\u6240\u6709\u6570\u636e\u5e93\u8d44\u6e90\u3002 \u6570\u636e\u5e93\u8fde\u63a5\u4e3a\u975e\u81ea\u52a8\u63d0\u4ea4\u65f6\uff0c\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61\u5728\u4f7f\u7528\u5b8c\u540e\uff0c\u82e5\u672a\u53ca\u65f6\u5173\u95ed\uff0c\u6b64\u65f6\u8fdb\u884c DDL \u64cd\u4f5c\u5c06\u4f1a\u5bfc\u81f4\u865a\u8c37\u6570\u636e\u5e93\u52a0\u9501\u8d85\u65f6\u6216\u5931\u8d25\u3002 {.is-info} \u4e03. \u5927\u5bf9\u8c61\u7c7b\u578b\u5904\u7406 JDBC 3.0 \u89c4\u8303\u5b9a\u4e49\u6709 java.sql.Blob \u4e0e java.sql.Clob \u63a5\u53e3\uff0c\u6b64\u4e24\u7c7b\u63a5\u53e3\u4e3a\u6570\u636e\u5e93\u5927\u5bf9\u8c61\u6570\u636e\u5904\u7406\u63a5\u53e3\u3002\u865a\u8c37\u6570\u636e\u5e93\u5927\u5bf9\u8c61\u5b57\u6bb5\u7c7b\u578b\u5305\u542b\uff1ablob\u3001clob\u3001binary\u3002 \u5728\u865a\u8c37 JDBC \u4e2d\uff0c\u83b7\u53d6\u5927\u5bf9\u8c61\u6570\u636e\u6709\u4e24\u79cd\u8fd4\u56de\u65b9\u5f0f\uff1a\u4e00\u79cd\u662f\u6570\u636e\u76f4\u63a5\u8fd4\u56de\uff1b\u53e6\u4e00\u79cd\u662f\u8fd4\u56de\u63cf\u8ff0\u7b26\u65b9\u5f0f\u3002\u5f53\u8fd4\u56de\u6570\u636e\u4e2d\u5927\u5bf9\u8c61\u6570\u636e\u8f83\u591a\u65f6\uff0c\u5efa\u8bae\u4f7f\u7528\u8fd4\u56de\u63cf\u8ff0\u7b26\u65b9\u5f0f\uff0c\u4ece\u800c\u907f\u514d\u56e0\u6570\u636e\u8fc7\u591a\u8fc7\u5927\u9020\u6210\u7684 JVM \u5185\u5b58\u6ea2\u51fa\u3002\u865a\u8c37 JDBC \u9a71\u52a8\u542f\u7528\u5927\u5bf9\u8c61\u8fd4\u56de\u63cf\u8ff0\u7b26\u65b9\u5f0f\uff0c\u9700\u5728\u8fde\u63a5 URL \u4e32\u4e0a\u914d\u7f6e\u5c5e\u6027 lob_ret \u4e3a descriptor \u3002 7.1 \u5411\u8868\u4e2d\u63d2\u5165\u5927\u5bf9\u8c61 LOB \u5bf9\u8c61\u7684\u63d2\u5165\u5fc5\u987b\u901a\u8fc7 PreparedStatement\u3001CallableStatement \u7c7b\u7684 setXXX() \u65b9\u6cd5\u65b9\u5f0f\u5b9e\u73b0\u3002\u865a\u8c37 JDBC \u4e2d PreparedStatement \u63d0\u4f9b\u591a\u79cd\u65b9\u6cd5\u8bbe\u7f6e\u5927\u5bf9\u8c61\u53c2\u6570\u503c\uff0c\u5982\u4e0b\u5217\u65b9\u6cd5\uff1a setBinaryStream(int parameterIndex,InputStream x) setBlob(int parameterIndex, Blob x) setBlob(int parameterIndex, InputStream x) setBytes(int parameterIndex,byte[] x) setCharacterStream(int parameterIndex, Reader reader) setClob(int parameterIndex, Clob x) setClob(int parameterIndex, Reader reader) setString(int parameterIndex, String x) \u793a\u4f8b\uff1a\u5e94\u7528\u7a0b\u5e8f\u63d2\u5165\u5927\u5bf9\u8c61\u6570\u636e\uff0c\u5176\u4e2d\u8868 b1 \u5b57\u6bb5 photo \u4e3a blob \u7c7b\u578b\uff0c\u5b57\u6bb5 text \u4e3a clob \u7c7b\u578b PreparedStatement ps = conn.prepareStatement(\"INSERT INTO b1 VALUES (?, ?)\")\u037e // blobBytes is a byte[] type ps.setBlob(1, new com.xugu.cloudjdbc.Blob(blobBytes))\u037e // clobString is a String type ps.setClob(2, new com.xugu.cloudjdbc.Clob(clobString))\u037e ps.execute()\uff1b 7.2 \u67e5\u8be2\u5927\u5bf9\u8c61\u6570\u636e \u901a\u8fc7\u865a\u8c37 JDBC \u83b7\u53d6\u5927\u5bf9\u8c61\u503c\uff0c\u6570\u636e\u5e93 CLOB \u5bf9\u8c61\u53ef\u901a\u8fc7\u5b57\u7b26\u4e32\u5f62\u5f0f\u6216\u6d41\u5f0f\u6570\u636e\u5f62\u5f0f\u83b7\u53d6\uff0c\u6570\u636e\u5e93 BLOB \u5bf9\u8c61\u53ea\u901a\u8fc7\u6d41\u5f0f\u6570\u636e\u5f62\u5f0f\u83b7\u53d6\u3002 \u793a\u4f8b 1\uff1a\u6d41\u5f0f\u83b7\u53d6 CLOB \u5bf9\u8c61 Statement stm = xgConn.createStatement(); String sql=\u201dselect remark from t_clob where id=101\u201d; ResultSet rs = stm.executeQuery(sql); while(rs.next) { Clob data = rs.getClob(\"remark \"); //\u4ee5\u5b57\u7b26\u6d41\u65b9\u5f0f\u83b7\u53d6\u6570\u636e Reader rd = data.getCharacterStream(); char[] sc = new char[1000]; StringBuffer sb = new StringBuffer(); int len = 0; while((len=rd.read(sc)) !=-1) { sb.append(new String(sc,0,len)); } System.out.println(sb.toString()); } \u793a\u4f8b 2\uff1a\u865a\u8c37 JDBC \u5141\u8bb8\u4ee5\u5b57\u7b26\u4e32\u7684\u5f62\u5f0f\u8bfb\u53d6 CLOB \u5bf9\u8c61 String sql=\"select text from t_clob\"\u037e Statement stm=conn.createStatement()\u037e ResultSet rs=stm.executeQuery(sql)\u037e while(rs.next()) { String clobStr =rs.getString(\"text\")\u037e } \u516b. \u865a\u8c37\u6570\u636e\u5e93\u8d1f\u8f7d\u5747\u8861 \u865a\u8c37\u6570\u636e\u5e93\u662f\u4e00\u6b3e\u5177\u5907\u9ad8\u5b89\u5168\u3001\u9ad8\u6027\u80fd\u3001\u9ad8\u6269\u5c55\u7b49\u7279\u6027\u7684\u3001\u57fa\u4e8e\u5206\u5e03\u5f0f\u67b6\u6784\u7684\u5206\u5e03\u5f0f\u4e8b\u52a1\u578b\u6570\u636e\u5e93\u3002\u90e8\u7f72\u6570\u636e\u5e93\u96c6\u7fa4\u65f6\uff0c\u591a\u53f0\u670d\u52a1\u5668\u4f5c\u4e3a\u4e00\u4e2a\u6574\u4f53\u5bf9\u5916\u63d0\u4f9b\u6570\u636e\u670d\u52a1\u3002\u5728\u591a\u673a\u73af\u5883\u4e0b\uff0c\u4e3a\u4f7f\u6570\u636e\u5e93\u8fde\u63a5\u5747\u5300\u5206\u5e03\u4e8e\u5404\u53f0\u670d\u52a1\uff0c\u865a\u8c37 JDBC \u5728\u63a5\u53e3\u5c42\u5b9e\u73b0\u4e86\u57fa\u4e8e\u8f6f\u8d1f\u8f7d\u5747\u8861\u6280\u672f\u7684\u6570\u636e\u5e93\u8fde\u63a5\u5efa\u7acb\u65b9\u5f0f\u3002 \u865a\u8c37\u6570\u636e\u5e93\u8d1f\u8f7d\u5747\u8861\u5206\u914d\u6570\u636e\u5e93\u8fde\u63a5\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a\u987a\u5e8f\u5206\u914d\u3001\u968f\u673a\u5206\u914d\u3002\u901a\u8fc7\u5728\u6570\u636e\u5e93 URL \u8fde\u63a5\u4e32\u4e0a\u8bbe\u7f6e\u53c2\u6570 conn_type(conn_type:1, \u968f\u673a\u5206\u914d\uff1b2, \u987a\u5e8f\u5206\u914d) \u7c7b\u578b\uff0c\u5b9e\u73b0\u6570\u636e\u5e93\u8fde\u63a5\u5728\u591a\u96c6\u7fa4\u73af\u5883\u4e0b\u7684\u8d1f\u8f7d\u5747\u8861\u3002\u9ed8\u8ba4\u8d1f\u8f7d\u5747\u8861\u5206\u914d\u65b9\u5f0f\uff1a\u987a\u5e8f\u5206\u914d\u3002 \u865a\u8c37 JDBC \u63d0\u4f9b\u4e09\u79cd\u914d\u7f6e\u8d1f\u8f7d\u5747\u8861\u7684\u65b9\u5f0f\uff1a\u6570\u636e\u5e93 URL \u8fde\u63a5\u4e32\u914d\u7f6e\u3001\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u6027\u6587\u4ef6 Properties \u914d\u7f6e\u3001\u6570\u636e\u5e93\u8fde\u63a5 XML \u6587\u4ef6\u914d\u7f6e\u3002 1. URL \u8fde\u63a5\u4e32\u914d\u7f6e Class.forName(\"com.xugu.cloudjdbc.Driver\"); //URL\u8fde\u63a5\u4e32\u4e2d\u4f7f\u7528ips\u5c5e\u6027\u914d\u7f6e\u591aIP\u8d1f\u8f7d\u5747\u8861 Connection conn = DriverManager.getConnection(\"jdbc:xugu://192.168.0.201:5138/SYSTEM?user=SYSDBA&password=SYSDBA&conn_type=1&ips=192.168.0.205,192.168.0.204,192.168.1.206\") \u8fde\u63a5\u5c5e\u6027\u6587\u4ef6 Properties \u914d\u7f6e (Vector \u6216\u5b57\u7b26\u4e32\u6570\u7ec4) Properties info=new Properties(); Class.forName(\"com.xugu.cloudjdbc.Driver\"); //Vector\u7ed3\u6784\u5b58\u653e\u8d1f\u8f7d\u5747\u8861\u591aIP\u5730\u5740\u65b9\u5f0f Vector<String> ipsVector=new Vector<String>(); ipsVector.add(\"192.168.1.201\"); ipsVector.add(\"192.168.1.204\"); ipsVector.add(\"192.168.1.205\"); ipsVector.add(\"192.168.1.206\"); info.put(\"ips\", ipsVector); //\u6570\u7ec4\u5b58\u653e\u8d1f\u8f7d\u5747\u8861\u591aIP\u5730\u5740\u65b9\u5f0f String[] ips={\"192.168.1.205\",\"192.168.1.204\",\"192.168.1.206\"}; info.put(\"ips\", ips); Connection conn = DriverManager.getConnection(\"jdbc:xugu://192.168.1.201:5138/SYSTEM?user=SYSDBA&password=SYSDBA&conn_type=2\",info); \u8fde\u63a5\u5c5e\u6027 XML \u6587\u4ef6\u914d\u7f6e <?xml version=\"1.0\" encoding=\"utf-8\"?> <listeners> <listener> <ip>192.168.1.206</ip> </listener> <listener> <ip>192.168.1.204</ip> </listener> <listener> <ip>192.168.1.205</ip> </listener> </listeners> Class.forName(\"com.xugu.cloudjdbc.Driver\"); Connection conn = DriverManager.getConnection(\"jdbc:xugu:file://xuguClouldListener.xml:5138/SYSTEM?user=SYSDBA&password=SYSDBA&conn_type=1\");","title":"Xugu"},{"location":"xugu/#jdbc","text":"Java \u6570\u636e\u5e93\u8fde\u63a5\uff08Java Database Connectivity\uff0c\u7b80\u79f0 JDBC\uff09\u662f Java \u8bed\u8a00\u4e2d\u7528\u6765\u89c4\u8303\u5ba2\u6237\u7aef\u7a0b\u5e8f\u5982\u4f55\u8bbf\u95ee\u6570\u636e\u5e93\u7684\u5e94\u7528\u7a0b\u5e8f\u63a5\u53e3\uff0c\u63d0\u4f9b\u4e86\u8bf8\u5982\u67e5\u8be2\u548c\u66f4\u65b0\u6570\u636e\u5e93\u4e2d\u6570\u636e\u7684\u65b9\u6cd5\uff0c\u53ef\u4ee5\u4e3a\u591a\u79cd\u5173\u7cfb\u6570\u636e\u5e93\u63d0\u4f9b\u7edf\u4e00\u8bbf\u95ee\u3002JDBC \u63d0\u4f9b\u4e86\u4e00\u79cd\u57fa\u51c6\uff0c\u901a\u8fc7\u6b64\u57fa\u51c6\u6570\u636e\u5e93\u5f00\u53d1\u4eba\u5458\u53ef\u6784\u5efa\u66f4\u9ad8\u7ea7\u7684\u5de5\u5177\u548c\u63a5\u53e3\uff0c\u4e5f\u53ef\u901a\u8fc7\u6b64\u57fa\u51c6\u7f16\u5199\u6570\u636e\u5e93\u5e94\u7528\u7a0b\u5e8f\u3002 \u865a\u8c37\u6570\u636e\u5e93\u7684 JDBC \u9a71\u52a8\u7a0b\u5e8f\uff08\u4ee5\u4e0b\u7b80\u79f0\uff1a\u865a\u8c37 JDBC\uff09\u5b9e\u73b0\u4e86 Java \u7a0b\u5e8f\u548c\u865a\u8c37\u6570\u636e\u5e93\u901a\u4fe1\uff0c\u652f\u6301 SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u7684\u8bbf\u95ee\uff0c\u540c\u65f6\u4e5f\u662f\u6784\u9020\u9ad8\u7ea7 API \u548c\u6570\u636e\u5e93\u5f00\u53d1\u5de5\u5177\u7684\u57fa\u7840\u3002 \u7528\u6237\u60f3\u8981\u5b9e\u73b0\u5bf9\u6570\u636e\u5e93\u7684\u8bbf\u95ee\uff0c\u4e00\u822c\u8981\u7ecf\u8fc7\u5982\u4e0b\u7684\u6b65\u9aa4\uff1a 1. \u901a\u8fc7\u9a71\u52a8\u5668\u7ba1\u7406\u5668\u83b7\u53d6\u8fde\u63a5\u63a5\u53e3\uff1b 2. \u83b7\u5f97 Statement \u6216 Statement \u5b50\u7c7b\uff1b 3. \u901a\u8fc7 Statement \u6267\u884c SQL \u547d\u4ee4\uff1b 4. \u5904\u7406\u6267\u884c\u7ed3\u679c\uff1b 5. \u5173\u95ed Statement\uff1b 6. \u5173\u95ed\u8fde\u63a5\u3002 JDBC \u7ed3\u6784\u56fe, \u5982\u56fe1.1\u6240\u793a\u3002 \u56fe1.1 JDBC\u7ed3\u6784\u56fe \u4f7f\u7528\u865a\u8c37 JDBC \u5b9e\u73b0\u5e94\u7528\u7a0b\u5e8f\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u4e4b\u95f4\u7684\u8fde\u63a5\u670d\u52a1\uff0c\u5e94\u7528\u7a0b\u5e8f\u6240\u5728\u8ba1\u7b97\u673a\u9700\u5df2\u5b89\u88c5 Java \u8fd0\u884c\u73af\u5883\uff08Java Runtime Environment, \u7b80\u79f0 JRE\uff09\u3002\u865a\u8c37 JDBC \u53c2\u7167 JDBC API \u5b9e\u73b0\uff0c\u652f\u6301 JDBC 3.0 \u529f\u80fd\uff0cJava \u5e94\u7528\u7a0b\u5e8f\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u4e4b\u95f4\u7684\u6240\u6709\u64cd\u4f5c\u5747\u9700\u901a\u8fc7\u865a\u8c37 JDBC \u6765\u5b8c\u6210\u3002 \u4f7f\u7528\u865a\u8c37 JDBC \u9700\u8981 JRE 1.6 \u7248\u6216\u66f4\u9ad8\u7248\u672c\u7684 Java \u8fd0\u884c\u65f6\u73af\u5883 (JRE)\u3002 {.is-info}","title":"\u4e00. \u865a\u8c37\u6570\u636e\u5e93\u7684JDBC\u9a71\u52a8\u7a0b\u5e8f\u6982\u8ff0"},{"location":"xugu/#jdbc_1","text":"JDBC 3.0 \u89c4\u8303\u7531 JDBC 1.0\u3001JDBC 2.0 \u884d\u751f\u800c\u6765\uff0c\u4e3b\u8981\u5305\u542b java.sql \u5305\u4ee5\u53ca javax.sql \u5305\uff0c\u6570\u636e\u5e93 JDBC \u9a71\u52a8\u5b9e\u73b0 JDBC 3.0 \u89c4\u8303\u6240\u5b9a\u4e49\u7684\u7279\u6027\u63a5\u53e3\uff0c\u5373\u53ef\u8fbe\u5230\u5bf9\u6807\u51c6 JDBC 3.0 \u89c4\u8303\u7684\u652f\u6301\u3002 \u865a\u8c37 JDBC \u57fa\u4e8e JDBC 3.0 \u89c4\u8303\u5b9e\u73b0\uff0c\u5b9e\u73b0\u63a5\u53e3\u7c7b\u6620\u5c04\uff0c\u5982\u88682.1\u6240\u793a\u3002 \u88682.1 \u865a\u8c37JDBC\u5b9e\u73b0\u63a5\u53e3\u7c7b | \u63a5\u53e3 | \u865a\u8c37JDBC\u5b9e\u73b0\u7c7b | | ---------------------------------- | ---------------------------------------- | | java.sql.Driver | com.xugu.cloudjdbc.Driver | | java.sql.Connection | com.xugu.cloudjdbc.Connection | | java.sql.Statement | com.xugu.cloudjdbc.Statement | | java.sql.PreparedStatement | com.xugu.cloudjdbc.PreparedStatement | | java.sql.CallableStatement | com.xugu.cloudjdbc.CallableStatement | | java.sql.ResultSet | com.xugu.cloudjdbc.ResultSet | | java.sql.ResultSetMetaData | com.xugu.cloudjdbc.ResultSetMetaData | | java.sql.DatabaseMetaData | com.xugu.cloudjdbc.DatabaseMetaData | | java.sql.PrameterMetaData | com.xugu.cloudjdbc.PrameterMetaData | | java.sql.Types | com.xugu.cloudjdbc.Types | | java.sql.Blob | com.xugu.cloudjdbc.Blob | | java.sql.Clob | com.xugu.cloudjdbc.Clob | | java.sql.Savepoint | com.xugu.cloudjdbc.Savepoint | | javax.sql.DataSource | com.xugu.pool.XgDataSource | | javax.sql.ConnectionPoolDataSource | com.xugu.pool.XgConnectionPoolDataSource | | javx.sql.PooledConnection | com.xugu.pool.XgPooledConnection | \u9664\u4e86\u4ee5\u4e0a\u6807\u51c6\u7c7b\u63a5\u53e3\u5916\uff0c\u865a\u8c37 JDBC \u8fd8\u6269\u5c55\u5b9e\u73b0\u4e86\u4ee5\u4e0b\u7c7b\uff1a - com.xugu.cloudjdbc.ClientInfo - com.xugu.cloudjdbc.OutParameter - com.xugu.cloudjdbc.Rowid - com.xugu.cloudjdbc.SQLXml - com.xugu.cloudjdbc.SSL - com.xugu.pool.StatementWrapper - com.xugu.pool.PreparedStatementWrapper","title":"\u4e8c. \u865a\u8c37\u6570\u636e\u5e93\u7684JDBC\u63a5\u53e3\u548c\u5bf9\u8c61\u7c7b"},{"location":"xugu/#_1","text":"","title":"\u4e09. \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b"},{"location":"xugu/#31","text":"\u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b\u3001\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u3001Java \u6570\u636e\u7c7b\u578b\u4e09\u8005\u6620\u5c04\u5173\u7cfb\uff0c\u5982\u88683.1\u6240\u793a\u3002 \u88683.1 \u6570\u636e\u7c7b\u578b\u6620\u5c04\u5173\u7cfb \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b \u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b Java \u6570\u636e\u7c7b\u578b BOOLEAN BOOLEAN boolean SMALLINT SMALLINT short TINYINT TINYINT byte INTEGER INTEGER int BIGINT BIGINT long FLOAT FLOAT float DOUBLE DOUBLE double NUMERIC NUMERIC BigDecimal DECIMAL BigDecimal CHAR CHAR String NCHAR NCHAR String VARCHAR VARCHAR String VARCHAR2 VARCHAR String NVARCHAR2 VARCHAR String BLOB BLOB Blob CLOB CLOB Clob NCLOB BINARY BINARY byte[] VARBINARY LONG VARBINARY DATE DATE Date TIME TIME Time TIMESTAMP TIMESTAMP Timestamp","title":"3.1 \u57fa\u672c\u6570\u636e\u7c7b\u578b"},{"location":"xugu/#32","text":"\u865a\u8c37 JDBC \u9664\u4e86\u5b9e\u73b0\u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b\uff0c\u8fd8\u6839\u636e\u865a\u8c37\u6570\u636e\u5e93\u81ea\u6709\u7c7b\u578b\u6269\u5c55\u4e86\u90e8\u5206\u6570\u636e\u7c7b\u578b\uff08\u88683.2\u6240\u793a\uff09\uff0c\u5305\u62ec\u4ee5\u4e0b\u6570\u636e\u7c7b\u578b\u3002 1. \u65f6\u95f4\u6570\u636e\u7c7b\u578b DATETIME\u2014\u2014\u2014 \u65e5\u671f\u65f6\u95f4\u7c7b\u578b DATETIME WITH TIME ZONE \u2014\u2014\u2014 \u5e26\u65f6\u533a\u7684\u65e5\u671f\u65f6\u95f4\u7c7b\u578b TIME WITH TIME ZONE \u2014\u2014\u2014 \u5e26\u65f6\u533a\u7684\u65f6\u95f4\u7c7b\u578b INTERVAL YEAR \u2014\u2014\u2014 \u5e74\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL MONTH \u2014\u2014\u2014 \u6708\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY\u2014\u2014\u2014 \u65e5\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL HOUR \u2014\u2014\u2014 \u5c0f\u65f6\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL MINUTE \u2014\u2014\u2014 \u5206\u949f\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL SECOND \u2014\u2014\u2014 \u79d2\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL YEAR TO MONTH \u2014\u2014\u2014 \u5e74\u5230\u6708\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY TO HOUR \u2014\u2014\u2014 \u65e5\u5230\u5c0f\u65f6\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY TO MINUTE \u2014\u2014\u2014 \u65e5\u5230\u5206\u949f\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL DAY TO SECOND \u2014\u2014\u2014 \u65e5\u5230\u79d2\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL HOUR TO MINUTE \u2014\u2014\u2014 \u5c0f\u65f6\u5230\u5206\u949f\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL HOUR TO SECOND \u2014\u2014\u2014 \u5c0f\u65f6\u5230\u79d2\u7684\u65f6\u95f4\u95f4\u9694 INTERVAL MINUTE TO SECOND \u2014\u2014\u2014 \u5206\u949f\u5230\u79d2\u7684\u65f6\u95f4\u95f4\u9694 2. \u6e38\u6807\u6570\u636e\u7c7b\u578b\uff08\u53ea\u5728\u5b58\u50a8\u8fc7\u7a0b\u3001\u51fd\u6570\u3001\u5305\u4e2d\u4f7f\u7528\uff09 CURSOR \u2014\u2014\u2014 \u6e38\u6807\u6570\u636e\u7c7b\u578b SYS_REFCURSOR \u2014\u2014\u2014 \u8fd4\u56de\u6e38\u6807\u6570\u636e\u7c7b\u578b 3. \u5176\u4ed6\u6570\u636e\u7c7b\u578b GUID \u2014\u2014\u2014 \u5168\u5c40\u552f\u4e00\u6807\u8bc6\u7b26 \u88683.2 \u6269\u5c55\u6570\u636e\u7c7b\u578b\u5bf9\u5e94\u8868 \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b \u6807\u51c6 SQL \u6570\u636e\u7c7b\u578b Java \u6570\u636e\u7c7b\u578b DATETIME DATETIME Timestamp DATETIME WITH TIME ZONE DATETIME_TZ String TIME WITH TIME ZONE TIME_TZ String INTERVAL YEAR INTERVAL_Y String INTERVAL MONTH INTERVAL_M INTERVAL DAY INTERVAL_D INTERVAL HOUR INTERVAL_H INTERVAL MINUTE INTERVAL_MI INTERVAL SECOND INTERVAL_S String INTERVAL YEAR TO MONTH INTERVAL_Y2M INTERVAL DAY TO HOUR INTERVAL_D2H INTERVAL DAY TO MINUTE INTERVAL_D2M INTERVAL DAY TO SECOND INTERVAL_D2S INTERVAL HOUR TO MINUTE INTERVAL_H2M INTERVAL HOUR TO SECOND INTERVAL_H2S INTERVAL MINUTE TO SECOND INTERVAL_M2S CURSOR CURSOR \u65e0\u5bf9\u5e94\u7c7b\u578b SYS_REFCURSOR REFCUR GUID GUID String \u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528 ResultSet \u5bf9\u8c61\u6765\u5bf9\u5e94\u83b7\u53d6\u6e38\u6807\u6240\u8fd4\u56de\u6570\u636e\u3002 {.is-info}","title":"3.2 \u6269\u5c55\u6570\u636e\u7c7b\u578b"},{"location":"xugu/#33","text":"\u5728\u8c03\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u4e2d\u7684\u67d0\u4e9b\u65b9\u6cd5\u65f6\uff0c\u9700\u8fdb\u884c Java \u6570\u636e\u7c7b\u578b\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u7684\u8f6c\u6362\uff0c\u8fd9\u4e9b\u65b9\u6cd5\u5305\u62ec\uff1a - ResultSet \u7c7b get\\<Type> \u65b9\u6cd5\uff1b - ResultSet \u7c7b update\\<Type> \u65b9\u6cd5\uff1b - CallableStatement \u7c7b get\\<Type> \u65b9\u6cd5\uff1b - PreparedStatement \u7c7b set\\<Type> \u65b9\u6cd5\u3002 \u6570\u636e\u7c7b\u578b\u4e4b\u95f4\u7684\u8f6c\u6362\uff0c\u9700\u9075\u4ece Java \u6570\u636e\u7c7b\u578b\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u6620\u5c04\u5173\u7cfb\u89c4\u5219\uff0c\u5426\u5219\u53ef\u80fd\u8f6c\u6362\u5931\u8d25\u3002 1. com.xugu.cloudjdbc.ResultSet \u7c7b\u4e2d get\\<Type> \u65b9\u6cd5\u7684\u7c7b\u578b\u8f6c\u6362\uff0c\u5982\u88683.3\u6240\u793a\u3002 2. com.xugu.cloudjdbc.PreparedStatement \u7c7b\u4e2d set\\<Type> \u65b9\u6cd5\u7684\u7c7b\u578b\u8f6c\u6362\uff0c\u5982\u88683.4\u6240\u793a\u3002 X\uff08\u65e0\u4e22\u5931\u8f6c\u6362\uff09\uff1a\u6307\u4ee5\u957f\u7cbe\u5ea6\u7c7b\u578b\u7684 get\\<Type> \u65b9\u6cd5\u83b7\u53d6\u77ed\u7cbe\u5ea6\u6570\u636e\u7c7b\u578b\u5217\u503c\u65e0\u4e22\u5931\u3002 \u5982\uff1a\u4f7f\u7528 getInt() \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u4e3a smallint \u7684\u5217\u6570\u636e\uff0c\u83b7\u53d6\u6570\u636e\u5b8c\u6574\u3002 Z\uff08\u4f9d\u8d56\u8f6c\u6362\uff09\uff1a\u6307 get\\<Type> \u65b9\u6cd5\u4e2d\u7684 Type \u7c7b\u578b\u4e0e\u83b7\u53d6\u6570\u636e\u5e93\u4e2d\u5217\u7684\u6570\u636e\u7c7b\u578b\u4e0d\u4e00\u81f4\uff0c\u6b64\u65f6\u9700\u8981\u901a\u8fc7\u5176\u4ed6\u6570\u636e\u7c7b\u578b\u8f6c\u6362\u4e3a Type \u6570\u636e\u7c7b\u578b\uff0c\u6b64\u8f6c\u6362\u8fc7\u7a0b\u503c\u53ef\u80fd\u4e22\u5931\u90e8\u5206\u6570\u636e\u3002 \u5982\uff1a\u4f7f\u7528 getInt() \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u4e3a float \u7684\u5217\u6570\u636e\uff0c\u53ef\u83b7\u53d6 float \u5217\u6570\u636e\u7684\u6574\u6570\u503c\uff0c\u800c\u5c0f\u6570\u7cbe\u5ea6\u503c\u5c06\u4e22\u5931\u3002 Y\uff08\u76f4\u63a5\u8f6c\u6362\uff09\uff1a\u6307 get\\<Type> \u65b9\u6cd5\u4e2d\u7684 Type \u7c7b\u578b\u4e0e\u83b7\u53d6\u6570\u636e\u5e93\u4e2d\u5217\u7684\u6570\u636e\u7c7b\u578b\u4e00\u81f4\u3002 \u5982\uff1a\u4f7f\u7528 getInt() \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u6570\u636e\u7c7b\u578b\u4e3a integer \u7684\u5217\u6570\u636e\uff0c\u76f4\u63a5\u83b7\u53d6\u5b8c\u6574\u6570\u636e\u3002 {.is-info} P\uff08\u5141\u8bb8\u63d2\u5165\uff09\uff1a\u6307 set\\<Type> \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u5e93\u4e2d\u5217\u6570\u636e\u65f6\uff0c\u6570\u636e\u65e0\u635f\u5931\u5b58\u5165\u6570\u636e\u5e93\u4e2d\u3002 \u5982\uff1a\u4f7f\u7528 setInt() \u65b9\u6cd5\u8bbe\u7f6e\u5217\u6570\u636e\u7c7b\u578b\u4e3a bigint \u7684\u6570\u636e\u65f6\uff0c\u6570\u636e\u53ef\u6b63\u786e\u5b58\u5165\u3002 Z\uff08\u90e8\u5206\u63d2\u5165\uff09\uff1a\u6307 set\\<Type> \u65b9\u6cd5\u4e2d\u7684 Type \u7c7b\u578b\u548c\u6570\u636e\u5e93\u4e2d\u5217\u6570\u636e\u7c7b\u578b\u4e0d\u4e00\u81f4\uff0c\u6570\u636e\u4ec5\u80fd\u90e8\u5206\u6b63\u786e\u5b58\u5165\u3002 \u5982\uff1a\u4f7f\u7528 setInt() \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u5e93\u5217\u7c7b\u578b\u4e3a tinyint \u7684\u6570\u636e\uff0c\u56e0 tinyint \u8868\u793a\u8303\u56f4\u4e3a-128\uff5e127 \u7684\u6574\u6570\u503c\uff0c\u6545\u800c tinyint\u8868\u793a\u8303\u56f4\u5185\u6570\u636e\u53ef\u6b63\u786e\u5b58\u5165\uff0c\u8303\u56f4\u5916\u6570\u636e\u5c06\u63d2\u5165\u5931\u8d25\u3002 {.is-info}","title":"3.3 \u6570\u636e\u7c7b\u578b\u8f6c\u6362"},{"location":"xugu/#_2","text":"","title":"\u56db. \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5"},{"location":"xugu/#41-jdbc","text":"\u901a\u8fc7\u865a\u8c37 JDBC \u9a71\u52a8\u8bbf\u95ee\u865a\u8c37\u6570\u636e\u5e93\uff0c\u9996\u5148\u5e94\u4fdd\u8bc1\u5e94\u7528\u7a0b\u5e8f\u6b63\u786e\u5f15\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u5305 (cloudjdbc-*.*.*.jar)\uff0c\u5373\u5c06\u9a71\u52a8\u5305\u62f7\u8d1d\u81f3\u5e94\u7528\u7a0b\u5e8f\u5e76\u6dfb\u52a0\u5f15\u7528\u3002","title":"4.1 \u90e8\u7f72JDBC\u9a71\u52a8\u7a0b\u5e8f"},{"location":"xugu/#42-jdbc","text":"\u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u8fdb\u884c\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u8c03\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u7a0b\u5e8f\uff0c\u9996\u5148\u8981\u5c06\u865a\u8c37 JDBC \u9a71\u52a8\u52a0\u8f7d\u5230\u7cfb\u7edf\u5185\u5b58\u4e2d\uff0c\u7136\u540e\u4f9b\u7cfb\u7edf\u4f7f\u7528\u3002\u865a\u8c37 JDBC \u7684\u9a71\u52a8\u5b9e\u73b0\u7c7b\u4e3acom.xugu.cloudjdbc.Driver\uff0c\u4ee5\u4e0b\u662f\u5c06\u865a\u8c37 JDBC \u9a71\u52a8\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\u7684\u4ee3\u7801\uff1a //\u663e\u793a\u6ce8\u518c DriverManager.registerDriver(new com.xugu.cloudjdbc.Driver())\u037e //\u9690\u5f0f\u6ce8\u518c Class.forName(\u201ccom.xugu.cloudjdbc.Driver\u201d)\u037e \u9690\u5f0f\u6ce8\u518c\u5373\u901a\u8fc7 Class.forName() \u5c06\u5bf9\u5e94\u7684\u9a71\u52a8\u7c7b\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\uff0c\u5c06\u6267\u884c\u5185\u5b58\u4e2d\u7684 static \u9759\u6001\u4ee3\u7801\u6bb5\uff0c\u6b64\u4ee3\u7801\u6bb5\u4f1a\u521b\u5efa\u4e00\u4e2a\u865a\u8c37 JDBC \u9a71\u52a8\u7684\u5b9e\u4f8b\uff0c\u5e76\u653e\u5165 DriverManager \u4e2d\uff0c\u4f9b DriverManager \u4f7f\u7528\u3002 {.is-info}","title":"4.2 \u52a0\u8f7dJDBC\u9a71\u52a8\u7a0b\u5e8f"},{"location":"xugu/#43","text":"\u865a\u8c37 JDBC \u9a71\u52a8\u8fde\u63a5 URL \u4e32\u683c\u5f0f\uff1a jdbc:xugu://serverIP:portNumber/databaseName[?property=value[&property=value]] \u865a\u8c37 JDBC \u9a71\u52a8\u8fde\u63a5 URL \u4e32\u683c\u5f0f\uff1a 1). jdbc:xugu:// \uff1a\uff08\u5fc5\u9700\uff09\u865a\u8c37\u6570\u636e\u5e93\u7279\u5b9a\u534f\u8bae\u3002 2). serverIP \uff1a\uff08\u5fc5\u9700\uff09\u865a\u8c37\u6570\u636e\u5e93\u6240\u5728\u670d\u52a1\u5668\u7684 IP \u5730\u5740\u3002 3). portNumber\uff1a\uff08\u5fc5\u9700\uff09\u662f\u865a\u8c37\u6570\u636e\u5e93\u670d\u52a1 TCP \u8bbf\u95ee\u7aef\u53e3\uff0c\u9ed8\u8ba4 5138\u3002 4). databaseName\uff1a\uff08\u5fc5\u9700\uff09\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u5e93\u540d\u79f0\u3002 5). property\uff1a\uff08\u53ef\u9009\uff09\u865a\u8c37\u6570\u636e\u5e93\u7684 URL \u8fde\u63a5\u5c5e\u6027\u3002\u591a\u4e2a\u8fde\u63a5\u5c5e\u6027\u4e4b\u95f4\u4f7f\u7528\u201c&\u201d\u5206\u9694\uff0c\u4e0d\u53ef\u91cd\u590d\u3002 \u865a\u8c37 JDBC \u9a71\u52a8 URL \u4e32\u793a\u4f8b\u5982\u4e0b\uff1a String url = jdbc:xugu://localhost:5138/System?user=GUEST&password=GUEST\u037e property \u8bbe\u7f6e\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u6027\uff0c\u5e38\u7528\u8fde\u63a5\u5c5e\u6027\u89c1\u88684.1\u3002 \u88684.1 \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u6027 table th:first-of-type { width: 20%; } table th:nth-of-type(2) { width: 10%; } table th:nth-of-type(3) { width: 10%; } table th:nth-of-type(4) { width: 50%; } \u5c5e\u6027\u540d\u79f0 \u5fc5\u9009\u9879 \u53d6\u503c \u8bf4\u660e database \u221a \u5b57\u7b26\u4e32 \u6570\u636e\u5e93\u540d\u79f0 user \u221a \u5b57\u7b26\u4e32 \u7528\u6237\u540d\u79f0 password \u221a \u5b57\u7b26\u4e32 \u7528\u6237\u5bc6\u7801 encryptor \u00d7 \u5b57\u7b26\u4e32 \u7528\u4e8e\u542f\u52a8\u52a0\u5bc6\u6570\u636e\u5e93\uff0c\u82e5\u5e93\u672a\u52a0\u5bc6\uff0c\u5219\u53ef\u4e0d\u8981\uff0c\u4f46\u5e26\u4e0a\u6b64\u53c2\u6570\u4e0d\u4f1a\u5f71\u54cd\u8fde\u63a5 char_set \u00d7 \u5b57\u7b26\u4e32 \u8fde\u63a5\u5b57\u7b26\u96c6\u3002'GB2312'\u3001'GBK'\u3001'UTF8' \u7b49\uff0c\u9ed8\u8ba4\uff1aGBK time_zone \u00d7 \u5b57\u7b26\u4e32 \u5ba2\u6237\u7aef\u65f6\u533a\u3002\u9ed8\u8ba4\uff1a\u865a\u8c37\u6570\u636e\u5e93\u914d\u7f6e\u53c2\u6570 def_timezone \u6240\u8bbe\u7f6e\u65f6\u533a\uff08\u53ea\u5bf9\u7cfb\u7edf\u65f6\u95f4\u51fd\u6570\u751f\u6548\uff09 iso_level \u00d7 \u5b57\u7b26\u4e32 'READ COMMITED'\uff1a\u8bfb\u5df2\u63d0\u4ea4\uff1b 'REPEATIABLE READ'\uff1a\u53ef\u91cd\u590d\u8bfb\uff1b'SERIALIZABLE'\uff1a\u5e8f\u5217\u5316 lock_time \u00d7 \u6570\u503c \u5355\u4f4d\uff1a\u6beb\u79d2\uff0c\u9ed8\u8ba4\u503c\uff1a0\uff0c\u8868\u793a\u8fde\u63a5\u4e2d\u7684\u4e8b\u52a1\u9501\u5f81\u7528\u65f6\uff0c\u6700\u5927\u7b49\u5019\u65f6\u95f4\uff0c\u82e5\u5728\u8bbe\u7f6e\u65f6\u95f4\u5185\u52a0\u9501\u5931\u8d25\uff0c\u56de\u6eda\u4e8b\u52a1\u5e76\u62a5\u9519 lob_ret \u00d7 \u5b57\u7b26\u4e32 \u5927\u5bf9\u8c61\uff08Blob\u3001Clob\uff09\u6570\u636e\u8fd4\u56de\u65b9\u5f0f\u3002\u5c5e\u6027\u4e3a descriptor \u65f6\uff0c\u4ee5\u63cf\u8ff0\u7b26\u65b9\u5f0f\u8fd4\u56de\uff1b\u5176\u4ed6\u4ee5\u6570\u636e\u6d41\u65b9\u5f0f\u8fd4\u56de\u3002\u9ed8\u8ba4\uff1a\u4ee5\u6570\u636e\u6d41\u65b9\u5f0f\u8fd4\u56de return_rowid \u00d7 \u5e03\u5c14\u503c \u662f\u5426\u8fd4\u56de\u8bb0\u5f55 rowid \u503c\u3002\u5c5e\u6027\u4e3a TRUE \u65f6\uff0c\u8fd4\u56de rowid\uff1b\u5176\u4ed6\u8fd4\u56de FALSE\u3002\u9ed8\u8ba4\uff1aFALSE auto_commit \u00d7 on/off \u4e8b\u52a1\u662f\u5426\u81ea\u52a8\u63d0\u4ea4\u3002\u5c5e\u6027\u4e3a ON \u65f6\uff0c\u8fde\u63a5\u81ea\u52a8\u63d0\u4ea4\uff1b\u5c5e\u6027\u4e3a OFF\u65f6\uff0c\u8fde\u63a5\u975e\u81ea\u52a8\u63d0\u4ea4\u3002\u9ed8\u8ba4\uff1aON conn_type \u00d7 \u6570\u503c \u8d1f\u8f7d\u5747\u8861\u5206\u914d\u65b9\u5f0f\u3002\u5c5e\u6027\u4e3a 1 \u65f6\uff0c\u968f\u673a\u5206\u914d\uff1b\u5c5e\u6027\u4e3a 2 \u65f6\uff0c\u987a\u5e8f\u5206\u914d\u3002\u9ed8\u8ba4\uff1a2 ips \u00d7 \u5b57\u7b26\u4e32 \u8d1f\u8f7d\u5747\u8861\u8fde\u63a5 IP \u5730\u5740\uff0c\u591a\u4e2a IP \u5730\u5740\u4ee5\u9017\u53f7\u5206\u9694\uff08\u8be6\u7ec6\u89c1\u8d1f\u8f7d\u5747\u8861\uff09 CompatibleOracle \u00d7 \u5e03\u5c14\u503c \u517c\u5bb9 Oracle \u9009\u9879\u3002\u5c5e\u6027\u4e3a true\uff0c\u517c\u5bb9 Oracle\u037e \u5c5e\u6027\u4e3a FALSE\uff0c\u865a\u8c37 JDBC \u81ea\u6709\u5b9e\u73b0 recv_mode \u00d7 \u6570\u503c \u63a5\u6536\u6a21\u5f0f\u9009\u9879\u3002\u5c5e\u6027\u503c\u4e3a 0 \u65f6\uff0c\u672c\u5730\u5168\u63a5\u6536\u6a21\u5f0f\uff1b\u5c5e\u6027\u503c\u4e3a 1 \u65f6\uff0c\u7f51\u7edc\u63a5\u6536\u6a21\u5f0f\uff1b\u5c5e\u6027\u503c\u4e3a 2 \u65f6\uff0c\u670d\u52a1\u5668\u7aef\u6e38\u6807\u63a5\u6536\u6a21\u5f0f\u3002\u9ed8\u8ba4\uff1a0 emptyStringAsNull \u00d7 \u5e03\u5c14\u503c \u7a7a\u5b57\u4e32\u5904\u7406\u3002\u5c5e\u6027\u4e3a FALSE \u65f6\uff0c\u7a7a\u5b57\u7b26\u4e32\u8ba4\u5b9a\u4e3a NULL\uff1b\u5c5e\u6027\u4e3a TRUE \u65f6\uff0c\u7a7a\u5b57\u7b26\u4e32\u4fdd\u7559\u3002\u9ed8\u8ba4\uff1a\u7a7a\u5b57\u4e32\u4fdd\u7559 xgversion \u00d7 201/301 \u5ba2\u6237\u7aef\u534f\u8bae\u7248\u672c\uff0c\u865a\u8c37\u6570\u636e\u5e93V12\u7248\u672c\u5347\u7ea7\u652f\u6301301\u534f\u8bae\uff0c\u540c\u65f6\u517c\u5bb9201\u534f\u8bae SSL \u00d7 SSL \u8fde\u63a5\u52a0\u5bc6\u53c2\u6570\u3002\u5c5e\u6027\u503c\u3010SSL\uff1a\u542f\u7528SSL\u52a0\u5bc6\u4f20\u8f93\uff1bNSSL\uff1a\u7981\u7528SSL\u52a0\u5bc6\u4f20\u8f93\u3011 slowsqltime \u00d7 \u6570\u503c \u8bbe\u7f6e\u6162SQL\u6267\u884c\u65f6\u95f4\u3002SQL\u8bed\u53e5\u6267\u884c\u65f6\u95f4\u8d85\u8fc7\u8be5\u6570\u503c\uff0c\u65e5\u5fd7\u5219\u4f1a\u8f93\u51fa\u6267\u884cSQL batch_mode \u00d7 \u5e03\u5c14\u503c PreparedStatement\u662f\u5426\u4f7f\u7528\u6279\u91cf\u5904\u7406\u3002\u5c5e\u6027\u4e3a TRUE \u65f6\uff0cexecuteBatch\u91c7\u7528\u6279\u91cf\u6a21\u578b\uff1bFALSE\u5219\u91c7\u7528\u5355\u6761\u5904\u7406\u6a21\u578b\u3002\u9ed8\u8ba4\uff1aFALSE \u8fde\u63a5\u53c2\u6570\u4f7f\u7528SSL\u5c5e\u6027\u65f6\uff0c\u4f9d\u8d56\u7a0b\u5e8f\u5305\u4e2d\u63d0\u4f9b\u7684\u52a8\u6001\u94fe\u63a5\u5e93\uff0c\u4f7f\u7528\u524d\u9700\u5c06\u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u5230\u64cd\u4f5c\u7cfb\u7edf\u6307\u5b9a\u4f4d\u7f6e\u65b9\u53ef\u6b63\u5e38\u4f7f\u7528SSL\u52a0\u5bc6\u529f\u80fd\u3002 Windows 32\u4f4d\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u7528SSL\u5c5e\u6027\u524d\uff0c\u9700\u5c06\u7a0b\u5e8f\u5305 ssl/win32 \u4e0b xgssl.dll \u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u62f7\u8d1d\u5230\u7cfb\u7edf\u76ee\u5f55 C:/windows/system32 \u76ee\u5f55\u4f4d\u7f6e\u3002 Windows 64\u4f4d\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u7528SSL\u5c5e\u6027\u524d\uff0c\u9700\u5c06\u7a0b\u5e8f\u5305 ssl/win64 \u4e0b xgssl.dll \u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u62f7\u8d1d\u5230\u7cfb\u7edf\u76ee\u5f55 C:/windows/system32 \u76ee\u5f55\u4e0b\u3002 Linux X64\u4f4d\u64cd\u4f5c\u7cfb\u7edf\uff0c\u4f7f\u7528SSL\u5c5e\u6027\u524d\uff0c\u9700\u5c06\u7a0b\u5e8f\u5305 ssl/linux64 \u4e0b libxgssl.so \u52a8\u6001\u94fe\u63a5\u5e93\u590d\u5236\u62f7\u8d1d\u5230\u7cfb\u7edf\u76ee\u5f55 /usr/lib\u6216\u8005/usr/lib4 \u76ee\u5f55\u4e0b\u3002 \u865a\u8c37 JDBC \u8bbe\u7f6e\u8fde\u63a5\u5c5e\u6027\u793a\u4f8b\u5982\u4e0b (\u7248\u672c\u53f7\u3001\u5927\u5bf9\u8c61\u63cf\u8ff0\u7b26\u3001\u65f6\u533a\u3001\u5173\u95ed\u8fde\u63a5\u81ea\u52a8\u63d0\u4ea4)\uff1a String url=jdbc:xugu://localhost:5138/System?user=GUEST&password=GUEST&version=110&auto_commit=false&lob_ret=descriptor&time_zone=GMT-8:00\u037e","title":"4.3 \u8fde\u63a5\u5b57\u4e32\u53ca\u53c2\u6570\u8bbe\u7f6e"},{"location":"xugu/#44","text":"\u5728\u5e94\u7528\u7a0b\u5e8f\u5c06\u865a\u8c37 JDBC \u9a71\u52a8\u52a0\u8f7d\u5230\u7cfb\u7edf\u5185\u5b58\u4e2d\u540e\uff0c\u53ef\u901a\u8fc7 DriverManager \u7c7b\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u65b9\u6cd5\u5982\u4e0b\uff1a DriverManager.getConnection(String url)\u037e DriverManager.getConnection(String url,Properties)\u037e DriverManager.getConnection(String url,String user,String password)\u037e","title":"4.4 \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5"},{"location":"xugu/#_3","text":"\u901a\u8fc7 DriverManager \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u4ee5\u5916\uff0c\u8fd8\u53ef\u4ee5\u4f7f\u7528\u6570\u636e\u6e90\u6216\u8fde\u63a5\u6c60\u65b9\u5f0f\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u3002\u901a\u8fc7\u6570\u636e\u6e90\u65b9\u5f0f\u6216\u8fde\u63a5\u6c60\u65b9\u5f0f\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u6709\u4ee5\u4e0b\u4f18\u70b9\uff1a - \u8d44\u6e90\u91cd\u7528 \u7531\u4e8e\u6570\u636e\u5e93\u8fde\u63a5\u5f97\u5230\u91cd\u7528\uff0c\u907f\u514d\u4e86\u9891\u7e41\u521b\u5efa\u3001\u91ca\u653e\u8fde\u63a5\u5f15\u8d77\u7684\u5927\u91cf\u6027\u80fd\u5f00\u9500\u3002\u5728\u51cf\u5c11\u7cfb\u7edf\u6d88\u8017\u7684\u57fa\u7840\u4e0a\uff0c\u53e6\u4e00\u65b9\u9762\u4e5f\u589e\u8fdb\u4e86\u7cfb\u7edf\u8fd0\u884c\u73af\u5883\u7684\u5e73\u7a33\u6027\uff08\u51cf\u5c11\u5185\u5b58\u788e\u7247\u4ee5\u53ca\u6570\u636e\u5e93\u4e34\u65f6\u8fdb\u7a0b/\u7ebf\u7a0b\u7684\u6570\u91cf\uff09\u3002 - \u66f4\u5feb\u7684\u7cfb\u7edf\u54cd\u5e94 \u6570\u636e\u5e93\u8fde\u63a5\u6c60\u5728\u521d\u59cb\u5316\u8fc7\u7a0b\u4e2d\uff0c\u5f80\u5f80\u5df2\u7ecf\u521b\u5efa\u4e86\u82e5\u5e72\u6570\u636e\u5e93\u8fde\u63a5\u7f6e\u4e8e\u6c60\u4e2d\u5907\u7528\u3002\u6b64\u65f6\u8fde\u63a5\u7684\u521d\u59cb\u5316\u5de5\u4f5c\u5747\u5df2\u5b8c\u6210\u3002\u5bf9\u4e8e\u4e1a\u52a1\u8bf7\u6c42\u5904\u7406\u800c\u8a00\uff0c\u76f4\u63a5\u5229\u7528\u73b0\u6709\u53ef\u7528\u8fde\u63a5\uff0c\u907f\u514d\u4e86\u6570\u636e\u5e93\u8fde\u63a5\u521d\u59cb\u5316\u548c\u91ca\u653e\u8fc7\u7a0b\u7684\u65f6\u95f4\u5f00\u9500\uff0c\u4ece\u800c\u7f29\u51cf\u4e86\u7cfb\u7edf\u6574\u4f53\u54cd\u5e94\u65f6\u95f4\u3002 - \u65b0\u7684\u8d44\u6e90\u5206\u914d\u624b\u6bb5 \u5bf9\u4e8e\u591a\u5e94\u7528\u5171\u4eab\u540c\u4e00\u6570\u636e\u5e93\u7684\u7cfb\u7edf\u800c\u8a00\uff0c\u53ef\u5728\u5e94\u7528\u5c42\u901a\u8fc7\u6570\u636e\u5e93\u8fde\u63a5\u7684\u914d\u7f6e\uff0c\u9650\u5236\u5355\u4e00\u5e94\u7528\u7533\u8bf7\u6570\u636e\u5e93\u8fde\u63a5\u6570\uff0c\u4ece\u800c\u907f\u514d\u5355\u4e00\u5e94\u7528\u72ec\u5360\u6240\u6709\u6570\u636e\u5e93\u8d44\u6e90\u3002 \u865a\u8c37 JDBC \u4e2d\u6570\u636e\u6e90\u5b9e\u73b0\u7c7b\u4e3a com.xugu.pool.XgDataSource\uff0c\u8fde\u63a5\u6c60\u5b9e\u73b0\u7c7b\u4e3acom.xugu.pool \u5305\u4e2d\u7684 XgDataSource\u3001XgPooledConnection\u3001XgConnectionPoolDataSource\u3001XgConnectionEventListener\u3001XgConnectionEvent\u3002","title":"\u4e94. \u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u6e90\u548c\u8fde\u63a5\u6c60"},{"location":"xugu/#51","text":"XgDataSource \u63d0\u4f9b set \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u6e90\u8fde\u63a5\u5c5e\u6027\uff1a \u793a\u4f8b\uff1a\u901a\u8fc7 XgDataSource \u4e0e\u865a\u8c37\u6570\u636e\u5e93\u5efa\u7acb\u8fde\u63a5 com.xugu.pool.XgDataSource ds = new com.xugu.pool.XgDataSource()\u037e ds.setUrl(\"jdbc:xugu://127.0.0.1:5138/db\")\u037e ds.setUser(\"SYSDBA\")\u037e ds.setPassword(\"SYSDBA\")\u037e Properties pro = new Properties()\u037e pro.setProperty(\"return_rowid\", \"true\")\u037e pro.setProperty(\"auto_commit\", \"off\")\u037e ds.setPro(pro)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u767b\u5f55\u4e32\u3002url\u4e3a\u6570\u636e\u5e93\u767b\u5f55\u4e32 setUrl(String url)\uff1b //\u6307\u5b9a\u6570\u636e\u5e93\u670d\u52a1\u5668\u3002host\u4e3a\u670d\u52a1\u5668\u5730\u5740 setHostName(String host)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u540d\u3002dbName\u4e3a\u6570\u636e\u5e93\u540d setDatabaseName(String dbName)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u7aef\u53e3\u53f7\u3002port\u4e3a\u6570\u636e\u5e93\u7aef\u53e3\u53f7 setPort(int port)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u7528\u6237\u3002userName\u4e3a\u6570\u636e\u5e93\u767b\u5f55\u7528\u6237\u540d setUser(String userName)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u767b\u5f55\u5bc6\u7801\u3002passWord\u4e3a\u6570\u636e\u5e93\u767b\u5f55\u5bc6\u7801 setPassword(Stirng passWord)\u037e //\u6307\u5b9a\u6570\u636e\u5e93\u767b\u5f55\u53c2\u6570\u3002ds_pro\u4e3a\u6570\u636e\u5e93\u8fde\u63a5\u53c2\u6570 setPro(Properties ds_pro)\uff1b // \u901a\u8fc7\u6570\u636e\u6e90\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5 Connection conn = ds.getConnection()\u037e \u5728 com.xugu.pool.XgDataSource \u7c7b\u4e2d\u901a\u8fc7 setXX() \u65b9\u6cd5\u8bbe\u7f6e\u6570\u636e\u6e90\u7684\u8fde\u63a5\u5c5e\u6027\uff0c\u82e5\u672a\u6307\u5b9a\u5219\u4f7f\u7528\u9ed8\u8ba4\u5c5e\u6027\u503c\uff1a\u6570\u636e\u5e93\u670d\u52a1\u5668\u5730\u5740\u9ed8\u8ba4\u4e3a\u201clocalhost\u201d \uff0c\u8fde\u63a5\u6570\u636e\u5e93\u9ed8\u8ba4\u4e3a\u201cSYSTEM\u201d \uff0c\u8bbf\u95ee\u7aef\u53e3\u53f7\u9ed8\u8ba4\u4e3a\u201c5138\u201d \uff0c\u8bbf\u95ee\u7528\u6237\u540d\u9ed8\u8ba4\u4e3a\u201cGUEST\u201d \uff0c\u7528\u6237\u5bc6\u7801\u9ed8\u8ba4\u4e3a\u201cGUEST\u201d \u3002URL \u9ed8\u8ba4\u8fde\u63a5\u4e32\u4e3a\u201cjdbc:xugu://127.0.0.1:5138/SYSTEM?user=GUEST&password=GUEST&version=110\u201d\u3002\u6570\u636e\u6e90\u5efa\u7acb\u540e\uff0c\u53ef\u901a\u8fc7\u8c03\u7528 XgDataSource \u7c7b\u4e2d\u7684 getConnection() \u548c getConnection(String username,String password) \u65b9\u6cd5\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u3002","title":"5.1 \u4f7f\u7528\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u6e90\u521b\u5efa\u8fde\u63a5"},{"location":"xugu/#52","text":"\u8fde\u63a5\u6c60\u6280\u672f\u7684\u6838\u5fc3\u601d\u60f3\u662f\uff1a\u8fde\u63a5\u590d\u7528\uff0c\u901a\u8fc7\u5efa\u7acb\u4e00\u4e2a\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u4ee5\u53ca\u4e00\u5957\u8fde\u63a5\u4f7f\u7528\u3001\u5206\u914d\u3001\u7ba1\u7406\u7b56\u7565\uff0c\u8be5\u8fde\u63a5\u6c60\u4e2d\u7684\u8fde\u63a5\u53ef\u4ee5\u5f97\u5230\u9ad8\u6548\u3001\u5b89\u5168\u7684\u590d\u7528\uff0c\u907f\u514d\u4e86\u6570\u636e\u5e93\u8fde\u63a5\u9891\u7e41\u5efa\u7acb\u3001\u5173\u95ed\u7684\u5f00\u9500\u3002 \u865a\u8c37 JDBC \u8fde\u63a5\u6c60\u5b9e\u73b0\u7c7b\u5bf9\u865a\u8c37\u6570\u636e\u5e93\u539f\u59cb\u8fde\u63a5\u8fdb\u884c\u4e86\u5c01\u88c5\uff0c\u4ece\u800c\u65b9\u4fbf\u4e86\u6570\u636e\u5e93\u5e94\u7528\u5bf9\u4e8e\u8fde\u63a5\u7684\u4f7f\u7528\uff08\u7279\u522b\u662f\u5bf9\u4e8e\u4e8b\u52a1\u5904\u7406\uff09\uff0c\u63d0\u9ad8\u4e86\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u6548\u7387\uff0c\u4e5f\u6b63\u662f\u56e0\u4e3a\u8fd9\u4e2a\u5c01\u88c5\u5c42\u7684\u5b58\u5728\uff0c\u9694\u79bb\u4e86\u5e94\u7528\u7684\u672c\u8eab\u7684\u5904\u7406\u903b\u8f91\u548c\u5177\u4f53\u6570\u636e\u5e93\u8bbf\u95ee\u903b\u8f91\uff0c\u4f7f\u5e94\u7528\u672c\u8eab\u7684\u590d\u7528\u6210\u4e3a\u53ef\u80fd\u3002\u8fde\u63a5\u6c60\u4e3b\u8981\u7531\u4e09\u90e8\u5206\u7ec4\u6210\uff1a\u8fde\u63a5\u6c60\u7684\u5efa\u7acb\u3001\u8fde\u63a5\u6c60\u4e2d\u8fde\u63a5\u7684\u4f7f\u7528\u7ba1\u7406\u3001\u8fde\u63a5\u6c60\u7684\u5173\u95ed\u3002 \u865a\u8c37 JDBC \u8fde\u63a5\u6c60\u7684\u57fa\u672c\u601d\u60f3\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u5efa\u7acb\u4e00\u4e2a\u201c\u7f13\u51b2\u6c60\u201d\u3002\u9884\u5148\u5728\u201c\u7f13\u51b2\u6c60\u201d\u4e2d\u653e\u5165\u4e00\u5b9a\u6570\u91cf\u7684\u8fde\u63a5\uff0c\u5f53\u9700\u8981\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65f6\uff0c\u53ea\u9700\u4ece\u201c\u7f13\u51b2\u6c60\u201d\u4e2d\u53d6\u51fa\u4e00\u4e2a\uff0c\u4f7f\u7528\u5b8c\u6bd5\u4e4b\u540e\u518d\u653e\u56de\u53bb\u3002\u901a\u8fc7\u8bbe\u5b9a\u8fde\u63a5\u6c60\u6700\u5927\u8fde\u63a5\u6570\u6765\u9632\u6b62\u7cfb\u7edf\u65e0\u5c3d\u7684\u4e0e\u6570\u636e\u5e93\u8fde\u63a5\u3002\u4ea6\u53ef\u901a\u8fc7\u8fde\u63a5\u6c60\u7684\u7ba1\u7406\u673a\u5236\u76d1\u89c6\u6570\u636e\u5e93\u7684\u8fde\u63a5\u6570\u91cf\u3001\u4f7f\u7528\u60c5\u51b5\uff0c\u4e3a\u7cfb\u7edf\u5f00\u53d1\u3001\u6d4b\u8bd5\u53ca\u6027\u80fd\u8c03\u6574\u63d0\u4f9b\u4f9d\u636e\u3002 \u5f53\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u5b8c\u6570\u636e\u5e93\u8fde\u63a5\u8c03\u7528\u8fde\u63a5\u5173\u95ed\u65b9\u6cd5\u65f6\uff0c\u8be5\u8fde\u63a5\u5e76\u672a\u9500\u6bc1\uff0c\u800c\u662f\u88ab\u5f52\u8fd8\u7ed9\u8fde\u63a5\u6c60\u7b49\u5f85\u4e0b\u6b21\u7ee7\u7eed\u8c03\u7528\u3002 {.is-info} \u865a\u8c37 JDBC \u5b9e\u73b0\u8fde\u63a5\u6c60\u670d\u52a1\u6240\u63d0\u4f9b\u7684\u63a5\u53e3\u7c7b\u5982\u4e0b\uff1a - XgDataSource \u5b9e\u73b0 javax.sql.DataSource \u63a5\u53e3\uff1b - XgPooledConnection \u5b9e\u73b0 javax.sql.PooledConnection \u63a5\u53e3\uff1b - XgConnectionPoolDataSource \u5b9e\u73b0 javax.sql.ConnectionPoolDataSource \u63a5\u53e3\uff1b - XgConnectionEventListener \u5b9e\u73b0 javax.sql.ConnectionEventListener \u63a5\u53e3\uff1b - XgConnectionEvent \u7ee7\u627f\u81ea javax.sql.ConnectionEvent \u7c7b\u3002 \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u4e2d\u7684\u8fde\u63a5\u5747\u662f\u901a\u8fc7\u6570\u636e\u6e90\u5efa\u7acb\u7684\uff0c\u6545\u800c XgConnectionPoolDataSource \u7ee7\u627f\u4e86 com.xugu.pool.XgDataSource \u7c7b\u3002\u7528\u6237\u4ea6\u53ef\u901a\u8fc7 XgConnectionPoolDataSource \u5bf9\u8c61\u8bbe\u7f6e\u6570\u636e\u6e90\u5c5e\u6027\u548c\u8fde\u63a5\u6c60\u5c5e\u6027\uff1a //\u6700\u5c0f\u8fde\u63a5\u6570 setMinIdle(int min) //\u6700\u5927\u8fde\u63a5\u6570 setMaxActive(int max) //\u767b\u5f55\u7a7a\u95f2\u65f6\u95f4 setLoginTimeout(int time) //\u6700\u5927\u7b49\u5f85\u8fde\u63a5\u8d85\u65f6 setMaxWaitTime(long waitTime) \u5176\u4e2d\uff1asetLoginTimeout() \u548c setMaxWaitTime() \u65b9\u6cd5\u4e2d\u53c2\u6570\u5355\u4f4d\u4e3a\u6beb\u79d2\uff0c\u5176\u4ed6\u65b9\u6cd5\u4e2d\u53c2\u6570\u5355\u4f4d\u4e3a\u79d2\u3002 \u793a\u4f8b\uff1a\u521b\u5efa\u4e00\u4e2a\u865a\u8c37 JDBC \u8fde\u63a5\u6c60\uff0c\u5e76\u901a\u8fc7\u8fde\u63a5\u6c60\u83b7\u53d6\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u3002 XgConnectionPoolDataSource CPDSource = new XgConnectionPoolDataSource()\u037e CPDSource.setHostName(\u201clocalhost\u201d)\u037e CPDSource.setPort(5138)\u037e CPDSource.setDatabaseName(\u201cxuguNew\u201d)\u037e CPDSource.setUser(\u201cSYSDBA\u201d)\u037e CPDSource.setPassword(\u201cSYSDBA\u201d)\u037e CPDSource.setUrl(\"jdbc:xugu://localhost:5138/xuguNew)\u037e CPDSource.setMaxActive(50)\u037e CPDSource.setMinIdle(5)\u037e CPDSource.setLoginTimeout(3000)\u037e CPDSource.setMaxWaitTime(3000)\u037e XgPooledConnection Pconn = (XgPooledConnection)CPDSource.getPooledConnection()\u037e Connection conn = Pconn.getConnection()\u037e","title":"5.2 \u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u6c60"},{"location":"xugu/#jdbc_2","text":"\u4f7f\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u5b9e\u73b0\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u4ea4\u4e92\u7684\u4e00\u822c\u4f7f\u7528\u6b65\u9aa4\uff1a\u5bfc\u5165\u865a\u8c37 JDBC \u9a71\u52a8\u5305 \u2192 \u52a0\u8f7d\u865a\u8c37 JDBC \u9a71\u52a8\u7a0b\u5e8f \u2192 \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5 Connection \u2192 \u521b\u5efa\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61 Statement \u2192 \u6267\u884c SQL \u8bed\u53e5 \u2192 \u5904\u7406\u6267\u884c\u7ed3\u679c ResultSet \u2192 \u91ca\u653e\u8d44\u6e90\u3002 - \u7b2c 1 \u6b65\uff1a\u5bfc\u5165\u865a\u8c37 JDBC \u9a71\u52a8\u5305 - \u7b2c 2 \u6b65\uff1a\u6ce8\u518a\u9a71\u52a8 (\u4ec5\u505a\u4e00\u6b21) - \u7b2c 3 \u6b65\uff1a\u5efa\u7acb\u8fde\u63a5 (Connection) - \u7b2c 4 \u6b65\uff1a\u521b\u5efa\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61 (Statement) - \u7b2c 5 \u6b65\uff1a\u6267\u884c SQL \u8bed\u53e5 - \u7b2c 6 \u6b65\uff1a\u5904\u7406\u6267\u884c\u7ed3\u679c (ResultSet) - \u7b2c 7 \u6b65\uff1a\u91ca\u653e\u8d44\u6e90","title":"\u516d. \u865a\u8c37\u6570\u636e\u5e93\u7684JDBC\u4ea4\u4e92\u6d41\u7a0b"},{"location":"xugu/#61-jdbc","text":"\u4e0b\u8f7d\u865a\u8c37\u6570\u636e\u5e93\u4e13\u7528\u865a\u8c37 JDBC \u9a71\u52a8\u5305 (cloudjdbc-*.*.*.jar)\uff0c\u5e76\u5bfc\u5165\u5230\u5e94\u7528\u7a0b\u5e8f\u4e2d\u3002","title":"6.1 \u5bfc\u5165\u865a\u8c37JDBC\u9a71\u52a8\u5305"},{"location":"xugu/#62-jdbc","text":"\u865a\u8c37 JDBC \u9a71\u52a8\u7a0b\u5e8f\u4e2d Driver \u63a5\u53e3\u5b9e\u73b0\u7c7b\u4e3a com.xugu.cloudjdbc.Driver\u3002\u52a0\u8f7d\u9a71\u52a8\u65b9\u5f0f\u4e3a DriverManager.registerDriver(new com.xugu.cloudjdbc.Driver()) \u6216Class.forName(\u201ccom.xugu.cloudjdbc.Driver\u201d)\u3002","title":"6.2 \u52a0\u8f7d\u865a\u8c37JDBC\u9a71\u52a8"},{"location":"xugu/#63","text":"\u5efa\u7acb\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u7684\u65b9\u5f0f\u6709\u591a\u79cd\uff0c\u53ef\u6839\u636e\u5e94\u7528\u7a0b\u5e8f\u5b9e\u9645\u4f7f\u7528\u573a\u666f\u9009\u62e9\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65b9\u5f0f\u3002\u5e38\u89c1\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65b9\u5f0f\u5982\u4e0b\uff1a - \u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u4f7f\u7528 DriverManager \u83b7\u5f97\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\uff1b - \u4f7f\u7528\u865a\u8c37\u6570\u636e\u5e93\u6570\u636e\u6e90/\u8fde\u63a5\u6c60\u7684\u65b9\u5f0f\u83b7\u53d6\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\uff1b - \u4f7f\u7528\u7b2c\u4e09\u65b9\u901a\u7528\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u65b9\u5f0f\u83b7\u53d6\u865a\u8c37\u6570\u636e\u5e93\u8fde\u63a5\u3002 \u5982\uff1adruid\u3001c3p0\u3001dbcp\u3001JNDI \u7b49\u3002","title":"6.3 \u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5"},{"location":"xugu/#631","text":"\u6253\u5f00\u6570\u636e\u5e93\u8fde\u63a5\u5373\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u5bf9\u8c61 Connection \u7c7b\u3002 \u5982\uff1aDriverManager \u901a\u8fc7 getConnection() \u65b9\u6cd5\u83b7\u53d6 Connection \u7c7b\u5bf9\u8c61\u3002DriverManager \u7684 getConnection() \u65b9\u6cd5\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\u7684\u65b9\u5f0f\u4ea6\u6709\u591a\u79cd\u3002\u4ee5\u4e0b\u4e3a\u5e38\u89c1\u65b9\u5f0f\uff1a - getConnection(String url) \u53c2\u6570\u8bf4\u660e\uff1a - url\uff1a\u8bbf\u95ee\u6570\u636e\u5e93\u7684 URL \u8def\u5f84\u3002 \u793a\u4f8b\uff1a \u4e0b\u9762\u7684\u4ee3\u7801\u5229\u7528 getConnection \u65b9\u6cd5\u521b\u5efa\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u3002 ``` public Connection getConnection(){ Connection con=null\u037e try{ //\u6ce8\u518c\u6570\u636e\u5e93\u9a71\u52a8 Class.forName(\"com.xugu.cloudjdbc.Driver\")\u037e //\u5b9a\u4e49\u8fde\u63a5\u6570\u636e\u5e93\u7684url String url = \"jdbc:xugu://localhost:5138/db?user=user1\uff06password=pwd\"\u037e //\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5 con = DriverManager.getConnection(url)\u037e System.out.println(\"\u6570\u636e\u5e93\u8fde\u63a5\u6210\u529f\uff01\")\u037e }catch(Exception e){ e.printStackTrace()\u037e } //\u8fd4\u56de\u4e00\u4e2a\u8fde\u63a5 return con\u037e } ``` getConnection(String url,String user,String password) \u53c2\u6570\u8bf4\u660e\uff1a url\uff1a\u8bbf\u95ee\u6570\u636e\u5e93\u7684 URL \u8def\u5f84\u3002 user\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u7528\u6237\u540d\u3002 password\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u7528\u6237\u5bc6\u7801\u3002 \u793a\u4f8b\uff1a \u4e0b\u9762\u7684\u4ee3\u7801\u5229\u7528 getConnection \u65b9\u6cd5\u521b\u5efa\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u3002 private Connection con; private String user = \"user1\"; //\u5b9a\u4e49\u8fde\u63a5\u6570\u636e\u5e93\u7684\u7528\u6237\u540d private String password = \"pwd\"; //\u5b9a\u4e49\u8fde\u63a5\u6570\u636e\u5e93\u7684\u5bc6\u7801 private String className = \"com.xugu.cloudjdbc.Driver\";//\u5b9a\u4e49\u865a\u8c37JDBC\u9a71\u52a8 private String url = \"jdbc:xugu://localhost:5138/db\"; /\\*\\*\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\\*/ public Connection getConnection(){ try{ Class.forName(className);//\u52a0\u8f7d\u6570\u636e\u5e93\u9a71\u52a8 System.out.println(\"\u6570\u636e\u5e93\u9a71\u52a8\u52a0\u8f7d\u6210\u529f\uff01\"); con = DriverManager.getConnection(url,user,password); //\u8fde\u63a5\u6570\u636e\u5e93 System.out.println(\"\u6210\u529f\u5730\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\uff01\"); }catch(Exception e){ System.out.println(\"\u521b\u5efa\u6570\u636e\u5e93\u8fde\u63a5\u5931\u8d25\uff01\"); con = null; e.printStackTrace(); } finally { If(conn != null){ //\u91ca\u653e\u8fde\u63a5\u8d44\u6e90 conn.close(); } } return con; } getConnection(String url,Properties info) \u53c2\u6570\u8bf4\u660e\uff1a url\uff1a\u8bbf\u95ee\u6570\u636e\u5e93\u7684 URL \u8def\u5f84\u3002 info\uff1a\u4e00\u4e2a\u6301\u4e45\u7684\u5c5e\u6027\u96c6\u5bf9\u8c61\uff0c\u5305\u62ec user \u548c password \u7b49\u5c5e\u6027\u3002 \u793a\u4f8b\uff1a \u4e0b\u9762\u7684\u4ee3\u7801\u5229\u7528 getConnection \u65b9\u6cd5\u521b\u5efa\u4e0e\u865a\u8c37\u6570\u636e\u5e93\u7684\u8fde\u63a5\uff0c\u5e76\u8fd4\u56de\u8fde\u63a5\u5bf9\u8c61\u3002 public Connection getConnection(){ Connection con = null; //\u5b9a\u4e49\u6570\u636e\u5e93\u8fde\u63a5\u5bf9\u8c61 Properties info = new Properties(); //\u5b9a\u4e49Properties\u5bf9\u8c61 info.setProperty(\"user\",\"user1\"); //\u8bbe\u7f6eProperties\u5bf9\u8c61\u5c5e\u6027 info.setProperty(\"password\",\"pwd\"); try{ //\u6ce8\u518c\u6570\u636e\u5e93\u9a71\u52a8 Class.forName(\"com.xugu.cloudjdbc.Driver\"); //test\u4e3a\u6570\u636e\u5e93\u540d\u79f0 String url = \"jdbc:xugu://localhost:5138/db\"; //\u83b7\u53d6\u8fde\u63a5\u6570\u636e\u5e93\u7684Connection\u5bf9\u8c61 con = DriverManager.getConnection(url,info); System.out.println(\"\u6570\u636e\u5e93\u8fde\u63a5\u6210\u529f\uff01\"); }catch(Exception e){ e.printStackTrace(); } //\u8fd4\u56de\u4e00\u4e2a\u8fde\u63a5 return con; }","title":"6.3.1 \u6253\u5f00\u6570\u636e\u5e93\u8fde\u63a5"},{"location":"xugu/#632","text":"\u6570\u636e\u5e93\u4e8b\u52a1 (transaction) \u662f\u8bbf\u95ee\u5e76\u53ef\u80fd\u64cd\u4f5c\u5404\u79cd\u6570\u636e\u9879\u7684\u4e00\u4e2a\u6570\u636e\u5e93\u64cd\u4f5c\u5e8f\u5217\uff0c\u8fd9\u4e9b\u64cd\u4f5c\u8981\u4e48\u5168\u90e8\u6267\u884c, \u8981\u4e48\u5168\u90e8\u4e0d\u6267\u884c\uff0c\u662f\u4e00\u4e2a\u4e0d\u53ef\u5206\u5272\u7684\u5de5\u4f5c\u5355\u4f4d\u3002\u4e8b\u52a1\u7531\u4e8b\u52a1\u5f00\u59cb\u5230\u4e8b\u52a1\u7ed3\u675f\u4e4b\u95f4\u6267\u884c\u7684\u5168\u90e8\u6570\u636e\u5e93\u64cd\u4f5c\u7ec4\u6210\u3002 \u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\uff0c\u5373\u5f53\u4e00\u6761 SQL \u8bed\u53e5\u6267\u884c\u5b8c\u6210\u540e\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u5c06\u81ea\u52a8\u63d0\u4ea4\u8be5\u8bed\u53e5\u6240\u5728\u4e8b\u52a1\u3002\u5728\u865a\u8c37 JDBC \u9a71\u52a8\u4e2d\u63a7\u5236\u4e8b\u52a1\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a - \u901a\u8fc7\u6570\u636e\u5e93\u8fde\u63a5 URL \u4e32\u7684 auto_commit \u5c5e\u6027\uff0c\u63a7\u5236\u4e8b\u52a1\u7684\u5f00\u542f\u4e0e\u5173\u95ed\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b auto_commit \u5c5e\u6027\u4e3a on\uff0c\u5373\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u3002 - \u901a\u8fc7 Connection \u7c7b\u7684 setAutoCommit(boolean commit) \u65b9\u6cd5\u63a7\u5236\u4e8b\u52a1\u7684\u5f00\u542f\u4e0e\u5173\u95ed\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b commit \u5c5e\u6027\u4e3a TRUE\uff0c\u5373\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u3002 \u5728\u7981\u7528\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u4e0b\uff0c\u4f7f\u7528 Connection \u7c7b\u7684 commit() \u65b9\u6cd5\u63d0\u4ea4 SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u505a\u7684\u66f4\u6539\uff0c\u800c Connection \u7c7b\u7684 rollback() \u65b9\u6cd5\u5c06\u56de\u6eda SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u7684\u66f4\u6539\uff0c\u4e0a\u8ff0\u4e24\u79cd\u65b9\u6cd5\u6267\u884c\u5b8c\u6210\u540e\u5747\u5c06\u91ca\u653e\u4e8b\u52a1\u6301\u6709\u7684\u5168\u90e8\u9501\u8d44\u6e90\u3002 \u4e8b\u52a1\u4ec5\u5bf9\u6570\u636e\u5e93 DML \u64cd\u4f5c\u6709\u6548\u3002 {.is-info} \u4ee5\u4e0b\u4e3a\u4f7f\u7528 setAutoCommit() \u65b9\u6cd5\u63a7\u5236\u4e8b\u52a1\u63d0\u4ea4\u7684\u793a\u4f8b\u4ee3\u7801\uff1a //\u8bbe\u7f6e\u4e8b\u52a1\u4e3a\u975e\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f conn.setAutoCommit(false)\u037e //\u521b\u5efa\u6570\u636e\u5e93Statement\u5bf9\u8c61 Statement stm = conn.createStatement()\u037e //\u6570\u636e\u5e93\u4e8b\u52a1\u6267\u884cSQL\u8bed\u53e5 String sql = \"insert into test (comp_id,comp_name) values(1,'comp')\"\u037e //\u6267\u884c\u9759\u6001SQL\u8bed\u53e5 stm.execute(sql)\u037e //\u6570\u636e\u5e93\u9884\u5904\u7406SQL\u8bed\u53e5 PreparedStatement pstm = conn. prepareStatement(\u201cupdate test set id=? where comp_name=?\u201d) //\u9884\u5904\u7406SQL\u8bed\u53e5\u7b2c\u4e00\u4e2a\u53c2\u6570\u8d4b\u503c pstm.setInt(1,15)\u037e //\u9884\u5904\u7406SQL\u8bed\u53e5\u7b2c\u4e8c\u4e2a\u53c2\u6570\u8d4b\u503c pstm.setString(2,'DBMS')\u037e //\u6267\u884c\u9884\u5904\u7406SQL\u8bed\u53e5 pstm.execute()\u037e //\u63d0\u4ea4\u4e8b\u52a1 conn.commit()\u037e //\u5220\u9664\u8868\u4e2d\u6307\u5b9a\u884c\u6570\u636e stm.execute(\u201cdelete from test where id=15\u201d)\u037e //\u4e8b\u52a1\u56de\u6eda\u65b9\u6cd5 conn.rollback()\u037e \u4e0a\u9762\u4ee3\u7801\u4e2d\u6267\u884c\u63d0\u4ea4\u4e8b\u52a1\u64cd\u4f5c\uff0c\u6267\u884c\u9759\u6001 SQL \u8bed\u53e5\u4e0e\u6267\u884c\u9884\u5904\u7406 SQL \u8bed\u53e5\u5bf9\u6570\u636e\u5e93\u7684\u66f4\u6539\u5c06\u6c38\u4e45\u751f\u6548\uff1b\u800c\u540e\u6267\u884c\u7684\u5220\u9664\u8868\u4e2d\u6307\u5b9a\u884c\u6570\u636e\u64cd\u4f5c\uff0c\u56e0\u5176\u540e\u8c03\u7528\u7684 rollback() \u65b9\u6cd5\uff0cdelete \u547d\u4ee4\u5bf9\u6570\u636e\u5e93\u7684\u6570\u636e\u66f4\u6539\u5c06\u88ab\u56de\u6eda\u6389\uff0c\u6545\u800c\u5bf9\u6570\u636e\u5e93\u7684\u5220\u9664\u64cd\u4f5c\u4e0d\u4f1a\u751f\u6548\u3002","title":"6.3.2 \u8fde\u63a5\u4e8b\u52a1\u7ba1\u7406"},{"location":"xugu/#633-savepoint","text":"JDBC \u89c4\u8303 3.0 \u4e2d\u4e3a\u4e86\u589e\u52a0\u5bf9\u4e8b\u52a1\u7684\u63a7\u5236\uff0c\u65b0\u589e Savepoint \u63a5\u53e3\uff0c\u5176\u4ee3\u8868\u4e8b\u52a1\u4e2d\u7684\u4e00\u4e2a\u903b\u8f91\u4e8b\u52a1\u70b9\u3002\u5728\u975e\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u4e0b\uff0c\u4e00\u4e2a\u4e8b\u52a1\u4e2d\u53ef\u4ee5\u8bbe\u7f6e\u591a\u4e2a Savepoint\uff0c\u5728\u4ee3\u7801\u4e2d\u8fdb\u884c\u4e8b\u52a1\u56de\u6eda\u64cd\u4f5c\u65f6\uff0c\u53ef\u4ee5\u6307\u5b9a\u4e8b\u52a1\u56de\u6eda\u5230\u6307\u5b9a Savepoint \u4f4d\u7f6e\uff0c\u6307\u5b9a\u56de\u6eda\u4f4d\u7f6e\u524d\u7684\u4e8b\u52a1\u64cd\u4f5c\u4ecd\u7136\u4fdd\u7559\u3002\u6b64\u63a5\u53e3\u5927\u5927\u63d0\u9ad8\u4e86\u4e8b\u52a1\u5904\u7406\u7684\u7c92\u5ea6\uff0c\u65b9\u4fbf\u5e94\u7528\u7a0b\u5e8f\u63a7\u5236\u4e8b\u52a1\u5904\u7406\u903b\u8f91\u3002 \u793a\u4f8b\uff1a\u8fde\u63a5\u4e8b\u52a1\u63a7\u5236\u63a5\u53e3 Savepoint \u4f7f\u7528 //\u8bbe\u7f6e\u975e\u81ea\u52a8\u63d0\u4ea4 conn.setAutoCommit(false); //\u521b\u5efaStatement\u5bf9\u8c61 Statement stm = conn.createStatement(); //\u6267\u884cSQL\u547d\u4ee4 stm.execute(sql1); stm.execute(sql2); //\u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\u70b9save1 java.sql.Savepoint save1 =conn.setSavepoint(\"save_1\"); stm.execute(sql3); //\u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\u70b9save2 java.sql.Savepoint save2 =conn.setSavepoint(\"save_2\"); stm.execute(sql4); //\u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\u70b9save3 java.sql.Savepoint save3 =conn.setSavepoint(\"save_3\"); stm.execute(sql5); //\u56de\u6eda\u4e8b\u52a1\u5230\u56de\u6eda\u70b9save3 conn.rollback(save3); conn.commit(); \u4ee5\u4e0a\u4ee3\u7801\u6bb5\u4e2d\uff0c\u4e8b\u52a1\u6267\u884c\u8bed\u53e5 sql5 \u5c06\u88ab\u56de\u6eda\u6389\u3002","title":"6.3.3 \u8fde\u63a5\u4e8b\u52a1\u63a7\u5236\uff0cSavepoint\u63a5\u53e3"},{"location":"xugu/#64-sql","text":"\u5728\u6570\u636e\u5e93\u6807\u51c6\u4e2d\uff0c\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61\u5206\u4e3a\u4e09\u7c7b\uff1a\u6267\u884c\u9759\u6001 SQL \u8bed\u53e5\u7684 Statement \u5bf9\u8c61\u3001\u6267\u884c\u9884\u7f16\u8bd1 SQL \u8bed\u53e5\u7684 PreparedStatement \u5bf9\u8c61\u4ee5\u53ca\u6267\u884c\u6570\u636e\u5e93\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\u7684 CallableStatement \u5bf9\u8c61\u3002","title":"6.4 \u521b\u5efa\u6267\u884cSQL\u8bed\u53e5\u5bf9\u8c61"},{"location":"xugu/#641-sqlstatement","text":"Statement \u5bf9\u8c61\u7528\u4e8e\u6267\u884c\u9759\u6001 SQL \u8bed\u53e5\u548c\u83b7\u5f97 SQL \u4ea7\u751f\u7684\u7ed3\u679c\u3002\u5728\u865a\u8c37 JDBC \u9a71\u52a8\u4e2d\uff0c\u865a\u8c37\u6570\u636e\u5e93 DDL \u64cd\u4f5c\u5747\u901a\u8fc7 Statement \u5bf9\u8c61\u6765\u6267\u884c\u3002 Statement \u5bf9\u8c61\u901a\u8fc7 Connection \u7c7b\u7684 createStatement() \u65b9\u6cd5\u521b\u5efa\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a //\u521b\u5efa\u6267\u884cSQL\u8bed\u53e5\u5bf9\u8c61Statement Statement stm = conn.createStatement()\u037e","title":"6.4.1 \u6267\u884cSQL\u5bf9\u8c61Statement"},{"location":"xugu/#642-sqlpreparedstatement","text":"PreparedStatement \u5bf9\u8c61\u4f7f\u7528\u65f6\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u5bf9\u6267\u884c SQL \u8bed\u53e5\u8fdb\u884c\u9884\u7f16\u8bd1\u5904\u7406\uff0c\u9884\u7f16\u8bd1 SQL \u8bed\u53e5\u5c06\u5728\u672a\u6765\u7684\u4f7f\u7528\u4e2d\u88ab\u91cd\u7528\u3002\u4e0e Statement \u5bf9\u8c61\u76f8\u6bd4\uff0cPreparedStatement \u5bf9\u8c61\u64cd\u4f5c\u591a\u6761 SQL \u8bed\u53e5\u7684\u6548\u7387\u66f4\u9ad8\u3002 \u7ecf\u8fc7\u9884\u7f16\u8bd1\u5e76\u5b58\u50a8\u5728 PreparedStatement \u5bf9\u8c61\u4e2d\u7684 SQL \u8bed\u53e5\uff0c\u901a\u8fc7 Connection \u7c7b\u7684 prepareStatement() \u65b9\u6cd5\u521b\u5efa\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a //\u521b\u5efa\u6267\u884c\u9884\u7f16\u8bd1SQL\u8bed\u53e5\u5bf9\u8c61PreparedStatement PreparedStatement preStatement = conn.prepareStatement(\u201c\u9884\u7f16\u8bd1SQL\u8bed\u53e5\u201d); \u9884\u5904\u7406 PreparedStatement \u5bf9\u8c61\u76f8\u5bf9\u4e8e\u9759\u6001 Statement \u5bf9\u8c61\u7684\u4f18\u52bf\uff1a - PreparedStatement \u53ef\u4ee5\u52a8\u6001\u4f20\u5165\u53c2\u6570\u503c\uff1b - PreparedStatement \u6bd4 Statement \u66f4\u5feb\uff1b PreparedStatement \u4f1a\u5c06 SQL \u8bed\u53e5\u9884\u7f16\u8bd1\u5728\u6570\u636e\u5e93\u7cfb\u7edf\u4e2d\uff0c\u6267\u884c\u8ba1\u5212\u540c\u6837\u4f1a\u88ab\u7f13\u5b58\u8d77\u6765\uff0c\u5b83\u5141\u8bb8\u6570\u636e\u5e93\u505a\u53c2\u6570\u5316\u67e5\u8be2\u3002\u4f7f\u7528\u9884\u5904\u7406\u8bed\u53e5\u6bd4\u666e\u901a\u7684 Statement \u67e5\u8be2\u66f4\u5feb\uff0c\u56e0\u505a\u7684\u5de5\u4f5c\u66f4\u5c11 (\u6570\u636e\u5e93\u5bf9 SQL \u8bed\u53e5\u7684\u5206\u6790\u3001\u7f16\u8bd1\u3001\u4f18\u5316\u5df2\u7ecf\u5728\u7b2c\u4e00\u6b21\u67e5\u8be2\u524d\u5b8c\u6210\u4e86)\u037e - PreparedStatement \u53ef\u4ee5\u9632\u6b62 SQL \u6ce8\u5165\u5f0f\u653b\u51fb\u3002 PreparedStatement \u5728\u4f7f\u7528\u53c2\u6570\u5316\u67e5\u8be2\u7684\u60c5\u51b5\u4e0b\uff0c\u6570\u636e\u5e93\u7cfb\u7edf\u4e0d\u4f1a\u5c06\u53c2\u6570\u7684\u5185\u5bb9\u89c6\u4e3a SQL \u6307\u4ee4\u7684\u4e00\u90e8\u5206\u6765\u5904\u7406\uff0c\u800c\u662f\u5728\u6570\u636e\u5e93\u5b8c\u6210 SQL \u6307\u4ee4\u7684\u7f16\u8bd1\u540e\uff0c\u624d\u5957\u7528\u53c2\u6570\u8fd0\u884c\uff0c\u56e0\u6b64\u5c31\u7b97\u53c2\u6570\u4e2d\u542b\u6709\u7834\u574f\u6027\u7684\u6307\u4ee4\uff0c\u4e5f\u4e0d\u4f1a\u88ab\u6570\u636e\u5e93\u6240\u8fd0\u884c\u3002","title":"6.4.2 \u6267\u884cSQL\u5bf9\u8c61PreparedStatement"},{"location":"xugu/#643-callablestatement","text":"CallableStatement \u5bf9\u8c61\u5b9e\u73b0\u4e86\u4ece Java \u5e94\u7528\u7a0b\u5e8f\u4e2d\u8c03\u7528\u6570\u636e\u5e93\u5b58\u50a8\u8fc7\u7a0b\u3002\u4f46\u6b64\u8c03\u7528\u8fc7\u7a0b\u5e76\u4e0d\u5305\u542b\u5b58\u50a8\u8fc7\u7a0b\u672c\u8eab\uff0c\u56e0\u5b58\u50a8\u8fc7\u7a0b\u5b58\u50a8\u5728\u6570\u636e\u5e93\u4e2d\u3002 CallableStatement \u5bf9\u8c61\u4e3a\u6240\u6709\u7684\u6570\u636e\u5e93\u63d0\u4f9b\u4e86\u4e00\u79cd\u4ee5\u6807\u51c6\u5f62\u5f0f\u8c03\u7528\u5b58\u50a8\u8fc7\u7a0b\u7684\u65b9\u6cd5\uff0c\u901a\u8fc7 Connection \u7c7b\u7684 prepareCall() \u65b9\u6cd5\u521b\u5efa\u3002 \u793a\u4f8b\u4ee3\u7801\uff1a //\u521b\u5efa\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u5bf9\u8c61CallableStatement CallableStatement cstmt= conn.prepareCall(\u201c{call \u5b58\u50a8\u8fc7\u7a0b\u540d(\u53c2\u6570\u8868\u5217)}\u201d);","title":"6.4.3 \u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u5bf9\u8c61CallableStatement"},{"location":"xugu/#644-sql","text":"\u5728\u521b\u5efa\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61\u65f6\uff0c\u53ef\u901a\u8fc7\u6784\u9020\u65b9\u6cd5\u7684\u4e0d\u540c\u53c2\u6570\u8bbe\u7f6e ResultSet \u5bf9\u8c61\u5c5e\u6027\uff0c\u5c5e\u6027\u5305\u62ec\u7ed3\u679c\u7c7b\u578b ResultSetType\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b ResultSetConcurrency\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b ResultSetHoldability\u3002 ResultSetType \u9ed8\u8ba4\u4e3a ResultSet.TYPE_SCROLL_INSENSITIVE\uff1a\u652f\u6301\u7ed3\u679c\u96c6 backforward\u3001last\u3001first \u7b49\u64cd\u4f5c\uff0c\u5bf9\u6570\u636e\u5e93\u4e2d\u5176\u5b83 session \u8fdb\u884c\u7684\u6570\u636e\u66f4\u6539\u4e0d\u654f\u611f\uff1b ResultSetConcurrency \u9ed8\u8ba4\u4e3a ResultSet.CONCUR_READ_ONLY: \u4e0d\u53ef\u66f4\u65b0\u7ed3\u679c\u96c6\uff1b\u8be5\u5c5e\u6027\u4ea6\u53ef\u66f4\u6539\u4e3a ResultSet.CONCUR_UPDATABLE\uff0c\u652f\u6301\u5728 ResultSet \u4e2d\u5bf9\u8bb0\u5f55\u8fdb\u884c\u4fee\u6539\uff0c\u4fee\u6539\u540e\u8bb0\u5f55\u66f4\u65b0\u5230\u6570\u636e\u5e93\uff0c\u4fee\u6539\u64cd\u4f5c\u53ef\u5305\u542b\u63d2\u5165\u3001\u5220\u9664\u6216\u66f4\u65b0\uff1b ResultSetHoldability \u9ed8\u8ba4\u4e3a ResultSet.HOLD_CURSORS_OVER_COMMIT: \u5728\u4e8b\u52a1 commit \u6216 rollback \u540e\uff0cResultSet \u4ecd\u7136\u53ef\u7528\u3002 Connection \u7c7b\u521b\u5efa Statement \u5bf9\u8c61\u6784\u9020\u65b9\u6cd5\uff1a //Statement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 createStatement(int resultSetType,int resultSetConcurrency)\uff1b //Statement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 createStatement(int resultSetType,int resultSetConcurrency, int resultSetHoldability)\uff1b Connection \u7c7b\u521b\u5efa PreparedStatement \u5bf9\u8c61\u6784\u9020\u65b9\u6cd5\uff1a //PreparedStatement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareStatement(String sql, int resultSetType,int resultSetConcurrency) //PrepareStatment\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareStatement(String sql, int resultSetType,int resultSetConcurrency, int resultSetHoldability) Connection \u7c7b\u521b\u5efa CallableStatement \u5bf9\u8c61\u6784\u9020\u65b9\u6cd5\uff1a //CallableStatement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareCall(String sql, int resultSetType,int resultSetConcurrency) //CallableStatement\u5bf9\u8c61\u6269\u5c55\u7ed3\u679c\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u5e76\u53d1\u7c7b\u578b\u3001\u7ed3\u679c\u96c6\u6301\u4e45\u7c7b\u578b\u6784\u9020\u65b9\u6cd5 prepareCall(String sql, int resultSetType,int resultSetConcurrency, int resultSetHoldability)","title":"6.4.4 \u6267\u884cSQL\u8bed\u53e5\u5bf9\u8c61\u5c5e\u6027\u6269\u5145"},{"location":"xugu/#65-sql","text":"Statement \u5bf9\u8c61\u5b9a\u4e49\u4e86\u591a\u79cd\u6267\u884c SQL \u8bed\u53e5\u7684\u65b9\u6cd5\uff0c\u7528\u6765\u5904\u7406\u8fd4\u56de\u4e0d\u540c\u7ed3\u679c\u7684 SQL \u547d\u4ee4\uff1a - execute(String sql)\uff1a\u6267\u884c\u53ef\u4ee5\u8fd4\u56de\u591a\u4e2a\u7ed3\u679c\u96c6\u7684 SQL \u8bed\u53e5\u8fd4\u56de\u7c7b\u578b\u4e3a boolean\uff0c\u5982\u679c\u8fd4\u56de\u7684\u662f\u66f4\u65b0\u7684\u6570\u76ee\uff0c\u5219\u8fd4\u56de false\uff1b\u5982\u679c\u8fd4\u56de\u7684\u662f ResultSet \u5bf9\u8c61\uff0c\u5219\u8fd4\u56detrue\u3002 - executeQuery(String sql)\uff1a\u6267\u884c\u8fd4\u56de\u5355\u4e2a ResultSet \u7684 SQL \u8bed\u53e5\u8fd4\u56de\u7c7b\u578b\u4e3a ResultSet \u5bf9\u8c61\u3002 - executeUpdate()\uff1a\u6267\u884c SQL INSERT\u3001UPDATE \u6216 DELETE \u8bed\u53e5\u8fd4\u56de\u503c\u4e3a int \u578b\uff0c\u6570\u636e\u5e93\u53d7\u5f71\u54cd\u7684\u884c\u8ba1\u6570\u3002 - \u6279\u5904\u7406\u65b9\u6cd5\uff1a\u6279\u91cf\u6267\u884c SQL \u8bed\u53e5 clearBatch()\uff1a\u6e05\u7a7a\u5386\u53f2 batch \u547d\u4ee4\uff1b addBatch(String sql)\uff1a\u6dfb\u52a0\u8981\u6267\u884c\u7684 sql\uff1b executeBatch()\uff1a\u6279\u91cf\u6267\u884c sql\u3002 PreparedStatement \u7ee7\u627f\u81ea Statement\uff0c\u5b9a\u4e49\u4e86\u5927\u91cf\u7684 setter \u65b9\u6cd5\u7528\u4e8e\u8bbe\u7f6e\u52a8\u6001 sql\u7684\u53c2\u6570\uff0c\u56e0\u6b64 PreparedStatement \u652f\u6301\u52a8\u6001\u4f20\u53c2\uff1b\u53e6\u5916 PreparedStatement \u5185\u90e8\u5b58\u50a8\u4e86\u89e3\u6790\u7684 sql\uff0c\u53ef\u4ee5\u591a\u6b21\u6267\u884c\u800c\u65e0\u9700\u91cd\u590d\u89e3\u6790\u3002PreparedStatement \u7ee7\u627f\u81ea Statement\uff0cCallableStatement \u7ee7\u627f\u81ea PreparedStatement\uff0c\u6545\u800c\u4e09\u8005\u6267\u884c SQL \u8bed\u53e5\u7684\u65b9\u5f0f\u53ef\u901a\u7528\u3002","title":"6.5 \u6267\u884cSQL\u8bed\u53e5"},{"location":"xugu/#651-statement","text":"\u901a\u8fc7 Statement \u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c\u9700\u8981\u6ce8\u610f\u7684\u4e8b\u9879\uff1a - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u524d\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u8bbe\u7f6e\u4e3a FALSE\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\uff0c\u5e76\u8fdb\u884c\u624b\u52a8\u63d0\u4ea4\uff08commit\uff09\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u540e\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u6062\u590d\u4e3a TRUE\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u5f02\u5e38\u53d1\u751f\u65f6\uff0c\u8fdb\u884c rollback(\u56de\u6eda)\u3002 \u793a\u4f8b\uff1a\u901a\u8fc7 Statement \u6279\u91cf\u64cd\u4f5c\u6570\u636e try { //\u521b\u5efaStatement\u5bf9\u8c61 stm = con.createStatement(); //\u8bbe\u7f6e\u4e8b\u52a1\u975e\u81ea\u52a8\u63d0\u4ea4 con.setAutoCommit(false); // \u6dfb\u52a0\u591a\u6761SQL\u8bed\u53e5\u5230\u6279\u5904\u7406\u4e2d stm.addBatch(\"insert into student values(23,'tangbao','\u9ad8\u6570',100)\"); stm.addBatch(\"insert into student values(24,'\u738b\u5b9a','c#',98)\"); stm.addBatch(\"insert into student values(25,'\u738b\u56fd\u4e91','java',90)\"); //\u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c stm.executeBatch(); System.out.println(\"\u63d2\u5165\u6210\u529f!\"); //\u6267\u884c\u6210\u529f\u540e\u8fdb\u884c\u6570\u636e\u63d0\u4ea4 con.commit(); System.out.println(\"\u63d0\u4ea4\u6210\u529f!\"); //\u5173\u95ed\u975e\u81ea\u52a8\u63d0\u4ea4 con.setAutoCommit(true); } catch (SQLException e) { if (!con.isClosed()) { con.rollback(); //\u51fa\u73b0\u5f02\u5e38\uff0c\u56de\u6eda\u4e8b\u52a1 System.out.println(\"\u63d0\u4ea4\u5931\u8d25\uff0c\u56de\u6eda\uff01\"); con.setAutoCommit(true); //\u5173\u95ed\u975e\u81ea\u52a8\u63d0\u4ea4 } } finally { if (stmt != null) { //\u5173\u95ed\u64cd\u4f5c\u5bf9\u8c61 stmt.close(); } }","title":"6.5.1 \u901a\u8fc7Statement\u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c"},{"location":"xugu/#652-preparedstatement","text":"\u901a\u8fc7 PreparedStatement \u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c\u9700\u8981\u6ce8\u610f\u7684\u4e8b\u9879\uff1a - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u524d\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u8bbe\u7f6e\u4e3a FALSE\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\uff0c\u5e76\u8fdb\u884c\u624b\u52a8\u63d0\u4ea4\uff08commit\uff09\uff0c\u6570\u636e\u91cf\u5927\u65f6\uff0c\u8bbe\u7f6e\u624b\u52a8\u63d0\u4ea4\u95f4\u9694\uff1b - \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u540e\uff0c\u81ea\u52a8\u63d0\u4ea4\u6a21\u5f0f\u6062\u590d\u4e3a TRUE\uff1b \u2022 \u6267\u884c\u6279\u5904\u7406\u64cd\u4f5c\u5f02\u5e38\u53d1\u751f\u65f6\uff0c\u8fdb\u884c rollback(\u56de\u6eda)\uff1b - PreparedStatement \u6267\u884c\u8bed\u53e5\u4e0d\u80fd\u4e3a DDL \u8bed\u53e5\u3002 \u793a\u4f8b\uff1a\u5c06 10000 \u6761\u8bb0\u5f55\u63d2\u5165\u6570\u636e\u5e93\u4e2d\uff0c\u6bcf 100 \u6761\u6267\u884c\u4e00\u6b21\u63d0\u4ea4\u64cd\u4f5c try{ conn.setAutoCommit(false); //\u8bbe\u7f6e\u975e\u81ea\u52a8\u63d0\u4ea4 //\u521b\u5efaPreparedStatement\u5bf9\u8c61 ps = conn.prepareStatement(\"insert into testtab values (?, ?, ?)\"); //\u5faa\u73af\u6dfb\u52a0\u6279\u5904\u7406\u6570\u636e for(int i = 0;i<list.size();i++){ HashMap map = list.get(i);//list\u4e3a\u6570\u636e\u5c01\u88c5\uff0c\u6b64\u5904\u7565 ps.setString(1, map.get(\"id\").toString()); ps.setString(2, map.get(\"name\").toString()); ps.setString(3, map.get(\"age\").toString()); ps.addBatch(); if(mod(i,100)==0){//\u6bcf100\u6761\u6267\u884c\u4e00\u6b21\u6267\u884c\u64cd\u4f5c ps.executeBatch();//\u6267\u884c\u6279\u91cf\u63d2\u5165 conn.commit();//\u6267\u884c\u4e8b\u52a1\u63d0\u4ea4 } } ps.executeBatch();//\u6267\u884c\u6279\u91cf\u63d2\u5165 conn.commit(); //\u63d0\u4ea4\u4e8b\u52a1 }catch(Exception e){ if (!conn.isClosed()) { conn.rollback(); //\u51fa\u73b0\u5f02\u5e38\uff0c\u56de\u6eda\u4e8b\u52a1 System.out.println(\"\u63d0\u4ea4\u5931\u8d25\uff0c\u56de\u6eda\uff01\"); conn.setAutoCommit(true); //\u5173\u95ed\u975e\u81ea\u52a8\u63d0\u4ea4 } } finally { if (ps!= null) { ps.close();//\u5173\u95ed\u64cd\u4f5c\u5bf9\u8c61 } }","title":"6.5.2 \u901a\u8fc7PreparedStatement\u8fdb\u884c\u6279\u91cf\u6570\u636e\u64cd\u4f5c"},{"location":"xugu/#653-callablestatement","text":"CallableStatement \u5b58\u5728\u4e09\u79cd\u7c7b\u578b\u7684\u53c2\u6570 IN\u3001OUT \u548c INOUT\u3002 - IN\uff1a\u521b\u5efa SQL \u8bed\u53e5\u65f6\u5176\u53c2\u6570\u503c\u672a\u77e5\u3002\u4f7f\u7528 setXXX() \u65b9\u6cd5\u5c06\u503c\u7ed1\u5b9a\u5230 IN \u53c2\u6570\u3002 - OUT\uff1a\u7531 SQL \u8bed\u53e5\u8fd4\u56de\u7684\u53c2\u6570\u503c\u3002\u53ef\u4ee5\u4f7f\u7528 getXXX() \u65b9\u6cd5\u4ece OUT \u53c2\u6570\u4e2d\u68c0\u7d22\u503c\u3002 - INOUT\uff1a\u63d0\u4f9b\u8f93\u5165\u548c\u8f93\u51fa\u503c\u7684\u53c2\u6570\u3002\u4f7f\u7528 setXXX() \u65b9\u6cd5\u7ed1\u5b9a\u53d8\u91cf\u5e76\u4f7f\u7528getXXX() \u65b9\u6cd5\u68c0\u7d22\u503c\u3002 \u793a\u4f8b 1\uff1a\u901a\u8fc7\u53c2\u6570\u4e0b\u6807\u7ed1\u5b9a\u53c2\u6570 //\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\u8bed\u53e5 String sql =\"{call pro_2(?,?,?)}\"; //\u521b\u5efaCallableStatement\u5bf9\u8c61 CallableStatement cstm = conn.prepareCall(sql); //\u901a\u8fc7\u53c2\u6570\u4e0b\u6807\u8bbe\u7f6e\u53c2\u6570(IN\u53c2\u6570) cstm.setInt(1, 20490); //\u6ce8\u518cOUT\u53c2\u6570\u6570\u636e\u7c7b\u578b cstm.registerOutParameter(2, com.xugu.cloudjdbc.Types.VARCHAR); cstm.registerOutParameter(3, com.xugu.cloudjdbc.Types.VARCHAR); //\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528 cstm.execute(); //\u83b7\u53d6\u5b58\u50a8\u8fc7\u7a0b\u8f93\u51fa\u53c2\u6570 String name = (String)cstm.getObject(2); String address = (String)cstm.getObject(3); \u793a\u4f8b 2\uff1a\u901a\u8fc7\u53c2\u6570\u540d\u7ed1\u5b9a\u53c2\u6570 //\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528\u8bed\u53e5 CallableStatement pstm = conn.prepareCall(\"insert into tt1 values(:id,:name)\"); //\u901a\u8fc7\u53c2\u6570\u540d\u8bbe\u7f6e\u53c2\u6570(IN\u53c2\u6570) pstm.setInt(\"id\", 1); pstm.setString(\"name\", \"cloud\"); //\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u8c03\u7528 pstm.execute();","title":"6.5.3 CallableStatement\u7ed1\u5b9a\u53c2\u6570"},{"location":"xugu/#66","text":"ResultSet \u7c7b\u662f\u901a\u8fc7 Statement \u53ca\u5176\u5b50\u7c7b\u6267\u884c SQL \u67e5\u8be2\u8bed\u53e5\u5f97\u5230\u7684\u7ed3\u679c\u96c6\u3002ResultSet \u7c7b\u5305\u542b\u4e09\u4e2a\u91cd\u8981\u5c5e\u6027\uff1aResultSet \u5bf9\u8c61\u5e76\u53d1\u6a21\u5f0f\u3001ResultSet \u5bf9\u8c61\u5149\u6807\u5904\u7406\u65b9\u5411\u3001ResultSet \u5bf9\u8c61\u5149\u6807\u7c7b\u578b\u3002ResultSet \u7c7b\u5177\u6709\u6307\u5411\u5f53\u524d\u7ed3\u679c\u96c6\u6570\u636e\u884c\u4f4d\u7f6e\u5149\u6807\uff0c\u5149\u6807\u4f4d\u7f6e\u521d\u59cb\u88ab\u7f6e\u4e8e\u7b2c\u4e00\u884c\u4e4b\u524d\uff0c\u901a\u8fc7 ResultSet \u7c7b\u5c01\u88c5\u7684\u5149\u6807\u79fb\u52a8\u65b9\u6cd5\u5b9e\u73b0\u5bf9\u5149\u6807\u4f4d\u7f6e\u7684\u63a7\u5236\uff0c\u5f53 ResultSet \u5bf9\u8c61\u7684\u5149\u6807\u79fb\u81f3\u6570\u636e\u7ed3\u679c\u96c6\u672b\u5c3e\u65f6 (\u4e0b\u4e00\u884c\u65e0\u6570\u636e)\uff0c\u8fd4\u56de FALSE\u3002 \u5728\u865a\u8c37 JDBC \u4e2d\uff0cResultSet \u7c7b\u5206\u4e3a\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u548c\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\uff08\u901a\u8fc7 URL \u8fde\u63a5\u4e32\u53c2\u6570 recv_mode \u914d\u7f6e\uff09\u3002\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u9ed8\u8ba4\u5c5e\u6027\u4e3a\u4e0d\u53ef\u66f4\u65b0\u3001\u5411\u524d\u79fb\u52a8\u3001\u53ef\u4ee5\u6eda\u52a8\uff1b\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u9ed8\u8ba4\u5c5e\u6027\u4e3a\u4e0d\u53ef\u66f4\u65b0\u3001\u53ea\u5411\u524d\u79fb\u52a8\u3001\u4e0d\u53ef\u6eda\u52a8\u3002 Statement \u5bf9\u8c61\u6267\u884c SQL \u8bed\u53e5\u8fd4\u56de\u7ed3\u679c\u96c6\u4ec5\u80fd\u662f\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\uff0c\u800c PreparedStatement \u5bf9\u8c61\u6267\u884c SQL \u8bed\u53e5\u8fd4\u56de\u7ed3\u679c\u96c6\u53ef\u4e3a\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u6216\u5ba2\u6237\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u3002 \u5f53\u6267\u884c SQL \u8fd4\u56de\u6570\u636e\u7ed3\u679c\u96c6\u8f83\u5927\u65f6\uff0c\u5efa\u8bae\u4f7f\u7528\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\uff0c\u907f\u514d JVM \u7684\u6ea2\u51fa\u3002 {.is-info}","title":"6.6 \u5904\u7406\u6267\u884c\u7ed3\u679c"},{"location":"xugu/#661-resultset","text":"\u521b\u5efa Statement \u5bf9\u8c61\u65f6\uff0c\u8bbe\u7f6e Statement \u5c5e\u6027 RresultSetConcurrency \u4e3a ResultSet.CONCUR_UPDATABLE\uff0c\u5e76\u4e14\u6570\u636e\u5e93 URL \u8fde\u63a5\u4e32\u5c5e\u6027 return_rowid \u8bbe\u7f6e\u4e3a TRUE\u65f6\uff0cStatement \u5bf9\u8c61\u6267\u884c SQL \u8bed\u53e5\u8fd4\u56de\u7684 ResultSet \u7ed3\u679c\u96c6\u624d\u80fd\u88ab\u66f4\u65b0\u3002\u5f53 ResultSet \u5bf9\u8c61\u4e3a\u53ef\u66f4\u65b0\u7ed3\u679c\u96c6\u65f6\uff0c\u5c06\u5149\u6807\u79fb\u81f3\u63d2\u5165\u4f4d\u7f6e\uff0c\u53ef\u8c03\u7528 ResultSet \u7c7b\u5bf9\u5e94\u7684 update \u65b9\u6cd5\u4fee\u6539\u7ed3\u679c\u96c6\u4e2d\u884c\u6570\u636e\uff0c\u5e76\u901a\u8fc7 updateRow \u65b9\u6cd5\u5c06\u66f4\u6539\u6570\u636e\u66f4\u65b0\u5230\u6570\u636e\u5e93\u4e2d\u3002 \u793a\u4f8b\uff1a\u901a\u8fc7\u4fee\u6539\u7ed3\u679c\u96c6\u4e2d\u6570\u636e\u503c\u66f4\u6539\u6570\u636e\u5e93\u4e2d\u5bf9\u5e94\u8bb0\u5f55 //\u521b\u5efaStatement\u5bf9\u8c61\u5e76\u8bbe\u7f6e\u7ed3\u679c\u96c6\u5c5e\u6027\u4e3a\u53ef\u66f4\u65b0 Statement stm = conn.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_UPDATABLE); //\u6267\u884cSQL\u8bed\u53e5 ResultSet rs = stm.executeQuery(sql); //\u7ed3\u679c\u96c6\u904d\u5386 while(rs.next()) { //\u66f4\u65b0\u7ed3\u679c\u96c6\u4e2d\u6307\u5b9a\u5217\u6570\u636e rs.updateLong(1, 5); //\u66f4\u65b0\u7ed3\u679c\u96c6\u4e2d\u6307\u5b9a\u5217\u6570\u636e rs.updateFloat(3, 12.3f); //\u7ed3\u679c\u96c6\u53d8\u66f4\u56de\u5199\u5165\u6570\u636e\u5e93 rs.updateRow(); } \u901a\u8fc7\u8c03\u7528 ResultSet \u7c7b\u7684 next()\u3001previous()\u3001absolute(int) \u65b9\u6cd5\u79fb\u52a8\u5149\u6807\u4f4d\u7f6e\uff0c\u5c06\u5149\u6807\u4f4d\u7f6e\u79fb\u52a8\u5230\u6307\u5b9a\u6570\u636e\u884c\uff0c\u901a\u8fc7 ResultSet \u7c7b\u5bf9\u5e94\u7684 get \u65b9\u6cd5\u83b7\u53d6\u884c\u6570\u636e\u3002 \u5982\u4f7f\u7528\u7ed3\u679c\u96c6\u66f4\u65b0\u6570\u636e\u5e93\u6570\u636e\uff0c\u9700\u5728\u5efa\u7acb\u6570\u636e\u5e93\u8fde\u63a5\u65f6\uff0c\u8bbe\u7f6e\u8fde\u63a5\u5c5e\u6027 return_rowid \u4e3aTRUE\uff0c\u4e14\u5728\u751f\u6210\u6267\u884c SQL \u8bed\u53e5\u5bf9\u8c61\u65f6\uff0c\u5e76\u53d1\u5c5e\u6027\u6307\u5b9a\u4e3a ResultSet.CONCUR_UPDATABLE\u3002 {.is-info}","title":"6.6.1 \u66f4\u65b0ResultSet\u7ed3\u679c\u96c6"},{"location":"xugu/#662","text":"\u793a\u4f8b 1\uff1a \u7edf\u8ba1\u7ed3\u679c\u96c6\u603b\u6761\u6570 //\u521b\u5efaStatement\u5bf9\u8c61 Statement stm= conn.createStatement(); stm.execute(\"create table test(id int identity(1,1));insert into test values(default)\"); //\u6267\u884c\u7ed3\u679c\u96c6\u67e5\u8be2 ResultSet rs = stm.executeQuery(\"select * from test\") //\u79fb\u52a8\u5149\u6807\u81f3\u7ed3\u679c\u96c6\u672b\u5c3e rs.last(); //\u83b7\u53d6\u7ed3\u679c\u96c6\u884c\u6570 int rsCounts = rs.getRow();","title":"6.6.2 \u901a\u8fc7\u79fb\u52a8\u5149\u6807\u83b7\u53d6\u7ed3\u679c\u96c6\u6761\u6570"},{"location":"xugu/#663","text":"\u865a\u8c37 JDBC \u652f\u6301\u591a\u7ed3\u679c\u96c6\u5904\u7406\uff0c\u5141\u8bb8 Statement \u63a5\u53e3\u652f\u6301\u591a\u91cd\u6253\u5f00\u7684 ResultSet \u5bf9\u8c61\u3002\u6267\u884c\u8bed\u53e5\u53ef\u4ee5\u662f\u591a\u6761 SQL \u8bed\u53e5\u7684\u96c6\u5408\uff0c\u5373\u4e00\u6b21\u6027\u5411\u865a\u8c37\u670d\u52a1\u5668\u53d1\u9001\u591a\u6761 SQL \u8bed\u53e5\uff0c\u865a\u8c37\u670d\u52a1\u5668\u6267\u884c\u5b8c SQL \u8bed\u53e5\u540e\u8fd4\u56de\u591a\u4e2a\u6267\u884c\u7ed3\u679c\uff1b\u4ea6\u6216\u5b58\u50a8\u8fc7\u7a0b\u5b9a\u4e49\u6709\u591a\u4e2a\u8fd4\u56de\u7ed3\u679c\u96c6\u3002\u865a\u8c37 JDBC \u7684 Statement \u91cd\u8f7d\u4e86 Statement \u63a5\u53e3\u4e2d\u7684 getMoreResults() \u65b9\u6cd5\u3002 \u793a\u4f8b\uff1a\u591a\u7ed3\u679c\u96c6\u5904\u7406 //SQL\u8bed\u53e5\u5305\u542b\u591a\u6761\u67e5\u8be2\u547d\u4ee4 String sql=\" SELECT * FROM A1 WHERE D2=(SELECT AVG(D2) FROM A1 GROUP BY D1);SELECT * FROM A1 WHERE D2>(SELECT MIN(D2) FROM A1 GROUP BY D1)\"; //\u521b\u5efaStatement\u5bf9\u8c61 Statement stm = conn.createStatement(); //\u6267\u884cSQL\u8bed\u53e5 boolean f = stm.execute(sql); //\u5224\u65ad\u662f\u5426\u6709ResultSet\u5bf9\u8c61\u4ea7\u751f if(f == true){ //\u83b7\u53d6\u7ed3\u679c\u96c6\u5bf9\u8c61 ResultSet rs1 = stm.getResultSet(); ... ... ... ... } while(true) { //\u5224\u65adStatement\u662f\u5426\u8fd4\u56de\u4e86\u591a\u4e2aResultSet\u5bf9\u8c61 if(!stm.getMoreResults(Statement.CLOSE_CURRENT_RESULT)){ break; } else if((rs2 = cstm.getResultSet())!=null) { ... ... ... ...//\u6570\u636e\u5904\u7406\u90e8\u5206\u7701\u7565 } }","title":"6.6.3 \u591a\u7ed3\u679c\u96c6\u5904\u7406"},{"location":"xugu/#664","text":"\u865a\u8c37JDBC\u4e2d\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7ed3\u679c\u96c6\u751f\u6210\u9700\u6ee1\u8db3\u4e24\u4e2a\u6761\u4ef6\uff1aURL\u8fde\u63a5\u4e32\u5c5e\u6027recv_mode\u503c\u4e3a2\uff0cStatement\u5bf9\u8c61\u6267\u884cSQL\u8bed\u53e5\u4e3a\u5355\u6761SELECT\u8bed\u53e5\u3002 \u5e94\u7528\u7a0b\u5e8f\u7aef\u901a\u8fc7Statement\u7c7b\u7684setFetchSize(int)\u65b9\u6cd5\u6216ResultSet\u7c7b\u7684setFetchSize(int)\u65b9\u6cd5\u8bbe\u7f6e\u6bcf\u6b21\u4ece\u670d\u52a1\u5668\u7aef\u83b7\u53d6\u591a\u5c11\u6761\u6570\u636e\u3002 \u4f7f\u7528\u670d\u52a1\u5668\u7aef\u6e38\u6807\u7684 ResultSet \u5bf9\u8c61\uff0c\u5149\u6807\u53ea\u80fd\u5355\u5411\u5411\u524d\u6b63\u5411\u79fb\u52a8\uff0c\u4e0d\u80fd\u5411\u540e\u79fb\u52a8\u6216\u6765\u56de\u6eda\u52a8\u3002 {.is-info} \u793a\u4f8b\uff1a\u865a\u8c37\u6570\u636e\u5e93\u670d\u52a1\u5668\u7aef\u6e38\u6807\u4f7f\u7528 //\u521b\u5efa\u865a\u8c37JDBC\u7279\u6709Statement\u5bf9\u8c61 Statement stm = (com.xugu.cloudjdbc.Statement)conn.createStatement(); //\u5f00\u542f\u670d\u52a1\u5668\u7aef\u6e38\u6807 stm.setServerCursor(true); //\u8bbe\u7f6e\u670d\u52a1\u5668\u7aef\u6e38\u6807\u5355\u6b21\u8fd4\u56de\u6570\u636e\u6761\u6570 stm.setFetchSize(1000); //\u6267\u884cSQL\u8bed\u53e5 ResultSet rs = stm.executeQuery(\"select * from t1\"); //\u904d\u5386\u6570\u636e while\uff08rs.next()\uff09 { ... ... ... ... } //\u5173\u95ed\u670d\u52a1\u5668\u7aef\u6e38\u6807 stm.setServerCursor(false);","title":"6.6.4 \u670d\u52a1\u5668\u7aef\u6e38\u6807\u4f7f\u7528"},{"location":"xugu/#665-generatedkeys","text":"JDBC 3.0 \u89c4\u8303\u4e2d\u5bf9\u4e8e\u81ea\u52a8\u4ea7\u751f\u7684\u5173\u952e\u5b57\u6570\u503c\uff0c\u5b9a\u4e49\u4e86\u63a5\u53e3\u89c4\u8303\uff0c\u5373\uff1agetGeneratedKeys() \u65b9\u6cd5\u3002 \u4e3a\u4e86\u89e3\u51b3\u5bf9\u83b7\u53d6\u81ea\u52a8\u4ea7\u751f\u7684\u6216\u81ea\u52a8\u589e\u52a0\u7684\u5173\u952e\u5b57\u7684\u503c\u7684\u9700\u6c42\uff0c\u865a\u8c37 JDBC \u6839\u636e JDBC3.0 \u89c4\u8303\u63d0\u4f9b\u4e86\u83b7\u5f97\u5173\u952e\u5b57\u503c\u7684\u65b9\u6cd5\u3002\u83b7\u53d6\u5173\u952e\u5b57\u7684\u503c\uff0c\u9700\u8981\u5728\u6267\u884c\u65b9\u6cd5\u4e2d\u6307\u5b9a\u81ea\u589e\u5173\u952e\u5b57\u6807\u8bb0\u3002SQL \u8bed\u53e5\u6267\u884c\u5b8c\u540e\uff0c\u8c03\u7528 Statement \u5bf9\u8c61\u7684 getGeneratedKeys() \u65b9\u6cd5\uff0c\u83b7\u5f97\u5305\u542b\u81ea\u589e\u957f\u503c\u7684 ResultSet \u5bf9\u8c61\u3002 \u793a\u4f8b\uff1a\u83b7\u53d6\u6570\u636e\u5e93\u81ea\u589e\u957f\u5173\u952e\u5b57\u7684\u503c //\u521b\u5efaStatement\u5bf9\u8c61 Statement stmt = conn.createStatement(); //\u6307\u5b9a\u81ea\u589e\u957f\u5173\u952e\u5b57\u7684\u6807\u8bc6 String[] colN = {\"id\"}; //\u5728\u6267\u884c\u65b9\u6cd5\u4e2d\u5f15\u5165\u81ea\u589e\u957f\u5173\u952e\u5b57\u6807\u8bc6 stmt.executeUpdate(\"INSERT INTO authors(first_name, last_name) VALUES (\u2018Ghq\u2019, \u2018Wxl\u2019)\",colN); //\u83b7\u53d6\u7ed3\u679c\u96c6 ResultSet rs = stmt.getGeneratedKeys(); if ( rs.next() ) { //\u83b7\u53d6\u7ed3\u679c\u96c6\u4e2d\u7684\u81ea\u589e\u957f\u503c \u3000\u3000 int key = rs.getInt(); }","title":"6.6.5 \u68c0\u7d22\u81ea\u52a8\u4ea7\u751f\u7684\u5173\u952e\u5b57GeneratedKeys"},{"location":"xugu/#67","text":"\u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u56e0\u5904\u7406\u9700\u8981\u6240\u5efa\u7acb\u7684 ResultSet\u3001Statement\u3001PreparedStatement \u7b49\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61\uff0c\u5728\u4f7f\u7528\u5b8c\u540e\u5fc5\u987b\u5173\u95ed\u3002\u5173\u95ed\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61\uff0c\u76f4\u63a5\u8c03\u7528\u5bf9\u5e94\u7684\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61 close() \u65b9\u6cd5\u5373\u53ef\u3002 \u5f53\u4e0d\u518d\u9700\u8981\u548c\u865a\u8c37\u6570\u636e\u5e93\u8fdb\u884c\u4ea4\u4e92\u65f6\uff0c\u9700\u65ad\u5f00\u6570\u636e\u5e93\u8fde\u63a5\u3002\u8c03\u7528 Connection \u7c7b\u7684 close() \u65b9\u6cd5\u5373\u4f1a\u5173\u95ed\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u540c\u65f6\u91ca\u653e\u8fde\u63a5\u4e0a\u6240\u6301\u6709\u7684\u6240\u6709\u6570\u636e\u5e93\u8d44\u6e90\u3002 \u6570\u636e\u5e93\u8fde\u63a5\u4e3a\u975e\u81ea\u52a8\u63d0\u4ea4\u65f6\uff0c\u6570\u636e\u5e93\u8d44\u6e90\u5bf9\u8c61\u5728\u4f7f\u7528\u5b8c\u540e\uff0c\u82e5\u672a\u53ca\u65f6\u5173\u95ed\uff0c\u6b64\u65f6\u8fdb\u884c DDL \u64cd\u4f5c\u5c06\u4f1a\u5bfc\u81f4\u865a\u8c37\u6570\u636e\u5e93\u52a0\u9501\u8d85\u65f6\u6216\u5931\u8d25\u3002 {.is-info}","title":"6.7 \u91ca\u653e\u8d44\u6e90"},{"location":"xugu/#_4","text":"JDBC 3.0 \u89c4\u8303\u5b9a\u4e49\u6709 java.sql.Blob \u4e0e java.sql.Clob \u63a5\u53e3\uff0c\u6b64\u4e24\u7c7b\u63a5\u53e3\u4e3a\u6570\u636e\u5e93\u5927\u5bf9\u8c61\u6570\u636e\u5904\u7406\u63a5\u53e3\u3002\u865a\u8c37\u6570\u636e\u5e93\u5927\u5bf9\u8c61\u5b57\u6bb5\u7c7b\u578b\u5305\u542b\uff1ablob\u3001clob\u3001binary\u3002 \u5728\u865a\u8c37 JDBC \u4e2d\uff0c\u83b7\u53d6\u5927\u5bf9\u8c61\u6570\u636e\u6709\u4e24\u79cd\u8fd4\u56de\u65b9\u5f0f\uff1a\u4e00\u79cd\u662f\u6570\u636e\u76f4\u63a5\u8fd4\u56de\uff1b\u53e6\u4e00\u79cd\u662f\u8fd4\u56de\u63cf\u8ff0\u7b26\u65b9\u5f0f\u3002\u5f53\u8fd4\u56de\u6570\u636e\u4e2d\u5927\u5bf9\u8c61\u6570\u636e\u8f83\u591a\u65f6\uff0c\u5efa\u8bae\u4f7f\u7528\u8fd4\u56de\u63cf\u8ff0\u7b26\u65b9\u5f0f\uff0c\u4ece\u800c\u907f\u514d\u56e0\u6570\u636e\u8fc7\u591a\u8fc7\u5927\u9020\u6210\u7684 JVM \u5185\u5b58\u6ea2\u51fa\u3002\u865a\u8c37 JDBC \u9a71\u52a8\u542f\u7528\u5927\u5bf9\u8c61\u8fd4\u56de\u63cf\u8ff0\u7b26\u65b9\u5f0f\uff0c\u9700\u5728\u8fde\u63a5 URL \u4e32\u4e0a\u914d\u7f6e\u5c5e\u6027 lob_ret \u4e3a descriptor \u3002","title":"\u4e03. \u5927\u5bf9\u8c61\u7c7b\u578b\u5904\u7406"},{"location":"xugu/#71","text":"LOB \u5bf9\u8c61\u7684\u63d2\u5165\u5fc5\u987b\u901a\u8fc7 PreparedStatement\u3001CallableStatement \u7c7b\u7684 setXXX() \u65b9\u6cd5\u65b9\u5f0f\u5b9e\u73b0\u3002\u865a\u8c37 JDBC \u4e2d PreparedStatement \u63d0\u4f9b\u591a\u79cd\u65b9\u6cd5\u8bbe\u7f6e\u5927\u5bf9\u8c61\u53c2\u6570\u503c\uff0c\u5982\u4e0b\u5217\u65b9\u6cd5\uff1a setBinaryStream(int parameterIndex,InputStream x) setBlob(int parameterIndex, Blob x) setBlob(int parameterIndex, InputStream x) setBytes(int parameterIndex,byte[] x) setCharacterStream(int parameterIndex, Reader reader) setClob(int parameterIndex, Clob x) setClob(int parameterIndex, Reader reader) setString(int parameterIndex, String x) \u793a\u4f8b\uff1a\u5e94\u7528\u7a0b\u5e8f\u63d2\u5165\u5927\u5bf9\u8c61\u6570\u636e\uff0c\u5176\u4e2d\u8868 b1 \u5b57\u6bb5 photo \u4e3a blob \u7c7b\u578b\uff0c\u5b57\u6bb5 text \u4e3a clob \u7c7b\u578b PreparedStatement ps = conn.prepareStatement(\"INSERT INTO b1 VALUES (?, ?)\")\u037e // blobBytes is a byte[] type ps.setBlob(1, new com.xugu.cloudjdbc.Blob(blobBytes))\u037e // clobString is a String type ps.setClob(2, new com.xugu.cloudjdbc.Clob(clobString))\u037e ps.execute()\uff1b","title":"7.1 \u5411\u8868\u4e2d\u63d2\u5165\u5927\u5bf9\u8c61"},{"location":"xugu/#72","text":"\u901a\u8fc7\u865a\u8c37 JDBC \u83b7\u53d6\u5927\u5bf9\u8c61\u503c\uff0c\u6570\u636e\u5e93 CLOB \u5bf9\u8c61\u53ef\u901a\u8fc7\u5b57\u7b26\u4e32\u5f62\u5f0f\u6216\u6d41\u5f0f\u6570\u636e\u5f62\u5f0f\u83b7\u53d6\uff0c\u6570\u636e\u5e93 BLOB \u5bf9\u8c61\u53ea\u901a\u8fc7\u6d41\u5f0f\u6570\u636e\u5f62\u5f0f\u83b7\u53d6\u3002 \u793a\u4f8b 1\uff1a\u6d41\u5f0f\u83b7\u53d6 CLOB \u5bf9\u8c61 Statement stm = xgConn.createStatement(); String sql=\u201dselect remark from t_clob where id=101\u201d; ResultSet rs = stm.executeQuery(sql); while(rs.next) { Clob data = rs.getClob(\"remark \"); //\u4ee5\u5b57\u7b26\u6d41\u65b9\u5f0f\u83b7\u53d6\u6570\u636e Reader rd = data.getCharacterStream(); char[] sc = new char[1000]; StringBuffer sb = new StringBuffer(); int len = 0; while((len=rd.read(sc)) !=-1) { sb.append(new String(sc,0,len)); } System.out.println(sb.toString()); } \u793a\u4f8b 2\uff1a\u865a\u8c37 JDBC \u5141\u8bb8\u4ee5\u5b57\u7b26\u4e32\u7684\u5f62\u5f0f\u8bfb\u53d6 CLOB \u5bf9\u8c61 String sql=\"select text from t_clob\"\u037e Statement stm=conn.createStatement()\u037e ResultSet rs=stm.executeQuery(sql)\u037e while(rs.next()) { String clobStr =rs.getString(\"text\")\u037e }","title":"7.2 \u67e5\u8be2\u5927\u5bf9\u8c61\u6570\u636e"},{"location":"xugu/#_5","text":"\u865a\u8c37\u6570\u636e\u5e93\u662f\u4e00\u6b3e\u5177\u5907\u9ad8\u5b89\u5168\u3001\u9ad8\u6027\u80fd\u3001\u9ad8\u6269\u5c55\u7b49\u7279\u6027\u7684\u3001\u57fa\u4e8e\u5206\u5e03\u5f0f\u67b6\u6784\u7684\u5206\u5e03\u5f0f\u4e8b\u52a1\u578b\u6570\u636e\u5e93\u3002\u90e8\u7f72\u6570\u636e\u5e93\u96c6\u7fa4\u65f6\uff0c\u591a\u53f0\u670d\u52a1\u5668\u4f5c\u4e3a\u4e00\u4e2a\u6574\u4f53\u5bf9\u5916\u63d0\u4f9b\u6570\u636e\u670d\u52a1\u3002\u5728\u591a\u673a\u73af\u5883\u4e0b\uff0c\u4e3a\u4f7f\u6570\u636e\u5e93\u8fde\u63a5\u5747\u5300\u5206\u5e03\u4e8e\u5404\u53f0\u670d\u52a1\uff0c\u865a\u8c37 JDBC \u5728\u63a5\u53e3\u5c42\u5b9e\u73b0\u4e86\u57fa\u4e8e\u8f6f\u8d1f\u8f7d\u5747\u8861\u6280\u672f\u7684\u6570\u636e\u5e93\u8fde\u63a5\u5efa\u7acb\u65b9\u5f0f\u3002 \u865a\u8c37\u6570\u636e\u5e93\u8d1f\u8f7d\u5747\u8861\u5206\u914d\u6570\u636e\u5e93\u8fde\u63a5\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a\u987a\u5e8f\u5206\u914d\u3001\u968f\u673a\u5206\u914d\u3002\u901a\u8fc7\u5728\u6570\u636e\u5e93 URL \u8fde\u63a5\u4e32\u4e0a\u8bbe\u7f6e\u53c2\u6570 conn_type(conn_type:1, \u968f\u673a\u5206\u914d\uff1b2, \u987a\u5e8f\u5206\u914d) \u7c7b\u578b\uff0c\u5b9e\u73b0\u6570\u636e\u5e93\u8fde\u63a5\u5728\u591a\u96c6\u7fa4\u73af\u5883\u4e0b\u7684\u8d1f\u8f7d\u5747\u8861\u3002\u9ed8\u8ba4\u8d1f\u8f7d\u5747\u8861\u5206\u914d\u65b9\u5f0f\uff1a\u987a\u5e8f\u5206\u914d\u3002 \u865a\u8c37 JDBC \u63d0\u4f9b\u4e09\u79cd\u914d\u7f6e\u8d1f\u8f7d\u5747\u8861\u7684\u65b9\u5f0f\uff1a\u6570\u636e\u5e93 URL \u8fde\u63a5\u4e32\u914d\u7f6e\u3001\u6570\u636e\u5e93\u8fde\u63a5\u5c5e\u6027\u6587\u4ef6 Properties \u914d\u7f6e\u3001\u6570\u636e\u5e93\u8fde\u63a5 XML \u6587\u4ef6\u914d\u7f6e\u3002 1. URL \u8fde\u63a5\u4e32\u914d\u7f6e Class.forName(\"com.xugu.cloudjdbc.Driver\"); //URL\u8fde\u63a5\u4e32\u4e2d\u4f7f\u7528ips\u5c5e\u6027\u914d\u7f6e\u591aIP\u8d1f\u8f7d\u5747\u8861 Connection conn = DriverManager.getConnection(\"jdbc:xugu://192.168.0.201:5138/SYSTEM?user=SYSDBA&password=SYSDBA&conn_type=1&ips=192.168.0.205,192.168.0.204,192.168.1.206\") \u8fde\u63a5\u5c5e\u6027\u6587\u4ef6 Properties \u914d\u7f6e (Vector \u6216\u5b57\u7b26\u4e32\u6570\u7ec4) Properties info=new Properties(); Class.forName(\"com.xugu.cloudjdbc.Driver\"); //Vector\u7ed3\u6784\u5b58\u653e\u8d1f\u8f7d\u5747\u8861\u591aIP\u5730\u5740\u65b9\u5f0f Vector<String> ipsVector=new Vector<String>(); ipsVector.add(\"192.168.1.201\"); ipsVector.add(\"192.168.1.204\"); ipsVector.add(\"192.168.1.205\"); ipsVector.add(\"192.168.1.206\"); info.put(\"ips\", ipsVector); //\u6570\u7ec4\u5b58\u653e\u8d1f\u8f7d\u5747\u8861\u591aIP\u5730\u5740\u65b9\u5f0f String[] ips={\"192.168.1.205\",\"192.168.1.204\",\"192.168.1.206\"}; info.put(\"ips\", ips); Connection conn = DriverManager.getConnection(\"jdbc:xugu://192.168.1.201:5138/SYSTEM?user=SYSDBA&password=SYSDBA&conn_type=2\",info); \u8fde\u63a5\u5c5e\u6027 XML \u6587\u4ef6\u914d\u7f6e <?xml version=\"1.0\" encoding=\"utf-8\"?> <listeners> <listener> <ip>192.168.1.206</ip> </listener> <listener> <ip>192.168.1.204</ip> </listener> <listener> <ip>192.168.1.205</ip> </listener> </listeners> Class.forName(\"com.xugu.cloudjdbc.Driver\"); Connection conn = DriverManager.getConnection(\"jdbc:xugu:file://xuguClouldListener.xml:5138/SYSTEM?user=SYSDBA&password=SYSDBA&conn_type=1\");","title":"\u516b. \u865a\u8c37\u6570\u636e\u5e93\u8d1f\u8f7d\u5747\u8861"}]}